var H5=t=>{throw TypeError(t)};var Tb=(t,e,n)=>e.has(t)||H5("Cannot "+n);var nt=(t,e,n)=>(Tb(t,e,"read from private field"),n?n.call(t):e.get(t)),yn=(t,e,n)=>e.has(t)?H5("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Tn=(t,e,n,i)=>(Tb(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),Ke=(t,e,n)=>(Tb(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();var H6=(t=>(t.MAIN_PROCESS_ERROR="main-process-error",t.LOG_UNEXPECTED="log-unexpected",t))(H6||{});/**
* @vue/shared v3.5.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function nr(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Et={},Bu=[],Si=()=>{},Iu=()=>!1,Wc=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),wS=t=>t.startsWith("onUpdate:"),Tt=Object.assign,SS=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},vZ=Object.prototype.hasOwnProperty,Ut=(t,e)=>vZ.call(t,e),Be=Array.isArray,Vu=t=>qd(t)==="[object Map]",Gc=t=>qd(t)==="[object Set]",Y5=t=>qd(t)==="[object Date]",wZ=t=>qd(t)==="[object RegExp]",lt=t=>typeof t=="function",mt=t=>typeof t=="string",Ds=t=>typeof t=="symbol",qt=t=>t!==null&&typeof t=="object",CS=t=>(qt(t)||lt(t))&&lt(t.then)&&lt(t.catch),Y6=Object.prototype.toString,qd=t=>Y6.call(t),SZ=t=>qd(t).slice(8,-1),t1=t=>qd(t)==="[object Object]",n1=t=>mt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ca=nr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),CZ=nr("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),i1=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},AZ=/-\w/g,vn=i1(t=>t.replace(AZ,e=>e.slice(1).toUpperCase())),xZ=/\B([A-Z])/g,vs=i1(t=>t.replace(xZ,"-$1").toLowerCase()),Uc=i1(t=>t.charAt(0).toUpperCase()+t.slice(1)),ju=i1(t=>t?`on${Uc(t)}`:""),Yi=(t,e)=>!Object.is(t,e),zu=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},K6=(t,e,n,i=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:i,value:n})},s1=t=>{const e=parseFloat(t);return isNaN(e)?t:e},dy=t=>{const e=mt(t)?Number(t):NaN;return isNaN(e)?t:e};let K5;const r1=()=>K5||(K5=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function kZ(t,e){return t+JSON.stringify(e,(n,i)=>typeof i=="function"?i.toString():i)}const PZ="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",TZ=nr(PZ),J5=2;function $Z(t,e=0,n=t.length){if(e=Math.max(0,Math.min(e,t.length)),n=Math.max(0,Math.min(n,t.length)),e>n)return"";let i=t.split(/(\r?\n)/);const s=i.filter((a,l)=>l%2===1);i=i.filter((a,l)=>l%2===0);let r=0;const o=[];for(let a=0;a<i.length;a++)if(r+=i[a].length+(s[a]&&s[a].length||0),r>=e){for(let l=a-J5;l<=a+J5||n>r;l++){if(l<0||l>=i.length)continue;const c=l+1;o.push(`${c}${" ".repeat(Math.max(3-String(c).length,0))}|  ${i[l]}`);const u=i[l].length,h=s[l]&&s[l].length||0;if(l===a){const p=e-(r-(u+h)),m=Math.max(1,n>r?u-p:n-e);o.push("   |  "+" ".repeat(p)+"^".repeat(m))}else if(l>a){if(n>r){const p=Math.max(Math.min(n-r,u),1);o.push("   |  "+"^".repeat(p))}r+=u+h}}break}return o.join(`
`)}function qe(t){if(Be(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],s=mt(i)?J6(i):qe(i);if(s)for(const r in s)e[r]=s[r]}return e}else if(mt(t)||qt(t))return t}const DZ=/;(?![^(]*\))/g,MZ=/:([^]+)/,IZ=/\/\*[^]*?\*\//g;function J6(t){const e={};return t.replace(IZ,"").split(DZ).forEach(n=>{if(n){const i=n.split(MZ);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function ee(t){let e="";if(mt(t))e=t;else if(Be(t))for(let n=0;n<t.length;n++){const i=ee(t[n]);i&&(e+=i+" ")}else if(qt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function RZ(t){if(!t)return null;let{class:e,style:n}=t;return e&&!mt(e)&&(t.class=ee(e)),n&&(t.style=qe(n)),t}const _Z="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",EZ="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",QZ="annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics",NZ="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",LZ=nr(_Z),FZ=nr(EZ),BZ=nr(QZ),VZ=nr(NZ),jZ="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",zZ=nr(jZ);function eT(t){return!!t||t===""}function ZZ(t,e){if(t.length!==e.length)return!1;let n=!0;for(let i=0;n&&i<t.length;i++)n=Da(t[i],e[i]);return n}function Da(t,e){if(t===e)return!0;let n=Y5(t),i=Y5(e);if(n||i)return n&&i?t.getTime()===e.getTime():!1;if(n=Ds(t),i=Ds(e),n||i)return t===e;if(n=Be(t),i=Be(e),n||i)return n&&i?ZZ(t,e):!1;if(n=qt(t),i=qt(e),n||i){if(!n||!i)return!1;const s=Object.keys(t).length,r=Object.keys(e).length;if(s!==r)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Da(t[o],e[o]))return!1}}return String(t)===String(e)}function o1(t,e){return t.findIndex(n=>Da(n,e))}const tT=t=>!!(t&&t.__v_isRef===!0),R=t=>mt(t)?t:t==null?"":Be(t)||qt(t)&&(t.toString===Y6||!lt(t.toString))?tT(t)?R(t.value):JSON.stringify(t,nT,2):String(t),nT=(t,e)=>tT(e)?nT(t,e.value):Vu(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[i,s],r)=>(n[$b(i,r)+" =>"]=s,n),{})}:Gc(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>$b(n))}:Ds(e)?$b(e):qt(e)&&!Be(e)&&!t1(e)?String(e):e,$b=(t,e="")=>{var n;return Ds(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};function qZ(t){return t==null?"initial":typeof t=="string"?t===""?" ":t:String(t)}/**
* @vue/reactivity v3.5.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ii;class AS{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.__v_skip=!0,this.parent=Ii,!e&&Ii&&(this.index=(Ii.scopes||(Ii.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Ii;try{return Ii=this,e()}finally{Ii=n}}}on(){++this._on===1&&(this.prevScope=Ii,Ii=this)}off(){this._on>0&&--this._on===0&&(Ii=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(this.effects.length=0,n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function XZ(t){return new AS(t)}function iT(){return Ii}function WZ(t,e=!1){Ii&&Ii.cleanups.push(t)}let hn;const Db=new WeakSet;class kf{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ii&&Ii.active&&Ii.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Db.has(this)&&(Db.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||rT(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,e3(this),oT(this);const e=hn,n=eo;hn=this,eo=!0;try{return this.fn()}finally{aT(this),hn=e,eo=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)PS(e);this.deps=this.depsTail=void 0,e3(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Db.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){W2(this)&&this.run()}get dirty(){return W2(this)}}let sT=0,ef,tf;function rT(t,e=!1){if(t.flags|=8,e){t.next=tf,tf=t;return}t.next=ef,ef=t}function xS(){sT++}function kS(){if(--sT>0)return;if(tf){let e=tf;for(tf=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;ef;){let e=ef;for(ef=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){t||(t=i)}e=n}}if(t)throw t}function oT(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function aT(t){let e,n=t.depsTail,i=n;for(;i;){const s=i.prevDep;i.version===-1?(i===n&&(n=s),PS(i),GZ(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=s}t.deps=e,t.depsTail=n}function W2(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(lT(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function lT(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Pf)||(t.globalVersion=Pf,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!W2(t))))return;t.flags|=2;const e=t.dep,n=hn,i=eo;hn=t,eo=!0;try{oT(t);const s=t.fn(t._value);(e.version===0||Yi(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{hn=n,eo=i,aT(t),t.flags&=-3}}function PS(t,e=!1){const{dep:n,prevSub:i,nextSub:s}=t;if(i&&(i.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=i,t.nextSub=void 0),n.subs===t&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)PS(r,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function GZ(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}function UZ(t,e){t.effect instanceof kf&&(t=t.effect.fn);const n=new kf(t);e&&Tt(n,e);try{n.run()}catch(s){throw n.stop(),s}const i=n.run.bind(n);return i.effect=n,i}function HZ(t){t.effect.stop()}let eo=!0;const cT=[];function Ma(){cT.push(eo),eo=!1}function Ia(){const t=cT.pop();eo=t===void 0?!0:t}function e3(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=hn;hn=void 0;try{e()}finally{hn=n}}}let Pf=0;class YZ{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class a1{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!hn||!eo||hn===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==hn)n=this.activeLink=new YZ(hn,this),hn.deps?(n.prevDep=hn.depsTail,hn.depsTail.nextDep=n,hn.depsTail=n):hn.deps=hn.depsTail=n,uT(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const i=n.nextDep;i.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=i),n.prevDep=hn.depsTail,n.nextDep=void 0,hn.depsTail.nextDep=n,hn.depsTail=n,hn.deps===n&&(hn.deps=i)}return n}trigger(e){this.version++,Pf++,this.notify(e)}notify(e){xS();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{kS()}}}function uT(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)uT(i)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const hy=new WeakMap,xc=Symbol(""),G2=Symbol(""),Tf=Symbol("");function Qi(t,e,n){if(eo&&hn){let i=hy.get(t);i||hy.set(t,i=new Map);let s=i.get(n);s||(i.set(n,s=new a1),s.map=i,s.key=n),s.track()}}function ga(t,e,n,i,s,r){const o=hy.get(t);if(!o){Pf++;return}const a=l=>{l&&l.trigger()};if(xS(),e==="clear")o.forEach(a);else{const l=Be(t),c=l&&n1(n);if(l&&n==="length"){const u=Number(i);o.forEach((h,p)=>{(p==="length"||p===Tf||!Ds(p)&&p>=u)&&a(h)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(Tf)),e){case"add":l?c&&a(o.get("length")):(a(o.get(xc)),Vu(t)&&a(o.get(G2)));break;case"delete":l||(a(o.get(xc)),Vu(t)&&a(o.get(G2)));break;case"set":Vu(t)&&a(o.get(xc));break}}kS()}function KZ(t,e){const n=hy.get(t);return n&&n.get(e)}function vu(t){const e=Lt(t);return e===t?e:(Qi(e,"iterate",Tf),ks(t)?e:e.map(so))}function l1(t){return Qi(t=Lt(t),"iterate",Tf),t}function ul(t,e){return zo(t)?pd(Aa(t)?so(e):e):so(e)}const JZ={__proto__:null,[Symbol.iterator](){return Mb(this,Symbol.iterator,t=>ul(this,t))},concat(...t){return vu(this).concat(...t.map(e=>Be(e)?vu(e):e))},entries(){return Mb(this,"entries",t=>(t[1]=ul(this,t[1]),t))},every(t,e){return oa(this,"every",t,e,void 0,arguments)},filter(t,e){return oa(this,"filter",t,e,n=>n.map(i=>ul(this,i)),arguments)},find(t,e){return oa(this,"find",t,e,n=>ul(this,n),arguments)},findIndex(t,e){return oa(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return oa(this,"findLast",t,e,n=>ul(this,n),arguments)},findLastIndex(t,e){return oa(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return oa(this,"forEach",t,e,void 0,arguments)},includes(...t){return Ib(this,"includes",t)},indexOf(...t){return Ib(this,"indexOf",t)},join(t){return vu(this).join(t)},lastIndexOf(...t){return Ib(this,"lastIndexOf",t)},map(t,e){return oa(this,"map",t,e,void 0,arguments)},pop(){return Sh(this,"pop")},push(...t){return Sh(this,"push",t)},reduce(t,...e){return t3(this,"reduce",t,e)},reduceRight(t,...e){return t3(this,"reduceRight",t,e)},shift(){return Sh(this,"shift")},some(t,e){return oa(this,"some",t,e,void 0,arguments)},splice(...t){return Sh(this,"splice",t)},toReversed(){return vu(this).toReversed()},toSorted(t){return vu(this).toSorted(t)},toSpliced(...t){return vu(this).toSpliced(...t)},unshift(...t){return Sh(this,"unshift",t)},values(){return Mb(this,"values",t=>ul(this,t))}};function Mb(t,e,n){const i=l1(t),s=i[e]();return i!==t&&!ks(t)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.done||(r.value=n(r.value)),r}),s}const eq=Array.prototype;function oa(t,e,n,i,s,r){const o=l1(t),a=o!==t&&!ks(t),l=o[e];if(l!==eq[e]){const h=l.apply(t,r);return a?so(h):h}let c=n;o!==t&&(a?c=function(h,p){return n.call(this,ul(t,h),p,t)}:n.length>2&&(c=function(h,p){return n.call(this,h,p,t)}));const u=l.call(o,c,i);return a&&s?s(u):u}function t3(t,e,n,i){const s=l1(t);let r=n;return s!==t&&(ks(t)?n.length>3&&(r=function(o,a,l){return n.call(this,o,a,l,t)}):r=function(o,a,l){return n.call(this,o,ul(t,a),l,t)}),s[e](r,...i)}function Ib(t,e,n){const i=Lt(t);Qi(i,"iterate",Tf);const s=i[e](...n);return(s===-1||s===!1)&&bp(n[0])?(n[0]=Lt(n[0]),i[e](...n)):s}function Sh(t,e,n=[]){Ma(),xS();const i=Lt(t)[e].apply(t,n);return kS(),Ia(),i}const tq=nr("__proto__,__v_isRef,__isVue"),dT=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ds));function nq(t){Ds(t)||(t=String(t));const e=Lt(this);return Qi(e,"has",t),e.hasOwnProperty(t)}class hT{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,i){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return r;if(n==="__v_raw")return i===(s?r?OT:yT:r?gT:mT).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const o=Be(e);if(!s){let l;if(o&&(l=JZ[n]))return l;if(n==="hasOwnProperty")return nq}const a=Reflect.get(e,n,Gn(e)?e:i);if((Ds(n)?dT.has(n):tq(n))||(s||Qi(e,"get",n),r))return a;if(Gn(a)){const l=o&&n1(n)?a:a.value;return s&&qt(l)?fy(l):l}return qt(a)?s?fy(a):Bl(a):a}}class fT extends hT{constructor(e=!1){super(!1,e)}set(e,n,i,s){let r=e[n];const o=Be(e)&&n1(n);if(!this._isShallow){const c=zo(r);if(!ks(i)&&!zo(i)&&(r=Lt(r),i=Lt(i)),!o&&Gn(r)&&!Gn(i))return c||(r.value=i),!0}const a=o?Number(n)<e.length:Ut(e,n),l=Reflect.set(e,n,i,Gn(e)?e:s);return e===Lt(s)&&(a?Yi(i,r)&&ga(e,"set",n,i):ga(e,"add",n,i)),l}deleteProperty(e,n){const i=Ut(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&i&&ga(e,"delete",n,void 0),s}has(e,n){const i=Reflect.has(e,n);return(!Ds(n)||!dT.has(n))&&Qi(e,"has",n),i}ownKeys(e){return Qi(e,"iterate",Be(e)?"length":xc),Reflect.ownKeys(e)}}class pT extends hT{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const iq=new fT,sq=new pT,rq=new fT(!0),oq=new pT(!0),U2=t=>t,zm=t=>Reflect.getPrototypeOf(t);function aq(t,e,n){return function(...i){const s=this.__v_raw,r=Lt(s),o=Vu(r),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=s[t](...i),u=n?U2:e?pd:so;return!e&&Qi(r,"iterate",l?G2:xc),Tt(Object.create(c),{next(){const{value:h,done:p}=c.next();return p?{value:h,done:p}:{value:a?[u(h[0]),u(h[1])]:u(h),done:p}}})}}function Zm(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function lq(t,e){const n={get(s){const r=this.__v_raw,o=Lt(r),a=Lt(s);t||(Yi(s,a)&&Qi(o,"get",s),Qi(o,"get",a));const{has:l}=zm(o),c=e?U2:t?pd:so;if(l.call(o,s))return c(r.get(s));if(l.call(o,a))return c(r.get(a));r!==o&&r.get(s)},get size(){const s=this.__v_raw;return!t&&Qi(Lt(s),"iterate",xc),s.size},has(s){const r=this.__v_raw,o=Lt(r),a=Lt(s);return t||(Yi(s,a)&&Qi(o,"has",s),Qi(o,"has",a)),s===a?r.has(s):r.has(s)||r.has(a)},forEach(s,r){const o=this,a=o.__v_raw,l=Lt(a),c=e?U2:t?pd:so;return!t&&Qi(l,"iterate",xc),a.forEach((u,h)=>s.call(r,c(u),c(h),o))}};return Tt(n,t?{add:Zm("add"),set:Zm("set"),delete:Zm("delete"),clear:Zm("clear")}:{add(s){!e&&!ks(s)&&!zo(s)&&(s=Lt(s));const r=Lt(this);return zm(r).has.call(r,s)||(r.add(s),ga(r,"add",s,s)),this},set(s,r){!e&&!ks(r)&&!zo(r)&&(r=Lt(r));const o=Lt(this),{has:a,get:l}=zm(o);let c=a.call(o,s);c||(s=Lt(s),c=a.call(o,s));const u=l.call(o,s);return o.set(s,r),c?Yi(r,u)&&ga(o,"set",s,r):ga(o,"add",s,r),this},delete(s){const r=Lt(this),{has:o,get:a}=zm(r);let l=o.call(r,s);l||(s=Lt(s),l=o.call(r,s)),a&&a.call(r,s);const c=r.delete(s);return l&&ga(r,"delete",s,void 0),c},clear(){const s=Lt(this),r=s.size!==0,o=s.clear();return r&&ga(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=aq(s,t,e)}),n}function c1(t,e){const n=lq(t,e);return(i,s,r)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?i:Reflect.get(Ut(n,s)&&s in i?n:i,s,r)}const cq={get:c1(!1,!1)},uq={get:c1(!1,!0)},dq={get:c1(!0,!1)},hq={get:c1(!0,!0)},mT=new WeakMap,gT=new WeakMap,yT=new WeakMap,OT=new WeakMap;function fq(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function pq(t){return t.__v_skip||!Object.isExtensible(t)?0:fq(SZ(t))}function Bl(t){return zo(t)?t:u1(t,!1,iq,cq,mT)}function TS(t){return u1(t,!1,rq,uq,gT)}function fy(t){return u1(t,!0,sq,dq,yT)}function mq(t){return u1(t,!0,oq,hq,OT)}function u1(t,e,n,i,s){if(!qt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=pq(t);if(r===0)return t;const o=s.get(t);if(o)return o;const a=new Proxy(t,r===2?i:n);return s.set(t,a),a}function Aa(t){return zo(t)?Aa(t.__v_raw):!!(t&&t.__v_isReactive)}function zo(t){return!!(t&&t.__v_isReadonly)}function ks(t){return!!(t&&t.__v_isShallow)}function bp(t){return t?!!t.__v_raw:!1}function Lt(t){const e=t&&t.__v_raw;return e?Lt(e):t}function Hs(t){return!Ut(t,"__v_skip")&&Object.isExtensible(t)&&K6(t,"__v_skip",!0),t}const so=t=>qt(t)?Bl(t):t,pd=t=>qt(t)?fy(t):t;function Gn(t){return t?t.__v_isRef===!0:!1}function Cn(t){return bT(t,!1)}function $S(t){return bT(t,!0)}function bT(t,e){return Gn(t)?t:new gq(t,e)}class gq{constructor(e,n){this.dep=new a1,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Lt(e),this._value=n?e:so(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,i=this.__v_isShallow||ks(e)||zo(e);e=i?e:Lt(e),Yi(e,n)&&(this._rawValue=e,this._value=i?e:so(e),this.dep.trigger())}}function yq(t){t.dep&&t.dep.trigger()}function Ys(t){return Gn(t)?t.value:t}function Oq(t){return lt(t)?t():Ys(t)}const bq={get:(t,e,n)=>e==="__v_raw"?t:Ys(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const s=t[e];return Gn(s)&&!Gn(n)?(s.value=n,!0):Reflect.set(t,e,n,i)}};function DS(t){return Aa(t)?t:new Proxy(t,bq)}class vq{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new a1,{get:i,set:s}=e(n.track.bind(n),n.trigger.bind(n));this._get=i,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}}function vT(t){return new vq(t)}function wq(t){const e=Be(t)?new Array(t.length):{};for(const n in t)e[n]=wT(t,n);return e}class Sq{constructor(e,n,i){this._object=e,this._key=n,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0,this._raw=Lt(e);let s=!0,r=e;if(!Be(e)||!n1(String(n)))do s=!bp(r)||ks(r);while(s&&(r=r.__v_raw));this._shallow=s}get value(){let e=this._object[this._key];return this._shallow&&(e=Ys(e)),this._value=e===void 0?this._defaultValue:e}set value(e){if(this._shallow&&Gn(this._raw[this._key])){const n=this._object[this._key];if(Gn(n)){n.value=e;return}}this._object[this._key]=e}get dep(){return KZ(this._raw,this._key)}}class Cq{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Aq(t,e,n){return Gn(t)?t:lt(t)?new Cq(t):qt(t)&&arguments.length>1?wT(t,e,n):Cn(t)}function wT(t,e,n){return new Sq(t,e,n)}class xq{constructor(e,n,i){this.fn=e,this.setter=n,this._value=void 0,this.dep=new a1(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Pf-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&hn!==this)return rT(this,!0),!0}get value(){const e=this.dep.track();return lT(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function kq(t,e,n=!1){let i,s;return lt(t)?i=t:(i=t.get,s=t.set),new xq(i,s,n)}const Pq={GET:"get",HAS:"has",ITERATE:"iterate"},Tq={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},qm={},py=new WeakMap;let dl;function $q(){return dl}function ST(t,e=!1,n=dl){if(n){let i=py.get(n);i||py.set(n,i=[]),i.push(t)}}function Dq(t,e,n=Et){const{immediate:i,deep:s,once:r,scheduler:o,augmentJob:a,call:l}=n,c=D=>s?D:ks(D)||s===!1||s===0?ya(D,1):ya(D);let u,h,p,m,y=!1,O=!1;if(Gn(t)?(h=()=>t.value,y=ks(t)):Aa(t)?(h=()=>c(t),y=!0):Be(t)?(O=!0,y=t.some(D=>Aa(D)||ks(D)),h=()=>t.map(D=>{if(Gn(D))return D.value;if(Aa(D))return c(D);if(lt(D))return l?l(D,2):D()})):lt(t)?e?h=l?()=>l(t,2):t:h=()=>{if(p){Ma();try{p()}finally{Ia()}}const D=dl;dl=u;try{return l?l(t,3,[m]):t(m)}finally{dl=D}}:h=Si,e&&s){const D=h,M=s===!0?1/0:s;h=()=>ya(D(),M)}const S=iT(),x=()=>{u.stop(),S&&S.active&&SS(S.effects,u)};if(r&&e){const D=e;e=(...M)=>{D(...M),x()}}let T=O?new Array(t.length).fill(qm):qm;const k=D=>{if(!(!(u.flags&1)||!u.dirty&&!D))if(e){const M=u.run();if(s||y||(O?M.some((L,j)=>Yi(L,T[j])):Yi(M,T))){p&&p();const L=dl;dl=u;try{const j=[M,T===qm?void 0:O&&T[0]===qm?[]:T,m];T=M,l?l(e,3,j):e(...j)}finally{dl=L}}}else u.run()};return a&&a(k),u=new kf(h),u.scheduler=o?()=>o(k,!1):k,m=D=>ST(D,!1,u),p=u.onStop=()=>{const D=py.get(u);if(D){if(l)l(D,4);else for(const M of D)M();py.delete(u)}},e?i?k(!0):T=u.run():o?o(k.bind(null,!0),!0):u.run(),x.pause=u.pause.bind(u),x.resume=u.resume.bind(u),x.stop=x,x}function ya(t,e=1/0,n){if(e<=0||!qt(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,Gn(t))ya(t.value,e,n);else if(Be(t))for(let i=0;i<t.length;i++)ya(t[i],e,n);else if(Gc(t)||Vu(t))t.forEach(i=>{ya(i,e,n)});else if(t1(t)){for(const i in t)ya(t[i],e,n);for(const i of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,i)&&ya(t[i],e,n)}return t}/**
* @vue/runtime-core v3.5.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const CT=[];function Mq(t){CT.push(t)}function Iq(){CT.pop()}function Rq(t,e){}const _q={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},Eq={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function Xd(t,e,n,i){try{return i?t(...i):t()}catch(s){Hc(s,e,n)}}function Mr(t,e,n,i){if(lt(t)){const s=Xd(t,e,n,i);return s&&CS(s)&&s.catch(r=>{Hc(r,e,n)}),s}if(Be(t)){const s=[];for(let r=0;r<t.length;r++)s.push(Mr(t[r],e,n,i));return s}}function Hc(t,e,n,i=!0){const s=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Et;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](t,l,c)===!1)return}a=a.parent}if(r){Ma(),Xd(r,null,10,[t,l,c]),Ia();return}}Qq(t,n,s,i,o)}function Qq(t,e,n,i=!0,s=!1){if(s)throw t;console.error(t)}const Ki=[];let ko=-1;const Zu=[];let hl=null,Au=0;const AT=Promise.resolve();let my=null;function Bi(t){const e=my||AT;return t?e.then(this?t.bind(this):t):e}function Nq(t){let e=ko+1,n=Ki.length;for(;e<n;){const i=e+n>>>1,s=Ki[i],r=Df(s);r<t||r===t&&s.flags&2?e=i+1:n=i}return e}function MS(t){if(!(t.flags&1)){const e=Df(t),n=Ki[Ki.length-1];!n||!(t.flags&2)&&e>=Df(n)?Ki.push(t):Ki.splice(Nq(e),0,t),t.flags|=1,xT()}}function xT(){my||(my=AT.then(kT))}function $f(t){Be(t)?Zu.push(...t):hl&&t.id===-1?hl.splice(Au+1,0,t):t.flags&1||(Zu.push(t),t.flags|=1),xT()}function n3(t,e,n=ko+1){for(;n<Ki.length;n++){const i=Ki[n];if(i&&i.flags&2){if(t&&i.id!==t.uid)continue;Ki.splice(n,1),n--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function gy(t){if(Zu.length){const e=[...new Set(Zu)].sort((n,i)=>Df(n)-Df(i));if(Zu.length=0,hl){hl.push(...e);return}for(hl=e,Au=0;Au<hl.length;Au++){const n=hl[Au];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}hl=null,Au=0}}const Df=t=>t.id==null?t.flags&2?-1:1/0:t.id;function kT(t){try{for(ko=0;ko<Ki.length;ko++){const e=Ki[ko];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Xd(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ko<Ki.length;ko++){const e=Ki[ko];e&&(e.flags&=-2)}ko=-1,Ki.length=0,gy(),my=null,(Ki.length||Zu.length)&&kT()}}let xu,Xm=[];function PT(t,e){var n,i;xu=t,xu?(xu.enabled=!0,Xm.forEach(({event:s,args:r})=>xu.emit(s,...r)),Xm=[]):typeof window<"u"&&window.HTMLElement&&!((i=(n=window.navigator)==null?void 0:n.userAgent)!=null&&i.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(r=>{PT(r,e)}),setTimeout(()=>{xu||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Xm=[])},3e3)):Xm=[]}let wi=null,d1=null;function Mf(t){const e=wi;return wi=t,d1=t&&t.type.__scopeId||null,e}function Lq(t){d1=t}function Fq(){d1=null}const Bq=t=>U;function U(t,e=wi,n){if(!e||t._n)return t;const i=(...s)=>{i._d&&_f(-1);const r=Mf(e);let o;try{o=t(...s)}finally{Mf(r),i._d&&_f(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function mn(t,e){if(wi===null)return t;const n=Sp(wi),i=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[r,o,a,l=Et]=e[s];r&&(lt(r)&&(r={mounted:r,updated:r}),r.deep&&ya(o),i.push({dir:r,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function To(t,e,n,i){const s=t.dirs,r=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let l=a.dir[i];l&&(Ma(),Mr(l,n,8,[t.el,a,t,e]),Ia())}}function wa(t,e){if(bi){let n=bi.provides;const i=bi.parent&&bi.parent.provides;i===n&&(n=bi.provides=Object.create(i)),n[t]=e}}function st(t,e,n=!1){const i=ns();if(i||kc){let s=kc?kc._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&lt(e)?e.call(i&&i.proxy):e}}function Vq(){return!!(ns()||kc)}const TT=Symbol.for("v-scx"),$T=()=>st(TT);function jq(t,e){return vp(t,null,e)}function zq(t,e){return vp(t,null,{flush:"post"})}function DT(t,e){return vp(t,null,{flush:"sync"})}function xl(t,e,n){return vp(t,e,n)}function vp(t,e,n=Et){const{immediate:i,deep:s,flush:r,once:o}=n,a=Tt({},n),l=e&&i||!e&&r!=="post";let c;if(gd){if(r==="sync"){const m=$T();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=Si,m.resume=Si,m.pause=Si,m}}const u=bi;a.call=(m,y,O)=>Mr(m,u,y,O);let h=!1;r==="post"?a.scheduler=m=>{Bn(m,u&&u.suspense)}:r!=="sync"&&(h=!0,a.scheduler=(m,y)=>{y?m():MS(m)}),a.augmentJob=m=>{e&&(m.flags|=4),h&&(m.flags|=2,u&&(m.id=u.uid,m.i=u))};const p=Dq(t,e,a);return gd&&(c?c.push(p):l&&p()),p}function Zq(t,e,n){const i=this.proxy,s=mt(t)?t.includes(".")?MT(i,t):()=>i[t]:t.bind(i,i);let r;lt(e)?r=e:(r=e.handler,n=e);const o=Qc(this),a=vp(s,r.bind(i),n);return o(),a}function MT(t,e){const n=e.split(".");return()=>{let i=t;for(let s=0;s<n.length&&i;s++)i=i[n[s]];return i}}const IT=Symbol("_vte"),RT=t=>t.__isTeleport,nf=t=>t&&(t.disabled||t.disabled===""),i3=t=>t&&(t.defer||t.defer===""),s3=t=>typeof SVGElement<"u"&&t instanceof SVGElement,r3=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,H2=(t,e)=>{const n=t&&t.to;return mt(n)?e?e(n):null:n},_T={name:"Teleport",__isTeleport:!0,process(t,e,n,i,s,r,o,a,l,c){const{mc:u,pc:h,pbc:p,o:{insert:m,querySelector:y,createText:O,createComment:S}}=c,x=nf(e.props);let{shapeFlag:T,children:k,dynamicChildren:D}=e;if(t==null){const M=e.el=O(""),L=e.anchor=O("");m(M,n,i),m(L,n,i);const j=(Z,K)=>{T&16&&u(k,Z,K,s,r,o,a,l)},G=()=>{const Z=e.target=H2(e.props,y),K=Y2(Z,e,O,m);Z&&(o!=="svg"&&s3(Z)?o="svg":o!=="mathml"&&r3(Z)&&(o="mathml"),s&&s.isCE&&(s.ce._teleportTargets||(s.ce._teleportTargets=new Set)).add(Z),x||(j(Z,K),Ig(e,!1)))};x&&(j(n,L),Ig(e,!0)),i3(e.props)?(e.el.__isMounted=!1,Bn(()=>{G(),delete e.el.__isMounted},r)):G()}else{if(i3(e.props)&&t.el.__isMounted===!1){Bn(()=>{_T.process(t,e,n,i,s,r,o,a,l,c)},r);return}e.el=t.el,e.targetStart=t.targetStart;const M=e.anchor=t.anchor,L=e.target=t.target,j=e.targetAnchor=t.targetAnchor,G=nf(t.props),Z=G?n:L,K=G?M:j;if(o==="svg"||s3(L)?o="svg":(o==="mathml"||r3(L))&&(o="mathml"),D?(p(t.dynamicChildren,D,Z,s,r,o,a),WS(t,e,!0)):l||h(t,e,Z,K,s,r,o,a,!1),x)G?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Wm(e,n,M,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const te=e.target=H2(e.props,y);te&&Wm(e,te,null,c,0)}else G&&Wm(e,L,j,c,1);Ig(e,x)}},remove(t,e,n,{um:i,o:{remove:s}},r){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:u,target:h,props:p}=t;if(h&&(s(c),s(u)),r&&s(l),o&16){const m=r||!nf(p);for(let y=0;y<a.length;y++){const O=a[y];i(O,e,n,m,!!O.dynamicChildren)}}},move:Wm,hydrate:qq};function Wm(t,e,n,{o:{insert:i},m:s},r=2){r===0&&i(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=t,h=r===2;if(h&&i(o,e,n),(!h||nf(u))&&l&16)for(let p=0;p<c.length;p++)s(c[p],e,n,2);h&&i(a,e,n)}function qq(t,e,n,i,s,r,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:u}},h){function p(S,x){let T=x;for(;T;){if(T&&T.nodeType===8){if(T.data==="teleport start anchor")e.targetStart=T;else if(T.data==="teleport anchor"){e.targetAnchor=T,S._lpa=e.targetAnchor&&o(e.targetAnchor);break}}T=o(T)}}function m(S,x){x.anchor=h(o(S),x,a(S),n,i,s,r)}const y=e.target=H2(e.props,l),O=nf(e.props);if(y){const S=y._lpa||y.firstChild;e.shapeFlag&16&&(O?(m(t,e),p(y,S),e.targetAnchor||Y2(y,e,u,c,a(t)===y?t:null)):(e.anchor=o(t),p(y,S),e.targetAnchor||Y2(y,e,u,c),h(S&&o(S),e,y,n,i,s,r))),Ig(e,O)}else O&&e.shapeFlag&16&&(m(t,e),e.targetStart=t,e.targetAnchor=o(t));return e.anchor&&o(e.anchor)}const IS=_T;function Ig(t,e){const n=t.ctx;if(n&&n.ut){let i,s;for(e?(i=t.el,s=t.anchor):(i=t.targetStart,s=t.targetAnchor);i&&i!==s;)i.nodeType===1&&i.setAttribute("data-v-owner",n.uid),i=i.nextSibling;n.ut()}}function Y2(t,e,n,i,s=null){const r=e.targetStart=n(""),o=e.targetAnchor=n("");return r[IT]=o,t&&(i(r,t,s),i(o,t,s)),o}const $o=Symbol("_leaveCb"),Ch=Symbol("_enterCb");function RS(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Yc(()=>{t.isMounted=!0}),m1(()=>{t.isUnmounting=!0}),t}const mr=[Function,Array],_S={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:mr,onEnter:mr,onAfterEnter:mr,onEnterCancelled:mr,onBeforeLeave:mr,onLeave:mr,onAfterLeave:mr,onLeaveCancelled:mr,onBeforeAppear:mr,onAppear:mr,onAfterAppear:mr,onAppearCancelled:mr},ET=t=>{const e=t.subTree;return e.component?ET(e.component):e},Xq={name:"BaseTransition",props:_S,setup(t,{slots:e}){const n=ns(),i=RS();return()=>{const s=e.default&&h1(e.default(),!0);if(!s||!s.length)return;const r=QT(s),o=Lt(t),{mode:a}=o;if(i.isLeaving)return Rb(r);const l=o3(r);if(!l)return Rb(r);let c=md(l,o,i,n,h=>c=h);l.type!==jn&&Ra(l,c);let u=n.subTree&&o3(n.subTree);if(u&&u.type!==jn&&!Wr(u,l)&&ET(n).type!==jn){let h=md(u,o,i,n);if(Ra(u,h),a==="out-in"&&l.type!==jn)return i.isLeaving=!0,h.afterLeave=()=>{i.isLeaving=!1,n.job.flags&8||n.update(),delete h.afterLeave,u=void 0},Rb(r);a==="in-out"&&l.type!==jn?h.delayLeave=(p,m,y)=>{const O=LT(i,u);O[String(u.key)]=u,p[$o]=()=>{m(),p[$o]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{y(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return r}}};function QT(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==jn){e=n;break}}return e}const NT=Xq;function LT(t,e){const{leavingVNodes:n}=t;let i=n.get(e.type);return i||(i=Object.create(null),n.set(e.type,i)),i}function md(t,e,n,i,s){const{appear:r,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:h,onBeforeLeave:p,onLeave:m,onAfterLeave:y,onLeaveCancelled:O,onBeforeAppear:S,onAppear:x,onAfterAppear:T,onAppearCancelled:k}=e,D=String(t.key),M=LT(n,t),L=(Z,K)=>{Z&&Mr(Z,i,9,K)},j=(Z,K)=>{const te=K[1];L(Z,K),Be(Z)?Z.every(W=>W.length<=1)&&te():Z.length<=1&&te()},G={mode:o,persisted:a,beforeEnter(Z){let K=l;if(!n.isMounted)if(r)K=S||l;else return;Z[$o]&&Z[$o](!0);const te=M[D];te&&Wr(t,te)&&te.el[$o]&&te.el[$o](),L(K,[Z])},enter(Z){if(M[D]===t)return;let K=c,te=u,W=h;if(!n.isMounted)if(r)K=x||c,te=T||u,W=k||h;else return;let oe=!1;Z[Ch]=ke=>{oe||(oe=!0,ke?L(W,[Z]):L(te,[Z]),G.delayedLeave&&G.delayedLeave(),Z[Ch]=void 0)};const ye=Z[Ch].bind(null,!1);K?j(K,[Z,ye]):ye()},leave(Z,K){const te=String(t.key);if(Z[Ch]&&Z[Ch](!0),n.isUnmounting)return K();L(p,[Z]);let W=!1;Z[$o]=ye=>{W||(W=!0,K(),ye?L(O,[Z]):L(y,[Z]),Z[$o]=void 0,M[te]===t&&delete M[te])};const oe=Z[$o].bind(null,!1);M[te]=t,m?j(m,[Z,oe]):oe()},clone(Z){const K=md(Z,e,n,i,s);return s&&s(K),K}};return G}function Rb(t){if(wp(t))return t=Zo(t),t.children=null,t}function o3(t){if(!wp(t))return RT(t.type)&&t.children?QT(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&lt(n.default))return n.default()}}function Ra(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Ra(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function h1(t,e=!1,n){let i=[],s=0;for(let r=0;r<t.length;r++){let o=t[r];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:r);o.type===le?(o.patchFlag&128&&s++,i=i.concat(h1(o.children,e,a))):(e||o.type!==jn)&&i.push(a!=null?Zo(o,{key:a}):o)}if(s>1)for(let r=0;r<i.length;r++)i[r].patchFlag=-2;return i}function ve(t,e){return lt(t)?Tt({name:t.name},e,{setup:t}):t}function Wq(){const t=ns();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function ES(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Gq(t){const e=ns(),n=$S(null);if(e){const s=e.refs===Et?e.refs={}:e.refs;Object.defineProperty(s,t,{enumerable:!0,get:()=>n.value,set:r=>n.value=r})}return n}function a3(t,e){let n;return!!((n=Object.getOwnPropertyDescriptor(t,e))&&!n.configurable)}const yy=new WeakMap;function qu(t,e,n,i,s=!1){if(Be(t)){t.forEach((O,S)=>qu(O,e&&(Be(e)?e[S]:e),n,i,s));return}if(xa(i)&&!s){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&qu(t,e,n,i.component.subTree);return}const r=i.shapeFlag&4?Sp(i.component):i.el,o=s?null:r,{i:a,r:l}=t,c=e&&e.r,u=a.refs===Et?a.refs={}:a.refs,h=a.setupState,p=Lt(h),m=h===Et?Iu:O=>a3(u,O)?!1:Ut(p,O),y=(O,S)=>!(S&&a3(u,S));if(c!=null&&c!==l){if(l3(e),mt(c))u[c]=null,m(c)&&(h[c]=null);else if(Gn(c)){const O=e;y(c,O.k)&&(c.value=null),O.k&&(u[O.k]=null)}}if(lt(l))Xd(l,a,12,[o,u]);else{const O=mt(l),S=Gn(l);if(O||S){const x=()=>{if(t.f){const T=O?m(l)?h[l]:u[l]:y()||!t.k?l.value:u[t.k];if(s)Be(T)&&SS(T,r);else if(Be(T))T.includes(r)||T.push(r);else if(O)u[l]=[r],m(l)&&(h[l]=u[l]);else{const k=[r];y(l,t.k)&&(l.value=k),t.k&&(u[t.k]=k)}}else O?(u[l]=o,m(l)&&(h[l]=o)):S&&(y(l,t.k)&&(l.value=o),t.k&&(u[t.k]=o))};if(o){const T=()=>{x(),yy.delete(t)};T.id=-1,yy.set(t,T),Bn(T,n)}else l3(t),x()}}}function l3(t){const e=yy.get(t);e&&(e.flags|=8,yy.delete(t))}let c3=!1;const wu=()=>{c3||(console.error("Hydration completed but contains mismatches."),c3=!0)},Uq=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",Hq=t=>t.namespaceURI.includes("MathML"),Gm=t=>{if(t.nodeType===1){if(Uq(t))return"svg";if(Hq(t))return"mathml"}},Ru=t=>t.nodeType===8;function Yq(t){const{mt:e,p:n,o:{patchProp:i,createText:s,nextSibling:r,parentNode:o,remove:a,insert:l,createComment:c}}=t,u=(k,D)=>{if(!D.hasChildNodes()){n(null,k,D),gy(),D._vnode=k;return}h(D.firstChild,k,null,null,null),gy(),D._vnode=k},h=(k,D,M,L,j,G=!1)=>{G=G||!!D.dynamicChildren;const Z=Ru(k)&&k.data==="[",K=()=>O(k,D,M,L,j,Z),{type:te,ref:W,shapeFlag:oe,patchFlag:ye}=D;let ke=k.nodeType;D.el=k,ye===-2&&(G=!1,D.dynamicChildren=null);let ge=null;switch(te){case kl:ke!==3?D.children===""?(l(D.el=s(""),o(k),k),ge=k):ge=K():(k.data!==D.children&&(wu(),k.data=D.children),ge=r(k));break;case jn:T(k)?(ge=r(k),x(D.el=k.content.firstChild,k,M)):ke!==8||Z?ge=K():ge=r(k);break;case Pc:if(Z&&(k=r(k),ke=k.nodeType),ke===1||ke===3){ge=k;const Se=!D.children.length;for(let Oe=0;Oe<D.staticCount;Oe++)Se&&(D.children+=ge.nodeType===1?ge.outerHTML:ge.data),Oe===D.staticCount-1&&(D.anchor=ge),ge=r(ge);return Z?r(ge):ge}else K();break;case le:Z?ge=y(k,D,M,L,j,G):ge=K();break;default:if(oe&1)(ke!==1||D.type.toLowerCase()!==k.tagName.toLowerCase())&&!T(k)?ge=K():ge=p(k,D,M,L,j,G);else if(oe&6){D.slotScopeIds=j;const Se=o(k);if(Z?ge=S(k):Ru(k)&&k.data==="teleport start"?ge=S(k,k.data,"teleport end"):ge=r(k),e(D,Se,null,M,L,Gm(Se),G),xa(D)&&!D.type.__asyncResolved){let Oe;Z?(Oe=_(le),Oe.anchor=ge?ge.previousSibling:Se.lastChild):Oe=k.nodeType===3?He(""):_("div"),Oe.el=k,D.component.subTree=Oe}}else oe&64?ke!==8?ge=K():ge=D.type.hydrate(k,D,M,L,j,G,t,m):oe&128&&(ge=D.type.hydrate(k,D,M,L,Gm(o(k)),j,G,t,h))}return W!=null&&qu(W,null,L,D),ge},p=(k,D,M,L,j,G)=>{G=G||!!D.dynamicChildren;const{type:Z,props:K,patchFlag:te,shapeFlag:W,dirs:oe,transition:ye}=D,ke=Z==="input"||Z==="option";if(ke||te!==-1){oe&&To(D,null,M,"created");let ge=!1;if(T(k)){ge=u$(null,ye)&&M&&M.vnode.props&&M.vnode.props.appear;const Oe=k.content.firstChild;if(ge){const Fe=Oe.getAttribute("class");Fe&&(Oe.$cls=Fe),ye.beforeEnter(Oe)}x(Oe,k,M),D.el=k=Oe}if(W&16&&!(K&&(K.innerHTML||K.textContent))){let Oe=m(k.firstChild,D,k,M,L,j,G);for(;Oe;){Um(k,1)||wu();const Fe=Oe;Oe=Oe.nextSibling,a(Fe)}}else if(W&8){let Oe=D.children;Oe[0]===`
`&&(k.tagName==="PRE"||k.tagName==="TEXTAREA")&&(Oe=Oe.slice(1));const{textContent:Fe}=k;Fe!==Oe&&Fe!==Oe.replace(/\r\n|\r/g,`
`)&&(Um(k,0)||wu(),k.textContent=D.children)}if(K){if(ke||!G||te&48){const Oe=k.tagName.includes("-");for(const Fe in K)(ke&&(Fe.endsWith("value")||Fe==="indeterminate")||Wc(Fe)&&!Ca(Fe)||Fe[0]==="."||Oe&&!Ca(Fe))&&i(k,Fe,null,K[Fe],void 0,M)}else if(K.onClick)i(k,"onClick",null,K.onClick,void 0,M);else if(te&4&&Aa(K.style))for(const Oe in K.style)K.style[Oe]}let Se;(Se=K&&K.onVnodeBeforeMount)&&fs(Se,M,D),oe&&To(D,null,M,"beforeMount"),((Se=K&&K.onVnodeMounted)||oe||ge)&&p$(()=>{Se&&fs(Se,M,D),ge&&ye.enter(k),oe&&To(D,null,M,"mounted")},L)}return k.nextSibling},m=(k,D,M,L,j,G,Z)=>{Z=Z||!!D.dynamicChildren;const K=D.children,te=K.length;for(let W=0;W<te;W++){const oe=Z?K[W]:K[W]=ys(K[W]),ye=oe.type===kl;k?(ye&&!Z&&W+1<te&&ys(K[W+1]).type===kl&&(l(s(k.data.slice(oe.children.length)),M,r(k)),k.data=oe.children),k=h(k,oe,L,j,G,Z)):ye&&!oe.children?l(oe.el=s(""),M):(Um(M,1)||wu(),n(null,oe,M,null,L,j,Gm(M),G))}return k},y=(k,D,M,L,j,G)=>{const{slotScopeIds:Z}=D;Z&&(j=j?j.concat(Z):Z);const K=o(k),te=m(r(k),D,K,M,L,j,G);return te&&Ru(te)&&te.data==="]"?r(D.anchor=te):(wu(),l(D.anchor=c("]"),K,te),te)},O=(k,D,M,L,j,G)=>{if(Um(k.parentElement,1)||wu(),D.el=null,G){const te=S(k);for(;;){const W=r(k);if(W&&W!==te)a(W);else break}}const Z=r(k),K=o(k);return a(k),n(null,D,K,Z,M,L,Gm(K),j),M&&(M.vnode.el=D.el,y1(M,D.el)),Z},S=(k,D="[",M="]")=>{let L=0;for(;k;)if(k=r(k),k&&Ru(k)&&(k.data===D&&L++,k.data===M)){if(L===0)return r(k);L--}return k},x=(k,D,M)=>{const L=D.parentNode;L&&L.replaceChild(k,D);let j=M;for(;j;)j.vnode.el===D&&(j.vnode.el=j.subTree.el=k),j=j.parent},T=k=>k.nodeType===1&&k.tagName==="TEMPLATE";return[u,h]}const u3="data-allow-mismatch",Kq={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function Um(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(u3);)t=t.parentElement;const n=t&&t.getAttribute(u3);if(n==null)return!1;if(n==="")return!0;{const i=n.split(",");return e===0&&i.includes("children")?!0:i.includes(Kq[e])}}const Jq=r1().requestIdleCallback||(t=>setTimeout(t,1)),eX=r1().cancelIdleCallback||(t=>clearTimeout(t)),tX=(t=1e4)=>e=>{const n=Jq(e,{timeout:t});return()=>eX(n)};function nX(t){const{top:e,left:n,bottom:i,right:s}=t.getBoundingClientRect(),{innerHeight:r,innerWidth:o}=window;return(e>0&&e<r||i>0&&i<r)&&(n>0&&n<o||s>0&&s<o)}const iX=t=>(e,n)=>{const i=new IntersectionObserver(s=>{for(const r of s)if(r.isIntersecting){i.disconnect(),e();break}},t);return n(s=>{if(s instanceof Element){if(nX(s))return e(),i.disconnect(),!1;i.observe(s)}}),()=>i.disconnect()},sX=t=>e=>{if(t){const n=matchMedia(t);if(n.matches)e();else return n.addEventListener("change",e,{once:!0}),()=>n.removeEventListener("change",e)}},rX=(t=[])=>(e,n)=>{mt(t)&&(t=[t]);let i=!1;const s=o=>{i||(i=!0,r(),e(),o.target.dispatchEvent(new o.constructor(o.type,o)))},r=()=>{n(o=>{for(const a of t)o.removeEventListener(a,s)})};return n(o=>{for(const a of t)o.addEventListener(a,s,{once:!0})}),r};function oX(t,e){if(Ru(t)&&t.data==="["){let n=1,i=t.nextSibling;for(;i;){if(i.nodeType===1){if(e(i)===!1)break}else if(Ru(i))if(i.data==="]"){if(--n===0)break}else i.data==="["&&n++;i=i.nextSibling}}else e(t)}const xa=t=>!!t.type.__asyncLoader;function aX(t){lt(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:i,delay:s=200,hydrate:r,timeout:o,suspensible:a=!0,onError:l}=t;let c=null,u,h=0;const p=()=>(h++,c=null,m()),m=()=>{let y;return c||(y=c=e().catch(O=>{if(O=O instanceof Error?O:new Error(String(O)),l)return new Promise((S,x)=>{l(O,()=>S(p()),()=>x(O),h+1)});throw O}).then(O=>y!==c&&c?c:(O&&(O.__esModule||O[Symbol.toStringTag]==="Module")&&(O=O.default),u=O,O)))};return ve({name:"AsyncComponentWrapper",__asyncLoader:m,__asyncHydrate(y,O,S){let x=!1;(O.bu||(O.bu=[])).push(()=>x=!0);const T=()=>{x||S()},k=r?()=>{const D=r(T,M=>oX(y,M));D&&(O.bum||(O.bum=[])).push(D)}:T;u?k():m().then(()=>!O.isUnmounted&&k())},get __asyncResolved(){return u},setup(){const y=bi;if(ES(y),u)return()=>Hm(u,y);const O=k=>{c=null,Hc(k,y,13,!i)};if(a&&y.suspense||gd)return m().then(k=>()=>Hm(k,y)).catch(k=>(O(k),()=>i?_(i,{error:k}):null));const S=Cn(!1),x=Cn(),T=Cn(!!s);return s&&setTimeout(()=>{T.value=!1},s),o!=null&&setTimeout(()=>{if(!S.value&&!x.value){const k=new Error(`Async component timed out after ${o}ms.`);O(k),x.value=k}},o),m().then(()=>{S.value=!0,y.parent&&wp(y.parent.vnode)&&y.parent.update()}).catch(k=>{O(k),x.value=k}),()=>{if(S.value&&u)return Hm(u,y);if(x.value&&i)return _(i,{error:x.value});if(n&&!T.value)return Hm(n,y)}}})}function Hm(t,e){const{ref:n,props:i,children:s,ce:r}=e.vnode,o=_(t,i,s);return o.ref=n,o.ce=r,delete e.vnode.ce,o}const wp=t=>t.type.__isKeepAlive,lX={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=ns(),i=n.ctx;if(!i.renderer)return()=>{const T=e.default&&e.default();return T&&T.length===1?T[0]:T};const s=new Map,r=new Set;let o=null;const a=n.suspense,{renderer:{p:l,m:c,um:u,o:{createElement:h}}}=i,p=h("div");i.activate=(T,k,D,M,L)=>{const j=T.component;c(T,k,D,0,a),l(j.vnode,T,k,D,j,a,M,T.slotScopeIds,L),Bn(()=>{j.isDeactivated=!1,j.a&&zu(j.a);const G=T.props&&T.props.onVnodeMounted;G&&fs(G,j.parent,T)},a)},i.deactivate=T=>{const k=T.component;by(k.m),by(k.a),c(T,p,null,1,a),Bn(()=>{k.da&&zu(k.da);const D=T.props&&T.props.onVnodeUnmounted;D&&fs(D,k.parent,T),k.isDeactivated=!0},a)};function m(T){_b(T),u(T,n,a,!0)}function y(T){s.forEach((k,D)=>{const M=av(xa(k)?k.type.__asyncResolved||{}:k.type);M&&!T(M)&&O(D)})}function O(T){const k=s.get(T);k&&(!o||!Wr(k,o))?m(k):o&&_b(o),s.delete(T),r.delete(T)}xl(()=>[t.include,t.exclude],([T,k])=>{T&&y(D=>jh(T,D)),k&&y(D=>!jh(k,D))},{flush:"post",deep:!0});let S=null;const x=()=>{S!=null&&(vy(n.subTree.type)?Bn(()=>{s.set(S,Ym(n.subTree))},n.subTree.suspense):s.set(S,Ym(n.subTree)))};return Yc(x),p1(x),m1(()=>{s.forEach(T=>{const{subTree:k,suspense:D}=n,M=Ym(k);if(T.type===M.type&&T.key===M.key){_b(M);const L=M.component.da;L&&Bn(L,D);return}m(T)})}),()=>{if(S=null,!e.default)return o=null;const T=e.default(),k=T[0];if(T.length>1)return o=null,T;if(!_a(k)||!(k.shapeFlag&4)&&!(k.shapeFlag&128))return o=null,k;let D=Ym(k);if(D.type===jn)return o=null,D;const M=D.type,L=av(xa(D)?D.type.__asyncResolved||{}:M),{include:j,exclude:G,max:Z}=t;if(j&&(!L||!jh(j,L))||G&&L&&jh(G,L))return D.shapeFlag&=-257,o=D,k;const K=D.key==null?M:D.key,te=s.get(K);return D.el&&(D=Zo(D),k.shapeFlag&128&&(k.ssContent=D)),S=K,te?(D.el=te.el,D.component=te.component,D.transition&&Ra(D,D.transition),D.shapeFlag|=512,r.delete(K),r.add(K)):(r.add(K),Z&&r.size>parseInt(Z,10)&&O(r.values().next().value)),D.shapeFlag|=256,o=D,vy(k.type)?k:D}}},FT=lX;function jh(t,e){return Be(t)?t.some(n=>jh(n,e)):mt(t)?t.split(",").includes(e):wZ(t)?(t.lastIndex=0,t.test(e)):!1}function QS(t,e){BT(t,"a",e)}function NS(t,e){BT(t,"da",e)}function BT(t,e,n=bi){const i=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(f1(e,i,n),n){let s=n.parent;for(;s&&s.parent;)wp(s.parent.vnode)&&cX(i,e,n,s),s=s.parent}}function cX(t,e,n,i){const s=f1(e,t,i,!0);Wd(()=>{SS(i[e],s)},n)}function _b(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function Ym(t){return t.shapeFlag&128?t.ssContent:t}function f1(t,e,n=bi,i=!1){if(n){const s=n[t]||(n[t]=[]),r=e.__weh||(e.__weh=(...o)=>{Ma();const a=Qc(n),l=Mr(e,n,t,o);return a(),Ia(),l});return i?s.unshift(r):s.push(r),r}}const Va=t=>(e,n=bi)=>{(!gd||t==="sp")&&f1(t,(...i)=>e(...i),n)},VT=Va("bm"),Yc=Va("m"),LS=Va("bu"),p1=Va("u"),m1=Va("bum"),Wd=Va("um"),jT=Va("sp"),zT=Va("rtg"),ZT=Va("rtc");function qT(t,e=bi){f1("ec",t,e)}const FS="components",uX="directives";function Q(t,e){return VS(FS,t,!0,e)||t}const XT=Symbol.for("v-ndc");function ro(t){return mt(t)?VS(FS,t,!1)||t:t||XT}function BS(t){return VS(uX,t)}function VS(t,e,n=!0,i=!1){const s=wi||bi;if(s){const r=s.type;if(t===FS){const a=av(r,!1);if(a&&(a===e||a===vn(e)||a===Uc(vn(e))))return r}const o=d3(s[t]||r[t],e)||d3(s.appContext[t],e);return!o&&i?r:o}}function d3(t,e){return t&&(t[e]||t[vn(e)]||t[Uc(vn(e))])}function Pe(t,e,n,i){let s;const r=n&&n[i],o=Be(t);if(o||mt(t)){const a=o&&Aa(t);let l=!1,c=!1;a&&(l=!ks(t),c=zo(t),t=l1(t)),s=new Array(t.length);for(let u=0,h=t.length;u<h;u++)s[u]=e(l?c?pd(so(t[u])):so(t[u]):t[u],u,void 0,r&&r[u])}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,r&&r[a])}else if(qt(t))if(t[Symbol.iterator])s=Array.from(t,(a,l)=>e(a,l,void 0,r&&r[l]));else{const a=Object.keys(t);s=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];s[l]=e(t[u],u,l,r&&r[l])}}else s=[];return n&&(n[i]=s),s}function jS(t,e){for(let n=0;n<e.length;n++){const i=e[n];if(Be(i))for(let s=0;s<i.length;s++)t[i[s].name]=i[s].fn;else i&&(t[i.name]=i.key?(...s)=>{const r=i.fn(...s);return r&&(r.key=i.key),r}:i.fn)}return t}function Ge(t,e,n={},i,s){if(wi.ce||wi.parent&&xa(wi.parent)&&wi.parent.ce){const c=Object.keys(n).length>0;return e!=="default"&&(n.name=e),w(),H(le,null,[_("slot",n,i&&i())],c?-2:64)}let r=t[e];r&&r._c&&(r._d=!1),w();const o=r&&zS(r(n)),a=n.key||o&&o.key,l=H(le,{key:(a&&!Ds(a)?a:`_${e}`)+(!o&&i?"_fb":"")},o||(i?i():[]),o&&t._===1?64:-2);return!s&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),r&&r._c&&(r._d=!0),l}function zS(t){return t.some(e=>_a(e)?!(e.type===jn||e.type===le&&!zS(e.children)):!0)?t:null}function dX(t,e){const n={};for(const i in t)n[e&&/[A-Z]/.test(i)?`on:${i}`:ju(i)]=t[i];return n}const K2=t=>t?w$(t)?Sp(t):K2(t.parent):null,sf=Tt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>K2(t.parent),$root:t=>K2(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>ZS(t),$forceUpdate:t=>t.f||(t.f=()=>{MS(t.update)}),$nextTick:t=>t.n||(t.n=Bi.bind(t.proxy)),$watch:t=>Zq.bind(t)}),Eb=(t,e)=>t!==Et&&!t.__isScriptSetup&&Ut(t,e),J2={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:i,data:s,props:r,accessCache:o,type:a,appContext:l}=t;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return i[e];case 2:return s[e];case 4:return n[e];case 3:return r[e]}else{if(Eb(i,e))return o[e]=1,i[e];if(s!==Et&&Ut(s,e))return o[e]=2,s[e];if(Ut(r,e))return o[e]=3,r[e];if(n!==Et&&Ut(n,e))return o[e]=4,n[e];ev&&(o[e]=0)}}const c=sf[e];let u,h;if(c)return e==="$attrs"&&Qi(t.attrs,"get",""),c(t);if((u=a.__cssModules)&&(u=u[e]))return u;if(n!==Et&&Ut(n,e))return o[e]=4,n[e];if(h=l.config.globalProperties,Ut(h,e))return h[e]},set({_:t},e,n){const{data:i,setupState:s,ctx:r}=t;return Eb(s,e)?(s[e]=n,!0):i!==Et&&Ut(i,e)?(i[e]=n,!0):Ut(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:s,props:r,type:o}},a){let l;return!!(n[a]||t!==Et&&a[0]!=="$"&&Ut(t,a)||Eb(e,a)||Ut(r,a)||Ut(i,a)||Ut(sf,a)||Ut(s.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ut(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}},hX=Tt({},J2,{get(t,e){if(e!==Symbol.unscopables)return J2.get(t,e,t)},has(t,e){return e[0]!=="_"&&!TZ(e)}});function fX(){return null}function pX(){return null}function mX(t){}function gX(t){}function yX(){return null}function OX(){}function bX(t,e){return null}function vX(){return WT().slots}function wX(){return WT().attrs}function WT(t){const e=ns();return e.setupContext||(e.setupContext=x$(e))}function If(t){return Be(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function SX(t,e){const n=If(t);for(const i in e){if(i.startsWith("__skip"))continue;let s=n[i];s?Be(s)||lt(s)?s=n[i]={type:s,default:e[i]}:s.default=e[i]:s===null&&(s=n[i]={default:e[i]}),s&&e[`__skip_${i}`]&&(s.skipFactory=!0)}return n}function CX(t,e){return!t||!e?t||e:Be(t)&&Be(e)?t.concat(e):Tt({},If(t),If(e))}function AX(t,e){const n={};for(const i in t)e.includes(i)||Object.defineProperty(n,i,{enumerable:!0,get:()=>t[i]});return n}function xX(t){const e=ns();let n=t();Sy();const i=()=>{ns()!==e&&e.scope.off(),Sy()};return CS(n)&&(n=n.catch(s=>{throw Qc(e),Promise.resolve().then(()=>Promise.resolve().then(i)),s})),[n,()=>{Qc(e),Promise.resolve().then(i)}]}let ev=!0;function kX(t){const e=ZS(t),n=t.proxy,i=t.ctx;ev=!1,e.beforeCreate&&h3(e.beforeCreate,t,"bc");const{data:s,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:p,beforeUpdate:m,updated:y,activated:O,deactivated:S,beforeDestroy:x,beforeUnmount:T,destroyed:k,unmounted:D,render:M,renderTracked:L,renderTriggered:j,errorCaptured:G,serverPrefetch:Z,expose:K,inheritAttrs:te,components:W,directives:oe,filters:ye}=e;if(c&&PX(c,i,null),o)for(const Se in o){const Oe=o[Se];lt(Oe)&&(i[Se]=Oe.bind(n))}if(s){const Se=s.call(n,n);qt(Se)&&(t.data=Bl(Se))}if(ev=!0,r)for(const Se in r){const Oe=r[Se],Fe=lt(Oe)?Oe.bind(n,n):lt(Oe.get)?Oe.get.bind(n,n):Si,dt=!lt(Oe)&&lt(Oe.set)?Oe.set.bind(n):Si,Je=Dt({get:Fe,set:dt});Object.defineProperty(i,Se,{enumerable:!0,configurable:!0,get:()=>Je.value,set:ut=>Je.value=ut})}if(a)for(const Se in a)GT(a[Se],i,n,Se);if(l){const Se=lt(l)?l.call(n):l;Reflect.ownKeys(Se).forEach(Oe=>{wa(Oe,Se[Oe])})}u&&h3(u,t,"c");function ge(Se,Oe){Be(Oe)?Oe.forEach(Fe=>Se(Fe.bind(n))):Oe&&Se(Oe.bind(n))}if(ge(VT,h),ge(Yc,p),ge(LS,m),ge(p1,y),ge(QS,O),ge(NS,S),ge(qT,G),ge(ZT,L),ge(zT,j),ge(m1,T),ge(Wd,D),ge(jT,Z),Be(K))if(K.length){const Se=t.exposed||(t.exposed={});K.forEach(Oe=>{Object.defineProperty(Se,Oe,{get:()=>n[Oe],set:Fe=>n[Oe]=Fe,enumerable:!0})})}else t.exposed||(t.exposed={});M&&t.render===Si&&(t.render=M),te!=null&&(t.inheritAttrs=te),W&&(t.components=W),oe&&(t.directives=oe),Z&&ES(t)}function PX(t,e,n=Si){Be(t)&&(t=tv(t));for(const i in t){const s=t[i];let r;qt(s)?"default"in s?r=st(s.from||i,s.default,!0):r=st(s.from||i):r=st(s),Gn(r)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[i]=r}}function h3(t,e,n){Mr(Be(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,n)}function GT(t,e,n,i){let s=i.includes(".")?MT(n,i):()=>n[i];if(mt(t)){const r=e[t];lt(r)&&xl(s,r)}else if(lt(t))xl(s,t.bind(n));else if(qt(t))if(Be(t))t.forEach(r=>GT(r,e,n,i));else{const r=lt(t.handler)?t.handler.bind(n):e[t.handler];lt(r)&&xl(s,r,t)}}function ZS(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,a=r.get(e);let l;return a?l=a:!s.length&&!n&&!i?l=e:(l={},s.length&&s.forEach(c=>Oy(l,c,o,!0)),Oy(l,e,o)),qt(e)&&r.set(e,l),l}function Oy(t,e,n,i=!1){const{mixins:s,extends:r}=e;r&&Oy(t,r,n,!0),s&&s.forEach(o=>Oy(t,o,n,!0));for(const o in e)if(!(i&&o==="expose")){const a=TX[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const TX={data:f3,props:p3,emits:p3,methods:zh,computed:zh,beforeCreate:Wi,created:Wi,beforeMount:Wi,mounted:Wi,beforeUpdate:Wi,updated:Wi,beforeDestroy:Wi,beforeUnmount:Wi,destroyed:Wi,unmounted:Wi,activated:Wi,deactivated:Wi,errorCaptured:Wi,serverPrefetch:Wi,components:zh,directives:zh,watch:DX,provide:f3,inject:$X};function f3(t,e){return e?t?function(){return Tt(lt(t)?t.call(this,this):t,lt(e)?e.call(this,this):e)}:e:t}function $X(t,e){return zh(tv(t),tv(e))}function tv(t){if(Be(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Wi(t,e){return t?[...new Set([].concat(t,e))]:e}function zh(t,e){return t?Tt(Object.create(null),t,e):e}function p3(t,e){return t?Be(t)&&Be(e)?[...new Set([...t,...e])]:Tt(Object.create(null),If(t),If(e??{})):e}function DX(t,e){if(!t)return e;if(!e)return t;const n=Tt(Object.create(null),t);for(const i in e)n[i]=Wi(t[i],e[i]);return n}function UT(){return{app:null,config:{isNativeTag:Iu,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let MX=0;function IX(t,e){return function(i,s=null){lt(i)||(i=Tt({},i)),s!=null&&!qt(s)&&(s=null);const r=UT(),o=new WeakSet,a=[];let l=!1;const c=r.app={_uid:MX++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:P$,get config(){return r.config},set config(u){},use(u,...h){return o.has(u)||(u&&lt(u.install)?(o.add(u),u.install(c,...h)):lt(u)&&(o.add(u),u(c,...h))),c},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),c},component(u,h){return h?(r.components[u]=h,c):r.components[u]},directive(u,h){return h?(r.directives[u]=h,c):r.directives[u]},mount(u,h,p){if(!l){const m=c._ceVNode||_(i,s);return m.appContext=r,p===!0?p="svg":p===!1&&(p=void 0),h&&e?e(m,u):t(m,u,p),l=!0,c._container=u,u.__vue_app__=c,Sp(m.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Mr(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,h){return r.provides[u]=h,c},runWithContext(u){const h=kc;kc=c;try{return u()}finally{kc=h}}};return c}}let kc=null;function RX(t,e,n=Et){const i=ns(),s=vn(e),r=vs(e),o=HT(t,s),a=vT((l,c)=>{let u,h=Et,p;return DT(()=>{const m=t[s];Yi(u,m)&&(u=m,c())}),{get(){return l(),n.get?n.get(u):u},set(m){const y=n.set?n.set(m):m;if(!Yi(y,u)&&!(h!==Et&&Yi(m,h)))return;const O=i.vnode.props;O&&(e in O||s in O||r in O)&&(`onUpdate:${e}`in O||`onUpdate:${s}`in O||`onUpdate:${r}`in O)||(u=m,c()),i.emit(`update:${e}`,y),Yi(m,y)&&Yi(m,h)&&!Yi(y,p)&&c(),h=m,p=y}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||Et:a,done:!1}:{done:!0}}}},a}const HT=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${vn(e)}Modifiers`]||t[`${vs(e)}Modifiers`];function _X(t,e,...n){if(t.isUnmounted)return;const i=t.vnode.props||Et;let s=n;const r=e.startsWith("update:"),o=r&&HT(i,e.slice(7));o&&(o.trim&&(s=n.map(u=>mt(u)?u.trim():u)),o.number&&(s=n.map(s1)));let a,l=i[a=ju(e)]||i[a=ju(vn(e))];!l&&r&&(l=i[a=ju(vs(e))]),l&&Mr(l,t,6,s);const c=i[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Mr(c,t,6,s)}}const EX=new WeakMap;function YT(t,e,n=!1){const i=n?EX:e.emitsCache,s=i.get(t);if(s!==void 0)return s;const r=t.emits;let o={},a=!1;if(!lt(t)){const l=c=>{const u=YT(c,e,!0);u&&(a=!0,Tt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!r&&!a?(qt(t)&&i.set(t,null),null):(Be(r)?r.forEach(l=>o[l]=null):Tt(o,r),qt(t)&&i.set(t,o),o)}function g1(t,e){return!t||!Wc(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ut(t,e[0].toLowerCase()+e.slice(1))||Ut(t,vs(e))||Ut(t,e))}function Rg(t){const{type:e,vnode:n,proxy:i,withProxy:s,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:h,data:p,setupState:m,ctx:y,inheritAttrs:O}=t,S=Mf(t);let x,T;try{if(n.shapeFlag&4){const D=s||i,M=D;x=ys(c.call(M,D,u,h,m,p,y)),T=a}else{const D=e;x=ys(D.length>1?D(h,{attrs:a,slots:o,emit:l}):D(h,null)),T=e.props?a:NX(a)}}catch(D){rf.length=0,Hc(D,t,1),x=_(jn)}let k=x;if(T&&O!==!1){const D=Object.keys(T),{shapeFlag:M}=k;D.length&&M&7&&(r&&D.some(wS)&&(T=LX(T,r)),k=Zo(k,T,!1,!0))}return n.dirs&&(k=Zo(k,null,!1,!0),k.dirs=k.dirs?k.dirs.concat(n.dirs):n.dirs),n.transition&&Ra(k,n.transition),x=k,Mf(S),x}function QX(t,e=!0){let n;for(let i=0;i<t.length;i++){const s=t[i];if(_a(s)){if(s.type!==jn||s.children==="v-if"){if(n)return;n=s}}else return}return n}const NX=t=>{let e;for(const n in t)(n==="class"||n==="style"||Wc(n))&&((e||(e={}))[n]=t[n]);return e},LX=(t,e)=>{const n={};for(const i in t)(!wS(i)||!(i.slice(9)in e))&&(n[i]=t[i]);return n};function FX(t,e,n){const{props:i,children:s,component:r}=t,{props:o,children:a,patchFlag:l}=e,c=r.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return i?m3(i,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const p=u[h];if(KT(o,i,p)&&!g1(c,p))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?m3(i,o,c):!0:!!o;return!1}function m3(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(KT(e,t,r)&&!g1(n,r))return!0}return!1}function KT(t,e,n){const i=t[n],s=e[n];return n==="style"&&qt(i)&&qt(s)?!Da(i,s):i!==s}function y1({vnode:t,parent:e},n){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=e.vnode).el=n,e=e.parent;else break}}const JT={},e$=()=>Object.create(JT),t$=t=>Object.getPrototypeOf(t)===JT;function BX(t,e,n,i=!1){const s={},r=e$();t.propsDefaults=Object.create(null),n$(t,e,s,r);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=i?s:TS(s):t.type.props?t.props=s:t.props=r,t.attrs=r}function VX(t,e,n,i){const{props:s,attrs:r,vnode:{patchFlag:o}}=t,a=Lt(s),[l]=t.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let p=u[h];if(g1(t.emitsOptions,p))continue;const m=e[p];if(l)if(Ut(r,p))m!==r[p]&&(r[p]=m,c=!0);else{const y=vn(p);s[y]=nv(l,a,y,m,t,!1)}else m!==r[p]&&(r[p]=m,c=!0)}}}else{n$(t,e,s,r)&&(c=!0);let u;for(const h in a)(!e||!Ut(e,h)&&((u=vs(h))===h||!Ut(e,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(s[h]=nv(l,a,h,void 0,t,!0)):delete s[h]);if(r!==a)for(const h in r)(!e||!Ut(e,h))&&(delete r[h],c=!0)}c&&ga(t.attrs,"set","")}function n$(t,e,n,i){const[s,r]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Ca(l))continue;const c=e[l];let u;s&&Ut(s,u=vn(l))?!r||!r.includes(u)?n[u]=c:(a||(a={}))[u]=c:g1(t.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(r){const l=Lt(n),c=a||Et;for(let u=0;u<r.length;u++){const h=r[u];n[h]=nv(s,l,h,c[h],t,!Ut(c,h))}}return o}function nv(t,e,n,i,s,r){const o=t[n];if(o!=null){const a=Ut(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&lt(l)){const{propsDefaults:c}=s;if(n in c)i=c[n];else{const u=Qc(s);i=c[n]=l.call(null,e),u()}}else i=l;s.ce&&s.ce._setProp(n,i)}o[0]&&(r&&!a?i=!1:o[1]&&(i===""||i===vs(n))&&(i=!0))}return i}const jX=new WeakMap;function i$(t,e,n=!1){const i=n?jX:e.propsCache,s=i.get(t);if(s)return s;const r=t.props,o={},a=[];let l=!1;if(!lt(t)){const u=h=>{l=!0;const[p,m]=i$(h,e,!0);Tt(o,p),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!r&&!l)return qt(t)&&i.set(t,Bu),Bu;if(Be(r))for(let u=0;u<r.length;u++){const h=vn(r[u]);g3(h)&&(o[h]=Et)}else if(r)for(const u in r){const h=vn(u);if(g3(h)){const p=r[u],m=o[h]=Be(p)||lt(p)?{type:p}:Tt({},p),y=m.type;let O=!1,S=!0;if(Be(y))for(let x=0;x<y.length;++x){const T=y[x],k=lt(T)&&T.name;if(k==="Boolean"){O=!0;break}else k==="String"&&(S=!1)}else O=lt(y)&&y.name==="Boolean";m[0]=O,m[1]=S,(O||Ut(m,"default"))&&a.push(h)}}const c=[o,a];return qt(t)&&i.set(t,c),c}function g3(t){return t[0]!=="$"&&!Ca(t)}const qS=t=>t==="_"||t==="_ctx"||t==="$stable",XS=t=>Be(t)?t.map(ys):[ys(t)],zX=(t,e,n)=>{if(e._n)return e;const i=U((...s)=>XS(e(...s)),n);return i._c=!1,i},s$=(t,e,n)=>{const i=t._ctx;for(const s in t){if(qS(s))continue;const r=t[s];if(lt(r))e[s]=zX(s,r,i);else if(r!=null){const o=XS(r);e[s]=()=>o}}},r$=(t,e)=>{const n=XS(e);t.slots.default=()=>n},o$=(t,e,n)=>{for(const i in e)(n||!qS(i))&&(t[i]=e[i])},ZX=(t,e,n)=>{const i=t.slots=e$();if(t.vnode.shapeFlag&32){const s=e._;s?(o$(i,e,n),n&&K6(i,"_",s,!0)):s$(e,i)}else e&&r$(t,e)},qX=(t,e,n)=>{const{vnode:i,slots:s}=t;let r=!0,o=Et;if(i.shapeFlag&32){const a=e._;a?n&&a===1?r=!1:o$(s,e,n):(r=!e.$stable,s$(e,s)),o=e}else e&&(r$(t,e),o={default:1});if(r)for(const a in s)!qS(a)&&o[a]==null&&delete s[a]},Bn=p$;function a$(t){return c$(t)}function l$(t){return c$(t,Yq)}function c$(t,e){const n=r1();n.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:p,setScopeId:m=Si,insertStaticContent:y}=t,O=(F,z,se,we=null,ce=null,Ce=null,_e=void 0,$e=null,xe=!!z.dynamicChildren)=>{if(F===z)return;F&&!Wr(F,z)&&(we=ue(F),ut(F,ce,Ce,!0),F=null),z.patchFlag===-2&&(xe=!1,z.dynamicChildren=null);const{type:be,ref:Ye,shapeFlag:Ee}=z;switch(be){case kl:S(F,z,se,we);break;case jn:x(F,z,se,we);break;case Pc:F==null&&T(z,se,we,_e);break;case le:W(F,z,se,we,ce,Ce,_e,$e,xe);break;default:Ee&1?M(F,z,se,we,ce,Ce,_e,$e,xe):Ee&6?oe(F,z,se,we,ce,Ce,_e,$e,xe):(Ee&64||Ee&128)&&be.process(F,z,se,we,ce,Ce,_e,$e,xe,he)}Ye!=null&&ce?qu(Ye,F&&F.ref,Ce,z||F,!z):Ye==null&&F&&F.ref!=null&&qu(F.ref,null,Ce,F,!0)},S=(F,z,se,we)=>{if(F==null)i(z.el=a(z.children),se,we);else{const ce=z.el=F.el;z.children!==F.children&&c(ce,z.children)}},x=(F,z,se,we)=>{F==null?i(z.el=l(z.children||""),se,we):z.el=F.el},T=(F,z,se,we)=>{[F.el,F.anchor]=y(F.children,z,se,we,F.el,F.anchor)},k=({el:F,anchor:z},se,we)=>{let ce;for(;F&&F!==z;)ce=p(F),i(F,se,we),F=ce;i(z,se,we)},D=({el:F,anchor:z})=>{let se;for(;F&&F!==z;)se=p(F),s(F),F=se;s(z)},M=(F,z,se,we,ce,Ce,_e,$e,xe)=>{if(z.type==="svg"?_e="svg":z.type==="math"&&(_e="mathml"),F==null)L(z,se,we,ce,Ce,_e,$e,xe);else{const be=F.el&&F.el._isVueCE?F.el:null;try{be&&be._beginPatch(),Z(F,z,ce,Ce,_e,$e,xe)}finally{be&&be._endPatch()}}},L=(F,z,se,we,ce,Ce,_e,$e)=>{let xe,be;const{props:Ye,shapeFlag:Ee,transition:Xe,dirs:rt}=F;if(xe=F.el=o(F.type,Ce,Ye&&Ye.is,Ye),Ee&8?u(xe,F.children):Ee&16&&G(F.children,xe,null,we,ce,Qb(F,Ce),_e,$e),rt&&To(F,null,we,"created"),j(xe,F,F.scopeId,_e,we),Ye){for(const It in Ye)It!=="value"&&!Ca(It)&&r(xe,It,null,Ye[It],Ce,we);"value"in Ye&&r(xe,"value",null,Ye.value,Ce),(be=Ye.onVnodeBeforeMount)&&fs(be,we,F)}rt&&To(F,null,we,"beforeMount");const gt=u$(ce,Xe);gt&&Xe.beforeEnter(xe),i(xe,z,se),((be=Ye&&Ye.onVnodeMounted)||gt||rt)&&Bn(()=>{be&&fs(be,we,F),gt&&Xe.enter(xe),rt&&To(F,null,we,"mounted")},ce)},j=(F,z,se,we,ce)=>{if(se&&m(F,se),we)for(let Ce=0;Ce<we.length;Ce++)m(F,we[Ce]);if(ce){let Ce=ce.subTree;if(z===Ce||vy(Ce.type)&&(Ce.ssContent===z||Ce.ssFallback===z)){const _e=ce.vnode;j(F,_e,_e.scopeId,_e.slotScopeIds,ce.parent)}}},G=(F,z,se,we,ce,Ce,_e,$e,xe=0)=>{for(let be=xe;be<F.length;be++){const Ye=F[be]=$e?ha(F[be]):ys(F[be]);O(null,Ye,z,se,we,ce,Ce,_e,$e)}},Z=(F,z,se,we,ce,Ce,_e)=>{const $e=z.el=F.el;let{patchFlag:xe,dynamicChildren:be,dirs:Ye}=z;xe|=F.patchFlag&16;const Ee=F.props||Et,Xe=z.props||Et;let rt;if(se&&ic(se,!1),(rt=Xe.onVnodeBeforeUpdate)&&fs(rt,se,z,F),Ye&&To(z,F,se,"beforeUpdate"),se&&ic(se,!0),(Ee.innerHTML&&Xe.innerHTML==null||Ee.textContent&&Xe.textContent==null)&&u($e,""),be?K(F.dynamicChildren,be,$e,se,we,Qb(z,ce),Ce):_e||Oe(F,z,$e,null,se,we,Qb(z,ce),Ce,!1),xe>0){if(xe&16)te($e,Ee,Xe,se,ce);else if(xe&2&&Ee.class!==Xe.class&&r($e,"class",null,Xe.class,ce),xe&4&&r($e,"style",Ee.style,Xe.style,ce),xe&8){const gt=z.dynamicProps;for(let It=0;It<gt.length;It++){const jt=gt[It],ri=Ee[jt],Zn=Xe[jt];(Zn!==ri||jt==="value")&&r($e,jt,ri,Zn,ce,se)}}xe&1&&F.children!==z.children&&u($e,z.children)}else!_e&&be==null&&te($e,Ee,Xe,se,ce);((rt=Xe.onVnodeUpdated)||Ye)&&Bn(()=>{rt&&fs(rt,se,z,F),Ye&&To(z,F,se,"updated")},we)},K=(F,z,se,we,ce,Ce,_e)=>{for(let $e=0;$e<z.length;$e++){const xe=F[$e],be=z[$e],Ye=xe.el&&(xe.type===le||!Wr(xe,be)||xe.shapeFlag&198)?h(xe.el):se;O(xe,be,Ye,null,we,ce,Ce,_e,!0)}},te=(F,z,se,we,ce)=>{if(z!==se){if(z!==Et)for(const Ce in z)!Ca(Ce)&&!(Ce in se)&&r(F,Ce,z[Ce],null,ce,we);for(const Ce in se){if(Ca(Ce))continue;const _e=se[Ce],$e=z[Ce];_e!==$e&&Ce!=="value"&&r(F,Ce,$e,_e,ce,we)}"value"in se&&r(F,"value",z.value,se.value,ce)}},W=(F,z,se,we,ce,Ce,_e,$e,xe)=>{const be=z.el=F?F.el:a(""),Ye=z.anchor=F?F.anchor:a("");let{patchFlag:Ee,dynamicChildren:Xe,slotScopeIds:rt}=z;rt&&($e=$e?$e.concat(rt):rt),F==null?(i(be,se,we),i(Ye,se,we),G(z.children||[],se,Ye,ce,Ce,_e,$e,xe)):Ee>0&&Ee&64&&Xe&&F.dynamicChildren&&F.dynamicChildren.length===Xe.length?(K(F.dynamicChildren,Xe,se,ce,Ce,_e,$e),(z.key!=null||ce&&z===ce.subTree)&&WS(F,z,!0)):Oe(F,z,se,Ye,ce,Ce,_e,$e,xe)},oe=(F,z,se,we,ce,Ce,_e,$e,xe)=>{z.slotScopeIds=$e,F==null?z.shapeFlag&512?ce.ctx.activate(z,se,we,_e,xe):ye(z,se,we,ce,Ce,_e,xe):ke(F,z,xe)},ye=(F,z,se,we,ce,Ce,_e)=>{const $e=F.component=v$(F,we,ce);if(wp(F)&&($e.ctx.renderer=he),S$($e,!1,_e),$e.asyncDep){if(ce&&ce.registerDep($e,ge,_e),!F.el){const xe=$e.subTree=_(jn);x(null,xe,z,se),F.placeholder=xe.el}}else ge($e,F,z,se,ce,Ce,_e)},ke=(F,z,se)=>{const we=z.component=F.component;if(FX(F,z,se))if(we.asyncDep&&!we.asyncResolved){Se(we,z,se);return}else we.next=z,we.update();else z.el=F.el,we.vnode=z},ge=(F,z,se,we,ce,Ce,_e)=>{const $e=()=>{if(F.isMounted){let{next:Ee,bu:Xe,u:rt,parent:gt,vnode:It}=F;{const hi=d$(F);if(hi){Ee&&(Ee.el=It.el,Se(F,Ee,_e)),hi.asyncDep.then(()=>{Bn(()=>{F.isUnmounted||be()},ce)});return}}let jt=Ee,ri;ic(F,!1),Ee?(Ee.el=It.el,Se(F,Ee,_e)):Ee=It,Xe&&zu(Xe),(ri=Ee.props&&Ee.props.onVnodeBeforeUpdate)&&fs(ri,gt,Ee,It),ic(F,!0);const Zn=Rg(F),zi=F.subTree;F.subTree=Zn,O(zi,Zn,h(zi.el),ue(zi),F,ce,Ce),Ee.el=Zn.el,jt===null&&y1(F,Zn.el),rt&&Bn(rt,ce),(ri=Ee.props&&Ee.props.onVnodeUpdated)&&Bn(()=>fs(ri,gt,Ee,It),ce)}else{let Ee;const{el:Xe,props:rt}=z,{bm:gt,m:It,parent:jt,root:ri,type:Zn}=F,zi=xa(z);if(ic(F,!1),gt&&zu(gt),!zi&&(Ee=rt&&rt.onVnodeBeforeMount)&&fs(Ee,jt,z),ic(F,!0),Xe&&Xt){const hi=()=>{F.subTree=Rg(F),Xt(Xe,F.subTree,F,ce,null)};zi&&Zn.__asyncHydrate?Zn.__asyncHydrate(Xe,F,hi):hi()}else{ri.ce&&ri.ce._hasShadowRoot()&&ri.ce._injectChildStyle(Zn);const hi=F.subTree=Rg(F);O(null,hi,se,we,F,ce,Ce),z.el=hi.el}if(It&&Bn(It,ce),!zi&&(Ee=rt&&rt.onVnodeMounted)){const hi=z;Bn(()=>fs(Ee,jt,hi),ce)}(z.shapeFlag&256||jt&&xa(jt.vnode)&&jt.vnode.shapeFlag&256)&&F.a&&Bn(F.a,ce),F.isMounted=!0,z=se=we=null}};F.scope.on();const xe=F.effect=new kf($e);F.scope.off();const be=F.update=xe.run.bind(xe),Ye=F.job=xe.runIfDirty.bind(xe);Ye.i=F,Ye.id=F.uid,xe.scheduler=()=>MS(Ye),ic(F,!0),be()},Se=(F,z,se)=>{z.component=F;const we=F.vnode.props;F.vnode=z,F.next=null,VX(F,z.props,we,se),qX(F,z.children,se),Ma(),n3(F),Ia()},Oe=(F,z,se,we,ce,Ce,_e,$e,xe=!1)=>{const be=F&&F.children,Ye=F?F.shapeFlag:0,Ee=z.children,{patchFlag:Xe,shapeFlag:rt}=z;if(Xe>0){if(Xe&128){dt(be,Ee,se,we,ce,Ce,_e,$e,xe);return}else if(Xe&256){Fe(be,Ee,se,we,ce,Ce,_e,$e,xe);return}}rt&8?(Ye&16&&Ft(be,ce,Ce),Ee!==be&&u(se,Ee)):Ye&16?rt&16?dt(be,Ee,se,we,ce,Ce,_e,$e,xe):Ft(be,ce,Ce,!0):(Ye&8&&u(se,""),rt&16&&G(Ee,se,we,ce,Ce,_e,$e,xe))},Fe=(F,z,se,we,ce,Ce,_e,$e,xe)=>{F=F||Bu,z=z||Bu;const be=F.length,Ye=z.length,Ee=Math.min(be,Ye);let Xe;for(Xe=0;Xe<Ee;Xe++){const rt=z[Xe]=xe?ha(z[Xe]):ys(z[Xe]);O(F[Xe],rt,se,null,ce,Ce,_e,$e,xe)}be>Ye?Ft(F,ce,Ce,!0,!1,Ee):G(z,se,we,ce,Ce,_e,$e,xe,Ee)},dt=(F,z,se,we,ce,Ce,_e,$e,xe)=>{let be=0;const Ye=z.length;let Ee=F.length-1,Xe=Ye-1;for(;be<=Ee&&be<=Xe;){const rt=F[be],gt=z[be]=xe?ha(z[be]):ys(z[be]);if(Wr(rt,gt))O(rt,gt,se,null,ce,Ce,_e,$e,xe);else break;be++}for(;be<=Ee&&be<=Xe;){const rt=F[Ee],gt=z[Xe]=xe?ha(z[Xe]):ys(z[Xe]);if(Wr(rt,gt))O(rt,gt,se,null,ce,Ce,_e,$e,xe);else break;Ee--,Xe--}if(be>Ee){if(be<=Xe){const rt=Xe+1,gt=rt<Ye?z[rt].el:we;for(;be<=Xe;)O(null,z[be]=xe?ha(z[be]):ys(z[be]),se,gt,ce,Ce,_e,$e,xe),be++}}else if(be>Xe)for(;be<=Ee;)ut(F[be],ce,Ce,!0),be++;else{const rt=be,gt=be,It=new Map;for(be=gt;be<=Xe;be++){const fi=z[be]=xe?ha(z[be]):ys(z[be]);fi.key!=null&&It.set(fi.key,be)}let jt,ri=0;const Zn=Xe-gt+1;let zi=!1,hi=0;const Ho=new Array(Zn);for(be=0;be<Zn;be++)Ho[be]=0;for(be=rt;be<=Ee;be++){const fi=F[be];if(ri>=Zn){ut(fi,ce,Ce,!0);continue}let rs;if(fi.key!=null)rs=It.get(fi.key);else for(jt=gt;jt<=Xe;jt++)if(Ho[jt-gt]===0&&Wr(fi,z[jt])){rs=jt;break}rs===void 0?ut(fi,ce,Ce,!0):(Ho[rs-gt]=be+1,rs>=hi?hi=rs:zi=!0,O(fi,z[rs],se,null,ce,Ce,_e,$e,xe),ri++)}const ru=zi?XX(Ho):Bu;for(jt=ru.length-1,be=Zn-1;be>=0;be--){const fi=gt+be,rs=z[fi],Jp=z[fi+1],em=fi+1<Ye?Jp.el||h$(Jp):we;Ho[be]===0?O(null,rs,se,em,ce,Ce,_e,$e,xe):zi&&(jt<0||be!==ru[jt]?Je(rs,se,em,2):jt--)}}},Je=(F,z,se,we,ce=null)=>{const{el:Ce,type:_e,transition:$e,children:xe,shapeFlag:be}=F;if(be&6){Je(F.component.subTree,z,se,we);return}if(be&128){F.suspense.move(z,se,we);return}if(be&64){_e.move(F,z,se,he);return}if(_e===le){i(Ce,z,se);for(let Ee=0;Ee<xe.length;Ee++)Je(xe[Ee],z,se,we);i(F.anchor,z,se);return}if(_e===Pc){k(F,z,se);return}if(we!==2&&be&1&&$e)if(we===0)$e.beforeEnter(Ce),i(Ce,z,se),Bn(()=>$e.enter(Ce),ce);else{const{leave:Ee,delayLeave:Xe,afterLeave:rt}=$e,gt=()=>{F.ctx.isUnmounted?s(Ce):i(Ce,z,se)},It=()=>{Ce._isLeaving&&Ce[$o](!0),Ee(Ce,()=>{gt(),rt&&rt()})};Xe?Xe(Ce,gt,It):It()}else i(Ce,z,se)},ut=(F,z,se,we=!1,ce=!1)=>{const{type:Ce,props:_e,ref:$e,children:xe,dynamicChildren:be,shapeFlag:Ye,patchFlag:Ee,dirs:Xe,cacheIndex:rt}=F;if(Ee===-2&&(ce=!1),$e!=null&&(Ma(),qu($e,null,se,F,!0),Ia()),rt!=null&&(z.renderCache[rt]=void 0),Ye&256){z.ctx.deactivate(F);return}const gt=Ye&1&&Xe,It=!xa(F);let jt;if(It&&(jt=_e&&_e.onVnodeBeforeUnmount)&&fs(jt,z,F),Ye&6)xt(F.component,se,we);else{if(Ye&128){F.suspense.unmount(se,we);return}gt&&To(F,null,z,"beforeUnmount"),Ye&64?F.type.remove(F,z,se,he,we):be&&!be.hasOnce&&(Ce!==le||Ee>0&&Ee&64)?Ft(be,z,se,!1,!0):(Ce===le&&Ee&384||!ce&&Ye&16)&&Ft(xe,z,se),we&&Qt(F)}(It&&(jt=_e&&_e.onVnodeUnmounted)||gt)&&Bn(()=>{jt&&fs(jt,z,F),gt&&To(F,null,z,"unmounted")},se)},Qt=F=>{const{type:z,el:se,anchor:we,transition:ce}=F;if(z===le){Pt(se,we);return}if(z===Pc){D(F);return}const Ce=()=>{s(se),ce&&!ce.persisted&&ce.afterLeave&&ce.afterLeave()};if(F.shapeFlag&1&&ce&&!ce.persisted){const{leave:_e,delayLeave:$e}=ce,xe=()=>_e(se,Ce);$e?$e(F.el,Ce,xe):xe()}else Ce()},Pt=(F,z)=>{let se;for(;F!==z;)se=p(F),s(F),F=se;s(z)},xt=(F,z,se)=>{const{bum:we,scope:ce,job:Ce,subTree:_e,um:$e,m:xe,a:be}=F;by(xe),by(be),we&&zu(we),ce.stop(),Ce&&(Ce.flags|=8,ut(_e,F,z,se)),$e&&Bn($e,z),Bn(()=>{F.isUnmounted=!0},z)},Ft=(F,z,se,we=!1,ce=!1,Ce=0)=>{for(let _e=Ce;_e<F.length;_e++)ut(F[_e],z,se,we,ce)},ue=F=>{if(F.shapeFlag&6)return ue(F.component.subTree);if(F.shapeFlag&128)return F.suspense.next();const z=p(F.anchor||F.el),se=z&&z[IT];return se?p(se):z};let De=!1;const re=(F,z,se)=>{let we;F==null?z._vnode&&(ut(z._vnode,null,null,!0),we=z._vnode.component):O(z._vnode||null,F,z,null,null,null,se),z._vnode=F,De||(De=!0,n3(we),gy(),De=!1)},he={p:O,um:ut,m:Je,r:Qt,mt:ye,mc:G,pc:Oe,pbc:K,n:ue,o:t};let ct,Xt;return e&&([ct,Xt]=e(he)),{render:re,hydrate:ct,createApp:IX(re,ct)}}function Qb({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function ic({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function u$(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function WS(t,e,n=!1){const i=t.children,s=e.children;if(Be(i)&&Be(s))for(let r=0;r<i.length;r++){const o=i[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=ha(s[r]),a.el=o.el),!n&&a.patchFlag!==-2&&WS(o,a)),a.type===kl&&(a.patchFlag===-1&&(a=s[r]=ha(a)),a.el=o.el),a.type===jn&&!a.el&&(a.el=o.el)}}function XX(t){const e=t.slice(),n=[0];let i,s,r,o,a;const l=t.length;for(i=0;i<l;i++){const c=t[i];if(c!==0){if(s=n[n.length-1],t[s]<c){e[i]=s,n.push(i);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,t[n[a]]<c?r=a+1:o=a;c<t[n[r]]&&(r>0&&(e[i]=n[r-1]),n[r]=i)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=e[o];return n}function d$(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:d$(e)}function by(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function h$(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?h$(e.subTree):null}const vy=t=>t.__isSuspense;let iv=0;const WX={name:"Suspense",__isSuspense:!0,process(t,e,n,i,s,r,o,a,l,c){if(t==null)UX(e,n,i,s,r,o,a,l,c);else{if(r&&r.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}HX(t,e,n,i,s,o,a,l,c)}},hydrate:YX,normalize:KX},GX=WX;function Rf(t,e){const n=t.props&&t.props[e];lt(n)&&n()}function UX(t,e,n,i,s,r,o,a,l){const{p:c,o:{createElement:u}}=l,h=u("div"),p=t.suspense=f$(t,s,i,e,h,n,r,o,a,l);c(null,p.pendingBranch=t.ssContent,h,null,i,p,r,o),p.deps>0?(Rf(t,"onPending"),Rf(t,"onFallback"),c(null,t.ssFallback,e,n,i,null,r,o),Xu(p,t.ssFallback)):p.resolve(!1,!0)}function HX(t,e,n,i,s,r,o,a,{p:l,um:c,o:{createElement:u}}){const h=e.suspense=t.suspense;h.vnode=e,e.el=t.el;const p=e.ssContent,m=e.ssFallback,{activeBranch:y,pendingBranch:O,isInFallback:S,isHydrating:x}=h;if(O)h.pendingBranch=p,Wr(O,p)?(l(O,p,h.hiddenContainer,null,s,h,r,o,a),h.deps<=0?h.resolve():S&&(x||(l(y,m,n,i,s,null,r,o,a),Xu(h,m)))):(h.pendingId=iv++,x?(h.isHydrating=!1,h.activeBranch=O):c(O,s,h),h.deps=0,h.effects.length=0,h.hiddenContainer=u("div"),S?(l(null,p,h.hiddenContainer,null,s,h,r,o,a),h.deps<=0?h.resolve():(l(y,m,n,i,s,null,r,o,a),Xu(h,m))):y&&Wr(y,p)?(l(y,p,n,i,s,h,r,o,a),h.resolve(!0)):(l(null,p,h.hiddenContainer,null,s,h,r,o,a),h.deps<=0&&h.resolve()));else if(y&&Wr(y,p))l(y,p,n,i,s,h,r,o,a),Xu(h,p);else if(Rf(e,"onPending"),h.pendingBranch=p,p.shapeFlag&512?h.pendingId=p.component.suspenseId:h.pendingId=iv++,l(null,p,h.hiddenContainer,null,s,h,r,o,a),h.deps<=0)h.resolve();else{const{timeout:T,pendingId:k}=h;T>0?setTimeout(()=>{h.pendingId===k&&h.fallback(m)},T):T===0&&h.fallback(m)}}function f$(t,e,n,i,s,r,o,a,l,c,u=!1){const{p:h,m:p,um:m,n:y,o:{parentNode:O,remove:S}}=c;let x;const T=JX(t);T&&e&&e.pendingBranch&&(x=e.pendingId,e.deps++);const k=t.props?dy(t.props.timeout):void 0,D=r,M={vnode:t,parent:e,parentComponent:n,namespace:o,container:i,hiddenContainer:s,deps:0,pendingId:iv++,timeout:typeof k=="number"?k:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(L=!1,j=!1){const{vnode:G,activeBranch:Z,pendingBranch:K,pendingId:te,effects:W,parentComponent:oe,container:ye,isInFallback:ke}=M;let ge=!1;M.isHydrating?M.isHydrating=!1:L||(ge=Z&&K.transition&&K.transition.mode==="out-in",ge&&(Z.transition.afterLeave=()=>{te===M.pendingId&&(p(K,ye,r===D?y(Z):r,0),$f(W),ke&&G.ssFallback&&(G.ssFallback.el=null))}),Z&&(O(Z.el)===ye&&(r=y(Z)),m(Z,oe,M,!0),!ge&&ke&&G.ssFallback&&Bn(()=>G.ssFallback.el=null,M)),ge||p(K,ye,r,0)),Xu(M,K),M.pendingBranch=null,M.isInFallback=!1;let Se=M.parent,Oe=!1;for(;Se;){if(Se.pendingBranch){Se.effects.push(...W),Oe=!0;break}Se=Se.parent}!Oe&&!ge&&$f(W),M.effects=[],T&&e&&e.pendingBranch&&x===e.pendingId&&(e.deps--,e.deps===0&&!j&&e.resolve()),Rf(G,"onResolve")},fallback(L){if(!M.pendingBranch)return;const{vnode:j,activeBranch:G,parentComponent:Z,container:K,namespace:te}=M;Rf(j,"onFallback");const W=y(G),oe=()=>{M.isInFallback&&(h(null,L,K,W,Z,null,te,a,l),Xu(M,L))},ye=L.transition&&L.transition.mode==="out-in";ye&&(G.transition.afterLeave=oe),M.isInFallback=!0,m(G,Z,null,!0),ye||oe()},move(L,j,G){M.activeBranch&&p(M.activeBranch,L,j,G),M.container=L},next(){return M.activeBranch&&y(M.activeBranch)},registerDep(L,j,G){const Z=!!M.pendingBranch;Z&&M.deps++;const K=L.vnode.el;L.asyncDep.catch(te=>{Hc(te,L,0)}).then(te=>{if(L.isUnmounted||M.isUnmounted||M.pendingId!==L.suspenseId)return;L.asyncResolved=!0;const{vnode:W}=L;rv(L,te,!1),K&&(W.el=K);const oe=!K&&L.subTree.el;j(L,W,O(K||L.subTree.el),K?null:y(L.subTree),M,o,G),oe&&(W.placeholder=null,S(oe)),y1(L,W.el),Z&&--M.deps===0&&M.resolve()})},unmount(L,j){M.isUnmounted=!0,M.activeBranch&&m(M.activeBranch,n,L,j),M.pendingBranch&&m(M.pendingBranch,n,L,j)}};return M}function YX(t,e,n,i,s,r,o,a,l){const c=e.suspense=f$(e,i,n,t.parentNode,document.createElement("div"),null,s,r,o,a,!0),u=l(t,c.pendingBranch=e.ssContent,n,c,r,o);return c.deps===0&&c.resolve(!1,!0),u}function KX(t){const{shapeFlag:e,children:n}=t,i=e&32;t.ssContent=y3(i?n.default:n),t.ssFallback=i?y3(n.fallback):_(jn)}function y3(t){let e;if(lt(t)){const n=Ec&&t._c;n&&(t._d=!1,w()),t=t(),n&&(t._d=!0,e=Ni,m$())}return Be(t)&&(t=QX(t)),t=ys(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function p$(t,e){e&&e.pendingBranch?Be(t)?e.effects.push(...t):e.effects.push(t):$f(t)}function Xu(t,e){t.activeBranch=e;const{vnode:n,parentComponent:i}=t;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;n.el=s,i&&i.subTree===n&&(i.vnode.el=s,y1(i,s))}function JX(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const le=Symbol.for("v-fgt"),kl=Symbol.for("v-txt"),jn=Symbol.for("v-cmt"),Pc=Symbol.for("v-stc"),rf=[];let Ni=null;function w(t=!1){rf.push(Ni=t?null:[])}function m$(){rf.pop(),Ni=rf[rf.length-1]||null}let Ec=1;function _f(t,e=!1){Ec+=t,t<0&&Ni&&e&&(Ni.hasOnce=!0)}function g$(t){return t.dynamicChildren=Ec>0?Ni||Bu:null,m$(),Ec>0&&Ni&&Ni.push(t),t}function P(t,e,n,i,s,r){return g$(v(t,e,n,i,s,r,!0))}function H(t,e,n,i,s){return g$(_(t,e,n,i,s,!0))}function _a(t){return t?t.__v_isVNode===!0:!1}function Wr(t,e){return t.type===e.type&&t.key===e.key}function eW(t){}const y$=({key:t})=>t??null,_g=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?mt(t)||Gn(t)||lt(t)?{i:wi,r:t,k:e,f:!!n}:t:null);function v(t,e=null,n=null,i=0,s=null,r=t===le?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&y$(e),ref:e&&_g(e),scopeId:d1,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:wi};return a?(GS(l,n),r&128&&t.normalize(l)):n&&(l.shapeFlag|=mt(n)?8:16),Ec>0&&!o&&Ni&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Ni.push(l),l}const _=tW;function tW(t,e=null,n=null,i=0,s=null,r=!1){if((!t||t===XT)&&(t=jn),_a(t)){const a=Zo(t,e,!0);return n&&GS(a,n),Ec>0&&!r&&Ni&&(a.shapeFlag&6?Ni[Ni.indexOf(t)]=a:Ni.push(a)),a.patchFlag=-2,a}if(aW(t)&&(t=t.__vccOpts),e){e=O$(e);let{class:a,style:l}=e;a&&!mt(a)&&(e.class=ee(a)),qt(l)&&(bp(l)&&!Be(l)&&(l=Tt({},l)),e.style=qe(l))}const o=mt(t)?1:vy(t)?128:RT(t)?64:qt(t)?4:lt(t)?2:0;return v(t,e,n,i,s,o,r,!0)}function O$(t){return t?bp(t)||t$(t)?Tt({},t):t:null}function Zo(t,e,n=!1,i=!1){const{props:s,ref:r,patchFlag:o,children:a,transition:l}=t,c=e?Kc(s||{},e):s,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&y$(c),ref:e&&e.ref?n&&r?Be(r)?r.concat(_g(e)):[r,_g(e)]:_g(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==le?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Zo(t.ssContent),ssFallback:t.ssFallback&&Zo(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&i&&Ra(u,l.clone(u)),u}function He(t=" ",e=0){return _(kl,null,t,e)}function b$(t,e){const n=_(Pc,null,t);return n.staticCount=e,n}function B(t="",e=!1){return e?(w(),H(jn,null,t)):_(jn,null,t)}function ys(t){return t==null||typeof t=="boolean"?_(jn):Be(t)?_(le,null,t.slice()):_a(t)?ha(t):_(kl,null,String(t))}function ha(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Zo(t)}function GS(t,e){let n=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(Be(e))n=16;else if(typeof e=="object")if(i&65){const s=e.default;s&&(s._c&&(s._d=!1),GS(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!t$(e)?e._ctx=wi:s===3&&wi&&(wi.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else lt(e)?(e={default:e,_ctx:wi},n=32):(e=String(e),i&64?(n=16,e=[He(e)]):n=8);t.children=e,t.shapeFlag|=n}function Kc(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const s in i)if(s==="class")e.class!==i.class&&(e.class=ee([e.class,i.class]));else if(s==="style")e.style=qe([e.style,i.style]);else if(Wc(s)){const r=e[s],o=i[s];o&&r!==o&&!(Be(r)&&r.includes(o))&&(e[s]=r?[].concat(r,o):o)}else s!==""&&(e[s]=i[s])}return e}function fs(t,e,n,i=null){Mr(t,e,7,[n,i])}const nW=UT();let iW=0;function v$(t,e,n){const i=t.type,s=(e?e.appContext:t.appContext)||nW,r={uid:iW++,vnode:t,type:i,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new AS(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:i$(i,s),emitsOptions:YT(i,s),emit:null,emitted:null,propsDefaults:Et,inheritAttrs:i.inheritAttrs,ctx:Et,data:Et,props:Et,attrs:Et,slots:Et,refs:Et,setupState:Et,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=_X.bind(null,r),t.ce&&t.ce(r),r}let bi=null;const ns=()=>bi||wi;let wy,sv;{const t=r1(),e=(n,i)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(i),r=>{s.length>1?s.forEach(o=>o(r)):s[0](r)}};wy=e("__VUE_INSTANCE_SETTERS__",n=>bi=n),sv=e("__VUE_SSR_SETTERS__",n=>gd=n)}const Qc=t=>{const e=bi;return wy(t),t.scope.on(),()=>{t.scope.off(),wy(e)}},Sy=()=>{bi&&bi.scope.off(),wy(null)};function w$(t){return t.vnode.shapeFlag&4}let gd=!1;function S$(t,e=!1,n=!1){e&&sv(e);const{props:i,children:s}=t.vnode,r=w$(t);BX(t,i,r,e),ZX(t,s,n||e);const o=r?sW(t,e):void 0;return e&&sv(!1),o}function sW(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,J2);const{setup:i}=n;if(i){Ma();const s=t.setupContext=i.length>1?x$(t):null,r=Qc(t),o=Xd(i,t,0,[t.props,s]),a=CS(o);if(Ia(),r(),(a||t.sp)&&!xa(t)&&ES(t),a){if(o.then(Sy,Sy),e)return o.then(l=>{rv(t,l,e)}).catch(l=>{Hc(l,t,0)});t.asyncDep=o}else rv(t,o,e)}else A$(t,e)}function rv(t,e,n){lt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:qt(e)&&(t.setupState=DS(e)),A$(t,n)}let Cy,ov;function C$(t){Cy=t,ov=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,hX))}}const rW=()=>!Cy;function A$(t,e,n){const i=t.type;if(!t.render){if(!e&&Cy&&!i.render){const s=i.template||ZS(t).template;if(s){const{isCustomElement:r,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=i,c=Tt(Tt({isCustomElement:r,delimiters:a},o),l);i.render=Cy(s,c)}}t.render=i.render||Si,ov&&ov(t)}{const s=Qc(t);Ma();try{kX(t)}finally{Ia(),s()}}}const oW={get(t,e){return Qi(t,"get",""),t[e]}};function x$(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,oW),slots:t.slots,emit:t.emit,expose:e}}function Sp(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(DS(Hs(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in sf)return sf[n](t)},has(e,n){return n in e||n in sf}})):t.proxy}function av(t,e=!0){return lt(t)?t.displayName||t.name:t.name||e&&t.__name}function aW(t){return lt(t)&&"__vccOpts"in t}const Dt=(t,e)=>kq(t,e,gd);function ja(t,e,n){try{_f(-1);const i=arguments.length;return i===2?qt(e)&&!Be(e)?_a(e)?_(t,null,[e]):_(t,e):_(t,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&_a(n)&&(n=[n]),_(t,e,n))}finally{_f(1)}}function lW(){}function cW(t,e,n,i){const s=n[i];if(s&&k$(s,t))return s;const r=e();return r.memo=t.slice(),r.cacheIndex=i,n[i]=r}function k$(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(Yi(n[i],e[i]))return!1;return Ec>0&&Ni&&Ni.push(t),!0}const P$="3.5.29",uW=Si,dW=Eq,hW=xu,fW=PT,pW={createComponentInstance:v$,setupComponent:S$,renderComponentRoot:Rg,setCurrentRenderingInstance:Mf,isVNode:_a,normalizeVNode:ys,getComponentPublicInstance:Sp,ensureValidVNode:zS,pushWarningContext:Mq,popWarningContext:Iq},mW=pW,gW=null,yW=null,OW=null;/**
* @vue/runtime-dom v3.5.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let lv;const O3=typeof window<"u"&&window.trustedTypes;if(O3)try{lv=O3.createPolicy("vue",{createHTML:t=>t})}catch{}const T$=lv?t=>lv.createHTML(t):t=>t,bW="http://www.w3.org/2000/svg",vW="http://www.w3.org/1998/Math/MathML",da=typeof document<"u"?document:null,b3=da&&da.createElement("template"),$$={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const s=e==="svg"?da.createElementNS(bW,t):e==="mathml"?da.createElementNS(vW,t):n?da.createElement(t,{is:n}):da.createElement(t);return t==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:t=>da.createTextNode(t),createComment:t=>da.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>da.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,i,s,r){const o=n?n.previousSibling:e.lastChild;if(s&&(s===r||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===r||!(s=s.nextSibling)););else{b3.innerHTML=T$(i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t);const a=b3.content;if(i==="svg"||i==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},nl="transition",Ah="animation",yd=Symbol("_vtc"),D$={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},M$=Tt({},_S,D$),wW=t=>(t.displayName="Transition",t.props=M$,t),Ir=wW((t,{slots:e})=>ja(NT,I$(t),e)),sc=(t,e=[])=>{Be(t)?t.forEach(n=>n(...e)):t&&t(...e)},v3=t=>t?Be(t)?t.some(e=>e.length>1):t.length>1:!1;function I$(t){const e={};for(const W in t)W in D$||(e[W]=t[W]);if(t.css===!1)return e;const{name:n="v",type:i,duration:s,enterFromClass:r=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=r,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,y=SW(s),O=y&&y[0],S=y&&y[1],{onBeforeEnter:x,onEnter:T,onEnterCancelled:k,onLeave:D,onLeaveCancelled:M,onBeforeAppear:L=x,onAppear:j=T,onAppearCancelled:G=k}=e,Z=(W,oe,ye,ke)=>{W._enterCancelled=ke,ll(W,oe?u:a),ll(W,oe?c:o),ye&&ye()},K=(W,oe)=>{W._isLeaving=!1,ll(W,h),ll(W,m),ll(W,p),oe&&oe()},te=W=>(oe,ye)=>{const ke=W?j:T,ge=()=>Z(oe,W,ye);sc(ke,[oe,ge]),w3(()=>{ll(oe,W?l:r),Ao(oe,W?u:a),v3(ke)||S3(oe,i,O,ge)})};return Tt(e,{onBeforeEnter(W){sc(x,[W]),Ao(W,r),Ao(W,o)},onBeforeAppear(W){sc(L,[W]),Ao(W,l),Ao(W,c)},onEnter:te(!1),onAppear:te(!0),onLeave(W,oe){W._isLeaving=!0;const ye=()=>K(W,oe);Ao(W,h),W._enterCancelled?(Ao(W,p),cv(W)):(cv(W),Ao(W,p)),w3(()=>{W._isLeaving&&(ll(W,h),Ao(W,m),v3(D)||S3(W,i,S,ye))}),sc(D,[W,ye])},onEnterCancelled(W){Z(W,!1,void 0,!0),sc(k,[W])},onAppearCancelled(W){Z(W,!0,void 0,!0),sc(G,[W])},onLeaveCancelled(W){K(W),sc(M,[W])}})}function SW(t){if(t==null)return null;if(qt(t))return[Nb(t.enter),Nb(t.leave)];{const e=Nb(t);return[e,e]}}function Nb(t){return dy(t)}function Ao(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[yd]||(t[yd]=new Set)).add(e)}function ll(t,e){e.split(/\s+/).forEach(i=>i&&t.classList.remove(i));const n=t[yd];n&&(n.delete(e),n.size||(t[yd]=void 0))}function w3(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let CW=0;function S3(t,e,n,i){const s=t._endId=++CW,r=()=>{s===t._endId&&i()};if(n!=null)return setTimeout(r,n);const{type:o,timeout:a,propCount:l}=R$(t,e);if(!o)return i();const c=o+"end";let u=0;const h=()=>{t.removeEventListener(c,p),r()},p=m=>{m.target===t&&++u>=l&&h()};setTimeout(()=>{u<l&&h()},a+1),t.addEventListener(c,p)}function R$(t,e){const n=window.getComputedStyle(t),i=y=>(n[y]||"").split(", "),s=i(`${nl}Delay`),r=i(`${nl}Duration`),o=C3(s,r),a=i(`${Ah}Delay`),l=i(`${Ah}Duration`),c=C3(a,l);let u=null,h=0,p=0;e===nl?o>0&&(u=nl,h=o,p=r.length):e===Ah?c>0&&(u=Ah,h=c,p=l.length):(h=Math.max(o,c),u=h>0?o>c?nl:Ah:null,p=u?u===nl?r.length:l.length:0);const m=u===nl&&/\b(?:transform|all)(?:,|$)/.test(i(`${nl}Property`).toString());return{type:u,timeout:h,propCount:p,hasTransform:m}}function C3(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,i)=>A3(n)+A3(t[i])))}function A3(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function cv(t){return(t?t.ownerDocument:document).body.offsetHeight}function AW(t,e,n){const i=t[yd];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Ay=Symbol("_vod"),_$=Symbol("_vsh"),ii={name:"show",beforeMount(t,{value:e},{transition:n}){t[Ay]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):xh(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:i}){!e!=!n&&(i?e?(i.beforeEnter(t),xh(t,!0),i.enter(t)):i.leave(t,()=>{xh(t,!1)}):xh(t,e))},beforeUnmount(t,{value:e}){xh(t,e)}};function xh(t,e){t.style.display=e?t[Ay]:"none",t[_$]=!e}function xW(){ii.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const E$=Symbol("");function kW(t){const e=ns();if(!e)return;const n=e.ut=(s=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(r=>xy(r,s))},i=()=>{const s=t(e.proxy);e.ce?xy(e.ce,s):uv(e.subTree,s),n(s)};LS(()=>{$f(i)}),Yc(()=>{xl(i,Si,{flush:"post"});const s=new MutationObserver(i);s.observe(e.subTree.el.parentNode,{childList:!0}),Wd(()=>s.disconnect())})}function uv(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{uv(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)xy(t.el,e);else if(t.type===le)t.children.forEach(n=>uv(n,e));else if(t.type===Pc){let{el:n,anchor:i}=t;for(;n&&(xy(n,e),n!==i);)n=n.nextSibling}}function xy(t,e){if(t.nodeType===1){const n=t.style;let i="";for(const s in e){const r=qZ(e[s]);n.setProperty(`--${s}`,r),i+=`--${s}: ${r};`}n[E$]=i}}const PW=/(?:^|;)\s*display\s*:/;function TW(t,e,n){const i=t.style,s=mt(n);let r=!1;if(n&&!s){if(e)if(mt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Eg(i,a,"")}else for(const o in e)n[o]==null&&Eg(i,o,"");for(const o in n)o==="display"&&(r=!0),Eg(i,o,n[o])}else if(s){if(e!==n){const o=i[E$];o&&(n+=";"+o),i.cssText=n,r=PW.test(n)}}else e&&t.removeAttribute("style");Ay in t&&(t[Ay]=r?i.display:"",t[_$]&&(i.display="none"))}const x3=/\s*!important$/;function Eg(t,e,n){if(Be(n))n.forEach(i=>Eg(t,e,i));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=$W(t,e);x3.test(n)?t.setProperty(vs(i),n.replace(x3,""),"important"):t[i]=n}}const k3=["Webkit","Moz","ms"],Lb={};function $W(t,e){const n=Lb[e];if(n)return n;let i=vn(e);if(i!=="filter"&&i in t)return Lb[e]=i;i=Uc(i);for(let s=0;s<k3.length;s++){const r=k3[s]+i;if(r in t)return Lb[e]=r}return e}const P3="http://www.w3.org/1999/xlink";function T3(t,e,n,i,s,r=zZ(e)){i&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(P3,e.slice(6,e.length)):t.setAttributeNS(P3,e,n):n==null||r&&!eT(n)?t.removeAttribute(e):t.setAttribute(e,r?"":Ds(n)?String(n):n)}function $3(t,e,n,i,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?T$(n):n);return}const r=t.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=eT(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function Oa(t,e,n,i){t.addEventListener(e,n,i)}function DW(t,e,n,i){t.removeEventListener(e,n,i)}const D3=Symbol("_vei");function MW(t,e,n,i,s=null){const r=t[D3]||(t[D3]={}),o=r[e];if(i&&o)o.value=i;else{const[a,l]=IW(e);if(i){const c=r[e]=EW(i,s);Oa(t,a,c,l)}else o&&(DW(t,a,o,l),r[e]=void 0)}}const M3=/(?:Once|Passive|Capture)$/;function IW(t){let e;if(M3.test(t)){e={};let i;for(;i=t.match(M3);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):vs(t.slice(2)),e]}let Fb=0;const RW=Promise.resolve(),_W=()=>Fb||(RW.then(()=>Fb=0),Fb=Date.now());function EW(t,e){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;Mr(QW(i,n.value),e,5,[i])};return n.value=t,n.attached=_W(),n}function QW(t,e){if(Be(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(i=>s=>!s._stopped&&i&&i(s))}else return e}const I3=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Q$=(t,e,n,i,s,r)=>{const o=s==="svg";e==="class"?AW(t,i,o):e==="style"?TW(t,n,i):Wc(e)?wS(e)||MW(t,e,n,i,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):NW(t,e,i,o))?($3(t,e,i),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&T3(t,e,i,o,r,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!mt(i))?$3(t,vn(e),i,r,e):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),T3(t,e,i,o))};function NW(t,e,n,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in t&&I3(e)&&lt(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return I3(e)&&mt(n)?!1:e in t}const R3={};function N$(t,e,n){let i=ve(t,e);t1(i)&&(i=Tt({},i,e));class s extends O1{constructor(o){super(i,o,n)}}return s.def=i,s}const LW=(t,e)=>N$(t,e,H$),FW=typeof HTMLElement<"u"?HTMLElement:class{};class O1 extends FW{constructor(e,n={},i=bd){super(),this._def=e,this._props=n,this._createApp=i,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._patching=!1,this._dirty=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&i!==bd?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow(Tt({},e.shadowRootOptions,{mode:"open"})),this._root=this.shadowRoot):this._root=this}connectedCallback(){if(!this.isConnected)return;!this.shadowRoot&&!this._resolved&&this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof O1){this._parent=e;break}this._instance||(this._resolved?this._mount(this._def):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._inheritParentContext(e))}_inheritParentContext(e=this._parent){e&&this._app&&Object.setPrototypeOf(this._app._context.provides,e._instance.provides)}disconnectedCallback(){this._connected=!1,Bi(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null,this._teleportTargets&&(this._teleportTargets.clear(),this._teleportTargets=void 0))})}_processMutations(e){for(const n of e)this._setAttr(n.attributeName)}_resolveDef(){if(this._pendingResolve)return;for(let i=0;i<this.attributes.length;i++)this._setAttr(this.attributes[i].name);this._ob=new MutationObserver(this._processMutations.bind(this)),this._ob.observe(this,{attributes:!0});const e=(i,s=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:r,styles:o}=i;let a;if(r&&!Be(r))for(const l in r){const c=r[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=dy(this._props[l])),(a||(a=Object.create(null)))[vn(l)]=!0)}this._numberProps=a,this._resolveProps(i),this.shadowRoot&&this._applyStyles(o),this._mount(i)},n=this._def.__asyncLoader;n?this._pendingResolve=n().then(i=>{i.configureApp=this._def.configureApp,e(this._def=i,!0)}):e(this._def)}_mount(e){this._app=this._createApp(e),this._inheritParentContext(),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const n=this._instance&&this._instance.exposed;if(n)for(const i in n)Ut(this,i)||Object.defineProperty(this,i,{get:()=>Ys(n[i])})}_resolveProps(e){const{props:n}=e,i=Be(n)?n:Object.keys(n||{});for(const s of Object.keys(this))s[0]!=="_"&&i.includes(s)&&this._setProp(s,this[s]);for(const s of i.map(vn))Object.defineProperty(this,s,{get(){return this._getProp(s)},set(r){this._setProp(s,r,!0,!this._patching)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const n=this.hasAttribute(e);let i=n?this.getAttribute(e):R3;const s=vn(e);n&&this._numberProps&&this._numberProps[s]&&(i=dy(i)),this._setProp(s,i,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,n,i=!0,s=!1){if(n!==this._props[e]&&(this._dirty=!0,n===R3?delete this._props[e]:(this._props[e]=n,e==="key"&&this._app&&(this._app._ceVNode.key=n)),s&&this._instance&&this._update(),i)){const r=this._ob;r&&(this._processMutations(r.takeRecords()),r.disconnect()),n===!0?this.setAttribute(vs(e),""):typeof n=="string"||typeof n=="number"?this.setAttribute(vs(e),n+""):n||this.removeAttribute(vs(e)),r&&r.observe(this,{attributes:!0})}}_update(){const e=this._createVNode();this._app&&(e.appContext=this._app._context),U$(e,this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const n=_(this._def,Tt(e,this._props));return this._instance||(n.ce=i=>{this._instance=i,i.ce=this,i.isCE=!0;const s=(r,o)=>{this.dispatchEvent(new CustomEvent(r,t1(o[0])?Tt({detail:o},o[0]):{detail:o}))};i.emit=(r,...o)=>{s(r,o),vs(r)!==r&&s(vs(r),o)},this._setParent()}),n}_applyStyles(e,n){if(!e)return;if(n){if(n===this._def||this._styleChildren.has(n))return;this._styleChildren.add(n)}const i=this._nonce;for(let s=e.length-1;s>=0;s--){const r=document.createElement("style");i&&r.setAttribute("nonce",i),r.textContent=e[s],this.shadowRoot.prepend(r)}}_parseSlots(){const e=this._slots={};let n;for(;n=this.firstChild;){const i=n.nodeType===1&&n.getAttribute("slot")||"default";(e[i]||(e[i]=[])).push(n),this.removeChild(n)}}_renderSlots(){const e=this._getSlots(),n=this._instance.type.__scopeId;for(let i=0;i<e.length;i++){const s=e[i],r=s.getAttribute("name")||"default",o=this._slots[r],a=s.parentNode;if(o)for(const l of o){if(n&&l.nodeType===1){const c=n+"-s",u=document.createTreeWalker(l,1);l.setAttribute(c,"");let h;for(;h=u.nextNode();)h.setAttribute(c,"")}a.insertBefore(l,s)}else for(;s.firstChild;)a.insertBefore(s.firstChild,s);a.removeChild(s)}}_getSlots(){const e=[this];this._teleportTargets&&e.push(...this._teleportTargets);const n=new Set;for(const i of e){const s=i.querySelectorAll("slot");for(let r=0;r<s.length;r++)n.add(s[r])}return Array.from(n)}_injectChildStyle(e){this._applyStyles(e.styles,e)}_beginPatch(){this._patching=!0,this._dirty=!1}_endPatch(){this._patching=!1,this._dirty&&this._instance&&this._update()}_hasShadowRoot(){return this._def.shadowRoot!==!1}_removeChildStyle(e){}}function L$(t){const e=ns(),n=e&&e.ce;return n||null}function BW(){const t=L$();return t&&t.shadowRoot}function VW(t="$style"){{const e=ns();if(!e)return Et;const n=e.type.__cssModules;if(!n)return Et;const i=n[t];return i||Et}}const F$=new WeakMap,B$=new WeakMap,ky=Symbol("_moveCb"),_3=Symbol("_enterCb"),jW=t=>(delete t.props.mode,t),zW=jW({name:"TransitionGroup",props:Tt({},M$,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=ns(),i=RS();let s,r;return p1(()=>{if(!s.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!GW(s[0].el,n.vnode.el,o)){s=[];return}s.forEach(qW),s.forEach(XW);const a=s.filter(WW);cv(n.vnode.el),a.forEach(l=>{const c=l.el,u=c.style;Ao(c,o),u.transform=u.webkitTransform=u.transitionDuration="";const h=c[ky]=p=>{p&&p.target!==c||(!p||p.propertyName.endsWith("transform"))&&(c.removeEventListener("transitionend",h),c[ky]=null,ll(c,o))};c.addEventListener("transitionend",h)}),s=[]}),()=>{const o=Lt(t),a=I$(o);let l=o.tag||le;if(s=[],r)for(let c=0;c<r.length;c++){const u=r[c];u.el&&u.el instanceof Element&&(s.push(u),Ra(u,md(u,a,i,n)),F$.set(u,V$(u.el)))}r=e.default?h1(e.default()):[];for(let c=0;c<r.length;c++){const u=r[c];u.key!=null&&Ra(u,md(u,a,i,n))}return _(l,null,r)}}}),ZW=zW;function qW(t){const e=t.el;e[ky]&&e[ky](),e[_3]&&e[_3]()}function XW(t){B$.set(t,V$(t.el))}function WW(t){const e=F$.get(t),n=B$.get(t),i=e.left-n.left,s=e.top-n.top;if(i||s){const r=t.el,o=r.style,a=r.getBoundingClientRect();let l=1,c=1;return r.offsetWidth&&(l=a.width/r.offsetWidth),r.offsetHeight&&(c=a.height/r.offsetHeight),(!Number.isFinite(l)||l===0)&&(l=1),(!Number.isFinite(c)||c===0)&&(c=1),Math.abs(l-1)<.01&&(l=1),Math.abs(c-1)<.01&&(c=1),o.transform=o.webkitTransform=`translate(${i/l}px,${s/c}px)`,o.transitionDuration="0s",t}}function V$(t){const e=t.getBoundingClientRect();return{left:e.left,top:e.top}}function GW(t,e,n){const i=t.cloneNode(),s=t[yd];s&&s.forEach(a=>{a.split(/\s+/).forEach(l=>l&&i.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&i.classList.add(a)),i.style.display="none";const r=e.nodeType===1?e:e.parentNode;r.appendChild(i);const{hasTransform:o}=R$(i);return r.removeChild(i),o}const Ml=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Be(e)?n=>zu(e,n):e};function UW(t){t.target.composing=!0}function E3(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const $r=Symbol("_assign");function Q3(t,e,n){return e&&(t=t.trim()),n&&(t=s1(t)),t}const qo={created(t,{modifiers:{lazy:e,trim:n,number:i}},s){t[$r]=Ml(s);const r=i||s.props&&s.props.type==="number";Oa(t,e?"change":"input",o=>{o.target.composing||t[$r](Q3(t.value,n,r))}),(n||r)&&Oa(t,"change",()=>{t.value=Q3(t.value,n,r)}),e||(Oa(t,"compositionstart",UW),Oa(t,"compositionend",E3),Oa(t,"change",E3))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:i,trim:s,number:r}},o){if(t[$r]=Ml(o),t.composing)return;const a=(r||t.type==="number")&&!/^0\d/.test(t.value)?s1(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(i&&e===n||s&&t.value.trim()===l)||(t.value=l))}},US={deep:!0,created(t,e,n){t[$r]=Ml(n),Oa(t,"change",()=>{const i=t._modelValue,s=Od(t),r=t.checked,o=t[$r];if(Be(i)){const a=o1(i,s),l=a!==-1;if(r&&!l)o(i.concat(s));else if(!r&&l){const c=[...i];c.splice(a,1),o(c)}}else if(Gc(i)){const a=new Set(i);r?a.add(s):a.delete(s),o(a)}else o(z$(t,r))})},mounted:N3,beforeUpdate(t,e,n){t[$r]=Ml(n),N3(t,e,n)}};function N3(t,{value:e,oldValue:n},i){t._modelValue=e;let s;if(Be(e))s=o1(e,i.props.value)>-1;else if(Gc(e))s=e.has(i.props.value);else{if(e===n)return;s=Da(e,z$(t,!0))}t.checked!==s&&(t.checked=s)}const HS={created(t,{value:e},n){t.checked=Da(e,n.props.value),t[$r]=Ml(n),Oa(t,"change",()=>{t[$r](Od(t))})},beforeUpdate(t,{value:e,oldValue:n},i){t[$r]=Ml(i),e!==n&&(t.checked=Da(e,i.props.value))}},j$={deep:!0,created(t,{value:e,modifiers:{number:n}},i){const s=Gc(e);Oa(t,"change",()=>{const r=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?s1(Od(o)):Od(o));t[$r](t.multiple?s?new Set(r):r:r[0]),t._assigning=!0,Bi(()=>{t._assigning=!1})}),t[$r]=Ml(i)},mounted(t,{value:e}){L3(t,e)},beforeUpdate(t,e,n){t[$r]=Ml(n)},updated(t,{value:e}){t._assigning||L3(t,e)}};function L3(t,e){const n=t.multiple,i=Be(e);if(!(n&&!i&&!Gc(e))){for(let s=0,r=t.options.length;s<r;s++){const o=t.options[s],a=Od(o);if(n)if(i){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=o1(e,a)>-1}else o.selected=e.has(a);else if(Da(Od(o),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Od(t){return"_value"in t?t._value:t.value}function z$(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const Z$={created(t,e,n){Km(t,e,n,null,"created")},mounted(t,e,n){Km(t,e,n,null,"mounted")},beforeUpdate(t,e,n,i){Km(t,e,n,i,"beforeUpdate")},updated(t,e,n,i){Km(t,e,n,i,"updated")}};function q$(t,e){switch(t){case"SELECT":return j$;case"TEXTAREA":return qo;default:switch(e){case"checkbox":return US;case"radio":return HS;default:return qo}}}function Km(t,e,n,i,s){const o=q$(t.tagName,n.props&&n.props.type)[s];o&&o(t,e,n,i)}function HW(){qo.getSSRProps=({value:t})=>({value:t}),HS.getSSRProps=({value:t},e)=>{if(e.props&&Da(e.props.value,t))return{checked:!0}},US.getSSRProps=({value:t},e)=>{if(Be(t)){if(e.props&&o1(t,e.props.value)>-1)return{checked:!0}}else if(Gc(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},Z$.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const n=q$(e.type.toUpperCase(),e.props&&e.props.type);if(n.getSSRProps)return n.getSSRProps(t,e)}}const YW=["ctrl","shift","alt","meta"],KW={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>YW.some(n=>t[`${n}Key`]&&!e.includes(n))},_i=(t,e)=>{if(!t)return t;const n=t._withMods||(t._withMods={}),i=e.join(".");return n[i]||(n[i]=(s,...r)=>{for(let o=0;o<e.length;o++){const a=KW[e[o]];if(a&&a(s,e))return}return t(s,...r)})},JW={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},pn=(t,e)=>{const n=t._withKeys||(t._withKeys={}),i=e.join(".");return n[i]||(n[i]=s=>{if(!("key"in s))return;const r=vs(s.key);if(e.some(o=>o===r||JW[o]===r))return t(s)})},X$=Tt({patchProp:Q$},$$);let of,F3=!1;function W$(){return of||(of=a$(X$))}function G$(){return of=F3?of:l$(X$),F3=!0,of}const U$=(...t)=>{W$().render(...t)},eG=(...t)=>{G$().hydrate(...t)},bd=(...t)=>{const e=W$().createApp(...t),{mount:n}=e;return e.mount=i=>{const s=K$(i);if(!s)return;const r=e._component;!lt(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,Y$(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e},H$=(...t)=>{const e=G$().createApp(...t),{mount:n}=e;return e.mount=i=>{const s=K$(i);if(s)return n(s,!0,Y$(s))},e};function Y$(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function K$(t){return mt(t)?document.querySelector(t):t}let B3=!1;const tG=()=>{B3||(B3=!0,HW(),xW())},nG=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:NT,BaseTransitionPropsValidators:_S,Comment:jn,DeprecationTypes:OW,EffectScope:AS,ErrorCodes:_q,ErrorTypeStrings:dW,Fragment:le,KeepAlive:FT,ReactiveEffect:kf,Static:Pc,Suspense:GX,Teleport:IS,Text:kl,TrackOpTypes:Pq,Transition:Ir,TransitionGroup:ZW,TriggerOpTypes:Tq,VueElement:O1,assertNumber:Rq,callWithAsyncErrorHandling:Mr,callWithErrorHandling:Xd,camelize:vn,capitalize:Uc,cloneVNode:Zo,compatUtils:yW,computed:Dt,createApp:bd,createBlock:H,createCommentVNode:B,createElementBlock:P,createElementVNode:v,createHydrationRenderer:l$,createPropsRestProxy:AX,createRenderer:a$,createSSRApp:H$,createSlots:jS,createStaticVNode:b$,createTextVNode:He,createVNode:_,customRef:vT,defineAsyncComponent:aX,defineComponent:ve,defineCustomElement:N$,defineEmits:pX,defineExpose:mX,defineModel:OX,defineOptions:gX,defineProps:fX,defineSSRCustomElement:LW,defineSlots:yX,devtools:hW,effect:UZ,effectScope:XZ,getCurrentInstance:ns,getCurrentScope:iT,getCurrentWatcher:$q,getTransitionRawChildren:h1,guardReactiveProps:O$,h:ja,handleError:Hc,hasInjectionContext:Vq,hydrate:eG,hydrateOnIdle:tX,hydrateOnInteraction:rX,hydrateOnMediaQuery:sX,hydrateOnVisible:iX,initCustomFormatter:lW,initDirectivesForSSR:tG,inject:st,isMemoSame:k$,isProxy:bp,isReactive:Aa,isReadonly:zo,isRef:Gn,isRuntimeOnly:rW,isShallow:ks,isVNode:_a,markRaw:Hs,mergeDefaults:SX,mergeModels:CX,mergeProps:Kc,nextTick:Bi,nodeOps:$$,normalizeClass:ee,normalizeProps:RZ,normalizeStyle:qe,onActivated:QS,onBeforeMount:VT,onBeforeUnmount:m1,onBeforeUpdate:LS,onDeactivated:NS,onErrorCaptured:qT,onMounted:Yc,onRenderTracked:ZT,onRenderTriggered:zT,onScopeDispose:WZ,onServerPrefetch:jT,onUnmounted:Wd,onUpdated:p1,onWatcherCleanup:ST,openBlock:w,patchProp:Q$,popScopeId:Fq,provide:wa,proxyRefs:DS,pushScopeId:Lq,queuePostFlushCb:$f,reactive:Bl,readonly:fy,ref:Cn,registerRuntimeCompiler:C$,render:U$,renderList:Pe,renderSlot:Ge,resolveComponent:Q,resolveDirective:BS,resolveDynamicComponent:ro,resolveFilter:gW,resolveTransitionHooks:md,setBlockTracking:_f,setDevtoolsHook:fW,setTransitionHooks:Ra,shallowReactive:TS,shallowReadonly:mq,shallowRef:$S,ssrContextKey:TT,ssrUtils:mW,stop:HZ,toDisplayString:R,toHandlerKey:ju,toHandlers:dX,toRaw:Lt,toRef:Aq,toRefs:wq,toValue:Oq,transformVNodeArgs:eW,triggerRef:yq,unref:Ys,useAttrs:wX,useCssModule:VW,useCssVars:kW,useHost:L$,useId:Wq,useModel:RX,useSSRContext:$T,useShadowRoot:BW,useSlots:vX,useTemplateRef:Gq,useTransitionState:RS,vModelCheckbox:US,vModelDynamic:Z$,vModelRadio:HS,vModelSelect:j$,vModelText:qo,vShow:ii,version:P$,warn:uW,watch:xl,watchEffect:jq,watchPostEffect:zq,watchSyncEffect:DT,withAsyncContext:xX,withCtx:U,withDefaults:bX,withDirectives:mn,withKeys:pn,withMemo:cW,withModifiers:_i,withScopeId:Bq},Symbol.toStringTag,{value:"Module"}));/**
* @vue/compiler-core v3.5.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Ef=Symbol(""),af=Symbol(""),YS=Symbol(""),Py=Symbol(""),J$=Symbol(""),Nc=Symbol(""),eD=Symbol(""),tD=Symbol(""),KS=Symbol(""),JS=Symbol(""),Cp=Symbol(""),eC=Symbol(""),nD=Symbol(""),tC=Symbol(""),nC=Symbol(""),iC=Symbol(""),sC=Symbol(""),rC=Symbol(""),oC=Symbol(""),iD=Symbol(""),sD=Symbol(""),b1=Symbol(""),Ty=Symbol(""),aC=Symbol(""),lC=Symbol(""),Qf=Symbol(""),Ap=Symbol(""),cC=Symbol(""),dv=Symbol(""),iG=Symbol(""),hv=Symbol(""),$y=Symbol(""),sG=Symbol(""),rG=Symbol(""),uC=Symbol(""),oG=Symbol(""),aG=Symbol(""),dC=Symbol(""),rD=Symbol(""),vd={[Ef]:"Fragment",[af]:"Teleport",[YS]:"Suspense",[Py]:"KeepAlive",[J$]:"BaseTransition",[Nc]:"openBlock",[eD]:"createBlock",[tD]:"createElementBlock",[KS]:"createVNode",[JS]:"createElementVNode",[Cp]:"createCommentVNode",[eC]:"createTextVNode",[nD]:"createStaticVNode",[tC]:"resolveComponent",[nC]:"resolveDynamicComponent",[iC]:"resolveDirective",[sC]:"resolveFilter",[rC]:"withDirectives",[oC]:"renderList",[iD]:"renderSlot",[sD]:"createSlots",[b1]:"toDisplayString",[Ty]:"mergeProps",[aC]:"normalizeClass",[lC]:"normalizeStyle",[Qf]:"normalizeProps",[Ap]:"guardReactiveProps",[cC]:"toHandlers",[dv]:"camelize",[iG]:"capitalize",[hv]:"toHandlerKey",[$y]:"setBlockTracking",[sG]:"pushScopeId",[rG]:"popScopeId",[uC]:"withCtx",[oG]:"unref",[aG]:"isRef",[dC]:"withMemo",[rD]:"isMemoSame"};function lG(t){Object.getOwnPropertySymbols(t).forEach(e=>{vd[e]=t[e]})}const ir={start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0},source:""};function cG(t,e=""){return{type:0,source:e,children:t,helpers:new Set,components:[],directives:[],hoists:[],imports:[],cached:[],temps:0,codegenNode:void 0,loc:ir}}function Nf(t,e,n,i,s,r,o,a=!1,l=!1,c=!1,u=ir){return t&&(a?(t.helper(Nc),t.helper(Cd(t.inSSR,c))):t.helper(Sd(t.inSSR,c)),o&&t.helper(rC)),{type:13,tag:e,props:n,children:i,patchFlag:s,dynamicProps:r,directives:o,isBlock:a,disableTracking:l,isComponent:c,loc:u}}function Tc(t,e=ir){return{type:17,loc:e,elements:t}}function Cr(t,e=ir){return{type:15,loc:e,properties:t}}function Xn(t,e){return{type:16,loc:ir,key:mt(t)?Ot(t,!0):t,value:e}}function Ot(t,e=!1,n=ir,i=0){return{type:4,loc:n,content:t,isStatic:e,constType:e?3:i}}function to(t,e=ir){return{type:8,loc:e,children:t}}function ni(t,e=[],n=ir){return{type:14,loc:n,callee:t,arguments:e}}function wd(t,e=void 0,n=!1,i=!1,s=ir){return{type:18,params:t,returns:e,newline:n,isSlot:i,loc:s}}function fv(t,e,n,i=!0){return{type:19,test:t,consequent:e,alternate:n,newline:i,loc:ir}}function uG(t,e,n=!1,i=!1){return{type:20,index:t,value:e,needPauseTracking:n,inVOnce:i,needArraySpread:!1,loc:ir}}function dG(t){return{type:21,body:t,loc:ir}}function Sd(t,e){return t||e?KS:JS}function Cd(t,e){return t||e?eD:tD}function hC(t,{helper:e,removeHelper:n,inSSR:i}){t.isBlock||(t.isBlock=!0,n(Sd(i,t.isComponent)),e(Nc),e(Cd(i,t.isComponent)))}const V3=new Uint8Array([123,123]),j3=new Uint8Array([125,125]);function z3(t){return t>=97&&t<=122||t>=65&&t<=90}function zs(t){return t===32||t===10||t===9||t===12||t===13}function il(t){return t===47||t===62||zs(t)}function Dy(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}const Di={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97])};class hG{constructor(e,n){this.stack=e,this.cbs=n,this.state=1,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=1,this.inRCDATA=!1,this.inXML=!1,this.inVPre=!1,this.newlines=[],this.mode=0,this.delimiterOpen=V3,this.delimiterClose=j3,this.delimiterIndex=-1,this.currentSequence=void 0,this.sequenceIndex=0}get inSFCRoot(){return this.mode===2&&this.stack.length===0}reset(){this.state=1,this.mode=0,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=1,this.inRCDATA=!1,this.currentSequence=void 0,this.newlines.length=0,this.delimiterOpen=V3,this.delimiterClose=j3}getPos(e){let n=1,i=e+1;const s=this.newlines.length;let r=-1;if(s>100){let o=-1,a=s;for(;o+1<a;){const l=o+a>>>1;this.newlines[l]<e?o=l:a=l}r=o}else for(let o=s-1;o>=0;o--)if(e>this.newlines[o]){r=o;break}return r>=0&&(n=r+2,i=e-this.newlines[r]),{column:i,line:n,offset:e}}peek(){return this.buffer.charCodeAt(this.index+1)}stateText(e){e===60?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=5,this.sectionStart=this.index):!this.inVPre&&e===this.delimiterOpen[0]&&(this.state=2,this.delimiterIndex=0,this.stateInterpolationOpen(e))}stateInterpolationOpen(e){if(e===this.delimiterOpen[this.delimiterIndex])if(this.delimiterIndex===this.delimiterOpen.length-1){const n=this.index+1-this.delimiterOpen.length;n>this.sectionStart&&this.cbs.ontext(this.sectionStart,n),this.state=3,this.sectionStart=n}else this.delimiterIndex++;else this.inRCDATA?(this.state=32,this.stateInRCDATA(e)):(this.state=1,this.stateText(e))}stateInterpolation(e){e===this.delimiterClose[0]&&(this.state=4,this.delimiterIndex=0,this.stateInterpolationClose(e))}stateInterpolationClose(e){e===this.delimiterClose[this.delimiterIndex]?this.delimiterIndex===this.delimiterClose.length-1?(this.cbs.oninterpolation(this.sectionStart,this.index+1),this.inRCDATA?this.state=32:this.state=1,this.sectionStart=this.index+1):this.delimiterIndex++:(this.state=3,this.stateInterpolation(e))}stateSpecialStartSequence(e){const n=this.sequenceIndex===this.currentSequence.length;if(!(n?il(e):(e|32)===this.currentSequence[this.sequenceIndex]))this.inRCDATA=!1;else if(!n){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=6,this.stateInTagName(e)}stateInRCDATA(e){if(this.sequenceIndex===this.currentSequence.length){if(e===62||zs(e)){const n=this.index-this.currentSequence.length;if(this.sectionStart<n){const i=this.index;this.index=n,this.cbs.ontext(this.sectionStart,n),this.index=i}this.sectionStart=n+2,this.stateInClosingTagName(e),this.inRCDATA=!1;return}this.sequenceIndex=0}(e|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===Di.TitleEnd||this.currentSequence===Di.TextareaEnd&&!this.inSFCRoot?!this.inVPre&&e===this.delimiterOpen[0]&&(this.state=2,this.delimiterIndex=0,this.stateInterpolationOpen(e)):this.fastForwardTo(60)&&(this.sequenceIndex=1):this.sequenceIndex=+(e===60)}stateCDATASequence(e){e===Di.Cdata[this.sequenceIndex]?++this.sequenceIndex===Di.Cdata.length&&(this.state=28,this.currentSequence=Di.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=23,this.stateInDeclaration(e))}fastForwardTo(e){for(;++this.index<this.buffer.length;){const n=this.buffer.charCodeAt(this.index);if(n===10&&this.newlines.push(this.index),n===e)return!0}return this.index=this.buffer.length-1,!1}stateInCommentLike(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===Di.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index-2):this.cbs.oncomment(this.sectionStart,this.index-2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=1):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}startSpecial(e,n){this.enterRCDATA(e,n),this.state=31}enterRCDATA(e,n){this.inRCDATA=!0,this.currentSequence=e,this.sequenceIndex=n}stateBeforeTagName(e){e===33?(this.state=22,this.sectionStart=this.index+1):e===63?(this.state=24,this.sectionStart=this.index+1):z3(e)?(this.sectionStart=this.index,this.mode===0?this.state=6:this.inSFCRoot?this.state=34:this.inXML?this.state=6:e===116?this.state=30:this.state=e===115?29:6):e===47?this.state=8:(this.state=1,this.stateText(e))}stateInTagName(e){il(e)&&this.handleTagName(e)}stateInSFCRootTagName(e){if(il(e)){const n=this.buffer.slice(this.sectionStart,this.index);n!=="template"&&this.enterRCDATA(Dy("</"+n),0),this.handleTagName(e)}}handleTagName(e){this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=11,this.stateBeforeAttrName(e)}stateBeforeClosingTagName(e){zs(e)||(e===62?(this.state=1,this.sectionStart=this.index+1):(this.state=z3(e)?9:27,this.sectionStart=this.index))}stateInClosingTagName(e){(e===62||zs(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=10,this.stateAfterClosingTagName(e))}stateAfterClosingTagName(e){e===62&&(this.state=1,this.sectionStart=this.index+1)}stateBeforeAttrName(e){e===62?(this.cbs.onopentagend(this.index),this.inRCDATA?this.state=32:this.state=1,this.sectionStart=this.index+1):e===47?this.state=7:e===60&&this.peek()===47?(this.cbs.onopentagend(this.index),this.state=5,this.sectionStart=this.index):zs(e)||this.handleAttrStart(e)}handleAttrStart(e){e===118&&this.peek()===45?(this.state=13,this.sectionStart=this.index):e===46||e===58||e===64||e===35?(this.cbs.ondirname(this.index,this.index+1),this.state=14,this.sectionStart=this.index+1):(this.state=12,this.sectionStart=this.index)}stateInSelfClosingTag(e){e===62?(this.cbs.onselfclosingtag(this.index),this.state=1,this.sectionStart=this.index+1,this.inRCDATA=!1):zs(e)||(this.state=11,this.stateBeforeAttrName(e))}stateInAttrName(e){(e===61||il(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.handleAttrNameEnd(e))}stateInDirName(e){e===61||il(e)?(this.cbs.ondirname(this.sectionStart,this.index),this.handleAttrNameEnd(e)):e===58?(this.cbs.ondirname(this.sectionStart,this.index),this.state=14,this.sectionStart=this.index+1):e===46&&(this.cbs.ondirname(this.sectionStart,this.index),this.state=16,this.sectionStart=this.index+1)}stateInDirArg(e){e===61||il(e)?(this.cbs.ondirarg(this.sectionStart,this.index),this.handleAttrNameEnd(e)):e===91?this.state=15:e===46&&(this.cbs.ondirarg(this.sectionStart,this.index),this.state=16,this.sectionStart=this.index+1)}stateInDynamicDirArg(e){e===93?this.state=14:(e===61||il(e))&&(this.cbs.ondirarg(this.sectionStart,this.index+1),this.handleAttrNameEnd(e))}stateInDirModifier(e){e===61||il(e)?(this.cbs.ondirmodifier(this.sectionStart,this.index),this.handleAttrNameEnd(e)):e===46&&(this.cbs.ondirmodifier(this.sectionStart,this.index),this.sectionStart=this.index+1)}handleAttrNameEnd(e){this.sectionStart=this.index,this.state=17,this.cbs.onattribnameend(this.index),this.stateAfterAttrName(e)}stateAfterAttrName(e){e===61?this.state=18:e===47||e===62?(this.cbs.onattribend(0,this.sectionStart),this.sectionStart=-1,this.state=11,this.stateBeforeAttrName(e)):zs(e)||(this.cbs.onattribend(0,this.sectionStart),this.handleAttrStart(e))}stateBeforeAttrValue(e){e===34?(this.state=19,this.sectionStart=this.index+1):e===39?(this.state=20,this.sectionStart=this.index+1):zs(e)||(this.sectionStart=this.index,this.state=21,this.stateInAttrValueNoQuotes(e))}handleInAttrValue(e,n){(e===n||this.fastForwardTo(n))&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(n===34?3:2,this.index+1),this.state=11)}stateInAttrValueDoubleQuotes(e){this.handleInAttrValue(e,34)}stateInAttrValueSingleQuotes(e){this.handleInAttrValue(e,39)}stateInAttrValueNoQuotes(e){zs(e)||e===62?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(1,this.index),this.state=11,this.stateBeforeAttrName(e)):(e===39||e===60||e===61||e===96)&&this.cbs.onerr(18,this.index)}stateBeforeDeclaration(e){e===91?(this.state=26,this.sequenceIndex=0):this.state=e===45?25:23}stateInDeclaration(e){(e===62||this.fastForwardTo(62))&&(this.state=1,this.sectionStart=this.index+1)}stateInProcessingInstruction(e){(e===62||this.fastForwardTo(62))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=1,this.sectionStart=this.index+1)}stateBeforeComment(e){e===45?(this.state=28,this.currentSequence=Di.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=23}stateInSpecialComment(e){(e===62||this.fastForwardTo(62))&&(this.cbs.oncomment(this.sectionStart,this.index),this.state=1,this.sectionStart=this.index+1)}stateBeforeSpecialS(e){e===Di.ScriptEnd[3]?this.startSpecial(Di.ScriptEnd,4):e===Di.StyleEnd[3]?this.startSpecial(Di.StyleEnd,4):(this.state=6,this.stateInTagName(e))}stateBeforeSpecialT(e){e===Di.TitleEnd[3]?this.startSpecial(Di.TitleEnd,4):e===Di.TextareaEnd[3]?this.startSpecial(Di.TextareaEnd,4):(this.state=6,this.stateInTagName(e))}startEntity(){}stateInEntity(){}parse(e){for(this.buffer=e;this.index<this.buffer.length;){const n=this.buffer.charCodeAt(this.index);switch(n===10&&this.state!==33&&this.newlines.push(this.index),this.state){case 1:{this.stateText(n);break}case 2:{this.stateInterpolationOpen(n);break}case 3:{this.stateInterpolation(n);break}case 4:{this.stateInterpolationClose(n);break}case 31:{this.stateSpecialStartSequence(n);break}case 32:{this.stateInRCDATA(n);break}case 26:{this.stateCDATASequence(n);break}case 19:{this.stateInAttrValueDoubleQuotes(n);break}case 12:{this.stateInAttrName(n);break}case 13:{this.stateInDirName(n);break}case 14:{this.stateInDirArg(n);break}case 15:{this.stateInDynamicDirArg(n);break}case 16:{this.stateInDirModifier(n);break}case 28:{this.stateInCommentLike(n);break}case 27:{this.stateInSpecialComment(n);break}case 11:{this.stateBeforeAttrName(n);break}case 6:{this.stateInTagName(n);break}case 34:{this.stateInSFCRootTagName(n);break}case 9:{this.stateInClosingTagName(n);break}case 5:{this.stateBeforeTagName(n);break}case 17:{this.stateAfterAttrName(n);break}case 20:{this.stateInAttrValueSingleQuotes(n);break}case 18:{this.stateBeforeAttrValue(n);break}case 8:{this.stateBeforeClosingTagName(n);break}case 10:{this.stateAfterClosingTagName(n);break}case 29:{this.stateBeforeSpecialS(n);break}case 30:{this.stateBeforeSpecialT(n);break}case 21:{this.stateInAttrValueNoQuotes(n);break}case 7:{this.stateInSelfClosingTag(n);break}case 23:{this.stateInDeclaration(n);break}case 22:{this.stateBeforeDeclaration(n);break}case 25:{this.stateBeforeComment(n);break}case 24:{this.stateInProcessingInstruction(n);break}case 33:{this.stateInEntity();break}}this.index++}this.cleanup(),this.finish()}cleanup(){this.sectionStart!==this.index&&(this.state===1||this.state===32&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===19||this.state===20||this.state===21)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}finish(){this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const e=this.buffer.length;this.sectionStart>=e||(this.state===28?this.currentSequence===Di.CdataEnd?this.cbs.oncdata(this.sectionStart,e):this.cbs.oncomment(this.sectionStart,e):this.state===6||this.state===11||this.state===18||this.state===17||this.state===12||this.state===13||this.state===14||this.state===15||this.state===16||this.state===20||this.state===19||this.state===21||this.state===9||this.cbs.ontext(this.sectionStart,e))}emitCodePoint(e,n){}}function Z3(t,{compatConfig:e}){const n=e&&e[t];return t==="MODE"?n||3:n}function $c(t,e){const n=Z3("MODE",e),i=Z3(t,e);return n===3?i===!0:i!==!1}function Lf(t,e,n,...i){return $c(t,e)}function fC(t){throw t}function oD(t){}function bn(t,e,n,i){const s=`https://vuejs.org/error-reference/#compiler-${t}`,r=new SyntaxError(String(s));return r.code=t,r.loc=e,r}const Ss=t=>t.type===4&&t.isStatic;function aD(t){switch(t){case"Teleport":case"teleport":return af;case"Suspense":case"suspense":return YS;case"KeepAlive":case"keep-alive":return Py;case"BaseTransition":case"base-transition":return J$}}const fG=/^$|^\d|[^\$\w\xA0-\uFFFF]/,pC=t=>!fG.test(t),lD=/[A-Za-z_$\xA0-\uFFFF]/,pG=/[\.\?\w$\xA0-\uFFFF]/,mG=/\s+[.[]\s*|\s*[.[]\s+/g,cD=t=>t.type===4?t.content:t.loc.source,gG=t=>{const e=cD(t).trim().replace(mG,a=>a.trim());let n=0,i=[],s=0,r=0,o=null;for(let a=0;a<e.length;a++){const l=e.charAt(a);switch(n){case 0:if(l==="[")i.push(n),n=1,s++;else if(l==="(")i.push(n),n=2,r++;else if(!(a===0?lD:pG).test(l))return!1;break;case 1:l==="'"||l==='"'||l==="`"?(i.push(n),n=3,o=l):l==="["?s++:l==="]"&&(--s||(n=i.pop()));break;case 2:if(l==="'"||l==='"'||l==="`")i.push(n),n=3,o=l;else if(l==="(")r++;else if(l===")"){if(a===e.length-1)return!1;--r||(n=i.pop())}break;case 3:l===o&&(n=i.pop(),o=null);break}}return!s&&!r},uD=gG,yG=/^\s*(?:async\s*)?(?:\([^)]*?\)|[\w$_]+)\s*(?::[^=]+)?=>|^\s*(?:async\s+)?function(?:\s+[\w$]+)?\s*\(/,OG=t=>yG.test(cD(t)),bG=OG;function vr(t,e,n=!1){for(let i=0;i<t.props.length;i++){const s=t.props[i];if(s.type===7&&(n||s.exp)&&(mt(e)?s.name===e:e.test(s.name)))return s}}function v1(t,e,n=!1,i=!1){for(let s=0;s<t.props.length;s++){const r=t.props[s];if(r.type===6){if(n)continue;if(r.name===e&&(r.value||i))return r}else if(r.name==="bind"&&(r.exp||i)&&mc(r.arg,e))return r}}function mc(t,e){return!!(t&&Ss(t)&&t.content===e)}function vG(t){return t.props.some(e=>e.type===7&&e.name==="bind"&&(!e.arg||e.arg.type!==4||!e.arg.isStatic))}function Bb(t){return t.type===5||t.type===2}function q3(t){return t.type===7&&t.name==="pre"}function wG(t){return t.type===7&&t.name==="slot"}function My(t){return t.type===1&&t.tagType===3}function Iy(t){return t.type===1&&t.tagType===2}const SG=new Set([Qf,Ap]);function dD(t,e=[]){if(t&&!mt(t)&&t.type===14){const n=t.callee;if(!mt(n)&&SG.has(n))return dD(t.arguments[0],e.concat(t))}return[t,e]}function Ry(t,e,n){let i,s=t.type===13?t.props:t.arguments[2],r=[],o;if(s&&!mt(s)&&s.type===14){const a=dD(s);s=a[0],r=a[1],o=r[r.length-1]}if(s==null||mt(s))i=Cr([e]);else if(s.type===14){const a=s.arguments[0];!mt(a)&&a.type===15?X3(e,a)||a.properties.unshift(e):s.callee===cC?i=ni(n.helper(Ty),[Cr([e]),s]):s.arguments.unshift(Cr([e])),!i&&(i=s)}else s.type===15?(X3(e,s)||s.properties.unshift(e),i=s):(i=ni(n.helper(Ty),[Cr([e]),s]),o&&o.callee===Ap&&(o=r[r.length-2]));t.type===13?o?o.arguments[0]=i:t.props=i:o?o.arguments[0]=i:t.arguments[2]=i}function X3(t,e){let n=!1;if(t.key.type===4){const i=t.key.content;n=e.properties.some(s=>s.key.type===4&&s.key.content===i)}return n}function Ff(t,e){return`_${e}_${t.replace(/[^\w]/g,(n,i)=>n==="-"?"_":t.charCodeAt(i).toString())}`}function CG(t){return t.type===14&&t.callee===dC?t.arguments[1].returns:t}const AG=/([\s\S]*?)\s+(?:in|of)\s+(\S[\s\S]*)/;function hD(t){for(let e=0;e<t.length;e++)if(!zs(t.charCodeAt(e)))return!1;return!0}function mC(t){return t.type===2&&hD(t.content)||t.type===12&&mC(t.content)}function fD(t){return t.type===3||mC(t)}const pD={parseMode:"base",ns:0,delimiters:["{{","}}"],getNamespace:()=>0,isVoidTag:Iu,isPreTag:Iu,isIgnoreNewlineTag:Iu,isCustomElement:Iu,onError:fC,onWarn:oD,comments:!1,prefixIdentifiers:!1};let Ht=pD,Bf=null,ka="",Ri=null,_t=null,us="",ua=-1,lc=-1,gC=0,fl=!1,pv=null;const Sn=[],En=new hG(Sn,{onerr:aa,ontext(t,e){Jm(gi(t,e),t,e)},ontextentity(t,e,n){Jm(t,e,n)},oninterpolation(t,e){if(fl)return Jm(gi(t,e),t,e);let n=t+En.delimiterOpen.length,i=e-En.delimiterClose.length;for(;zs(ka.charCodeAt(n));)n++;for(;zs(ka.charCodeAt(i-1));)i--;let s=gi(n,i);s.includes("&")&&(s=Ht.decodeEntities(s,!1)),mv({type:5,content:Ng(s,!1,Fn(n,i)),loc:Fn(t,e)})},onopentagname(t,e){const n=gi(t,e);Ri={type:1,tag:n,ns:Ht.getNamespace(n,Sn[0],Ht.ns),tagType:0,props:[],children:[],loc:Fn(t-1,e),codegenNode:void 0}},onopentagend(t){G3(t)},onclosetag(t,e){const n=gi(t,e);if(!Ht.isVoidTag(n)){let i=!1;for(let s=0;s<Sn.length;s++)if(Sn[s].tag.toLowerCase()===n.toLowerCase()){i=!0,s>0&&aa(24,Sn[0].loc.start.offset);for(let o=0;o<=s;o++){const a=Sn.shift();Qg(a,e,o<s)}break}i||aa(23,mD(t,60))}},onselfclosingtag(t){const e=Ri.tag;Ri.isSelfClosing=!0,G3(t),Sn[0]&&Sn[0].tag===e&&Qg(Sn.shift(),t)},onattribname(t,e){_t={type:6,name:gi(t,e),nameLoc:Fn(t,e),value:void 0,loc:Fn(t)}},ondirname(t,e){const n=gi(t,e),i=n==="."||n===":"?"bind":n==="@"?"on":n==="#"?"slot":n.slice(2);if(!fl&&i===""&&aa(26,t),fl||i==="")_t={type:6,name:n,nameLoc:Fn(t,e),value:void 0,loc:Fn(t)};else if(_t={type:7,name:i,rawName:n,exp:void 0,arg:void 0,modifiers:n==="."?[Ot("prop")]:[],loc:Fn(t)},i==="pre"){fl=En.inVPre=!0,pv=Ri;const s=Ri.props;for(let r=0;r<s.length;r++)s[r].type===7&&(s[r]=_G(s[r]))}},ondirarg(t,e){if(t===e)return;const n=gi(t,e);if(fl&&!q3(_t))_t.name+=n,gc(_t.nameLoc,e);else{const i=n[0]!=="[";_t.arg=Ng(i?n:n.slice(1,-1),i,Fn(t,e),i?3:0)}},ondirmodifier(t,e){const n=gi(t,e);if(fl&&!q3(_t))_t.name+="."+n,gc(_t.nameLoc,e);else if(_t.name==="slot"){const i=_t.arg;i&&(i.content+="."+n,gc(i.loc,e))}else{const i=Ot(n,!0,Fn(t,e));_t.modifiers.push(i)}},onattribdata(t,e){us+=gi(t,e),ua<0&&(ua=t),lc=e},onattribentity(t,e,n){us+=t,ua<0&&(ua=e),lc=n},onattribnameend(t){const e=_t.loc.start.offset,n=gi(e,t);_t.type===7&&(_t.rawName=n),Ri.props.some(i=>(i.type===7?i.rawName:i.name)===n)&&aa(2,e)},onattribend(t,e){if(Ri&&_t){if(gc(_t.loc,e),t!==0)if(us.includes("&")&&(us=Ht.decodeEntities(us,!0)),_t.type===6)_t.name==="class"&&(us=yD(us).trim()),t===1&&!us&&aa(13,e),_t.value={type:2,content:us,loc:t===1?Fn(ua,lc):Fn(ua-1,lc+1)},En.inSFCRoot&&Ri.tag==="template"&&_t.name==="lang"&&us&&us!=="html"&&En.enterRCDATA(Dy("</template"),0);else{let n=0;_t.exp=Ng(us,!1,Fn(ua,lc),0,n),_t.name==="for"&&(_t.forParseResult=kG(_t.exp));let i=-1;_t.name==="bind"&&(i=_t.modifiers.findIndex(s=>s.content==="sync"))>-1&&Lf("COMPILER_V_BIND_SYNC",Ht,_t.loc,_t.arg.loc.source)&&(_t.name="model",_t.modifiers.splice(i,1))}(_t.type!==7||_t.name!=="pre")&&Ri.props.push(_t)}us="",ua=lc=-1},oncomment(t,e){Ht.comments&&mv({type:3,content:gi(t,e),loc:Fn(t-4,e+3)})},onend(){const t=ka.length;for(let e=0;e<Sn.length;e++)Qg(Sn[e],t-1),aa(24,Sn[e].loc.start.offset)},oncdata(t,e){Sn[0].ns!==0?Jm(gi(t,e),t,e):aa(1,t-9)},onprocessinginstruction(t){(Sn[0]?Sn[0].ns:Ht.ns)===0&&aa(21,t-1)}}),W3=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,xG=/^\(|\)$/g;function kG(t){const e=t.loc,n=t.content,i=n.match(AG);if(!i)return;const[,s,r]=i,o=(h,p,m=!1)=>{const y=e.start.offset+p,O=y+h.length;return Ng(h,!1,Fn(y,O),0,m?1:0)},a={source:o(r.trim(),n.indexOf(r,s.length)),value:void 0,key:void 0,index:void 0,finalized:!1};let l=s.trim().replace(xG,"").trim();const c=s.indexOf(l),u=l.match(W3);if(u){l=l.replace(W3,"").trim();const h=u[1].trim();let p;if(h&&(p=n.indexOf(h,c+l.length),a.key=o(h,p,!0)),u[2]){const m=u[2].trim();m&&(a.index=o(m,n.indexOf(m,a.key?p+h.length:c+l.length),!0))}}return l&&(a.value=o(l,c,!0)),a}function gi(t,e){return ka.slice(t,e)}function G3(t){En.inSFCRoot&&(Ri.innerLoc=Fn(t+1,t+1)),mv(Ri);const{tag:e,ns:n}=Ri;n===0&&Ht.isPreTag(e)&&gC++,Ht.isVoidTag(e)?Qg(Ri,t):(Sn.unshift(Ri),(n===1||n===2)&&(En.inXML=!0)),Ri=null}function Jm(t,e,n){{const r=Sn[0]&&Sn[0].tag;r!=="script"&&r!=="style"&&t.includes("&")&&(t=Ht.decodeEntities(t,!1))}const i=Sn[0]||Bf,s=i.children[i.children.length-1];s&&s.type===2?(s.content+=t,gc(s.loc,n)):i.children.push({type:2,content:t,loc:Fn(e,n)})}function Qg(t,e,n=!1){n?gc(t.loc,mD(e,60)):gc(t.loc,PG(e,62)+1),En.inSFCRoot&&(t.children.length?t.innerLoc.end=Tt({},t.children[t.children.length-1].loc.end):t.innerLoc.end=Tt({},t.innerLoc.start),t.innerLoc.source=gi(t.innerLoc.start.offset,t.innerLoc.end.offset));const{tag:i,ns:s,children:r}=t;if(fl||(i==="slot"?t.tagType=2:U3(t)?t.tagType=3:$G(t)&&(t.tagType=1)),En.inRCDATA||(t.children=gD(r)),s===0&&Ht.isIgnoreNewlineTag(i)){const o=r[0];o&&o.type===2&&(o.content=o.content.replace(/^\r?\n/,""))}s===0&&Ht.isPreTag(i)&&gC--,pv===t&&(fl=En.inVPre=!1,pv=null),En.inXML&&(Sn[0]?Sn[0].ns:Ht.ns)===0&&(En.inXML=!1);{const o=t.props;if(!En.inSFCRoot&&$c("COMPILER_NATIVE_TEMPLATE",Ht)&&t.tag==="template"&&!U3(t)){const l=Sn[0]||Bf,c=l.children.indexOf(t);l.children.splice(c,1,...t.children)}const a=o.find(l=>l.type===6&&l.name==="inline-template");a&&Lf("COMPILER_INLINE_TEMPLATE",Ht,a.loc)&&t.children.length&&(a.value={type:2,content:gi(t.children[0].loc.start.offset,t.children[t.children.length-1].loc.end.offset),loc:a.loc})}}function PG(t,e){let n=t;for(;ka.charCodeAt(n)!==e&&n<ka.length-1;)n++;return n}function mD(t,e){let n=t;for(;ka.charCodeAt(n)!==e&&n>=0;)n--;return n}const TG=new Set(["if","else","else-if","for","slot"]);function U3({tag:t,props:e}){if(t==="template"){for(let n=0;n<e.length;n++)if(e[n].type===7&&TG.has(e[n].name))return!0}return!1}function $G({tag:t,props:e}){if(Ht.isCustomElement(t))return!1;if(t==="component"||DG(t.charCodeAt(0))||aD(t)||Ht.isBuiltInComponent&&Ht.isBuiltInComponent(t)||Ht.isNativeTag&&!Ht.isNativeTag(t))return!0;for(let n=0;n<e.length;n++){const i=e[n];if(i.type===6){if(i.name==="is"&&i.value){if(i.value.content.startsWith("vue:"))return!0;if(Lf("COMPILER_IS_ON_ELEMENT",Ht,i.loc))return!0}}else if(i.name==="bind"&&mc(i.arg,"is")&&Lf("COMPILER_IS_ON_ELEMENT",Ht,i.loc))return!0}return!1}function DG(t){return t>64&&t<91}const MG=/\r\n/g;function gD(t){const e=Ht.whitespace!=="preserve";let n=!1;for(let i=0;i<t.length;i++){const s=t[i];if(s.type===2)if(gC)s.content=s.content.replace(MG,`
`);else if(hD(s.content)){const r=t[i-1]&&t[i-1].type,o=t[i+1]&&t[i+1].type;!r||!o||e&&(r===3&&(o===3||o===1)||r===1&&(o===3||o===1&&IG(s.content)))?(n=!0,t[i]=null):s.content=" "}else e&&(s.content=yD(s.content))}return n?t.filter(Boolean):t}function IG(t){for(let e=0;e<t.length;e++){const n=t.charCodeAt(e);if(n===10||n===13)return!0}return!1}function yD(t){let e="",n=!1;for(let i=0;i<t.length;i++)zs(t.charCodeAt(i))?n||(e+=" ",n=!0):(e+=t[i],n=!1);return e}function mv(t){(Sn[0]||Bf).children.push(t)}function Fn(t,e){return{start:En.getPos(t),end:e==null?e:En.getPos(e),source:e==null?e:gi(t,e)}}function RG(t){return Fn(t.start.offset,t.end.offset)}function gc(t,e){t.end=En.getPos(e),t.source=gi(t.start.offset,e)}function _G(t){const e={type:6,name:t.rawName,nameLoc:Fn(t.loc.start.offset,t.loc.start.offset+t.rawName.length),value:void 0,loc:t.loc};if(t.exp){const n=t.exp.loc;n.end.offset<t.loc.end.offset&&(n.start.offset--,n.start.column--,n.end.offset++,n.end.column++),e.value={type:2,content:t.exp.content,loc:n}}return e}function Ng(t,e=!1,n,i=0,s=0){return Ot(t,e,n,i)}function aa(t,e,n){Ht.onError(bn(t,Fn(e,e)))}function EG(){En.reset(),Ri=null,_t=null,us="",ua=-1,lc=-1,Sn.length=0}function QG(t,e){if(EG(),ka=t,Ht=Tt({},pD),e){let s;for(s in e)e[s]!=null&&(Ht[s]=e[s])}En.mode=Ht.parseMode==="html"?1:Ht.parseMode==="sfc"?2:0,En.inXML=Ht.ns===1||Ht.ns===2;const n=e&&e.delimiters;n&&(En.delimiterOpen=Dy(n[0]),En.delimiterClose=Dy(n[1]));const i=Bf=cG([],t);return En.parse(ka),i.loc=Fn(0,t.length),i.children=gD(i.children),Bf=null,i}function NG(t,e){Lg(t,void 0,e,!!OD(t))}function OD(t){const e=t.children.filter(n=>n.type!==3);return e.length===1&&e[0].type===1&&!Iy(e[0])?e[0]:null}function Lg(t,e,n,i=!1,s=!1){const{children:r}=t,o=[];for(let u=0;u<r.length;u++){const h=r[u];if(h.type===1&&h.tagType===0){const p=i?0:Gs(h,n);if(p>0){if(p>=2){h.codegenNode.patchFlag=-1,o.push(h);continue}}else{const m=h.codegenNode;if(m.type===13){const y=m.patchFlag;if((y===void 0||y===512||y===1)&&vD(h,n)>=2){const O=wD(h);O&&(m.props=n.hoist(O))}m.dynamicProps&&(m.dynamicProps=n.hoist(m.dynamicProps))}}}else if(h.type===12&&(i?0:Gs(h,n))>=2){h.codegenNode.type===14&&h.codegenNode.arguments.length>0&&h.codegenNode.arguments.push("-1"),o.push(h);continue}if(h.type===1){const p=h.tagType===1;p&&n.scopes.vSlot++,Lg(h,t,n,!1,s),p&&n.scopes.vSlot--}else if(h.type===11)Lg(h,t,n,h.children.length===1,!0);else if(h.type===9)for(let p=0;p<h.branches.length;p++)Lg(h.branches[p],t,n,h.branches[p].children.length===1,s)}let a=!1;if(o.length===r.length&&t.type===1){if(t.tagType===0&&t.codegenNode&&t.codegenNode.type===13&&Be(t.codegenNode.children))t.codegenNode.children=l(Tc(t.codegenNode.children)),a=!0;else if(t.tagType===1&&t.codegenNode&&t.codegenNode.type===13&&t.codegenNode.children&&!Be(t.codegenNode.children)&&t.codegenNode.children.type===15){const u=c(t.codegenNode,"default");u&&(u.returns=l(Tc(u.returns)),a=!0)}else if(t.tagType===3&&e&&e.type===1&&e.tagType===1&&e.codegenNode&&e.codegenNode.type===13&&e.codegenNode.children&&!Be(e.codegenNode.children)&&e.codegenNode.children.type===15){const u=vr(t,"slot",!0),h=u&&u.arg&&c(e.codegenNode,u.arg);h&&(h.returns=l(Tc(h.returns)),a=!0)}}if(!a)for(const u of o)u.codegenNode=n.cache(u.codegenNode);function l(u){const h=n.cache(u);return h.needArraySpread=!0,h}function c(u,h){if(u.children&&!Be(u.children)&&u.children.type===15){const p=u.children.properties.find(m=>m.key===h||m.key.content===h);return p&&p.value}}o.length&&n.transformHoist&&n.transformHoist(r,n,t)}function Gs(t,e){const{constantCache:n}=e;switch(t.type){case 1:if(t.tagType!==0)return 0;const i=n.get(t);if(i!==void 0)return i;const s=t.codegenNode;if(s.type!==13||s.isBlock&&t.tag!=="svg"&&t.tag!=="foreignObject"&&t.tag!=="math")return 0;if(s.patchFlag===void 0){let o=3;const a=vD(t,e);if(a===0)return n.set(t,0),0;a<o&&(o=a);for(let l=0;l<t.children.length;l++){const c=Gs(t.children[l],e);if(c===0)return n.set(t,0),0;c<o&&(o=c)}if(o>1)for(let l=0;l<t.props.length;l++){const c=t.props[l];if(c.type===7&&c.name==="bind"&&c.exp){const u=Gs(c.exp,e);if(u===0)return n.set(t,0),0;u<o&&(o=u)}}if(s.isBlock){for(let l=0;l<t.props.length;l++)if(t.props[l].type===7)return n.set(t,0),0;e.removeHelper(Nc),e.removeHelper(Cd(e.inSSR,s.isComponent)),s.isBlock=!1,e.helper(Sd(e.inSSR,s.isComponent))}return n.set(t,o),o}else return n.set(t,0),0;case 2:case 3:return 3;case 9:case 11:case 10:return 0;case 5:case 12:return Gs(t.content,e);case 4:return t.constType;case 8:let r=3;for(let o=0;o<t.children.length;o++){const a=t.children[o];if(mt(a)||Ds(a))continue;const l=Gs(a,e);if(l===0)return 0;l<r&&(r=l)}return r;case 20:return 2;default:return 0}}const LG=new Set([aC,lC,Qf,Ap]);function bD(t,e){if(t.type===14&&!mt(t.callee)&&LG.has(t.callee)){const n=t.arguments[0];if(n.type===4)return Gs(n,e);if(n.type===14)return bD(n,e)}return 0}function vD(t,e){let n=3;const i=wD(t);if(i&&i.type===15){const{properties:s}=i;for(let r=0;r<s.length;r++){const{key:o,value:a}=s[r],l=Gs(o,e);if(l===0)return l;l<n&&(n=l);let c;if(a.type===4?c=Gs(a,e):a.type===14?c=bD(a,e):c=0,c===0)return c;c<n&&(n=c)}}return n}function wD(t){const e=t.codegenNode;if(e.type===13)return e.props}function FG(t,{filename:e="",prefixIdentifiers:n=!1,hoistStatic:i=!1,hmr:s=!1,cacheHandlers:r=!1,nodeTransforms:o=[],directiveTransforms:a={},transformHoist:l=null,isBuiltInComponent:c=Si,isCustomElement:u=Si,expressionPlugins:h=[],scopeId:p=null,slotted:m=!0,ssr:y=!1,inSSR:O=!1,ssrCssVars:S="",bindingMetadata:x=Et,inline:T=!1,isTS:k=!1,onError:D=fC,onWarn:M=oD,compatConfig:L}){const j=e.replace(/\?.*$/,"").match(/([^/\\]+)\.\w+$/),G={filename:e,selfName:j&&Uc(vn(j[1])),prefixIdentifiers:n,hoistStatic:i,hmr:s,cacheHandlers:r,nodeTransforms:o,directiveTransforms:a,transformHoist:l,isBuiltInComponent:c,isCustomElement:u,expressionPlugins:h,scopeId:p,slotted:m,ssr:y,inSSR:O,ssrCssVars:S,bindingMetadata:x,inline:T,isTS:k,onError:D,onWarn:M,compatConfig:L,root:t,helpers:new Map,components:new Set,directives:new Set,hoists:[],imports:[],cached:[],constantCache:new WeakMap,temps:0,identifiers:Object.create(null),scopes:{vFor:0,vSlot:0,vPre:0,vOnce:0},parent:null,grandParent:null,currentNode:t,childIndex:0,inVOnce:!1,helper(Z){const K=G.helpers.get(Z)||0;return G.helpers.set(Z,K+1),Z},removeHelper(Z){const K=G.helpers.get(Z);if(K){const te=K-1;te?G.helpers.set(Z,te):G.helpers.delete(Z)}},helperString(Z){return`_${vd[G.helper(Z)]}`},replaceNode(Z){G.parent.children[G.childIndex]=G.currentNode=Z},removeNode(Z){const K=G.parent.children,te=Z?K.indexOf(Z):G.currentNode?G.childIndex:-1;!Z||Z===G.currentNode?(G.currentNode=null,G.onNodeRemoved()):G.childIndex>te&&(G.childIndex--,G.onNodeRemoved()),G.parent.children.splice(te,1)},onNodeRemoved:Si,addIdentifiers(Z){},removeIdentifiers(Z){},hoist(Z){mt(Z)&&(Z=Ot(Z)),G.hoists.push(Z);const K=Ot(`_hoisted_${G.hoists.length}`,!1,Z.loc,2);return K.hoisted=Z,K},cache(Z,K=!1,te=!1){const W=uG(G.cached.length,Z,K,te);return G.cached.push(W),W}};return G.filters=new Set,G}function BG(t,e){const n=FG(t,e);w1(t,n),e.hoistStatic&&NG(t,n),e.ssr||VG(t,n),t.helpers=new Set([...n.helpers.keys()]),t.components=[...n.components],t.directives=[...n.directives],t.imports=n.imports,t.hoists=n.hoists,t.temps=n.temps,t.cached=n.cached,t.transformed=!0,t.filters=[...n.filters]}function VG(t,e){const{helper:n}=e,{children:i}=t;if(i.length===1){const s=OD(t);if(s&&s.codegenNode){const r=s.codegenNode;r.type===13&&hC(r,e),t.codegenNode=r}else t.codegenNode=i[0]}else if(i.length>1){let s=64;t.codegenNode=Nf(e,n(Ef),void 0,t.children,s,void 0,void 0,!0,void 0,!1)}}function jG(t,e){let n=0;const i=()=>{n--};for(;n<t.children.length;n++){const s=t.children[n];mt(s)||(e.grandParent=e.parent,e.parent=t,e.childIndex=n,e.onNodeRemoved=i,w1(s,e))}}function w1(t,e){e.currentNode=t;const{nodeTransforms:n}=e,i=[];for(let r=0;r<n.length;r++){const o=n[r](t,e);if(o&&(Be(o)?i.push(...o):i.push(o)),e.currentNode)t=e.currentNode;else return}switch(t.type){case 3:e.ssr||e.helper(Cp);break;case 5:e.ssr||e.helper(b1);break;case 9:for(let r=0;r<t.branches.length;r++)w1(t.branches[r],e);break;case 10:case 11:case 1:case 0:jG(t,e);break}e.currentNode=t;let s=i.length;for(;s--;)i[s]()}function SD(t,e){const n=mt(t)?i=>i===t:i=>t.test(i);return(i,s)=>{if(i.type===1){const{props:r}=i;if(i.tagType===3&&r.some(wG))return;const o=[];for(let a=0;a<r.length;a++){const l=r[a];if(l.type===7&&n(l.name)){r.splice(a,1),a--;const c=e(i,l,s);c&&o.push(c)}}return o}}}const S1="/*@__PURE__*/",CD=t=>`${vd[t]}: _${vd[t]}`;function zG(t,{mode:e="function",prefixIdentifiers:n=e==="module",sourceMap:i=!1,filename:s="template.vue.html",scopeId:r=null,optimizeImports:o=!1,runtimeGlobalName:a="Vue",runtimeModuleName:l="vue",ssrRuntimeModuleName:c="vue/server-renderer",ssr:u=!1,isTS:h=!1,inSSR:p=!1}){const m={mode:e,prefixIdentifiers:n,sourceMap:i,filename:s,scopeId:r,optimizeImports:o,runtimeGlobalName:a,runtimeModuleName:l,ssrRuntimeModuleName:c,ssr:u,isTS:h,inSSR:p,source:t.source,code:"",column:1,line:1,offset:0,indentLevel:0,pure:!1,map:void 0,helper(O){return`_${vd[O]}`},push(O,S=-2,x){m.code+=O},indent(){y(++m.indentLevel)},deindent(O=!1){O?--m.indentLevel:y(--m.indentLevel)},newline(){y(m.indentLevel)}};function y(O){m.push(`
`+"  ".repeat(O),0)}return m}function ZG(t,e={}){const n=zG(t,e);e.onContextCreated&&e.onContextCreated(n);const{mode:i,push:s,prefixIdentifiers:r,indent:o,deindent:a,newline:l,scopeId:c,ssr:u}=n,h=Array.from(t.helpers),p=h.length>0,m=!r&&i!=="module";qG(t,n);const O=u?"ssrRender":"render",x=(u?["_ctx","_push","_parent","_attrs"]:["_ctx","_cache"]).join(", ");if(s(`function ${O}(${x}) {`),o(),m&&(s("with (_ctx) {"),o(),p&&(s(`const { ${h.map(CD).join(", ")} } = _Vue
`,-1),l())),t.components.length&&(Vb(t.components,"component",n),(t.directives.length||t.temps>0)&&l()),t.directives.length&&(Vb(t.directives,"directive",n),t.temps>0&&l()),t.filters&&t.filters.length&&(l(),Vb(t.filters,"filter",n),l()),t.temps>0){s("let ");for(let T=0;T<t.temps;T++)s(`${T>0?", ":""}_temp${T}`)}return(t.components.length||t.directives.length||t.temps)&&(s(`
`,0),l()),u||s("return "),t.codegenNode?Li(t.codegenNode,n):s("null"),m&&(a(),s("}")),a(),s("}"),{ast:t,code:n.code,preamble:"",map:n.map?n.map.toJSON():void 0}}function qG(t,e){const{ssr:n,prefixIdentifiers:i,push:s,newline:r,runtimeModuleName:o,runtimeGlobalName:a,ssrRuntimeModuleName:l}=e,c=a,u=Array.from(t.helpers);if(u.length>0&&(s(`const _Vue = ${c}
`,-1),t.hoists.length)){const h=[KS,JS,Cp,eC,nD].filter(p=>u.includes(p)).map(CD).join(", ");s(`const { ${h} } = _Vue
`,-1)}XG(t.hoists,e),r(),s("return ")}function Vb(t,e,{helper:n,push:i,newline:s,isTS:r}){const o=n(e==="filter"?sC:e==="component"?tC:iC);for(let a=0;a<t.length;a++){let l=t[a];const c=l.endsWith("__self");c&&(l=l.slice(0,-6)),i(`const ${Ff(l,e)} = ${o}(${JSON.stringify(l)}${c?", true":""})${r?"!":""}`),a<t.length-1&&s()}}function XG(t,e){if(!t.length)return;e.pure=!0;const{push:n,newline:i}=e;i();for(let s=0;s<t.length;s++){const r=t[s];r&&(n(`const _hoisted_${s+1} = `),Li(r,e),i())}e.pure=!1}function yC(t,e){const n=t.length>3||!1;e.push("["),n&&e.indent(),xp(t,e,n),n&&e.deindent(),e.push("]")}function xp(t,e,n=!1,i=!0){const{push:s,newline:r}=e;for(let o=0;o<t.length;o++){const a=t[o];mt(a)?s(a,-3):Be(a)?yC(a,e):Li(a,e),o<t.length-1&&(n?(i&&s(","),r()):i&&s(", "))}}function Li(t,e){if(mt(t)){e.push(t,-3);return}if(Ds(t)){e.push(e.helper(t));return}switch(t.type){case 1:case 9:case 11:Li(t.codegenNode,e);break;case 2:WG(t,e);break;case 4:AD(t,e);break;case 5:GG(t,e);break;case 12:Li(t.codegenNode,e);break;case 8:xD(t,e);break;case 3:HG(t,e);break;case 13:YG(t,e);break;case 14:JG(t,e);break;case 15:eU(t,e);break;case 17:tU(t,e);break;case 18:nU(t,e);break;case 19:iU(t,e);break;case 20:sU(t,e);break;case 21:xp(t.body,e,!0,!1);break}}function WG(t,e){e.push(JSON.stringify(t.content),-3,t)}function AD(t,e){const{content:n,isStatic:i}=t;e.push(i?JSON.stringify(n):n,-3,t)}function GG(t,e){const{push:n,helper:i,pure:s}=e;s&&n(S1),n(`${i(b1)}(`),Li(t.content,e),n(")")}function xD(t,e){for(let n=0;n<t.children.length;n++){const i=t.children[n];mt(i)?e.push(i,-3):Li(i,e)}}function UG(t,e){const{push:n}=e;if(t.type===8)n("["),xD(t,e),n("]");else if(t.isStatic){const i=pC(t.content)?t.content:JSON.stringify(t.content);n(i,-2,t)}else n(`[${t.content}]`,-3,t)}function HG(t,e){const{push:n,helper:i,pure:s}=e;s&&n(S1),n(`${i(Cp)}(${JSON.stringify(t.content)})`,-3,t)}function YG(t,e){const{push:n,helper:i,pure:s}=e,{tag:r,props:o,children:a,patchFlag:l,dynamicProps:c,directives:u,isBlock:h,disableTracking:p,isComponent:m}=t;let y;l&&(y=String(l)),u&&n(i(rC)+"("),h&&n(`(${i(Nc)}(${p?"true":""}), `),s&&n(S1);const O=h?Cd(e.inSSR,m):Sd(e.inSSR,m);n(i(O)+"(",-2,t),xp(KG([r,o,a,y,c]),e),n(")"),h&&n(")"),u&&(n(", "),Li(u,e),n(")"))}function KG(t){let e=t.length;for(;e--&&t[e]==null;);return t.slice(0,e+1).map(n=>n||"null")}function JG(t,e){const{push:n,helper:i,pure:s}=e,r=mt(t.callee)?t.callee:i(t.callee);s&&n(S1),n(r+"(",-2,t),xp(t.arguments,e),n(")")}function eU(t,e){const{push:n,indent:i,deindent:s,newline:r}=e,{properties:o}=t;if(!o.length){n("{}",-2,t);return}const a=o.length>1||!1;n(a?"{":"{ "),a&&i();for(let l=0;l<o.length;l++){const{key:c,value:u}=o[l];UG(c,e),n(": "),Li(u,e),l<o.length-1&&(n(","),r())}a&&s(),n(a?"}":" }")}function tU(t,e){yC(t.elements,e)}function nU(t,e){const{push:n,indent:i,deindent:s}=e,{params:r,returns:o,body:a,newline:l,isSlot:c}=t;c&&n(`_${vd[uC]}(`),n("(",-2,t),Be(r)?xp(r,e):r&&Li(r,e),n(") => "),(l||a)&&(n("{"),i()),o?(l&&n("return "),Be(o)?yC(o,e):Li(o,e)):a&&Li(a,e),(l||a)&&(s(),n("}")),c&&(t.isNonScopedSlot&&n(", undefined, true"),n(")"))}function iU(t,e){const{test:n,consequent:i,alternate:s,newline:r}=t,{push:o,indent:a,deindent:l,newline:c}=e;if(n.type===4){const h=!pC(n.content);h&&o("("),AD(n,e),h&&o(")")}else o("("),Li(n,e),o(")");r&&a(),e.indentLevel++,r||o(" "),o("? "),Li(i,e),e.indentLevel--,r&&c(),r||o(" "),o(": ");const u=s.type===19;u||e.indentLevel++,Li(s,e),u||e.indentLevel--,r&&l(!0)}function sU(t,e){const{push:n,helper:i,indent:s,deindent:r,newline:o}=e,{needPauseTracking:a,needArraySpread:l}=t;l&&n("[...("),n(`_cache[${t.index}] || (`),a&&(s(),n(`${i($y)}(-1`),t.inVOnce&&n(", true"),n("),"),o(),n("(")),n(`_cache[${t.index}] = `),Li(t.value,e),a&&(n(`).cacheIndex = ${t.index},`),o(),n(`${i($y)}(1),`),o(),n(`_cache[${t.index}]`),r()),n(")"),l&&n(")]")}new RegExp("\\b"+"arguments,await,break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,let,new,return,super,switch,throw,try,var,void,while,with,yield".split(",").join("\\b|\\b")+"\\b");const rU=SD(/^(?:if|else|else-if)$/,(t,e,n)=>oU(t,e,n,(i,s,r)=>{const o=n.parent.children;let a=o.indexOf(i),l=0;for(;a-->=0;){const c=o[a];c&&c.type===9&&(l+=c.branches.length)}return()=>{if(r)i.codegenNode=Y3(s,l,n);else{const c=aU(i.codegenNode);c.alternate=Y3(s,l+i.branches.length-1,n)}}}));function oU(t,e,n,i){if(e.name!=="else"&&(!e.exp||!e.exp.content.trim())){const s=e.exp?e.exp.loc:t.loc;n.onError(bn(28,e.loc)),e.exp=Ot("true",!1,s)}if(e.name==="if"){const s=H3(t,e),r={type:9,loc:RG(t.loc),branches:[s]};if(n.replaceNode(r),i)return i(r,s,!0)}else{const s=n.parent.children;let r=s.indexOf(t);for(;r-->=-1;){const o=s[r];if(o&&fD(o)){n.removeNode(o);continue}if(o&&o.type===9){(e.name==="else-if"||e.name==="else")&&o.branches[o.branches.length-1].condition===void 0&&n.onError(bn(30,t.loc)),n.removeNode();const a=H3(t,e);o.branches.push(a);const l=i&&i(o,a,!1);w1(a,n),l&&l(),n.currentNode=null}else n.onError(bn(30,t.loc));break}}}function H3(t,e){const n=t.tagType===3;return{type:10,loc:t.loc,condition:e.name==="else"?void 0:e.exp,children:n&&!vr(t,"for")?t.children:[t],userKey:v1(t,"key"),isTemplateIf:n}}function Y3(t,e,n){return t.condition?fv(t.condition,K3(t,e,n),ni(n.helper(Cp),['""',"true"])):K3(t,e,n)}function K3(t,e,n){const{helper:i}=n,s=Xn("key",Ot(`${e}`,!1,ir,2)),{children:r}=t,o=r[0];if(r.length!==1||o.type!==1)if(r.length===1&&o.type===11){const l=o.codegenNode;return Ry(l,s,n),l}else return Nf(n,i(Ef),Cr([s]),r,64,void 0,void 0,!0,!1,!1,t.loc);else{const l=o.codegenNode,c=CG(l);return c.type===13&&hC(c,n),Ry(c,s,n),l}}function aU(t){for(;;)if(t.type===19)if(t.alternate.type===19)t=t.alternate;else return t;else t.type===20&&(t=t.value)}const lU=SD("for",(t,e,n)=>{const{helper:i,removeHelper:s}=n;return cU(t,e,n,r=>{const o=ni(i(oC),[r.source]),a=My(t),l=vr(t,"memo"),c=v1(t,"key",!1,!0);c&&c.type;let u=c&&(c.type===6?c.value?Ot(c.value.content,!0):void 0:c.exp);const h=c&&u?Xn("key",u):null,p=r.source.type===4&&r.source.constType>0,m=p?64:c?128:256;return r.codegenNode=Nf(n,i(Ef),void 0,o,m,void 0,void 0,!0,!p,!1,t.loc),()=>{let y;const{children:O}=r,S=O.length!==1||O[0].type!==1,x=Iy(t)?t:a&&t.children.length===1&&Iy(t.children[0])?t.children[0]:null;if(x?(y=x.codegenNode,a&&h&&Ry(y,h,n)):S?y=Nf(n,i(Ef),h?Cr([h]):void 0,t.children,64,void 0,void 0,!0,void 0,!1):(y=O[0].codegenNode,a&&h&&Ry(y,h,n),y.isBlock!==!p&&(y.isBlock?(s(Nc),s(Cd(n.inSSR,y.isComponent))):s(Sd(n.inSSR,y.isComponent))),y.isBlock=!p,y.isBlock?(i(Nc),i(Cd(n.inSSR,y.isComponent))):i(Sd(n.inSSR,y.isComponent))),l){const T=wd(gv(r.parseResult,[Ot("_cached")]));T.body=dG([to(["const _memo = (",l.exp,")"]),to(["if (_cached",...u?[" && _cached.key === ",u]:[],` && ${n.helperString(rD)}(_cached, _memo)) return _cached`]),to(["const _item = ",y]),Ot("_item.memo = _memo"),Ot("return _item")]),o.arguments.push(T,Ot("_cache"),Ot(String(n.cached.length))),n.cached.push(null)}else o.arguments.push(wd(gv(r.parseResult),y,!0))}})});function cU(t,e,n,i){if(!e.exp){n.onError(bn(31,e.loc));return}const s=e.forParseResult;if(!s){n.onError(bn(32,e.loc));return}kD(s);const{addIdentifiers:r,removeIdentifiers:o,scopes:a}=n,{source:l,value:c,key:u,index:h}=s,p={type:11,loc:e.loc,source:l,valueAlias:c,keyAlias:u,objectIndexAlias:h,parseResult:s,children:My(t)?t.children:[t]};n.replaceNode(p),a.vFor++;const m=i&&i(p);return()=>{a.vFor--,m&&m()}}function kD(t,e){t.finalized||(t.finalized=!0)}function gv({value:t,key:e,index:n},i=[]){return uU([t,e,n,...i])}function uU(t){let e=t.length;for(;e--&&!t[e];);return t.slice(0,e+1).map((n,i)=>n||Ot("_".repeat(i+1),!1))}const J3=Ot("undefined",!1),dU=(t,e)=>{if(t.type===1&&(t.tagType===1||t.tagType===3)){const n=vr(t,"slot");if(n)return n.exp,e.scopes.vSlot++,()=>{e.scopes.vSlot--}}},hU=(t,e,n,i)=>wd(t,n,!1,!0,n.length?n[0].loc:i);function fU(t,e,n=hU){e.helper(uC);const{children:i,loc:s}=t,r=[],o=[];let a=e.scopes.vSlot>0||e.scopes.vFor>0;const l=vr(t,"slot",!0);if(l){const{arg:S,exp:x}=l;S&&!Ss(S)&&(a=!0),r.push(Xn(S||Ot("default",!0),n(x,void 0,i,s)))}let c=!1,u=!1;const h=[],p=new Set;let m=0;for(let S=0;S<i.length;S++){const x=i[S];let T;if(!My(x)||!(T=vr(x,"slot",!0))){x.type!==3&&h.push(x);continue}if(l){e.onError(bn(37,T.loc));break}c=!0;const{children:k,loc:D}=x,{arg:M=Ot("default",!0),exp:L,loc:j}=T;let G;Ss(M)?G=M?M.content:"default":a=!0;const Z=vr(x,"for"),K=n(L,Z,k,D);let te,W;if(te=vr(x,"if"))a=!0,o.push(fv(te.exp,eg(M,K,m++),J3));else if(W=vr(x,/^else(?:-if)?$/,!0)){let oe=S,ye;for(;oe--&&(ye=i[oe],!!fD(ye)););if(ye&&My(ye)&&vr(ye,/^(?:else-)?if$/)){let ke=o[o.length-1];for(;ke.alternate.type===19;)ke=ke.alternate;ke.alternate=W.exp?fv(W.exp,eg(M,K,m++),J3):eg(M,K,m++)}else e.onError(bn(30,W.loc))}else if(Z){a=!0;const oe=Z.forParseResult;oe?(kD(oe),o.push(ni(e.helper(oC),[oe.source,wd(gv(oe),eg(M,K),!0)]))):e.onError(bn(32,Z.loc))}else{if(G){if(p.has(G)){e.onError(bn(38,j));continue}p.add(G),G==="default"&&(u=!0)}r.push(Xn(M,K))}}if(!l){const S=(x,T)=>{const k=n(x,void 0,T,s);return e.compatConfig&&(k.isNonScopedSlot=!0),Xn("default",k)};c?h.length&&!h.every(mC)&&(u?e.onError(bn(39,h[0].loc)):r.push(S(void 0,h))):r.push(S(void 0,i))}const y=a?2:Fg(t.children)?3:1;let O=Cr(r.concat(Xn("_",Ot(y+"",!1))),s);return o.length&&(O=ni(e.helper(sD),[O,Tc(o)])),{slots:O,hasDynamicSlots:a}}function eg(t,e,n){const i=[Xn("name",t),Xn("fn",e)];return n!=null&&i.push(Xn("key",Ot(String(n),!0))),Cr(i)}function Fg(t){for(let e=0;e<t.length;e++){const n=t[e];switch(n.type){case 1:if(n.tagType===2||Fg(n.children))return!0;break;case 9:if(Fg(n.branches))return!0;break;case 10:case 11:if(Fg(n.children))return!0;break}}return!1}const PD=new WeakMap,pU=(t,e)=>function(){if(t=e.currentNode,!(t.type===1&&(t.tagType===0||t.tagType===1)))return;const{tag:i,props:s}=t,r=t.tagType===1;let o=r?mU(t,e):`"${i}"`;const a=qt(o)&&o.callee===nC;let l,c,u=0,h,p,m,y=a||o===af||o===YS||!r&&(i==="svg"||i==="foreignObject"||i==="math");if(s.length>0){const O=TD(t,e,void 0,r,a);l=O.props,u=O.patchFlag,p=O.dynamicPropNames;const S=O.directives;m=S&&S.length?Tc(S.map(x=>yU(x,e))):void 0,O.shouldUseBlock&&(y=!0)}if(t.children.length>0)if(o===Py&&(y=!0,u|=1024),r&&o!==af&&o!==Py){const{slots:S,hasDynamicSlots:x}=fU(t,e);c=S,x&&(u|=1024)}else if(t.children.length===1&&o!==af){const S=t.children[0],x=S.type,T=x===5||x===8;T&&Gs(S,e)===0&&(u|=1),T||x===2?c=S:c=t.children}else c=t.children;p&&p.length&&(h=OU(p)),t.codegenNode=Nf(e,o,l,c,u===0?void 0:u,h,m,!!y,!1,r,t.loc)};function mU(t,e,n=!1){let{tag:i}=t;const s=yv(i),r=v1(t,"is",!1,!0);if(r)if(s||$c("COMPILER_IS_ON_ELEMENT",e)){let a;if(r.type===6?a=r.value&&Ot(r.value.content,!0):(a=r.exp,a||(a=Ot("is",!1,r.arg.loc))),a)return ni(e.helper(nC),[a])}else r.type===6&&r.value.content.startsWith("vue:")&&(i=r.value.content.slice(4));const o=aD(i)||e.isBuiltInComponent(i);return o?(n||e.helper(o),o):(e.helper(tC),e.components.add(i),Ff(i,"component"))}function TD(t,e,n=t.props,i,s,r=!1){const{tag:o,loc:a,children:l}=t;let c=[];const u=[],h=[],p=l.length>0;let m=!1,y=0,O=!1,S=!1,x=!1,T=!1,k=!1,D=!1;const M=[],L=K=>{c.length&&(u.push(Cr(e4(c),a)),c=[]),K&&u.push(K)},j=()=>{e.scopes.vFor>0&&c.push(Xn(Ot("ref_for",!0),Ot("true")))},G=({key:K,value:te})=>{if(Ss(K)){const W=K.content,oe=Wc(W);if(oe&&(!i||s)&&W.toLowerCase()!=="onclick"&&W!=="onUpdate:modelValue"&&!Ca(W)&&(T=!0),oe&&Ca(W)&&(D=!0),oe&&te.type===14&&(te=te.arguments[0]),te.type===20||(te.type===4||te.type===8)&&Gs(te,e)>0)return;W==="ref"?O=!0:W==="class"?S=!0:W==="style"?x=!0:W!=="key"&&!M.includes(W)&&M.push(W),i&&(W==="class"||W==="style")&&!M.includes(W)&&M.push(W)}else k=!0};for(let K=0;K<n.length;K++){const te=n[K];if(te.type===6){const{loc:W,name:oe,nameLoc:ye,value:ke}=te;let ge=!0;if(oe==="ref"&&(O=!0,j()),oe==="is"&&(yv(o)||ke&&ke.content.startsWith("vue:")||$c("COMPILER_IS_ON_ELEMENT",e)))continue;c.push(Xn(Ot(oe,!0,ye),Ot(ke?ke.content:"",ge,ke?ke.loc:W)))}else{const{name:W,arg:oe,exp:ye,loc:ke,modifiers:ge}=te,Se=W==="bind",Oe=W==="on";if(W==="slot"){i||e.onError(bn(40,ke));continue}if(W==="once"||W==="memo"||W==="is"||Se&&mc(oe,"is")&&(yv(o)||$c("COMPILER_IS_ON_ELEMENT",e))||Oe&&r)continue;if((Se&&mc(oe,"key")||Oe&&p&&mc(oe,"vue:before-update"))&&(m=!0),Se&&mc(oe,"ref")&&j(),!oe&&(Se||Oe)){if(k=!0,ye)if(Se){if(L(),$c("COMPILER_V_BIND_OBJECT_ORDER",e)){u.unshift(ye);continue}j(),L(),u.push(ye)}else L({type:14,loc:ke,callee:e.helper(cC),arguments:i?[ye]:[ye,"true"]});else e.onError(bn(Se?34:35,ke));continue}Se&&ge.some(dt=>dt.content==="prop")&&(y|=32);const Fe=e.directiveTransforms[W];if(Fe){const{props:dt,needRuntime:Je}=Fe(te,t,e);!r&&dt.forEach(G),Oe&&oe&&!Ss(oe)?L(Cr(dt,a)):c.push(...dt),Je&&(h.push(te),Ds(Je)&&PD.set(te,Je))}else CZ(W)||(h.push(te),p&&(m=!0))}}let Z;if(u.length?(L(),u.length>1?Z=ni(e.helper(Ty),u,a):Z=u[0]):c.length&&(Z=Cr(e4(c),a)),k?y|=16:(S&&!i&&(y|=2),x&&!i&&(y|=4),M.length&&(y|=8),T&&(y|=32)),!m&&(y===0||y===32)&&(O||D||h.length>0)&&(y|=512),!e.inSSR&&Z)switch(Z.type){case 15:let K=-1,te=-1,W=!1;for(let ke=0;ke<Z.properties.length;ke++){const ge=Z.properties[ke].key;Ss(ge)?ge.content==="class"?K=ke:ge.content==="style"&&(te=ke):ge.isHandlerKey||(W=!0)}const oe=Z.properties[K],ye=Z.properties[te];W?Z=ni(e.helper(Qf),[Z]):(oe&&!Ss(oe.value)&&(oe.value=ni(e.helper(aC),[oe.value])),ye&&(x||ye.value.type===4&&ye.value.content.trim()[0]==="["||ye.value.type===17)&&(ye.value=ni(e.helper(lC),[ye.value])));break;case 14:break;default:Z=ni(e.helper(Qf),[ni(e.helper(Ap),[Z])]);break}return{props:Z,directives:h,patchFlag:y,dynamicPropNames:M,shouldUseBlock:m}}function e4(t){const e=new Map,n=[];for(let i=0;i<t.length;i++){const s=t[i];if(s.key.type===8||!s.key.isStatic){n.push(s);continue}const r=s.key.content,o=e.get(r);o?(r==="style"||r==="class"||Wc(r))&&gU(o,s):(e.set(r,s),n.push(s))}return n}function gU(t,e){t.value.type===17?t.value.elements.push(e.value):t.value=Tc([t.value,e.value],t.loc)}function yU(t,e){const n=[],i=PD.get(t);i?n.push(e.helperString(i)):(e.helper(iC),e.directives.add(t.name),n.push(Ff(t.name,"directive")));const{loc:s}=t;if(t.exp&&n.push(t.exp),t.arg&&(t.exp||n.push("void 0"),n.push(t.arg)),Object.keys(t.modifiers).length){t.arg||(t.exp||n.push("void 0"),n.push("void 0"));const r=Ot("true",!1,s);n.push(Cr(t.modifiers.map(o=>Xn(o,r)),s))}return Tc(n,t.loc)}function OU(t){let e="[";for(let n=0,i=t.length;n<i;n++)e+=JSON.stringify(t[n]),n<i-1&&(e+=", ");return e+"]"}function yv(t){return t==="component"||t==="Component"}const bU=(t,e)=>{if(Iy(t)){const{children:n,loc:i}=t,{slotName:s,slotProps:r}=vU(t,e),o=[e.prefixIdentifiers?"_ctx.$slots":"$slots",s,"{}","undefined","true"];let a=2;r&&(o[2]=r,a=3),n.length&&(o[3]=wd([],n,!1,!1,i),a=4),e.scopeId&&!e.slotted&&(a=5),o.splice(a),t.codegenNode=ni(e.helper(iD),o,i)}};function vU(t,e){let n='"default"',i;const s=[];for(let r=0;r<t.props.length;r++){const o=t.props[r];if(o.type===6)o.value&&(o.name==="name"?n=JSON.stringify(o.value.content):(o.name=vn(o.name),s.push(o)));else if(o.name==="bind"&&mc(o.arg,"name")){if(o.exp)n=o.exp;else if(o.arg&&o.arg.type===4){const a=vn(o.arg.content);n=o.exp=Ot(a,!1,o.arg.loc)}}else o.name==="bind"&&o.arg&&Ss(o.arg)&&(o.arg.content=vn(o.arg.content)),s.push(o)}if(s.length>0){const{props:r,directives:o}=TD(t,e,s,!1,!1);i=r,o.length&&e.onError(bn(36,o[0].loc))}return{slotName:n,slotProps:i}}const $D=(t,e,n,i)=>{const{loc:s,modifiers:r,arg:o}=t;!t.exp&&!r.length&&n.onError(bn(35,s));let a;if(o.type===4)if(o.isStatic){let h=o.content;h.startsWith("vue:")&&(h=`vnode-${h.slice(4)}`);const p=e.tagType!==0||h.startsWith("vnode")||!/[A-Z]/.test(h)?ju(vn(h)):`on:${h}`;a=Ot(p,!0,o.loc)}else a=to([`${n.helperString(hv)}(`,o,")"]);else a=o,a.children.unshift(`${n.helperString(hv)}(`),a.children.push(")");let l=t.exp;l&&!l.content.trim()&&(l=void 0);let c=n.cacheHandlers&&!l&&!n.inVOnce;if(l){const h=uD(l),p=!(h||bG(l)),m=l.content.includes(";");(p||c&&h)&&(l=to([`${p?"$event":"(...args)"} => ${m?"{":"("}`,l,m?"}":")"]))}let u={props:[Xn(a,l||Ot("() => {}",!1,s))]};return i&&(u=i(u)),c&&(u.props[0].value=n.cache(u.props[0].value)),u.props.forEach(h=>h.key.isHandlerKey=!0),u},wU=(t,e,n)=>{const{modifiers:i,loc:s}=t,r=t.arg;let{exp:o}=t;return o&&o.type===4&&!o.content.trim()&&(o=void 0),r.type!==4?(r.children.unshift("("),r.children.push(') || ""')):r.isStatic||(r.content=r.content?`${r.content} || ""`:'""'),i.some(a=>a.content==="camel")&&(r.type===4?r.isStatic?r.content=vn(r.content):r.content=`${n.helperString(dv)}(${r.content})`:(r.children.unshift(`${n.helperString(dv)}(`),r.children.push(")"))),n.inSSR||(i.some(a=>a.content==="prop")&&t4(r,"."),i.some(a=>a.content==="attr")&&t4(r,"^")),{props:[Xn(r,o)]}},t4=(t,e)=>{t.type===4?t.isStatic?t.content=e+t.content:t.content=`\`${e}\${${t.content}}\``:(t.children.unshift(`'${e}' + (`),t.children.push(")"))},SU=(t,e)=>{if(t.type===0||t.type===1||t.type===11||t.type===10)return()=>{const n=t.children;let i,s=!1;for(let r=0;r<n.length;r++){const o=n[r];if(Bb(o)){s=!0;for(let a=r+1;a<n.length;a++){const l=n[a];if(Bb(l))i||(i=n[r]=to([o],o.loc)),i.children.push(" + ",l),n.splice(a,1),a--;else{i=void 0;break}}}}if(!(!s||n.length===1&&(t.type===0||t.type===1&&t.tagType===0&&!t.props.find(r=>r.type===7&&!e.directiveTransforms[r.name])&&t.tag!=="template")))for(let r=0;r<n.length;r++){const o=n[r];if(Bb(o)||o.type===8){const a=[];(o.type!==2||o.content!==" ")&&a.push(o),!e.ssr&&Gs(o,e)===0&&a.push("1"),n[r]={type:12,content:o,loc:o.loc,codegenNode:ni(e.helper(eC),a)}}}}},n4=new WeakSet,CU=(t,e)=>{if(t.type===1&&vr(t,"once",!0))return n4.has(t)||e.inVOnce||e.inSSR?void 0:(n4.add(t),e.inVOnce=!0,e.helper($y),()=>{e.inVOnce=!1;const n=e.currentNode;n.codegenNode&&(n.codegenNode=e.cache(n.codegenNode,!0,!0))})},DD=(t,e,n)=>{const{exp:i,arg:s}=t;if(!i)return n.onError(bn(41,t.loc)),kh();const r=i.loc.source.trim(),o=i.type===4?i.content:r,a=n.bindingMetadata[r];if(a==="props"||a==="props-aliased")return n.onError(bn(44,i.loc)),kh();if(a==="literal-const"||a==="setup-const")return n.onError(bn(45,i.loc)),kh();if(!o.trim()||!uD(i))return n.onError(bn(42,i.loc)),kh();const l=s||Ot("modelValue",!0),c=s?Ss(s)?`onUpdate:${vn(s.content)}`:to(['"onUpdate:" + ',s]):"onUpdate:modelValue";let u;const h=n.isTS?"($event: any)":"$event";u=to([`${h} => ((`,i,") = $event)"]);const p=[Xn(l,t.exp),Xn(c,u)];if(t.modifiers.length&&e.tagType===1){const m=t.modifiers.map(O=>O.content).map(O=>(pC(O)?O:JSON.stringify(O))+": true").join(", "),y=s?Ss(s)?`${s.content}Modifiers`:to([s,' + "Modifiers"']):"modelModifiers";p.push(Xn(y,Ot(`{ ${m} }`,!1,t.loc,2)))}return kh(p)};function kh(t=[]){return{props:t}}const AU=/[\w).+\-_$\]]/,xU=(t,e)=>{$c("COMPILER_FILTERS",e)&&(t.type===5?_y(t.content,e):t.type===1&&t.props.forEach(n=>{n.type===7&&n.name!=="for"&&n.exp&&_y(n.exp,e)}))};function _y(t,e){if(t.type===4)i4(t,e);else for(let n=0;n<t.children.length;n++){const i=t.children[n];typeof i=="object"&&(i.type===4?i4(i,e):i.type===8?_y(t,e):i.type===5&&_y(i.content,e))}}function i4(t,e){const n=t.content;let i=!1,s=!1,r=!1,o=!1,a=0,l=0,c=0,u=0,h,p,m,y,O=[];for(m=0;m<n.length;m++)if(p=h,h=n.charCodeAt(m),i)h===39&&p!==92&&(i=!1);else if(s)h===34&&p!==92&&(s=!1);else if(r)h===96&&p!==92&&(r=!1);else if(o)h===47&&p!==92&&(o=!1);else if(h===124&&n.charCodeAt(m+1)!==124&&n.charCodeAt(m-1)!==124&&!a&&!l&&!c)y===void 0?(u=m+1,y=n.slice(0,m).trim()):S();else{switch(h){case 34:s=!0;break;case 39:i=!0;break;case 96:r=!0;break;case 40:c++;break;case 41:c--;break;case 91:l++;break;case 93:l--;break;case 123:a++;break;case 125:a--;break}if(h===47){let x=m-1,T;for(;x>=0&&(T=n.charAt(x),T===" ");x--);(!T||!AU.test(T))&&(o=!0)}}y===void 0?y=n.slice(0,m).trim():u!==0&&S();function S(){O.push(n.slice(u,m).trim()),u=m+1}if(O.length){for(m=0;m<O.length;m++)y=kU(y,O[m],e);t.content=y,t.ast=void 0}}function kU(t,e,n){n.helper(sC);const i=e.indexOf("(");if(i<0)return n.filters.add(e),`${Ff(e,"filter")}(${t})`;{const s=e.slice(0,i),r=e.slice(i+1);return n.filters.add(s),`${Ff(s,"filter")}(${t}${r!==")"?","+r:r}`}}const s4=new WeakSet,PU=(t,e)=>{if(t.type===1){const n=vr(t,"memo");return!n||s4.has(t)||e.inSSR?void 0:(s4.add(t),()=>{const i=t.codegenNode||e.currentNode.codegenNode;i&&i.type===13&&(t.tagType!==1&&hC(i,e),t.codegenNode=ni(e.helper(dC),[n.exp,wd(void 0,i),"_cache",String(e.cached.length)]),e.cached.push(null))})}},TU=(t,e)=>{if(t.type===1){for(const n of t.props)if(n.type===7&&n.name==="bind"&&(!n.exp||n.exp.type===4&&!n.exp.content.trim())&&n.arg){const i=n.arg;if(i.type!==4||!i.isStatic)e.onError(bn(53,i.loc)),n.exp=Ot("",!0,i.loc);else{const s=vn(i.content);(lD.test(s[0])||s[0]==="-")&&(n.exp=Ot(s,!1,i.loc))}}}};function $U(t){return[[TU,CU,rU,PU,lU,xU,bU,pU,dU,SU],{on:$D,bind:wU,model:DD}]}function DU(t,e={}){const n=e.onError||fC,i=e.mode==="module";e.prefixIdentifiers===!0?n(bn(48)):i&&n(bn(49));const s=!1;e.cacheHandlers&&n(bn(50)),e.scopeId&&!i&&n(bn(51));const r=Tt({},e,{prefixIdentifiers:s}),o=mt(t)?QG(t,r):t,[a,l]=$U();return BG(o,Tt({},r,{nodeTransforms:[...a,...e.nodeTransforms||[]],directiveTransforms:Tt({},l,e.directiveTransforms||{})})),ZG(o,r)}const MU=()=>({props:[]});/**
* @vue/compiler-dom v3.5.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const MD=Symbol(""),ID=Symbol(""),RD=Symbol(""),_D=Symbol(""),Ov=Symbol(""),ED=Symbol(""),QD=Symbol(""),ND=Symbol(""),LD=Symbol(""),FD=Symbol("");lG({[MD]:"vModelRadio",[ID]:"vModelCheckbox",[RD]:"vModelText",[_D]:"vModelSelect",[Ov]:"vModelDynamic",[ED]:"withModifiers",[QD]:"withKeys",[ND]:"vShow",[LD]:"Transition",[FD]:"TransitionGroup"});let Su;function IU(t,e=!1){return Su||(Su=document.createElement("div")),e?(Su.innerHTML=`<div foo="${t.replace(/"/g,"&quot;")}">`,Su.children[0].getAttribute("foo")):(Su.innerHTML=t,Su.textContent)}const RU={parseMode:"html",isVoidTag:VZ,isNativeTag:t=>LZ(t)||FZ(t)||BZ(t),isPreTag:t=>t==="pre",isIgnoreNewlineTag:t=>t==="pre"||t==="textarea",decodeEntities:IU,isBuiltInComponent:t=>{if(t==="Transition"||t==="transition")return LD;if(t==="TransitionGroup"||t==="transition-group")return FD},getNamespace(t,e,n){let i=e?e.ns:n;if(e&&i===2)if(e.tag==="annotation-xml"){if(t==="svg")return 1;e.props.some(s=>s.type===6&&s.name==="encoding"&&s.value!=null&&(s.value.content==="text/html"||s.value.content==="application/xhtml+xml"))&&(i=0)}else/^m(?:[ions]|text)$/.test(e.tag)&&t!=="mglyph"&&t!=="malignmark"&&(i=0);else e&&i===1&&(e.tag==="foreignObject"||e.tag==="desc"||e.tag==="title")&&(i=0);if(i===0){if(t==="svg")return 1;if(t==="math")return 2}return i}},_U=t=>{t.type===1&&t.props.forEach((e,n)=>{e.type===6&&e.name==="style"&&e.value&&(t.props[n]={type:7,name:"bind",arg:Ot("style",!0,e.loc),exp:EU(e.value.content,e.loc),modifiers:[],loc:e.loc})})},EU=(t,e)=>{const n=J6(t);return Ot(JSON.stringify(n),!1,e,3)};function Pl(t,e){return bn(t,e)}const QU=(t,e,n)=>{const{exp:i,loc:s}=t;return i||n.onError(Pl(54,s)),e.children.length&&(n.onError(Pl(55,s)),e.children.length=0),{props:[Xn(Ot("innerHTML",!0,s),i||Ot("",!0))]}},NU=(t,e,n)=>{const{exp:i,loc:s}=t;return i||n.onError(Pl(56,s)),e.children.length&&(n.onError(Pl(57,s)),e.children.length=0),{props:[Xn(Ot("textContent",!0),i?Gs(i,n)>0?i:ni(n.helperString(b1),[i],s):Ot("",!0))]}},LU=(t,e,n)=>{const i=DD(t,e,n);if(!i.props.length||e.tagType===1)return i;t.arg&&n.onError(Pl(59,t.arg.loc));const{tag:s}=e,r=n.isCustomElement(s);if(s==="input"||s==="textarea"||s==="select"||r){let o=RD,a=!1;if(s==="input"||r){const l=v1(e,"type");if(l){if(l.type===7)o=Ov;else if(l.value)switch(l.value.content){case"radio":o=MD;break;case"checkbox":o=ID;break;case"file":a=!0,n.onError(Pl(60,t.loc));break}}else vG(e)&&(o=Ov)}else s==="select"&&(o=_D);a||(i.needRuntime=n.helper(o))}else n.onError(Pl(58,t.loc));return i.props=i.props.filter(o=>!(o.key.type===4&&o.key.content==="modelValue")),i},FU=nr("passive,once,capture"),BU=nr("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),VU=nr("left,right"),BD=nr("onkeyup,onkeydown,onkeypress"),jU=(t,e,n,i)=>{const s=[],r=[],o=[];for(let a=0;a<e.length;a++){const l=e[a].content;l==="native"&&Lf("COMPILER_V_ON_NATIVE",n)||FU(l)?o.push(l):VU(l)?Ss(t)?BD(t.content.toLowerCase())?s.push(l):r.push(l):(s.push(l),r.push(l)):BU(l)?r.push(l):s.push(l)}return{keyModifiers:s,nonKeyModifiers:r,eventOptionModifiers:o}},r4=(t,e)=>Ss(t)&&t.content.toLowerCase()==="onclick"?Ot(e,!0):t.type!==4?to(["(",t,`) === "onClick" ? "${e}" : (`,t,")"]):t,zU=(t,e,n)=>$D(t,e,n,i=>{const{modifiers:s}=t;if(!s.length)return i;let{key:r,value:o}=i.props[0];const{keyModifiers:a,nonKeyModifiers:l,eventOptionModifiers:c}=jU(r,s,n,t.loc);if(l.includes("right")&&(r=r4(r,"onContextmenu")),l.includes("middle")&&(r=r4(r,"onMouseup")),l.length&&(o=ni(n.helper(ED),[o,JSON.stringify(l)])),a.length&&(!Ss(r)||BD(r.content.toLowerCase()))&&(o=ni(n.helper(QD),[o,JSON.stringify(a)])),c.length){const u=c.map(Uc).join("");r=Ss(r)?Ot(`${r.content}${u}`,!0):to(["(",r,`) + "${u}"`])}return{props:[Xn(r,o)]}}),ZU=(t,e,n)=>{const{exp:i,loc:s}=t;return i||n.onError(Pl(62,s)),{props:[],needRuntime:n.helper(ND)}},qU=(t,e)=>{t.type===1&&t.tagType===0&&(t.tag==="script"||t.tag==="style")&&e.removeNode()},XU=[_U],WU={cloak:MU,html:QU,text:NU,model:LU,on:zU,show:ZU};function VD(t,e={}){return DU(t,Tt({},RU,e,{nodeTransforms:[qU,...XU,...e.nodeTransforms||[]],directiveTransforms:Tt({},WU,e.directiveTransforms||{}),transformHoist:null}))}/**
* vue v3.5.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const o4=Object.create(null);function GU(t,e){if(!mt(t))if(t.nodeType)t=t.innerHTML;else return Si;const n=kZ(t,e),i=o4[n];if(i)return i;if(t[0]==="#"){const a=document.querySelector(t);t=a?a.innerHTML:""}const s=Tt({hoistStatic:!0,onError:void 0,onWarn:Si},e);!s.isCustomElement&&typeof customElements<"u"&&(s.isCustomElement=a=>!!customElements.get(a));const{code:r}=VD(t,s),o=new Function("Vue",r)(nG);return o._rc=!0,o4[n]=o}C$(GU);const jb=11,Bg=2,jD="MMM d, y",zD="en-IN",Ks="INR",bv="English",ZD=1001,a4="Admin",UU=["Arabic","Aramaic","Azeri","Dhivehi","Maldivian","Hebrew","Kurdish","Sorani","Persian","Farsi","Urdu"];var A=(t=>(t.Account="Account",t.AccountingLedgerEntry="AccountingLedgerEntry",t.AccountingSettings="AccountingSettings",t.Address="Address",t.Batch="Batch",t.BatchSeries="BatchSeries",t.Color="Color",t.Currency="Currency",t.GetStarted="GetStarted",t.Defaults="Defaults",t.Item="Item",t.ItemGroup="ItemGroup",t.ItemEnquiry="ItemEnquiry",t.UOM="UOM",t.UOMConversionItem="UOMConversionItem",t.JournalEntry="JournalEntry",t.JournalEntryAccount="JournalEntryAccount",t.Misc="Misc",t.NumberSeries="NumberSeries",t.SerialNumberSeries="SerialNumberSeries",t.Lead="Lead",t.Party="Party",t.LoyaltyProgram="LoyaltyProgram",t.LoyaltyPointEntry="LoyaltyPointEntry",t.CollectionRulesItems="CollectionRulesItems",t.CouponCode="CouponCode",t.IntegrationErrorLog="IntegrationErrorLog",t.AppliedCouponCodes="AppliedCouponCodes",t.Payment="Payment",t.PaymentMethod="PaymentMethod",t.PaymentFor="PaymentFor",t.PriceList="PriceList",t.PriceListItem="PriceListItem",t.PricingRule="PricingRule",t.PricingRuleItem="PricingRuleItem",t.PricingRuleDetail="PricingRuleDetail",t.PrintSettings="PrintSettings",t.PrintTemplate="PrintTemplate",t.PurchaseInvoice="PurchaseInvoice",t.PurchaseInvoiceItem="PurchaseInvoiceItem",t.SalesInvoice="SalesInvoice",t.SalesInvoiceItem="SalesInvoiceItem",t.SalesQuote="SalesQuote",t.SalesQuoteItem="SalesQuoteItem",t.SerialNumber="SerialNumber",t.SetupWizard="SetupWizard",t.Tax="Tax",t.TaxDetail="TaxDetail",t.TaxSummary="TaxSummary",t.PatchRun="PatchRun",t.SingleValue="SingleValue",t.InventorySettings="InventorySettings",t.SystemSettings="SystemSettings",t.StockMovement="StockMovement",t.StockMovementItem="StockMovementItem",t.StockLedgerEntry="StockLedgerEntry",t.Shipment="Shipment",t.ShipmentItem="ShipmentItem",t.PurchaseReceipt="PurchaseReceipt",t.PurchaseReceiptItem="PurchaseReceiptItem",t.Location="Location",t.CustomForm="CustomForm",t.CustomField="CustomField",t.POSSettings="POSSettings",t.POSProfile="POSProfile",t.POSOpeningShift="POSOpeningShift",t.POSClosingShift="POSClosingShift",t.ERPNextSyncSettings="ERPNextSyncSettings",t.ERPNextSyncQueue="ERPNextSyncQueue",t.FetchFromERPNextQueue="FetchFromERPNextQueue",t))(A||{});const Fo=Cn(!0),Ai=Cn(""),vv=Cn("");var G6,U6;const wv=Bl({forward:!!((G6=history.state)!=null&&G6.forward),back:!!((U6=history.state)!=null&&U6.back)}),HU="#1E293B",YU={25:"#FBFBFB",50:"#F8F8F8",100:"#F3F3F3",200:"#EDEDED",300:"#E2E2E2",400:"#C7C7C7",500:"#999999",600:"#7C7C7C",700:"#525252",800:"#383838",850:"#282828",875:"#212121",890:"#1C1C1C",900:"#171717"},KU={50:"#FFF7F7",100:"#FFF0F0",200:"#FCD7D7",300:"#F9C6C6",400:"#EB9091",500:"#E03636",600:"#CC2929",700:"#B52A2A",800:"#941F1F",900:"#6B1515"},JU={50:"#FFF9F5",100:"#FFF1E7",200:"#FCE6D5",300:"#F7D6BD",400:"#F0B58B",500:"#E86C13",600:"#D45A08",700:"#BD3E0C",800:"#9E3513",900:"#6B2711"},eH={50:"#FFFCEF",100:"#FFF7D3",200:"#F7E9A8",300:"#F5E171",400:"#F2D14B",500:"#EDBA13",600:"#D1930D",700:"#AB6E05",800:"#8C5600",900:"#733F12"},tH={50:"#F3FCF5",100:"#E4F5E9",200:"#DAF0E1",300:"#CAE5D4",400:"#B6DEC5",500:"#59BA8B",600:"#30A66D",700:"#278F5E",800:"#16794C",900:"#173B2C"},nH={50:"#F0FDFA",100:"#E6F7F4",200:"#BAE8E1",300:"#97DED4",400:"#73D1C4",500:"#36BAAD",600:"#0B9E92",700:"#0F736B",800:"#115C57",900:"#114541"},iH={50:"#F7FBFD",100:"#EDF6FD",200:"#E3F1FD",300:"#C9E7FC",400:"#70B6F0",500:"#33A1FF",600:"#007BE0",700:"#0070CC",800:"#005CA3",900:"#004880"},sH={100:"#ebf4ff",200:"#c3dafe",300:"#a3bffa",400:"#7f9cf5",500:"#667eea",600:"#5a67d8",700:"#4c51bf",800:"#434190",900:"#3c366b"},rH={50:"#FDFAFF",100:"#F9F0FF",200:"#F1E5FA",300:"#E9D6F5",400:"#D6C1E6",500:"#9C45E3",600:"#8642C2",700:"#6E399D",800:"#5C2F83",900:"#401863"},oH={50:"#FFF7FC",100:"#FEEEF8",200:"#F8E2F0",300:"#F2D4E6",400:"#E9C4DA",500:"#DF9EB8",600:"#CF3A96",700:"#9C2671",800:"#801458",900:"#570F3E"},aH={50:"#FBFAFF",100:"#F5F2FF",200:"#E5E1FA",300:"#DAD2F7",400:"#BDB1F0",500:"#6846E3",600:"#5F46C7",700:"#4F3DA1",800:"#392980",900:"#251959"},lH={50:"#F5FBFC",100:"#E0F8FF",200:"#B3ECFC",300:"#94E6FF",400:"#6BD3F2",500:"#34BAE3",600:"#32A4C7",700:"#267A94",800:"#125C73",900:"#164759"},cH={50:"#FDFAED",100:"#FCF3CF",200:"#F7E28D",300:"#F5D261",400:"#F2BE3A",500:"#E79913",600:"#DB7706",700:"#B35309",800:"#91400D",900:"#763813"},uH={black:HU,gray:YU,red:KU,orange:JU,yellow:eH,green:tH,teal:nH,blue:iH,indigo:sH,purple:rH,pink:oH,violet:aH,cyan:lH,amber:cH},pt=uH,Vf=t=>["gray","orange","green","red","yellow","blue","indigo","pink","purple","teal"].includes(t)?t:"gray";function dH(t){const e=Vf(t);return`bg-${e}-200 dark:bg-${e}-800`}function zb(t,e,n=300,i=600){return`${e}-${Vf(t)}-${n} dark:${e}-${Vf(t)}-${i}`}function hH(t){return`text-${Vf(t)}-700 dark:text-${Vf(t)}-200`}function jf(t){const e=dH(t),n=hH(t);return[e,n].join(" ")}const tn={name:"IconBase",props:{active:Boolean,darkMode:{type:Boolean,default:!1}},computed:{lightColor(){const t=this.darkMode?pt.gray[500]:pt.gray[600],e=this.darkMode?pt.gray[700]:pt.gray[400];return this.active?t:e},darkColor(){const t=this.darkMode?pt.gray[200]:pt.gray[800],e=this.darkMode?pt.gray[500]:pt.gray[600];return this.active?t:e},bgColor(){return this.darkMode?pt.gray[900]:pt.gray[100]}}},ne=(t,e)=>{const n=t.__vccOpts||t;for(const[i,s]of e)n[i]=s;return n},fH={name:"FB",extends:tn},pH={width:"19",height:"13",viewBox:"0 0 19 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function mH(t,e,n,i,s,r){return w(),P("svg",pH,[...e[0]||(e[0]=[v("path",{d:"M9.25935 12.128V0.727295H13.8241C14.6628 0.727295 15.3624 0.851619 15.9227 1.10027C16.4831 1.34892 16.9043 1.69405 17.1864 2.13568C17.4684 2.5736 17.6095 3.07832 17.6095 3.64984C17.6095 4.09518 17.5204 4.4867 17.3423 4.82442C17.1641 5.15843 16.9192 5.43305 16.6075 5.6483C16.2994 5.85984 15.9469 6.01014 15.5498 6.09921V6.21054C15.984 6.2291 16.3904 6.35156 16.7689 6.57795C17.1511 6.80433 17.461 7.12163 17.6985 7.52986C17.9361 7.93438 18.0548 8.41683 18.0548 8.97721C18.0548 9.58213 17.9045 10.1221 17.6039 10.5971C17.307 11.0685 16.8672 11.4414 16.2846 11.7161C15.7019 11.9907 14.9838 12.128 14.1303 12.128H9.25935ZM11.6698 10.1574H13.6348C14.3065 10.1574 14.7964 10.0293 15.1044 9.77326C15.4125 9.51348 15.5665 9.16834 15.5665 8.73784C15.5665 8.42239 15.4904 8.14406 15.3382 7.90283C15.1861 7.66161 14.969 7.47234 14.6869 7.33502C14.4086 7.19771 14.0764 7.12905 13.6905 7.12905H11.6698V10.1574ZM11.6698 5.498H13.4567C13.787 5.498 14.0802 5.44047 14.3362 5.32543C14.596 5.20667 14.8001 5.03967 14.9486 4.82442C15.1007 4.60917 15.1768 4.35125 15.1768 4.05064C15.1768 3.6387 15.0302 3.30655 14.737 3.05419C14.4476 2.80184 14.0356 2.67566 13.5012 2.67566H11.6698V5.498Z",fill:"#505A62"},null,-1),v("path",{d:"M7.73114 2.75564V0.75855H0.0548096V2.75564H7.73114Z",fill:"#2490EF"},null,-1),v("path",{d:"M2.48876 7.43646H7.35669V5.43935H0.0548096V12.1796H2.48876V7.43646Z",fill:"#2490EF"},null,-1)])])}const qD=ne(fH,[["render",mH]]),gH={name:"WindowsTitleBar",components:{Fb:qD},props:{dbPath:String,companyName:String},data(){return{isMax:Boolean,isFullscreen:Boolean}},mounted(){this.getIsMaximized(),this.getIsFullscreen(),window.addEventListener("resize",this.getIsFullscreen),document.addEventListener("webkitfullscreenchange",this.getIsFullscreen),document.addEventListener("mozfullscreenchange",this.getIsFullscreen),document.addEventListener("fullscreenchange",this.getIsFullscreen),document.addEventListener("MSFullscreenChange",this.getIsFullscreen)},destroyed(){window.removeEventListener("resize",this.getIsFullscreen),document.removeEventListener("webkitfullscreenchange",this.getIsFullscreen),document.removeEventListener("mozfullscreenchange",this.getIsFullscreen),document.removeEventListener("fullscreenchange",this.getIsFullscreen),document.removeEventListener("MSFullscreenChange",this.getIsFullscreen)},methods:{minimizeWindow(){ipc.minimizeWindow()},toggleMaximize(){ipc.toggleMaximize(),this.getIsMaximized()},closeWindow(){ipc.closeWindow()},getIsMaximized(){ipc.isMaximized().then(t=>{this.isMax=t}).catch(t=>{console.error(t)})},getIsFullscreen(){ipc.isFullscreen().then(t=>{this.isFullscreen=t}).catch(t=>{console.error(t)})}}},yH={class:"relative window-drag flex items-center border-b dark:bg-gray-900 text-gray-900 dark:text-gray-100 border-gray-100 dark:border-gray-800",style:{height:"28px"}},OH={key:0,class:"mx-auto text-sm"},bH={key:1,class:"absolute window-no-drag flex h-full items-center right-0"};function vH(t,e,n,i,s,r){const o=Q("Fb"),a=Q("feather-icon");return w(),P("div",yH,[_(o,{class:"ms-2"}),n.companyName&&n.dbPath?(w(),P("p",OH,R(n.companyName)+" - "+R(n.dbPath),1)):B("",!0),s.isFullscreen?B("",!0):(w(),P("div",bH,[v("div",{class:"flex items-center px-4 h-full hover:bg-gray-300 dark:hover:bg-gray-875",onClick:e[0]||(e[0]=(...l)=>r.minimizeWindow&&r.minimizeWindow(...l))},[_(a,{name:"minus",class:"h-4 w-4 flex-shrink-0"})]),v("div",{class:"flex items-center px-4 h-full hover:bg-gray-300 dark:hover:bg-gray-875",onClick:e[1]||(e[1]=(...l)=>r.toggleMaximize&&r.toggleMaximize(...l))},[s.isMax?(w(),H(a,{key:0,name:"minimize",class:"h-3 w-3 flex-shrink-0"})):(w(),H(a,{key:1,name:"square",class:"h-3 w-3 flex-shrink-0"}))]),v("div",{class:"flex items-center px-4 h-full hover:bg-red-600 hover:text-white",onClick:e[2]||(e[2]=(...l)=>r.closeWindow&&r.closeWindow(...l))},[_(a,{name:"x",class:"h-4 w-4 flex-shrink-0"})])]))])}const wH=ne(gH,[["render",vH]]),SH="modulepreload",CH=function(t){return"/"+t},l4={},rn=function(e,n,i){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=CH(l),l in l4)return;l4[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":SH,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((p,m)=>{h.addEventListener("load",p),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})};var OC=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},Me=(t,e,n)=>(OC(t,e,"read from private field"),n?n.call(t):e.get(t)),Xs=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Ui=(t,e,n,i)=>(OC(t,e,"write to private field"),e.set(t,n),n),In=(t,e,n)=>(OC(t,e,"access private method"),n),c4=0,u4=36,C1=6,Zb=3,XD=!0;function AH(t,e){typeof t=="string"&&(t=xH(t),PH(t),t=Vg(t));const n=typeof t=="number"?t+"":t,i=typeof t=="string"?Number(t):t,s=n.split("."),r=s[0],o=s[1]??"",a=o.length;let l=r+o;l=l==="-0"?"0":l;let c=BigInt(l);return e>a?c*=10n**BigInt(e-a):(c/=10n**BigInt(a-e),Number(o[e])>4&&(c+=i>=0?1n:-1n)),c}function xH(t){return t.replace(/[_,]/g,"")}function d4(t,e){const n=t<0;let i=t+"";i=n?i.slice(1):i;const s=i.length-e,r=n?"-":"";if(s<0)return r+Vg("0."+"0".repeat(Math.abs(s))+i);if(s===0)return r+Vg("0."+i);const o=i.slice(0,s)||"0",a=i.slice(s);return a.length?r+Vg(`${o}.${a}`):r+o}function Vg(t){if(t.includes(".")&&t.endsWith("0")){let[e,n]=t.split(".");return n=n.replace(/0*$/,""),n=n.length>0?`.${n}`:n,e+n}return t}function kH(t){return!!t.match(/^[A-Z]{3}$/)}function WD(t){if(!kH(t))throw Error(`invalid currency code '${t}'`)}function Ph(t,e){const n=[t,e];return n.forEach(WD),n.join("-")}function GD(t,e,n){return e>n?t/10n**BigInt(e-n):e<n?t*10n**BigInt(n-e):t}function PH(t){if(!TH(t))throw Error(`invalid input '${t}' of type '${typeof t}'`)}function TH(t){return!!t.match(/^-?\d*(?:(?:\.?\d)|(?:\d\.?))\d*$/)}function UD(t,e){throw Error(`rate not provided for conversion from ${t} to ${e}`)}var ps;(function(t){t.Add="+",t.Sub="-",t.Mul="*",t.Div="/"})(ps||(ps={}));var br;(function(t){t.Eq="===",t.Gt=">",t.Lt="<",t.Gte=">=",t.Lte="<="})(br||(br={}));var cl,js,Mi,jg,Ey,dc,Sv=class{constructor(t=0n,e=C1,n=XD){Xs(this,cl,void 0),Xs(this,js,void 0),Xs(this,Mi,void 0),Xs(this,jg,void 0),Ui(this,js,qb(e)),Ui(this,jg,n),Ui(this,cl,10n**BigInt(Me(this,js))),Ui(this,Mi,Ny(t,this.precision))}round(t,e){e??(e=Me(this,jg)),Qy(t),t=t>=0?t:0;const n=t-Me(this,js),i=Me(this,Mi)<0;let s=Me(this,Mi).toString().slice(i?1:0);s.length<this.precision&&(s="0".repeat(this.precision-s.length)+s);const r=s.length-this.precision,o=s.slice(0,r)||"0",a=s.slice(r),l="0".repeat(Math.max(0,n)),c=Number(a[t]),u=c===5&&[...a.slice(t+1)].every(T=>T==="0");let h=(c||0)<=4||i&&u?0n:1n;e&&u&&l.length===0&&(h=(Number(t-1>=0?a[t-1]:o[r-1])||0)%2===0?0n:1n);let p=(BigInt(o+a.slice(0,t)+l)+h).toString();p.length<t&&(p="0".repeat(t-p.length)+p);const m=p.length-t,y=p.slice(0,m)||"0",O=p.slice(m),S="."+O+"0".repeat(t-O.length),x=y+(S!=="."?S:"");return(!i||[...x].filter(T=>T!==".").every(T=>T==="0")?"":"-")+x}clip(t){return Qy(t),new Sv(this.round(t),Me(this,js))}copy(){return new Sv(Me(this,Mi),Me(this,js))}get value(){return Number(Me(this,Mi))/Math.pow(10,Me(this,js))}get float(){return this.value}get integer(){return Me(this,Mi)}get precision(){return Me(this,js)}get store(){return this.round(this.precision)}set precision(t){t=qb(t),Ui(this,Mi,GD(Me(this,Mi),this.precision,Me(this,js))),Ui(this,js,t),Ui(this,cl,Ly(t))}add(...t){return sl(ps.Add,[this,t].flat(),this.precision,Me(this,cl))}sub(...t){return sl(ps.Sub,[this,t].flat(),this.precision,Me(this,cl))}mul(...t){return sl(ps.Mul,[this,t].flat(),this.precision,Me(this,cl))}div(...t){return sl(ps.Div,[this,t].flat(),this.precision,Me(this,cl))}eq(t){return bo(br.Eq,this,t,this.precision)}gt(t){return bo(br.Gt,this,t,this.precision)}lt(t){return bo(br.Lt,this,t,this.precision)}gte(t){return bo(br.Gte,this,t,this.precision)}lte(t){return bo(br.Lte,this,t,this.precision)}static get prec(){return Me(this,Ey)}static set prec(t){t=qb(t),Ui(this,Ey,t),Ui(this,dc,Ly(t))}static add(...t){return sl(ps.Add,t,this.prec,Me(this,dc))}static sub(...t){return sl(ps.Sub,t,this.prec,Me(this,dc))}static mul(...t){return sl(ps.Sub,t,this.prec,Me(this,dc))}static div(...t){return sl(ps.Sub,t,this.prec,Me(this,dc))}static eq(t,e){return bo(br.Eq,t,e,this.prec)}static gt(t,e){return bo(br.Gt,t,e,this.prec)}static lt(t,e){return bo(br.Lt,t,e,this.prec)}static gte(t,e){return bo(br.Gte,t,e,this.prec)}static lte(t,e){return bo(br.Lte,t,e,this.prec)}isPositive(){return Me(this,Mi)>0n}isNegative(){return Me(this,Mi)<0n}isZero(){return Me(this,Mi)===0n}toString(){return d4(Me(this,Mi),Me(this,js))}toJSON(){return d4(Me(this,Mi),Me(this,js))}valueOf(){return Me(this,Mi)}},Tl=Sv;cl=new WeakMap;js=new WeakMap;Mi=new WeakMap;jg=new WeakMap;Ey=new WeakMap;dc=new WeakMap;Xs(Tl,Ey,C1);Xs(Tl,dc,Ly(C1));function qb(t){if(t=Math.round(t),t>u4||t<c4)throw Error(`precision should be between ${c4} and ${u4}`);return t}function Qy(...t){t.forEach(e=>{if(!(e===0||e===0n)&&(Number.isNaN(e)||e===1/0||e===-1/0||!e))throw Error(`invalid value ${e} found`)})}function Ny(t,e){return typeof t=="bigint"?t:t instanceof Tl?GD(t.integer,t.precision,e):AH(t,e)}function $H(t,e,n){const i=t/n,s=t.toString(),r=Number(s.charAt(s.length-e)||"0")>4?1n:0n;return i+r}function Ly(t){return 10n**BigInt(t)}function sl(t,e,n,i){Qy(...e);const r=e.map(o=>Ny(o,n)).reduce((o,a)=>{switch(t){case ps.Add:return o+a;case ps.Sub:return o-a;case ps.Div:return o*(i??Ly(n))/a;case ps.Mul:return $H(o*a,n,i);default:return 0n}});return new Tl(r,n)}function bo(t,e,n,i){Qy(e,n);const s=Ny(e,i),r=Ny(n,i);switch(t){case"===":return s===r;case">":return s>r;case"<":return s<r;case">=":return s>=r;case"<=":return s<=r;default:return!1}}var ai,lf,On,ds,zg,Cv,yr,qr,Or,Xr,bC=class{constructor(t,e={}){Xs(this,zg),Xs(this,yr),Xs(this,Or),Xs(this,ai,void 0),Xs(this,lf,void 0),Xs(this,On,void 0),Xs(this,ds,void 0),Ui(this,On,new Tl(t,e.precision??C1,e.bankersRounding??XD)),Ui(this,ai,""),Ui(this,ds,new Map),Ui(this,lf,e.wrapper??(s=>s)),this.display=e.display??Zb;const{currency:n,rates:i}=e;return n&&this.currency(n),i&&this.rate(i),Me(this,lf).call(this,this)}get float(){return Me(this,On).value}get options(){const t=Array.from(Me(this,ds).keys()).map(e=>{const[n,i]=e.split("-"),s=Me(this,ds).get(e)??-1;return{from:n,to:i,rate:s}});return{currency:Me(this,ai),precision:Me(this,On).precision,display:this.display,rates:t}}get preciseNumber(){return Me(this,On)}get internal(){const t=Me(this,On).integer,e=Me(this,On).precision;return{bigint:t,precision:e}}get conversionRates(){return new Map(Me(this,ds))}get store(){return Me(this,On).store}_setConversionRates(t){Me(this,ds).size===0&&Ui(this,ds,new Map(t))}currency(t){return Me(this,ai)||(WD(t),Ui(this,ai,t)),this}rate(t,e){typeof t=="string"&&In(this,zg,Cv).call(this),typeof t=="string"&&typeof e>"u"&&UD(Me(this,ai),t);let n;if(t instanceof Array)n=t;else if(typeof t=="string")n=[{from:Me(this,ai),to:t,rate:e??1}];else if(t instanceof Object)n=[t];else throw Error(`invalid input to rate: ${t}`);for(let i of n){const{from:s,to:r,rate:o}=i,a=Ph(s,r);Me(this,ds).set(a,o)}return this}to(t,e){In(this,zg,Cv).call(this),typeof e=="number"||typeof e=="string"&&!this.hasConversionRate(t)?this.rate(t,e):e=this.getConversionRate(Me(this,ai),t);const n=Me(this,On).mul(e);return In(this,yr,qr).call(this,n,t)}add(t,e,n){const{lhs:i,rhs:s}=In(this,Or,Xr).call(this,t,e,n),r=i.add(s);return In(this,yr,qr).call(this,r)}sub(t,e,n){const{lhs:i,rhs:s}=In(this,Or,Xr).call(this,t,e,n),r=i.sub(s);return In(this,yr,qr).call(this,r)}mul(t,e,n){const{lhs:i,rhs:s}=In(this,Or,Xr).call(this,t,e,n),r=i.mul(s);return In(this,yr,qr).call(this,r)}div(t,e,n){const{lhs:i,rhs:s}=In(this,Or,Xr).call(this,t,e,n),r=i.div(s);return In(this,yr,qr).call(this,r)}percent(t){return In(this,yr,qr).call(this,Me(this,On).mul(t/100))}split(t,e){e??(e=this.display);let n=[];if(typeof t=="number"){const o=t;n=Array(o-1).fill(100/o).map(a=>new Tl(a,Me(this,On).precision).clip(e??Zb).float),n.push(100-n.reduce((a,l)=>a+l))}else t instanceof Array&&(n=t);const i=n.map(o=>new Tl(o)).reduce((o,a)=>o.add(a)).float===100,s=i?n.length-1:n.length,r=n.slice(0,s).map(o=>{const a=Me(this,On).mul(o/100).round(e??Zb);return In(this,yr,qr).call(this,a)});if(i){const o=r.reduce((l,c)=>l.add(c)).round(e),a=In(this,yr,qr).call(this,this.round(e)).sub(o);r.push(a)}return r}abs(){return this.lt(0)?this.mul(-1):this.copy()}neg(){return this.mul(-1)}clip(t){return t??(t=this.display),In(this,yr,qr).call(this,Me(this,On).clip(t),Me(this,ai))}copy(){return In(this,yr,qr).call(this,Me(this,On).copy(),Me(this,ai))}eq(t,e,n){const{lhs:i,rhs:s}=In(this,Or,Xr).call(this,t,e,n);return i.eq(s)}neq(t,e,n){const{lhs:i,rhs:s}=In(this,Or,Xr).call(this,t,e,n);return!i.eq(s)}gt(t,e,n){const{lhs:i,rhs:s}=In(this,Or,Xr).call(this,t,e,n);return i.gt(s)}lt(t,e,n){const{lhs:i,rhs:s}=In(this,Or,Xr).call(this,t,e,n);return i.lt(s)}gte(t,e,n){const{lhs:i,rhs:s}=In(this,Or,Xr).call(this,t,e,n);return i.gte(s)}lte(t,e,n){const{lhs:i,rhs:s}=In(this,Or,Xr).call(this,t,e,n);return i.lte(s)}isPositive(){return Me(this,On).integer>0n}isNegative(){return Me(this,On).integer<0n}isZero(){return Me(this,On).integer===0n}getCurrency(){return Me(this,ai)}getConversionRate(t,e){let n=Ph(t,e),i=Me(this,ds).get(n);if(i||(n=Ph(e,t),i=Me(this,ds).get(n),i&&typeof i=="string"?i=1/parseFloat(i):i&&typeof i=="number"&&(i=1/i)),!i)throw Error(`please set the conversion rate for ${t} to ${e}`);return i}hasConversionRate(t){let e=Ph(this.getCurrency(),t),n=Ph(t,this.getCurrency());return Me(this,ds).has(e)||Me(this,ds).has(n)}round(t){return t??(t=this.display),Me(this,On).round(t)}toString(){return Me(this,On).toString()}toJSON(){return Me(this,On).toJSON()}valueOf(){return Me(this,On).valueOf()}},Il=bC;ai=new WeakMap;lf=new WeakMap;On=new WeakMap;ds=new WeakMap;zg=new WeakSet;Cv=function(){if(!Me(this,ai))throw Error("currency has not been set for conversion")};yr=new WeakSet;qr=function(t,e=""){const n={currency:e||Me(this,ai),precision:Me(this,On).precision,display:this.display,wrapper:Me(this,lf)},i=new bC(t,n);return i._setConversionRates(Me(this,ds)),i};Or=new WeakSet;Xr=function(t,e,n){let i;const s=t instanceof bC;if(s?(i=t.preciseNumber,e=t.getCurrency()||e):i=new Tl(t,Me(this,On).precision),e&&e!==Me(this,ai)){let o;if(n&&(o=n),!o&&s)try{o=t.getConversionRate(e,Me(this,ai))}catch{}if(!o)try{o=this.getConversionRate(e,Me(this,ai))}catch{}o||UD(e,Me(this,ai)),i=i.mul(o??1)}return{lhs:Me(this,On),rhs:i}};function DH(t=0,e={}){return typeof e=="string"&&(e={currency:e}),new Il(t,e)}function Xb(t={}){return function(e,n){return DH(e,n??t)}}function zf(t,e,n,i=!0){return i&&(t=t.filter(s=>s[n]!==void 0&&s[e]!==void 0)),t.reduce((s,r)=>{const o=String(r[e]),a=r[n];return s[o]=a,s},{})}function Vl(){const t=Math.random().toString(36).slice(2,8),e=Date.now().toString(36);return`${t}-${e}`}function er(t,e){const n={};for(const i of t){const s=i[e];s!==void 0&&(n[String(s)]=i)}return n}function xi(t){return t==null}function MH(t){return t.split(" ").map(e=>{const n=e.toLowerCase();return["and","an","a","from","by","on"].includes(n)?n:n[0].toUpperCase()+n.slice(1)}).join(" ")}function HD(t){const e=Object.keys(t),n={};for(const i of e){const s=t[i];n[s]=i}return n}function YD(t,e){let n;switch(typeof t){case"string":n=e(t);break;case"number":n=t;break;default:n=Number(t);break}return Number.isNaN(n)?0:n}function kn(t){return YD(t,Number)}function Jc(t){return YD(t,e=>Math.trunc(Number(e)))}function KD(t,e){if(t instanceof Il)return t;if(typeof t=="number"||typeof t=="bigint")return e.pesa(t);if(typeof t!="string")return e.pesa(0);try{return e.pesa(t)}catch{return e.pesa(0)}}function h4(t,e,n,i){const s=er(t,n),r=er(e,i),o=t.map(u=>u[n]).filter(u=>u in r),a=e.map(u=>u[i]).filter(u=>u in s),l=new Set([o,a].flat().sort()),c=[];for(const u of l){const h=s[u],p=r[u],m={...h,...p};c.push(m)}return c}function IH(t,e){return e<0||e>=t.length?t:[...t.slice(0,e),...t.slice(e+1)]}class RH{}var yp;class _H extends RH{constructor(n){super();yn(this,yp,!1);Tn(this,yp,n)}async getCreds(){return nt(this,yp)?await ipc.getCreds():{errorLogUrl:"",tokenString:"",telemetryUrl:""}}}yp=new WeakMap;var Op,wc,od,ad;class EH{constructor(e,n){yn(this,Op);yn(this,wc);yn(this,od);yn(this,ad);this.fyo=e,Tn(this,Op,{serverURL:"",backend:"sqlite",port:8e3}),Tn(this,wc,{user:"",token:""}),n!==void 0?Tn(this,od,new n(e.isElectron)):Tn(this,od,new _H(e.isElectron))}set user(e){nt(this,wc).user=e}get user(){return nt(this,wc).user}get session(){return{...nt(this,wc)}}get config(){return{...nt(this,Op)}}init(){return null}async getCreds(){return nt(this,ad)||Tn(this,ad,await nt(this,od).getCreds()),nt(this,ad)}}Op=new WeakMap,wc=new WeakMap,od=new WeakMap,ad=new WeakMap;class eu extends Error{constructor(e,n,i=!0){super(n),this.more={},this.name="BaseError",this.statusCode=e,this.message=n,this.shouldStore=i}}class ie extends eu{constructor(e,n=!1){super(417,e,n),this.name="ValidationError"}}class Ea extends eu{constructor(e,n=!0){super(404,e,n),this.name="NotFoundError"}}class JD extends eu{constructor(e,n=!0){super(403,e,n),this.name="ForbiddenError"}}class A1 extends ie{constructor(e,n=!1){super(e,n),this.name="DuplicateEntryError"}}class x1 extends ie{constructor(e,n=!1){super(e,n),this.name="LinkValidationError"}}class e7 extends ie{constructor(e,n=!1){super(e,n),this.name="MandatoryError"}}class Zf extends eu{constructor(e,n=!0){super(500,e,n),this.name="DatabaseError"}}class t7 extends Zf{constructor(e,n=!0){super(e,n),this.name="CannotCommitError"}}class ku extends eu{constructor(e="",n=!1){super(501,e,n),this.name="NotImplemented"}}class oo extends ie{}class n7 extends ie{}class QH extends ie{}function i7(t){return t.message?t.message.includes("SQLITE_ERROR: no such table")?Ea:t.message.includes("FOREIGN KEY")?x1:t.message.includes("SQLITE_ERROR: cannot commit")?t7:t.message.includes("UNIQUE constraint failed:")?A1:Zf:Zf}const NH=Object.freeze(Object.defineProperty({__proto__:null,BaseError:eu,CannotCommitError:t7,ConflictError:n7,DatabaseError:Zf,DuplicateEntryError:A1,ForbiddenError:JD,InvalidFieldError:QH,LinkValidationError:x1,MandatoryError:e7,NotFoundError:Ea,NotImplemented:ku,ValidationError:ie,ValueError:oo,getDbError:i7},Symbol.toStringTag,{value:"Module"}));class LH{}class FH{}var pa,Sl,Pu;class BH extends FH{constructor(n){super();yn(this,Sl);yn(this,pa,!1);Tn(this,pa,n)}async getSchemaMap(){if(!nt(this,pa))throw new ku;return await Ke(this,Sl,Pu).call(this,async()=>await ipc.db.getSchema())}async createNewDatabase(n,i){if(!nt(this,pa))throw new ku;return await Ke(this,Sl,Pu).call(this,async()=>ipc.db.create(n,i))}async connectToDatabase(n,i){if(!nt(this,pa))throw new ku;return await Ke(this,Sl,Pu).call(this,async()=>ipc.db.connect(n,i))}async call(n,...i){if(!nt(this,pa))throw new ku;return await Ke(this,Sl,Pu).call(this,async()=>await ipc.db.call(n,...i))}async callBespoke(n,...i){if(!nt(this,pa))throw new ku;return await Ke(this,Sl,Pu).call(this,async()=>await ipc.db.bespoke(n,...i))}}pa=new WeakMap,Sl=new WeakSet,Pu=async function(n){var s;const i=await n();if((s=i.error)!=null&&s.name){const{name:r,message:o,stack:a}=i.error,l=new Zf(`${r}
${o}`);throw l.stack=a,l}return i.data};class Cl{constructor(){this._map=new Map,this._isHot=new Map,this._eventQueue=new Map,this._listeners=new Map,this._onceListeners=new Map}get(e){return this[e]}set(e,n){this[e]=n,this.trigger("change",{doc:this,changed:e})}hasListener(e,n){const i=this._listeners.get(e)??[],s=this._onceListeners.get(e)??[];if(n===void 0)return[...i,...s].length>0;let r=i.includes(n);return r||(r=s.includes(n)),r}on(e,n){this._addListener("_listeners",e,n)}once(e,n){this._addListener("_onceListeners",e,n)}off(e,n){this._removeListener("_listeners",e,n),this._removeListener("_onceListeners",e,n)}clear(){this._listeners.clear(),this._onceListeners.clear()}async trigger(e,n,i=0){let s=!1;i>0&&(s=this._throttled(e,n,i),n=[n]),!s&&await this._executeTriggers(e,n)}_removeListener(e,n,i){const s=(this[e].get(n)??[]).filter(r=>r!==i);this[e].set(n,s)}async _executeTriggers(e,n){await this._triggerEvent("_listeners",e,n),await this._triggerEvent("_onceListeners",e,n),this._onceListeners.delete(e)}_throttled(e,n,i){return this._eventQueue.has(e)||this._eventQueue.set(e,[]),this._isHot.get(e)?(this._eventQueue.get(e).push(n),!0):(this._isHot.set(e,!0),setTimeout(()=>{this._isHot.set(e,!1);const s=this._eventQueue.get(e);s!==void 0&&(this._executeTriggers(e,s),this._eventQueue.delete(e))},i),!1)}_addListener(e,n,i){this._initLiseners(e,n);const s=this[e].get(n);s.includes(i)||s.push(i)}_initLiseners(e,n){this[e].has(n)||this[e].set(n,[])}async _triggerEvent(e,n,i){const s=this[e].get(n)??[];for(const r of s)await r(i)}}const s7=["label","description","placeholder","section","tab"];function VH(t){let e,n;if(typeof t=="string")e=t;else if(t instanceof Array)n=t;else throw new Error(`invalid input ${String(t)} of type ${typeof t}`);if(n===void 0&&(n=r7(e)),n.length===1)return n[0];let i="";return n.forEach((s,r)=>{if(r===n.length-1){i+=s;return}i+=s+"${"+String(r)+"}"}),i}function r7(t){let e=0;const n=[...t.matchAll(/\${[^}]+}/g)].map(i=>{const s=i.index;if(s===void 0)return"";const r=t.slice(e,s);return e=s+i[0].length,r});return n.push(t.slice(e)),n}function jH(t){return t.replace(/\s+/g," ").trim()}function zH(t){return[...t.matchAll(/\${([^}]+)}/g)].map(([,e])=>parseInt(e))}var jo,o7,a7,Zg;class k1{constructor(...e){yn(this,jo);this.args=e}get s(){return this.toString()}ctx(e){return this.context=e,this}toString(){return Ke(this,jo,Zg).call(this)}toJSON(){return Ke(this,jo,Zg).call(this)}valueOf(){return Ke(this,jo,Zg).call(this)}}jo=new WeakSet,o7=function(e){return String(e??"")},a7=function(){var i;let e=VH(this.args[0]);e=jH(e);const n=((i=this.languageMap[e])==null?void 0:i.translation)??e;this.argList=zH(n).map(s=>this.argList[s]),this.strList=r7(n)},Zg=function(){if(!(this.args[0]instanceof Array))throw new oo(`invalid args passed to TranslationString ${String(this.args)} of type ${typeof this.args[0]}`);return this.strList=this.args[0],this.argList=this.args.slice(1),this.languageMap&&Ke(this,jo,a7).call(this),this.strList.map((e,n)=>e+Ke(this,jo,o7).call(this,this.argList[n])).join("").replace(/\s+/g," ").trim()};function ZH(...t){return new k1(...t)}function b(...t){return new k1(...t).s}function l7(t){k1.prototype.languageMap=t}function Fy(t,e,n){var i;if(Array.isArray(t)){for(const s of t)Fy(s,e,n);return}if(typeof t=="object")for(const s of Object.keys(t)){const r=t[s];typeof r=="string"&&n.includes(s)&&((i=e[r])!=null&&i.translation)&&(t[s]=e[r].translation),typeof r=="object"&&Fy(r,e,n)}}var si=(t=>(t.Started="started",t.Completed="completed",t.Created="created",t.Deleted="deleted",t.Submitted="submitted",t.Cancelled="cancelled",t.Imported="imported",t.Exported="exported",t.Printed="printed",t.Closed="closed",t.Opened="opened",t.Resumed="resumed",t))(si||{}),Av=(t=>(t.IntegrationErrorLog="IntegrationErrorLog",t))(Av||{});const Ie={Data:"Data",Select:"Select",Link:"Link",Date:"Date",Datetime:"Datetime",Table:"Table",AutoComplete:"AutoComplete",Check:"Check",AttachImage:"AttachImage",DynamicLink:"DynamicLink",Int:"Int",Float:"Float",Currency:"Currency",Text:"Text",Button:"Button",Attachment:"Attachment"};function ui(t){return t instanceof Il}function qH(t){return!!(!t||ui(t)&&t.isZero()||Array.isArray(t)&&t.length===0||typeof t=="object"&&Object.keys(t).length===0)}function XH(t){const e=t.fyo.models[t.schemaName];return e===void 0?[]:e.getActions(t.fyo)}function c7(t,e){return WH(t,e).map(i=>typeof i=="string"?{label:i,value:i}:i)}function WH(t,e){const n=t.options;if(n&&n.length>0)return t.options;if(xi(e))return[];const i=e.fyo.models[e.schemaName];if(i===void 0)return[];const s=i.lists[t.fieldname];return s===void 0?[]:s(e)}function GH(t,e){switch(t){case"Date":case"Datetime":return new Date;case"Float":case"Int":return 0;case"Currency":return e.pesa(0);case"Check":return!1;case"DynamicLink":case"Link":case"Select":case"AutoComplete":case"Text":case"Data":case"Color":return null;case"Table":case"Attachment":case"AttachImage":default:return null}}async function f4(t,e,n){return t.message.includes("UNIQUE constraint failed:")?UH(t,e):t.message.includes("FOREIGN KEY constraint failed")?HH(t,e,n):t}function UH(t,e){const n=t.message.match(/UNIQUE constraint failed:\s(\w+)\.(\w+)$/);if(!n)return t;const i=n[1],s=n[2];if(!i||!s)return t;const r=new A1(t.message,!1),o=e.getValidDict(!1,!0);return r.stack=t.stack,r.more={schemaName:i,fieldname:s,value:o[s]},r}async function HH(t,e,n){const i=new Ea(n.t`Cannot perform operation.`);i.stack=t.stack,i.more.message=t.message;const s=await u7(e,n);return s?(i.shouldStore=!1,i.message=n.t`${s.label} value ${s.value} does not exist.`,i):(i.shouldStore=!0,i)}async function u7(t,e){for(const n of t.schema.fields){const i=await YH(n,t,e);if(i)return i}return null}async function YH(t,e,n){const i=e.get(t.fieldname);return t.fieldtype===Ie.Link&&i?KH(t,i,n):t.fieldtype===Ie.DynamicLink&&i?JH(t,i,n,e):t.fieldtype===Ie.Table&&(i!=null&&i.length)?await eY(i,n):null}async function KH(t,e,n){const{target:i}=t;return await n.db.exists(i,e)?null:{label:t.label,value:e}}async function JH(t,e,n,i){const{references:s}=t,r=i.get(s);return r?await n.db.exists(r,e)?null:{label:t.label,value:e}:null}async function eY(t,e){for(const n of t){const i=await u7(n,e);if(i)return i}return null}var Tu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tY(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var By={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */By.exports;(function(t,e){(function(){var n,i="4.17.23",s=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,u="__lodash_placeholder__",h=1,p=2,m=4,y=1,O=2,S=1,x=2,T=4,k=8,D=16,M=32,L=64,j=128,G=256,Z=512,K=30,te="...",W=800,oe=16,ye=1,ke=2,ge=3,Se=1/0,Oe=9007199254740991,Fe=17976931348623157e292,dt=NaN,Je=4294967295,ut=Je-1,Qt=Je>>>1,Pt=[["ary",j],["bind",S],["bindKey",x],["curry",k],["curryRight",D],["flip",Z],["partial",M],["partialRight",L],["rearg",G]],xt="[object Arguments]",Ft="[object Array]",ue="[object AsyncFunction]",De="[object Boolean]",re="[object Date]",he="[object DOMException]",ct="[object Error]",Xt="[object Function]",F="[object GeneratorFunction]",z="[object Map]",se="[object Number]",we="[object Null]",ce="[object Object]",Ce="[object Promise]",_e="[object Proxy]",$e="[object RegExp]",xe="[object Set]",be="[object String]",Ye="[object Symbol]",Ee="[object Undefined]",Xe="[object WeakMap]",rt="[object WeakSet]",gt="[object ArrayBuffer]",It="[object DataView]",jt="[object Float32Array]",ri="[object Float64Array]",Zn="[object Int8Array]",zi="[object Int16Array]",hi="[object Int32Array]",Ho="[object Uint8Array]",ru="[object Uint8ClampedArray]",fi="[object Uint16Array]",rs="[object Uint32Array]",Jp=/\b__p \+= '';/g,em=/\b(__p \+=) '' \+/g,zQ=/(__e\(.*?\)|\b__t\)) \+\n'';/g,wx=/&(?:amp|lt|gt|quot|#39);/g,Sx=/[&<>"']/g,ZQ=RegExp(wx.source),qQ=RegExp(Sx.source),XQ=/<%-([\s\S]+?)%>/g,WQ=/<%([\s\S]+?)%>/g,Cx=/<%=([\s\S]+?)%>/g,GQ=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,UQ=/^\w*$/,HQ=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gO=/[\\^$.*+?()[\]{}|]/g,YQ=RegExp(gO.source),yO=/^\s+/,KQ=/\s/,JQ=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,eN=/\{\n\/\* \[wrapped with (.+)\] \*/,tN=/,? & /,nN=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,iN=/[()=,{}\[\]\/\s]/,sN=/\\(\\)?/g,rN=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ax=/\w*$/,oN=/^[-+]0x[0-9a-f]+$/i,aN=/^0b[01]+$/i,lN=/^\[object .+?Constructor\]$/,cN=/^0o[0-7]+$/i,uN=/^(?:0|[1-9]\d*)$/,dN=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,tm=/($^)/,hN=/['\n\r\u2028\u2029\\]/g,nm="\\ud800-\\udfff",fN="\\u0300-\\u036f",pN="\\ufe20-\\ufe2f",mN="\\u20d0-\\u20ff",xx=fN+pN+mN,kx="\\u2700-\\u27bf",Px="a-z\\xdf-\\xf6\\xf8-\\xff",gN="\\xac\\xb1\\xd7\\xf7",yN="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ON="\\u2000-\\u206f",bN=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Tx="A-Z\\xc0-\\xd6\\xd8-\\xde",$x="\\ufe0e\\ufe0f",Dx=gN+yN+ON+bN,OO="[']",vN="["+nm+"]",Mx="["+Dx+"]",im="["+xx+"]",Ix="\\d+",wN="["+kx+"]",Rx="["+Px+"]",_x="[^"+nm+Dx+Ix+kx+Px+Tx+"]",bO="\\ud83c[\\udffb-\\udfff]",SN="(?:"+im+"|"+bO+")",Ex="[^"+nm+"]",vO="(?:\\ud83c[\\udde6-\\uddff]){2}",wO="[\\ud800-\\udbff][\\udc00-\\udfff]",ou="["+Tx+"]",Qx="\\u200d",Nx="(?:"+Rx+"|"+_x+")",CN="(?:"+ou+"|"+_x+")",Lx="(?:"+OO+"(?:d|ll|m|re|s|t|ve))?",Fx="(?:"+OO+"(?:D|LL|M|RE|S|T|VE))?",Bx=SN+"?",Vx="["+$x+"]?",AN="(?:"+Qx+"(?:"+[Ex,vO,wO].join("|")+")"+Vx+Bx+")*",xN="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",kN="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",jx=Vx+Bx+AN,PN="(?:"+[wN,vO,wO].join("|")+")"+jx,TN="(?:"+[Ex+im+"?",im,vO,wO,vN].join("|")+")",$N=RegExp(OO,"g"),DN=RegExp(im,"g"),SO=RegExp(bO+"(?="+bO+")|"+TN+jx,"g"),MN=RegExp([ou+"?"+Rx+"+"+Lx+"(?="+[Mx,ou,"$"].join("|")+")",CN+"+"+Fx+"(?="+[Mx,ou+Nx,"$"].join("|")+")",ou+"?"+Nx+"+"+Lx,ou+"+"+Fx,kN,xN,Ix,PN].join("|"),"g"),IN=RegExp("["+Qx+nm+xx+$x+"]"),RN=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_N=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],EN=-1,gn={};gn[jt]=gn[ri]=gn[Zn]=gn[zi]=gn[hi]=gn[Ho]=gn[ru]=gn[fi]=gn[rs]=!0,gn[xt]=gn[Ft]=gn[gt]=gn[De]=gn[It]=gn[re]=gn[ct]=gn[Xt]=gn[z]=gn[se]=gn[ce]=gn[$e]=gn[xe]=gn[be]=gn[Xe]=!1;var dn={};dn[xt]=dn[Ft]=dn[gt]=dn[It]=dn[De]=dn[re]=dn[jt]=dn[ri]=dn[Zn]=dn[zi]=dn[hi]=dn[z]=dn[se]=dn[ce]=dn[$e]=dn[xe]=dn[be]=dn[Ye]=dn[Ho]=dn[ru]=dn[fi]=dn[rs]=!0,dn[ct]=dn[Xt]=dn[Xe]=!1;var QN={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},NN={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},LN={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},FN={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},BN=parseFloat,VN=parseInt,zx=typeof Tu=="object"&&Tu&&Tu.Object===Object&&Tu,jN=typeof self=="object"&&self&&self.Object===Object&&self,pi=zx||jN||Function("return this")(),CO=e&&!e.nodeType&&e,Gl=CO&&!0&&t&&!t.nodeType&&t,Zx=Gl&&Gl.exports===CO,AO=Zx&&zx.process,ar=function(){try{var Y=Gl&&Gl.require&&Gl.require("util").types;return Y||AO&&AO.binding&&AO.binding("util")}catch{}}(),qx=ar&&ar.isArrayBuffer,Xx=ar&&ar.isDate,Wx=ar&&ar.isMap,Gx=ar&&ar.isRegExp,Ux=ar&&ar.isSet,Hx=ar&&ar.isTypedArray;function Rs(Y,de,ae){switch(ae.length){case 0:return Y.call(de);case 1:return Y.call(de,ae[0]);case 2:return Y.call(de,ae[0],ae[1]);case 3:return Y.call(de,ae[0],ae[1],ae[2])}return Y.apply(de,ae)}function zN(Y,de,ae,Ze){for(var ft=-1,Wt=Y==null?0:Y.length;++ft<Wt;){var Yn=Y[ft];de(Ze,Yn,ae(Yn),Y)}return Ze}function lr(Y,de){for(var ae=-1,Ze=Y==null?0:Y.length;++ae<Ze&&de(Y[ae],ae,Y)!==!1;);return Y}function ZN(Y,de){for(var ae=Y==null?0:Y.length;ae--&&de(Y[ae],ae,Y)!==!1;);return Y}function Yx(Y,de){for(var ae=-1,Ze=Y==null?0:Y.length;++ae<Ze;)if(!de(Y[ae],ae,Y))return!1;return!0}function Wa(Y,de){for(var ae=-1,Ze=Y==null?0:Y.length,ft=0,Wt=[];++ae<Ze;){var Yn=Y[ae];de(Yn,ae,Y)&&(Wt[ft++]=Yn)}return Wt}function sm(Y,de){var ae=Y==null?0:Y.length;return!!ae&&au(Y,de,0)>-1}function xO(Y,de,ae){for(var Ze=-1,ft=Y==null?0:Y.length;++Ze<ft;)if(ae(de,Y[Ze]))return!0;return!1}function wn(Y,de){for(var ae=-1,Ze=Y==null?0:Y.length,ft=Array(Ze);++ae<Ze;)ft[ae]=de(Y[ae],ae,Y);return ft}function Ga(Y,de){for(var ae=-1,Ze=de.length,ft=Y.length;++ae<Ze;)Y[ft+ae]=de[ae];return Y}function kO(Y,de,ae,Ze){var ft=-1,Wt=Y==null?0:Y.length;for(Ze&&Wt&&(ae=Y[++ft]);++ft<Wt;)ae=de(ae,Y[ft],ft,Y);return ae}function qN(Y,de,ae,Ze){var ft=Y==null?0:Y.length;for(Ze&&ft&&(ae=Y[--ft]);ft--;)ae=de(ae,Y[ft],ft,Y);return ae}function PO(Y,de){for(var ae=-1,Ze=Y==null?0:Y.length;++ae<Ze;)if(de(Y[ae],ae,Y))return!0;return!1}var XN=TO("length");function WN(Y){return Y.split("")}function GN(Y){return Y.match(nN)||[]}function Kx(Y,de,ae){var Ze;return ae(Y,function(ft,Wt,Yn){if(de(ft,Wt,Yn))return Ze=Wt,!1}),Ze}function rm(Y,de,ae,Ze){for(var ft=Y.length,Wt=ae+(Ze?1:-1);Ze?Wt--:++Wt<ft;)if(de(Y[Wt],Wt,Y))return Wt;return-1}function au(Y,de,ae){return de===de?oL(Y,de,ae):rm(Y,Jx,ae)}function UN(Y,de,ae,Ze){for(var ft=ae-1,Wt=Y.length;++ft<Wt;)if(Ze(Y[ft],de))return ft;return-1}function Jx(Y){return Y!==Y}function ek(Y,de){var ae=Y==null?0:Y.length;return ae?DO(Y,de)/ae:dt}function TO(Y){return function(de){return de==null?n:de[Y]}}function $O(Y){return function(de){return Y==null?n:Y[de]}}function tk(Y,de,ae,Ze,ft){return ft(Y,function(Wt,Yn,an){ae=Ze?(Ze=!1,Wt):de(ae,Wt,Yn,an)}),ae}function HN(Y,de){var ae=Y.length;for(Y.sort(de);ae--;)Y[ae]=Y[ae].value;return Y}function DO(Y,de){for(var ae,Ze=-1,ft=Y.length;++Ze<ft;){var Wt=de(Y[Ze]);Wt!==n&&(ae=ae===n?Wt:ae+Wt)}return ae}function MO(Y,de){for(var ae=-1,Ze=Array(Y);++ae<Y;)Ze[ae]=de(ae);return Ze}function YN(Y,de){return wn(de,function(ae){return[ae,Y[ae]]})}function nk(Y){return Y&&Y.slice(0,ok(Y)+1).replace(yO,"")}function _s(Y){return function(de){return Y(de)}}function IO(Y,de){return wn(de,function(ae){return Y[ae]})}function ah(Y,de){return Y.has(de)}function ik(Y,de){for(var ae=-1,Ze=Y.length;++ae<Ze&&au(de,Y[ae],0)>-1;);return ae}function sk(Y,de){for(var ae=Y.length;ae--&&au(de,Y[ae],0)>-1;);return ae}function KN(Y,de){for(var ae=Y.length,Ze=0;ae--;)Y[ae]===de&&++Ze;return Ze}var JN=$O(QN),eL=$O(NN);function tL(Y){return"\\"+FN[Y]}function nL(Y,de){return Y==null?n:Y[de]}function lu(Y){return IN.test(Y)}function iL(Y){return RN.test(Y)}function sL(Y){for(var de,ae=[];!(de=Y.next()).done;)ae.push(de.value);return ae}function RO(Y){var de=-1,ae=Array(Y.size);return Y.forEach(function(Ze,ft){ae[++de]=[ft,Ze]}),ae}function rk(Y,de){return function(ae){return Y(de(ae))}}function Ua(Y,de){for(var ae=-1,Ze=Y.length,ft=0,Wt=[];++ae<Ze;){var Yn=Y[ae];(Yn===de||Yn===u)&&(Y[ae]=u,Wt[ft++]=ae)}return Wt}function om(Y){var de=-1,ae=Array(Y.size);return Y.forEach(function(Ze){ae[++de]=Ze}),ae}function rL(Y){var de=-1,ae=Array(Y.size);return Y.forEach(function(Ze){ae[++de]=[Ze,Ze]}),ae}function oL(Y,de,ae){for(var Ze=ae-1,ft=Y.length;++Ze<ft;)if(Y[Ze]===de)return Ze;return-1}function aL(Y,de,ae){for(var Ze=ae+1;Ze--;)if(Y[Ze]===de)return Ze;return Ze}function cu(Y){return lu(Y)?cL(Y):XN(Y)}function Fr(Y){return lu(Y)?uL(Y):WN(Y)}function ok(Y){for(var de=Y.length;de--&&KQ.test(Y.charAt(de)););return de}var lL=$O(LN);function cL(Y){for(var de=SO.lastIndex=0;SO.test(Y);)++de;return de}function uL(Y){return Y.match(SO)||[]}function dL(Y){return Y.match(MN)||[]}var hL=function Y(de){de=de==null?pi:uu.defaults(pi.Object(),de,uu.pick(pi,_N));var ae=de.Array,Ze=de.Date,ft=de.Error,Wt=de.Function,Yn=de.Math,an=de.Object,_O=de.RegExp,fL=de.String,cr=de.TypeError,am=ae.prototype,pL=Wt.prototype,du=an.prototype,lm=de["__core-js_shared__"],cm=pL.toString,Yt=du.hasOwnProperty,mL=0,ak=function(){var d=/[^.]+$/.exec(lm&&lm.keys&&lm.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}(),um=du.toString,gL=cm.call(an),yL=pi._,OL=_O("^"+cm.call(Yt).replace(gO,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),dm=Zx?de.Buffer:n,Ha=de.Symbol,hm=de.Uint8Array,lk=dm?dm.allocUnsafe:n,fm=rk(an.getPrototypeOf,an),ck=an.create,uk=du.propertyIsEnumerable,pm=am.splice,dk=Ha?Ha.isConcatSpreadable:n,lh=Ha?Ha.iterator:n,Ul=Ha?Ha.toStringTag:n,mm=function(){try{var d=ec(an,"defineProperty");return d({},"",{}),d}catch{}}(),bL=de.clearTimeout!==pi.clearTimeout&&de.clearTimeout,vL=Ze&&Ze.now!==pi.Date.now&&Ze.now,wL=de.setTimeout!==pi.setTimeout&&de.setTimeout,gm=Yn.ceil,ym=Yn.floor,EO=an.getOwnPropertySymbols,SL=dm?dm.isBuffer:n,hk=de.isFinite,CL=am.join,AL=rk(an.keys,an),Kn=Yn.max,Ti=Yn.min,xL=Ze.now,kL=de.parseInt,fk=Yn.random,PL=am.reverse,QO=ec(de,"DataView"),ch=ec(de,"Map"),NO=ec(de,"Promise"),hu=ec(de,"Set"),uh=ec(de,"WeakMap"),dh=ec(an,"create"),Om=uh&&new uh,fu={},TL=tc(QO),$L=tc(ch),DL=tc(NO),ML=tc(hu),IL=tc(uh),bm=Ha?Ha.prototype:n,hh=bm?bm.valueOf:n,pk=bm?bm.toString:n;function I(d){if(Mn(d)&&!yt(d)&&!(d instanceof Rt)){if(d instanceof ur)return d;if(Yt.call(d,"__wrapped__"))return m5(d)}return new ur(d)}var pu=function(){function d(){}return function(f){if(!Pn(f))return{};if(ck)return ck(f);d.prototype=f;var g=new d;return d.prototype=n,g}}();function vm(){}function ur(d,f){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=n}I.templateSettings={escape:XQ,evaluate:WQ,interpolate:Cx,variable:"",imports:{_:I}},I.prototype=vm.prototype,I.prototype.constructor=I,ur.prototype=pu(vm.prototype),ur.prototype.constructor=ur;function Rt(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Je,this.__views__=[]}function RL(){var d=new Rt(this.__wrapped__);return d.__actions__=os(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=os(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=os(this.__views__),d}function _L(){if(this.__filtered__){var d=new Rt(this);d.__dir__=-1,d.__filtered__=!0}else d=this.clone(),d.__dir__*=-1;return d}function EL(){var d=this.__wrapped__.value(),f=this.__dir__,g=yt(d),C=f<0,$=g?d.length:0,E=WF(0,$,this.__views__),V=E.start,q=E.end,J=q-V,pe=C?q:V-1,me=this.__iteratees__,Ae=me.length,Qe=0,We=Ti(J,this.__takeCount__);if(!g||!C&&$==J&&We==J)return Lk(d,this.__actions__);var ot=[];e:for(;J--&&Qe<We;){pe+=f;for(var wt=-1,at=d[pe];++wt<Ae;){var $t=me[wt],Nt=$t.iteratee,Ns=$t.type,Xi=Nt(at);if(Ns==ke)at=Xi;else if(!Xi){if(Ns==ye)continue e;break e}}ot[Qe++]=at}return ot}Rt.prototype=pu(vm.prototype),Rt.prototype.constructor=Rt;function Hl(d){var f=-1,g=d==null?0:d.length;for(this.clear();++f<g;){var C=d[f];this.set(C[0],C[1])}}function QL(){this.__data__=dh?dh(null):{},this.size=0}function NL(d){var f=this.has(d)&&delete this.__data__[d];return this.size-=f?1:0,f}function LL(d){var f=this.__data__;if(dh){var g=f[d];return g===l?n:g}return Yt.call(f,d)?f[d]:n}function FL(d){var f=this.__data__;return dh?f[d]!==n:Yt.call(f,d)}function BL(d,f){var g=this.__data__;return this.size+=this.has(d)?0:1,g[d]=dh&&f===n?l:f,this}Hl.prototype.clear=QL,Hl.prototype.delete=NL,Hl.prototype.get=LL,Hl.prototype.has=FL,Hl.prototype.set=BL;function Yo(d){var f=-1,g=d==null?0:d.length;for(this.clear();++f<g;){var C=d[f];this.set(C[0],C[1])}}function VL(){this.__data__=[],this.size=0}function jL(d){var f=this.__data__,g=wm(f,d);if(g<0)return!1;var C=f.length-1;return g==C?f.pop():pm.call(f,g,1),--this.size,!0}function zL(d){var f=this.__data__,g=wm(f,d);return g<0?n:f[g][1]}function ZL(d){return wm(this.__data__,d)>-1}function qL(d,f){var g=this.__data__,C=wm(g,d);return C<0?(++this.size,g.push([d,f])):g[C][1]=f,this}Yo.prototype.clear=VL,Yo.prototype.delete=jL,Yo.prototype.get=zL,Yo.prototype.has=ZL,Yo.prototype.set=qL;function Ko(d){var f=-1,g=d==null?0:d.length;for(this.clear();++f<g;){var C=d[f];this.set(C[0],C[1])}}function XL(){this.size=0,this.__data__={hash:new Hl,map:new(ch||Yo),string:new Hl}}function WL(d){var f=Rm(this,d).delete(d);return this.size-=f?1:0,f}function GL(d){return Rm(this,d).get(d)}function UL(d){return Rm(this,d).has(d)}function HL(d,f){var g=Rm(this,d),C=g.size;return g.set(d,f),this.size+=g.size==C?0:1,this}Ko.prototype.clear=XL,Ko.prototype.delete=WL,Ko.prototype.get=GL,Ko.prototype.has=UL,Ko.prototype.set=HL;function Yl(d){var f=-1,g=d==null?0:d.length;for(this.__data__=new Ko;++f<g;)this.add(d[f])}function YL(d){return this.__data__.set(d,l),this}function KL(d){return this.__data__.has(d)}Yl.prototype.add=Yl.prototype.push=YL,Yl.prototype.has=KL;function Br(d){var f=this.__data__=new Yo(d);this.size=f.size}function JL(){this.__data__=new Yo,this.size=0}function eF(d){var f=this.__data__,g=f.delete(d);return this.size=f.size,g}function tF(d){return this.__data__.get(d)}function nF(d){return this.__data__.has(d)}function iF(d,f){var g=this.__data__;if(g instanceof Yo){var C=g.__data__;if(!ch||C.length<s-1)return C.push([d,f]),this.size=++g.size,this;g=this.__data__=new Ko(C)}return g.set(d,f),this.size=g.size,this}Br.prototype.clear=JL,Br.prototype.delete=eF,Br.prototype.get=tF,Br.prototype.has=nF,Br.prototype.set=iF;function mk(d,f){var g=yt(d),C=!g&&nc(d),$=!g&&!C&&tl(d),E=!g&&!C&&!$&&Ou(d),V=g||C||$||E,q=V?MO(d.length,fL):[],J=q.length;for(var pe in d)(f||Yt.call(d,pe))&&!(V&&(pe=="length"||$&&(pe=="offset"||pe=="parent")||E&&(pe=="buffer"||pe=="byteLength"||pe=="byteOffset")||na(pe,J)))&&q.push(pe);return q}function gk(d){var f=d.length;return f?d[GO(0,f-1)]:n}function sF(d,f){return _m(os(d),Kl(f,0,d.length))}function rF(d){return _m(os(d))}function LO(d,f,g){(g!==n&&!Vr(d[f],g)||g===n&&!(f in d))&&Jo(d,f,g)}function fh(d,f,g){var C=d[f];(!(Yt.call(d,f)&&Vr(C,g))||g===n&&!(f in d))&&Jo(d,f,g)}function wm(d,f){for(var g=d.length;g--;)if(Vr(d[g][0],f))return g;return-1}function oF(d,f,g,C){return Ya(d,function($,E,V){f(C,$,g($),V)}),C}function yk(d,f){return d&&yo(f,oi(f),d)}function aF(d,f){return d&&yo(f,ls(f),d)}function Jo(d,f,g){f=="__proto__"&&mm?mm(d,f,{configurable:!0,enumerable:!0,value:g,writable:!0}):d[f]=g}function FO(d,f){for(var g=-1,C=f.length,$=ae(C),E=d==null;++g<C;)$[g]=E?n:bb(d,f[g]);return $}function Kl(d,f,g){return d===d&&(g!==n&&(d=d<=g?d:g),f!==n&&(d=d>=f?d:f)),d}function dr(d,f,g,C,$,E){var V,q=f&h,J=f&p,pe=f&m;if(g&&(V=$?g(d,C,$,E):g(d)),V!==n)return V;if(!Pn(d))return d;var me=yt(d);if(me){if(V=UF(d),!q)return os(d,V)}else{var Ae=$i(d),Qe=Ae==Xt||Ae==F;if(tl(d))return Vk(d,q);if(Ae==ce||Ae==xt||Qe&&!$){if(V=J||Qe?{}:o5(d),!q)return J?LF(d,aF(V,d)):NF(d,yk(V,d))}else{if(!dn[Ae])return $?d:{};V=HF(d,Ae,q)}}E||(E=new Br);var We=E.get(d);if(We)return We;E.set(d,V),E5(d)?d.forEach(function(at){V.add(dr(at,f,g,at,d,E))}):R5(d)&&d.forEach(function(at,$t){V.set($t,dr(at,f,g,$t,d,E))});var ot=pe?J?rb:sb:J?ls:oi,wt=me?n:ot(d);return lr(wt||d,function(at,$t){wt&&($t=at,at=d[$t]),fh(V,$t,dr(at,f,g,$t,d,E))}),V}function lF(d){var f=oi(d);return function(g){return Ok(g,d,f)}}function Ok(d,f,g){var C=g.length;if(d==null)return!C;for(d=an(d);C--;){var $=g[C],E=f[$],V=d[$];if(V===n&&!($ in d)||!E(V))return!1}return!0}function bk(d,f,g){if(typeof d!="function")throw new cr(o);return vh(function(){d.apply(n,g)},f)}function ph(d,f,g,C){var $=-1,E=sm,V=!0,q=d.length,J=[],pe=f.length;if(!q)return J;g&&(f=wn(f,_s(g))),C?(E=xO,V=!1):f.length>=s&&(E=ah,V=!1,f=new Yl(f));e:for(;++$<q;){var me=d[$],Ae=g==null?me:g(me);if(me=C||me!==0?me:0,V&&Ae===Ae){for(var Qe=pe;Qe--;)if(f[Qe]===Ae)continue e;J.push(me)}else E(f,Ae,C)||J.push(me)}return J}var Ya=Xk(go),vk=Xk(VO,!0);function cF(d,f){var g=!0;return Ya(d,function(C,$,E){return g=!!f(C,$,E),g}),g}function Sm(d,f,g){for(var C=-1,$=d.length;++C<$;){var E=d[C],V=f(E);if(V!=null&&(q===n?V===V&&!Qs(V):g(V,q)))var q=V,J=E}return J}function uF(d,f,g,C){var $=d.length;for(g=bt(g),g<0&&(g=-g>$?0:$+g),C=C===n||C>$?$:bt(C),C<0&&(C+=$),C=g>C?0:N5(C);g<C;)d[g++]=f;return d}function wk(d,f){var g=[];return Ya(d,function(C,$,E){f(C,$,E)&&g.push(C)}),g}function mi(d,f,g,C,$){var E=-1,V=d.length;for(g||(g=KF),$||($=[]);++E<V;){var q=d[E];f>0&&g(q)?f>1?mi(q,f-1,g,C,$):Ga($,q):C||($[$.length]=q)}return $}var BO=Wk(),Sk=Wk(!0);function go(d,f){return d&&BO(d,f,oi)}function VO(d,f){return d&&Sk(d,f,oi)}function Cm(d,f){return Wa(f,function(g){return ia(d[g])})}function Jl(d,f){f=Ja(f,d);for(var g=0,C=f.length;d!=null&&g<C;)d=d[Oo(f[g++])];return g&&g==C?d:n}function Ck(d,f,g){var C=f(d);return yt(d)?C:Ga(C,g(d))}function Zi(d){return d==null?d===n?Ee:we:Ul&&Ul in an(d)?XF(d):rB(d)}function jO(d,f){return d>f}function dF(d,f){return d!=null&&Yt.call(d,f)}function hF(d,f){return d!=null&&f in an(d)}function fF(d,f,g){return d>=Ti(f,g)&&d<Kn(f,g)}function zO(d,f,g){for(var C=g?xO:sm,$=d[0].length,E=d.length,V=E,q=ae(E),J=1/0,pe=[];V--;){var me=d[V];V&&f&&(me=wn(me,_s(f))),J=Ti(me.length,J),q[V]=!g&&(f||$>=120&&me.length>=120)?new Yl(V&&me):n}me=d[0];var Ae=-1,Qe=q[0];e:for(;++Ae<$&&pe.length<J;){var We=me[Ae],ot=f?f(We):We;if(We=g||We!==0?We:0,!(Qe?ah(Qe,ot):C(pe,ot,g))){for(V=E;--V;){var wt=q[V];if(!(wt?ah(wt,ot):C(d[V],ot,g)))continue e}Qe&&Qe.push(ot),pe.push(We)}}return pe}function pF(d,f,g,C){return go(d,function($,E,V){f(C,g($),E,V)}),C}function mh(d,f,g){f=Ja(f,d),d=u5(d,f);var C=d==null?d:d[Oo(fr(f))];return C==null?n:Rs(C,d,g)}function Ak(d){return Mn(d)&&Zi(d)==xt}function mF(d){return Mn(d)&&Zi(d)==gt}function gF(d){return Mn(d)&&Zi(d)==re}function gh(d,f,g,C,$){return d===f?!0:d==null||f==null||!Mn(d)&&!Mn(f)?d!==d&&f!==f:yF(d,f,g,C,gh,$)}function yF(d,f,g,C,$,E){var V=yt(d),q=yt(f),J=V?Ft:$i(d),pe=q?Ft:$i(f);J=J==xt?ce:J,pe=pe==xt?ce:pe;var me=J==ce,Ae=pe==ce,Qe=J==pe;if(Qe&&tl(d)){if(!tl(f))return!1;V=!0,me=!1}if(Qe&&!me)return E||(E=new Br),V||Ou(d)?i5(d,f,g,C,$,E):ZF(d,f,J,g,C,$,E);if(!(g&y)){var We=me&&Yt.call(d,"__wrapped__"),ot=Ae&&Yt.call(f,"__wrapped__");if(We||ot){var wt=We?d.value():d,at=ot?f.value():f;return E||(E=new Br),$(wt,at,g,C,E)}}return Qe?(E||(E=new Br),qF(d,f,g,C,$,E)):!1}function OF(d){return Mn(d)&&$i(d)==z}function ZO(d,f,g,C){var $=g.length,E=$,V=!C;if(d==null)return!E;for(d=an(d);$--;){var q=g[$];if(V&&q[2]?q[1]!==d[q[0]]:!(q[0]in d))return!1}for(;++$<E;){q=g[$];var J=q[0],pe=d[J],me=q[1];if(V&&q[2]){if(pe===n&&!(J in d))return!1}else{var Ae=new Br;if(C)var Qe=C(pe,me,J,d,f,Ae);if(!(Qe===n?gh(me,pe,y|O,C,Ae):Qe))return!1}}return!0}function xk(d){if(!Pn(d)||eB(d))return!1;var f=ia(d)?OL:lN;return f.test(tc(d))}function bF(d){return Mn(d)&&Zi(d)==$e}function vF(d){return Mn(d)&&$i(d)==xe}function wF(d){return Mn(d)&&Bm(d.length)&&!!gn[Zi(d)]}function kk(d){return typeof d=="function"?d:d==null?cs:typeof d=="object"?yt(d)?$k(d[0],d[1]):Tk(d):G5(d)}function qO(d){if(!bh(d))return AL(d);var f=[];for(var g in an(d))Yt.call(d,g)&&g!="constructor"&&f.push(g);return f}function SF(d){if(!Pn(d))return sB(d);var f=bh(d),g=[];for(var C in d)C=="constructor"&&(f||!Yt.call(d,C))||g.push(C);return g}function XO(d,f){return d<f}function Pk(d,f){var g=-1,C=as(d)?ae(d.length):[];return Ya(d,function($,E,V){C[++g]=f($,E,V)}),C}function Tk(d){var f=ab(d);return f.length==1&&f[0][2]?l5(f[0][0],f[0][1]):function(g){return g===d||ZO(g,d,f)}}function $k(d,f){return cb(d)&&a5(f)?l5(Oo(d),f):function(g){var C=bb(g,d);return C===n&&C===f?vb(g,d):gh(f,C,y|O)}}function Am(d,f,g,C,$){d!==f&&BO(f,function(E,V){if($||($=new Br),Pn(E))CF(d,f,V,g,Am,C,$);else{var q=C?C(db(d,V),E,V+"",d,f,$):n;q===n&&(q=E),LO(d,V,q)}},ls)}function CF(d,f,g,C,$,E,V){var q=db(d,g),J=db(f,g),pe=V.get(J);if(pe){LO(d,g,pe);return}var me=E?E(q,J,g+"",d,f,V):n,Ae=me===n;if(Ae){var Qe=yt(J),We=!Qe&&tl(J),ot=!Qe&&!We&&Ou(J);me=J,Qe||We||ot?yt(q)?me=q:Nn(q)?me=os(q):We?(Ae=!1,me=Vk(J,!0)):ot?(Ae=!1,me=jk(J,!0)):me=[]:wh(J)||nc(J)?(me=q,nc(q)?me=L5(q):(!Pn(q)||ia(q))&&(me=o5(J))):Ae=!1}Ae&&(V.set(J,me),$(me,J,C,E,V),V.delete(J)),LO(d,g,me)}function Dk(d,f){var g=d.length;if(g)return f+=f<0?g:0,na(f,g)?d[f]:n}function Mk(d,f,g){f.length?f=wn(f,function(E){return yt(E)?function(V){return Jl(V,E.length===1?E[0]:E)}:E}):f=[cs];var C=-1;f=wn(f,_s(tt()));var $=Pk(d,function(E,V,q){var J=wn(f,function(pe){return pe(E)});return{criteria:J,index:++C,value:E}});return HN($,function(E,V){return QF(E,V,g)})}function AF(d,f){return Ik(d,f,function(g,C){return vb(d,C)})}function Ik(d,f,g){for(var C=-1,$=f.length,E={};++C<$;){var V=f[C],q=Jl(d,V);g(q,V)&&yh(E,Ja(V,d),q)}return E}function xF(d){return function(f){return Jl(f,d)}}function WO(d,f,g,C){var $=C?UN:au,E=-1,V=f.length,q=d;for(d===f&&(f=os(f)),g&&(q=wn(d,_s(g)));++E<V;)for(var J=0,pe=f[E],me=g?g(pe):pe;(J=$(q,me,J,C))>-1;)q!==d&&pm.call(q,J,1),pm.call(d,J,1);return d}function Rk(d,f){for(var g=d?f.length:0,C=g-1;g--;){var $=f[g];if(g==C||$!==E){var E=$;na($)?pm.call(d,$,1):YO(d,$)}}return d}function GO(d,f){return d+ym(fk()*(f-d+1))}function kF(d,f,g,C){for(var $=-1,E=Kn(gm((f-d)/(g||1)),0),V=ae(E);E--;)V[C?E:++$]=d,d+=g;return V}function UO(d,f){var g="";if(!d||f<1||f>Oe)return g;do f%2&&(g+=d),f=ym(f/2),f&&(d+=d);while(f);return g}function kt(d,f){return hb(c5(d,f,cs),d+"")}function PF(d){return gk(bu(d))}function TF(d,f){var g=bu(d);return _m(g,Kl(f,0,g.length))}function yh(d,f,g,C){if(!Pn(d))return d;f=Ja(f,d);for(var $=-1,E=f.length,V=E-1,q=d;q!=null&&++$<E;){var J=Oo(f[$]),pe=g;if(J==="__proto__"||J==="constructor"||J==="prototype")return d;if($!=V){var me=q[J];pe=C?C(me,J,q):n,pe===n&&(pe=Pn(me)?me:na(f[$+1])?[]:{})}fh(q,J,pe),q=q[J]}return d}var _k=Om?function(d,f){return Om.set(d,f),d}:cs,$F=mm?function(d,f){return mm(d,"toString",{configurable:!0,enumerable:!1,value:Sb(f),writable:!0})}:cs;function DF(d){return _m(bu(d))}function hr(d,f,g){var C=-1,$=d.length;f<0&&(f=-f>$?0:$+f),g=g>$?$:g,g<0&&(g+=$),$=f>g?0:g-f>>>0,f>>>=0;for(var E=ae($);++C<$;)E[C]=d[C+f];return E}function MF(d,f){var g;return Ya(d,function(C,$,E){return g=f(C,$,E),!g}),!!g}function xm(d,f,g){var C=0,$=d==null?C:d.length;if(typeof f=="number"&&f===f&&$<=Qt){for(;C<$;){var E=C+$>>>1,V=d[E];V!==null&&!Qs(V)&&(g?V<=f:V<f)?C=E+1:$=E}return $}return HO(d,f,cs,g)}function HO(d,f,g,C){var $=0,E=d==null?0:d.length;if(E===0)return 0;f=g(f);for(var V=f!==f,q=f===null,J=Qs(f),pe=f===n;$<E;){var me=ym(($+E)/2),Ae=g(d[me]),Qe=Ae!==n,We=Ae===null,ot=Ae===Ae,wt=Qs(Ae);if(V)var at=C||ot;else pe?at=ot&&(C||Qe):q?at=ot&&Qe&&(C||!We):J?at=ot&&Qe&&!We&&(C||!wt):We||wt?at=!1:at=C?Ae<=f:Ae<f;at?$=me+1:E=me}return Ti(E,ut)}function Ek(d,f){for(var g=-1,C=d.length,$=0,E=[];++g<C;){var V=d[g],q=f?f(V):V;if(!g||!Vr(q,J)){var J=q;E[$++]=V===0?0:V}}return E}function Qk(d){return typeof d=="number"?d:Qs(d)?dt:+d}function Es(d){if(typeof d=="string")return d;if(yt(d))return wn(d,Es)+"";if(Qs(d))return pk?pk.call(d):"";var f=d+"";return f=="0"&&1/d==-Se?"-0":f}function Ka(d,f,g){var C=-1,$=sm,E=d.length,V=!0,q=[],J=q;if(g)V=!1,$=xO;else if(E>=s){var pe=f?null:jF(d);if(pe)return om(pe);V=!1,$=ah,J=new Yl}else J=f?[]:q;e:for(;++C<E;){var me=d[C],Ae=f?f(me):me;if(me=g||me!==0?me:0,V&&Ae===Ae){for(var Qe=J.length;Qe--;)if(J[Qe]===Ae)continue e;f&&J.push(Ae),q.push(me)}else $(J,Ae,g)||(J!==q&&J.push(Ae),q.push(me))}return q}function YO(d,f){f=Ja(f,d);var g=-1,C=f.length;if(!C)return!0;for(var $=d==null||typeof d!="object"&&typeof d!="function";++g<C;){var E=f[g];if(typeof E=="string"){if(E==="__proto__"&&!Yt.call(d,"__proto__"))return!1;if(E==="constructor"&&g+1<C&&typeof f[g+1]=="string"&&f[g+1]==="prototype"){if($&&g===0)continue;return!1}}}var V=u5(d,f);return V==null||delete V[Oo(fr(f))]}function Nk(d,f,g,C){return yh(d,f,g(Jl(d,f)),C)}function km(d,f,g,C){for(var $=d.length,E=C?$:-1;(C?E--:++E<$)&&f(d[E],E,d););return g?hr(d,C?0:E,C?E+1:$):hr(d,C?E+1:0,C?$:E)}function Lk(d,f){var g=d;return g instanceof Rt&&(g=g.value()),kO(f,function(C,$){return $.func.apply($.thisArg,Ga([C],$.args))},g)}function KO(d,f,g){var C=d.length;if(C<2)return C?Ka(d[0]):[];for(var $=-1,E=ae(C);++$<C;)for(var V=d[$],q=-1;++q<C;)q!=$&&(E[$]=ph(E[$]||V,d[q],f,g));return Ka(mi(E,1),f,g)}function Fk(d,f,g){for(var C=-1,$=d.length,E=f.length,V={};++C<$;){var q=C<E?f[C]:n;g(V,d[C],q)}return V}function JO(d){return Nn(d)?d:[]}function eb(d){return typeof d=="function"?d:cs}function Ja(d,f){return yt(d)?d:cb(d,f)?[d]:p5(Kt(d))}var IF=kt;function el(d,f,g){var C=d.length;return g=g===n?C:g,!f&&g>=C?d:hr(d,f,g)}var Bk=bL||function(d){return pi.clearTimeout(d)};function Vk(d,f){if(f)return d.slice();var g=d.length,C=lk?lk(g):new d.constructor(g);return d.copy(C),C}function tb(d){var f=new d.constructor(d.byteLength);return new hm(f).set(new hm(d)),f}function RF(d,f){var g=f?tb(d.buffer):d.buffer;return new d.constructor(g,d.byteOffset,d.byteLength)}function _F(d){var f=new d.constructor(d.source,Ax.exec(d));return f.lastIndex=d.lastIndex,f}function EF(d){return hh?an(hh.call(d)):{}}function jk(d,f){var g=f?tb(d.buffer):d.buffer;return new d.constructor(g,d.byteOffset,d.length)}function zk(d,f){if(d!==f){var g=d!==n,C=d===null,$=d===d,E=Qs(d),V=f!==n,q=f===null,J=f===f,pe=Qs(f);if(!q&&!pe&&!E&&d>f||E&&V&&J&&!q&&!pe||C&&V&&J||!g&&J||!$)return 1;if(!C&&!E&&!pe&&d<f||pe&&g&&$&&!C&&!E||q&&g&&$||!V&&$||!J)return-1}return 0}function QF(d,f,g){for(var C=-1,$=d.criteria,E=f.criteria,V=$.length,q=g.length;++C<V;){var J=zk($[C],E[C]);if(J){if(C>=q)return J;var pe=g[C];return J*(pe=="desc"?-1:1)}}return d.index-f.index}function Zk(d,f,g,C){for(var $=-1,E=d.length,V=g.length,q=-1,J=f.length,pe=Kn(E-V,0),me=ae(J+pe),Ae=!C;++q<J;)me[q]=f[q];for(;++$<V;)(Ae||$<E)&&(me[g[$]]=d[$]);for(;pe--;)me[q++]=d[$++];return me}function qk(d,f,g,C){for(var $=-1,E=d.length,V=-1,q=g.length,J=-1,pe=f.length,me=Kn(E-q,0),Ae=ae(me+pe),Qe=!C;++$<me;)Ae[$]=d[$];for(var We=$;++J<pe;)Ae[We+J]=f[J];for(;++V<q;)(Qe||$<E)&&(Ae[We+g[V]]=d[$++]);return Ae}function os(d,f){var g=-1,C=d.length;for(f||(f=ae(C));++g<C;)f[g]=d[g];return f}function yo(d,f,g,C){var $=!g;g||(g={});for(var E=-1,V=f.length;++E<V;){var q=f[E],J=C?C(g[q],d[q],q,g,d):n;J===n&&(J=d[q]),$?Jo(g,q,J):fh(g,q,J)}return g}function NF(d,f){return yo(d,lb(d),f)}function LF(d,f){return yo(d,s5(d),f)}function Pm(d,f){return function(g,C){var $=yt(g)?zN:oF,E=f?f():{};return $(g,d,tt(C,2),E)}}function mu(d){return kt(function(f,g){var C=-1,$=g.length,E=$>1?g[$-1]:n,V=$>2?g[2]:n;for(E=d.length>3&&typeof E=="function"?($--,E):n,V&&qi(g[0],g[1],V)&&(E=$<3?n:E,$=1),f=an(f);++C<$;){var q=g[C];q&&d(f,q,C,E)}return f})}function Xk(d,f){return function(g,C){if(g==null)return g;if(!as(g))return d(g,C);for(var $=g.length,E=f?$:-1,V=an(g);(f?E--:++E<$)&&C(V[E],E,V)!==!1;);return g}}function Wk(d){return function(f,g,C){for(var $=-1,E=an(f),V=C(f),q=V.length;q--;){var J=V[d?q:++$];if(g(E[J],J,E)===!1)break}return f}}function FF(d,f,g){var C=f&S,$=Oh(d);function E(){var V=this&&this!==pi&&this instanceof E?$:d;return V.apply(C?g:this,arguments)}return E}function Gk(d){return function(f){f=Kt(f);var g=lu(f)?Fr(f):n,C=g?g[0]:f.charAt(0),$=g?el(g,1).join(""):f.slice(1);return C[d]()+$}}function gu(d){return function(f){return kO(X5(q5(f).replace($N,"")),d,"")}}function Oh(d){return function(){var f=arguments;switch(f.length){case 0:return new d;case 1:return new d(f[0]);case 2:return new d(f[0],f[1]);case 3:return new d(f[0],f[1],f[2]);case 4:return new d(f[0],f[1],f[2],f[3]);case 5:return new d(f[0],f[1],f[2],f[3],f[4]);case 6:return new d(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new d(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var g=pu(d.prototype),C=d.apply(g,f);return Pn(C)?C:g}}function BF(d,f,g){var C=Oh(d);function $(){for(var E=arguments.length,V=ae(E),q=E,J=yu($);q--;)V[q]=arguments[q];var pe=E<3&&V[0]!==J&&V[E-1]!==J?[]:Ua(V,J);if(E-=pe.length,E<g)return Jk(d,f,Tm,$.placeholder,n,V,pe,n,n,g-E);var me=this&&this!==pi&&this instanceof $?C:d;return Rs(me,this,V)}return $}function Uk(d){return function(f,g,C){var $=an(f);if(!as(f)){var E=tt(g,3);f=oi(f),g=function(q){return E($[q],q,$)}}var V=d(f,g,C);return V>-1?$[E?f[V]:V]:n}}function Hk(d){return ta(function(f){var g=f.length,C=g,$=ur.prototype.thru;for(d&&f.reverse();C--;){var E=f[C];if(typeof E!="function")throw new cr(o);if($&&!V&&Im(E)=="wrapper")var V=new ur([],!0)}for(C=V?C:g;++C<g;){E=f[C];var q=Im(E),J=q=="wrapper"?ob(E):n;J&&ub(J[0])&&J[1]==(j|k|M|G)&&!J[4].length&&J[9]==1?V=V[Im(J[0])].apply(V,J[3]):V=E.length==1&&ub(E)?V[q]():V.thru(E)}return function(){var pe=arguments,me=pe[0];if(V&&pe.length==1&&yt(me))return V.plant(me).value();for(var Ae=0,Qe=g?f[Ae].apply(this,pe):me;++Ae<g;)Qe=f[Ae].call(this,Qe);return Qe}})}function Tm(d,f,g,C,$,E,V,q,J,pe){var me=f&j,Ae=f&S,Qe=f&x,We=f&(k|D),ot=f&Z,wt=Qe?n:Oh(d);function at(){for(var $t=arguments.length,Nt=ae($t),Ns=$t;Ns--;)Nt[Ns]=arguments[Ns];if(We)var Xi=yu(at),Ls=KN(Nt,Xi);if(C&&(Nt=Zk(Nt,C,$,We)),E&&(Nt=qk(Nt,E,V,We)),$t-=Ls,We&&$t<pe){var Ln=Ua(Nt,Xi);return Jk(d,f,Tm,at.placeholder,g,Nt,Ln,q,J,pe-$t)}var jr=Ae?g:this,ra=Qe?jr[d]:d;return $t=Nt.length,q?Nt=oB(Nt,q):ot&&$t>1&&Nt.reverse(),me&&J<$t&&(Nt.length=J),this&&this!==pi&&this instanceof at&&(ra=wt||Oh(ra)),ra.apply(jr,Nt)}return at}function Yk(d,f){return function(g,C){return pF(g,d,f(C),{})}}function $m(d,f){return function(g,C){var $;if(g===n&&C===n)return f;if(g!==n&&($=g),C!==n){if($===n)return C;typeof g=="string"||typeof C=="string"?(g=Es(g),C=Es(C)):(g=Qk(g),C=Qk(C)),$=d(g,C)}return $}}function nb(d){return ta(function(f){return f=wn(f,_s(tt())),kt(function(g){var C=this;return d(f,function($){return Rs($,C,g)})})})}function Dm(d,f){f=f===n?" ":Es(f);var g=f.length;if(g<2)return g?UO(f,d):f;var C=UO(f,gm(d/cu(f)));return lu(f)?el(Fr(C),0,d).join(""):C.slice(0,d)}function VF(d,f,g,C){var $=f&S,E=Oh(d);function V(){for(var q=-1,J=arguments.length,pe=-1,me=C.length,Ae=ae(me+J),Qe=this&&this!==pi&&this instanceof V?E:d;++pe<me;)Ae[pe]=C[pe];for(;J--;)Ae[pe++]=arguments[++q];return Rs(Qe,$?g:this,Ae)}return V}function Kk(d){return function(f,g,C){return C&&typeof C!="number"&&qi(f,g,C)&&(g=C=n),f=sa(f),g===n?(g=f,f=0):g=sa(g),C=C===n?f<g?1:-1:sa(C),kF(f,g,C,d)}}function Mm(d){return function(f,g){return typeof f=="string"&&typeof g=="string"||(f=pr(f),g=pr(g)),d(f,g)}}function Jk(d,f,g,C,$,E,V,q,J,pe){var me=f&k,Ae=me?V:n,Qe=me?n:V,We=me?E:n,ot=me?n:E;f|=me?M:L,f&=~(me?L:M),f&T||(f&=-4);var wt=[d,f,$,We,Ae,ot,Qe,q,J,pe],at=g.apply(n,wt);return ub(d)&&d5(at,wt),at.placeholder=C,h5(at,d,f)}function ib(d){var f=Yn[d];return function(g,C){if(g=pr(g),C=C==null?0:Ti(bt(C),292),C&&hk(g)){var $=(Kt(g)+"e").split("e"),E=f($[0]+"e"+(+$[1]+C));return $=(Kt(E)+"e").split("e"),+($[0]+"e"+(+$[1]-C))}return f(g)}}var jF=hu&&1/om(new hu([,-0]))[1]==Se?function(d){return new hu(d)}:xb;function e5(d){return function(f){var g=$i(f);return g==z?RO(f):g==xe?rL(f):YN(f,d(f))}}function ea(d,f,g,C,$,E,V,q){var J=f&x;if(!J&&typeof d!="function")throw new cr(o);var pe=C?C.length:0;if(pe||(f&=-97,C=$=n),V=V===n?V:Kn(bt(V),0),q=q===n?q:bt(q),pe-=$?$.length:0,f&L){var me=C,Ae=$;C=$=n}var Qe=J?n:ob(d),We=[d,f,g,C,$,me,Ae,E,V,q];if(Qe&&iB(We,Qe),d=We[0],f=We[1],g=We[2],C=We[3],$=We[4],q=We[9]=We[9]===n?J?0:d.length:Kn(We[9]-pe,0),!q&&f&(k|D)&&(f&=-25),!f||f==S)var ot=FF(d,f,g);else f==k||f==D?ot=BF(d,f,q):(f==M||f==(S|M))&&!$.length?ot=VF(d,f,g,C):ot=Tm.apply(n,We);var wt=Qe?_k:d5;return h5(wt(ot,We),d,f)}function t5(d,f,g,C){return d===n||Vr(d,du[g])&&!Yt.call(C,g)?f:d}function n5(d,f,g,C,$,E){return Pn(d)&&Pn(f)&&(E.set(f,d),Am(d,f,n,n5,E),E.delete(f)),d}function zF(d){return wh(d)?n:d}function i5(d,f,g,C,$,E){var V=g&y,q=d.length,J=f.length;if(q!=J&&!(V&&J>q))return!1;var pe=E.get(d),me=E.get(f);if(pe&&me)return pe==f&&me==d;var Ae=-1,Qe=!0,We=g&O?new Yl:n;for(E.set(d,f),E.set(f,d);++Ae<q;){var ot=d[Ae],wt=f[Ae];if(C)var at=V?C(wt,ot,Ae,f,d,E):C(ot,wt,Ae,d,f,E);if(at!==n){if(at)continue;Qe=!1;break}if(We){if(!PO(f,function($t,Nt){if(!ah(We,Nt)&&(ot===$t||$(ot,$t,g,C,E)))return We.push(Nt)})){Qe=!1;break}}else if(!(ot===wt||$(ot,wt,g,C,E))){Qe=!1;break}}return E.delete(d),E.delete(f),Qe}function ZF(d,f,g,C,$,E,V){switch(g){case It:if(d.byteLength!=f.byteLength||d.byteOffset!=f.byteOffset)return!1;d=d.buffer,f=f.buffer;case gt:return!(d.byteLength!=f.byteLength||!E(new hm(d),new hm(f)));case De:case re:case se:return Vr(+d,+f);case ct:return d.name==f.name&&d.message==f.message;case $e:case be:return d==f+"";case z:var q=RO;case xe:var J=C&y;if(q||(q=om),d.size!=f.size&&!J)return!1;var pe=V.get(d);if(pe)return pe==f;C|=O,V.set(d,f);var me=i5(q(d),q(f),C,$,E,V);return V.delete(d),me;case Ye:if(hh)return hh.call(d)==hh.call(f)}return!1}function qF(d,f,g,C,$,E){var V=g&y,q=sb(d),J=q.length,pe=sb(f),me=pe.length;if(J!=me&&!V)return!1;for(var Ae=J;Ae--;){var Qe=q[Ae];if(!(V?Qe in f:Yt.call(f,Qe)))return!1}var We=E.get(d),ot=E.get(f);if(We&&ot)return We==f&&ot==d;var wt=!0;E.set(d,f),E.set(f,d);for(var at=V;++Ae<J;){Qe=q[Ae];var $t=d[Qe],Nt=f[Qe];if(C)var Ns=V?C(Nt,$t,Qe,f,d,E):C($t,Nt,Qe,d,f,E);if(!(Ns===n?$t===Nt||$($t,Nt,g,C,E):Ns)){wt=!1;break}at||(at=Qe=="constructor")}if(wt&&!at){var Xi=d.constructor,Ls=f.constructor;Xi!=Ls&&"constructor"in d&&"constructor"in f&&!(typeof Xi=="function"&&Xi instanceof Xi&&typeof Ls=="function"&&Ls instanceof Ls)&&(wt=!1)}return E.delete(d),E.delete(f),wt}function ta(d){return hb(c5(d,n,O5),d+"")}function sb(d){return Ck(d,oi,lb)}function rb(d){return Ck(d,ls,s5)}var ob=Om?function(d){return Om.get(d)}:xb;function Im(d){for(var f=d.name+"",g=fu[f],C=Yt.call(fu,f)?g.length:0;C--;){var $=g[C],E=$.func;if(E==null||E==d)return $.name}return f}function yu(d){var f=Yt.call(I,"placeholder")?I:d;return f.placeholder}function tt(){var d=I.iteratee||Cb;return d=d===Cb?kk:d,arguments.length?d(arguments[0],arguments[1]):d}function Rm(d,f){var g=d.__data__;return JF(f)?g[typeof f=="string"?"string":"hash"]:g.map}function ab(d){for(var f=oi(d),g=f.length;g--;){var C=f[g],$=d[C];f[g]=[C,$,a5($)]}return f}function ec(d,f){var g=nL(d,f);return xk(g)?g:n}function XF(d){var f=Yt.call(d,Ul),g=d[Ul];try{d[Ul]=n;var C=!0}catch{}var $=um.call(d);return C&&(f?d[Ul]=g:delete d[Ul]),$}var lb=EO?function(d){return d==null?[]:(d=an(d),Wa(EO(d),function(f){return uk.call(d,f)}))}:kb,s5=EO?function(d){for(var f=[];d;)Ga(f,lb(d)),d=fm(d);return f}:kb,$i=Zi;(QO&&$i(new QO(new ArrayBuffer(1)))!=It||ch&&$i(new ch)!=z||NO&&$i(NO.resolve())!=Ce||hu&&$i(new hu)!=xe||uh&&$i(new uh)!=Xe)&&($i=function(d){var f=Zi(d),g=f==ce?d.constructor:n,C=g?tc(g):"";if(C)switch(C){case TL:return It;case $L:return z;case DL:return Ce;case ML:return xe;case IL:return Xe}return f});function WF(d,f,g){for(var C=-1,$=g.length;++C<$;){var E=g[C],V=E.size;switch(E.type){case"drop":d+=V;break;case"dropRight":f-=V;break;case"take":f=Ti(f,d+V);break;case"takeRight":d=Kn(d,f-V);break}}return{start:d,end:f}}function GF(d){var f=d.match(eN);return f?f[1].split(tN):[]}function r5(d,f,g){f=Ja(f,d);for(var C=-1,$=f.length,E=!1;++C<$;){var V=Oo(f[C]);if(!(E=d!=null&&g(d,V)))break;d=d[V]}return E||++C!=$?E:($=d==null?0:d.length,!!$&&Bm($)&&na(V,$)&&(yt(d)||nc(d)))}function UF(d){var f=d.length,g=new d.constructor(f);return f&&typeof d[0]=="string"&&Yt.call(d,"index")&&(g.index=d.index,g.input=d.input),g}function o5(d){return typeof d.constructor=="function"&&!bh(d)?pu(fm(d)):{}}function HF(d,f,g){var C=d.constructor;switch(f){case gt:return tb(d);case De:case re:return new C(+d);case It:return RF(d,g);case jt:case ri:case Zn:case zi:case hi:case Ho:case ru:case fi:case rs:return jk(d,g);case z:return new C;case se:case be:return new C(d);case $e:return _F(d);case xe:return new C;case Ye:return EF(d)}}function YF(d,f){var g=f.length;if(!g)return d;var C=g-1;return f[C]=(g>1?"& ":"")+f[C],f=f.join(g>2?", ":" "),d.replace(JQ,`{
/* [wrapped with `+f+`] */
`)}function KF(d){return yt(d)||nc(d)||!!(dk&&d&&d[dk])}function na(d,f){var g=typeof d;return f=f??Oe,!!f&&(g=="number"||g!="symbol"&&uN.test(d))&&d>-1&&d%1==0&&d<f}function qi(d,f,g){if(!Pn(g))return!1;var C=typeof f;return(C=="number"?as(g)&&na(f,g.length):C=="string"&&f in g)?Vr(g[f],d):!1}function cb(d,f){if(yt(d))return!1;var g=typeof d;return g=="number"||g=="symbol"||g=="boolean"||d==null||Qs(d)?!0:UQ.test(d)||!GQ.test(d)||f!=null&&d in an(f)}function JF(d){var f=typeof d;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?d!=="__proto__":d===null}function ub(d){var f=Im(d),g=I[f];if(typeof g!="function"||!(f in Rt.prototype))return!1;if(d===g)return!0;var C=ob(g);return!!C&&d===C[0]}function eB(d){return!!ak&&ak in d}var tB=lm?ia:Pb;function bh(d){var f=d&&d.constructor,g=typeof f=="function"&&f.prototype||du;return d===g}function a5(d){return d===d&&!Pn(d)}function l5(d,f){return function(g){return g==null?!1:g[d]===f&&(f!==n||d in an(g))}}function nB(d){var f=Lm(d,function(C){return g.size===c&&g.clear(),C}),g=f.cache;return f}function iB(d,f){var g=d[1],C=f[1],$=g|C,E=$<(S|x|j),V=C==j&&g==k||C==j&&g==G&&d[7].length<=f[8]||C==(j|G)&&f[7].length<=f[8]&&g==k;if(!(E||V))return d;C&S&&(d[2]=f[2],$|=g&S?0:T);var q=f[3];if(q){var J=d[3];d[3]=J?Zk(J,q,f[4]):q,d[4]=J?Ua(d[3],u):f[4]}return q=f[5],q&&(J=d[5],d[5]=J?qk(J,q,f[6]):q,d[6]=J?Ua(d[5],u):f[6]),q=f[7],q&&(d[7]=q),C&j&&(d[8]=d[8]==null?f[8]:Ti(d[8],f[8])),d[9]==null&&(d[9]=f[9]),d[0]=f[0],d[1]=$,d}function sB(d){var f=[];if(d!=null)for(var g in an(d))f.push(g);return f}function rB(d){return um.call(d)}function c5(d,f,g){return f=Kn(f===n?d.length-1:f,0),function(){for(var C=arguments,$=-1,E=Kn(C.length-f,0),V=ae(E);++$<E;)V[$]=C[f+$];$=-1;for(var q=ae(f+1);++$<f;)q[$]=C[$];return q[f]=g(V),Rs(d,this,q)}}function u5(d,f){return f.length<2?d:Jl(d,hr(f,0,-1))}function oB(d,f){for(var g=d.length,C=Ti(f.length,g),$=os(d);C--;){var E=f[C];d[C]=na(E,g)?$[E]:n}return d}function db(d,f){if(!(f==="constructor"&&typeof d[f]=="function")&&f!="__proto__")return d[f]}var d5=f5(_k),vh=wL||function(d,f){return pi.setTimeout(d,f)},hb=f5($F);function h5(d,f,g){var C=f+"";return hb(d,YF(C,aB(GF(C),g)))}function f5(d){var f=0,g=0;return function(){var C=xL(),$=oe-(C-g);if(g=C,$>0){if(++f>=W)return arguments[0]}else f=0;return d.apply(n,arguments)}}function _m(d,f){var g=-1,C=d.length,$=C-1;for(f=f===n?C:f;++g<f;){var E=GO(g,$),V=d[E];d[E]=d[g],d[g]=V}return d.length=f,d}var p5=nB(function(d){var f=[];return d.charCodeAt(0)===46&&f.push(""),d.replace(HQ,function(g,C,$,E){f.push($?E.replace(sN,"$1"):C||g)}),f});function Oo(d){if(typeof d=="string"||Qs(d))return d;var f=d+"";return f=="0"&&1/d==-Se?"-0":f}function tc(d){if(d!=null){try{return cm.call(d)}catch{}try{return d+""}catch{}}return""}function aB(d,f){return lr(Pt,function(g){var C="_."+g[0];f&g[1]&&!sm(d,C)&&d.push(C)}),d.sort()}function m5(d){if(d instanceof Rt)return d.clone();var f=new ur(d.__wrapped__,d.__chain__);return f.__actions__=os(d.__actions__),f.__index__=d.__index__,f.__values__=d.__values__,f}function lB(d,f,g){(g?qi(d,f,g):f===n)?f=1:f=Kn(bt(f),0);var C=d==null?0:d.length;if(!C||f<1)return[];for(var $=0,E=0,V=ae(gm(C/f));$<C;)V[E++]=hr(d,$,$+=f);return V}function cB(d){for(var f=-1,g=d==null?0:d.length,C=0,$=[];++f<g;){var E=d[f];E&&($[C++]=E)}return $}function uB(){var d=arguments.length;if(!d)return[];for(var f=ae(d-1),g=arguments[0],C=d;C--;)f[C-1]=arguments[C];return Ga(yt(g)?os(g):[g],mi(f,1))}var dB=kt(function(d,f){return Nn(d)?ph(d,mi(f,1,Nn,!0)):[]}),hB=kt(function(d,f){var g=fr(f);return Nn(g)&&(g=n),Nn(d)?ph(d,mi(f,1,Nn,!0),tt(g,2)):[]}),fB=kt(function(d,f){var g=fr(f);return Nn(g)&&(g=n),Nn(d)?ph(d,mi(f,1,Nn,!0),n,g):[]});function pB(d,f,g){var C=d==null?0:d.length;return C?(f=g||f===n?1:bt(f),hr(d,f<0?0:f,C)):[]}function mB(d,f,g){var C=d==null?0:d.length;return C?(f=g||f===n?1:bt(f),f=C-f,hr(d,0,f<0?0:f)):[]}function gB(d,f){return d&&d.length?km(d,tt(f,3),!0,!0):[]}function yB(d,f){return d&&d.length?km(d,tt(f,3),!0):[]}function OB(d,f,g,C){var $=d==null?0:d.length;return $?(g&&typeof g!="number"&&qi(d,f,g)&&(g=0,C=$),uF(d,f,g,C)):[]}function g5(d,f,g){var C=d==null?0:d.length;if(!C)return-1;var $=g==null?0:bt(g);return $<0&&($=Kn(C+$,0)),rm(d,tt(f,3),$)}function y5(d,f,g){var C=d==null?0:d.length;if(!C)return-1;var $=C-1;return g!==n&&($=bt(g),$=g<0?Kn(C+$,0):Ti($,C-1)),rm(d,tt(f,3),$,!0)}function O5(d){var f=d==null?0:d.length;return f?mi(d,1):[]}function bB(d){var f=d==null?0:d.length;return f?mi(d,Se):[]}function vB(d,f){var g=d==null?0:d.length;return g?(f=f===n?1:bt(f),mi(d,f)):[]}function wB(d){for(var f=-1,g=d==null?0:d.length,C={};++f<g;){var $=d[f];C[$[0]]=$[1]}return C}function b5(d){return d&&d.length?d[0]:n}function SB(d,f,g){var C=d==null?0:d.length;if(!C)return-1;var $=g==null?0:bt(g);return $<0&&($=Kn(C+$,0)),au(d,f,$)}function CB(d){var f=d==null?0:d.length;return f?hr(d,0,-1):[]}var AB=kt(function(d){var f=wn(d,JO);return f.length&&f[0]===d[0]?zO(f):[]}),xB=kt(function(d){var f=fr(d),g=wn(d,JO);return f===fr(g)?f=n:g.pop(),g.length&&g[0]===d[0]?zO(g,tt(f,2)):[]}),kB=kt(function(d){var f=fr(d),g=wn(d,JO);return f=typeof f=="function"?f:n,f&&g.pop(),g.length&&g[0]===d[0]?zO(g,n,f):[]});function PB(d,f){return d==null?"":CL.call(d,f)}function fr(d){var f=d==null?0:d.length;return f?d[f-1]:n}function TB(d,f,g){var C=d==null?0:d.length;if(!C)return-1;var $=C;return g!==n&&($=bt(g),$=$<0?Kn(C+$,0):Ti($,C-1)),f===f?aL(d,f,$):rm(d,Jx,$,!0)}function $B(d,f){return d&&d.length?Dk(d,bt(f)):n}var DB=kt(v5);function v5(d,f){return d&&d.length&&f&&f.length?WO(d,f):d}function MB(d,f,g){return d&&d.length&&f&&f.length?WO(d,f,tt(g,2)):d}function IB(d,f,g){return d&&d.length&&f&&f.length?WO(d,f,n,g):d}var RB=ta(function(d,f){var g=d==null?0:d.length,C=FO(d,f);return Rk(d,wn(f,function($){return na($,g)?+$:$}).sort(zk)),C});function _B(d,f){var g=[];if(!(d&&d.length))return g;var C=-1,$=[],E=d.length;for(f=tt(f,3);++C<E;){var V=d[C];f(V,C,d)&&(g.push(V),$.push(C))}return Rk(d,$),g}function fb(d){return d==null?d:PL.call(d)}function EB(d,f,g){var C=d==null?0:d.length;return C?(g&&typeof g!="number"&&qi(d,f,g)?(f=0,g=C):(f=f==null?0:bt(f),g=g===n?C:bt(g)),hr(d,f,g)):[]}function QB(d,f){return xm(d,f)}function NB(d,f,g){return HO(d,f,tt(g,2))}function LB(d,f){var g=d==null?0:d.length;if(g){var C=xm(d,f);if(C<g&&Vr(d[C],f))return C}return-1}function FB(d,f){return xm(d,f,!0)}function BB(d,f,g){return HO(d,f,tt(g,2),!0)}function VB(d,f){var g=d==null?0:d.length;if(g){var C=xm(d,f,!0)-1;if(Vr(d[C],f))return C}return-1}function jB(d){return d&&d.length?Ek(d):[]}function zB(d,f){return d&&d.length?Ek(d,tt(f,2)):[]}function ZB(d){var f=d==null?0:d.length;return f?hr(d,1,f):[]}function qB(d,f,g){return d&&d.length?(f=g||f===n?1:bt(f),hr(d,0,f<0?0:f)):[]}function XB(d,f,g){var C=d==null?0:d.length;return C?(f=g||f===n?1:bt(f),f=C-f,hr(d,f<0?0:f,C)):[]}function WB(d,f){return d&&d.length?km(d,tt(f,3),!1,!0):[]}function GB(d,f){return d&&d.length?km(d,tt(f,3)):[]}var UB=kt(function(d){return Ka(mi(d,1,Nn,!0))}),HB=kt(function(d){var f=fr(d);return Nn(f)&&(f=n),Ka(mi(d,1,Nn,!0),tt(f,2))}),YB=kt(function(d){var f=fr(d);return f=typeof f=="function"?f:n,Ka(mi(d,1,Nn,!0),n,f)});function KB(d){return d&&d.length?Ka(d):[]}function JB(d,f){return d&&d.length?Ka(d,tt(f,2)):[]}function eV(d,f){return f=typeof f=="function"?f:n,d&&d.length?Ka(d,n,f):[]}function pb(d){if(!(d&&d.length))return[];var f=0;return d=Wa(d,function(g){if(Nn(g))return f=Kn(g.length,f),!0}),MO(f,function(g){return wn(d,TO(g))})}function w5(d,f){if(!(d&&d.length))return[];var g=pb(d);return f==null?g:wn(g,function(C){return Rs(f,n,C)})}var tV=kt(function(d,f){return Nn(d)?ph(d,f):[]}),nV=kt(function(d){return KO(Wa(d,Nn))}),iV=kt(function(d){var f=fr(d);return Nn(f)&&(f=n),KO(Wa(d,Nn),tt(f,2))}),sV=kt(function(d){var f=fr(d);return f=typeof f=="function"?f:n,KO(Wa(d,Nn),n,f)}),rV=kt(pb);function oV(d,f){return Fk(d||[],f||[],fh)}function aV(d,f){return Fk(d||[],f||[],yh)}var lV=kt(function(d){var f=d.length,g=f>1?d[f-1]:n;return g=typeof g=="function"?(d.pop(),g):n,w5(d,g)});function S5(d){var f=I(d);return f.__chain__=!0,f}function cV(d,f){return f(d),d}function Em(d,f){return f(d)}var uV=ta(function(d){var f=d.length,g=f?d[0]:0,C=this.__wrapped__,$=function(E){return FO(E,d)};return f>1||this.__actions__.length||!(C instanceof Rt)||!na(g)?this.thru($):(C=C.slice(g,+g+(f?1:0)),C.__actions__.push({func:Em,args:[$],thisArg:n}),new ur(C,this.__chain__).thru(function(E){return f&&!E.length&&E.push(n),E}))});function dV(){return S5(this)}function hV(){return new ur(this.value(),this.__chain__)}function fV(){this.__values__===n&&(this.__values__=Q5(this.value()));var d=this.__index__>=this.__values__.length,f=d?n:this.__values__[this.__index__++];return{done:d,value:f}}function pV(){return this}function mV(d){for(var f,g=this;g instanceof vm;){var C=m5(g);C.__index__=0,C.__values__=n,f?$.__wrapped__=C:f=C;var $=C;g=g.__wrapped__}return $.__wrapped__=d,f}function gV(){var d=this.__wrapped__;if(d instanceof Rt){var f=d;return this.__actions__.length&&(f=new Rt(this)),f=f.reverse(),f.__actions__.push({func:Em,args:[fb],thisArg:n}),new ur(f,this.__chain__)}return this.thru(fb)}function yV(){return Lk(this.__wrapped__,this.__actions__)}var OV=Pm(function(d,f,g){Yt.call(d,g)?++d[g]:Jo(d,g,1)});function bV(d,f,g){var C=yt(d)?Yx:cF;return g&&qi(d,f,g)&&(f=n),C(d,tt(f,3))}function vV(d,f){var g=yt(d)?Wa:wk;return g(d,tt(f,3))}var wV=Uk(g5),SV=Uk(y5);function CV(d,f){return mi(Qm(d,f),1)}function AV(d,f){return mi(Qm(d,f),Se)}function xV(d,f,g){return g=g===n?1:bt(g),mi(Qm(d,f),g)}function C5(d,f){var g=yt(d)?lr:Ya;return g(d,tt(f,3))}function A5(d,f){var g=yt(d)?ZN:vk;return g(d,tt(f,3))}var kV=Pm(function(d,f,g){Yt.call(d,g)?d[g].push(f):Jo(d,g,[f])});function PV(d,f,g,C){d=as(d)?d:bu(d),g=g&&!C?bt(g):0;var $=d.length;return g<0&&(g=Kn($+g,0)),Vm(d)?g<=$&&d.indexOf(f,g)>-1:!!$&&au(d,f,g)>-1}var TV=kt(function(d,f,g){var C=-1,$=typeof f=="function",E=as(d)?ae(d.length):[];return Ya(d,function(V){E[++C]=$?Rs(f,V,g):mh(V,f,g)}),E}),$V=Pm(function(d,f,g){Jo(d,g,f)});function Qm(d,f){var g=yt(d)?wn:Pk;return g(d,tt(f,3))}function DV(d,f,g,C){return d==null?[]:(yt(f)||(f=f==null?[]:[f]),g=C?n:g,yt(g)||(g=g==null?[]:[g]),Mk(d,f,g))}var MV=Pm(function(d,f,g){d[g?0:1].push(f)},function(){return[[],[]]});function IV(d,f,g){var C=yt(d)?kO:tk,$=arguments.length<3;return C(d,tt(f,4),g,$,Ya)}function RV(d,f,g){var C=yt(d)?qN:tk,$=arguments.length<3;return C(d,tt(f,4),g,$,vk)}function _V(d,f){var g=yt(d)?Wa:wk;return g(d,Fm(tt(f,3)))}function EV(d){var f=yt(d)?gk:PF;return f(d)}function QV(d,f,g){(g?qi(d,f,g):f===n)?f=1:f=bt(f);var C=yt(d)?sF:TF;return C(d,f)}function NV(d){var f=yt(d)?rF:DF;return f(d)}function LV(d){if(d==null)return 0;if(as(d))return Vm(d)?cu(d):d.length;var f=$i(d);return f==z||f==xe?d.size:qO(d).length}function FV(d,f,g){var C=yt(d)?PO:MF;return g&&qi(d,f,g)&&(f=n),C(d,tt(f,3))}var BV=kt(function(d,f){if(d==null)return[];var g=f.length;return g>1&&qi(d,f[0],f[1])?f=[]:g>2&&qi(f[0],f[1],f[2])&&(f=[f[0]]),Mk(d,mi(f,1),[])}),Nm=vL||function(){return pi.Date.now()};function VV(d,f){if(typeof f!="function")throw new cr(o);return d=bt(d),function(){if(--d<1)return f.apply(this,arguments)}}function x5(d,f,g){return f=g?n:f,f=d&&f==null?d.length:f,ea(d,j,n,n,n,n,f)}function k5(d,f){var g;if(typeof f!="function")throw new cr(o);return d=bt(d),function(){return--d>0&&(g=f.apply(this,arguments)),d<=1&&(f=n),g}}var mb=kt(function(d,f,g){var C=S;if(g.length){var $=Ua(g,yu(mb));C|=M}return ea(d,C,f,g,$)}),P5=kt(function(d,f,g){var C=S|x;if(g.length){var $=Ua(g,yu(P5));C|=M}return ea(f,C,d,g,$)});function T5(d,f,g){f=g?n:f;var C=ea(d,k,n,n,n,n,n,f);return C.placeholder=T5.placeholder,C}function $5(d,f,g){f=g?n:f;var C=ea(d,D,n,n,n,n,n,f);return C.placeholder=$5.placeholder,C}function D5(d,f,g){var C,$,E,V,q,J,pe=0,me=!1,Ae=!1,Qe=!0;if(typeof d!="function")throw new cr(o);f=pr(f)||0,Pn(g)&&(me=!!g.leading,Ae="maxWait"in g,E=Ae?Kn(pr(g.maxWait)||0,f):E,Qe="trailing"in g?!!g.trailing:Qe);function We(Ln){var jr=C,ra=$;return C=$=n,pe=Ln,V=d.apply(ra,jr),V}function ot(Ln){return pe=Ln,q=vh($t,f),me?We(Ln):V}function wt(Ln){var jr=Ln-J,ra=Ln-pe,U5=f-jr;return Ae?Ti(U5,E-ra):U5}function at(Ln){var jr=Ln-J,ra=Ln-pe;return J===n||jr>=f||jr<0||Ae&&ra>=E}function $t(){var Ln=Nm();if(at(Ln))return Nt(Ln);q=vh($t,wt(Ln))}function Nt(Ln){return q=n,Qe&&C?We(Ln):(C=$=n,V)}function Ns(){q!==n&&Bk(q),pe=0,C=J=$=q=n}function Xi(){return q===n?V:Nt(Nm())}function Ls(){var Ln=Nm(),jr=at(Ln);if(C=arguments,$=this,J=Ln,jr){if(q===n)return ot(J);if(Ae)return Bk(q),q=vh($t,f),We(J)}return q===n&&(q=vh($t,f)),V}return Ls.cancel=Ns,Ls.flush=Xi,Ls}var jV=kt(function(d,f){return bk(d,1,f)}),zV=kt(function(d,f,g){return bk(d,pr(f)||0,g)});function ZV(d){return ea(d,Z)}function Lm(d,f){if(typeof d!="function"||f!=null&&typeof f!="function")throw new cr(o);var g=function(){var C=arguments,$=f?f.apply(this,C):C[0],E=g.cache;if(E.has($))return E.get($);var V=d.apply(this,C);return g.cache=E.set($,V)||E,V};return g.cache=new(Lm.Cache||Ko),g}Lm.Cache=Ko;function Fm(d){if(typeof d!="function")throw new cr(o);return function(){var f=arguments;switch(f.length){case 0:return!d.call(this);case 1:return!d.call(this,f[0]);case 2:return!d.call(this,f[0],f[1]);case 3:return!d.call(this,f[0],f[1],f[2])}return!d.apply(this,f)}}function qV(d){return k5(2,d)}var XV=IF(function(d,f){f=f.length==1&&yt(f[0])?wn(f[0],_s(tt())):wn(mi(f,1),_s(tt()));var g=f.length;return kt(function(C){for(var $=-1,E=Ti(C.length,g);++$<E;)C[$]=f[$].call(this,C[$]);return Rs(d,this,C)})}),gb=kt(function(d,f){var g=Ua(f,yu(gb));return ea(d,M,n,f,g)}),M5=kt(function(d,f){var g=Ua(f,yu(M5));return ea(d,L,n,f,g)}),WV=ta(function(d,f){return ea(d,G,n,n,n,f)});function GV(d,f){if(typeof d!="function")throw new cr(o);return f=f===n?f:bt(f),kt(d,f)}function UV(d,f){if(typeof d!="function")throw new cr(o);return f=f==null?0:Kn(bt(f),0),kt(function(g){var C=g[f],$=el(g,0,f);return C&&Ga($,C),Rs(d,this,$)})}function HV(d,f,g){var C=!0,$=!0;if(typeof d!="function")throw new cr(o);return Pn(g)&&(C="leading"in g?!!g.leading:C,$="trailing"in g?!!g.trailing:$),D5(d,f,{leading:C,maxWait:f,trailing:$})}function YV(d){return x5(d,1)}function KV(d,f){return gb(eb(f),d)}function JV(){if(!arguments.length)return[];var d=arguments[0];return yt(d)?d:[d]}function ej(d){return dr(d,m)}function tj(d,f){return f=typeof f=="function"?f:n,dr(d,m,f)}function nj(d){return dr(d,h|m)}function ij(d,f){return f=typeof f=="function"?f:n,dr(d,h|m,f)}function sj(d,f){return f==null||Ok(d,f,oi(f))}function Vr(d,f){return d===f||d!==d&&f!==f}var rj=Mm(jO),oj=Mm(function(d,f){return d>=f}),nc=Ak(function(){return arguments}())?Ak:function(d){return Mn(d)&&Yt.call(d,"callee")&&!uk.call(d,"callee")},yt=ae.isArray,aj=qx?_s(qx):mF;function as(d){return d!=null&&Bm(d.length)&&!ia(d)}function Nn(d){return Mn(d)&&as(d)}function lj(d){return d===!0||d===!1||Mn(d)&&Zi(d)==De}var tl=SL||Pb,cj=Xx?_s(Xx):gF;function uj(d){return Mn(d)&&d.nodeType===1&&!wh(d)}function dj(d){if(d==null)return!0;if(as(d)&&(yt(d)||typeof d=="string"||typeof d.splice=="function"||tl(d)||Ou(d)||nc(d)))return!d.length;var f=$i(d);if(f==z||f==xe)return!d.size;if(bh(d))return!qO(d).length;for(var g in d)if(Yt.call(d,g))return!1;return!0}function hj(d,f){return gh(d,f)}function fj(d,f,g){g=typeof g=="function"?g:n;var C=g?g(d,f):n;return C===n?gh(d,f,n,g):!!C}function yb(d){if(!Mn(d))return!1;var f=Zi(d);return f==ct||f==he||typeof d.message=="string"&&typeof d.name=="string"&&!wh(d)}function pj(d){return typeof d=="number"&&hk(d)}function ia(d){if(!Pn(d))return!1;var f=Zi(d);return f==Xt||f==F||f==ue||f==_e}function I5(d){return typeof d=="number"&&d==bt(d)}function Bm(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=Oe}function Pn(d){var f=typeof d;return d!=null&&(f=="object"||f=="function")}function Mn(d){return d!=null&&typeof d=="object"}var R5=Wx?_s(Wx):OF;function mj(d,f){return d===f||ZO(d,f,ab(f))}function gj(d,f,g){return g=typeof g=="function"?g:n,ZO(d,f,ab(f),g)}function yj(d){return _5(d)&&d!=+d}function Oj(d){if(tB(d))throw new ft(r);return xk(d)}function bj(d){return d===null}function vj(d){return d==null}function _5(d){return typeof d=="number"||Mn(d)&&Zi(d)==se}function wh(d){if(!Mn(d)||Zi(d)!=ce)return!1;var f=fm(d);if(f===null)return!0;var g=Yt.call(f,"constructor")&&f.constructor;return typeof g=="function"&&g instanceof g&&cm.call(g)==gL}var Ob=Gx?_s(Gx):bF;function wj(d){return I5(d)&&d>=-Oe&&d<=Oe}var E5=Ux?_s(Ux):vF;function Vm(d){return typeof d=="string"||!yt(d)&&Mn(d)&&Zi(d)==be}function Qs(d){return typeof d=="symbol"||Mn(d)&&Zi(d)==Ye}var Ou=Hx?_s(Hx):wF;function Sj(d){return d===n}function Cj(d){return Mn(d)&&$i(d)==Xe}function Aj(d){return Mn(d)&&Zi(d)==rt}var xj=Mm(XO),kj=Mm(function(d,f){return d<=f});function Q5(d){if(!d)return[];if(as(d))return Vm(d)?Fr(d):os(d);if(lh&&d[lh])return sL(d[lh]());var f=$i(d),g=f==z?RO:f==xe?om:bu;return g(d)}function sa(d){if(!d)return d===0?d:0;if(d=pr(d),d===Se||d===-Se){var f=d<0?-1:1;return f*Fe}return d===d?d:0}function bt(d){var f=sa(d),g=f%1;return f===f?g?f-g:f:0}function N5(d){return d?Kl(bt(d),0,Je):0}function pr(d){if(typeof d=="number")return d;if(Qs(d))return dt;if(Pn(d)){var f=typeof d.valueOf=="function"?d.valueOf():d;d=Pn(f)?f+"":f}if(typeof d!="string")return d===0?d:+d;d=nk(d);var g=aN.test(d);return g||cN.test(d)?VN(d.slice(2),g?2:8):oN.test(d)?dt:+d}function L5(d){return yo(d,ls(d))}function Pj(d){return d?Kl(bt(d),-Oe,Oe):d===0?d:0}function Kt(d){return d==null?"":Es(d)}var Tj=mu(function(d,f){if(bh(f)||as(f)){yo(f,oi(f),d);return}for(var g in f)Yt.call(f,g)&&fh(d,g,f[g])}),F5=mu(function(d,f){yo(f,ls(f),d)}),jm=mu(function(d,f,g,C){yo(f,ls(f),d,C)}),$j=mu(function(d,f,g,C){yo(f,oi(f),d,C)}),Dj=ta(FO);function Mj(d,f){var g=pu(d);return f==null?g:yk(g,f)}var Ij=kt(function(d,f){d=an(d);var g=-1,C=f.length,$=C>2?f[2]:n;for($&&qi(f[0],f[1],$)&&(C=1);++g<C;)for(var E=f[g],V=ls(E),q=-1,J=V.length;++q<J;){var pe=V[q],me=d[pe];(me===n||Vr(me,du[pe])&&!Yt.call(d,pe))&&(d[pe]=E[pe])}return d}),Rj=kt(function(d){return d.push(n,n5),Rs(B5,n,d)});function _j(d,f){return Kx(d,tt(f,3),go)}function Ej(d,f){return Kx(d,tt(f,3),VO)}function Qj(d,f){return d==null?d:BO(d,tt(f,3),ls)}function Nj(d,f){return d==null?d:Sk(d,tt(f,3),ls)}function Lj(d,f){return d&&go(d,tt(f,3))}function Fj(d,f){return d&&VO(d,tt(f,3))}function Bj(d){return d==null?[]:Cm(d,oi(d))}function Vj(d){return d==null?[]:Cm(d,ls(d))}function bb(d,f,g){var C=d==null?n:Jl(d,f);return C===n?g:C}function jj(d,f){return d!=null&&r5(d,f,dF)}function vb(d,f){return d!=null&&r5(d,f,hF)}var zj=Yk(function(d,f,g){f!=null&&typeof f.toString!="function"&&(f=um.call(f)),d[f]=g},Sb(cs)),Zj=Yk(function(d,f,g){f!=null&&typeof f.toString!="function"&&(f=um.call(f)),Yt.call(d,f)?d[f].push(g):d[f]=[g]},tt),qj=kt(mh);function oi(d){return as(d)?mk(d):qO(d)}function ls(d){return as(d)?mk(d,!0):SF(d)}function Xj(d,f){var g={};return f=tt(f,3),go(d,function(C,$,E){Jo(g,f(C,$,E),C)}),g}function Wj(d,f){var g={};return f=tt(f,3),go(d,function(C,$,E){Jo(g,$,f(C,$,E))}),g}var Gj=mu(function(d,f,g){Am(d,f,g)}),B5=mu(function(d,f,g,C){Am(d,f,g,C)}),Uj=ta(function(d,f){var g={};if(d==null)return g;var C=!1;f=wn(f,function(E){return E=Ja(E,d),C||(C=E.length>1),E}),yo(d,rb(d),g),C&&(g=dr(g,h|p|m,zF));for(var $=f.length;$--;)YO(g,f[$]);return g});function Hj(d,f){return V5(d,Fm(tt(f)))}var Yj=ta(function(d,f){return d==null?{}:AF(d,f)});function V5(d,f){if(d==null)return{};var g=wn(rb(d),function(C){return[C]});return f=tt(f),Ik(d,g,function(C,$){return f(C,$[0])})}function Kj(d,f,g){f=Ja(f,d);var C=-1,$=f.length;for($||($=1,d=n);++C<$;){var E=d==null?n:d[Oo(f[C])];E===n&&(C=$,E=g),d=ia(E)?E.call(d):E}return d}function Jj(d,f,g){return d==null?d:yh(d,f,g)}function ez(d,f,g,C){return C=typeof C=="function"?C:n,d==null?d:yh(d,f,g,C)}var j5=e5(oi),z5=e5(ls);function tz(d,f,g){var C=yt(d),$=C||tl(d)||Ou(d);if(f=tt(f,4),g==null){var E=d&&d.constructor;$?g=C?new E:[]:Pn(d)?g=ia(E)?pu(fm(d)):{}:g={}}return($?lr:go)(d,function(V,q,J){return f(g,V,q,J)}),g}function nz(d,f){return d==null?!0:YO(d,f)}function iz(d,f,g){return d==null?d:Nk(d,f,eb(g))}function sz(d,f,g,C){return C=typeof C=="function"?C:n,d==null?d:Nk(d,f,eb(g),C)}function bu(d){return d==null?[]:IO(d,oi(d))}function rz(d){return d==null?[]:IO(d,ls(d))}function oz(d,f,g){return g===n&&(g=f,f=n),g!==n&&(g=pr(g),g=g===g?g:0),f!==n&&(f=pr(f),f=f===f?f:0),Kl(pr(d),f,g)}function az(d,f,g){return f=sa(f),g===n?(g=f,f=0):g=sa(g),d=pr(d),fF(d,f,g)}function lz(d,f,g){if(g&&typeof g!="boolean"&&qi(d,f,g)&&(f=g=n),g===n&&(typeof f=="boolean"?(g=f,f=n):typeof d=="boolean"&&(g=d,d=n)),d===n&&f===n?(d=0,f=1):(d=sa(d),f===n?(f=d,d=0):f=sa(f)),d>f){var C=d;d=f,f=C}if(g||d%1||f%1){var $=fk();return Ti(d+$*(f-d+BN("1e-"+(($+"").length-1))),f)}return GO(d,f)}var cz=gu(function(d,f,g){return f=f.toLowerCase(),d+(g?Z5(f):f)});function Z5(d){return wb(Kt(d).toLowerCase())}function q5(d){return d=Kt(d),d&&d.replace(dN,JN).replace(DN,"")}function uz(d,f,g){d=Kt(d),f=Es(f);var C=d.length;g=g===n?C:Kl(bt(g),0,C);var $=g;return g-=f.length,g>=0&&d.slice(g,$)==f}function dz(d){return d=Kt(d),d&&qQ.test(d)?d.replace(Sx,eL):d}function hz(d){return d=Kt(d),d&&YQ.test(d)?d.replace(gO,"\\$&"):d}var fz=gu(function(d,f,g){return d+(g?"-":"")+f.toLowerCase()}),pz=gu(function(d,f,g){return d+(g?" ":"")+f.toLowerCase()}),mz=Gk("toLowerCase");function gz(d,f,g){d=Kt(d),f=bt(f);var C=f?cu(d):0;if(!f||C>=f)return d;var $=(f-C)/2;return Dm(ym($),g)+d+Dm(gm($),g)}function yz(d,f,g){d=Kt(d),f=bt(f);var C=f?cu(d):0;return f&&C<f?d+Dm(f-C,g):d}function Oz(d,f,g){d=Kt(d),f=bt(f);var C=f?cu(d):0;return f&&C<f?Dm(f-C,g)+d:d}function bz(d,f,g){return g||f==null?f=0:f&&(f=+f),kL(Kt(d).replace(yO,""),f||0)}function vz(d,f,g){return(g?qi(d,f,g):f===n)?f=1:f=bt(f),UO(Kt(d),f)}function wz(){var d=arguments,f=Kt(d[0]);return d.length<3?f:f.replace(d[1],d[2])}var Sz=gu(function(d,f,g){return d+(g?"_":"")+f.toLowerCase()});function Cz(d,f,g){return g&&typeof g!="number"&&qi(d,f,g)&&(f=g=n),g=g===n?Je:g>>>0,g?(d=Kt(d),d&&(typeof f=="string"||f!=null&&!Ob(f))&&(f=Es(f),!f&&lu(d))?el(Fr(d),0,g):d.split(f,g)):[]}var Az=gu(function(d,f,g){return d+(g?" ":"")+wb(f)});function xz(d,f,g){return d=Kt(d),g=g==null?0:Kl(bt(g),0,d.length),f=Es(f),d.slice(g,g+f.length)==f}function kz(d,f,g){var C=I.templateSettings;g&&qi(d,f,g)&&(f=n),d=Kt(d),f=jm({},f,C,t5);var $=jm({},f.imports,C.imports,t5),E=oi($),V=IO($,E),q,J,pe=0,me=f.interpolate||tm,Ae="__p += '",Qe=_O((f.escape||tm).source+"|"+me.source+"|"+(me===Cx?rN:tm).source+"|"+(f.evaluate||tm).source+"|$","g"),We="//# sourceURL="+(Yt.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++EN+"]")+`
`;d.replace(Qe,function(at,$t,Nt,Ns,Xi,Ls){return Nt||(Nt=Ns),Ae+=d.slice(pe,Ls).replace(hN,tL),$t&&(q=!0,Ae+=`' +
__e(`+$t+`) +
'`),Xi&&(J=!0,Ae+=`';
`+Xi+`;
__p += '`),Nt&&(Ae+=`' +
((__t = (`+Nt+`)) == null ? '' : __t) +
'`),pe=Ls+at.length,at}),Ae+=`';
`;var ot=Yt.call(f,"variable")&&f.variable;if(!ot)Ae=`with (obj) {
`+Ae+`
}
`;else if(iN.test(ot))throw new ft(a);Ae=(J?Ae.replace(Jp,""):Ae).replace(em,"$1").replace(zQ,"$1;"),Ae="function("+(ot||"obj")+`) {
`+(ot?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(q?", __e = _.escape":"")+(J?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ae+`return __p
}`;var wt=W5(function(){return Wt(E,We+"return "+Ae).apply(n,V)});if(wt.source=Ae,yb(wt))throw wt;return wt}function Pz(d){return Kt(d).toLowerCase()}function Tz(d){return Kt(d).toUpperCase()}function $z(d,f,g){if(d=Kt(d),d&&(g||f===n))return nk(d);if(!d||!(f=Es(f)))return d;var C=Fr(d),$=Fr(f),E=ik(C,$),V=sk(C,$)+1;return el(C,E,V).join("")}function Dz(d,f,g){if(d=Kt(d),d&&(g||f===n))return d.slice(0,ok(d)+1);if(!d||!(f=Es(f)))return d;var C=Fr(d),$=sk(C,Fr(f))+1;return el(C,0,$).join("")}function Mz(d,f,g){if(d=Kt(d),d&&(g||f===n))return d.replace(yO,"");if(!d||!(f=Es(f)))return d;var C=Fr(d),$=ik(C,Fr(f));return el(C,$).join("")}function Iz(d,f){var g=K,C=te;if(Pn(f)){var $="separator"in f?f.separator:$;g="length"in f?bt(f.length):g,C="omission"in f?Es(f.omission):C}d=Kt(d);var E=d.length;if(lu(d)){var V=Fr(d);E=V.length}if(g>=E)return d;var q=g-cu(C);if(q<1)return C;var J=V?el(V,0,q).join(""):d.slice(0,q);if($===n)return J+C;if(V&&(q+=J.length-q),Ob($)){if(d.slice(q).search($)){var pe,me=J;for($.global||($=_O($.source,Kt(Ax.exec($))+"g")),$.lastIndex=0;pe=$.exec(me);)var Ae=pe.index;J=J.slice(0,Ae===n?q:Ae)}}else if(d.indexOf(Es($),q)!=q){var Qe=J.lastIndexOf($);Qe>-1&&(J=J.slice(0,Qe))}return J+C}function Rz(d){return d=Kt(d),d&&ZQ.test(d)?d.replace(wx,lL):d}var _z=gu(function(d,f,g){return d+(g?" ":"")+f.toUpperCase()}),wb=Gk("toUpperCase");function X5(d,f,g){return d=Kt(d),f=g?n:f,f===n?iL(d)?dL(d):GN(d):d.match(f)||[]}var W5=kt(function(d,f){try{return Rs(d,n,f)}catch(g){return yb(g)?g:new ft(g)}}),Ez=ta(function(d,f){return lr(f,function(g){g=Oo(g),Jo(d,g,mb(d[g],d))}),d});function Qz(d){var f=d==null?0:d.length,g=tt();return d=f?wn(d,function(C){if(typeof C[1]!="function")throw new cr(o);return[g(C[0]),C[1]]}):[],kt(function(C){for(var $=-1;++$<f;){var E=d[$];if(Rs(E[0],this,C))return Rs(E[1],this,C)}})}function Nz(d){return lF(dr(d,h))}function Sb(d){return function(){return d}}function Lz(d,f){return d==null||d!==d?f:d}var Fz=Hk(),Bz=Hk(!0);function cs(d){return d}function Cb(d){return kk(typeof d=="function"?d:dr(d,h))}function Vz(d){return Tk(dr(d,h))}function jz(d,f){return $k(d,dr(f,h))}var zz=kt(function(d,f){return function(g){return mh(g,d,f)}}),Zz=kt(function(d,f){return function(g){return mh(d,g,f)}});function Ab(d,f,g){var C=oi(f),$=Cm(f,C);g==null&&!(Pn(f)&&($.length||!C.length))&&(g=f,f=d,d=this,$=Cm(f,oi(f)));var E=!(Pn(g)&&"chain"in g)||!!g.chain,V=ia(d);return lr($,function(q){var J=f[q];d[q]=J,V&&(d.prototype[q]=function(){var pe=this.__chain__;if(E||pe){var me=d(this.__wrapped__),Ae=me.__actions__=os(this.__actions__);return Ae.push({func:J,args:arguments,thisArg:d}),me.__chain__=pe,me}return J.apply(d,Ga([this.value()],arguments))})}),d}function qz(){return pi._===this&&(pi._=yL),this}function xb(){}function Xz(d){return d=bt(d),kt(function(f){return Dk(f,d)})}var Wz=nb(wn),Gz=nb(Yx),Uz=nb(PO);function G5(d){return cb(d)?TO(Oo(d)):xF(d)}function Hz(d){return function(f){return d==null?n:Jl(d,f)}}var Yz=Kk(),Kz=Kk(!0);function kb(){return[]}function Pb(){return!1}function Jz(){return{}}function eZ(){return""}function tZ(){return!0}function nZ(d,f){if(d=bt(d),d<1||d>Oe)return[];var g=Je,C=Ti(d,Je);f=tt(f),d-=Je;for(var $=MO(C,f);++g<d;)f(g);return $}function iZ(d){return yt(d)?wn(d,Oo):Qs(d)?[d]:os(p5(Kt(d)))}function sZ(d){var f=++mL;return Kt(d)+f}var rZ=$m(function(d,f){return d+f},0),oZ=ib("ceil"),aZ=$m(function(d,f){return d/f},1),lZ=ib("floor");function cZ(d){return d&&d.length?Sm(d,cs,jO):n}function uZ(d,f){return d&&d.length?Sm(d,tt(f,2),jO):n}function dZ(d){return ek(d,cs)}function hZ(d,f){return ek(d,tt(f,2))}function fZ(d){return d&&d.length?Sm(d,cs,XO):n}function pZ(d,f){return d&&d.length?Sm(d,tt(f,2),XO):n}var mZ=$m(function(d,f){return d*f},1),gZ=ib("round"),yZ=$m(function(d,f){return d-f},0);function OZ(d){return d&&d.length?DO(d,cs):0}function bZ(d,f){return d&&d.length?DO(d,tt(f,2)):0}return I.after=VV,I.ary=x5,I.assign=Tj,I.assignIn=F5,I.assignInWith=jm,I.assignWith=$j,I.at=Dj,I.before=k5,I.bind=mb,I.bindAll=Ez,I.bindKey=P5,I.castArray=JV,I.chain=S5,I.chunk=lB,I.compact=cB,I.concat=uB,I.cond=Qz,I.conforms=Nz,I.constant=Sb,I.countBy=OV,I.create=Mj,I.curry=T5,I.curryRight=$5,I.debounce=D5,I.defaults=Ij,I.defaultsDeep=Rj,I.defer=jV,I.delay=zV,I.difference=dB,I.differenceBy=hB,I.differenceWith=fB,I.drop=pB,I.dropRight=mB,I.dropRightWhile=gB,I.dropWhile=yB,I.fill=OB,I.filter=vV,I.flatMap=CV,I.flatMapDeep=AV,I.flatMapDepth=xV,I.flatten=O5,I.flattenDeep=bB,I.flattenDepth=vB,I.flip=ZV,I.flow=Fz,I.flowRight=Bz,I.fromPairs=wB,I.functions=Bj,I.functionsIn=Vj,I.groupBy=kV,I.initial=CB,I.intersection=AB,I.intersectionBy=xB,I.intersectionWith=kB,I.invert=zj,I.invertBy=Zj,I.invokeMap=TV,I.iteratee=Cb,I.keyBy=$V,I.keys=oi,I.keysIn=ls,I.map=Qm,I.mapKeys=Xj,I.mapValues=Wj,I.matches=Vz,I.matchesProperty=jz,I.memoize=Lm,I.merge=Gj,I.mergeWith=B5,I.method=zz,I.methodOf=Zz,I.mixin=Ab,I.negate=Fm,I.nthArg=Xz,I.omit=Uj,I.omitBy=Hj,I.once=qV,I.orderBy=DV,I.over=Wz,I.overArgs=XV,I.overEvery=Gz,I.overSome=Uz,I.partial=gb,I.partialRight=M5,I.partition=MV,I.pick=Yj,I.pickBy=V5,I.property=G5,I.propertyOf=Hz,I.pull=DB,I.pullAll=v5,I.pullAllBy=MB,I.pullAllWith=IB,I.pullAt=RB,I.range=Yz,I.rangeRight=Kz,I.rearg=WV,I.reject=_V,I.remove=_B,I.rest=GV,I.reverse=fb,I.sampleSize=QV,I.set=Jj,I.setWith=ez,I.shuffle=NV,I.slice=EB,I.sortBy=BV,I.sortedUniq=jB,I.sortedUniqBy=zB,I.split=Cz,I.spread=UV,I.tail=ZB,I.take=qB,I.takeRight=XB,I.takeRightWhile=WB,I.takeWhile=GB,I.tap=cV,I.throttle=HV,I.thru=Em,I.toArray=Q5,I.toPairs=j5,I.toPairsIn=z5,I.toPath=iZ,I.toPlainObject=L5,I.transform=tz,I.unary=YV,I.union=UB,I.unionBy=HB,I.unionWith=YB,I.uniq=KB,I.uniqBy=JB,I.uniqWith=eV,I.unset=nz,I.unzip=pb,I.unzipWith=w5,I.update=iz,I.updateWith=sz,I.values=bu,I.valuesIn=rz,I.without=tV,I.words=X5,I.wrap=KV,I.xor=nV,I.xorBy=iV,I.xorWith=sV,I.zip=rV,I.zipObject=oV,I.zipObjectDeep=aV,I.zipWith=lV,I.entries=j5,I.entriesIn=z5,I.extend=F5,I.extendWith=jm,Ab(I,I),I.add=rZ,I.attempt=W5,I.camelCase=cz,I.capitalize=Z5,I.ceil=oZ,I.clamp=oz,I.clone=ej,I.cloneDeep=nj,I.cloneDeepWith=ij,I.cloneWith=tj,I.conformsTo=sj,I.deburr=q5,I.defaultTo=Lz,I.divide=aZ,I.endsWith=uz,I.eq=Vr,I.escape=dz,I.escapeRegExp=hz,I.every=bV,I.find=wV,I.findIndex=g5,I.findKey=_j,I.findLast=SV,I.findLastIndex=y5,I.findLastKey=Ej,I.floor=lZ,I.forEach=C5,I.forEachRight=A5,I.forIn=Qj,I.forInRight=Nj,I.forOwn=Lj,I.forOwnRight=Fj,I.get=bb,I.gt=rj,I.gte=oj,I.has=jj,I.hasIn=vb,I.head=b5,I.identity=cs,I.includes=PV,I.indexOf=SB,I.inRange=az,I.invoke=qj,I.isArguments=nc,I.isArray=yt,I.isArrayBuffer=aj,I.isArrayLike=as,I.isArrayLikeObject=Nn,I.isBoolean=lj,I.isBuffer=tl,I.isDate=cj,I.isElement=uj,I.isEmpty=dj,I.isEqual=hj,I.isEqualWith=fj,I.isError=yb,I.isFinite=pj,I.isFunction=ia,I.isInteger=I5,I.isLength=Bm,I.isMap=R5,I.isMatch=mj,I.isMatchWith=gj,I.isNaN=yj,I.isNative=Oj,I.isNil=vj,I.isNull=bj,I.isNumber=_5,I.isObject=Pn,I.isObjectLike=Mn,I.isPlainObject=wh,I.isRegExp=Ob,I.isSafeInteger=wj,I.isSet=E5,I.isString=Vm,I.isSymbol=Qs,I.isTypedArray=Ou,I.isUndefined=Sj,I.isWeakMap=Cj,I.isWeakSet=Aj,I.join=PB,I.kebabCase=fz,I.last=fr,I.lastIndexOf=TB,I.lowerCase=pz,I.lowerFirst=mz,I.lt=xj,I.lte=kj,I.max=cZ,I.maxBy=uZ,I.mean=dZ,I.meanBy=hZ,I.min=fZ,I.minBy=pZ,I.stubArray=kb,I.stubFalse=Pb,I.stubObject=Jz,I.stubString=eZ,I.stubTrue=tZ,I.multiply=mZ,I.nth=$B,I.noConflict=qz,I.noop=xb,I.now=Nm,I.pad=gz,I.padEnd=yz,I.padStart=Oz,I.parseInt=bz,I.random=lz,I.reduce=IV,I.reduceRight=RV,I.repeat=vz,I.replace=wz,I.result=Kj,I.round=gZ,I.runInContext=Y,I.sample=EV,I.size=LV,I.snakeCase=Sz,I.some=FV,I.sortedIndex=QB,I.sortedIndexBy=NB,I.sortedIndexOf=LB,I.sortedLastIndex=FB,I.sortedLastIndexBy=BB,I.sortedLastIndexOf=VB,I.startCase=Az,I.startsWith=xz,I.subtract=yZ,I.sum=OZ,I.sumBy=bZ,I.template=kz,I.times=nZ,I.toFinite=sa,I.toInteger=bt,I.toLength=N5,I.toLower=Pz,I.toNumber=pr,I.toSafeInteger=Pj,I.toString=Kt,I.toUpper=Tz,I.trim=$z,I.trimEnd=Dz,I.trimStart=Mz,I.truncate=Iz,I.unescape=Rz,I.uniqueId=sZ,I.upperCase=_z,I.upperFirst=wb,I.each=C5,I.eachRight=A5,I.first=b5,Ab(I,function(){var d={};return go(I,function(f,g){Yt.call(I.prototype,g)||(d[g]=f)}),d}(),{chain:!1}),I.VERSION=i,lr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){I[d].placeholder=I}),lr(["drop","take"],function(d,f){Rt.prototype[d]=function(g){g=g===n?1:Kn(bt(g),0);var C=this.__filtered__&&!f?new Rt(this):this.clone();return C.__filtered__?C.__takeCount__=Ti(g,C.__takeCount__):C.__views__.push({size:Ti(g,Je),type:d+(C.__dir__<0?"Right":"")}),C},Rt.prototype[d+"Right"]=function(g){return this.reverse()[d](g).reverse()}}),lr(["filter","map","takeWhile"],function(d,f){var g=f+1,C=g==ye||g==ge;Rt.prototype[d]=function($){var E=this.clone();return E.__iteratees__.push({iteratee:tt($,3),type:g}),E.__filtered__=E.__filtered__||C,E}}),lr(["head","last"],function(d,f){var g="take"+(f?"Right":"");Rt.prototype[d]=function(){return this[g](1).value()[0]}}),lr(["initial","tail"],function(d,f){var g="drop"+(f?"":"Right");Rt.prototype[d]=function(){return this.__filtered__?new Rt(this):this[g](1)}}),Rt.prototype.compact=function(){return this.filter(cs)},Rt.prototype.find=function(d){return this.filter(d).head()},Rt.prototype.findLast=function(d){return this.reverse().find(d)},Rt.prototype.invokeMap=kt(function(d,f){return typeof d=="function"?new Rt(this):this.map(function(g){return mh(g,d,f)})}),Rt.prototype.reject=function(d){return this.filter(Fm(tt(d)))},Rt.prototype.slice=function(d,f){d=bt(d);var g=this;return g.__filtered__&&(d>0||f<0)?new Rt(g):(d<0?g=g.takeRight(-d):d&&(g=g.drop(d)),f!==n&&(f=bt(f),g=f<0?g.dropRight(-f):g.take(f-d)),g)},Rt.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},Rt.prototype.toArray=function(){return this.take(Je)},go(Rt.prototype,function(d,f){var g=/^(?:filter|find|map|reject)|While$/.test(f),C=/^(?:head|last)$/.test(f),$=I[C?"take"+(f=="last"?"Right":""):f],E=C||/^find/.test(f);$&&(I.prototype[f]=function(){var V=this.__wrapped__,q=C?[1]:arguments,J=V instanceof Rt,pe=q[0],me=J||yt(V),Ae=function($t){var Nt=$.apply(I,Ga([$t],q));return C&&Qe?Nt[0]:Nt};me&&g&&typeof pe=="function"&&pe.length!=1&&(J=me=!1);var Qe=this.__chain__,We=!!this.__actions__.length,ot=E&&!Qe,wt=J&&!We;if(!E&&me){V=wt?V:new Rt(this);var at=d.apply(V,q);return at.__actions__.push({func:Em,args:[Ae],thisArg:n}),new ur(at,Qe)}return ot&&wt?d.apply(this,q):(at=this.thru(Ae),ot?C?at.value()[0]:at.value():at)})}),lr(["pop","push","shift","sort","splice","unshift"],function(d){var f=am[d],g=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",C=/^(?:pop|shift)$/.test(d);I.prototype[d]=function(){var $=arguments;if(C&&!this.__chain__){var E=this.value();return f.apply(yt(E)?E:[],$)}return this[g](function(V){return f.apply(yt(V)?V:[],$)})}}),go(Rt.prototype,function(d,f){var g=I[f];if(g){var C=g.name+"";Yt.call(fu,C)||(fu[C]=[]),fu[C].push({name:f,func:g})}}),fu[Tm(n,x).name]=[{name:"wrapper",func:n}],Rt.prototype.clone=RL,Rt.prototype.reverse=_L,Rt.prototype.value=EL,I.prototype.at=uV,I.prototype.chain=dV,I.prototype.commit=hV,I.prototype.next=fV,I.prototype.plant=mV,I.prototype.reverse=gV,I.prototype.toJSON=I.prototype.valueOf=I.prototype.value=yV,I.prototype.first=I.prototype.head,lh&&(I.prototype[lh]=pV),I},uu=hL();Gl?((Gl.exports=uu)._=uu,CO._=uu):pi._=uu}).call(Tu)})(By,By.exports);var Vi=By.exports;function p4(t,e){if(["string","number"].includes(typeof t)||t instanceof Date)return t===e;if(ui(t))try{return t.eq(e)}catch{return!1}return Vi.isEqual(t,e)}function nY(t,e){switch(t){case Ie.Table:return[];case Ie.Currency:return e.pesa(0);case Ie.Int:case Ie.Float:return 0;default:return null}}function iY(t){const n=sY(t).filter(i=>{const s=t.get(i.fieldname),r=xi(s);return i.fieldtype===Ie.Table?r||(s==null?void 0:s.length)===0:r||s===""}).map(i=>i.label??i.fieldname).join(", ");return n&&t.schema.isChild&&t.parentdoc&&t.parentFieldname?`${t.parentdoc.fieldMap[t.parentFieldname].label} Row ${(t.idx??0)+1}: ${n}`:n}function sY(t){const e=[];for(const n of t.schema.fields){n.required&&e.push(n);const i=t.required[n.fieldname];i!=null&&i()&&e.push(n)}return e}function rY(t,e,n){if(!e.formulas[t.fieldname])return!1;if(t.readOnly)return!0;const{dependsOn:i}=e.formulas[t.fieldname]??{};if(i===void 0)return!0;if(i.length===0)return!1;if(n&&i.includes(n))return!0;if(e.isSyncing&&i.length>0)return oY(t.fieldname,i,e);const s=e.get(t.fieldname);return xi(s)}function oY(t,e,n){if(m4(n.get(t)))return!1;for(const i of e)if(m4(n.get(i)))return!0;return!1}function m4(t){return ui(t)?!t.isZero():Array.isArray(t)?t.length>0:!!t}function Wb(t){t.forEach((e,n)=>{e.idx=n})}function aY(t){const e=Object.keys(t).reduce((n,i)=>{var s;return n[i]=(s=t[i])==null?void 0:s.dependsOn,n},{});return lY(Vi.cloneDeep(e))}function lY(t){const e=Object.keys(t),n=e.filter(r=>{var o;return!((o=t[r])!=null&&o.length)}),i=e.filter(r=>{var o;return(o=t[r])==null?void 0:o.length}),s=new Set(n);for(const r of i){const o=t[r]??[];for(o.push(r);o.length;){const a=o.shift();s.has(a)||s.add(a)}}return Array.from(s).filter(r=>r in t)}async function cY(t,e){if(t.schema.naming!=="manual")return t.schema.naming==="autoincrement"?t.name=await uY(t.schemaName,e):t.numberSeries!==void 0?t.name=await dY(t.numberSeries,t.schemaName,e):t.schema.isSingle?t.name=t.schemaName:(t.name||(t.name=Vl()),t.name)}async function uY(t,e){const n=await e.db.getLastInserted(t);return String(n+1).padStart(9,"0")}async function dY(t,e,n){let i;try{i=await n.doc.getDoc("NumberSeries",t)}catch(s){const{statusCode:r}=s;if(!r||r!==404)throw s;await d7(t,e,ZD,n),i=await n.doc.getDoc("NumberSeries",t)}return await i.next(e)}async function d7(t,e,n,i){if(await i.db.exists("NumberSeries",t))return;await i.doc.getNewDoc("NumberSeries",{name:t,start:n,referenceType:e}).sync()}function P1(t){if(typeof t!="string")throw new TypeError(`Invalid email ${String(t)} of type ${typeof t}`);if(!/(.+)@(.+){2,}\.(.+){2,}/.test(t))throw new ie(`Invalid email: ${t}`)}function h7(t){if(typeof t!="string")throw new TypeError(`Invalid phone ${String(t)} of type ${typeof t}`);if(!/[+]{0,1}[\d ]+/.test(t))throw new ie(`Invalid phone: ${t}`)}function hY(t,e,n){const i=c7(t,n);if(!(!i.length||!t.required&&!e||i.map(r=>r.value).includes(e)||t.allowCustom))throw new oo(b`Invalid value ${e} for ${t.label}`)}function fY(t,e,n){if(!xi(e))return;if(t.required)throw new ie(`${t.label} is required`);const i=n.required[t.fieldname];if(i&&i())throw new ie(`${t.label} is required`)}async function kp(t,e){return await ipc.sendAPIRequest(t,e)}async function pY(t){var l;if(!navigator.onLine){const c="No internet connection available";throw new Error(c)}const e=await t.doc.getDoc(A.ERPNextSyncSettings),n=e.baseURL,i=e.authToken;let s=e.deviceID;const r=e.instanceName;if(!n||!i){const c="Missing baseURL or authToken for ERPNext registration";throw new ie(c)}s||await e.setAndSync("deviceID",Vl()),s=e.deviceID;const o=(l=t.singles.ERPNextSyncSettings)==null?void 0:l.registerInstance,a=await kp(`${n}/api/method/books_integration.api.${o}`,{method:"POST",headers:{Authorization:`token ${i}`,"Content-Type":"application/json"},body:JSON.stringify({instance:s,instance_name:r})});if(!a.message.success){const c=a.message.message||"Failed to register instance to ERPNext";throw new ie(c)}}async function mY(t){var o;if(!navigator.onLine){const a="No internet connection available";throw new Error(a)}const e=await t.doc.getDoc(A.ERPNextSyncSettings),n=e.baseURL,i=e.authToken,s=e.deviceID;if(!n||!i||!s){const a="Missing baseURL, authToken, or deviceID for ERPNext sync settings update";throw new ie(a)}const r=await gY(t,n,i);if(!r||!r.message||!r.message.success){const a=((o=r==null?void 0:r.message)==null?void 0:o.message)||"Failed to fetch sync settings from ERPNext";throw new ie(a)}await e.setMultiple(PY(r)),await e.sync()}async function gY(t,e,n){var r;const i=(r=t.singles.ERPNextSyncSettings)==null?void 0:r.syncSettings;if(!i){const o="Sync settings endpoint not configured";throw new ie(o)}return await kp(`${e}/api/method/books_integration.api.${i}`,{headers:{Authorization:`token ${n}`,"Content-Type":"application/json"}})}async function yY(t){var i,s;const e=(i=t.singles.ERPNextSyncSettings)==null?void 0:i.isEnabled,n=((s=t.singles.ERPNextSyncSettings)==null?void 0:s.initialSyncData)??!0;if(!e){const r="ERPNext sync is not enabled";throw new Error(r)}if(!n)await wY(t);else{let r=null;for(let o=0;o<3;o++)try{await OY(t,!1),r=null}catch(a){r=a instanceof Error?a:new Error(String(a))}if(r)throw r}}async function OY(t,e=!1){var a,l,c,u;if(!((a=t.singles.ERPNextSyncSettings)==null?void 0:a.isEnabled)){const h="ERPNext sync is not enabled";throw new Error(h)}const i=(l=t.singles.ERPNextSyncSettings)==null?void 0:l.authToken,s=(c=t.singles.ERPNextSyncSettings)==null?void 0:c.baseURL,r=(u=t.singles.ERPNextSyncSettings)==null?void 0:u.deviceID;if(!i||!s){const h="Missing token or baseURL for ERPNext sync",p=new ie(h);if(e)throw p;return}const o=await AY(t,s,i,r);if(!(o!=null&&o.message.success)){const h=(o==null?void 0:o.message.message)||"Failed to fetch documents from ERPNext";if(e)throw new ie(h);return}if(!(!o||!o.message.success||!o.message.data)){for(let h of o.message.data.reverse())if(kY(h.doctype)&&Gr(h)in A){h.fbooksDocName||h.name,Gr(h)===A.Item&&(h.datafromErp=!0);try{if((h.fbooksDocName||h.name)&&await t.db.exists(Gr(h),h.fbooksDocName||h.name)){const y=await t.doc.getDoc(Gr(h),h.fbooksDocName||h.name);h.name=h.fbooksDocName??h.name,h=p7(t,h),await y.setMultiple(h),await jy(t,h),await Vy(y,h),y._addDocToSyncQueue=!1,await y.sync(),h.submitted&&await y.submit(),h.cancelled&&await y.cancel(),await zy(t,s,i,r,h,h.erpnextDocName||h.name,h.name);continue}const p=t.doc.getNewDoc(Gr(h),h);await jy(t,h),await Vy(p,h),p._addDocToSyncQueue=!1,await p.sync(),h.submitted&&await p.submit(),h.cancelled&&await p.cancel(),await zy(t,s,i,r,h,h.erpnextDocName||h.name,p.name)}catch(p){if(p instanceof Error?p.message:String(p),e)throw p}}}}async function bY(t,e,n,i,s){Gr(e)===A.Item&&(e.datafromErp=!0);const r=t.doc.getNewDoc(Gr(e),e);await jy(t,e),await Vy(r,e),r._addDocToSyncQueue=!1,await r.sync(),e.submitted&&await r.submit(),e.cancelled&&await r.cancel(),await zy(t,n,i,s,e,e.erpnextDocName||e.name,r.name)}async function Vy(t,e){var n,i,s;switch(e.doctype){case A.Item:if(!e.uomConversions||!Array.isArray(e.uomConversions))break;for(const l of e.uomConversions){if(!l.uom||!l.conversionFactor)throw new ie("Invalid UOM conversion data: missing uom or conversionFactor");await t.append("uomConversions",{uom:l.uom,conversionFactor:l.conversionFactor})}break;case A.PriceList:t.priceListItem=[];const r=new Set;if(e.priceListItem&&Array.isArray(e.priceListItem))for(const l of e.priceListItem){const c=l.item,u=l.unit;if(c==null||u==null)throw new ie("Price list item missing required fields: item or unit");const h=`${String(c)}::${String(u)}`;r.has(h)||(r.add(h),await t.append("priceListItem",l))}break;case A.PricingRule:const o=new Set;t.appliedItems=(n=t.appliedItems)==null?void 0:n.filter(l=>{const c=`${l.item}::${l.unit}`;return o.has(c)?!1:(o.add(c),!0)});const a=new Set(((i=e.appliedItems)==null?void 0:i.map(l=>`${l.item}::${l.unit}`))||[]);t.appliedItems=(s=t.appliedItems)==null?void 0:s.filter(l=>a.has(`${l.item}::${l.unit}`));break}}async function jy(t,e){var s;const i=!(((s=t.singles.ERPNextSyncSettings)==null?void 0:s.initialSyncData)??!0);switch(e.doctype){case A.Item:if(!e.unit)throw new ie("Item missing required field: unit");const r=await t.db.exists(A.UOM,e.unit),o=(await t.db.getAll(A.FetchFromERPNextQueue,{filters:{referenceType:A.UOM,documentName:e.unit}})).length;if(!r&&!o&&await ba(t,{referenceType:A.UOM,documentName:e.unit}),e.itemGroup&&!await t.db.exists(A.ItemGroup,e.itemGroup))if(i){const c={name:e.itemGroup},u=t.doc.getNewDoc(A.ItemGroup,c);u._addDocToSyncQueue=!1,await u.sync()}else await ba(t,{referenceType:A.ItemGroup,documentName:e.itemGroup});if(e.uomConversions)for(const l of e.uomConversions){if(!l.uom)throw new ie("UOM conversion missing required field: uom");if(!await t.db.exists(A.UOM,l.uom)){const u={name:l.uom,isWhole:l.isWhole};await t.doc.getNewDoc(A.UOM,u).sync()}}return;case"Customer":case"Supplier":await t.db.exists(A.Address,e.address)||await ba(t,{referenceType:A.Address,documentName:e.address});return;case A.SalesInvoice:return await CY(t,e);case A.StockMovement:if(!e||!e.items)return;for(const l of e.items)await t.db.exists(A.Item,l.item)||await ba(t,{referenceType:A.Item,documentName:l.item});return;default:return}}async function vY(t,e,n,i,s){const r=Gr(e),o=await t.doc.getDoc(r,e.fbooksDocName||e.name);e.name=e.fbooksDocName??e.name,e=p7(t,e),await o.setMultiple(e),await jy(t,e),await Vy(o,e),o._addDocToSyncQueue=!1,await o.sync(),e.submitted&&await o.submit(),e.cancelled&&await o.cancel(),await zy(t,n,i,s,e,e.erpnextDocName||e.name,e.name)}async function wY(t){var u,h,p,m,y;const e=(u=t.singles.ERPNextSyncSettings)==null?void 0:u.isEnabled,n=((h=t.singles.ERPNextSyncSettings)==null?void 0:h.initialSyncData)??!0;if(!e){const O="ERPNext sync is not enabled";throw new Error(O)}if(n)return;const i=(p=t.singles.ERPNextSyncSettings)==null?void 0:p.authToken,s=(m=t.singles.ERPNextSyncSettings)==null?void 0:m.baseURL,r=(y=t.singles.ERPNextSyncSettings)==null?void 0:y.deviceID;if(!i||!s){const O="Missing token or baseURL for initial sync";throw new ie(O)}const o=await SY(t,s,i,r);if(!o||o.length===0){await(await t.doc.getDoc(A.ERPNextSyncSettings)).setAndSync("initialSyncData",!0);return}const a=[A.UOM,A.ItemGroup,A.Party,A.Address,A.Item,A.PriceList,A.PricingRule,A.Batch],l={};for(const O of o){const S=Gr(O);l[S]||(l[S]=[]),l[S].push(O)}for(const O of a)if(l[O]&&l[O].length>0)for(const S of l[O]){S.fbooksDocName||S.name;try{O===A.Item&&(S.datafromErp=!0),await t.db.exists(O,S.fbooksDocName||S.name)?await vY(t,S,s,i,r):await bY(t,S,s,i,r)}catch(x){const T=x instanceof Error?x.message:String(x),k=`Failed to process document ${String(S.name??S.fbooksDocName)} of type ${O}: ${T}`;throw new Error(k)}}await(await t.doc.getDoc(A.ERPNextSyncSettings)).setAndSync("initialSyncData",!0)}async function SY(t,e,n,i){var a,l,c;const s=(a=t.singles.ERPNextSyncSettings)==null?void 0:a.fetchFromERPNextQueue;if(!s){const u="Fetch from ERPNext queue endpoint not configured";throw new ie(u)}const r=`${e}/api/method/books_integration.api.${s}?instance=${i}&all_docs=true`,o=await kp(r,{headers:{Authorization:`token ${n}`,"Content-Type":"application/json"}});if(!((l=o==null?void 0:o.message)!=null&&l.success)||!o.message.data){const u=((c=o==null?void 0:o.message)==null?void 0:c.message)||"Failed to fetch documents for initial sync";throw new ie(u)}return o.message.data}async function CY(t,e){if(!e.party)throw new ie("Sales invoice missing required field: party");if(await t.db.exists(A.Party,e.party)||await ba(t,{referenceType:A.Party,documentName:e.party}),e.items)for(const i of e.items){if(!i.unit)throw new ie("Sales invoice item missing required field: unit");if(!i.item)throw new ie("Sales invoice item missing required field: item");await t.db.exists(A.UOM,i.unit)||await ba(t,{referenceType:A.UOM,documentName:i.unit}),await t.db.exists(A.Item,i.item)||await ba(t,{referenceType:A.Item,documentName:i.item}),i.batch&&(await t.db.exists(A.Batch,i.batch)||await ba(t,{referenceType:A.Batch,documentName:i.batch}))}e.priceList&&(await t.db.exists(A.PriceList,e.priceList)||await ba(t,{referenceType:A.PriceList,documentName:e.priceList}))}async function ba(t,e){await t.doc.getNewDoc(A.FetchFromERPNextQueue,e).sync()}async function f7(t){var c,u,h,p,m;if(!((c=t.singles.ERPNextSyncSettings)==null?void 0:c.isEnabled)){const y="ERPNext sync is not enabled";throw new Error(y)}const n=(u=t.singles.ERPNextSyncSettings)==null?void 0:u.authToken,i=(h=t.singles.ERPNextSyncSettings)==null?void 0:h.baseURL,s=(p=t.singles.ERPNextSyncSettings)==null?void 0:p.deviceID;if(!n||!i){const y="Missing token or baseURL for ERPNext sync";throw new ie(y)}const r=[],o=await t.db.getAll(A.ERPNextSyncQueue,{fields:["name","referenceType","documentName"],order:"desc"});if(!o.length)return;for(const y of o){const O=await t.doc.getDoc(y.referenceType,y.documentName);O&&r.push({doctype:Gr(O),...O.getValidDict()})}if(!r.length)return;const a=(m=t.singles.ERPNextSyncSettings)==null?void 0:m.syncDataToERPNext;if(!a){const y="Sync data to ERPNext endpoint not configured";throw new ie(y)}const l=await kp(`${i}/api/method/books_integration.api.${a}`,{method:"POST",headers:{Authorization:`token ${n}`,"Content-Type":"application/json"},body:JSON.stringify({instance:s,records:r})});if(!l.message.success)throw new Error(`ERPNext API error: ${String(JSON.stringify(l.message))}`);for(const y of o)await(await t.doc.getDoc(A.ERPNextSyncQueue,y.name)).delete()}async function AY(t,e,n,i){var r;const s=(r=t.singles.ERPNextSyncSettings)==null?void 0:r.fetchFromERPNextQueue;return await kp(`${e}/api/method/books_integration.api.${s}?instance=${i}`,{headers:{Authorization:`token ${n}`,"Content-Type":"application/json"}})}async function zy(t,e,n,i,s,r,o){var c;const a={doctype:Gr(s),nameInERPNext:r,nameInFBooks:o,doc:s},l=(c=t.singles.ERPNextSyncSettings)==null?void 0:c.clearSyncedDocsFromErpNextSyncQueue;return await ipc.sendAPIRequest(`${e}/api/method/books_integration.api.${l}`,{method:"POST",headers:{Authorization:`token ${n}`,"Content-Type":"application/json"},body:JSON.stringify({instance:i,data:a})})}function xY(t){return!![A.SalesInvoice,A.Payment,A.Shipment,A.POSOpeningShift,A.POSClosingShift].includes(t.schemaName)}function g4(t,e,n,i){const s={...e};for(const r of n)if(r in s)switch(i){case A.Currency:s[r]=t.pesa(s[r]);break}return s}function p7(t,e){switch(e.doctype){case A.Item:return g4(t,e,["rate"],A.Currency);case A.PricingRule:return g4(t,e,["minAmount","maxAmount","discountAmount","discountRate","freeItemRate"],A.Currency);default:return e}}function kY(t){return!![A.Item,A.ItemGroup,A.Batch,A.PricingRule,A.PriceList].includes(t)}function Gr(t){const e=t.schemaName??t.referenceType??t.doctype;return["Supplier","Customer"].includes(e)?A.Party:e==="Party"&&t.role&&t.role!=="Both"?t.role:e}function PY(t){return{integrationAppVersion:t.message.app_version,isEnabled:!!t.message.data.enable_sync}}const Ol=class Ol extends Cl{constructor(e,n,i,s=!0){return super(),this._dirty=!0,this._notInserted=!0,this._syncing=!1,this._addDocToSyncQueue=!0,this.formulas={},this.validations={},this.required={},this.hidden={},this.readOnly={},this.getCurrencies={},this.fyo=Hs(i),this.schema=e,this.fieldMap=er(e.fields,"fieldname"),this.schema.isSingle&&(this.name=this.schemaName),this._setDefaults(),this._setValuesWithoutChecks(n,s),Bl(this)}get schemaName(){return this.schema.name}get notInserted(){return this._notInserted}get inserted(){return!this._notInserted}get tableFields(){return this.schema.fields.filter(e=>e.fieldtype===Ie.Table)}get dirty(){return this._dirty}get quickEditFields(){let e=this.schema.quickEditFields;return e===void 0&&(e=[]),e.length===0&&this.fieldMap.name&&(e=["name"]),e.map(n=>this.fieldMap[n])}get isSubmitted(){return!!this.submitted&&!this.cancelled}get isCancelled(){return!!this.submitted&&!!this.cancelled}get isSyncing(){return this._syncing}get canDelete(){return this.notInserted||this.schema.isSingle||this.schema.isChild?!1:!!(!this.schema.isSubmittable||this.schema.isSubmittable&&this.isCancelled||this.schema.isSubmittable&&!this.isSubmitted)}get canEdit(){return this.schema.isSubmittable?!(this.submitted||this.cancelled):!0}get canSave(){const e=this.schema.isSubmittable;return!(e&&this.submitted||e&&this.cancelled||!this.dirty||this.schema.isChild)}get canSubmit(){return!(!this.schema.isSubmittable||this.dirty||this.notInserted||this.submitted||this.cancelled)}get canCancel(){return!(!this.schema.isSubmittable||this.dirty||this.notInserted||this.cancelled||!this.submitted)}get shouldDocSyncToERPNext(){var n;return!!!((n=this.fyo.singles.ERPNextSyncSettings)!=null&&n.isEnabled)||!this.schemaName||!this.fyo.singles.ERPNextSyncSettings||this.schema.isSubmittable&&!this.isSubmitted?!1:xY(this)}_setValuesWithoutChecks(e,n){for(const i of this.schema.fields){const{fieldname:s,fieldtype:r}=i,o=e[i.fieldname];if(Array.isArray(o))for(const a of o)this.push(s,a,n);else r===Ie.Currency&&typeof o=="number"?this[s]=this.fyo.pesa(o):o!==void 0&&!n?this[s]=o:o!==void 0?this[s]=Lc.toDocValue(o,i,this.fyo):this[s]=this[s]??null;i.fieldtype===Ie.Table&&!this[s]&&(this[s]=[])}}_setDirty(e){this._dirty=e,this.schema.isChild&&this.parentdoc&&(this.parentdoc._dirty=e)}async set(e,n,i=!1){if(typeof e=="object")return await this.setMultiple(e);if(!this._canSet(e,n))return!1;if(this._setDirty(!0),typeof n=="string"&&(n=n.trim()),Array.isArray(n))for(const s of n)this.push(e,s);else{const s=this.fieldMap[e];await this._validateField(s,n),this[e]=n}return this.schema.isChild&&this.parentdoc?(await this._applyChange(e),await this.parentdoc._applyChange(this.parentFieldname)):await this._applyChange(e,i),!0}async setMultiple(e){let n=!1;for(const i in e){const s=await this.set(i,e[i]);n||(n=s)}return n}_canSet(e,n){if(e==="numberSeries"&&!this.notInserted||n===void 0||this.fieldMap[e]===void 0)return!1;const i=this.get(e);return i===void 0?!0:!p4(i,n)}async _applyChange(e,n){return await this._applyFormula(e,n),await this.trigger("change",{doc:this,changed:e}),!0}_setDefaults(){var e,n;for(const i of this.schema.fields){let s=nY(i.fieldtype,this.fyo);const r=(n=(e=this.fyo.models[this.schemaName])==null?void 0:e.defaults)==null?void 0:n[i.fieldname];r!==void 0?s=r(this):i.default!==void 0&&(s=i.default),i.fieldtype===Ie.Currency&&!ui(s)&&(s=this.fyo.pesa(s)),this[i.fieldname]=s}}async remove(e,n){const i=(this[e]??[]).filter((s,r)=>s.idx!==n||r!==n);return Wb(i),this[e]=i,this._setDirty(!0),await this._applyChange(e)}async append(e,n={}){return this.push(e,n),this._setDirty(!0),await this._applyChange(e)}push(e,n={},i=!1){const s=[this[e]??[],this._getChildDoc(n,e,i)].flat();Wb(s),this[e]=s}_setChildDocsParent(){for(const{fieldname:e}of this.tableFields){const n=this.get(e);if(Array.isArray(n))for(const i of n)i.parent||(i.parent=this.name)}}_getChildDoc(e,n,i=!1){if(!this.name&&this.schema.naming!=="manual"&&(this.name=this.fyo.doc.getTemporaryName(this.schema)),e.name??(e.name=Vl()),e.parent??(e.parent=this.name),e.parentSchemaName??(e.parentSchemaName=this.schemaName),e.parentFieldname??(e.parentFieldname=n),e instanceof Ol)return e.parentdoc??(e.parentdoc=this),e;const s=this.fieldMap[n].target,r=this.fyo.doc.getNewDoc(s,e,!1,void 0,void 0,i);return r.parentdoc=this,r}async _validateSync(){this._validateMandatory(),await this._validateFields()}_validateMandatory(){const e=[this],n=this.schema.fields.filter(s=>s.fieldtype===Ie.Table);for(const s of n){const r=this.get(s.fieldname);r&&e.push(...r)}const i=e.map(s=>iY(s)).filter(Boolean);if(i.length>0){const s=i.join(`
`),r=this.fyo.t`Value missing for ${s}`;throw new e7(r)}}async _validateFields(){const e=this.schema.fields;for(const n of e){if(n.fieldtype===Ie.Table)continue;const i=this.get(n.fieldname);await this._validateField(n,i)}}async _validateField(e,n){if((e.fieldtype===Ie.Select||e.fieldtype===Ie.AutoComplete)&&hY(e,n,this),fY(e,n,this),xi(n))return;const i=this.validations[e.fieldname];i!==void 0&&await i(n)}getValidDict(e=!1,n=!1){let i=this.schema.fields;e&&(i=this.schema.fields.filter(r=>!r.meta)),n&&(i=i.filter(r=>!r.computed));const s={};for(const r of i){let o=this[r.fieldname];Array.isArray(o)&&(o=o.map(a=>a.getValidDict(e,n))),ui(o)&&(o=o.copy()),!(o===null&&this.schema.isSingle)&&(s[r.fieldname]=o)}return s}_setBaseMetaValues(){this.schema.isSubmittable&&(this.submitted=!1,this.cancelled=!1),this.createdBy||(this.createdBy=this.fyo.auth.session.user||a4),this.created||(this.created=new Date),this._updateModifiedMetaValues()}_updateModifiedMetaValues(){this.modifiedBy=this.fyo.auth.session.user||a4,this.modified=new Date}async load(){if(this.name===void 0)return;const e=await this.fyo.db.get(this.schemaName,this.name);if(this.schema.isSingle&&!(e!=null&&e.name)&&(e.name=this.name),e&&e.name)await this._syncValues(e),await this.loadLinks();else throw new Ea(`Not Found: ${this.schemaName} ${this.name}`);this._setDirty(!1),this._notInserted=!1,this.fyo.doc.observer.trigger(`load:${this.schemaName}`,this.name)}async loadLinks(){this.links??(this.links={});const e=this.schema.fields.filter(({fieldtype:n})=>n===Ie.Link||n===Ie.DynamicLink);for(const n of e)await this._loadLink(n)}async _loadLink(e){if(e.fieldtype===Ie.Link)return await this._loadLinkField(e);if(e.fieldtype===Ie.DynamicLink)return await this._loadDynamicLinkField(e)}async _loadLinkField(e){const{fieldname:n,target:i}=e,s=this.get(n);!s||!i||await this._loadLinkDoc(n,i,s)}async _loadDynamicLinkField(e){const{fieldname:n,references:i}=e,s=this.get(n),r=this.get(i);!s||!r||await this._loadLinkDoc(n,r,s)}async _loadLinkDoc(e,n,i){this.links[e]=await this.fyo.doc.getDoc(n,i)}getLink(e){var n;return((n=this.links)==null?void 0:n[e])??null}async loadAndGetLink(e){var n,i,s;return this!=null&&this[e]?(((i=(n=this.links)==null?void 0:n[e])==null?void 0:i.name)!==this[e]&&await this.loadLinks(),((s=this.links)==null?void 0:s[e])??null):null}async _syncValues(e){this._clearValues(),this._setValuesWithoutChecks(e,!1),await this._setComputedValuesFromFormulas(),this._dirty=!1,this.trigger("change",{doc:this})}async _setComputedValuesFromFormulas(){for(const e of this.schema.fields){if(await this._setComputedValuesForChildren(e),!e.computed)continue;const n=await this._getValueFromFormula(e,this);this[e.fieldname]=n??null}}async _setComputedValuesForChildren(e){if(e.fieldtype!=="Table")return;const n=this[e.fieldname]??[];for(const i of n)await i._setComputedValuesFromFormulas()}_clearValues(){for(const{fieldname:e}of this.schema.fields)this[e]=null;this._dirty=!0,this._notInserted=!0}_setChildDocsIdx(){const e=this.schema.fields.filter(n=>n.fieldtype===Ie.Table);for(const n of e){const i=this.get(n.fieldname)??[];Wb(i)}}async _validateDbNotModified(){var s,r;if(this.notInserted||!this.name||this.schema.isSingle)return;const e=await this.fyo.db.get(this.schemaName,this.name),n=(s=this.modified)==null?void 0:s.toISOString(),i=(r=e.modified)==null?void 0:r.toISOString();if(e&&n!==i)throw new n7(this.fyo.t`${this.schema.label} ${this.name} has been modified after loading please reload entry.`+` ${i}, ${n}`)}async runFormulas(){await this._applyFormula()}async _applyFormula(e,n){let i=await this._callAllTableFieldsApplyFormula(e);return i=await this._applyFormulaForFields(this,e)||i,i&&n&&(await this._callAllTableFieldsApplyFormula(e),await this._applyFormulaForFields(this,e)),i}async _callAllTableFieldsApplyFormula(e){let n=!1;for(const{fieldname:i}of this.tableFields){const s=this.get(i);s&&(n=await this._callChildDocApplyFormula(s,e)||n)}return n}async _callChildDocApplyFormula(e,n){let i=!1;for(const s of e)s._applyFormula&&(i=await s._applyFormula(n)||i);return i}async _applyFormulaForFields(e,n){const i=aY(this.formulas).map(r=>this.fyo.getField(this.schemaName,r)).filter(Boolean);let s=!1;for(const r of i){if(!rY(r,e,n))continue;const a=await this._getValueFromFormula(r,e,n),l=e.get(r.fieldname),c=p4(a,l);a===void 0||c||(e[r.fieldname]=a,s||(s=!0))}return s}async _getValueFromFormula(e,n,i){const{formula:s}=n.formulas[e.fieldname]??{};if(s===void 0)return;let r;try{r=await s(i)}catch{return}return Array.isArray(r)&&e.fieldtype===Ie.Table&&(r=r.map(o=>this._getChildDoc(o,e.fieldname))),r}async _preSync(){this._setChildDocsIdx(),this._setChildDocsParent(),await this._applyFormula(),await this._validateSync(),await this.trigger("validate")}async _insert(){this._setBaseMetaValues(),await this._preSync(),await cY(this,this.fyo);const e=this.getValidDict(!1,!0);let n;try{n=await this.fyo.db.insert(this.schemaName,e)}catch(i){throw await f4(i,this,this.fyo)}return await this._syncValues(n),this.fyo.telemetry.log(si.Created,this.schemaName),this}async _update(){await this._validateDbNotModified(),this._updateModifiedMetaValues(),await this._preSync();const e=this.getValidDict(!1,!0);try{await this.fyo.db.update(this.schemaName,e)}catch(n){throw await f4(n,this,this.fyo)}return await this._syncValues(e),this}async _hasERPSyncableItems(){if(!(this.schemaName===A.SalesInvoice))return!0;for(const n of this.items)if(!(!n.item||await this.fyo.getValue(A.Item,n.item,"datafromErp")))return!1;return!0}async sync(){this._syncing=!0,await this.trigger("beforeSync");let e;if(this.notInserted?e=await this._insert():e=await this._update(),this._notInserted=!1,await this.trigger("afterSync"),this.fyo.doc.observer.trigger(`sync:${this.schemaName}`,this.name),this._addDocToSyncQueue&&this.shouldDocSyncToERPNext){const n=this.schemaName===A.SalesInvoice;await this._hasERPSyncableItems()&&(!(n&&this.isSyncedWithErp)||n&&this.isReturn)&&(n&&!this.isReturn&&await this.setAndSync("isSyncedWithErp",!0),(await this.fyo.db.getAll(A.ERPNextSyncQueue,{filters:{referenceType:this.schemaName,documentName:this.name}})).length||await this.fyo.doc.getNewDoc(A.ERPNextSyncQueue,{referenceType:this.schemaName,documentName:this.name}).sync())}return this._syncing=!1,e}async delete(){this.notInserted&&this.name&&this.fyo.doc.removeFromCache(this.schemaName,this.name),this.canDelete&&(await this.trigger("beforeDelete"),await this.fyo.db.delete(this.schemaName,this.name),await this.trigger("afterDelete"),this.fyo.telemetry.log(si.Deleted,this.schemaName),this.fyo.doc.observer.trigger(`delete:${this.schemaName}`,this.name))}async submit(){!this.schema.isSubmittable||this.submitted||this.cancelled||(await this.trigger("beforeSubmit"),await this.setAndSync("submitted",!0),await this.trigger("afterSubmit"),this.fyo.telemetry.log(si.Submitted,this.schemaName),this.fyo.doc.observer.trigger(`submit:${this.schemaName}`,this.name))}async cancel(){!this.schema.isSubmittable||!this.submitted||this.cancelled||(await this.trigger("beforeCancel"),await this.setAndSync("cancelled",!0),await this.trigger("afterCancel"),this.fyo.telemetry.log(si.Cancelled,this.schemaName),this.fyo.doc.observer.trigger(`cancel:${this.schemaName}`,this.name))}async rename(e){if(this.submitted)return;const n=this.name;await this.trigger("beforeRename",{oldName:n,newName:e}),await this.fyo.db.rename(this.schemaName,this.name,e),this.name=e,await this.trigger("afterRename",{oldName:n,newName:e}),this.fyo.doc.observer.trigger(`rename:${this.schemaName}`,this.name)}async trigger(e,n){this[e]&&await this[e](n),await super.trigger(e,n)}getSum(e,n,i=!0){const r=(this.get(e)??[]).map(o=>{const a=o.get(n)??0;if(!ui(a))try{return this.fyo.pesa(a)}catch(l){throw l.message+=` value: '${String(a)}' of type: ${typeof a}, fieldname: '${e}', childfield: '${n}'`,l}return a}).reduce((o,a)=>o.add(a),this.fyo.pesa(0));return i?r.float:r}async setAndSync(e,n){return await this.set(e,n),await this.sync()}duplicate(){const e=this.getValidDict(!0,!0);for(const i in e){const s=e[i];if(Array.isArray(s))for(const r of s)delete r.name}this.numberSeries?delete e.name:e.name=String(e.name)+" CPY";const n=this.fyo.db.converter.toRawValueMap(this.schemaName,e);return this.fyo.doc.getNewDoc(this.schemaName,n,!0)}async change(e){}async validate(){}async beforeSync(){}async afterSync(){}async beforeSubmit(){}async afterSubmit(){}async beforeRename(){}async afterRename(){}async beforeCancel(){}async afterCancel(){}async beforeDelete(){}async afterDelete(){}static getListViewSettings(e){return{}}static getTreeSettings(e){}static getActions(e){return[]}};Ol.lists={},Ol.filters={},Ol.createFilters={},Ol.defaults={},Ol.emptyMessages={};let ze=Ol;class tu extends Error{}class TY extends tu{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class $Y extends tu{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class DY extends tu{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Zh extends tu{}class m7 extends tu{constructor(e){super(`Invalid unit ${e}`)}}class wr extends tu{}class rl extends tu{constructor(){super("Zone is an abstract class")}}const Ne="numeric",ao="short",Js="long",xv={year:Ne,month:Ne,day:Ne},g7={year:Ne,month:ao,day:Ne},MY={year:Ne,month:ao,day:Ne,weekday:ao},y7={year:Ne,month:Js,day:Ne},O7={year:Ne,month:Js,day:Ne,weekday:Js},b7={hour:Ne,minute:Ne},v7={hour:Ne,minute:Ne,second:Ne},w7={hour:Ne,minute:Ne,second:Ne,timeZoneName:ao},S7={hour:Ne,minute:Ne,second:Ne,timeZoneName:Js},C7={hour:Ne,minute:Ne,hourCycle:"h23"},A7={hour:Ne,minute:Ne,second:Ne,hourCycle:"h23"},x7={hour:Ne,minute:Ne,second:Ne,hourCycle:"h23",timeZoneName:ao},k7={hour:Ne,minute:Ne,second:Ne,hourCycle:"h23",timeZoneName:Js},P7={year:Ne,month:Ne,day:Ne,hour:Ne,minute:Ne},T7={year:Ne,month:Ne,day:Ne,hour:Ne,minute:Ne,second:Ne},$7={year:Ne,month:ao,day:Ne,hour:Ne,minute:Ne},D7={year:Ne,month:ao,day:Ne,hour:Ne,minute:Ne,second:Ne},IY={year:Ne,month:ao,day:Ne,weekday:ao,hour:Ne,minute:Ne},M7={year:Ne,month:Js,day:Ne,hour:Ne,minute:Ne,timeZoneName:ao},I7={year:Ne,month:Js,day:Ne,hour:Ne,minute:Ne,second:Ne,timeZoneName:ao},R7={year:Ne,month:Js,day:Ne,weekday:Js,hour:Ne,minute:Ne,timeZoneName:Js},_7={year:Ne,month:Js,day:Ne,weekday:Js,hour:Ne,minute:Ne,second:Ne,timeZoneName:Js};function Bt(t){return typeof t>"u"}function Dc(t){return typeof t=="number"}function T1(t){return typeof t=="number"&&t%1===0}function RY(t){return typeof t=="string"}function _Y(t){return Object.prototype.toString.call(t)==="[object Date]"}function E7(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function EY(t){return Array.isArray(t)?t:[t]}function y4(t,e,n){if(t.length!==0)return t.reduce((i,s)=>{const r=[e(s),s];return i&&n(i[0],r[0])===i[0]?i:r},null)[1]}function QY(t,e){return e.reduce((n,i)=>(n[i]=t[i],n),{})}function Ad(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Sa(t,e,n){return T1(t)&&t>=e&&t<=n}function NY(t,e){return t-e*Math.floor(t/e)}function qn(t,e=2){const n=t<0;let i;return n?i="-"+(""+-t).padStart(e,"0"):i=(""+t).padStart(e,"0"),i}function pl(t){if(!(Bt(t)||t===null||t===""))return parseInt(t,10)}function rc(t){if(!(Bt(t)||t===null||t===""))return parseFloat(t)}function vC(t){if(!(Bt(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function wC(t,e,n=!1){const i=10**e;return(n?Math.trunc:Math.round)(t*i)/i}function Pp(t){return t%4===0&&(t%100!==0||t%400===0)}function cf(t){return Pp(t)?366:365}function Zy(t,e){const n=NY(e-1,12)+1,i=t+(e-n)/12;return n===2?Pp(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function SC(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(e.getUTCFullYear()-1900)),+e}function qy(t){const e=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7,n=t-1,i=(n+Math.floor(n/4)-Math.floor(n/100)+Math.floor(n/400))%7;return e===4||i===3?53:52}function kv(t){return t>99?t:t>60?1900+t:2e3+t}function Q7(t,e,n,i=null){const s=new Date(t),r={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(r.timeZone=i);const o={timeZoneName:e,...r},a=new Intl.DateTimeFormat(n,o).formatToParts(s).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function $1(t,e){let n=parseInt(t,10);Number.isNaN(n)&&(n=0);const i=parseInt(e,10)||0,s=n<0||Object.is(n,-0)?-i:i;return n*60+s}function N7(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new wr(`Invalid unit value ${t}`);return e}function Xy(t,e){const n={};for(const i in t)if(Ad(t,i)){const s=t[i];if(s==null)continue;n[e(i)]=N7(s)}return n}function uf(t,e){const n=Math.trunc(Math.abs(t/60)),i=Math.trunc(Math.abs(t%60)),s=t>=0?"+":"-";switch(e){case"short":return`${s}${qn(n,2)}:${qn(i,2)}`;case"narrow":return`${s}${n}${i>0?`:${i}`:""}`;case"techie":return`${s}${qn(n,2)}${qn(i,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function D1(t){return QY(t,["hour","minute","second","millisecond"])}const L7=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,LY=["January","February","March","April","May","June","July","August","September","October","November","December"],F7=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],FY=["J","F","M","A","M","J","J","A","S","O","N","D"];function B7(t){switch(t){case"narrow":return[...FY];case"short":return[...F7];case"long":return[...LY];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const V7=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],j7=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],BY=["M","T","W","T","F","S","S"];function z7(t){switch(t){case"narrow":return[...BY];case"short":return[...j7];case"long":return[...V7];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Z7=["AM","PM"],VY=["Before Christ","Anno Domini"],jY=["BC","AD"],zY=["B","A"];function q7(t){switch(t){case"narrow":return[...zY];case"short":return[...jY];case"long":return[...VY];default:return null}}function ZY(t){return Z7[t.hour<12?0:1]}function qY(t,e){return z7(e)[t.weekday-1]}function XY(t,e){return B7(e)[t.month-1]}function WY(t,e){return q7(e)[t.year<0?0:1]}function GY(t,e,n="always",i=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},r=["hours","minutes","seconds"].indexOf(t)===-1;if(n==="auto"&&r){const h=t==="days";switch(e){case 1:return h?"tomorrow":`next ${s[t][0]}`;case-1:return h?"yesterday":`last ${s[t][0]}`;case 0:return h?"today":`this ${s[t][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),l=a===1,c=s[t],u=i?l?c[1]:c[2]||c[1]:l?s[t][0]:t;return o?`${a} ${u} ago`:`in ${a} ${u}`}function O4(t,e){let n="";for(const i of t)i.literal?n+=i.val:n+=e(i.val);return n}const UY={D:xv,DD:g7,DDD:y7,DDDD:O7,t:b7,tt:v7,ttt:w7,tttt:S7,T:C7,TT:A7,TTT:x7,TTTT:k7,f:P7,ff:$7,fff:M7,ffff:R7,F:T7,FF:D7,FFF:I7,FFFF:_7};class Cs{static create(e,n={}){return new Cs(e,n)}static parseFormat(e){let n=null,i="",s=!1;const r=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?(i.length>0&&r.push({literal:s,val:i}),n=null,i="",s=!s):s||a===n?i+=a:(i.length>0&&r.push({literal:!1,val:i}),i=a,n=a)}return i.length>0&&r.push({literal:s,val:i}),r}static macroTokenToFormatOpts(e){return UY[e]}constructor(e,n){this.opts=n,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...n}).format()}formatDateTime(e,n={}){return this.loc.dtFormatter(e,{...this.opts,...n}).format()}formatDateTimeParts(e,n={}){return this.loc.dtFormatter(e,{...this.opts,...n}).formatToParts()}resolvedOptions(e,n={}){return this.loc.dtFormatter(e,{...this.opts,...n}).resolvedOptions()}num(e,n=0){if(this.opts.forceSimple)return qn(e,n);const i={...this.opts};return n>0&&(i.padTo=n),this.loc.numberFormatter(i).format(e)}formatDateTimeFromString(e,n){const i=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",r=(m,y)=>this.loc.extract(e,m,y),o=m=>e.isOffsetFixed&&e.offset===0&&m.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,m.format):"",a=()=>i?ZY(e):r({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(m,y)=>i?XY(e,m):r(y?{month:m}:{month:m,day:"numeric"},"month"),c=(m,y)=>i?qY(e,m):r(y?{weekday:m}:{weekday:m,month:"long",day:"numeric"},"weekday"),u=m=>{const y=Cs.macroTokenToFormatOpts(m);return y?this.formatWithSystemDefault(e,y):m},h=m=>i?WY(e,m):r({era:m},"era"),p=m=>{switch(m){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return s?r({day:"numeric"},"day"):this.num(e.day);case"dd":return s?r({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return s?r({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return s?r({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return s?r({month:"numeric"},"month"):this.num(e.month);case"MM":return s?r({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return s?r({year:"numeric"},"year"):this.num(e.year);case"yy":return s?r({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return s?r({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return s?r({year:"numeric"},"year"):this.num(e.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return u(m)}};return O4(Cs.parseFormat(n),p)}formatDurationFromString(e,n){const i=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=l=>c=>{const u=i(c);return u?this.num(l.get(u),c.length):c},r=Cs.parseFormat(n),o=r.reduce((l,{literal:c,val:u})=>c?l:l.concat(u),[]),a=e.shiftTo(...o.map(i).filter(l=>l));return O4(r,s(a))}}class Hr{constructor(e,n){this.reason=e,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}class Tp{get type(){throw new rl}get name(){throw new rl}get ianaName(){return this.name}get isUniversal(){throw new rl}offsetName(e,n){throw new rl}formatOffset(e,n){throw new rl}offset(e){throw new rl}equals(e){throw new rl}get isValid(){throw new rl}}let Gb=null;class CC extends Tp{static get instance(){return Gb===null&&(Gb=new CC),Gb}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:n,locale:i}){return Q7(e,n,i)}formatOffset(e,n){return uf(this.offset(e),n)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let qg={};function HY(t){return qg[t]||(qg[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),qg[t]}const YY={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function KY(t,e){const n=t.format(e).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,s,r,o,a,l,c,u]=i;return[o,s,r,a,l,c,u]}function JY(t,e){const n=t.formatToParts(e),i=[];for(let s=0;s<n.length;s++){const{type:r,value:o}=n[s],a=YY[r];r==="era"?i[a]=o:Bt(a)||(i[a]=parseInt(o,10))}return i}let tg={};class Qa extends Tp{static create(e){return tg[e]||(tg[e]=new Qa(e)),tg[e]}static resetCache(){tg={},qg={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Qa.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:n,locale:i}){return Q7(e,n,i,this.name)}formatOffset(e,n){return uf(this.offset(e),n)}offset(e){const n=new Date(e);if(isNaN(n))return NaN;const i=HY(this.name);let[s,r,o,a,l,c,u]=i.formatToParts?JY(i,n):KY(i,n);a==="BC"&&(s=-Math.abs(s)+1);const p=SC({year:s,month:r,day:o,hour:l===24?0:l,minute:c,second:u,millisecond:0});let m=+n;const y=m%1e3;return m-=y>=0?y:1e3+y,(p-m)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let Ub=null;class Ji extends Tp{static get utcInstance(){return Ub===null&&(Ub=new Ji(0)),Ub}static instance(e){return e===0?Ji.utcInstance:new Ji(e)}static parseSpecifier(e){if(e){const n=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new Ji($1(n[1],n[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${uf(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${uf(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,n){return uf(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class eK extends Tp{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function bl(t,e){if(Bt(t)||t===null)return e;if(t instanceof Tp)return t;if(RY(t)){const n=t.toLowerCase();return n==="local"||n==="system"?e:n==="utc"||n==="gmt"?Ji.utcInstance:Ji.parseSpecifier(n)||Qa.create(t)}else return Dc(t)?Ji.instance(t):typeof t=="object"&&t.offset&&typeof t.offset=="number"?t:new eK(t)}let b4=()=>Date.now(),v4="system",w4=null,S4=null,C4=null,A4,ei=class{static get now(){return b4}static set now(e){b4=e}static set defaultZone(e){v4=e}static get defaultZone(){return bl(v4,CC.instance)}static get defaultLocale(){return w4}static set defaultLocale(e){w4=e}static get defaultNumberingSystem(){return S4}static set defaultNumberingSystem(e){S4=e}static get defaultOutputCalendar(){return C4}static set defaultOutputCalendar(e){C4=e}static get throwOnInvalid(){return A4}static set throwOnInvalid(e){A4=e}static resetCaches(){$n.resetCache(),Qa.resetCache()}},x4={};function tK(t,e={}){const n=JSON.stringify([t,e]);let i=x4[n];return i||(i=new Intl.ListFormat(t,e),x4[n]=i),i}let Pv={};function Tv(t,e={}){const n=JSON.stringify([t,e]);let i=Pv[n];return i||(i=new Intl.DateTimeFormat(t,e),Pv[n]=i),i}let $v={};function nK(t,e={}){const n=JSON.stringify([t,e]);let i=$v[n];return i||(i=new Intl.NumberFormat(t,e),$v[n]=i),i}let Dv={};function iK(t,e={}){const{base:n,...i}=e,s=JSON.stringify([t,i]);let r=Dv[s];return r||(r=new Intl.RelativeTimeFormat(t,e),Dv[s]=r),r}let qh=null;function sK(){return qh||(qh=new Intl.DateTimeFormat().resolvedOptions().locale,qh)}function rK(t){const e=t.indexOf("-u-");if(e===-1)return[t];{let n;const i=t.substring(0,e);try{n=Tv(t).resolvedOptions()}catch{n=Tv(i).resolvedOptions()}const{numberingSystem:s,calendar:r}=n;return[i,s,r]}}function oK(t,e,n){return(n||e)&&(t+="-u",n&&(t+=`-ca-${n}`),e&&(t+=`-nu-${e}`)),t}function aK(t){const e=[];for(let n=1;n<=12;n++){const i=Te.utc(2016,n,1);e.push(t(i))}return e}function lK(t){const e=[];for(let n=1;n<=7;n++){const i=Te.utc(2016,11,13+n);e.push(t(i))}return e}function ng(t,e,n,i,s){const r=t.listingMode(n);return r==="error"?null:r==="en"?i(e):s(e)}function cK(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class uK{constructor(e,n,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:s,floor:r,...o}=i;if(!n||Object.keys(o).length>0){const a={useGrouping:!1,...i};i.padTo>0&&(a.minimumIntegerDigits=i.padTo),this.inf=nK(e,a)}}format(e){if(this.inf){const n=this.floor?Math.floor(e):e;return this.inf.format(n)}else{const n=this.floor?Math.floor(e):wC(e,3);return qn(n,this.padTo)}}}class dK{constructor(e,n,i){this.opts=i;let s;if(e.zone.isUniversal){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Qa.create(a).valid?(s=a,this.dt=e):(s="UTC",i.timeZoneName?this.dt=e:this.dt=e.offset===0?e:Te.fromMillis(e.ts+e.offset*60*1e3))}else e.zone.type==="system"?this.dt=e:(this.dt=e,s=e.zone.name);const r={...this.opts};s&&(r.timeZone=s),this.dtf=Tv(n,r)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class hK{constructor(e,n,i){this.opts={style:"long",...i},!n&&E7()&&(this.rtf=iK(e,i))}format(e,n){return this.rtf?this.rtf.format(e,n):GY(n,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,n){return this.rtf?this.rtf.formatToParts(e,n):[]}}class $n{static fromOpts(e){return $n.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)}static create(e,n,i,s=!1){const r=e||ei.defaultLocale,o=r||(s?"en-US":sK()),a=n||ei.defaultNumberingSystem,l=i||ei.defaultOutputCalendar;return new $n(o,a,l,r)}static resetCache(){qh=null,Pv={},$v={},Dv={}}static fromObject({locale:e,numberingSystem:n,outputCalendar:i}={}){return $n.create(e,n,i)}constructor(e,n,i,s){const[r,o,a]=rK(e);this.locale=r,this.numberingSystem=n||o||null,this.outputCalendar=i||a||null,this.intl=oK(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=cK(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&n?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:$n.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,n=!1,i=!0){return ng(this,e,i,B7,()=>{const s=n?{month:e,day:"numeric"}:{month:e},r=n?"format":"standalone";return this.monthsCache[r][e]||(this.monthsCache[r][e]=aK(o=>this.extract(o,s,"month"))),this.monthsCache[r][e]})}weekdays(e,n=!1,i=!0){return ng(this,e,i,z7,()=>{const s=n?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},r=n?"format":"standalone";return this.weekdaysCache[r][e]||(this.weekdaysCache[r][e]=lK(o=>this.extract(o,s,"weekday"))),this.weekdaysCache[r][e]})}meridiems(e=!0){return ng(this,void 0,e,()=>Z7,()=>{if(!this.meridiemCache){const n={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Te.utc(2016,11,13,9),Te.utc(2016,11,13,19)].map(i=>this.extract(i,n,"dayperiod"))}return this.meridiemCache})}eras(e,n=!0){return ng(this,e,n,q7,()=>{const i={era:e};return this.eraCache[e]||(this.eraCache[e]=[Te.utc(-40,1,1),Te.utc(2017,1,1)].map(s=>this.extract(s,i,"era"))),this.eraCache[e]})}extract(e,n,i){const s=this.dtFormatter(e,n),r=s.formatToParts(),o=r.find(a=>a.type.toLowerCase()===i);return o?o.value:null}numberFormatter(e={}){return new uK(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,n={}){return new dK(e,this.intl,n)}relFormatter(e={}){return new hK(this.intl,this.isEnglish(),e)}listFormatter(e={}){return tK(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}function Gd(...t){const e=t.reduce((n,i)=>n+i.source,"");return RegExp(`^${e}$`)}function Ud(...t){return e=>t.reduce(([n,i,s],r)=>{const[o,a,l]=r(e,s);return[{...n,...o},a||i,l]},[{},null,1]).slice(0,2)}function Hd(t,...e){if(t==null)return[null,null];for(const[n,i]of e){const s=n.exec(t);if(s)return i(s)}return[null,null]}function X7(...t){return(e,n)=>{const i={};let s;for(s=0;s<t.length;s++)i[t[s]]=pl(e[n+s]);return[i,null,n+s]}}const W7=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,fK=`(?:${W7.source}?(?:\\[(${L7.source})\\])?)?`,AC=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,G7=RegExp(`${AC.source}${fK}`),xC=RegExp(`(?:T${G7.source})?`),pK=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,mK=/(\d{4})-?W(\d\d)(?:-?(\d))?/,gK=/(\d{4})-?(\d{3})/,yK=X7("weekYear","weekNumber","weekDay"),OK=X7("year","ordinal"),bK=/(\d{4})-(\d\d)-(\d\d)/,U7=RegExp(`${AC.source} ?(?:${W7.source}|(${L7.source}))?`),vK=RegExp(`(?: ${U7.source})?`);function Wu(t,e,n){const i=t[e];return Bt(i)?n:pl(i)}function wK(t,e){return[{year:Wu(t,e),month:Wu(t,e+1,1),day:Wu(t,e+2,1)},null,e+3]}function Yd(t,e){return[{hours:Wu(t,e,0),minutes:Wu(t,e+1,0),seconds:Wu(t,e+2,0),milliseconds:vC(t[e+3])},null,e+4]}function $p(t,e){const n=!t[e]&&!t[e+1],i=$1(t[e+1],t[e+2]),s=n?null:Ji.instance(i);return[{},s,e+3]}function Dp(t,e){const n=t[e]?Qa.create(t[e]):null;return[{},n,e+1]}const SK=RegExp(`^T?${AC.source}$`),CK=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function AK(t){const[e,n,i,s,r,o,a,l,c]=t,u=e[0]==="-",h=l&&l[0]==="-",p=(m,y=!1)=>m!==void 0&&(y||m&&u)?-m:m;return[{years:p(rc(n)),months:p(rc(i)),weeks:p(rc(s)),days:p(rc(r)),hours:p(rc(o)),minutes:p(rc(a)),seconds:p(rc(l),l==="-0"),milliseconds:p(vC(c),h)}]}const xK={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function kC(t,e,n,i,s,r,o){const a={year:e.length===2?kv(pl(e)):pl(e),month:F7.indexOf(n)+1,day:pl(i),hour:pl(s),minute:pl(r)};return o&&(a.second=pl(o)),t&&(a.weekday=t.length>3?V7.indexOf(t)+1:j7.indexOf(t)+1),a}const kK=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function PK(t){const[,e,n,i,s,r,o,a,l,c,u,h]=t,p=kC(e,s,i,n,r,o,a);let m;return l?m=xK[l]:c?m=0:m=$1(u,h),[p,new Ji(m)]}function TK(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const $K=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,DK=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,MK=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function k4(t){const[,e,n,i,s,r,o,a]=t;return[kC(e,s,i,n,r,o,a),Ji.utcInstance]}function IK(t){const[,e,n,i,s,r,o,a]=t;return[kC(e,a,n,i,s,r,o),Ji.utcInstance]}const RK=Gd(pK,xC),_K=Gd(mK,xC),EK=Gd(gK,xC),QK=Gd(G7),H7=Ud(wK,Yd,$p,Dp),NK=Ud(yK,Yd,$p,Dp),LK=Ud(OK,Yd,$p,Dp),FK=Ud(Yd,$p,Dp);function BK(t){return Hd(t,[RK,H7],[_K,NK],[EK,LK],[QK,FK])}function VK(t){return Hd(TK(t),[kK,PK])}function jK(t){return Hd(t,[$K,k4],[DK,k4],[MK,IK])}function zK(t){return Hd(t,[CK,AK])}const ZK=Ud(Yd);function qK(t){return Hd(t,[SK,ZK])}const XK=Gd(bK,vK),WK=Gd(U7),GK=Ud(Yd,$p,Dp);function UK(t){return Hd(t,[XK,H7],[WK,GK])}const HK="Invalid Duration",Y7={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},YK={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Y7},gr=146097/400,Cu=146097/4800,KK={years:{quarters:4,months:12,weeks:gr/7,days:gr,hours:gr*24,minutes:gr*24*60,seconds:gr*24*60*60,milliseconds:gr*24*60*60*1e3},quarters:{months:3,weeks:gr/28,days:gr/4,hours:gr*24/4,minutes:gr*24*60/4,seconds:gr*24*60*60/4,milliseconds:gr*24*60*60*1e3/4},months:{weeks:Cu/7,days:Cu,hours:Cu*24,minutes:Cu*24*60,seconds:Cu*24*60*60,milliseconds:Cu*24*60*60*1e3},...Y7},cc=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],JK=cc.slice(0).reverse();function oc(t,e,n=!1){const i={values:n?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy};return new zt(i)}function eJ(t){return t<0?Math.floor(t):Math.ceil(t)}function K7(t,e,n,i,s){const r=t[s][n],o=e[n]/r,a=Math.sign(o)===Math.sign(i[s]),l=!a&&i[s]!==0&&Math.abs(o)<=1?eJ(o):Math.trunc(o);i[s]+=l,e[n]-=l*r}function tJ(t,e){JK.reduce((n,i)=>Bt(e[i])?n:(n&&K7(t,e,n,e,i),i),null)}class zt{constructor(e){const n=e.conversionAccuracy==="longterm"||!1;this.values=e.values,this.loc=e.loc||$n.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n?KK:YK,this.isLuxonDuration=!0}static fromMillis(e,n){return zt.fromObject({milliseconds:e},n)}static fromObject(e,n={}){if(e==null||typeof e!="object")throw new wr(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new zt({values:Xy(e,zt.normalizeUnit),loc:$n.fromObject(n),conversionAccuracy:n.conversionAccuracy})}static fromDurationLike(e){if(Dc(e))return zt.fromMillis(e);if(zt.isDuration(e))return e;if(typeof e=="object")return zt.fromObject(e);throw new wr(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,n){const[i]=zK(e);return i?zt.fromObject(i,n):zt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,n){const[i]=qK(e);return i?zt.fromObject(i,n):zt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,n=null){if(!e)throw new wr("need to specify a reason the Duration is invalid");const i=e instanceof Hr?e:new Hr(e,n);if(ei.throwOnInvalid)throw new DY(i);return new zt({invalid:i})}static normalizeUnit(e){const n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!n)throw new m7(e);return n}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,n={}){const i={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?Cs.create(this.loc,i).formatDurationFromString(this,e):HK}toHuman(e={}){const n=cc.map(i=>{const s=this.values[i];return Bt(s)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:i.slice(0,-1)}).format(s)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=wC(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const n=this.toMillis();if(n<0||n>=864e5)return null;e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e};const i=this.shiftTo("hours","minutes","seconds","milliseconds");let s=e.format==="basic"?"hhmm":"hh:mm";(!e.suppressSeconds||i.seconds!==0||i.milliseconds!==0)&&(s+=e.format==="basic"?"ss":":ss",(!e.suppressMilliseconds||i.milliseconds!==0)&&(s+=".SSS"));let r=i.toFormat(s);return e.includePrefix&&(r="T"+r),r}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const n=zt.fromDurationLike(e),i={};for(const s of cc)(Ad(n.values,s)||Ad(this.values,s))&&(i[s]=n.get(s)+this.get(s));return oc(this,{values:i},!0)}minus(e){if(!this.isValid)return this;const n=zt.fromDurationLike(e);return this.plus(n.negate())}mapUnits(e){if(!this.isValid)return this;const n={};for(const i of Object.keys(this.values))n[i]=N7(e(this.values[i],i));return oc(this,{values:n},!0)}get(e){return this[zt.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const n={...this.values,...Xy(e,zt.normalizeUnit)};return oc(this,{values:n})}reconfigure({locale:e,numberingSystem:n,conversionAccuracy:i}={}){const s=this.loc.clone({locale:e,numberingSystem:n}),r={loc:s};return i&&(r.conversionAccuracy=i),oc(this,r)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return tJ(this.matrix,e),oc(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>zt.normalizeUnit(o));const n={},i={},s=this.toObject();let r;for(const o of cc)if(e.indexOf(o)>=0){r=o;let a=0;for(const c in i)a+=this.matrix[c][o]*i[c],i[c]=0;Dc(s[o])&&(a+=s[o]);const l=Math.trunc(a);n[o]=l,i[o]=(a*1e3-l*1e3)/1e3;for(const c in s)cc.indexOf(c)>cc.indexOf(o)&&K7(this.matrix,s,c,n,o)}else Dc(s[o])&&(i[o]=s[o]);for(const o in i)i[o]!==0&&(n[r]+=o===r?i[o]:i[o]/this.matrix[r][o]);return oc(this,{values:n},!0).normalize()}negate(){if(!this.isValid)return this;const e={};for(const n of Object.keys(this.values))e[n]=this.values[n]===0?0:-this.values[n];return oc(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function n(i,s){return i===void 0||i===0?s===void 0||s===0:i===s}for(const i of cc)if(!n(this.values[i],e.values[i]))return!1;return!0}}const Th="Invalid Interval";function nJ(t,e){return!t||!t.isValid?Rn.invalid("missing or invalid start"):!e||!e.isValid?Rn.invalid("missing or invalid end"):e<t?Rn.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Rn{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,n=null){if(!e)throw new wr("need to specify a reason the Interval is invalid");const i=e instanceof Hr?e:new Hr(e,n);if(ei.throwOnInvalid)throw new $Y(i);return new Rn({invalid:i})}static fromDateTimes(e,n){const i=Mh(e),s=Mh(n),r=nJ(i,s);return r??new Rn({start:i,end:s})}static after(e,n){const i=zt.fromDurationLike(n),s=Mh(e);return Rn.fromDateTimes(s,s.plus(i))}static before(e,n){const i=zt.fromDurationLike(n),s=Mh(e);return Rn.fromDateTimes(s.minus(i),s)}static fromISO(e,n){const[i,s]=(e||"").split("/",2);if(i&&s){let r,o;try{r=Te.fromISO(i,n),o=r.isValid}catch{o=!1}let a,l;try{a=Te.fromISO(s,n),l=a.isValid}catch{l=!1}if(o&&l)return Rn.fromDateTimes(r,a);if(o){const c=zt.fromISO(s,n);if(c.isValid)return Rn.after(r,c)}else if(l){const c=zt.fromISO(i,n);if(c.isValid)return Rn.before(a,c)}}return Rn.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds"){if(!this.isValid)return NaN;const n=this.start.startOf(e),i=this.end.startOf(e);return Math.floor(i.diff(n,e).get(e))+1}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:n}={}){return this.isValid?Rn.fromDateTimes(e||this.s,n||this.e):this}splitAt(...e){if(!this.isValid)return[];const n=e.map(Mh).filter(o=>this.contains(o)).sort(),i=[];let{s}=this,r=0;for(;s<this.e;){const o=n[r]||this.e,a=+o>+this.e?this.e:o;i.push(Rn.fromDateTimes(s,a)),s=a,r+=1}return i}splitBy(e){const n=zt.fromDurationLike(e);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:i}=this,s=1,r;const o=[];for(;i<this.e;){const a=this.start.plus(n.mapUnits(l=>l*s));r=+a>+this.e?this.e:a,o.push(Rn.fromDateTimes(i,r)),i=r,s+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const n=this.s>e.s?this.s:e.s,i=this.e<e.e?this.e:e.e;return n>=i?null:Rn.fromDateTimes(n,i)}union(e){if(!this.isValid)return this;const n=this.s<e.s?this.s:e.s,i=this.e>e.e?this.e:e.e;return Rn.fromDateTimes(n,i)}static merge(e){const[n,i]=e.sort((s,r)=>s.s-r.s).reduce(([s,r],o)=>r?r.overlaps(o)||r.abutsStart(o)?[s,r.union(o)]:[s.concat([r]),o]:[s,o],[[],null]);return i&&n.push(i),n}static xor(e){let n=null,i=0;const s=[],r=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...r),a=o.sort((l,c)=>l.time-c.time);for(const l of a)i+=l.type==="s"?1:-1,i===1?n=l.time:(n&&+n!=+l.time&&s.push(Rn.fromDateTimes(n,l.time)),n=null);return Rn.merge(s)}difference(...e){return Rn.xor([this].concat(e)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:Th}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Th}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Th}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Th}toFormat(e,{separator:n="  "}={}){return this.isValid?`${this.s.toFormat(e)}${n}${this.e.toFormat(e)}`:Th}toDuration(e,n){return this.isValid?this.e.diff(this.s,e,n):zt.invalid(this.invalidReason)}mapEndpoints(e){return Rn.fromDateTimes(e(this.s),e(this.e))}}class ig{static hasDST(e=ei.defaultZone){const n=Te.now().setZone(e).set({month:12});return!e.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(e){return Qa.isValidZone(e)}static normalizeZone(e){return bl(e,ei.defaultZone)}static months(e="long",{locale:n=null,numberingSystem:i=null,locObj:s=null,outputCalendar:r="gregory"}={}){return(s||$n.create(n,i,r)).months(e)}static monthsFormat(e="long",{locale:n=null,numberingSystem:i=null,locObj:s=null,outputCalendar:r="gregory"}={}){return(s||$n.create(n,i,r)).months(e,!0)}static weekdays(e="long",{locale:n=null,numberingSystem:i=null,locObj:s=null}={}){return(s||$n.create(n,i,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:n=null,numberingSystem:i=null,locObj:s=null}={}){return(s||$n.create(n,i,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return $n.create(e).meridiems()}static eras(e="short",{locale:n=null}={}){return $n.create(n,null,"gregory").eras(e)}static features(){return{relative:E7()}}}function P4(t,e){const n=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=n(e)-n(t);return Math.floor(zt.fromMillis(i).as("days"))}function iJ(t,e,n){const i=[["years",(a,l)=>l.year-a.year],["quarters",(a,l)=>l.quarter-a.quarter],["months",(a,l)=>l.month-a.month+(l.year-a.year)*12],["weeks",(a,l)=>{const c=P4(a,l);return(c-c%7)/7}],["days",P4]],s={};let r,o;for(const[a,l]of i)if(n.indexOf(a)>=0){r=a;let c=l(t,e);o=t.plus({[a]:c}),o>e?(t=t.plus({[a]:c-1}),c-=1):t=o,s[a]=c}return[t,s,o,r]}function sJ(t,e,n,i){let[s,r,o,a]=iJ(t,e,n);const l=e-s,c=n.filter(h=>["hours","minutes","seconds","milliseconds"].indexOf(h)>=0);c.length===0&&(o<e&&(o=s.plus({[a]:1})),o!==s&&(r[a]=(r[a]||0)+l/(o-s)));const u=zt.fromObject(r,i);return c.length>0?zt.fromMillis(l,i).shiftTo(...c).plus(u):u}const PC={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},T4={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},rJ=PC.hanidec.replace(/[\[|\]]/g,"").split("");function oJ(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);if(t[n].search(PC.hanidec)!==-1)e+=rJ.indexOf(t[n]);else for(const s in T4){const[r,o]=T4[s];i>=r&&i<=o&&(e+=i-r)}}return parseInt(e,10)}else return e}function zr({numberingSystem:t},e=""){return new RegExp(`${PC[t||"latn"]}${e}`)}const aJ="missing Intl.DateTimeFormat.formatToParts support";function Gt(t,e=n=>n){return{regex:t,deser:([n])=>e(oJ(n))}}const lJ="",J7=`[ ${lJ}]`,e9=new RegExp(J7,"g");function cJ(t){return t.replace(/\./g,"\\.?").replace(e9,J7)}function $4(t){return t.replace(/\./g,"").replace(e9," ").toLowerCase()}function Zr(t,e){return t===null?null:{regex:RegExp(t.map(cJ).join("|")),deser:([n])=>t.findIndex(i=>$4(n)===$4(i))+e}}function D4(t,e){return{regex:t,deser:([,n,i])=>$1(n,i),groups:e}}function Hb(t){return{regex:t,deser:([e])=>e}}function uJ(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function dJ(t,e){const n=zr(e),i=zr(e,"{2}"),s=zr(e,"{3}"),r=zr(e,"{4}"),o=zr(e,"{6}"),a=zr(e,"{1,2}"),l=zr(e,"{1,3}"),c=zr(e,"{1,6}"),u=zr(e,"{1,9}"),h=zr(e,"{2,4}"),p=zr(e,"{4,6}"),m=S=>({regex:RegExp(uJ(S.val)),deser:([x])=>x,literal:!0}),O=(S=>{if(t.literal)return m(S);switch(S.val){case"G":return Zr(e.eras("short",!1),0);case"GG":return Zr(e.eras("long",!1),0);case"y":return Gt(c);case"yy":return Gt(h,kv);case"yyyy":return Gt(r);case"yyyyy":return Gt(p);case"yyyyyy":return Gt(o);case"M":return Gt(a);case"MM":return Gt(i);case"MMM":return Zr(e.months("short",!0,!1),1);case"MMMM":return Zr(e.months("long",!0,!1),1);case"L":return Gt(a);case"LL":return Gt(i);case"LLL":return Zr(e.months("short",!1,!1),1);case"LLLL":return Zr(e.months("long",!1,!1),1);case"d":return Gt(a);case"dd":return Gt(i);case"o":return Gt(l);case"ooo":return Gt(s);case"HH":return Gt(i);case"H":return Gt(a);case"hh":return Gt(i);case"h":return Gt(a);case"mm":return Gt(i);case"m":return Gt(a);case"q":return Gt(a);case"qq":return Gt(i);case"s":return Gt(a);case"ss":return Gt(i);case"S":return Gt(l);case"SSS":return Gt(s);case"u":return Hb(u);case"uu":return Hb(a);case"uuu":return Gt(n);case"a":return Zr(e.meridiems(),0);case"kkkk":return Gt(r);case"kk":return Gt(h,kv);case"W":return Gt(a);case"WW":return Gt(i);case"E":case"c":return Gt(n);case"EEE":return Zr(e.weekdays("short",!1,!1),1);case"EEEE":return Zr(e.weekdays("long",!1,!1),1);case"ccc":return Zr(e.weekdays("short",!0,!1),1);case"cccc":return Zr(e.weekdays("long",!0,!1),1);case"Z":case"ZZ":return D4(new RegExp(`([+-]${a.source})(?::(${i.source}))?`),2);case"ZZZ":return D4(new RegExp(`([+-]${a.source})(${i.source})?`),2);case"z":return Hb(/[a-z_+-/]{1,256}?/i);default:return m(S)}})(t)||{invalidReason:aJ};return O.token=t,O}const hJ={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};function fJ(t,e,n){const{type:i,value:s}=t;if(i==="literal")return{literal:!0,val:s};const r=n[i];let o=hJ[i];if(typeof o=="object"&&(o=o[r]),o)return{literal:!1,val:o}}function pJ(t){return[`^${t.map(n=>n.regex).reduce((n,i)=>`${n}(${i.source})`,"")}$`,t]}function mJ(t,e,n){const i=t.match(e);if(i){const s={};let r=1;for(const o in n)if(Ad(n,o)){const a=n[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(s[a.token.val[0]]=a.deser(i.slice(r,r+l))),r+=l}return[i,s]}else return[i,{}]}function gJ(t){const e=r=>{switch(r){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n=null,i;return Bt(t.z)||(n=Qa.create(t.z)),Bt(t.Z)||(n||(n=new Ji(t.Z)),i=t.Z),Bt(t.q)||(t.M=(t.q-1)*3+1),Bt(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),Bt(t.u)||(t.S=vC(t.u)),[Object.keys(t).reduce((r,o)=>{const a=e(o);return a&&(r[a]=t[o]),r},{}),n,i]}let Yb=null;function yJ(){return Yb||(Yb=Te.fromMillis(1555555555555)),Yb}function OJ(t,e){if(t.literal)return t;const n=Cs.macroTokenToFormatOpts(t.val);if(!n)return t;const r=Cs.create(e,n).formatDateTimeParts(yJ()).map(o=>fJ(o,e,n));return r.includes(void 0)?t:r}function bJ(t,e){return Array.prototype.concat(...t.map(n=>OJ(n,e)))}function t9(t,e,n){const i=bJ(Cs.parseFormat(n),t),s=i.map(o=>dJ(o,t)),r=s.find(o=>o.invalidReason);if(r)return{input:e,tokens:i,invalidReason:r.invalidReason};{const[o,a]=pJ(s),l=RegExp(o,"i"),[c,u]=mJ(e,l,a),[h,p,m]=u?gJ(u):[null,null,void 0];if(Ad(u,"a")&&Ad(u,"H"))throw new Zh("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:i,regex:l,rawMatches:c,matches:u,result:h,zone:p,specificOffset:m}}}function vJ(t,e,n){const{result:i,zone:s,specificOffset:r,invalidReason:o}=t9(t,e,n);return[i,s,r,o]}const n9=[0,31,59,90,120,151,181,212,243,273,304,334],i9=[0,31,60,91,121,152,182,213,244,274,305,335];function Ar(t,e){return new Hr("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function s9(t,e,n){const i=new Date(Date.UTC(t,e-1,n));t<100&&t>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const s=i.getUTCDay();return s===0?7:s}function r9(t,e,n){return n+(Pp(t)?i9:n9)[e-1]}function o9(t,e){const n=Pp(t)?i9:n9,i=n.findIndex(r=>r<e),s=e-n[i];return{month:i+1,day:s}}function Mv(t){const{year:e,month:n,day:i}=t,s=r9(e,n,i),r=s9(e,n,i);let o=Math.floor((s-r+10)/7),a;return o<1?(a=e-1,o=qy(a)):o>qy(e)?(a=e+1,o=1):a=e,{weekYear:a,weekNumber:o,weekday:r,...D1(t)}}function M4(t){const{weekYear:e,weekNumber:n,weekday:i}=t,s=s9(e,1,4),r=cf(e);let o=n*7+i-s-3,a;o<1?(a=e-1,o+=cf(a)):o>r?(a=e+1,o-=cf(e)):a=e;const{month:l,day:c}=o9(a,o);return{year:a,month:l,day:c,...D1(t)}}function Kb(t){const{year:e,month:n,day:i}=t,s=r9(e,n,i);return{year:e,ordinal:s,...D1(t)}}function I4(t){const{year:e,ordinal:n}=t,{month:i,day:s}=o9(e,n);return{year:e,month:i,day:s,...D1(t)}}function wJ(t){const e=T1(t.weekYear),n=Sa(t.weekNumber,1,qy(t.weekYear)),i=Sa(t.weekday,1,7);return e?n?i?!1:Ar("weekday",t.weekday):Ar("week",t.week):Ar("weekYear",t.weekYear)}function SJ(t){const e=T1(t.year),n=Sa(t.ordinal,1,cf(t.year));return e?n?!1:Ar("ordinal",t.ordinal):Ar("year",t.year)}function a9(t){const e=T1(t.year),n=Sa(t.month,1,12),i=Sa(t.day,1,Zy(t.year,t.month));return e?n?i?!1:Ar("day",t.day):Ar("month",t.month):Ar("year",t.year)}function l9(t){const{hour:e,minute:n,second:i,millisecond:s}=t,r=Sa(e,0,23)||e===24&&n===0&&i===0&&s===0,o=Sa(n,0,59),a=Sa(i,0,59),l=Sa(s,0,999);return r?o?a?l?!1:Ar("millisecond",s):Ar("second",i):Ar("minute",n):Ar("hour",e)}const Jb="Invalid DateTime",R4=864e13;function sg(t){return new Hr("unsupported zone",`the zone "${t.name}" is not supported`)}function e2(t){return t.weekData===null&&(t.weekData=Mv(t.c)),t.weekData}function $h(t,e){const n={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new Te({...n,...e,old:n})}function c9(t,e,n){let i=t-e*60*1e3;const s=n.offset(i);if(e===s)return[i,e];i-=(s-e)*60*1e3;const r=n.offset(i);return s===r?[i,s]:[t-Math.min(s,r)*60*1e3,Math.max(s,r)]}function _4(t,e){t+=e*60*1e3;const n=new Date(t);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function Xg(t,e,n){return c9(SC(t),e,n)}function E4(t,e){const n=t.o,i=t.c.year+Math.trunc(e.years),s=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,r={...t.c,year:i,month:s,day:Math.min(t.c.day,Zy(i,s))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=zt.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=SC(r);let[l,c]=c9(a,n,t.zone);return o!==0&&(l+=o,c=t.zone.offset(l)),{ts:l,o:c}}function Dh(t,e,n,i,s,r){const{setZone:o,zone:a}=n;if(t&&Object.keys(t).length!==0){const l=e||a,c=Te.fromObject(t,{...n,zone:l,specificOffset:r});return o?c:c.setZone(a)}else return Te.invalid(new Hr("unparsable",`the input "${s}" can't be parsed as ${i}`))}function rg(t,e,n=!0){return t.isValid?Cs.create($n.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(t,e):null}function t2(t,e){const n=t.c.year>9999||t.c.year<0;let i="";return n&&t.c.year>=0&&(i+="+"),i+=qn(t.c.year,n?6:4),e?(i+="-",i+=qn(t.c.month),i+="-",i+=qn(t.c.day)):(i+=qn(t.c.month),i+=qn(t.c.day)),i}function Q4(t,e,n,i,s,r){let o=qn(t.c.hour);return e?(o+=":",o+=qn(t.c.minute),(t.c.second!==0||!n)&&(o+=":")):o+=qn(t.c.minute),(t.c.second!==0||!n)&&(o+=qn(t.c.second),(t.c.millisecond!==0||!i)&&(o+=".",o+=qn(t.c.millisecond,3))),s&&(t.isOffsetFixed&&t.offset===0&&!r?o+="Z":t.o<0?(o+="-",o+=qn(Math.trunc(-t.o/60)),o+=":",o+=qn(Math.trunc(-t.o%60))):(o+="+",o+=qn(Math.trunc(t.o/60)),o+=":",o+=qn(Math.trunc(t.o%60)))),r&&(o+="["+t.zone.ianaName+"]"),o}const u9={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},CJ={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},AJ={ordinal:1,hour:0,minute:0,second:0,millisecond:0},d9=["year","month","day","hour","minute","second","millisecond"],xJ=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],kJ=["year","ordinal","hour","minute","second","millisecond"];function N4(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new m7(t);return e}function L4(t,e){const n=bl(e.zone,ei.defaultZone),i=$n.fromObject(e),s=ei.now();let r,o;if(Bt(t.year))r=s;else{for(const c of d9)Bt(t[c])&&(t[c]=u9[c]);const a=a9(t)||l9(t);if(a)return Te.invalid(a);const l=n.offset(s);[r,o]=Xg(t,l,n)}return new Te({ts:r,zone:n,loc:i,o})}function F4(t,e,n){const i=Bt(n.round)?!0:n.round,s=(o,a)=>(o=wC(o,i||n.calendary?0:2,!0),e.loc.clone(n).relFormatter(n).format(o,a)),r=o=>n.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(n.unit)return s(r(n.unit),n.unit);for(const o of n.units){const a=r(o);if(Math.abs(a)>=1)return s(a,o)}return s(t>e?-0:0,n.units[n.units.length-1])}function B4(t){let e={},n;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],n=Array.from(t).slice(0,t.length-1)):n=Array.from(t),[e,n]}class Te{constructor(e){const n=e.zone||ei.defaultZone;let i=e.invalid||(Number.isNaN(e.ts)?new Hr("invalid input"):null)||(n.isValid?null:sg(n));this.ts=Bt(e.ts)?ei.now():e.ts;let s=null,r=null;if(!i)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(n))[s,r]=[e.old.c,e.old.o];else{const a=n.offset(this.ts);s=_4(this.ts,a),i=Number.isNaN(s.year)?new Hr("invalid input"):null,s=i?null:s,r=i?null:a}this._zone=n,this.loc=e.loc||$n.create(),this.invalid=i,this.weekData=null,this.c=s,this.o=r,this.isLuxonDateTime=!0}static now(){return new Te({})}static local(){const[e,n]=B4(arguments),[i,s,r,o,a,l,c]=n;return L4({year:i,month:s,day:r,hour:o,minute:a,second:l,millisecond:c},e)}static utc(){const[e,n]=B4(arguments),[i,s,r,o,a,l,c]=n;return e.zone=Ji.utcInstance,L4({year:i,month:s,day:r,hour:o,minute:a,second:l,millisecond:c},e)}static fromJSDate(e,n={}){const i=_Y(e)?e.valueOf():NaN;if(Number.isNaN(i))return Te.invalid("invalid input");const s=bl(n.zone,ei.defaultZone);return s.isValid?new Te({ts:i,zone:s,loc:$n.fromObject(n)}):Te.invalid(sg(s))}static fromMillis(e,n={}){if(Dc(e))return e<-R4||e>R4?Te.invalid("Timestamp out of range"):new Te({ts:e,zone:bl(n.zone,ei.defaultZone),loc:$n.fromObject(n)});throw new wr(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,n={}){if(Dc(e))return new Te({ts:e*1e3,zone:bl(n.zone,ei.defaultZone),loc:$n.fromObject(n)});throw new wr("fromSeconds requires a numerical input")}static fromObject(e,n={}){e=e||{};const i=bl(n.zone,ei.defaultZone);if(!i.isValid)return Te.invalid(sg(i));const s=ei.now(),r=Bt(n.specificOffset)?i.offset(s):n.specificOffset,o=Xy(e,N4),a=!Bt(o.ordinal),l=!Bt(o.year),c=!Bt(o.month)||!Bt(o.day),u=l||c,h=o.weekYear||o.weekNumber,p=$n.fromObject(n);if((u||a)&&h)throw new Zh("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&a)throw new Zh("Can't mix ordinal dates with month/day");const m=h||o.weekday&&!u;let y,O,S=_4(s,r);m?(y=xJ,O=CJ,S=Mv(S)):a?(y=kJ,O=AJ,S=Kb(S)):(y=d9,O=u9);let x=!1;for(const G of y){const Z=o[G];Bt(Z)?x?o[G]=O[G]:o[G]=S[G]:x=!0}const T=m?wJ(o):a?SJ(o):a9(o),k=T||l9(o);if(k)return Te.invalid(k);const D=m?M4(o):a?I4(o):o,[M,L]=Xg(D,r,i),j=new Te({ts:M,zone:i,o:L,loc:p});return o.weekday&&u&&e.weekday!==j.weekday?Te.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${j.toISO()}`):j}static fromISO(e,n={}){const[i,s]=BK(e);return Dh(i,s,n,"ISO 8601",e)}static fromRFC2822(e,n={}){const[i,s]=VK(e);return Dh(i,s,n,"RFC 2822",e)}static fromHTTP(e,n={}){const[i,s]=jK(e);return Dh(i,s,n,"HTTP",n)}static fromFormat(e,n,i={}){if(Bt(e)||Bt(n))throw new wr("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:r=null}=i,o=$n.fromOpts({locale:s,numberingSystem:r,defaultToEN:!0}),[a,l,c,u]=vJ(o,e,n);return u?Te.invalid(u):Dh(a,l,i,`format ${n}`,e,c)}static fromString(e,n,i={}){return Te.fromFormat(e,n,i)}static fromSQL(e,n={}){const[i,s]=UK(e);return Dh(i,s,n,"SQL",e)}static invalid(e,n=null){if(!e)throw new wr("need to specify a reason the DateTime is invalid");const i=e instanceof Hr?e:new Hr(e,n);if(ei.throwOnInvalid)throw new TY(i);return new Te({invalid:i})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?e2(this).weekYear:NaN}get weekNumber(){return this.isValid?e2(this).weekNumber:NaN}get weekday(){return this.isValid?e2(this).weekday:NaN}get ordinal(){return this.isValid?Kb(this.c).ordinal:NaN}get monthShort(){return this.isValid?ig.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?ig.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?ig.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?ig.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return Pp(this.year)}get daysInMonth(){return Zy(this.year,this.month)}get daysInYear(){return this.isValid?cf(this.year):NaN}get weeksInWeekYear(){return this.isValid?qy(this.weekYear):NaN}resolvedLocaleOptions(e={}){const{locale:n,numberingSystem:i,calendar:s}=Cs.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:n,numberingSystem:i,outputCalendar:s}}toUTC(e=0,n={}){return this.setZone(Ji.instance(e),n)}toLocal(){return this.setZone(ei.defaultZone)}setZone(e,{keepLocalTime:n=!1,keepCalendarTime:i=!1}={}){if(e=bl(e,ei.defaultZone),e.equals(this.zone))return this;if(e.isValid){let s=this.ts;if(n||i){const r=e.offset(this.ts),o=this.toObject();[s]=Xg(o,r,e)}return $h(this,{ts:s,zone:e})}else return Te.invalid(sg(e))}reconfigure({locale:e,numberingSystem:n,outputCalendar:i}={}){const s=this.loc.clone({locale:e,numberingSystem:n,outputCalendar:i});return $h(this,{loc:s})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const n=Xy(e,N4),i=!Bt(n.weekYear)||!Bt(n.weekNumber)||!Bt(n.weekday),s=!Bt(n.ordinal),r=!Bt(n.year),o=!Bt(n.month)||!Bt(n.day),a=r||o,l=n.weekYear||n.weekNumber;if((a||s)&&l)throw new Zh("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(o&&s)throw new Zh("Can't mix ordinal dates with month/day");let c;i?c=M4({...Mv(this.c),...n}):Bt(n.ordinal)?(c={...this.toObject(),...n},Bt(n.day)&&(c.day=Math.min(Zy(c.year,c.month),c.day))):c=I4({...Kb(this.c),...n});const[u,h]=Xg(c,this.o,this.zone);return $h(this,{ts:u,o:h})}plus(e){if(!this.isValid)return this;const n=zt.fromDurationLike(e);return $h(this,E4(this,n))}minus(e){if(!this.isValid)return this;const n=zt.fromDurationLike(e).negate();return $h(this,E4(this,n))}startOf(e){if(!this.isValid)return this;const n={},i=zt.normalizeUnit(e);switch(i){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(i==="weeks"&&(n.weekday=1),i==="quarters"){const s=Math.ceil(this.month/3);n.month=(s-1)*3+1}return this.set(n)}endOf(e){return this.isValid?this.plus({[e]:1}).startOf(e).minus(1):this}toFormat(e,n={}){return this.isValid?Cs.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,e):Jb}toLocaleString(e=xv,n={}){return this.isValid?Cs.create(this.loc.clone(n),e).formatDateTime(this):Jb}toLocaleParts(e={}){return this.isValid?Cs.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:n=!1,suppressMilliseconds:i=!1,includeOffset:s=!0,extendedZone:r=!1}={}){if(!this.isValid)return null;const o=e==="extended";let a=t2(this,o);return a+="T",a+=Q4(this,o,n,i,s,r),a}toISODate({format:e="extended"}={}){return this.isValid?t2(this,e==="extended"):null}toISOWeekDate(){return rg(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:n=!1,includeOffset:i=!0,includePrefix:s=!1,extendedZone:r=!1,format:o="extended"}={}){return this.isValid?(s?"T":"")+Q4(this,o==="extended",n,e,i,r):null}toRFC2822(){return rg(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return rg(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?t2(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:n=!1,includeOffsetSpace:i=!0}={}){let s="HH:mm:ss.SSS";return(n||e)&&(i&&(s+=" "),n?s+="z":e&&(s+="ZZ")),rg(this,s,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Jb}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const n={...this.c};return e.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,n="milliseconds",i={}){if(!this.isValid||!e.isValid)return zt.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...i},r=EY(n).map(zt.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,l=o?e:this,c=sJ(a,l,r,s);return o?c.negate():c}diffNow(e="milliseconds",n={}){return this.diff(Te.now(),e,n)}until(e){return this.isValid?Rn.fromDateTimes(this,e):this}hasSame(e,n){if(!this.isValid)return!1;const i=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(n)<=i&&i<=s.endOf(n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const n=e.base||Te.fromObject({},{zone:this.zone}),i=e.padding?this<n?-e.padding:e.padding:0;let s=["years","months","days","hours","minutes","seconds"],r=e.unit;return Array.isArray(e.unit)&&(s=e.unit,r=void 0),F4(n,this.plus(i),{...e,numeric:"always",units:s,unit:r})}toRelativeCalendar(e={}){return this.isValid?F4(e.base||Te.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(Te.isDateTime))throw new wr("min requires all arguments be DateTimes");return y4(e,n=>n.valueOf(),Math.min)}static max(...e){if(!e.every(Te.isDateTime))throw new wr("max requires all arguments be DateTimes");return y4(e,n=>n.valueOf(),Math.max)}static fromFormatExplain(e,n,i={}){const{locale:s=null,numberingSystem:r=null}=i,o=$n.fromOpts({locale:s,numberingSystem:r,defaultToEN:!0});return t9(o,e,n)}static fromStringExplain(e,n,i={}){return Te.fromFormatExplain(e,n,i)}static get DATE_SHORT(){return xv}static get DATE_MED(){return g7}static get DATE_MED_WITH_WEEKDAY(){return MY}static get DATE_FULL(){return y7}static get DATE_HUGE(){return O7}static get TIME_SIMPLE(){return b7}static get TIME_WITH_SECONDS(){return v7}static get TIME_WITH_SHORT_OFFSET(){return w7}static get TIME_WITH_LONG_OFFSET(){return S7}static get TIME_24_SIMPLE(){return C7}static get TIME_24_WITH_SECONDS(){return A7}static get TIME_24_WITH_SHORT_OFFSET(){return x7}static get TIME_24_WITH_LONG_OFFSET(){return k7}static get DATETIME_SHORT(){return P7}static get DATETIME_SHORT_WITH_SECONDS(){return T7}static get DATETIME_MED(){return $7}static get DATETIME_MED_WITH_SECONDS(){return D7}static get DATETIME_MED_WITH_WEEKDAY(){return IY}static get DATETIME_FULL(){return M7}static get DATETIME_FULL_WITH_SECONDS(){return I7}static get DATETIME_HUGE(){return R7}static get DATETIME_HUGE_WITH_SECONDS(){return _7}}function Mh(t){if(Te.isDateTime(t))return t;if(t&&t.valueOf&&Dc(t.valueOf()))return Te.fromJSDate(t);if(t&&typeof t=="object")return Te.fromObject(t);throw new wr(`Unknown datetime argument: ${t}, of type ${typeof t}`)}var Jr,Wg,Xh;const F0=class F0{constructor(e,n){yn(this,Jr);this.db=e,this.fyo=n}toDocValueMap(e,n){return n??(n={}),Array.isArray(n)?n.map(i=>Ke(this,Jr,Wg).call(this,e,i)):Ke(this,Jr,Wg).call(this,e,n)}toRawValueMap(e,n){return n??(n={}),Array.isArray(n)?n.map(i=>Ke(this,Jr,Xh).call(this,e,i)):Ke(this,Jr,Xh).call(this,e,n)}static toDocValue(e,n,i){switch(n.fieldtype){case Ie.Currency:return TJ(e,n,i);case Ie.Date:return V4(e,n);case Ie.Datetime:return V4(e,n);case Ie.Int:return $J(e,n);case Ie.Float:return h9(e,n);case Ie.Check:return DJ(e,n);case Ie.Attachment:return MJ(e,n);default:return PJ(e,n)}}static toRawValue(e,n,i){switch(n.fieldtype){case Ie.Currency:return IJ(e,i,n);case Ie.Date:return EJ(e,n);case Ie.Datetime:return QJ(e,n);case Ie.Int:return RJ(e,n);case Ie.Float:return _J(e,n);case Ie.Check:return NJ(e,n);case Ie.Link:return FJ(e,n);case Ie.Attachment:return BJ(e,n);case Ie.Button:return null;default:return LJ(e,n)}}};Jr=new WeakSet,Wg=function(e,n){const i=this.db.fieldMap[e],s={};for(const r in n){const o=i[r],a=n[r];if(o)if(Array.isArray(a)){const l=o.target;s[r]=a.map(c=>Ke(this,Jr,Wg).call(this,l,c))}else s[r]=F0.toDocValue(a,o,this.fyo)}return s},Xh=function(e,n){const i=this.db.fieldMap[e],s={};for(const r in n){const o=i[r],a=n[r];if(Array.isArray(a)){const l=o.target;s[r]=a.map(c=>c instanceof ze?Ke(this,Jr,Xh).call(this,l,c.getValidDict()):Ke(this,Jr,Xh).call(this,l,c))}else s[r]=F0.toRawValue(a,o,this.fyo)}return s};let Lc=F0;function PJ(t,e){if(t===null||t===void 0)return null;if(typeof t=="string")return t;ki(t,e,"doc")}function V4(t,e){if(t instanceof Date)return t;if(t===null||t==="")return null;typeof t!="string"&&ki(t,e,"doc");const n=Te.fromISO(t).toJSDate();return n.toString()==="Invalid Date"&&ki(t,e,"doc"),n}function TJ(t,e,n){if(ui(t))return t;if(t==="")return n.pesa(0);if(typeof t=="string"||typeof t=="number")return n.pesa(t);if(typeof t=="boolean")return n.pesa(Number(t));if(t===null)return n.pesa(0);ki(t,e,"doc")}function $J(t,e){return t===""?0:(typeof t=="string"&&(t=Jc(t)),h9(t,e))}function h9(t,e){if(t==="")return 0;if(typeof t=="boolean")return Number(t);if(typeof t=="string"&&(t=kn(t)),t===null&&(t=0),typeof t=="number"&&!Number.isNaN(t))return t;ki(t,e,"doc")}function DJ(t,e){if(typeof t=="boolean")return t;if(typeof t=="string")return!!kn(t);if(typeof t=="number")return!!t;ki(t,e,"doc")}function MJ(t,e){if(!t)return null;typeof t!="string"&&ki(t,e,"doc");try{return JSON.parse(t)||null}catch{ki(t,e,"doc")}}function IJ(t,e,n){if(ui(t))return t.store;if(xi(t))return e.pesa(0).store;if(typeof t=="number"||typeof t=="string")return e.pesa(t).store;ki(t,n,"raw")}function RJ(t,e){if(typeof t=="string")return Jc(t);if(xi(t))return 0;if(typeof t=="number")return Math.floor(t);ki(t,e,"raw")}function _J(t,e){if(typeof t=="string")return kn(t);if(xi(t))return 0;if(typeof t=="number")return t;ki(t,e,"raw")}function EJ(t,e){if(t===null)return null;if((typeof t=="string"||typeof t=="number")&&(t=new Date(t)),t instanceof Date)return Te.fromJSDate(t).toISODate();if(t instanceof Te)return t.toISODate();ki(t,e,"raw")}function QJ(t,e){if(t===null)return null;if(typeof t=="string")return t;if(t instanceof Date)return t.toISOString();if(t instanceof Te)return t.toJSDate().toISOString();ki(t,e,"raw")}function NJ(t,e){if(typeof t=="number"&&(t=!!t),typeof t=="boolean")return Number(t);ki(t,e,"raw")}function LJ(t,e){if(t===null||t===void 0)return null;if(typeof t=="string")return t;ki(t,e,"raw")}function FJ(t,e){if(t===null||!(t!=null&&t.length))return null;if(typeof t=="string")return t;ki(t,e,"raw")}function BJ(t,e){if(!t)return null;if(t!=null&&t.name&&(t!=null&&t.data)&&(t!=null&&t.type))return JSON.stringify(t);ki(t,e,"raw")}function ki(t,e,n){throw new oo(`invalid ${n} conversion '${String(t)}' of type ${typeof t} found, field: ${JSON.stringify(e)}`)}var ld,sn,ma,Sc,$a,Gg,Iv;class VJ extends LH{constructor(n,i){super();yn(this,$a);yn(this,ld);yn(this,sn);yn(this,ma);yn(this,Sc);Tn(this,ma,{}),Tn(this,Sc,{}),this.observer=new Cl,Tn(this,ld,n),this.converter=new Lc(this,nt(this,ld)),i!==void 0?Tn(this,sn,new i(n.isElectron)):Tn(this,sn,new BH(n.isElectron))}get schemaMap(){return nt(this,ma)}get fieldMap(){return nt(this,Sc)}get isConnected(){return!!this.dbPath}async createNewDatabase(n,i){return i=await nt(this,sn).createNewDatabase(n,i),await this.init(),this.dbPath=n,i}async connectToDatabase(n,i){return i=await nt(this,sn).connectToDatabase(n,i),await this.init(),this.dbPath=n,i}async init(){Tn(this,ma,await nt(this,sn).getSchemaMap()),Ke(this,$a,Iv).call(this),this.observer=new Cl}async translateSchemaMap(n){n?Fy(nt(this,ma),n,s7):(Tn(this,ma,await nt(this,sn).getSchemaMap()),Ke(this,$a,Iv).call(this))}async purgeCache(){await this.close(),this.dbPath=void 0,Tn(this,ma,{}),Tn(this,Sc,{})}async insert(n,i){let s=this.converter.toRawValueMap(n,i);return s=await nt(this,sn).call("insert",n,s),this.observer.trigger(`insert:${n}`,i),this.converter.toDocValueMap(n,s)}async get(n,i,s){const r=await nt(this,sn).call("get",n,i,s);return this.observer.trigger(`get:${n}`,{name:i,fields:s}),this.converter.toDocValueMap(n,r)}async getAll(n,i={}){const s=await Ke(this,$a,Gg).call(this,n,i);return this.observer.trigger(`getAll:${n}`,i),this.converter.toDocValueMap(n,s)}async getAllRaw(n,i={}){const s=await Ke(this,$a,Gg).call(this,n,i);return this.observer.trigger(`getAllRaw:${n}`,i),s}async getSingleValues(...n){const i=await nt(this,sn).call("getSingleValues",...n),s=[];for(const r of i){const o=this.fieldMap[r.parent][r.fieldname],a=Lc.toDocValue(r.value,o,nt(this,ld));s.push({value:a,parent:r.parent,fieldname:r.fieldname})}return this.observer.trigger("getSingleValues",n),s}async count(n,i={}){const r=(await Ke(this,$a,Gg).call(this,n,i)).length;return this.observer.trigger(`count:${n}`,i),r}async rename(n,i,s){await nt(this,sn).call("rename",n,i,s),this.observer.trigger(`rename:${n}`,{oldName:i,newName:s})}async update(n,i){const s=this.converter.toRawValueMap(n,i);await nt(this,sn).call("update",n,s),this.observer.trigger(`update:${n}`,i)}async delete(n,i){await nt(this,sn).call("delete",n,i),this.observer.trigger(`delete:${n}`,i)}async deleteAll(n,i){const s=await nt(this,sn).call("deleteAll",n,i);return this.observer.trigger(`deleteAll:${n}`,i),s}async exists(n,i){const s=await nt(this,sn).call("exists",n,i);return this.observer.trigger(`exists:${n}`,i),s}async close(){await nt(this,sn).call("close")}async getLastInserted(n){var i;if(((i=this.schemaMap[n])==null?void 0:i.naming)!=="autoincrement")throw new oo(`invalid schema, ${n} does not have autoincrement naming`);return await nt(this,sn).callBespoke("getLastInserted",n)}async getTopExpenses(n,i){return await nt(this,sn).callBespoke("getTopExpenses",n,i)}async getTotalOutstanding(n,i,s){return await nt(this,sn).callBespoke("getTotalOutstanding",n,i,s)}async getCashflow(n,i){return await nt(this,sn).callBespoke("getCashflow",n,i)}async getIncomeAndExpenses(n,i){return await nt(this,sn).callBespoke("getIncomeAndExpenses",n,i)}async getTotalCreditAndDebit(){return await nt(this,sn).callBespoke("getTotalCreditAndDebit")}async getStockQuantity(n,i,s,r,o,a){return await nt(this,sn).callBespoke("getStockQuantity",n,i,s,r,o,a)}async getReturnBalanceItemsQty(n,i){return await nt(this,sn).callBespoke("getReturnBalanceItemsQty",n,i)}async getPOSTransactedAmount(n,i,s){return await nt(this,sn).callBespoke("getPOSTransactedAmount",n,i,s)}}ld=new WeakMap,sn=new WeakMap,ma=new WeakMap,Sc=new WeakMap,$a=new WeakSet,Gg=async function(n,i={}){return await nt(this,sn).call("getAll",n,i)},Iv=function(){Tn(this,Sc,Object.values(this.schemaMap).reduce((n,i)=>(i!=null&&i.name&&(n[i==null?void 0:i.name]=er(i==null?void 0:i.fields,"fieldname")),n),{}))};const jJ=/[/\=\?\&\%]/;function zJ(t,e,n){return t+e.toString().padStart(n??4,"0")}class ZJ extends ze{constructor(){super(...arguments),this.validations={name:e=>{if(typeof e=="string"&&jJ.test(e))throw new ie(this.fyo.t`The following characters cannot be used ${"/, ?, &, =, %"} in a Number Series name.`)}},this.readOnly={referenceType:()=>this.inserted,padZeros:()=>this.inserted,start:()=>this.inserted}}setCurrent(){let e=this.get("current");e?e=e+1:e=this.get("start"),this.current=e}async next(e){return this.setCurrent(),await this.checkIfCurrentExists(e)&&(this.current=this.current+1),await this.sync(),this.getPaddedName(this.current)}async checkIfCurrentExists(e){if(!e)return!0;const n=this.getPaddedName(this.current);return await this.fyo.db.exists(e,n)}getPaddedName(e){return zJ(this.name,e,this.padZeros)}}const qJ=/[/\=\?\&\%]/;function XJ(t,e,n){return t+e.toString().padStart(n??4,"0")}class WJ extends ze{constructor(){super(...arguments),this.validations={name:e=>{if(typeof e=="string"&&qJ.test(e))throw new ie(this.fyo.t`The following characters cannot be used ${"/, ?, &, =, %"} in a Number Series name.`)}},this.readOnly={referenceType:()=>this.inserted,padZeros:()=>this.inserted,start:()=>this.inserted}}setCurrent(){let e=this.get("current");e?e=e+1:e=this.get("start"),this.current=e}async next(e){return this.setCurrent(),await this.checkIfCurrentExists(e)&&(this.current=this.current+1),await this.sync(),this.getPaddedName(this.current)}async checkIfCurrentExists(e){if(!e)return!0;const n=this.getPaddedName(this.current);return await this.fyo.db.exists(e,n)}getPaddedName(e){return XJ(this.name,e,this.padZeros)}}const GJ=/[/\=\?\&\%]/;function UJ(t,e,n){return t+e.toString().padStart(n??4,"0")}class HJ extends ze{constructor(){super(...arguments),this.validations={name:e=>{if(typeof e=="string"&&GJ.test(e))throw new ie(this.fyo.t`The following characters cannot be used ${"/, ?, &, =, %"} in a Number Series name.`)}},this.readOnly={referenceType:()=>this.inserted,padZeros:()=>this.inserted,start:()=>this.inserted}}setCurrent(){let e=this.get("current");e?e=e+1:e=this.get("start"),this.current=e}async next(e){return this.setCurrent(),await this.checkIfCurrentExists(e)&&(this.current=this.current+1),await this.sync(),this.getPaddedName(this.current)}async checkIfCurrentExists(e){if(!e)return!0;const n=this.getPaddedName(this.current);return await this.fyo.db.exists(e,n)}getPaddedName(e){return UJ(this.name,e,this.padZeros)}}const YJ={code:"af",currency:"AFN",currency_fraction:"Pul",currency_fraction_units:100,currency_symbol:"",timezones:["Asia/Kabul"],fiscal_year_start:"12-20",fiscal_year_end:"12-21",locale:"ps-AF"},KJ={code:"al",currency:"ALL",currency_fraction:"Qindark",currency_fraction_units:100,currency_name:"Lek",currency_symbol:"L",timezones:["Europe/Tirane"],locale:"sq-AL"},JJ={code:"dz",currency:"DZD",currency_fraction:"Santeem",currency_fraction_units:100,currency_name:"Algerian Dinar",currency_symbol:".",timezones:["Africa/Algiers"],locale:"ar-DZ"},eee={code:"ad",currency:"EUR",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"",timezones:["Europe/Andorra"]},tee={code:"ao",currency:"AOA",currency_fraction:"Cntimo",currency_fraction_units:100,currency_symbol:"Kz",currency_name:"Kwanza",timezones:["Africa/Luanda"]},nee={code:"ai",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"$",currency_name:"Eastern Carribean Dollar",currency:"XCD",timezones:["America/Anguilla"]},iee={code:"aq",timezones:["Antarctica/Casey","Antarctica/Davis","Antarctica/DumontDUrville","Antarctica/Macquarie","Antarctica/Mawson","Antarctica/McMurdo","Antarctica/Palmer","Antarctica/Rothera","Antarctica/Syowa","Antarctica/Vostok"]},see={code:"ar",currency:"ARS",currency_fraction:"Centavo",currency_fraction_units:100,currency_name:"Argentine Peso",currency_symbol:"$",timezones:["America/Argentina/Buenos_Aires","America/Argentina/Catamarca","America/Argentina/Cordoba","America/Argentina/Jujuy","America/Argentina/La_Rioja","America/Argentina/Mendoza","America/Argentina/Rio_Gallegos","America/Argentina/Salta","America/Argentina/San_Juan","America/Argentina/San_Luis","America/Argentina/Tucuman","America/Argentina/Ushuaia"],locale:"es-AR"},ree={code:"am",currency:"AMD",currency_fraction:"Luma",currency_fraction_units:100,currency_name:"Armenian Dram",currency_symbol:"",timezones:["Asia/Yerevan"],locale:"hy-AM"},oee={code:"aw",currency:"AWG",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"Aruban Florin",currency_symbol:"Afl",timezones:["America/Aruba"]},aee={code:"au",currency:"AUD",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"Australian Dollar",currency_symbol:"$",timezones:["Australia/Adelaide","Australia/Brisbane","Australia/Broken_Hill","Australia/Currie","Australia/Darwin","Australia/Eucla","Australia/Hobart","Australia/Lindeman","Australia/Lord_Howe","Australia/Melbourne","Australia/Perth","Australia/Sydney"],fiscal_year_start:"07-01",fiscal_year_end:"06-30",locale:"en-AU"},lee={code:"at",currency:"EUR",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"",timezones:["Europe/Vienna"],locale:"de-AT"},cee={code:"az",currency_fraction:"Qpik",currency_fraction_units:100,currency_symbol:"",timezones:["Asia/Baku"]},uee={code:"bs",currency:"BSD",currency_name:"Bahamian Dollar",timezones:["America/Nassau"]},dee={code:"bh",currency:"BHD",currency_fraction:"Fils",currency_fraction_units:1e3,currency_name:"Bahraini Dinar",currency_symbol:"..",timezones:["Asia/Bahrain"],locale:"ar-BH"},hee={code:"bd",currency:"BDT",currency_fraction:"Paisa",currency_fraction_units:100,currency_name:"Taka",currency_symbol:"",timezones:["Asia/Dhaka"],fiscal_year_start:"07-01",fiscal_year_end:"06-30",locale:"bn-BD"},fee={code:"bb",currency:"BBD",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"Barbados Dollar",currency_symbol:"$",timezones:["America/Barbados"]},pee={code:"by",currency_fraction:"Kapyeyka",currency_fraction_units:100,currency_symbol:"Br",timezones:["Europe/Minsk"],locale:"be-BY"},mee={code:"be",currency:"EUR",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"",timezones:["Europe/Brussels"],locale:"en-BE"},gee={code:"bz",currency:"BZD",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"Belize Dollar",currency_symbol:"$",date_format:"MM-dd-yyyy",timezones:["America/Belize"],locale:"en-BZ"},yee={code:"bj",currency:"XOF",currency_name:"West African CFA Franc",currency_symbol:"CFA",currency_fraction:"Centime",currency_fraction_units:100,timezones:["Africa/Porto-Novo"],locale:"fr-BJ"},Oee={code:"bm",currency:"BMD",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"Bermudian Dollar",currency_symbol:"$",timezones:["Atlantic/Bermuda"]},bee={code:"bt",currency:"BTN",currency_fraction:"Chetrum",currency_fraction_units:100,currency_name:"Ngultrum",currency_symbol:"Nu.",timezones:["Asia/Thimphu"]},vee={code:"bw",currency:"BWP",currency_fraction:"Thebe",currency_fraction_units:100,currency_name:"Pula",currency_symbol:"P",timezones:["Africa/Gaborone"],locale:"en-BW"},wee={code:"br",currency:"BRL",currency_fraction:"Centavo",currency_fraction_units:100,currency_symbol:"R$",date_format:"dd/MM/yyyy",timezones:["America/Araguaina","America/Bahia","America/Belem","America/Boa_Vista","America/Campo_Grande","America/Cuiaba","America/Eirunepe","America/Fortaleza","America/Maceio","America/Manaus","America/Noronha","America/Porto_Velho","America/Recife","America/Rio_Branco","America/Santarem","America/Sao_Paulo"],locale:"pt-BR"},See={code:"bg",currency:"BGN",currency_name:"Bulgarian Lev",currency_fraction:"Stotinka",currency_fraction_units:100,currency_symbol:"",timezones:["Europe/Sofia"],locale:"bg-BG"},Cee={code:"bi",currency:"BIF",currency_fraction:"Centime",currency_fraction_units:100,currency_name:"Burundi Franc",currency_symbol:"Fr",timezones:["Africa/Bujumbura"],locale:"fr-BI"},Aee={code:"kh",currency:"KHR",currency_fraction:"Sen",currency_fraction_units:100,currency_name:"Riel",currency_symbol:"",timezones:["Asia/Phnom_Penh"],locale:"km-KH"},xee={code:"cm",currency:"XAF",currency_name:"Central African CFA Franc",currency_symbol:"FCFA",currency_fraction:"Centime",currency_fraction_units:100,timezones:["Africa/Douala"],locale:"fr-CM"},kee={code:"ca",currency:"CAD",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"Canadian Dollar",currency_symbol:"$",date_format:"MM-dd-yyyy",timezones:["America/Atikokan","America/Blanc-Sablon","America/Cambridge_Bay","America/Creston","America/Dawson","America/Dawson_Creek","America/Edmonton","America/Glace_Bay","America/Goose_Bay","America/Halifax","America/Inuvik","America/Iqaluit","America/Moncton","America/Montreal","America/Nipigon","America/Pangnirtung","America/Rainy_River","America/Rankin_Inlet","America/Regina","America/Resolute","America/St_Johns","America/Swift_Current","America/Thunder_Bay","America/Toronto","America/Vancouver","America/Whitehorse","America/Winnipeg","America/Yellowknife"],fiscal_year_start:"04-01",fiscal_year_end:"03-31",locale:"en-CA"},Pee={code:"td",currency:"XAF",currency_name:"Central African CFA Franc",currency_symbol:"FCFA",currency_fraction:"Centime",currency_fraction_units:100,timezones:["Africa/Ndjamena"],locale:"fr-TD"},Tee={code:"cl",currency:"CLP",currency_fraction:"Centavo",currency_fraction_units:100,currency_name:"Chilean Peso",currency_symbol:"$",timezones:["America/Santiago","Pacific/Easter"],locale:"es-CL"},$ee={code:"cn",currency:"CNY",currency_name:"Yuan Renminbi",date_format:"yyyy-MM-dd",timezones:["Asia/Chongqing","Asia/Harbin","Asia/Kashgar","Asia/Shanghai","Asia/Urumqi"],locale:"ii-CN"},Dee={code:"co",currency:"COP",currency_fraction:"Centavo",currency_fraction_units:100,currency_name:"Colombian Peso",currency_symbol:"$",timezones:["America/Bogota"],locale:"es-CO"},Mee={code:"km",currency:"KMF",currency_fraction:"Centime",currency_fraction_units:100,currency_name:"Comoro Franc",currency_symbol:"Fr",timezones:["Indian/Comoro"],locale:"fr-KM"},Iee={code:"cg",currency:"XAF",currency_name:"Central African CFA Franc",currency_symbol:"FCFA",currency_fraction:"Centime",currency_fraction_units:100,locale:"fr-CG"},Ree={code:"hr",currency:"HRK",currency_fraction:"Lipa",currency_fraction_units:100,currency_name:"Croatian Kuna",currency_symbol:"kn",timezones:["Europe/Zagreb"],locale:"hr-HR"},_ee={code:"cu",currency:"CUP",currency_fraction:"Centavo",currency_fraction_units:100,currency_name:"Cuban Peso",currency_symbol:"$",timezones:["America/Havana"]},Eee={code:"cy",currency:"CYP",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"Cyprus Pound",currency_symbol:"",timezones:["Asia/Nicosia"],locale:"el-CY"},Qee={code:"dk",currency:"DKK",currency_fraction:"re",currency_fraction_units:100,currency_name:"Danish Krone",currency_symbol:"kr",timezones:["Europe/Copenhagen"],locale:"da-DK"},Nee={code:"dj",currency:"DJF",currency_fraction:"Centime",currency_fraction_units:100,currency_name:"Djibouti Franc",currency_symbol:"Fr",timezones:["Africa/Djibouti"],locale:"fr-DJ"},Lee={code:"dm",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"$",currency_name:"Eastern Carribean Dollar",currency:"XCD",timezones:["America/Dominica"]},Fee={code:"ec",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"$",timezones:["America/Guayaquil","Pacific/Galapagos"],locale:"es-EC"},Bee={code:"eg",currency:"EGP",currency_fraction:"Piastre[F]",currency_fraction_units:100,currency_name:"Egyptian Pound",currency_symbol:" or .",timezones:["Africa/Cairo"],fiscal_year_start:"07-01",fiscal_year_end:"06-30",locale:"ar-EG"},Vee={code:"er",currency:"ERN",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"Nakfa",currency_symbol:"Nfk",timezones:["Africa/Asmara"],locale:"ti-ER"},jee={code:"ee",currency:"EEK",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"Kroon",currency_symbol:"",timezones:["Europe/Tallinn"],locale:"et-EE"},zee={code:"et",currency_fraction:"Santim",currency_fraction_units:100,currency_name:"Ethiopian Birr",currency_symbol:"Br",timezones:["Africa/Addis_Ababa"],locale:"am-ET"},Zee={code:"fj",currency:"FJD",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"Fiji Dollar",currency_symbol:"$",timezones:["Pacific/Fiji"]},qee={code:"fi",currency:"EUR",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"",timezones:["Europe/Helsinki"],locale:"fi-FI"},Xee={code:"fr",currency:"EUR",currency_fraction:"Centime",currency_fraction_units:100,currency_symbol:"",date_format:"dd/MM/yyyy",timezones:["Europe/Paris"],locale:"fr-FR"},Wee={code:"ga",currency:"XAF",currency_name:"Central African CFA Franc",currency_symbol:"FCFA",currency_fraction:"Centime",currency_fraction_units:100,timezones:["Africa/Libreville"],locale:"fr-GA"},Gee={code:"gm",currency:"GMD",currency_name:"Dalasi",timezones:["Africa/Banjul"]},Uee={code:"ge",currency_fraction:"Tetri",currency_fraction_units:100,currency_symbol:"",timezones:["Asia/Tbilisi"],locale:"ka-GE"},Hee={code:"de",currency:"EUR",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"",timezones:["Europe/Berlin"],locale:"de-DE"},Yee={code:"gh",currency:"GHS",currency_fraction:"Pesewa",currency_fraction_units:100,currency_symbol:"",timezones:["Africa/Accra"],locale:"ak-GH"},Kee={code:"gi",currency:"GIP",currency_fraction:"Penny",currency_fraction_units:100,currency_name:"Gibraltar Pound",currency_symbol:"",timezones:["Europe/Gibraltar"]},Jee={code:"gr",currency:"EUR",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"",timezones:["Europe/Athens"],locale:"el-GR"},ete={code:"gl",timezones:["America/Danmarkshavn","America/Godthab","America/Scoresbysund","America/Thule"],locale:"kl-GL"},tte={code:"gd",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"$",currency_name:"Eastern Carribean Dollar",currency:"XCD",timezones:["America/Grenada"]},nte={code:"gp",timezones:["America/Guadeloupe"],locale:"fr-GP"},ite={code:"gu",timezones:["Pacific/Guam"],locale:"en-GU"},ste={code:"gt",currency:"GTQ",currency_fraction:"Centavo",currency_fraction_units:100,currency_name:"Quetzal",currency_symbol:"Q",timezones:["America/Guatemala"],locale:"es-GT"},rte={code:"gg",currency_fraction:"Penny",currency_fraction_units:100,currency_symbol:"",timezones:["Europe/London"]},ote={code:"gn",currency:"GNF",currency_fraction:"Centime",currency_fraction_units:100,currency_name:"Guinea Franc",currency_symbol:"Fr",timezones:["Africa/Conakry"],locale:"fr-GN"},ate={code:"gy",currency:"GYD",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"Guyana Dollar",currency_symbol:"$",timezones:["America/Guyana"]},lte={code:"ht",currency:"HTG",currency_fraction:"Centime",currency_fraction_units:100,currency_name:"Gourde",currency_symbol:"G",timezones:["America/Guatemala","America/Port-au-Prince"]},cte={code:"hn",currency:"HNL",currency_fraction:"Centavo",currency_fraction_units:100,currency_name:"Lempira",currency_symbol:"L",timezones:["America/Tegucigalpa"],locale:"es-HN"},ute={code:"hu",currency:"HUF",currency_fraction:"Fillr",currency_fraction_units:100,currency_name:"Forint",currency_symbol:"Ft",date_format:"yyyy-MM-dd",timezones:["Europe/Budapest"],locale:"hu-HU"},dte={code:"is",currency:"ISK",currency_fraction:"Eyrir",currency_fraction_units:100,currency_name:"Iceland Krona",currency_symbol:"kr",timezones:["Atlantic/Reykjavik"],locale:"is-IS"},hte={code:"in",currency:"INR",currency_fraction:"Paisa",currency_fraction_units:100,currency_name:"Indian Rupee",currency_symbol:"",date_format:"dd/MM/yyyy",timezones:["Asia/Kolkata"],fiscal_year_start:"04-01",fiscal_year_end:"03-31",locale:"en-IN"},fte={code:"id",currency:"IDR",currency_fraction:"Sen",currency_fraction_units:100,currency_name:"Rupiah",currency_symbol:"Rp",timezones:["Asia/Jakarta","Asia/Jayapura","Asia/Makassar","Asia/Pontianak"],locale:"id-ID"},pte={code:"ir",currency:"IRR",currency_name:"Iranian Rial",currency_symbol:"",timezones:["Asia/Tehran"],fiscal_year_start:"06-23",fiscal_year_end:"06-22",locale:"fa-IR"},mte={code:"iq",currency:"IQD",currency_fraction:"Fils",currency_fraction_units:1e3,currency_name:"Iraqi Dinar",currency_symbol:".",timezones:["Asia/Baghdad"],locale:"ar-IQ"},gte={code:"ie",currency:"EUR",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"",timezones:["Europe/Dublin"],locale:"en-IE"},yte={code:"il",currency:"ILS",currency_fraction:"Agora",currency_fraction_units:100,currency_name:"New Israeli Sheqel",currency_symbol:"",timezones:["Asia/Jerusalem"],locale:"en-IL"},Ote={code:"it",currency:"EUR",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"",date_format:"dd/MM/yyyy",timezones:["Europe/Rome"],fiscal_year_start:"07-01",fiscal_year_end:"06-30",locale:"it-IT"},bte={code:"jm",currency:"JMD",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"Jamaican Dollar",currency_symbol:"$",timezones:["America/Jamaica"],locale:"en-JM"},vte={code:"jp",currency:"JPY",currency_fraction:"Sen[G]",currency_fraction_units:100,currency_name:"Yen",currency_symbol:"",timezones:["Asia/Tokyo"],locale:"ja-JP"},wte={code:"je",currency_fraction:"Penny",currency_fraction_units:100,currency_symbol:"",timezones:["Europe/London"]},Ste={code:"jo",currency:"JOD",currency_fraction:"Piastre[H]",currency_fraction_units:100,currency_name:"Jordanian Dinar",currency_symbol:".",timezones:["Asia/Amman"],locale:"ar-JO"},Cte={code:"kz",currency:"KZT",currency_fraction:"Tn",currency_fraction_units:100,currency_name:"Tenge",currency_symbol:"",timezones:["Asia/Almaty","Asia/Aqtau","Asia/Aqtobe","Asia/Oral","Asia/Qyzylorda"]},Ate={code:"ke",currency:"KES",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"Kenyan Shilling",currency_symbol:"Sh",timezones:["Africa/Nairobi"],locale:"ebu-KE"},xte={code:"ki",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"$",timezones:["Pacific/Enderbury","Pacific/Kiritimati","Pacific/Tarawa"]},kte={code:"xk",currency:"EUR",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"Euro",currency_symbol:"",timezones:["Europe/Skopje"],locale:"sq-XK"},Pte={code:"kw",currency:"KWD",currency_fraction:"Fils",currency_fraction_units:1e3,currency_name:"Kuwaiti Dinar",currency_symbol:".",timezones:["Asia/Kuwait"],locale:"ar-KW"},Tte={code:"kg",currency:"KGS",currency_fraction:"Tyiyn",currency_fraction_units:100,currency_name:"Som",currency_symbol:"",timezones:["Asia/Bishkek"]},$te={code:"lv",currency:"LVL",currency_fraction:"Santms",currency_fraction_units:100,currency_name:"Latvian Lats",currency_symbol:"Ls",timezones:["Europe/Riga"],locale:"lv-LV"},Dte={code:"lb",currency:"LBP",currency_fraction:"Piastre",currency_fraction_units:100,currency_name:"Lebanese Pound",currency_symbol:".",timezones:["Asia/Beirut"],locale:"ar-LB"},Mte={code:"ls",currency:"LSL",currency_fraction:"Sente",currency_fraction_units:100,currency_name:"Loti",currency_symbol:"L",timezones:["Africa/Maseru"]},Ite={code:"lr",currency:"LRD",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"Liberian Dollar",currency_symbol:"$",timezones:["Africa/Monrovia"]},Rte={code:"ly",currency:"LYD",currency_fraction:"Dirham",currency_fraction_units:1e3,currency_name:"Libyan Dinar",currency_symbol:".",timezones:["Africa/Tripoli"],locale:"ar-LY"},_te={code:"li",currency_fraction:"Rappen",currency_fraction_units:100,currency_symbol:"Fr",timezones:["Europe/Vaduz"],locale:"de-LI"},Ete={code:"lt",currency:"EUR",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"",date_format:"yyyy-MM-dd",timezones:["Europe/Vilnius"],locale:"lt-LT"},Qte={code:"lu",currency:"EUR",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"",timezones:["Europe/Luxembourg"],locale:"fr-LU"},Nte={code:"mo",currency:"MOP",currency_name:"Pataca"},Lte={code:"mk",currency:"MKD",currency_fraction:"Deni",currency_fraction_units:100,currency_name:"Denar",currency_symbol:"",locale:"mk-MK"},Fte={code:"mg",currency_fraction:"Iraimbilanja",currency_fraction_units:5,currency_symbol:"Ar",timezones:["Indian/Antananarivo"],locale:"fr-MG"},Bte={code:"mw",currency:"MWK",currency_fraction:"Tambala",currency_fraction_units:100,currency_name:"Kwacha",currency_symbol:"MK",timezones:["Africa/Blantyre"]},Vte={code:"my",currency:"MYR",currency_fraction:"Sen",currency_fraction_units:100,currency_name:"Malaysian Ringgit",currency_symbol:"RM",timezones:["Asia/Kuala_Lumpur","Asia/Kuching"],locale:"ms-MY"},jte={code:"mv",currency:"MVR",currency_fraction:"Laari",currency_fraction_units:100,currency_name:"Rufiyaa",currency_symbol:".",timezones:["Indian/Maldives"]},zte={code:"ml",currency:"XOF",currency_name:"West African CFA Franc",currency_symbol:"CFA",currency_fraction:"Centime",currency_fraction_units:100,timezones:["Africa/Bamako"],locale:"bm-ML"},Zte={code:"mt",currency:"MTL",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"Maltese Lira",currency_symbol:"",timezones:["Europe/Malta"],locale:"en-MT"},qte={code:"mq",timezones:["America/Martinique"],locale:"fr-MQ"},Xte={code:"mr",currency:"MRO",currency_fraction:"Khoums",currency_fraction_units:5,currency_name:"Ouguiya",currency_symbol:"UM",timezones:["Africa/Nouakchott"]},Wte={code:"mu",currency:"MUR",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"Mauritius Rupee",currency_symbol:"",timezones:["Indian/Mauritius"],locale:"en-MU"},Gte={code:"yt",timezones:["Indian/Mayotte"]},Ute={code:"mx",currency:"MXN",currency_fraction:"Centavo",currency_fraction_units:100,currency_name:"Mexican Peso",currency_symbol:"$",timezones:["America/Bahia_Banderas","America/Cancun","America/Chihuahua","America/Hermosillo","America/Matamoros","America/Mazatlan","America/Merida","America/Mexico_City","America/Monterrey","America/Ojinaga","America/Santa_Isabel","America/Tijuana"],locale:"es-MX"},Hte={code:"mc",currency:"EUR",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"",timezones:["Europe/Monaco"],locale:"fr-MC"},Yte={code:"mn",currency:"MNT",currency_fraction:"Mng",currency_fraction_units:100,currency_name:"Tugrik",currency_symbol:"",date_format:"yyyy-MM-dd",timezones:["Asia/Choibalsan","Asia/Hovd","Asia/Ulaanbaatar"]},Kte={code:"me",currency:"EUR",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"",timezones:["Europe/Belgrade"]},Jte={code:"ms",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"$",currency_name:"Eastern Carribean Dollar",currency:"XCD",timezones:["America/Montserrat"]},ene={code:"ma",currency:"MAD",currency_fraction:"Centime",currency_fraction_units:100,currency_name:"Moroccan Dirham",currency_symbol:"..",timezones:["Africa/Casablanca"],locale:"ar-MA"},tne={code:"mz",currency_fraction:"Centavo",currency_fraction_units:100,currency_symbol:"MT",timezones:["Africa/Maputo"],locale:"pt-MZ"},nne={code:"mm",currency:"MMK",currency_name:"Kyat",timezones:["Asia/Rangoon"],fiscal_year_start:"04-01",fiscal_year_end:"03-31",locale:"my-MM"},ine={code:"na",currency:"NAD",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"Namibia Dollar",currency_symbol:"$",timezones:["Africa/Windhoek"],locale:"en-NA"},sne={code:"nr",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"$",timezones:["Pacific/Nauru"]},rne={code:"np",currency:"NPR",currency_fraction:"Paisa",currency_fraction_units:100,currency_name:"Nepalese Rupee",currency_symbol:"",timezones:["Asia/Kathmandu"],locale:"ne-NP"},one={code:"nl",currency:"EUR",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"",timezones:["Europe/Amsterdam"],locale:"nl-NL"},ane={code:"ni",currency:"NIO",currency_fraction:"Centavo",currency_fraction_units:100,currency_name:"Cordoba Oro",currency_symbol:"C$",timezones:["America/Managua"],locale:"es-NI"},lne={code:"ne",currency:"XOF",currency_name:"West African CFA Franc",currency_symbol:"CFA",currency_fraction:"Centime",currency_fraction_units:100,timezones:["Africa/Niamey"],locale:"fr-NE"},cne={code:"ng",currency:"NGN",currency_fraction:"Kobo",currency_fraction_units:100,currency_name:"Naira",currency_symbol:"",timezones:["Africa/Lagos"],locale:"ig-NG"},une={code:"nu",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"$",timezones:["Pacific/Niue"]},dne={code:"no",currency:"NOK",currency_fraction:"re",currency_fraction_units:100,currency_name:"Norwegian Krone",currency_symbol:"kr",timezones:["Europe/Oslo"],locale:"nb-NO"},hne={code:"om",currency:"OMR",currency_fraction:"Baisa",currency_fraction_units:1e3,currency_name:"Rial Omani",currency_symbol:"..",timezones:["Asia/Muscat"],locale:"ar-OM"},fne={code:"pk",currency:"PKR",currency_fraction:"Paisa",currency_fraction_units:100,currency_name:"Pakistan Rupee",currency_symbol:"",timezones:["Asia/Karachi"],fiscal_year_start:"07-01",fiscal_year_end:"06-30",locale:"en-PK"},pne={code:"pw",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"$",date_format:"MM-dd-yyyy",timezones:["Pacific/Palau"]},mne={code:"pa",currency_fraction:"Centsimo",currency_fraction_units:100,currency_symbol:"B/.",timezones:["America/Panama"],locale:"es-PA"},gne={code:"py",currency:"PYG",currency_fraction:"Cntimo",currency_fraction_units:100,currency_name:"Guarani",currency_symbol:"",timezones:["America/Asuncion"],locale:"es-PY"},yne={code:"pe",currency:"PEN",currency_fraction:"Cntimo",currency_fraction_units:100,currency_name:"Nuevo Sol",currency_symbol:"S/.",timezones:["America/Lima"],locale:"es-PE"},One={code:"ph",currency:"PHP",currency_fraction:"Centavo",currency_fraction_units:100,currency_name:"Philippine Peso",currency_symbol:"",date_format:"MM-dd-yyyy",timezones:["Asia/Manila"],locale:"en-PH"},bne={code:"pn",timezones:["Pacific/Pitcairn"]},vne={code:"pl",currency:"PLN",currency_fraction:"Grosz",currency_fraction_units:100,currency_symbol:"z",timezones:["Europe/Warsaw"],locale:"pl-PL"},wne={code:"pt",currency:"EUR",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"",timezones:["Atlantic/Azores","Atlantic/Madeira","Europe/Lisbon"],locale:"pt-PT"},Sne={code:"qa",currency:"QAR",currency_fraction:"Dirham",currency_fraction_units:100,currency_name:"Qatari Rial",currency_symbol:".",timezones:["Asia/Qatar"],locale:"ar-QA"},Cne={code:"ro",currency:"RON",currency_fraction:"Bani",currency_fraction_units:100,currency_name:"Romanian New Leu",currency_symbol:"lei",timezones:["Europe/Bucharest"],locale:"ro-RO"},Ane={code:"rw",currency:"RWF",currency_fraction:"Centime",currency_fraction_units:100,currency_name:"Rwanda Franc",currency_symbol:"Fr",timezones:["Africa/Kigali"],locale:"fr-RW"},xne={code:"ws",currency:"WST",currency_fraction:"Sene",currency_fraction_units:100,currency_name:"Tala",currency_symbol:"T",timezones:["Pacific/Apia"]},kne={code:"sn",currency:"XOF",currency_name:"West African CFA Franc",currency_symbol:"CFA",currency_fraction:"Centime",currency_fraction_units:100,timezones:["Africa/Dakar"],locale:"fr-SN"},Pne={code:"rs",currency:"RSD",currency_fraction:"Para",currency_fraction_units:100,currency_name:"Serbian Dinar",currency_symbol:".",timezones:["Europe/Belgrade"]},Tne={code:"sc",currency:"SCR",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"Seychelles Rupee",currency_symbol:"",timezones:["Indian/Mahe"]},$ne={code:"sg",currency:"SGD",currency_fraction:"Sen",currency_fraction_units:100,currency_name:"Singapore Dollar",currency_symbol:"$",timezones:["Asia/Singapore"],fiscal_year_start:"04-01",fiscal_year_end:"03-31",locale:"en-SG"},Dne={code:"sk",currency:"EUR",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"",timezones:["Europe/Bratislava"],locale:"sk-SK"},Mne={code:"si",currency:"EUR",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"",timezones:["Europe/Belgrade"],locale:"sl-SI"},Ine={code:"so",currency:"SOS",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"Somali Shilling",currency_symbol:"Sh",timezones:["Africa/Mogadishu"],locale:"so-SO"},Rne={code:"es",currency:"EUR",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"",timezones:["Africa/Ceuta","Atlantic/Canary","Europe/Madrid"],locale:"eu-ES"},_ne={code:"sd",currency_fraction:"Piastre",currency_fraction_units:100,currency_symbol:"",timezones:["Africa/Khartoum"],locale:"ar-SD"},Ene={code:"sr",currency:"SRD",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"Surinamese Dollar",currency_symbol:"$",timezones:["America/Paramaribo"],locale:"nl-SR"},Qne={code:"sz",currency:"SZL",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"Lilangeni",currency_symbol:"L",timezones:["Africa/Mbabane"]},Nne={code:"se",currency:"SEK",currency_fraction:"re",currency_fraction_units:100,currency_name:"Swedish Krona",currency_symbol:"kr",timezones:["Europe/Stockholm"],locale:"sv-SE"},Lne={code:"ch",currency:"CHF",currency_fraction:"Rappen[K]",currency_fraction_units:100,smallest_currency_fraction_value:.05,currency_name:"Swiss Franc",currency_symbol:"Fr",timezones:["Europe/Zurich"],locale:"de-CH"},Fne={code:"sy",currency:"SYP",currency_name:"Syrian Pound",locale:"ar-SY"},Bne={code:"tw",currency:"TWD",date_format:"yyyy-MM-dd"},Vne={code:"tj",currency_fraction:"Diram",currency_fraction_units:100,currency_symbol:"",timezones:["Asia/Dushanbe"]},jne={code:"tz",currency:"TZS",currency_name:"Tanzanian Shilling",locale:"asa-TZ"},zne={code:"th",currency:"THB",currency_fraction:"Satang",currency_fraction_units:100,currency_name:"Baht",currency_symbol:"",timezones:["Asia/Bangkok"],fiscal_year_start:"10-01",fiscal_year_end:"09-30",locale:"th-TH"},Zne={code:"tg",currency:"XOF",currency_name:"West African CFA Franc",currency_symbol:"CFA",currency_fraction:"Centime",currency_fraction_units:100,timezones:["Africa/Lome"],locale:"ee-TG"},qne={code:"tk",timezones:["Pacific/Fakaofo"]},Xne={code:"to",currency:"TOP",currency_fraction:"Seniti[L]",currency_fraction_units:100,currency_name:"Pa'anga",currency_symbol:"T$",timezones:["Pacific/Tongatapu"],locale:"to-TO"},Wne={code:"tn",currency:"TND",currency_fraction:"Millime",currency_fraction_units:1e3,currency_name:"Tunisian Dinar",currency_symbol:".",timezones:["Africa/Tunis"],locale:"ar-TN"},Gne={code:"tr",currency:"TRY",currency_fraction:"Kuru",currency_fraction_units:100,currency_symbol:"",timezones:["Europe/Istanbul"],locale:"tr-TR"},Une={code:"tm",currency:"TMM",currency_fraction:"Tennesi",currency_fraction_units:100,currency_name:"Manat",currency_symbol:"m",timezones:["Asia/Ashgabat"]},Hne={code:"tv",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"$",timezones:["Pacific/Funafuti"]},Yne={code:"ug",currency:"UGX",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"Uganda Shilling",currency_symbol:"Sh",timezones:["Africa/Kampala"],locale:"cgg-UG"},Kne={code:"ua",currency:"UAH",currency_fraction:"Kopiyka",currency_fraction_units:100,currency_name:"Ukrainian Hryvnia",currency_symbol:"",timezones:["Europe/Kiev","Europe/Simferopol","Europe/Uzhgorod","Europe/Zaporozhye"],locale:"ru-UA"},Jne={code:"uy",currency:"UYU",currency_fraction:"Centsimo",currency_fraction_units:100,currency_name:"Peso Uruguayo",currency_symbol:"$",timezones:["America/Montevideo"],locale:"es-UY"},eie={code:"uz",currency:"UZS",currency_fraction:"Tiyin",currency_fraction_units:100,currency_name:"Uzbekistan Sum",currency_symbol:"",timezones:["Asia/Samarkand","Asia/Tashkent"]},tie={code:"vu",currency:"VUV",currency_fraction:"None",currency_fraction_units:0,currency_name:"Vatu",currency_symbol:"Vt",timezones:["Pacific/Efate"]},nie={code:"vn",currency:"VND",currency_name:"Dong",locale:"vi-VN"},iie={code:"ye",currency:"YER",currency_fraction:"Fils",currency_fraction_units:100,currency_name:"Yemeni Rial",currency_symbol:"",timezones:["Asia/Aden"],locale:"ar-YE"},sie={code:"zm",currency:"ZMW",currency_fraction:"Ngwee",currency_fraction_units:100,currency_name:"Zambian Kwacha",currency_symbol:"ZK",timezones:["Africa/Lusaka"],locale:"bem-ZM"},rie={code:"zw",currency:"ZWD",currency_fraction:"Thebe",currency_fraction_units:100,currency_name:"Zimbabwe Dollar",currency_symbol:"P",timezones:["Africa/Harare"],locale:"en-ZW"},oie={Afghanistan:YJ,Albania:KJ,Algeria:JJ,"American Samoa":{code:"as",locale:"en-AS"},Andorra:eee,Angola:tee,Anguilla:nee,Antarctica:iee,"Antigua and Barbuda":{code:"ag",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"$",currency_name:"Eastern Carribean Dollar",currency:"XCD",timezones:["America/Antigua"]},Argentina:see,Armenia:ree,Aruba:oee,Australia:aee,Austria:lee,Azerbaijan:cee,Bahamas:uee,Bahrain:dee,Bangladesh:hee,Barbados:fee,Belarus:pee,Belgium:mee,Belize:gee,Benin:yee,Bermuda:Oee,Bhutan:bee,"Bolivia, Plurinational State of":{code:"bo",currency:"BOB",currency_name:"Boliviano",locale:"es-BO"},"Bonaire, Sint Eustatius and Saba":{code:"bq"},"Bosnia and Herzegovina":{code:"ba",currency:"BAM",currency_fraction:"Fening",currency_fraction_units:100,currency_symbol:"KM",timezones:["Europe/Sarajevo"],locale:"bs-BA"},Botswana:vee,"Bouvet Island":{code:"bv"},Brazil:wee,"British Indian Ocean Territory":{code:"io",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"$",timezones:["Indian/Chagos"]},"Brunei Darussalam":{code:"bn",currency:"BND",currency_name:"Brunei Dollar",timezones:["Asia/Brunei"],locale:"ms-BN"},Bulgaria:See,"Burkina Faso":{code:"bf",currency:"XOF",currency_name:"West African CFA Franc",currency_symbol:"CFA",currency_fraction:"Centime",currency_fraction_units:100,timezones:["Africa/Ouagadougou"],locale:"fr-BF"},Burundi:Cee,Cambodia:Aee,Cameroon:xee,Canada:kee,"Cape Verde":{code:"cv",currency:"CVE",currency_fraction:"Centavo",currency_fraction_units:100,currency_name:"Cape Verde Escudo",currency_symbol:"Esc or $",timezones:["Atlantic/Cape_Verde"],locale:"kea-CV"},"Cayman Islands":{code:"ky",currency:"KYD",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"Cayman Islands Dollar",currency_symbol:"$",timezones:["America/Cayman"]},"Central African Republic":{code:"cf",currency:"XAF",currency_fraction:"Centime",currency_fraction_units:100,currency_name:"Central African CFA Franc",currency_symbol:"FCFA",timezones:["Africa/Bangui"],locale:"fr-CF"},Chad:Pee,Chile:Tee,China:$ee,"Christmas Island":{code:"cx",timezones:["Indian/Christmas"]},"Cocos (Keeling) Islands":{code:"cc",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"$",timezones:["Indian/Cocos"]},Colombia:Dee,Comoros:Mee,Congo:Iee,"Congo, The Democratic Republic of the":{code:"cd",locale:"fr-CD"},"Cook Islands":{code:"ck",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"$",timezones:["Pacific/Rarotonga"]},"Costa Rica":{code:"cr",currency:"CRC",currency_fraction:"Cntimo",currency_fraction_units:100,currency_name:"Costa Rican Colon",currency_symbol:"",timezones:["America/Costa_Rica"],fiscal_year_start:"10-01",fiscal_year_end:"09-30",locale:"es-CR"},Croatia:Ree,Cuba:_ee,Curaao:{code:"cw",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:""},Cyprus:Eee,"Czech Republic":{code:"cz",currency:"CZK",currency_fraction:"Hal",currency_fraction_units:100,currency_name:"Czech Koruna",currency_symbol:"K",timezones:["Europe/Prague"],locale:"cs-CZ"},Denmark:Qee,Djibouti:Nee,Dominica:Lee,"Dominican Republic":{code:"do",currency:"DOP",currency_fraction:"Centavo",currency_fraction_units:100,currency_name:"Dominican Peso",currency_symbol:"$",timezones:["America/Santo_Domingo"],locale:"es-DO"},Ecuador:Fee,Egypt:Bee,"El Salvador":{code:"sv",currency:"SVC",currency_fraction:"Centavo",currency_fraction_units:100,currency_name:"El Salvador Colon",currency_symbol:"",timezones:["America/El_Salvador"],locale:"es-SV"},"Equatorial Guinea":{code:"gq",currency:"XAF",currency_name:"Central African CFA Franc",currency_symbol:"FCFA",currency_fraction:"Centime",currency_fraction_units:100,timezones:["Africa/Malabo"],locale:"fr-GQ"},Eritrea:Vee,Estonia:jee,Ethiopia:zee,"Falkland Islands (Malvinas)":{code:"fk",currency:"FKP",currency_name:"Falkland Islands Pound"},"Faroe Islands":{code:"fo",currency_fraction:"re",currency_fraction_units:100,currency_symbol:"kr",timezones:["Atlantic/Faroe"],locale:"fo-FO"},Fiji:Zee,Finland:qee,France:Xee,"French Guiana":{code:"gf",timezones:["America/Cayenne"]},"French Polynesia":{code:"pf",currency_fraction:"Centime",currency_fraction_units:100,currency_symbol:"Fr",timezones:["Pacific/Gambier","Pacific/Marquesas","Pacific/Tahiti"]},"French Southern Territories":{code:"tf"},Gabon:Wee,Gambia:Gee,Georgia:Uee,Germany:Hee,Ghana:Yee,Gibraltar:Kee,Greece:Jee,Greenland:ete,Grenada:tte,Guadeloupe:nte,Guam:ite,Guatemala:ste,Guernsey:rte,Guinea:ote,"Guinea-Bissau":{code:"gw",currency:"XOF",currency_name:"West African CFA Franc",currency_symbol:"CFA",currency_fraction:"Centime",currency_fraction_units:100,timezones:["Africa/Bissau"],locale:"pt-GW"},Guyana:ate,Haiti:lte,"Heard Island and McDonald Islands":{code:"hm"},"Holy See (Vatican City State)":{code:"va"},Honduras:cte,"Hong Kong":{code:"hk",currency:"HKD",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"Hong Kong Dollar",currency_symbol:"$",timezones:["Asia/Hong_Kong"],fiscal_year_start:"04-01",fiscal_year_end:"03-31",locale:"en-HK"},Hungary:ute,Iceland:dte,India:hte,Indonesia:fte,Iran:pte,Iraq:mte,Ireland:gte,"Isle of Man":{code:"im",currency_fraction:"Penny",currency_fraction_units:100,currency_symbol:"",timezones:["Europe/London"]},Israel:yte,Italy:Ote,"Ivory Coast":{code:"ci",currency:"XOF",currency_name:"West African CFA Franc",currency_symbol:"CFA",currency_fraction:"Centime",currency_fraction_units:100,timeszones:["Africa/Abidjan"],locale:"fr-CI"},Jamaica:bte,Japan:vte,Jersey:wte,Jordan:Ste,Kazakhstan:Cte,Kenya:Ate,Kiribati:xte,"Korea, Democratic Peoples Republic of":{code:"kp",currency:"KPW",currency_name:"North Korean Won"},"Korea, Republic of":{code:"kr",currency:"KRW",currency_name:"Won",locale:"ko-KR"},Kosovo:kte,Kuwait:Pte,Kyrgyzstan:Tte,"Lao Peoples Democratic Republic":{code:"la",currency:"LAK",currency_name:"Kip"},Latvia:$te,Lebanon:Dte,Lesotho:Mte,Liberia:Ite,Libya:Rte,Liechtenstein:_te,Lithuania:Ete,Luxembourg:Qte,Macao:Nte,Macedonia:Lte,Madagascar:Fte,Malawi:Bte,Malaysia:Vte,Maldives:jte,Mali:zte,Malta:Zte,"Marshall Islands":{code:"mh",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"$",timezones:["Pacific/Kwajalein","Pacific/Majuro"],locale:"en-MH"},Martinique:qte,Mauritania:Xte,Mauritius:Wte,Mayotte:Gte,Mexico:Ute,"Micronesia, Federated States of":{code:"fm"},"Moldova, Republic of":{code:"md",currency:"MDL",currency_name:"Moldovan Leu",locale:"ro-MD"},Monaco:Hte,Mongolia:Yte,Montenegro:Kte,Montserrat:Jte,Morocco:ene,Mozambique:tne,Myanmar:nne,Namibia:ine,Nauru:sne,Nepal:rne,Netherlands:one,"New Caledonia":{code:"nc",currency_fraction:"Centime",currency_fraction_units:100,currency_symbol:"Fr",timezones:["Pacific/Noumea"]},"New Zealand":{code:"nz",currency:"NZD",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"New Zealand Dollar",currency_symbol:"$",timezones:["Pacific/Auckland","Pacific/Chatham"],fiscal_year_start:"04-01",fiscal_year_end:"03-31",locale:"en-NZ"},Nicaragua:ane,Niger:lne,Nigeria:cne,Niue:une,"Norfolk Island":{code:"nf",timezones:["Pacific/Norfolk"]},"Northern Mariana Islands":{code:"mp",timezones:["Pacific/Saipan"],locale:"en-MP"},Norway:dne,Oman:hne,Pakistan:fne,Palau:pne,"Palestinian Territory, Occupied":{code:"ps"},Panama:mne,"Papua New Guinea":{code:"pg",currency:"PGK",currency_fraction:"Toea",currency_fraction_units:100,currency_name:"Kina",currency_symbol:"K",timezones:["Pacific/Port_Moresby"]},Paraguay:gne,Peru:yne,Philippines:One,Pitcairn:bne,Poland:vne,Portugal:wne,"Puerto Rico":{code:"pr",timezones:["America/Puerto_Rico"],locale:"es-PR"},Qatar:Sne,Romania:Cne,"Russian Federation":{code:"ru",currency:"RUB",currency_name:"Russian Ruble",locale:"ru-RU"},Rwanda:Ane,Runion:{code:"re",locale:"fr-RE"},"Saint Barthlemy":{code:"bl",locale:"fr-BL"},"Saint Helena, Ascension and Tristan da Cunha":{code:"sh",currency:"SHP",currency_name:"Saint Helena Pound"},"Saint Kitts and Nevis":{code:"kn",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"$",currency_name:"Eastern Carribean Dollar",currency:"XCD",timezones:["America/St_Kitts"]},"Saint Lucia":{code:"lc",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"$",currency_name:"Eastern Carribean Dollar",currency:"XCD",timezones:["America/St_Lucia"]},"Saint Martin (French part)":{code:"mf",locale:"fr-MF"},"Saint Pierre and Miquelon":{code:"pm"},"Saint Vincent and the Grenadines":{code:"vc",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"$",currency_name:"Eastern Carribean Dollar",currency:"XCD",timezones:["America/St_Vincent"]},Samoa:xne,"San Marino":{code:"sm",currency:"EUR",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"",timezones:["Europe/Rome"]},"Sao Tome and Principe":{code:"st",currency:"STD",currency_name:"Dobra"},"Saudi Arabia":{code:"sa",currency:"SAR",currency_fraction:"Halala",currency_fraction_units:100,currency_name:"Saudi Riyal",currency_symbol:"",timezones:["Asia/Riyadh"],locale:"ar-SA"},Senegal:kne,Serbia:Pne,Seychelles:Tne,"Sierra Leone":{code:"sl",currency:"SLL",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"Leone",currency_symbol:"Le",timezones:["Africa/Freetown"]},Singapore:$ne,"Sint Maarten (Dutch part)":{code:"sx"},Slovakia:Dne,Slovenia:Mne,"Solomon Islands":{code:"sb",currency:"SBD",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"Solomon Islands Dollar",currency_symbol:"$",timezones:["Pacific/Guadalcanal"]},Somalia:Ine,"South Africa":{code:"za",currency:"ZAR",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"Rand",currency_symbol:"R",date_format:"yyyy-MM-dd",timezones:["Africa/Johannesburg"],fiscal_year_start:"03-01",fiscal_year_end:"02-28",locale:"en-ZA"},"South Georgia and the South Sandwich Islands":{code:"gs",currency_fraction:"Penny",currency_fraction_units:100,currency_symbol:""},"South Sudan":{code:"ss",currency_fraction:"Piastre",currency_fraction_units:100,currency_symbol:"",timezones:["Africa/Juba"]},Spain:Rne,"Sri Lanka":{code:"lk",currency:"LKR",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"Sri Lanka Rupee",currency_symbol:"Rs",timezones:["Asia/Colombo"],locale:"si-LK"},Sudan:_ne,Suriname:Ene,"Svalbard and Jan Mayen":{code:"sj"},Swaziland:Qne,Sweden:Nne,Switzerland:Lne,Syria:Fne,Taiwan:Bne,Tajikistan:Vne,Tanzania:jne,Thailand:zne,"Timor-Leste":{code:"tl"},Togo:Zne,Tokelau:qne,Tonga:Xne,"Trinidad and Tobago":{code:"tt",currency:"TTD",currency_fraction:"Cent",currency_fraction_units:100,currency_name:"Trinidad and Tobago Dollar",currency_symbol:"$",timezones:["America/Port_of_Spain"],locale:"en-TT"},Tunisia:Wne,Turkey:Gne,Turkmenistan:Une,"Turks and Caicos Islands":{code:"tc",currency_fraction:"Cent",currency_fraction_units:100,currency_symbol:"$"},Tuvalu:Hne,Uganda:Yne,Ukraine:Kne,"United Arab Emirates":{code:"ae",currency:"AED",currency_fraction:"Fils",currency_fraction_units:100,currency_name:"UAE Dirham",currency_symbol:".",timezones:["Asia/Dubai"],locale:"ar-AE"},"United Kingdom":{code:"gb",currency:"GBP",currency_fraction:"Penny",currency_fraction_units:100,currency_name:"Pound Sterling",currency_symbol:"",timezones:["Europe/London"],fiscal_year_start:"04-01",fiscal_year_end:"03-31",locale:"en-GB"},"United States":{code:"us",currency:"USD",currency_fraction:"Cent",currency_fraction_units:100,smallest_currency_fraction_value:.05,currency_name:"US Dollar",currency_symbol:"$",date_format:"MM-dd-yyyy",timezones:["America/Adak","America/Anchorage","America/Boise","America/Chicago","America/Denver","America/Detroit","America/Indiana/Indianapolis","America/Indiana/Knox","America/Indiana/Marengo","America/Indiana/Petersburg","America/Indiana/Tell_City","America/Indiana/Vevay","America/Indiana/Vincennes","America/Indiana/Winamac","America/Juneau","America/Kentucky/Louisville","America/Kentucky/Monticello","America/Los_Angeles","America/Menominee","America/Metlakatla","America/New_York","America/Nome","America/North_Dakota/Beulah","America/North_Dakota/Center","America/North_Dakota/New_Salem","America/Phoenix","America/Denver","America/Sitka","America/Yakutat","Pacific/Honolulu"],locale:"en-US"},"United States Minor Outlying Islands":{code:"um",locale:"en-UM"},Uruguay:Jne,Uzbekistan:eie,Vanuatu:tie,"Venezuela, Bolivarian Republic of":{code:"ve",currency:"VEF",currency_symbol:"Bs.",currency_fraction:"Centimos",currency_fraction_units:100,locale:"es-VE"},Vietnam:nie,"Virgin Islands, British":{code:"vg"},"Virgin Islands, U.S.":{code:"vi",locale:"en-VI"},"Wallis and Futuna":{code:"wf",currency_fraction:"Centime",currency_fraction_units:100,currency_symbol:"Fr"},"Western Sahara":{code:"eh",timezones:["Africa/El_Aaiun"]},Yemen:iie,Zambia:sie,Zimbabwe:rie,"land Islands":{code:"ax"}};function Ws(){return oie}function f9(t){const n=Ws()[t];return n===void 0?"":n.code}function Wy(t,e){if(!t)return;const n=Te.local(),i=Te.fromFormat(t,"MM-dd");return e?i.plus({year:[1,2,3].includes(n.month)?-1:0}).toJSDate():i.plus({year:[1,2,3].includes(n.month)?0:1}).toJSDate()}const cx=class cx extends ze{constructor(){super(...arguments),this.validations={displayPrecision(e){if(!(e>=0&&e<=9))throw new ie(b`Display Precision should have a value between 0 and 9.`)}}}};cx.lists={locale(){const e=Ws();return Object.keys(e).filter(n=>{var i;return!!((i=e[n])!=null&&i.locale)}).map(n=>{var i,s;return{value:(i=e[n])==null?void 0:i.locale,label:`${n} (${((s=e[n])==null?void 0:s.locale)??b`Not Found`})`}})},currency(){const e=Ws(),n=Object.values(e).map(i=>i==null?void 0:i.currency).filter(Boolean);return[...new Set(n)]}};let Rv=cx;const B0=class B0 extends ze{constructor(){super(...arguments),this.formulas={fieldname:{formula:()=>{var e;if((e=this.label)!=null&&e.length)return Vi.camelCase(this.label)},dependsOn:["label"]}},this.hidden={options:()=>this.fieldtype!=="Select"&&this.fieldtype!=="AutoComplete"&&this.fieldtype!=="Color",target:()=>this.fieldtype!=="Link"&&this.fieldtype!=="Table",references:()=>this.fieldtype!=="DynamicLink"},this.validations={label:e=>{if(typeof e!="string")return;const n=Vi.camelCase(e);this.validations.fieldname(n)},fieldname:e=>{var s,r,o;if(typeof e!="string")return;const n=(s=this.parentFields)==null?void 0:s[e];if(n&&!n.isCustom)throw new oo(this.fyo.t`Fieldname ${e} already exists for ${this.parentdoc.name}`);const i=(o=(r=this.parentdoc)==null?void 0:r.customFields)==null?void 0:o.find(a=>a.fieldname===e);if(i)throw new oo(this.fyo.t`Fieldname ${e} already used for Custom Field ${(i.idx??0)+1}`)}},this.required={options:()=>this.fieldtype==="Select"||this.fieldtype==="AutoComplete",target:()=>this.fieldtype==="Link"||this.fieldtype==="Table",references:()=>this.fieldtype==="DynamicLink",default:()=>!!this.isRequired}}get parentSchema(){var e;return((e=this.parentdoc)==null?void 0:e.parentSchema)??null}get parentFields(){var e;return(e=this.parentdoc)==null?void 0:e.parentFields}};B0.lists={target:e=>{const n=(e==null?void 0:e.fyo.schemaMap)??{};return Object.values(n).filter(i=>!(i!=null&&i.isSingle)&&![A.PatchRun,A.SingleValue,A.CustomField,A.CustomForm,A.SetupWizard].includes(i==null?void 0:i.name)).map(i=>({label:(i==null?void 0:i.label)??"",value:(i==null?void 0:i.name)??""}))},references:e=>{var r,o,a,l;if(!(e instanceof B0))return[];const n=[Ie.AutoComplete,Ie.Data,Ie.Text,Ie.Select],i=((a=(o=(r=e.parentdoc)==null?void 0:r.customFields)==null?void 0:o.filter(c=>c.fieldname&&c.label&&n.includes(c.fieldtype??"")))==null?void 0:a.map(c=>({value:c.fieldname,label:c.label})))??[],s=((l=e.parentSchema)==null?void 0:l.fields.filter(c=>c.fieldname&&c.label&&n.includes(c.fieldtype)).map(c=>({value:c.fieldname,label:c.label})))??[];return[i,s].flat()}};let _v=B0;const ux=class ux extends ze{constructor(){super(...arguments),this.hidden={customFields:()=>!this.name}}get parentSchema(){return this.fyo.schemaMap[this.name??""]??null}get parentFields(){var n;const e=(n=this.parentSchema)==null?void 0:n.fields;return e?er(e,"fieldname"):{}}async validate(){for(const e of this.customFields??[])(e.fieldtype==="Select"||e.fieldtype==="AutoComplete")&&this.validateOptions(e)}validateOptions(e){if(!((e.options??"").split(`
`).map(s=>s.trim()).filter(Boolean).length>1))throw new ie("At least two options need to be set for the selected fieldtype")}};ux.lists={name:e=>Object.values((e==null?void 0:e.fyo.schemaMap)??{}).filter(n=>!n||!n.label||!n.name||n.isSingle?!1:![A.PatchRun,A.SingleValue,A.CustomField,A.CustomForm,A.SetupWizard].includes(n.name)).map(n=>({value:n.name,label:n.label}))};let Ev=ux;const j4={BatchSeries:ZJ,NumberSeries:WJ,SerialNumberSeries:HJ,SystemSettings:Rv,CustomForm:Ev,CustomField:_v};var Cc,es,Wh,p9,Ug,m9;class aie{constructor(e){yn(this,es);yn(this,Cc);this.models={},this.singles={},this.docs=new Cl,this.observer=new Cl,this.fyo=e,Tn(this,Cc,{})}init(){this.models={},this.singles={},this.docs=new Cl,this.observer=new Cl}purgeCache(){this.init()}registerModels(e,n={}){for(const i in this.fyo.db.schemaMap)j4[i]!==void 0?this.models[i]=j4[i]:n[i]!==void 0?this.models[i]=n[i]:e[i]!==void 0?this.models[i]=e[i]:this.models[i]=ze}async getDoc(e,n,i={skipDocumentCache:!1}){var r;if(n===void 0&&(n=e),n===e&&!((r=this.fyo.schemaMap[e])!=null&&r.isSingle))throw new oo(`${e} is not a Single Schema`);let s;return i!=null&&i.skipDocumentCache||(s=Ke(this,es,Ug).call(this,e,n)),s||(s=this.getNewDoc(e,{name:n},!1),await s.load(),Ke(this,es,Wh).call(this,s),s)}getNewDoc(e,n={},i=!0,s,r,o=!0){if(!this.models[e]&&r&&(this.models[e]=r),r??(r=this.models[e]),s??(s=this.fyo.schemaMap[e]),s===void 0)throw new Ea(`Schema not found for ${e}`);const a=new r(s,n,this.fyo,o);return a.name??(a.name=this.getTemporaryName(s)),i&&Ke(this,es,Wh).call(this,a),a}isTemporaryName(e,n){const i=n.label??n.name,s=this.fyo.t`New ${i} `;return e.includes(s)}getTemporaryName(e){var s,r;if(e.naming==="random")return Vl();(s=nt(this,Cc))[r=e.name]??(s[r]=1);const n=nt(this,Cc)[e.name];nt(this,Cc)[e.name]=n+1;const i=e.label??e.name;return this.fyo.t`New ${i} ${String(n).padStart(2,"0")}`}removeFromCache(e,n){const i=this.docs.get(e);i==null||delete i[n]}}Cc=new WeakMap,es=new WeakSet,Wh=function(e){if(!e.name)return;const n=e.name,i=e.schemaName;this.docs[i]||(this.docs.set(i,{}),Ke(this,es,p9).call(this,i)),this.docs.get(i)[n]=e,i===e.name&&(this.singles[n]=e),e.on("change",s=>{this.docs.trigger("change",s)}),e.on("afterSync",()=>{e.name===n&&Ke(this,es,m9).call(this,i,n)||(this.removeFromCache(e.schemaName,n),Ke(this,es,Wh).call(this,e))})},p9=function(e){this.fyo.db.observer.on(`delete:${e}`,n=>{typeof n=="string"&&this.removeFromCache(e,n)}),this.fyo.db.observer.on(`rename:${e}`,n=>{const{oldName:i}=n,s=Ke(this,es,Ug).call(this,e,i);s!==void 0&&(this.removeFromCache(e,i),Ke(this,es,Wh).call(this,s))})},Ug=function(e,n){const i=this.docs.get(e);return i==null?void 0:i[n]},m9=function(e,n){return!!Ke(this,es,Ug).call(this,e,n)};class lie{constructor(e){this.config=new Map,e&&(this.config=ipc.store)}get(e,n){return this.config.get(e)??n}set(e,n){this.config.set(e,n)}delete(e){this.config.delete(e)}}const cie=[A.AccountingLedgerEntry,A.StockLedgerEntry];var cd,ud,Ac,io,Hg,Qv,g9;class uie{constructor(e){yn(this,io);yn(this,cd,"");yn(this,ud,"");yn(this,Ac,!1);this.fyo=e}get hasCreds(){return!!nt(this,cd)&&!!nt(this,ud)}get started(){return nt(this,Ac)}async start(e){Tn(this,Ac,!0),await Ke(this,io,Qv).call(this),e?this.log(si.Opened,"instance"):this.log(si.Resumed,"instance")}stop(){this.started&&(this.log(si.Closed,"instance"),Tn(this,Ac,!1))}log(e,n,i){if(!nt(this,Ac)&&this.fyo.db.isConnected){this.start().then(()=>Ke(this,io,Hg).call(this,e,n,i));return}Ke(this,io,Hg).call(this,e,n,i)}async logOpened(){await Ke(this,io,Qv).call(this),Ke(this,io,Hg).call(this,si.Opened,"app")}}cd=new WeakMap,ud=new WeakMap,Ac=new WeakMap,io=new WeakSet,Hg=function(e,n,i){if(!this.hasCreds||this.fyo.store.skipTelemetryLogging||cie.includes(n))return;const s=Ke(this,io,g9).call(this,e,n,i),r=JSON.stringify({token:nt(this,ud),telemetryData:s});navigator.sendBeacon(nt(this,cd),r)},Qv=async function(){if(this.hasCreds)return;const{telemetryUrl:e,tokenString:n}=await this.fyo.auth.getCreds();Tn(this,cd,e),Tn(this,ud,n)},g9=function(e,n,i){var r;return{country:((r=this.fyo.singles.SystemSettings)==null?void 0:r.countryCode)??"",language:this.fyo.store.language,deviceId:this.fyo.store.deviceId||(this.fyo.config.get("deviceId")??"-"),instanceId:this.fyo.store.instanceId,version:this.fyo.store.appVersion,openCount:this.fyo.store.openCount,timestamp:new Date().toISOString().replace("T"," ").slice(0,-1),platform:this.fyo.store.platform,verb:e,noun:n,more:i}};function die(t,e,n,i){var r;if(!e)return String(t);const s=Oie(e);return s.fieldtype===Ie.Float?Number(t).toFixed((r=i.singles.SystemSettings)==null?void 0:r.displayPrecision):s.fieldtype===Ie.Int?Math.trunc(Number(t)).toString():s.fieldtype===Ie.Currency?pie(t,s,n,i):s.fieldtype===Ie.Date?fie(t,i):s.fieldtype===Ie.Datetime?hie(t,i):s.fieldtype===Ie.Check?MH((!!t).toString()):xi(t)?"":String(t)}function y9(t){return typeof t=="string"?Te.fromISO(t):t instanceof Date?Te.fromJSDate(t):typeof t=="number"?Te.fromSeconds(t):null}function hie(t,e){var r;if(t==null)return"";const n=((r=e.singles.SystemSettings)==null?void 0:r.dateFormat)??jD,i=y9(t);if(!i)return"";const s=i.toFormat(`${n} HH:mm:ss`);return t==="Invalid DateTime"?"":s}function fie(t,e){var r;if(t==null)return"";const n=((r=e.singles.SystemSettings)==null?void 0:r.dateFormat)??jD,i=y9(t);if(!i)return"";const s=i.toFormat(n);return t==="Invalid DateTime"?"":s}function pie(t,e,n,i){const s=yie(e,n,i);let r;try{r=mie(t,i)}catch(a){throw a.message+=` value: '${String(t)}', type: ${typeof t}`,a}const o=i.currencySymbols[s];return o!==void 0?o+" "+r:r}function mie(t,e){const n=gie(e);if(typeof t=="number"&&(t=e.pesa(t.toFixed(20))),ui(t)){const r=kn(t.round());return n.format(r)}const i=kn(t),s=n.format(i);if(s==="NaN")throw Error(`invalid value passed to formatNumber: '${String(t)}' of type ${typeof t}`);return s}function gie(t){var i,s;if(t.currencyFormatter)return t.currencyFormatter;const e=((i=t.singles.SystemSettings)==null?void 0:i.locale)??zD,n=((s=t.singles.SystemSettings)==null?void 0:s.displayPrecision)??Bg;return t.currencyFormatter=Intl.NumberFormat(e,{style:"decimal",minimumFractionDigits:n})}function yie(t,e,n){var r,o,a;const i=((r=n.singles.SystemSettings)==null?void 0:r.currency)??Ks;let s=(o=e==null?void 0:e.getCurrencies)==null?void 0:o[t.fieldname];return s!==void 0||(s=(a=e==null?void 0:e.parentdoc)==null?void 0:a.getCurrencies[t.fieldname],s!==void 0)?s():i}function Oie(t){return typeof t=="string"?{label:"",fieldname:"",fieldtype:t}:t}var Zd,O9,b9;class bie{constructor(e={}){yn(this,Zd);this.t=b,this.T=ZH,this.errors=NH,this._initialized=!1,this.errorLog=[],this.currencySymbols={},this.store={isDevelopment:!1,skipTelemetryLogging:!1,appVersion:"",platform:"",language:"",instanceId:"",deviceId:"",openCount:-1,appFlags:{},reports:{}},this.isTest=e.isTest??!1,this.isElectron=e.isElectron??!0,this.auth=new EH(this,e.AuthDemux),this.db=new VJ(this,e.DatabaseDemux),this.doc=new aie(this),this.pesa=Xb({currency:Ks,precision:jb,display:Bg,wrapper:Hs}),this.telemetry=new uie(this),this.config=new lie(this.isElectron&&!this.isTest)}get initialized(){return this._initialized}get docs(){return this.doc.docs}get models(){return this.doc.models}get singles(){return this.doc.singles}get schemaMap(){return this.db.schemaMap}get fieldMap(){return this.db.fieldMap}format(e,n,i){return die(e,n,i??null,this)}setIsElectron(){try{this.isElectron=!!(window!=null&&window.ipc)}catch{this.isElectron=!1}}async initializeAndRegister(e={},n={},i=!1){this._initialized&&!i||(await Ke(this,Zd,O9).call(this),await Ke(this,Zd,b9).call(this),this.doc.registerModels(e,n),await this.doc.getDoc("SystemSettings"),this._initialized=!0)}async close(){await this.db.close()}getField(e,n){var i;return(i=this.fieldMap[e])==null?void 0:i[n]}async getValue(e,n,i){var o,a;if(i===void 0&&((o=this.schemaMap[e])!=null&&o.isSingle)&&(i=n,n=e),xi(n)||xi(i))return;let s,r;try{s=await this.doc.getDoc(e,n),r=s.get(i)}catch{r=void 0}if(r===void 0&&e===n){const l=await this.db.getSingleValues({fieldname:i,parent:e});return(a=l==null?void 0:l[0])==null?void 0:a.value}return r}async purgeCache(){this.pesa=Xb({currency:Ks,precision:jb,display:Bg,wrapper:Hs}),this._initialized=!1,this.temp={},this.currencyFormatter=void 0,this.currencySymbols={},this.errorLog=[],this.temp={},await this.db.purgeCache(),this.doc.purgeCache()}}Zd=new WeakSet,O9=async function(){this.temp={},this.doc.init(),this.auth.init(),await this.db.init()},b9=async function(){var o;const n=(await((o=this.db)==null?void 0:o.getSingleValues({fieldname:"internalPrecision",parent:"SystemSettings"},{fieldname:"displayPrecision",parent:"SystemSettings"},{fieldname:"currency",parent:"SystemSettings"}))??[]).reduce((a,l)=>(a[l.fieldname]=l.value,a),{}),i=n.internalPrecision??jb,s=n.displayPrecision??Bg,r=n.currency??Ks;this.pesa=Xb({currency:r,precision:i,display:s,wrapper:Hs})};const vie=ve({name:"Button",props:{type:{type:String,default:"secondary"},icon:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},padding:{type:Boolean,default:!0},background:{type:Boolean,default:!0}},computed:{_class(){return{"opacity-50 cursor-not-allowed pointer-events-none":this.disabled,"text-white dark:text-black":this.type==="primary","bg-black dark:bg-gray-300 dark:font-semibold":this.type==="primary"&&this.background,"text-gray-700 dark:text-gray-200":this.type!=="primary","bg-gray-200 dark:bg-gray-900":this.type!=="primary"&&this.background,"h-8":this.background,"px-3":this.padding&&this.icon,"px-6":this.padding&&!this.icon}}}}),wie=["disabled"];function Sie(t,e,n,i,s,r){return w(),P("button",Kc({class:["rounded-md flex justify-center items-center text-sm",t._class],disabled:t.disabled},t.$attrs),[Ge(t.$slots,"default",{},void 0,!0)],16,wie)}const At=ne(vie,[["render",Sie],["__scopeId","data-v-98ab29dc"]]);var v9={exports:{}};(function(t,e){(function(i,s){t.exports=s()})(typeof self<"u"?self:Tu,function(){return function(n){var i={};function s(r){if(i[r])return i[r].exports;var o=i[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=n,s.c=i,s.d=function(r,o,a){s.o(r,o)||Object.defineProperty(r,o,{configurable:!1,enumerable:!0,get:a})},s.r=function(r){Object.defineProperty(r,"__esModule",{value:!0})},s.n=function(r){var o=r&&r.__esModule?function(){return r.default}:function(){return r};return s.d(o,"a",o),o},s.o=function(r,o){return Object.prototype.hasOwnProperty.call(r,o)},s.p="",s(s.s=0)}({"./dist/icons.json":function(n){n.exports={activity:'<polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>',airplay:'<path d="M5 17H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1"></path><polygon points="12 15 17 21 7 21 12 15"></polygon>',"alert-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line>',"alert-octagon":'<polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line>',"alert-triangle":'<path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line>',"align-center":'<line x1="18" y1="10" x2="6" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="18" y1="18" x2="6" y2="18"></line>',"align-justify":'<line x1="21" y1="10" x2="3" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="21" y1="18" x2="3" y2="18"></line>',"align-left":'<line x1="17" y1="10" x2="3" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="17" y1="18" x2="3" y2="18"></line>',"align-right":'<line x1="21" y1="10" x2="7" y2="10"></line><line x1="21" y1="6" x2="3" y2="6"></line><line x1="21" y1="14" x2="3" y2="14"></line><line x1="21" y1="18" x2="7" y2="18"></line>',anchor:'<circle cx="12" cy="5" r="3"></circle><line x1="12" y1="22" x2="12" y2="8"></line><path d="M5 12H2a10 10 0 0 0 20 0h-3"></path>',aperture:'<circle cx="12" cy="12" r="10"></circle><line x1="14.31" y1="8" x2="20.05" y2="17.94"></line><line x1="9.69" y1="8" x2="21.17" y2="8"></line><line x1="7.38" y1="12" x2="13.12" y2="2.06"></line><line x1="9.69" y1="16" x2="3.95" y2="6.06"></line><line x1="14.31" y1="16" x2="2.83" y2="16"></line><line x1="16.62" y1="12" x2="10.88" y2="21.94"></line>',archive:'<polyline points="21 8 21 21 3 21 3 8"></polyline><rect x="1" y="3" width="22" height="5"></rect><line x1="10" y1="12" x2="14" y2="12"></line>',"arrow-down-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line>',"arrow-down-left":'<line x1="17" y1="7" x2="7" y2="17"></line><polyline points="17 17 7 17 7 7"></polyline>',"arrow-down-right":'<line x1="7" y1="7" x2="17" y2="17"></line><polyline points="17 7 17 17 7 17"></polyline>',"arrow-down":'<line x1="12" y1="5" x2="12" y2="19"></line><polyline points="19 12 12 19 5 12"></polyline>',"arrow-left-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="12 8 8 12 12 16"></polyline><line x1="16" y1="12" x2="8" y2="12"></line>',"arrow-left":'<line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline>',"arrow-right-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line>',"arrow-right":'<line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline>',"arrow-up-circle":'<circle cx="12" cy="12" r="10"></circle><polyline points="16 12 12 8 8 12"></polyline><line x1="12" y1="16" x2="12" y2="8"></line>',"arrow-up-left":'<line x1="17" y1="17" x2="7" y2="7"></line><polyline points="7 17 7 7 17 7"></polyline>',"arrow-up-right":'<line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline>',"arrow-up":'<line x1="12" y1="19" x2="12" y2="5"></line><polyline points="5 12 12 5 19 12"></polyline>',"at-sign":'<circle cx="12" cy="12" r="4"></circle><path d="M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-3.92 7.94"></path>',award:'<circle cx="12" cy="8" r="7"></circle><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>',"bar-chart-2":'<line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line>',"bar-chart":'<line x1="12" y1="20" x2="12" y2="10"></line><line x1="18" y1="20" x2="18" y2="4"></line><line x1="6" y1="20" x2="6" y2="16"></line>',"battery-charging":'<path d="M5 18H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3.19M15 6h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-3.19"></path><line x1="23" y1="13" x2="23" y2="11"></line><polyline points="11 6 7 12 13 12 9 18"></polyline>',battery:'<rect x="1" y="6" width="18" height="12" rx="2" ry="2"></rect><line x1="23" y1="13" x2="23" y2="11"></line>',"bell-off":'<path d="M13.73 21a2 2 0 0 1-3.46 0"></path><path d="M18.63 13A17.89 17.89 0 0 1 18 8"></path><path d="M6.26 6.26A5.86 5.86 0 0 0 6 8c0 7-3 9-3 9h14"></path><path d="M18 8a6 6 0 0 0-9.33-5"></path><line x1="1" y1="1" x2="23" y2="23"></line>',bell:'<path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path>',bluetooth:'<polyline points="6.5 6.5 17.5 17.5 12 23 12 1 17.5 6.5 6.5 17.5"></polyline>',bold:'<path d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path><path d="M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"></path>',"book-open":'<path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>',book:'<path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>',bookmark:'<path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>',box:'<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>',briefcase:'<rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>',calendar:'<rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>',"camera-off":'<line x1="1" y1="1" x2="23" y2="23"></line><path d="M21 21H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3m3-3h6l2 3h4a2 2 0 0 1 2 2v9.34m-7.72-2.06a4 4 0 1 1-5.56-5.56"></path>',camera:'<path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle>',cast:'<path d="M2 16.1A5 5 0 0 1 5.9 20M2 12.05A9 9 0 0 1 9.95 20M2 8V6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6"></path><line x1="2" y1="20" x2="2.01" y2="20"></line>',"check-circle":'<path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline>',"check-square":'<polyline points="9 11 12 14 22 4"></polyline><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>',check:'<polyline points="20 6 9 17 4 12"></polyline>',"chevron-down":'<polyline points="6 9 12 15 18 9"></polyline>',"chevron-left":'<polyline points="15 18 9 12 15 6"></polyline>',"chevron-right":'<polyline points="9 18 15 12 9 6"></polyline>',"chevron-up":'<polyline points="18 15 12 9 6 15"></polyline>',"chevrons-down":'<polyline points="7 13 12 18 17 13"></polyline><polyline points="7 6 12 11 17 6"></polyline>',"chevrons-left":'<polyline points="11 17 6 12 11 7"></polyline><polyline points="18 17 13 12 18 7"></polyline>',"chevrons-right":'<polyline points="13 17 18 12 13 7"></polyline><polyline points="6 17 11 12 6 7"></polyline>',"chevrons-up":'<polyline points="17 11 12 6 7 11"></polyline><polyline points="17 18 12 13 7 18"></polyline>',chrome:'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="4"></circle><line x1="21.17" y1="8" x2="12" y2="8"></line><line x1="3.95" y1="6.06" x2="8.54" y2="14"></line><line x1="10.88" y1="21.94" x2="15.46" y2="14"></line>',circle:'<circle cx="12" cy="12" r="10"></circle>',clipboard:'<path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>',clock:'<circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>',"cloud-drizzle":'<line x1="8" y1="19" x2="8" y2="21"></line><line x1="8" y1="13" x2="8" y2="15"></line><line x1="16" y1="19" x2="16" y2="21"></line><line x1="16" y1="13" x2="16" y2="15"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="12" y1="15" x2="12" y2="17"></line><path d="M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"></path>',"cloud-lightning":'<path d="M19 16.9A5 5 0 0 0 18 7h-1.26a8 8 0 1 0-11.62 9"></path><polyline points="13 11 9 17 15 17 11 23"></polyline>',"cloud-off":'<path d="M22.61 16.95A5 5 0 0 0 18 10h-1.26a8 8 0 0 0-7.05-6M5 5a8 8 0 0 0 4 15h9a5 5 0 0 0 1.7-.3"></path><line x1="1" y1="1" x2="23" y2="23"></line>',"cloud-rain":'<line x1="16" y1="13" x2="16" y2="21"></line><line x1="8" y1="13" x2="8" y2="21"></line><line x1="12" y1="15" x2="12" y2="23"></line><path d="M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"></path>',"cloud-snow":'<path d="M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"></path><line x1="8" y1="16" x2="8.01" y2="16"></line><line x1="8" y1="20" x2="8.01" y2="20"></line><line x1="12" y1="18" x2="12.01" y2="18"></line><line x1="12" y1="22" x2="12.01" y2="22"></line><line x1="16" y1="16" x2="16.01" y2="16"></line><line x1="16" y1="20" x2="16.01" y2="20"></line>',cloud:'<path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"></path>',code:'<polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline>',codepen:'<polygon points="12 2 22 8.5 22 15.5 12 22 2 15.5 2 8.5 12 2"></polygon><line x1="12" y1="22" x2="12" y2="15.5"></line><polyline points="22 8.5 12 15.5 2 8.5"></polyline><polyline points="2 15.5 12 8.5 22 15.5"></polyline><line x1="12" y1="2" x2="12" y2="8.5"></line>',codesandbox:'<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="7.5 4.21 12 6.81 16.5 4.21"></polyline><polyline points="7.5 19.79 7.5 14.6 3 12"></polyline><polyline points="21 12 16.5 14.6 16.5 19.79"></polyline><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>',coffee:'<path d="M18 8h1a4 4 0 0 1 0 8h-1"></path><path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"></path><line x1="6" y1="1" x2="6" y2="4"></line><line x1="10" y1="1" x2="10" y2="4"></line><line x1="14" y1="1" x2="14" y2="4"></line>',columns:'<path d="M12 3h7a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-7m0-18H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7m0-18v18"></path>',command:'<path d="M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z"></path>',compass:'<circle cx="12" cy="12" r="10"></circle><polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"></polygon>',copy:'<rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>',"corner-down-left":'<polyline points="9 10 4 15 9 20"></polyline><path d="M20 4v7a4 4 0 0 1-4 4H4"></path>',"corner-down-right":'<polyline points="15 10 20 15 15 20"></polyline><path d="M4 4v7a4 4 0 0 0 4 4h12"></path>',"corner-left-down":'<polyline points="14 15 9 20 4 15"></polyline><path d="M20 4h-7a4 4 0 0 0-4 4v12"></path>',"corner-left-up":'<polyline points="14 9 9 4 4 9"></polyline><path d="M20 20h-7a4 4 0 0 1-4-4V4"></path>',"corner-right-down":'<polyline points="10 15 15 20 20 15"></polyline><path d="M4 4h7a4 4 0 0 1 4 4v12"></path>',"corner-right-up":'<polyline points="10 9 15 4 20 9"></polyline><path d="M4 20h7a4 4 0 0 0 4-4V4"></path>',"corner-up-left":'<polyline points="9 14 4 9 9 4"></polyline><path d="M20 20v-7a4 4 0 0 0-4-4H4"></path>',"corner-up-right":'<polyline points="15 14 20 9 15 4"></polyline><path d="M4 20v-7a4 4 0 0 1 4-4h12"></path>',cpu:'<rect x="4" y="4" width="16" height="16" rx="2" ry="2"></rect><rect x="9" y="9" width="6" height="6"></rect><line x1="9" y1="1" x2="9" y2="4"></line><line x1="15" y1="1" x2="15" y2="4"></line><line x1="9" y1="20" x2="9" y2="23"></line><line x1="15" y1="20" x2="15" y2="23"></line><line x1="20" y1="9" x2="23" y2="9"></line><line x1="20" y1="14" x2="23" y2="14"></line><line x1="1" y1="9" x2="4" y2="9"></line><line x1="1" y1="14" x2="4" y2="14"></line>',"credit-card":'<rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect><line x1="1" y1="10" x2="23" y2="10"></line>',crop:'<path d="M6.13 1L6 16a2 2 0 0 0 2 2h15"></path><path d="M1 6.13L16 6a2 2 0 0 1 2 2v15"></path>',crosshair:'<circle cx="12" cy="12" r="10"></circle><line x1="22" y1="12" x2="18" y2="12"></line><line x1="6" y1="12" x2="2" y2="12"></line><line x1="12" y1="6" x2="12" y2="2"></line><line x1="12" y1="22" x2="12" y2="18"></line>',database:'<ellipse cx="12" cy="5" rx="9" ry="3"></ellipse><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path>',delete:'<path d="M21 4H8l-7 8 7 8h13a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"></path><line x1="18" y1="9" x2="12" y2="15"></line><line x1="12" y1="9" x2="18" y2="15"></line>',disc:'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="3"></circle>',"divide-circle":'<line x1="8" y1="12" x2="16" y2="12"></line><line x1="12" y1="16" x2="12" y2="16"></line><line x1="12" y1="8" x2="12" y2="8"></line><circle cx="12" cy="12" r="10"></circle>',"divide-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="8" y1="12" x2="16" y2="12"></line><line x1="12" y1="16" x2="12" y2="16"></line><line x1="12" y1="8" x2="12" y2="8"></line>',divide:'<circle cx="12" cy="6" r="2"></circle><line x1="5" y1="12" x2="19" y2="12"></line><circle cx="12" cy="18" r="2"></circle>',"dollar-sign":'<line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>',"download-cloud":'<polyline points="8 17 12 21 16 17"></polyline><line x1="12" y1="12" x2="12" y2="21"></line><path d="M20.88 18.09A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.29"></path>',download:'<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line>',dribbble:'<circle cx="12" cy="12" r="10"></circle><path d="M8.56 2.75c4.37 6.03 6.02 9.42 8.03 17.72m2.54-15.38c-3.72 4.35-8.94 5.66-16.88 5.85m19.5 1.9c-3.5-.93-6.63-.82-8.94 0-2.58.92-5.01 2.86-7.44 6.32"></path>',droplet:'<path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"></path>',"edit-2":'<path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>',"edit-3":'<path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>',edit:'<path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>',"external-link":'<path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line>',"eye-off":'<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line>',eye:'<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle>',facebook:'<path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>',"fast-forward":'<polygon points="13 19 22 12 13 5 13 19"></polygon><polygon points="2 19 11 12 2 5 2 19"></polygon>',feather:'<path d="M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z"></path><line x1="16" y1="8" x2="2" y2="22"></line><line x1="17.5" y1="15" x2="9" y2="15"></line>',figma:'<path d="M5 5.5A3.5 3.5 0 0 1 8.5 2H12v7H8.5A3.5 3.5 0 0 1 5 5.5z"></path><path d="M12 2h3.5a3.5 3.5 0 1 1 0 7H12V2z"></path><path d="M12 12.5a3.5 3.5 0 1 1 7 0 3.5 3.5 0 1 1-7 0z"></path><path d="M5 19.5A3.5 3.5 0 0 1 8.5 16H12v3.5a3.5 3.5 0 1 1-7 0z"></path><path d="M5 12.5A3.5 3.5 0 0 1 8.5 9H12v7H8.5A3.5 3.5 0 0 1 5 12.5z"></path>',"file-minus":'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="9" y1="15" x2="15" y2="15"></line>',"file-plus":'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="12" y1="18" x2="12" y2="12"></line><line x1="9" y1="15" x2="15" y2="15"></line>',"file-text":'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline>',file:'<path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>',film:'<rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18"></rect><line x1="7" y1="2" x2="7" y2="22"></line><line x1="17" y1="2" x2="17" y2="22"></line><line x1="2" y1="12" x2="22" y2="12"></line><line x1="2" y1="7" x2="7" y2="7"></line><line x1="2" y1="17" x2="7" y2="17"></line><line x1="17" y1="17" x2="22" y2="17"></line><line x1="17" y1="7" x2="22" y2="7"></line>',filter:'<polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>',flag:'<path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"></path><line x1="4" y1="22" x2="4" y2="15"></line>',"folder-minus":'<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path><line x1="9" y1="14" x2="15" y2="14"></line>',"folder-plus":'<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path><line x1="12" y1="11" x2="12" y2="17"></line><line x1="9" y1="14" x2="15" y2="14"></line>',folder:'<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>',framer:'<path d="M5 16V9h14V2H5l14 14h-7m-7 0l7 7v-7m-7 0h7"></path>',frown:'<circle cx="12" cy="12" r="10"></circle><path d="M16 16s-1.5-2-4-2-4 2-4 2"></path><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line>',gift:'<polyline points="20 12 20 22 4 22 4 12"></polyline><rect x="2" y="7" width="20" height="5"></rect><line x1="12" y1="22" x2="12" y2="7"></line><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path>',"git-branch":'<line x1="6" y1="3" x2="6" y2="15"></line><circle cx="18" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><path d="M18 9a9 9 0 0 1-9 9"></path>',"git-commit":'<circle cx="12" cy="12" r="4"></circle><line x1="1.05" y1="12" x2="7" y2="12"></line><line x1="17.01" y1="12" x2="22.96" y2="12"></line>',"git-merge":'<circle cx="18" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><path d="M6 21V9a9 9 0 0 0 9 9"></path>',"git-pull-request":'<circle cx="18" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><path d="M13 6h3a2 2 0 0 1 2 2v7"></path><line x1="6" y1="9" x2="6" y2="21"></line>',github:'<path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>',gitlab:'<path d="M22.65 14.39L12 22.13 1.35 14.39a.84.84 0 0 1-.3-.94l1.22-3.78 2.44-7.51A.42.42 0 0 1 4.82 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.49h8.1l2.44-7.51A.42.42 0 0 1 18.6 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.51L23 13.45a.84.84 0 0 1-.35.94z"></path>',globe:'<circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>',grid:'<rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect>',"hard-drive":'<line x1="22" y1="12" x2="2" y2="12"></line><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"></path><line x1="6" y1="16" x2="6.01" y2="16"></line><line x1="10" y1="16" x2="10.01" y2="16"></line>',hash:'<line x1="4" y1="9" x2="20" y2="9"></line><line x1="4" y1="15" x2="20" y2="15"></line><line x1="10" y1="3" x2="8" y2="21"></line><line x1="16" y1="3" x2="14" y2="21"></line>',headphones:'<path d="M3 18v-6a9 9 0 0 1 18 0v6"></path><path d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z"></path>',heart:'<path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>',"help-circle":'<circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line>',hexagon:'<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>',home:'<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline>',image:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline>',inbox:'<polyline points="22 12 16 12 14 15 10 15 8 12 2 12"></polyline><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"></path>',info:'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line>',instagram:'<rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>',italic:'<line x1="19" y1="4" x2="10" y2="4"></line><line x1="14" y1="20" x2="5" y2="20"></line><line x1="15" y1="4" x2="9" y2="20"></line>',key:'<path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"></path>',layers:'<polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline>',layout:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="9" y1="21" x2="9" y2="9"></line>',"life-buoy":'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="4"></circle><line x1="4.93" y1="4.93" x2="9.17" y2="9.17"></line><line x1="14.83" y1="14.83" x2="19.07" y2="19.07"></line><line x1="14.83" y1="9.17" x2="19.07" y2="4.93"></line><line x1="14.83" y1="9.17" x2="18.36" y2="5.64"></line><line x1="4.93" y1="19.07" x2="9.17" y2="14.83"></line>',"link-2":'<path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line>',link:'<path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>',linkedin:'<path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle>',list:'<line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line>',loader:'<line x1="12" y1="2" x2="12" y2="6"></line><line x1="12" y1="18" x2="12" y2="22"></line><line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line><line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line><line x1="2" y1="12" x2="6" y2="12"></line><line x1="18" y1="12" x2="22" y2="12"></line><line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line><line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>',lock:'<rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path>',"log-in":'<path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path><polyline points="10 17 15 12 10 7"></polyline><line x1="15" y1="12" x2="3" y2="12"></line>',"log-out":'<path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line>',mail:'<path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline>',"map-pin":'<path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle>',map:'<polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon><line x1="8" y1="2" x2="8" y2="18"></line><line x1="16" y1="6" x2="16" y2="22"></line>',"maximize-2":'<polyline points="15 3 21 3 21 9"></polyline><polyline points="9 21 3 21 3 15"></polyline><line x1="21" y1="3" x2="14" y2="10"></line><line x1="3" y1="21" x2="10" y2="14"></line>',maximize:'<path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path>',meh:'<circle cx="12" cy="12" r="10"></circle><line x1="8" y1="15" x2="16" y2="15"></line><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line>',menu:'<line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>',"message-circle":'<path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>',"message-square":'<path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>',"mic-off":'<line x1="1" y1="1" x2="23" y2="23"></line><path d="M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"></path><path d="M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line>',mic:'<path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line>',"minimize-2":'<polyline points="4 14 10 14 10 20"></polyline><polyline points="20 10 14 10 14 4"></polyline><line x1="14" y1="10" x2="21" y2="3"></line><line x1="3" y1="21" x2="10" y2="14"></line>',minimize:'<path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"></path>',"minus-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="8" y1="12" x2="16" y2="12"></line>',"minus-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="8" y1="12" x2="16" y2="12"></line>',minus:'<line x1="5" y1="12" x2="19" y2="12"></line>',monitor:'<rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line>',moon:'<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>',"more-horizontal":'<circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle>',"more-vertical":'<circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle>',"mouse-pointer":'<path d="M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"></path><path d="M13 13l6 6"></path>',move:'<polyline points="5 9 2 12 5 15"></polyline><polyline points="9 5 12 2 15 5"></polyline><polyline points="15 19 12 22 9 19"></polyline><polyline points="19 9 22 12 19 15"></polyline><line x1="2" y1="12" x2="22" y2="12"></line><line x1="12" y1="2" x2="12" y2="22"></line>',music:'<path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle>',"navigation-2":'<polygon points="12 2 19 21 12 17 5 21 12 2"></polygon>',navigation:'<polygon points="3 11 22 2 13 21 11 13 3 11"></polygon>',octagon:'<polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon>',package:'<line x1="16.5" y1="9.4" x2="7.5" y2="4.21"></line><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line>',paperclip:'<path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path>',"pause-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="10" y1="15" x2="10" y2="9"></line><line x1="14" y1="15" x2="14" y2="9"></line>',pause:'<rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect>',"pen-tool":'<path d="M12 19l7-7 3 3-7 7-3-3z"></path><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path><path d="M2 2l7.586 7.586"></path><circle cx="11" cy="11" r="2"></circle>',percent:'<line x1="19" y1="5" x2="5" y2="19"></line><circle cx="6.5" cy="6.5" r="2.5"></circle><circle cx="17.5" cy="17.5" r="2.5"></circle>',"phone-call":'<path d="M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-forwarded":'<polyline points="19 1 23 5 19 9"></polyline><line x1="15" y1="5" x2="23" y2="5"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-incoming":'<polyline points="16 2 16 8 22 8"></polyline><line x1="23" y1="1" x2="16" y2="8"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-missed":'<line x1="23" y1="1" x2="17" y2="7"></line><line x1="17" y1="1" x2="23" y2="7"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"phone-off":'<path d="M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91"></path><line x1="23" y1="1" x2="1" y2="23"></line>',"phone-outgoing":'<polyline points="23 7 23 1 17 1"></polyline><line x1="16" y1="8" x2="23" y2="1"></line><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',phone:'<path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>',"pie-chart":'<path d="M21.21 15.89A10 10 0 1 1 8 2.83"></path><path d="M22 12A10 10 0 0 0 12 2v10z"></path>',"play-circle":'<circle cx="12" cy="12" r="10"></circle><polygon points="10 8 16 12 10 16 10 8"></polygon>',play:'<polygon points="5 3 19 12 5 21 5 3"></polygon>',"plus-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line>',"plus-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line>',plus:'<line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line>',pocket:'<path d="M4 3h16a2 2 0 0 1 2 2v6a10 10 0 0 1-10 10A10 10 0 0 1 2 11V5a2 2 0 0 1 2-2z"></path><polyline points="8 10 12 14 16 10"></polyline>',power:'<path d="M18.36 6.64a9 9 0 1 1-12.73 0"></path><line x1="12" y1="2" x2="12" y2="12"></line>',printer:'<polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect>',radio:'<circle cx="12" cy="12" r="2"></circle><path d="M16.24 7.76a6 6 0 0 1 0 8.49m-8.48-.01a6 6 0 0 1 0-8.49m11.31-2.82a10 10 0 0 1 0 14.14m-14.14 0a10 10 0 0 1 0-14.14"></path>',"refresh-ccw":'<polyline points="1 4 1 10 7 10"></polyline><polyline points="23 20 23 14 17 14"></polyline><path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"></path>',"refresh-cw":'<polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>',repeat:'<polyline points="17 1 21 5 17 9"></polyline><path d="M3 11V9a4 4 0 0 1 4-4h14"></path><polyline points="7 23 3 19 7 15"></polyline><path d="M21 13v2a4 4 0 0 1-4 4H3"></path>',rewind:'<polygon points="11 19 2 12 11 5 11 19"></polygon><polygon points="22 19 13 12 22 5 22 19"></polygon>',"rotate-ccw":'<polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path>',"rotate-cw":'<polyline points="23 4 23 10 17 10"></polyline><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path>',rss:'<path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle>',save:'<path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline>',scissors:'<circle cx="6" cy="6" r="3"></circle><circle cx="6" cy="18" r="3"></circle><line x1="20" y1="4" x2="8.12" y2="15.88"></line><line x1="14.47" y1="14.48" x2="20" y2="20"></line><line x1="8.12" y1="8.12" x2="12" y2="12"></line>',search:'<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>',send:'<line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>',server:'<rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect><rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect><line x1="6" y1="6" x2="6.01" y2="6"></line><line x1="6" y1="18" x2="6.01" y2="18"></line>',settings:'<circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>',"share-2":'<circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>',share:'<path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path><polyline points="16 6 12 2 8 6"></polyline><line x1="12" y1="2" x2="12" y2="15"></line>',"shield-off":'<path d="M19.69 14a6.9 6.9 0 0 0 .31-2V5l-8-3-3.16 1.18"></path><path d="M4.73 4.73L4 5v7c0 6 8 10 8 10a20.29 20.29 0 0 0 5.62-4.38"></path><line x1="1" y1="1" x2="23" y2="23"></line>',shield:'<path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>',"shopping-bag":'<path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path>',"shopping-cart":'<circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>',shuffle:'<polyline points="16 3 21 3 21 8"></polyline><line x1="4" y1="20" x2="21" y2="3"></line><polyline points="21 16 21 21 16 21"></polyline><line x1="15" y1="15" x2="21" y2="21"></line><line x1="4" y1="4" x2="9" y2="9"></line>',sidebar:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="9" y1="3" x2="9" y2="21"></line>',"skip-back":'<polygon points="19 20 9 12 19 4 19 20"></polygon><line x1="5" y1="19" x2="5" y2="5"></line>',"skip-forward":'<polygon points="5 4 15 12 5 20 5 4"></polygon><line x1="19" y1="5" x2="19" y2="19"></line>',slack:'<path d="M14.5 10c-.83 0-1.5-.67-1.5-1.5v-5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5z"></path><path d="M20.5 10H19V8.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"></path><path d="M9.5 14c.83 0 1.5.67 1.5 1.5v5c0 .83-.67 1.5-1.5 1.5S8 21.33 8 20.5v-5c0-.83.67-1.5 1.5-1.5z"></path><path d="M3.5 14H5v1.5c0 .83-.67 1.5-1.5 1.5S2 16.33 2 15.5 2.67 14 3.5 14z"></path><path d="M14 14.5c0-.83.67-1.5 1.5-1.5h5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-5c-.83 0-1.5-.67-1.5-1.5z"></path><path d="M15.5 19H14v1.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z"></path><path d="M10 9.5C10 8.67 9.33 8 8.5 8h-5C2.67 8 2 8.67 2 9.5S2.67 11 3.5 11h5c.83 0 1.5-.67 1.5-1.5z"></path><path d="M8.5 5H10V3.5C10 2.67 9.33 2 8.5 2S7 2.67 7 3.5 7.67 5 8.5 5z"></path>',slash:'<circle cx="12" cy="12" r="10"></circle><line x1="4.93" y1="4.93" x2="19.07" y2="19.07"></line>',sliders:'<line x1="4" y1="21" x2="4" y2="14"></line><line x1="4" y1="10" x2="4" y2="3"></line><line x1="12" y1="21" x2="12" y2="12"></line><line x1="12" y1="8" x2="12" y2="3"></line><line x1="20" y1="21" x2="20" y2="16"></line><line x1="20" y1="12" x2="20" y2="3"></line><line x1="1" y1="14" x2="7" y2="14"></line><line x1="9" y1="8" x2="15" y2="8"></line><line x1="17" y1="16" x2="23" y2="16"></line>',smartphone:'<rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line>',smile:'<circle cx="12" cy="12" r="10"></circle><path d="M8 14s1.5 2 4 2 4-2 4-2"></path><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line>',speaker:'<rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect><circle cx="12" cy="14" r="4"></circle><line x1="12" y1="6" x2="12.01" y2="6"></line>',square:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>',star:'<polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>',"stop-circle":'<circle cx="12" cy="12" r="10"></circle><rect x="9" y="9" width="6" height="6"></rect>',sun:'<circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>',sunrise:'<path d="M17 18a5 5 0 0 0-10 0"></path><line x1="12" y1="2" x2="12" y2="9"></line><line x1="4.22" y1="10.22" x2="5.64" y2="11.64"></line><line x1="1" y1="18" x2="3" y2="18"></line><line x1="21" y1="18" x2="23" y2="18"></line><line x1="18.36" y1="11.64" x2="19.78" y2="10.22"></line><line x1="23" y1="22" x2="1" y2="22"></line><polyline points="8 6 12 2 16 6"></polyline>',sunset:'<path d="M17 18a5 5 0 0 0-10 0"></path><line x1="12" y1="9" x2="12" y2="2"></line><line x1="4.22" y1="10.22" x2="5.64" y2="11.64"></line><line x1="1" y1="18" x2="3" y2="18"></line><line x1="21" y1="18" x2="23" y2="18"></line><line x1="18.36" y1="11.64" x2="19.78" y2="10.22"></line><line x1="23" y1="22" x2="1" y2="22"></line><polyline points="16 5 12 9 8 5"></polyline>',table:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"></path>',tablet:'<rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line>',tag:'<path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line>',target:'<circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle>',terminal:'<polyline points="4 17 10 11 4 5"></polyline><line x1="12" y1="19" x2="20" y2="19"></line>',thermometer:'<path d="M14 14.76V3.5a2.5 2.5 0 0 0-5 0v11.26a4.5 4.5 0 1 0 5 0z"></path>',"thumbs-down":'<path d="M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17"></path>',"thumbs-up":'<path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path>',"toggle-left":'<rect x="1" y="5" width="22" height="14" rx="7" ry="7"></rect><circle cx="8" cy="12" r="3"></circle>',"toggle-right":'<rect x="1" y="5" width="22" height="14" rx="7" ry="7"></rect><circle cx="16" cy="12" r="3"></circle>',tool:'<path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>',"trash-2":'<polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line>',trash:'<polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>',trello:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><rect x="7" y="7" width="3" height="9"></rect><rect x="14" y="7" width="3" height="5"></rect>',"trending-down":'<polyline points="23 18 13.5 8.5 8.5 13.5 1 6"></polyline><polyline points="17 18 23 18 23 12"></polyline>',"trending-up":'<polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline><polyline points="17 6 23 6 23 12"></polyline>',triangle:'<path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>',truck:'<rect x="1" y="3" width="15" height="13"></rect><polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon><circle cx="5.5" cy="18.5" r="2.5"></circle><circle cx="18.5" cy="18.5" r="2.5"></circle>',tv:'<rect x="2" y="7" width="20" height="15" rx="2" ry="2"></rect><polyline points="17 2 12 7 7 2"></polyline>',twitch:'<path d="M21 2H3v16h5v4l4-4h5l4-4V2zm-10 9V7m5 4V7"></path>',twitter:'<path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>',type:'<polyline points="4 7 4 4 20 4 20 7"></polyline><line x1="9" y1="20" x2="15" y2="20"></line><line x1="12" y1="4" x2="12" y2="20"></line>',umbrella:'<path d="M23 12a11.05 11.05 0 0 0-22 0zm-5 7a3 3 0 0 1-6 0v-7"></path>',underline:'<path d="M6 3v7a6 6 0 0 0 6 6 6 6 0 0 0 6-6V3"></path><line x1="4" y1="21" x2="20" y2="21"></line>',unlock:'<rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 9.9-1"></path>',"upload-cloud":'<polyline points="16 16 12 12 8 16"></polyline><line x1="12" y1="12" x2="12" y2="21"></line><path d="M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"></path><polyline points="16 16 12 12 8 16"></polyline>',upload:'<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line>',"user-check":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><polyline points="17 11 19 13 23 9"></polyline>',"user-minus":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="23" y1="11" x2="17" y2="11"></line>',"user-plus":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="20" y1="8" x2="20" y2="14"></line><line x1="23" y1="11" x2="17" y2="11"></line>',"user-x":'<path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><line x1="18" y1="8" x2="23" y2="13"></line><line x1="23" y1="8" x2="18" y2="13"></line>',user:'<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle>',users:'<path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path>',"video-off":'<path d="M16 16v1a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h2m5.66 0H14a2 2 0 0 1 2 2v3.34l1 1L23 7v10"></path><line x1="1" y1="1" x2="23" y2="23"></line>',video:'<polygon points="23 7 16 12 23 17 23 7"></polygon><rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>',voicemail:'<circle cx="5.5" cy="11.5" r="4.5"></circle><circle cx="18.5" cy="11.5" r="4.5"></circle><line x1="5.5" y1="16" x2="18.5" y2="16"></line>',"volume-1":'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>',"volume-2":'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>',"volume-x":'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line>',volume:'<polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>',watch:'<circle cx="12" cy="12" r="7"></circle><polyline points="12 9 12 12 13.5 13.5"></polyline><path d="M16.51 17.35l-.35 3.83a2 2 0 0 1-2 1.82H9.83a2 2 0 0 1-2-1.82l-.35-3.83m.01-10.7l.35-3.83A2 2 0 0 1 9.83 1h4.35a2 2 0 0 1 2 1.82l.35 3.83"></path>',"wifi-off":'<line x1="1" y1="1" x2="23" y2="23"></line><path d="M16.72 11.06A10.94 10.94 0 0 1 19 12.55"></path><path d="M5 12.55a10.94 10.94 0 0 1 5.17-2.39"></path><path d="M10.71 5.05A16 16 0 0 1 22.58 9"></path><path d="M1.42 9a15.91 15.91 0 0 1 4.7-2.88"></path><path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path><line x1="12" y1="20" x2="12.01" y2="20"></line>',wifi:'<path d="M5 12.55a11 11 0 0 1 14.08 0"></path><path d="M1.42 9a16 16 0 0 1 21.16 0"></path><path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path><line x1="12" y1="20" x2="12.01" y2="20"></line>',wind:'<path d="M9.59 4.59A2 2 0 1 1 11 8H2m10.59 11.41A2 2 0 1 0 14 16H2m15.73-8.27A2.5 2.5 0 1 1 19.5 12H2"></path>',"x-circle":'<circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line>',"x-octagon":'<polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line>',"x-square":'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="9" y1="9" x2="15" y2="15"></line><line x1="15" y1="9" x2="9" y2="15"></line>',x:'<line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>',youtube:'<path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon>',"zap-off":'<polyline points="12.41 6.75 13 2 10.57 4.92"></polyline><polyline points="18.57 12.91 21 10 15.66 10"></polyline><polyline points="8 8 3 14 12 14 11 22 16 16"></polyline><line x1="1" y1="1" x2="23" y2="23"></line>',zap:'<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>',"zoom-in":'<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="11" y1="8" x2="11" y2="14"></line><line x1="8" y1="11" x2="14" y2="11"></line>',"zoom-out":'<circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="8" y1="11" x2="14" y2="11"></line>'}},"./node_modules/classnames/dedupe.js":function(n,i,s){var r,o;/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var a=function(){function l(){}l.prototype=Object.create(null);function c(x,T){for(var k=T.length,D=0;D<k;++D)O(x,T[D])}var u={}.hasOwnProperty;function h(x,T){x[T]=!0}function p(x,T){for(var k in T)u.call(T,k)&&(x[k]=!!T[k])}var m=/\s+/;function y(x,T){for(var k=T.split(m),D=k.length,M=0;M<D;++M)x[k[M]]=!0}function O(x,T){if(T){var k=typeof T;k==="string"?y(x,T):Array.isArray(T)?c(x,T):k==="object"?p(x,T):k==="number"&&h(x,T)}}function S(){for(var x=arguments.length,T=Array(x),k=0;k<x;k++)T[k]=arguments[k];var D=new l;c(D,T);var M=[];for(var L in D)D[L]&&M.push(L);return M.join(" ")}return S}();typeof n<"u"&&n.exports?n.exports=a:(r=[],o=(function(){return a}).apply(i,r),o!==void 0&&(n.exports=o))})()},"./node_modules/core-js/es/array/from.js":function(n,i,s){s("./node_modules/core-js/modules/es.string.iterator.js"),s("./node_modules/core-js/modules/es.array.from.js");var r=s("./node_modules/core-js/internals/path.js");n.exports=r.Array.from},"./node_modules/core-js/internals/a-function.js":function(n,i){n.exports=function(s){if(typeof s!="function")throw TypeError(String(s)+" is not a function");return s}},"./node_modules/core-js/internals/an-object.js":function(n,i,s){var r=s("./node_modules/core-js/internals/is-object.js");n.exports=function(o){if(!r(o))throw TypeError(String(o)+" is not an object");return o}},"./node_modules/core-js/internals/array-from.js":function(n,i,s){var r=s("./node_modules/core-js/internals/bind-context.js"),o=s("./node_modules/core-js/internals/to-object.js"),a=s("./node_modules/core-js/internals/call-with-safe-iteration-closing.js"),l=s("./node_modules/core-js/internals/is-array-iterator-method.js"),c=s("./node_modules/core-js/internals/to-length.js"),u=s("./node_modules/core-js/internals/create-property.js"),h=s("./node_modules/core-js/internals/get-iterator-method.js");n.exports=function(m){var y=o(m),O=typeof this=="function"?this:Array,S=arguments.length,x=S>1?arguments[1]:void 0,T=x!==void 0,k=0,D=h(y),M,L,j,G;if(T&&(x=r(x,S>2?arguments[2]:void 0,2)),D!=null&&!(O==Array&&l(D)))for(G=D.call(y),L=new O;!(j=G.next()).done;k++)u(L,k,T?a(G,x,[j.value,k],!0):j.value);else for(M=c(y.length),L=new O(M);M>k;k++)u(L,k,T?x(y[k],k):y[k]);return L.length=k,L}},"./node_modules/core-js/internals/array-includes.js":function(n,i,s){var r=s("./node_modules/core-js/internals/to-indexed-object.js"),o=s("./node_modules/core-js/internals/to-length.js"),a=s("./node_modules/core-js/internals/to-absolute-index.js");n.exports=function(l){return function(c,u,h){var p=r(c),m=o(p.length),y=a(h,m),O;if(l&&u!=u){for(;m>y;)if(O=p[y++],O!=O)return!0}else for(;m>y;y++)if((l||y in p)&&p[y]===u)return l||y||0;return!l&&-1}}},"./node_modules/core-js/internals/bind-context.js":function(n,i,s){var r=s("./node_modules/core-js/internals/a-function.js");n.exports=function(o,a,l){if(r(o),a===void 0)return o;switch(l){case 0:return function(){return o.call(a)};case 1:return function(c){return o.call(a,c)};case 2:return function(c,u){return o.call(a,c,u)};case 3:return function(c,u,h){return o.call(a,c,u,h)}}return function(){return o.apply(a,arguments)}}},"./node_modules/core-js/internals/call-with-safe-iteration-closing.js":function(n,i,s){var r=s("./node_modules/core-js/internals/an-object.js");n.exports=function(o,a,l,c){try{return c?a(r(l)[0],l[1]):a(l)}catch(h){var u=o.return;throw u!==void 0&&r(u.call(o)),h}}},"./node_modules/core-js/internals/check-correctness-of-iteration.js":function(n,i,s){var r=s("./node_modules/core-js/internals/well-known-symbol.js"),o=r("iterator"),a=!1;try{var l=0,c={next:function(){return{done:!!l++}},return:function(){a=!0}};c[o]=function(){return this},Array.from(c,function(){throw 2})}catch{}n.exports=function(u,h){if(!h&&!a)return!1;var p=!1;try{var m={};m[o]=function(){return{next:function(){return{done:p=!0}}}},u(m)}catch{}return p}},"./node_modules/core-js/internals/classof-raw.js":function(n,i){var s={}.toString;n.exports=function(r){return s.call(r).slice(8,-1)}},"./node_modules/core-js/internals/classof.js":function(n,i,s){var r=s("./node_modules/core-js/internals/classof-raw.js"),o=s("./node_modules/core-js/internals/well-known-symbol.js"),a=o("toStringTag"),l=r(function(){return arguments}())=="Arguments",c=function(u,h){try{return u[h]}catch{}};n.exports=function(u){var h,p,m;return u===void 0?"Undefined":u===null?"Null":typeof(p=c(h=Object(u),a))=="string"?p:l?r(h):(m=r(h))=="Object"&&typeof h.callee=="function"?"Arguments":m}},"./node_modules/core-js/internals/copy-constructor-properties.js":function(n,i,s){var r=s("./node_modules/core-js/internals/has.js"),o=s("./node_modules/core-js/internals/own-keys.js"),a=s("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),l=s("./node_modules/core-js/internals/object-define-property.js");n.exports=function(c,u){for(var h=o(u),p=l.f,m=a.f,y=0;y<h.length;y++){var O=h[y];r(c,O)||p(c,O,m(u,O))}}},"./node_modules/core-js/internals/correct-prototype-getter.js":function(n,i,s){var r=s("./node_modules/core-js/internals/fails.js");n.exports=!r(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},"./node_modules/core-js/internals/create-iterator-constructor.js":function(n,i,s){var r=s("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,o=s("./node_modules/core-js/internals/object-create.js"),a=s("./node_modules/core-js/internals/create-property-descriptor.js"),l=s("./node_modules/core-js/internals/set-to-string-tag.js"),c=s("./node_modules/core-js/internals/iterators.js"),u=function(){return this};n.exports=function(h,p,m){var y=p+" Iterator";return h.prototype=o(r,{next:a(1,m)}),l(h,y,!1,!0),c[y]=u,h}},"./node_modules/core-js/internals/create-property-descriptor.js":function(n,i){n.exports=function(s,r){return{enumerable:!(s&1),configurable:!(s&2),writable:!(s&4),value:r}}},"./node_modules/core-js/internals/create-property.js":function(n,i,s){var r=s("./node_modules/core-js/internals/to-primitive.js"),o=s("./node_modules/core-js/internals/object-define-property.js"),a=s("./node_modules/core-js/internals/create-property-descriptor.js");n.exports=function(l,c,u){var h=r(c);h in l?o.f(l,h,a(0,u)):l[h]=u}},"./node_modules/core-js/internals/define-iterator.js":function(n,i,s){var r=s("./node_modules/core-js/internals/export.js"),o=s("./node_modules/core-js/internals/create-iterator-constructor.js"),a=s("./node_modules/core-js/internals/object-get-prototype-of.js"),l=s("./node_modules/core-js/internals/object-set-prototype-of.js"),c=s("./node_modules/core-js/internals/set-to-string-tag.js"),u=s("./node_modules/core-js/internals/hide.js"),h=s("./node_modules/core-js/internals/redefine.js"),p=s("./node_modules/core-js/internals/well-known-symbol.js"),m=s("./node_modules/core-js/internals/is-pure.js"),y=s("./node_modules/core-js/internals/iterators.js"),O=s("./node_modules/core-js/internals/iterators-core.js"),S=O.IteratorPrototype,x=O.BUGGY_SAFARI_ITERATORS,T=p("iterator"),k="keys",D="values",M="entries",L=function(){return this};n.exports=function(j,G,Z,K,te,W,oe){o(Z,G,K);var ye=function(Pt){if(Pt===te&&Fe)return Fe;if(!x&&Pt in Se)return Se[Pt];switch(Pt){case k:return function(){return new Z(this,Pt)};case D:return function(){return new Z(this,Pt)};case M:return function(){return new Z(this,Pt)}}return function(){return new Z(this)}},ke=G+" Iterator",ge=!1,Se=j.prototype,Oe=Se[T]||Se["@@iterator"]||te&&Se[te],Fe=!x&&Oe||ye(te),dt=G=="Array"&&Se.entries||Oe,Je,ut,Qt;if(dt&&(Je=a(dt.call(new j)),S!==Object.prototype&&Je.next&&(!m&&a(Je)!==S&&(l?l(Je,S):typeof Je[T]!="function"&&u(Je,T,L)),c(Je,ke,!0,!0),m&&(y[ke]=L))),te==D&&Oe&&Oe.name!==D&&(ge=!0,Fe=function(){return Oe.call(this)}),(!m||oe)&&Se[T]!==Fe&&u(Se,T,Fe),y[G]=Fe,te)if(ut={values:ye(D),keys:W?Fe:ye(k),entries:ye(M)},oe)for(Qt in ut)(x||ge||!(Qt in Se))&&h(Se,Qt,ut[Qt]);else r({target:G,proto:!0,forced:x||ge},ut);return ut}},"./node_modules/core-js/internals/descriptors.js":function(n,i,s){var r=s("./node_modules/core-js/internals/fails.js");n.exports=!r(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/internals/document-create-element.js":function(n,i,s){var r=s("./node_modules/core-js/internals/global.js"),o=s("./node_modules/core-js/internals/is-object.js"),a=r.document,l=o(a)&&o(a.createElement);n.exports=function(c){return l?a.createElement(c):{}}},"./node_modules/core-js/internals/enum-bug-keys.js":function(n,i){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"./node_modules/core-js/internals/export.js":function(n,i,s){var r=s("./node_modules/core-js/internals/global.js"),o=s("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,a=s("./node_modules/core-js/internals/hide.js"),l=s("./node_modules/core-js/internals/redefine.js"),c=s("./node_modules/core-js/internals/set-global.js"),u=s("./node_modules/core-js/internals/copy-constructor-properties.js"),h=s("./node_modules/core-js/internals/is-forced.js");n.exports=function(p,m){var y=p.target,O=p.global,S=p.stat,x,T,k,D,M,L;if(O?T=r:S?T=r[y]||c(y,{}):T=(r[y]||{}).prototype,T)for(k in m){if(M=m[k],p.noTargetGet?(L=o(T,k),D=L&&L.value):D=T[k],x=h(O?k:y+(S?".":"#")+k,p.forced),!x&&D!==void 0){if(typeof M==typeof D)continue;u(M,D)}(p.sham||D&&D.sham)&&a(M,"sham",!0),l(T,k,M,p)}}},"./node_modules/core-js/internals/fails.js":function(n,i){n.exports=function(s){try{return!!s()}catch{return!0}}},"./node_modules/core-js/internals/function-to-string.js":function(n,i,s){var r=s("./node_modules/core-js/internals/shared.js");n.exports=r("native-function-to-string",Function.toString)},"./node_modules/core-js/internals/get-iterator-method.js":function(n,i,s){var r=s("./node_modules/core-js/internals/classof.js"),o=s("./node_modules/core-js/internals/iterators.js"),a=s("./node_modules/core-js/internals/well-known-symbol.js"),l=a("iterator");n.exports=function(c){if(c!=null)return c[l]||c["@@iterator"]||o[r(c)]}},"./node_modules/core-js/internals/global.js":function(n,i,s){(function(r){var o="object",a=function(l){return l&&l.Math==Math&&l};n.exports=a(typeof globalThis==o&&globalThis)||a(typeof window==o&&window)||a(typeof self==o&&self)||a(typeof r==o&&r)||Function("return this")()}).call(this,s("./node_modules/webpack/buildin/global.js"))},"./node_modules/core-js/internals/has.js":function(n,i){var s={}.hasOwnProperty;n.exports=function(r,o){return s.call(r,o)}},"./node_modules/core-js/internals/hidden-keys.js":function(n,i){n.exports={}},"./node_modules/core-js/internals/hide.js":function(n,i,s){var r=s("./node_modules/core-js/internals/descriptors.js"),o=s("./node_modules/core-js/internals/object-define-property.js"),a=s("./node_modules/core-js/internals/create-property-descriptor.js");n.exports=r?function(l,c,u){return o.f(l,c,a(1,u))}:function(l,c,u){return l[c]=u,l}},"./node_modules/core-js/internals/html.js":function(n,i,s){var r=s("./node_modules/core-js/internals/global.js"),o=r.document;n.exports=o&&o.documentElement},"./node_modules/core-js/internals/ie8-dom-define.js":function(n,i,s){var r=s("./node_modules/core-js/internals/descriptors.js"),o=s("./node_modules/core-js/internals/fails.js"),a=s("./node_modules/core-js/internals/document-create-element.js");n.exports=!r&&!o(function(){return Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/internals/indexed-object.js":function(n,i,s){var r=s("./node_modules/core-js/internals/fails.js"),o=s("./node_modules/core-js/internals/classof-raw.js"),a="".split;n.exports=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(l){return o(l)=="String"?a.call(l,""):Object(l)}:Object},"./node_modules/core-js/internals/internal-state.js":function(n,i,s){var r=s("./node_modules/core-js/internals/native-weak-map.js"),o=s("./node_modules/core-js/internals/global.js"),a=s("./node_modules/core-js/internals/is-object.js"),l=s("./node_modules/core-js/internals/hide.js"),c=s("./node_modules/core-js/internals/has.js"),u=s("./node_modules/core-js/internals/shared-key.js"),h=s("./node_modules/core-js/internals/hidden-keys.js"),p=o.WeakMap,m,y,O,S=function(j){return O(j)?y(j):m(j,{})},x=function(j){return function(G){var Z;if(!a(G)||(Z=y(G)).type!==j)throw TypeError("Incompatible receiver, "+j+" required");return Z}};if(r){var T=new p,k=T.get,D=T.has,M=T.set;m=function(j,G){return M.call(T,j,G),G},y=function(j){return k.call(T,j)||{}},O=function(j){return D.call(T,j)}}else{var L=u("state");h[L]=!0,m=function(j,G){return l(j,L,G),G},y=function(j){return c(j,L)?j[L]:{}},O=function(j){return c(j,L)}}n.exports={set:m,get:y,has:O,enforce:S,getterFor:x}},"./node_modules/core-js/internals/is-array-iterator-method.js":function(n,i,s){var r=s("./node_modules/core-js/internals/well-known-symbol.js"),o=s("./node_modules/core-js/internals/iterators.js"),a=r("iterator"),l=Array.prototype;n.exports=function(c){return c!==void 0&&(o.Array===c||l[a]===c)}},"./node_modules/core-js/internals/is-forced.js":function(n,i,s){var r=s("./node_modules/core-js/internals/fails.js"),o=/#|\.prototype\./,a=function(p,m){var y=c[l(p)];return y==h?!0:y==u?!1:typeof m=="function"?r(m):!!m},l=a.normalize=function(p){return String(p).replace(o,".").toLowerCase()},c=a.data={},u=a.NATIVE="N",h=a.POLYFILL="P";n.exports=a},"./node_modules/core-js/internals/is-object.js":function(n,i){n.exports=function(s){return typeof s=="object"?s!==null:typeof s=="function"}},"./node_modules/core-js/internals/is-pure.js":function(n,i){n.exports=!1},"./node_modules/core-js/internals/iterators-core.js":function(n,i,s){var r=s("./node_modules/core-js/internals/object-get-prototype-of.js"),o=s("./node_modules/core-js/internals/hide.js"),a=s("./node_modules/core-js/internals/has.js"),l=s("./node_modules/core-js/internals/well-known-symbol.js"),c=s("./node_modules/core-js/internals/is-pure.js"),u=l("iterator"),h=!1,p=function(){return this},m,y,O;[].keys&&(O=[].keys(),"next"in O?(y=r(r(O)),y!==Object.prototype&&(m=y)):h=!0),m==null&&(m={}),!c&&!a(m,u)&&o(m,u,p),n.exports={IteratorPrototype:m,BUGGY_SAFARI_ITERATORS:h}},"./node_modules/core-js/internals/iterators.js":function(n,i){n.exports={}},"./node_modules/core-js/internals/native-symbol.js":function(n,i,s){var r=s("./node_modules/core-js/internals/fails.js");n.exports=!!Object.getOwnPropertySymbols&&!r(function(){return!String(Symbol())})},"./node_modules/core-js/internals/native-weak-map.js":function(n,i,s){var r=s("./node_modules/core-js/internals/global.js"),o=s("./node_modules/core-js/internals/function-to-string.js"),a=r.WeakMap;n.exports=typeof a=="function"&&/native code/.test(o.call(a))},"./node_modules/core-js/internals/object-create.js":function(n,i,s){var r=s("./node_modules/core-js/internals/an-object.js"),o=s("./node_modules/core-js/internals/object-define-properties.js"),a=s("./node_modules/core-js/internals/enum-bug-keys.js"),l=s("./node_modules/core-js/internals/hidden-keys.js"),c=s("./node_modules/core-js/internals/html.js"),u=s("./node_modules/core-js/internals/document-create-element.js"),h=s("./node_modules/core-js/internals/shared-key.js"),p=h("IE_PROTO"),m="prototype",y=function(){},O=function(){var S=u("iframe"),x=a.length,T="<",k="script",D=">",M="java"+k+":",L;for(S.style.display="none",c.appendChild(S),S.src=String(M),L=S.contentWindow.document,L.open(),L.write(T+k+D+"document.F=Object"+T+"/"+k+D),L.close(),O=L.F;x--;)delete O[m][a[x]];return O()};n.exports=Object.create||function(x,T){var k;return x!==null?(y[m]=r(x),k=new y,y[m]=null,k[p]=x):k=O(),T===void 0?k:o(k,T)},l[p]=!0},"./node_modules/core-js/internals/object-define-properties.js":function(n,i,s){var r=s("./node_modules/core-js/internals/descriptors.js"),o=s("./node_modules/core-js/internals/object-define-property.js"),a=s("./node_modules/core-js/internals/an-object.js"),l=s("./node_modules/core-js/internals/object-keys.js");n.exports=r?Object.defineProperties:function(u,h){a(u);for(var p=l(h),m=p.length,y=0,O;m>y;)o.f(u,O=p[y++],h[O]);return u}},"./node_modules/core-js/internals/object-define-property.js":function(n,i,s){var r=s("./node_modules/core-js/internals/descriptors.js"),o=s("./node_modules/core-js/internals/ie8-dom-define.js"),a=s("./node_modules/core-js/internals/an-object.js"),l=s("./node_modules/core-js/internals/to-primitive.js"),c=Object.defineProperty;i.f=r?c:function(h,p,m){if(a(h),p=l(p,!0),a(m),o)try{return c(h,p,m)}catch{}if("get"in m||"set"in m)throw TypeError("Accessors not supported");return"value"in m&&(h[p]=m.value),h}},"./node_modules/core-js/internals/object-get-own-property-descriptor.js":function(n,i,s){var r=s("./node_modules/core-js/internals/descriptors.js"),o=s("./node_modules/core-js/internals/object-property-is-enumerable.js"),a=s("./node_modules/core-js/internals/create-property-descriptor.js"),l=s("./node_modules/core-js/internals/to-indexed-object.js"),c=s("./node_modules/core-js/internals/to-primitive.js"),u=s("./node_modules/core-js/internals/has.js"),h=s("./node_modules/core-js/internals/ie8-dom-define.js"),p=Object.getOwnPropertyDescriptor;i.f=r?p:function(y,O){if(y=l(y),O=c(O,!0),h)try{return p(y,O)}catch{}if(u(y,O))return a(!o.f.call(y,O),y[O])}},"./node_modules/core-js/internals/object-get-own-property-names.js":function(n,i,s){var r=s("./node_modules/core-js/internals/object-keys-internal.js"),o=s("./node_modules/core-js/internals/enum-bug-keys.js"),a=o.concat("length","prototype");i.f=Object.getOwnPropertyNames||function(c){return r(c,a)}},"./node_modules/core-js/internals/object-get-own-property-symbols.js":function(n,i){i.f=Object.getOwnPropertySymbols},"./node_modules/core-js/internals/object-get-prototype-of.js":function(n,i,s){var r=s("./node_modules/core-js/internals/has.js"),o=s("./node_modules/core-js/internals/to-object.js"),a=s("./node_modules/core-js/internals/shared-key.js"),l=s("./node_modules/core-js/internals/correct-prototype-getter.js"),c=a("IE_PROTO"),u=Object.prototype;n.exports=l?Object.getPrototypeOf:function(h){return h=o(h),r(h,c)?h[c]:typeof h.constructor=="function"&&h instanceof h.constructor?h.constructor.prototype:h instanceof Object?u:null}},"./node_modules/core-js/internals/object-keys-internal.js":function(n,i,s){var r=s("./node_modules/core-js/internals/has.js"),o=s("./node_modules/core-js/internals/to-indexed-object.js"),a=s("./node_modules/core-js/internals/array-includes.js"),l=s("./node_modules/core-js/internals/hidden-keys.js"),c=a(!1);n.exports=function(u,h){var p=o(u),m=0,y=[],O;for(O in p)!r(l,O)&&r(p,O)&&y.push(O);for(;h.length>m;)r(p,O=h[m++])&&(~c(y,O)||y.push(O));return y}},"./node_modules/core-js/internals/object-keys.js":function(n,i,s){var r=s("./node_modules/core-js/internals/object-keys-internal.js"),o=s("./node_modules/core-js/internals/enum-bug-keys.js");n.exports=Object.keys||function(l){return r(l,o)}},"./node_modules/core-js/internals/object-property-is-enumerable.js":function(n,i,s){var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,a=o&&!r.call({1:2},1);i.f=a?function(c){var u=o(this,c);return!!u&&u.enumerable}:r},"./node_modules/core-js/internals/object-set-prototype-of.js":function(n,i,s){var r=s("./node_modules/core-js/internals/validate-set-prototype-of-arguments.js");n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var o=!1,a={},l;try{l=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,l.call(a,[]),o=a instanceof Array}catch{}return function(u,h){return r(u,h),o?l.call(u,h):u.__proto__=h,u}}():void 0)},"./node_modules/core-js/internals/own-keys.js":function(n,i,s){var r=s("./node_modules/core-js/internals/global.js"),o=s("./node_modules/core-js/internals/object-get-own-property-names.js"),a=s("./node_modules/core-js/internals/object-get-own-property-symbols.js"),l=s("./node_modules/core-js/internals/an-object.js"),c=r.Reflect;n.exports=c&&c.ownKeys||function(h){var p=o.f(l(h)),m=a.f;return m?p.concat(m(h)):p}},"./node_modules/core-js/internals/path.js":function(n,i,s){n.exports=s("./node_modules/core-js/internals/global.js")},"./node_modules/core-js/internals/redefine.js":function(n,i,s){var r=s("./node_modules/core-js/internals/global.js"),o=s("./node_modules/core-js/internals/shared.js"),a=s("./node_modules/core-js/internals/hide.js"),l=s("./node_modules/core-js/internals/has.js"),c=s("./node_modules/core-js/internals/set-global.js"),u=s("./node_modules/core-js/internals/function-to-string.js"),h=s("./node_modules/core-js/internals/internal-state.js"),p=h.get,m=h.enforce,y=String(u).split("toString");o("inspectSource",function(O){return u.call(O)}),(n.exports=function(O,S,x,T){var k=T?!!T.unsafe:!1,D=T?!!T.enumerable:!1,M=T?!!T.noTargetGet:!1;if(typeof x=="function"&&(typeof S=="string"&&!l(x,"name")&&a(x,"name",S),m(x).source=y.join(typeof S=="string"?S:"")),O===r){D?O[S]=x:c(S,x);return}else k?!M&&O[S]&&(D=!0):delete O[S];D?O[S]=x:a(O,S,x)})(Function.prototype,"toString",function(){return typeof this=="function"&&p(this).source||u.call(this)})},"./node_modules/core-js/internals/require-object-coercible.js":function(n,i){n.exports=function(s){if(s==null)throw TypeError("Can't call method on "+s);return s}},"./node_modules/core-js/internals/set-global.js":function(n,i,s){var r=s("./node_modules/core-js/internals/global.js"),o=s("./node_modules/core-js/internals/hide.js");n.exports=function(a,l){try{o(r,a,l)}catch{r[a]=l}return l}},"./node_modules/core-js/internals/set-to-string-tag.js":function(n,i,s){var r=s("./node_modules/core-js/internals/object-define-property.js").f,o=s("./node_modules/core-js/internals/has.js"),a=s("./node_modules/core-js/internals/well-known-symbol.js"),l=a("toStringTag");n.exports=function(c,u,h){c&&!o(c=h?c:c.prototype,l)&&r(c,l,{configurable:!0,value:u})}},"./node_modules/core-js/internals/shared-key.js":function(n,i,s){var r=s("./node_modules/core-js/internals/shared.js"),o=s("./node_modules/core-js/internals/uid.js"),a=r("keys");n.exports=function(l){return a[l]||(a[l]=o(l))}},"./node_modules/core-js/internals/shared.js":function(n,i,s){var r=s("./node_modules/core-js/internals/global.js"),o=s("./node_modules/core-js/internals/set-global.js"),a=s("./node_modules/core-js/internals/is-pure.js"),l="__core-js_shared__",c=r[l]||o(l,{});(n.exports=function(u,h){return c[u]||(c[u]=h!==void 0?h:{})})("versions",[]).push({version:"3.1.3",mode:a?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/internals/string-at.js":function(n,i,s){var r=s("./node_modules/core-js/internals/to-integer.js"),o=s("./node_modules/core-js/internals/require-object-coercible.js");n.exports=function(a,l,c){var u=String(o(a)),h=r(l),p=u.length,m,y;return h<0||h>=p?c?"":void 0:(m=u.charCodeAt(h),m<55296||m>56319||h+1===p||(y=u.charCodeAt(h+1))<56320||y>57343?c?u.charAt(h):m:c?u.slice(h,h+2):(m-55296<<10)+(y-56320)+65536)}},"./node_modules/core-js/internals/to-absolute-index.js":function(n,i,s){var r=s("./node_modules/core-js/internals/to-integer.js"),o=Math.max,a=Math.min;n.exports=function(l,c){var u=r(l);return u<0?o(u+c,0):a(u,c)}},"./node_modules/core-js/internals/to-indexed-object.js":function(n,i,s){var r=s("./node_modules/core-js/internals/indexed-object.js"),o=s("./node_modules/core-js/internals/require-object-coercible.js");n.exports=function(a){return r(o(a))}},"./node_modules/core-js/internals/to-integer.js":function(n,i){var s=Math.ceil,r=Math.floor;n.exports=function(o){return isNaN(o=+o)?0:(o>0?r:s)(o)}},"./node_modules/core-js/internals/to-length.js":function(n,i,s){var r=s("./node_modules/core-js/internals/to-integer.js"),o=Math.min;n.exports=function(a){return a>0?o(r(a),9007199254740991):0}},"./node_modules/core-js/internals/to-object.js":function(n,i,s){var r=s("./node_modules/core-js/internals/require-object-coercible.js");n.exports=function(o){return Object(r(o))}},"./node_modules/core-js/internals/to-primitive.js":function(n,i,s){var r=s("./node_modules/core-js/internals/is-object.js");n.exports=function(o,a){if(!r(o))return o;var l,c;if(a&&typeof(l=o.toString)=="function"&&!r(c=l.call(o))||typeof(l=o.valueOf)=="function"&&!r(c=l.call(o))||!a&&typeof(l=o.toString)=="function"&&!r(c=l.call(o)))return c;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/internals/uid.js":function(n,i){var s=0,r=Math.random();n.exports=function(o){return"Symbol(".concat(o===void 0?"":o,")_",(++s+r).toString(36))}},"./node_modules/core-js/internals/validate-set-prototype-of-arguments.js":function(n,i,s){var r=s("./node_modules/core-js/internals/is-object.js"),o=s("./node_modules/core-js/internals/an-object.js");n.exports=function(a,l){if(o(a),!r(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype")}},"./node_modules/core-js/internals/well-known-symbol.js":function(n,i,s){var r=s("./node_modules/core-js/internals/global.js"),o=s("./node_modules/core-js/internals/shared.js"),a=s("./node_modules/core-js/internals/uid.js"),l=s("./node_modules/core-js/internals/native-symbol.js"),c=r.Symbol,u=o("wks");n.exports=function(h){return u[h]||(u[h]=l&&c[h]||(l?c:a)("Symbol."+h))}},"./node_modules/core-js/modules/es.array.from.js":function(n,i,s){var r=s("./node_modules/core-js/internals/export.js"),o=s("./node_modules/core-js/internals/array-from.js"),a=s("./node_modules/core-js/internals/check-correctness-of-iteration.js"),l=!a(function(c){Array.from(c)});r({target:"Array",stat:!0,forced:l},{from:o})},"./node_modules/core-js/modules/es.string.iterator.js":function(n,i,s){var r=s("./node_modules/core-js/internals/string-at.js"),o=s("./node_modules/core-js/internals/internal-state.js"),a=s("./node_modules/core-js/internals/define-iterator.js"),l="String Iterator",c=o.set,u=o.getterFor(l);a(String,"String",function(h){c(this,{type:l,string:String(h),index:0})},function(){var p=u(this),m=p.string,y=p.index,O;return y>=m.length?{value:void 0,done:!0}:(O=r(m,y,!0),p.index+=O.length,{value:O,done:!1})})},"./node_modules/webpack/buildin/global.js":function(n,i){var s;s=function(){return this}();try{s=s||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(s=window)}n.exports=s},"./src/default-attrs.json":function(n){n.exports={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"}},"./src/icon.js":function(n,i,s){Object.defineProperty(i,"__esModule",{value:!0});var r=Object.assign||function(O){for(var S=1;S<arguments.length;S++){var x=arguments[S];for(var T in x)Object.prototype.hasOwnProperty.call(x,T)&&(O[T]=x[T])}return O},o=function(){function O(S,x){for(var T=0;T<x.length;T++){var k=x[T];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(S,k.key,k)}}return function(S,x,T){return x&&O(S.prototype,x),T&&O(S,T),S}}(),a=s("./node_modules/classnames/dedupe.js"),l=h(a),c=s("./src/default-attrs.json"),u=h(c);function h(O){return O&&O.__esModule?O:{default:O}}function p(O,S){if(!(O instanceof S))throw new TypeError("Cannot call a class as a function")}var m=function(){function O(S,x){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];p(this,O),this.name=S,this.contents=x,this.tags=T,this.attrs=r({},u.default,{class:"feather feather-"+S})}return o(O,[{key:"toSvg",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},T=r({},this.attrs,x,{class:(0,l.default)(this.attrs.class,x.class)});return"<svg "+y(T)+">"+this.contents+"</svg>"}},{key:"toString",value:function(){return this.contents}}]),O}();function y(O){return Object.keys(O).map(function(S){return S+'="'+O[S]+'"'}).join(" ")}i.default=m},"./src/icons.js":function(n,i,s){Object.defineProperty(i,"__esModule",{value:!0});var r=s("./src/icon.js"),o=h(r),a=s("./dist/icons.json"),l=h(a),c=s("./src/tags.json"),u=h(c);function h(p){return p&&p.__esModule?p:{default:p}}i.default=Object.keys(l.default).map(function(p){return new o.default(p,l.default[p],u.default[p])}).reduce(function(p,m){return p[m.name]=m,p},{})},"./src/index.js":function(n,i,s){var r=s("./src/icons.js"),o=h(r),a=s("./src/to-svg.js"),l=h(a),c=s("./src/replace.js"),u=h(c);function h(p){return p&&p.__esModule?p:{default:p}}n.exports={icons:o.default,toSvg:l.default,replace:u.default}},"./src/replace.js":function(n,i,s){Object.defineProperty(i,"__esModule",{value:!0});var r=Object.assign||function(y){for(var O=1;O<arguments.length;O++){var S=arguments[O];for(var x in S)Object.prototype.hasOwnProperty.call(S,x)&&(y[x]=S[x])}return y},o=s("./node_modules/classnames/dedupe.js"),a=u(o),l=s("./src/icons.js"),c=u(l);function u(y){return y&&y.__esModule?y:{default:y}}function h(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof document>"u")throw new Error("`feather.replace()` only works in a browser environment.");var O=document.querySelectorAll("[data-feather]");Array.from(O).forEach(function(S){return p(S,y)})}function p(y){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},S=m(y),x=S["data-feather"];if(delete S["data-feather"],c.default[x]===void 0){console.warn("feather: '"+x+"' is not a valid icon");return}var T=c.default[x].toSvg(r({},O,S,{class:(0,a.default)(O.class,S.class)})),k=new DOMParser().parseFromString(T,"image/svg+xml"),D=k.querySelector("svg");y.parentNode.replaceChild(D,y)}function m(y){return Array.from(y.attributes).reduce(function(O,S){return O[S.name]=S.value,O},{})}i.default=h},"./src/tags.json":function(n){n.exports={activity:["pulse","health","action","motion"],airplay:["stream","cast","mirroring"],"alert-circle":["warning","alert","danger"],"alert-octagon":["warning","alert","danger"],"alert-triangle":["warning","alert","danger"],"align-center":["text alignment","center"],"align-justify":["text alignment","justified"],"align-left":["text alignment","left"],"align-right":["text alignment","right"],anchor:[],archive:["index","box"],"at-sign":["mention","at","email","message"],award:["achievement","badge"],aperture:["camera","photo"],"bar-chart":["statistics","diagram","graph"],"bar-chart-2":["statistics","diagram","graph"],battery:["power","electricity"],"battery-charging":["power","electricity"],bell:["alarm","notification","sound"],"bell-off":["alarm","notification","silent"],bluetooth:["wireless"],"book-open":["read","library"],book:["read","dictionary","booklet","magazine","library"],bookmark:["read","clip","marker","tag"],box:["cube"],briefcase:["work","bag","baggage","folder"],calendar:["date"],camera:["photo"],cast:["chromecast","airplay"],"chevron-down":["expand"],"chevron-up":["collapse"],circle:["off","zero","record"],clipboard:["copy"],clock:["time","watch","alarm"],"cloud-drizzle":["weather","shower"],"cloud-lightning":["weather","bolt"],"cloud-rain":["weather"],"cloud-snow":["weather","blizzard"],cloud:["weather"],codepen:["logo"],codesandbox:["logo"],code:["source","programming"],coffee:["drink","cup","mug","tea","cafe","hot","beverage"],columns:["layout"],command:["keyboard","cmd","terminal","prompt"],compass:["navigation","safari","travel","direction"],copy:["clone","duplicate"],"corner-down-left":["arrow","return"],"corner-down-right":["arrow"],"corner-left-down":["arrow"],"corner-left-up":["arrow"],"corner-right-down":["arrow"],"corner-right-up":["arrow"],"corner-up-left":["arrow"],"corner-up-right":["arrow"],cpu:["processor","technology"],"credit-card":["purchase","payment","cc"],crop:["photo","image"],crosshair:["aim","target"],database:["storage","memory"],delete:["remove"],disc:["album","cd","dvd","music"],"dollar-sign":["currency","money","payment"],droplet:["water"],edit:["pencil","change"],"edit-2":["pencil","change"],"edit-3":["pencil","change"],eye:["view","watch"],"eye-off":["view","watch","hide","hidden"],"external-link":["outbound"],facebook:["logo","social"],"fast-forward":["music"],figma:["logo","design","tool"],"file-minus":["delete","remove","erase"],"file-plus":["add","create","new"],"file-text":["data","txt","pdf"],film:["movie","video"],filter:["funnel","hopper"],flag:["report"],"folder-minus":["directory"],"folder-plus":["directory"],folder:["directory"],framer:["logo","design","tool"],frown:["emoji","face","bad","sad","emotion"],gift:["present","box","birthday","party"],"git-branch":["code","version control"],"git-commit":["code","version control"],"git-merge":["code","version control"],"git-pull-request":["code","version control"],github:["logo","version control"],gitlab:["logo","version control"],globe:["world","browser","language","translate"],"hard-drive":["computer","server","memory","data"],hash:["hashtag","number","pound"],headphones:["music","audio","sound"],heart:["like","love","emotion"],"help-circle":["question mark"],hexagon:["shape","node.js","logo"],home:["house","living"],image:["picture"],inbox:["email"],instagram:["logo","camera"],key:["password","login","authentication","secure"],layers:["stack"],layout:["window","webpage"],"life-buoy":["help","life ring","support"],link:["chain","url"],"link-2":["chain","url"],linkedin:["logo","social media"],list:["options"],lock:["security","password","secure"],"log-in":["sign in","arrow","enter"],"log-out":["sign out","arrow","exit"],mail:["email","message"],"map-pin":["location","navigation","travel","marker"],map:["location","navigation","travel"],maximize:["fullscreen"],"maximize-2":["fullscreen","arrows","expand"],meh:["emoji","face","neutral","emotion"],menu:["bars","navigation","hamburger"],"message-circle":["comment","chat"],"message-square":["comment","chat"],"mic-off":["record","sound","mute"],mic:["record","sound","listen"],minimize:["exit fullscreen","close"],"minimize-2":["exit fullscreen","arrows","close"],minus:["subtract"],monitor:["tv","screen","display"],moon:["dark","night"],"more-horizontal":["ellipsis"],"more-vertical":["ellipsis"],"mouse-pointer":["arrow","cursor"],move:["arrows"],music:["note"],navigation:["location","travel"],"navigation-2":["location","travel"],octagon:["stop"],package:["box","container"],paperclip:["attachment"],pause:["music","stop"],"pause-circle":["music","audio","stop"],"pen-tool":["vector","drawing"],percent:["discount"],"phone-call":["ring"],"phone-forwarded":["call"],"phone-incoming":["call"],"phone-missed":["call"],"phone-off":["call","mute"],"phone-outgoing":["call"],phone:["call"],play:["music","start"],"pie-chart":["statistics","diagram"],"play-circle":["music","start"],plus:["add","new"],"plus-circle":["add","new"],"plus-square":["add","new"],pocket:["logo","save"],power:["on","off"],printer:["fax","office","device"],radio:["signal"],"refresh-cw":["synchronise","arrows"],"refresh-ccw":["arrows"],repeat:["loop","arrows"],rewind:["music"],"rotate-ccw":["arrow"],"rotate-cw":["arrow"],rss:["feed","subscribe"],save:["floppy disk"],scissors:["cut"],search:["find","magnifier","magnifying glass"],send:["message","mail","email","paper airplane","paper aeroplane"],settings:["cog","edit","gear","preferences"],"share-2":["network","connections"],shield:["security","secure"],"shield-off":["security","insecure"],"shopping-bag":["ecommerce","cart","purchase","store"],"shopping-cart":["ecommerce","cart","purchase","store"],shuffle:["music"],"skip-back":["music"],"skip-forward":["music"],slack:["logo"],slash:["ban","no"],sliders:["settings","controls"],smartphone:["cellphone","device"],smile:["emoji","face","happy","good","emotion"],speaker:["audio","music"],star:["bookmark","favorite","like"],"stop-circle":["media","music"],sun:["brightness","weather","light"],sunrise:["weather","time","morning","day"],sunset:["weather","time","evening","night"],tablet:["device"],tag:["label"],target:["logo","bullseye"],terminal:["code","command line","prompt"],thermometer:["temperature","celsius","fahrenheit","weather"],"thumbs-down":["dislike","bad","emotion"],"thumbs-up":["like","good","emotion"],"toggle-left":["on","off","switch"],"toggle-right":["on","off","switch"],tool:["settings","spanner"],trash:["garbage","delete","remove","bin"],"trash-2":["garbage","delete","remove","bin"],triangle:["delta"],truck:["delivery","van","shipping","transport","lorry"],tv:["television","stream"],twitch:["logo"],twitter:["logo","social"],type:["text"],umbrella:["rain","weather"],unlock:["security"],"user-check":["followed","subscribed"],"user-minus":["delete","remove","unfollow","unsubscribe"],"user-plus":["new","add","create","follow","subscribe"],"user-x":["delete","remove","unfollow","unsubscribe","unavailable"],user:["person","account"],users:["group"],"video-off":["camera","movie","film"],video:["camera","movie","film"],voicemail:["phone"],volume:["music","sound","mute"],"volume-1":["music","sound"],"volume-2":["music","sound"],"volume-x":["music","sound","mute"],watch:["clock","time"],"wifi-off":["disabled"],wifi:["connection","signal","wireless"],wind:["weather","air"],"x-circle":["cancel","close","delete","remove","times","clear"],"x-octagon":["delete","stop","alert","warning","times","clear"],"x-square":["cancel","close","delete","remove","times","clear"],x:["cancel","close","delete","remove","times","clear"],youtube:["logo","video","play"],"zap-off":["flash","camera","lightning"],zap:["flash","camera","lightning"],"zoom-in":["magnifying glass"],"zoom-out":["magnifying glass"]}},"./src/to-svg.js":function(n,i,s){Object.defineProperty(i,"__esModule",{value:!0});var r=s("./src/icons.js"),o=a(r);function a(c){return c&&c.__esModule?c:{default:c}}function l(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(console.warn("feather.toSvg() is deprecated. Please use feather.icons[name].toSvg() instead."),!c)throw new Error("The required `key` (icon name) parameter is missing.");if(!o.default[c])throw new Error("No icon matching '"+c+"'. See the complete list of icons at https://feathericons.com");return o.default[c].toSvg(u)}i.default=l},0:function(n,i,s){s("./node_modules/core-js/es/array/from.js"),n.exports=s("./src/index.js")}})})})(v9);var Cie=v9.exports;const w9=tY(Cie),Aie=Object.keys(w9.icons),Kd={props:{name:{type:String,required:!0,validator:t=>Aie.includes(t)}},render(){const t=w9.icons[this.name];return ja("svg",{...Object.assign({},t.attrs,{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":1.5,width:null,height:null}),class:[t.attrs.class],innerHTML:t.contents})}},xie=ve({components:{Button:At,FeatherIcon:Kd},props:{type:{type:String,default:"info"},title:{type:String,required:!0},detail:{type:[String,Array],required:!1},buttons:{type:Array,required:!0}},setup(){return{primary:Cn(null),secondary:Cn(null)}},data(){return{open:!1}},computed:{config(){return rx(this.type)}},watch:{open(t){t?document.addEventListener("keydown",this.handleEscape):document.removeEventListener("keydown",this.handleEscape)}},async mounted(){await Bi(()=>{this.open=!0}),this.focusButton()},methods:{focusButton(){var e,n;let t=(e=this.primary)==null?void 0:e[0];t||(t=(n=this.secondary)==null?void 0:n[0]),t&&t.$el.focus()},handleEscape(t){if(t.code!=="Escape")return;if(t.preventDefault(),t.stopPropagation(),this.buttons.length===1)return this.handleClick(0);const e=this.buttons.findIndex(({isEscape:n})=>n);if(e!==-1)return this.handleClick(e)},handleClick(t){this.buttons[t].action(),this.open=!1}}}),kie={key:0,class:"backdrop z-20 flex justify-center items-center"},Pie={class:"bg-white dark:bg-gray-850 border dark:border-gray-800 rounded-lg text-gray-900 dark:text-gray-25 p-4 shadow-2xl w-dialog flex flex-col gap-4 inner"},Tie={class:"flex justify-between items-center"},$ie={class:"font-semibold"},Die={key:0,class:"text-base"},Mie={class:"text-base"},Iie={class:"flex justify-end gap-4 mt-4"};function Rie(t,e,n,i,s,r){const o=Q("FeatherIcon"),a=Q("Button");return w(),H(IS,{to:"body"},[_(Ir,null,{default:U(()=>[t.open?(w(),P("div",kie,[v("div",Pie,[v("div",Tie,[v("h1",$ie,R(t.title),1),_(o,{name:t.config.iconName,class:ee(["w-6 h-6",t.config.iconColor])},null,8,["name","class"])]),t.detail?(w(),P(le,{key:0},[typeof t.detail=="string"?(w(),P("p",Die,R(t.detail),1)):(w(!0),P(le,{key:1},Pe(t.detail,l=>(w(),P("div",null,[v("p",Mie,R(l),1)]))),256))],64)):B("",!0),v("div",Iie,[(w(!0),P(le,null,Pe(t.buttons,(l,c)=>(w(),H(a,{ref_for:!0,ref:l.isPrimary?"primary":"secondary",key:l.label,style:{"min-width":"5rem"},type:l.isPrimary?"primary":"secondary",onClick:()=>t.handleClick(c)},{default:U(()=>[He(R(l.label),1)]),_:2},1032,["type","onClick"]))),128))])])])):B("",!0)]),_:1})])}const _ie=ne(xie,[["render",Rie],["__scopeId","data-v-e3e630d7"]]);class Mp extends ze{get isTransactional(){return!0}async validate(){if(await super.validate(),!this.isTransactional)return;const e=await this.getPosting();e!==null&&e.validate()}async afterSubmit(){if(await super.afterSubmit(),!this.isTransactional)return;const e=await this.getPosting();e!==null&&await e.post()}async afterCancel(){if(await super.afterCancel(),!this.isTransactional)return;const e=await this.getPosting();e!==null&&await e.postReverse()}async afterDelete(){if(await super.afterDelete(),!this.isTransactional)return;const e=await this.fyo.db.getAll(A.AccountingLedgerEntry,{fields:["name"],filters:{referenceType:this.schemaName,referenceName:this.name}});for(const{name:n}of e)await(await this.fyo.doc.getDoc(A.AccountingLedgerEntry,n)).delete()}}var nn=(t=>(t.Asset="Asset",t.Liability="Liability",t.Equity="Equity",t.Income="Income",t.Expense="Expense",t))(nn||{}),ln=(t=>(t["Accumulated Depreciation"]="Accumulated Depreciation",t.Bank="Bank",t.Cash="Cash",t.Chargeable="Chargeable",t["Cost of Goods Sold"]="Cost of Goods Sold",t.Depreciation="Depreciation",t.Equity="Equity",t["Expense Account"]="Expense Account",t["Expenses Included In Valuation"]="Expenses Included In Valuation",t["Fixed Asset"]="Fixed Asset",t["Income Account"]="Income Account",t.Payable="Payable",t.Receivable="Receivable",t["Round Off"]="Round Off",t.Stock="Stock",t["Stock Adjustment"]="Stock Adjustment",t["Stock Received But Not Billed"]="Stock Received But Not Billed",t.Tax="Tax",t.Temporary="Temporary",t))(ln||{});class Ip{constructor(e,n){this.fyo=n,this.refDoc=e,this.entries=[],this.creditMap={},this.debitMap={},this.reverted=!1}async debit(e,n){const i=this._getLedgerEntry(e,"debit");await i.set("debit",i.debit.add(n))}async credit(e,n){const i=this._getLedgerEntry(e,"credit");await i.set("credit",i.credit.add(n))}async post(){this._validateIsEqual(),await this._sync()}async postReverse(){this._validateIsEqual(),await this._syncReverse()}validate(){this._validateIsEqual()}timezoneDateTimeAdjuster(e){const i=new Date(e),s=i.getTimezoneOffset()%60,r=(i.getTimezoneOffset()-s)/60;return i.setHours(0-r),i.setMinutes(0-s),i.setSeconds(0),i.setMilliseconds(0),i}async makeRoundOffEntry(){const{debit:e,credit:n}=this._getTotalDebitAndCredit(),i=e.sub(n),s=i.abs();if(s.eq(0))return;const r=await this._getRoundOffAccount();i.gt(0)?await this.credit(r,s):await this.debit(r,s)}_getLedgerEntry(e,n){let i=this.creditMap;if(n==="debit"&&(i=this.debitMap),i[e])return i[e];const s=this.fyo.doc.getNewDoc(A.AccountingLedgerEntry,{account:e,party:this.refDoc.party??"",date:this.timezoneDateTimeAdjuster(this.refDoc.date),referenceType:this.refDoc.schemaName,referenceName:this.refDoc.name,reverted:this.reverted,debit:this.fyo.pesa(0),credit:this.fyo.pesa(0)},!1);return this.entries.push(s),i[e]=s,i[e]}_validateIsEqual(){const{debit:e,credit:n}=this._getTotalDebitAndCredit();if(!e.eq(n))throw new ie(b`Total Debit: ${this.fyo.format(e,"Currency")} must be equal to Total Credit: ${this.fyo.format(n,"Currency")}`)}_getTotalDebitAndCredit(){let e=this.fyo.pesa(0),n=this.fyo.pesa(0);for(const i of this.entries)e=e.add(i.debit),n=n.add(i.credit);return{debit:e,credit:n}}async _sync(){await this._syncLedgerEntries()}async _syncLedgerEntries(){for(const e of this.entries)await e.sync()}async _syncReverse(){await this._syncReverseLedgerEntries()}async _syncReverseLedgerEntries(){const e=await this.fyo.db.getAll("AccountingLedgerEntry",{fields:["name"],filters:{referenceType:this.refDoc.schemaName,referenceName:this.refDoc.name,reverted:!1}});for(const{name:n}of e)await(await this.fyo.doc.getDoc("AccountingLedgerEntry",n)).revert()}async _getRoundOffAccount(){const e=await this.fyo.getValue(A.AccountingSettings,"roundOffAccount");if(!e){const n=new Ea(b`Please set Round Off Account in the Settings.`,!1);throw n.name=b`Round Off Account Not Found`,n}return e}}class M1 extends ze{static getListViewSettings(){return{columns:["name",hse(),"item","description","party"]}}}async function TC(t){if(t.schemaName!==A.SalesQuote){if(t.schemaName===A.PurchaseInvoice||t.schemaName===A.PurchaseReceipt||t.schemaName===A.StockMovement||t.schemaName===A.Shipment)for(const e of t.items??[])e.item&&e.batch&&await t.fyo.getValue(A.Item,e.item,"hasBatch")&&(await t.fyo.db.exists(A.Batch,e.batch)||await R1(t.fyo,e.item,e.batch));for(const e of t.items??[])await Eie(e)}}async function Eie(t){const e=t.idx??0,n=t.item,i=t.batch;if(!n)return;const s=await t.fyo.getValue(A.Item,n,"hasBatch");if(!s&&i)throw new ie([t.fyo.t`Batch set for row ${e+1}.`,t.fyo.t`Item ${n} is not a batched item`].join(" "));if(s&&!i)throw new ie([t.fyo.t`Batch not set for row ${e+1}.`,t.fyo.t`Item ${n} is a batched item`].join(" "))}async function S9(t){if(t.schemaName!==A.SalesQuote&&!t.isCancelled)for(const e of t.items??[])await Qie(e)}async function Qie(t){var l,c,u;if(((l=t.parentdoc)==null?void 0:l.schemaName)===A.SalesQuote)return;const e=t.idx??0,n=t.item;if(!n)return;const i=await t.fyo.getValue(A.Item,n,"hasSerialNumber");if(i&&!t.serialNumber)throw new ie([t.fyo.t`Serial Number not set for row ${e+1}.`,t.fyo.t`Serial Number is enabled for Item ${n}`].join(" "));if(!i&&t.serialNumber)throw new ie([t.fyo.t`Serial Number set for row ${e+1}.`,t.fyo.t`Serial Number is not enabled for Item ${n}`].join(" "));const s=t.serialNumber;if(!i||typeof s!="string")return;const r=Jd(s),o=Math.abs(t.quantity??0);if(r.length!==o)throw new ie(b`Additional ${o-r.length} Serial Numbers required for ${o} quantity of ${n}.`);const a=[];for(const h of r)if(!await t.fyo.db.exists(A.SerialNumber,h)){if($C(t)){a.push(h);continue}throw new ie(b`Serial Number ${h} does not exist.`)}for(const h of r){if(a.includes(h))continue;const p=await t.fyo.doc.getDoc(A.SerialNumber,h);if(!(p instanceof M1))continue;if(p.item!==n)throw new ie(b`Serial Number ${h} does not belong to the item ${n}.`);const m=p.status??"Inactive",y=t.parentSchemaName,O=!!((c=t.parentdoc)!=null&&c.returnAgainst),S=!!((u=t.parentdoc)!=null&&u.submitted);if(y==="PurchaseReceipt"&&m!=="Inactive"&&!S&&!O)throw new ie(b`Serial Number ${h} is not Inactive`);if(y==="Shipment"&&m!=="Active"&&!S&&!O)throw new ie(b`Serial Number ${h} is not Active.`)}}function Jd(t){return t?t.split(`
`).map(e=>e.trim()).filter(Boolean):[]}function C9(t){var e;return(e=t.items)!=null&&e.length?t.items.map(n=>Jd(n.serialNumber??"").map(i=>({serialNumber:i,item:n}))).flat().filter(Boolean):[]}async function Nie(t){const n=(t.items??[]).map(i=>Jd(i.serialNumber??"").map(r=>({item:i.item??"",serialNumber:r,isIncoming:$C(i)}))).flat().filter(({item:i,isIncoming:s})=>s&&i);for(const{item:i,serialNumber:s}of n){if(await t.fyo.db.exists(A.SerialNumber,s))continue;const r=t.fyo.doc.getNewDoc(A.SerialNumber,{name:s,item:i});await r.set("status","Active"),await r.sync()}}function $C(t){var e,n;return((e=t.parentdoc)==null?void 0:e.schemaName)===A.Shipment?!1:((n=t.parentdoc)==null?void 0:n.schemaName)===A.PurchaseReceipt?!0:!!t.toLocation&&!t.fromLocation}async function A9(t,e){return $C(t)?await t.fyo.db.exists(A.SerialNumber,e):!0}async function Gy(t,e,n=!1){for(const i of t.items??[]){if(!i.serialNumber)continue;const s=Fie(t,i,e,n);await Lie(s,i.serialNumber,t.fyo)}}async function Lie(t,e,n){for(const i of Jd(e))await(await n.doc.getDoc(A.SerialNumber,i)).setAndSync("status",t)}function Fie(t,e,n,i){return t.schemaName===A.Shipment?i?n?"Delivered":"Active":n?"Active":"Delivered":t.schemaName===A.PurchaseReceipt?i?n?"Active":"Delivered":n?"Inactive":"Active":Bie(t,e,n)}function Bie(t,e,n){return t.movementType==="MaterialIssue"?n?"Active":"Delivered":t.movementType==="MaterialReceipt"?n?"Inactive":"Active":t.movementType==="MaterialTransfer"?"Active":e.fromLocation?n?"Active":"Delivered":n?"Inactive":"Active"}async function I1(t,e,n){if(!n||n<=0||!await t.getValue(A.Item,e,"hasSerialNumber"))return"";const s=await t.getValue(A.Item,e,"serialNumberSeries");if(!s||typeof s!="string")return"";const r=s.trim();if(!r||!await t.db.exists(A.SerialNumberSeries,r))return"";const a=await t.doc.getDoc(A.SerialNumberSeries,r),l=[],c=a.padZeros;let u=await Vie(t,e,r);for(u===null&&(u=(a.current||a.start)-1);l.length<n;){u++;const p=jie(r,u,c);await t.db.exists(A.SerialNumber,p)||l.push(p)}return l.length>0&&(await a.set("current",u),await a.sync()),l.join(`
`)}async function Vie(t,e,n){const i=await t.db.getAllRaw(A.SerialNumber,{filters:{item:e},fields:["name"]});if(!i||i.length===0)return null;let s=-1;for(const r of i){const o=r.name;if(o.startsWith(n)){const a=o.substring(n.length),l=parseInt(a,10);!isNaN(l)&&l>s&&(s=l)}}return s>=0?s:null}function jie(t,e,n){return t+e.toString().padStart(n??4,"0")}async function _u(t,e,n){if(!n||n<=0||!await t.getValue(A.Item,e,"hasSerialNumber"))return"";const s=await t.db.getAllRaw(A.StockLedgerEntry,{fields:["serialNumber","date","quantity"],filters:{item:e,serialNumber:["!=",""]},orderBy:["date","created","name"],order:"asc"});if(!s||s.length===0)return"";const r={};for(const c of s){const u=c.serialNumber.trim();u&&(r[u]=(r[u]||0)+c.quantity)}const o=[],a=new Set;for(const c of s){const u=c.serialNumber.trim();if(u&&!a.has(u)&&(r[u]||0)>0&&(o.push(u),a.add(u),o.length>=n))break}return o.length===0?"":o.slice(0,n).join(`
`)}async function qf(t,e){try{const n=await t.getValue(A.Item,e,"batchSeries");if(!n)return;const i=n.trim();await t.db.exists("BatchSeries",i)||await t.doc.getNewDoc("BatchSeries",{name:i,start:1001,padZeros:4,current:1001}).sync();const r=await t.doc.getDoc("BatchSeries",i),o=r.padZeros??4,a=await t.db.getAllRaw(A.Batch,{fields:["name"],filters:{item:e}});let l;if(a&&a.length>0){let u=-1;for(const h of a){const m=h.name.replace(i,""),y=parseInt(m,10);!isNaN(y)&&y>u&&(u=y)}u>=0?l=u+1:l=r.start??1001}else l=r.start??1001;return`${i}${l.toString().padStart(o,"0")}`}catch{return}}async function R1(t,e,n){try{if(await t.db.exists(A.Batch,n))return!0;await t.doc.getNewDoc("Batch",{name:n,item:e}).sync();const r=await t.getValue(A.Item,e,"batchSeries");if(r){const o=r.trim(),a=await t.doc.getDoc("BatchSeries",o),l=parseInt(n,10);isNaN(l)||(await a.set("current",l),await a.sync())}return!0}catch{return!1}}async function x9(t,e){const n=await qf(t,e);return n&&await R1(t,e,n)?n:void 0}var Hn,k9,P9,Nv,Lv,T9,$9,D9,M9;class zie{constructor(e,n,i){yn(this,Hn);this.items=[],this.details=e,this.isCancelled=n,this.fyo=i}async validateTransfers(e){const n=e.map(i=>Ke(this,Hn,Nv).call(this,i));for(const i of n)await Ke(this,Hn,Lv).call(this,i)}async createTransfers(e){const n=e.map(i=>Ke(this,Hn,Nv).call(this,i));for(const i of n)await Ke(this,Hn,Lv).call(this,i);for(const i of n)Ke(this,Hn,P9).call(this,i);await Ke(this,Hn,k9).call(this)}async cancelTransfers(){const{referenceName:e,referenceType:n}=this.details;await this.fyo.db.deleteAll(A.StockLedgerEntry,{referenceType:n,referenceName:e})}async validateCancel(e){const n=e.map(({item:i,rate:s,quantity:r,fromLocation:o,toLocation:a,isReturn:l})=>({item:i,rate:s,quantity:r,fromLocation:a,toLocation:o,isReturn:l}));await this.validateTransfers(n)}}Hn=new WeakSet,k9=async function(){for(const e of this.items)await e.sync()},P9=function(e){const n=new Zie(e,this.fyo);n.transferStock(),this.items.push(n)},Nv=function(e){return Object.assign({},this.details,e)},Lv=async function(e){Ke(this,Hn,$9).call(this,e),await Ke(this,Hn,T9).call(this,e),Ke(this,Hn,D9).call(this,e),await Ke(this,Hn,M9).call(this,e)},T9=async function(e){if(await $l(this.fyo)==="Inventory Items"){if(!e.quantity)throw new ie(b`Quantity needs to be set`);if(!e.isReturn&&e.quantity<=0)throw new ie(b`Quantity (${e.quantity}) has to be greater than zero`)}},$9=function(e){if(!e.rate)throw new ie(b`Rate needs to be set`);if(e.rate.lt(0))throw new ie(b`Rate (${e.rate.float}) has to be greater than zero`)},D9=function(e){if(!e.fromLocation&&!e.toLocation)throw new ie(b`Both From and To Location cannot be undefined`)},M9=async function(e){const n=await this.fyo.getValue(A.Item,e.item,"trackItem");if(!e.fromLocation||!n)return;const i=e.date.toISOString(),s=this.fyo.format(e.date,"Datetime"),r=e.batch||void 0,o=Jd(e.serialNumber??"");let a=await this.fyo.db.getStockQuantity(e.item,e.fromLocation,void 0,i,r,o)??0;this.isCancelled&&(a+=e.quantity);const l=r?b` in Batch ${r}`:"";if(!e.isReturn&&a<e.quantity)throw new ie([b`Insufficient Quantity.`,b`Additional quantity (${e.quantity-a}) required${l} to make outward transfer of item ${e.item} from ${e.fromLocation} on ${s}`].join(`
`));const c=await this.fyo.db.getStockQuantity(e.item,e.fromLocation,e.date.toISOString(),void 0,r,o);if(c===null)return;const h=a-e.quantity+c;if(h<0)throw new ie([b`Insufficient Quantity.`,b`Transfer will cause future entries to have negative stock.`,b`Additional quantity (${-h}) required${l} to make outward transfer of item ${e.item} from ${e.fromLocation} on ${s}`].join(`
`))};var Ms,I9,Fv,R9,Bv,_9;class Zie{constructor(e,n){yn(this,Ms);this.date=e.date,this.item=e.item,this.rate=e.rate,this.quantity=e.quantity,this.fromLocation=e.fromLocation,this.toLocation=e.toLocation,this.referenceName=e.referenceName,this.referenceType=e.referenceType,this.batch=e.batch,this.serialNumber=e.serialNumber,this.fyo=n}transferStock(){Ke(this,Ms,_9).call(this),Ke(this,Ms,I9).call(this)}async sync(){var n,i;const e=[(n=this.stockLedgerEntries)==null?void 0:n.filter(s=>s.quantity<=0),(i=this.stockLedgerEntries)==null?void 0:i.filter(s=>s.quantity>0)].flat().filter(Boolean);for(const s of e)await s.sync()}}Ms=new WeakSet,I9=function(){this.fromLocation&&Ke(this,Ms,Fv).call(this,this.fromLocation,!0),this.toLocation&&Ke(this,Ms,Fv).call(this,this.toLocation,!1)},Fv=function(e,n){var o,a;let i=this.quantity;if(i===0)return;const s=Jd(this.serialNumber??"");if(s.length){const l=Ke(this,Ms,R9).call(this,e,n,s,i);(o=this.stockLedgerEntries)==null||o.push(...l);return}n&&(i=-i);const r=Ke(this,Ms,Bv).call(this,e,i);(a=this.stockLedgerEntries)==null||a.push(r)},R9=function(e,n,i,s){return s>0&&(s=1),s<0?s=1:n&&(s=-1),i.map(r=>Ke(this,Ms,Bv).call(this,e,s,r))},Bv=function(e,n,i){return this.fyo.doc.getNewDoc(A.StockLedgerEntry,{date:this.date,item:this.item,rate:this.rate,batch:this.batch||null,serialNumber:i||null,quantity:n,location:e,referenceName:this.referenceName,referenceType:this.referenceType})},_9=function(){this.stockLedgerEntries=[]};class DC extends Mp{async beforeSubmit(){await super.beforeSubmit();const e=this._getTransferDetails();await this._getStockManager().validateTransfers(e)}async afterSubmit(){await super.afterSubmit(),await Nie(this);const e=this._getTransferDetails();await this._getStockManager().createTransfers(e)}async beforeCancel(){await super.beforeCancel();const e=this._getTransferDetails(),n=this._getStockManager();n.isCancelled=!0,await n.validateCancel(e)}async afterCancel(){await super.afterCancel(),await this._getStockManager().cancelTransfers()}_getStockManager(){let e=this.date;return typeof e=="string"&&(e=new Date(e)),new zie({date:e,referenceName:this.name,referenceType:this.schemaName},this.isCancelled,this.fyo)}}class E9{constructor(){this.value=0,this.quantity=0,this.movingAverage=0,this.queue=[]}get fifo(){const e=this.value/this.quantity;return Number.isNaN(e)?0:e}inward(e,n){if(n<=0||e<0)return null;const i=e*n;this.movingAverage=(this.movingAverage*this.quantity+i)/(this.quantity+n),this.quantity+=n,this.value+=i;const s=this.queue.at(-1);return(s==null?void 0:s.rate)!==e?this.queue.push({rate:e,quantity:n}):s.quantity+=n,e}outward(e){if(this.quantity<e||e<=0)return null;let n=0;this.quantity-=e;let i=e;for(;i>0;){const s=this.queue.shift();if(s===void 0)return null;const r=s.quantity;let o=i;const a=r-i;i=i-r,i>0&&(o=r),a>0&&this.queue.unshift({rate:s.rate,quantity:a}),this.value-=s.rate*o,n+=o*s.rate}return n/e}}var Fc=(t=>(t.FIFO="FIFO",t.MovingAverage="MovingAverage",t))(Fc||{}),gs=(t=>(t.MaterialIssue="MaterialIssue",t.MaterialReceipt="MaterialReceipt",t.MaterialTransfer="MaterialTransfer",t.Manufacture="Manufacture",t))(gs||{});async function Xf(t,e={}){const n=["name","date","item","batch","serialNumber","rate","quantity","location","referenceName","referenceType"];return await t.db.getAllRaw(A.StockLedgerEntry,{fields:n,filters:e,orderBy:["date","created","name"],order:"asc"})}async function qie(t){var l,c,u;const e=t.fyo,n=t.date??new Date,i=(t.items??[]).filter(h=>h.item),s=Array.from(new Set(i.map(h=>h.item))),r=await Xf(e,{item:["in",s],date:["<=",n.toISOString()]}),o={};for(const h of r){const p=h.item,m=h.location,y=h.batch??"-";o[p]??(o[p]={}),(l=o[p])[m]??(l[m]={}),(c=o[p][m])[y]??(c[y]=new E9);const O=o[p][m][y];if(h.quantity>0){const S=e.pesa(h.rate);O.inward(S.float,h.quantity)}else O.outward(-h.quantity)}let a=e.pesa(0);for(const h of i){const p=h.item??"-",m=h.location??"-",y=h.batch??"-",O=h.amount??0;if(Object.keys(o).length===0){a=a.add(O);continue}const S=o[p][m][y];S||(a=a.add(O));const x=((u=h.rate)==null?void 0:u.float)??0,T=h.quantity??0,D=(S.outward(T)??x)*T;a=a.add(D)}return a}function Uy(t,e){var s,r;const n=[],i={};for(const o of t){const a=Jc(o.name),l=new Date(o.date),c=kn(o.rate),{item:u,location:h,quantity:p,referenceName:m,referenceType:y}=o,O=o.batch??"",S=o.serialNumber??"";if(p===0)continue;i[u]??(i[u]={}),(s=i[u])[h]??(s[h]={}),(r=i[u][h])[O]??(r[O]=new E9);const x=i[u][h][O],T=x.value;let k;if(p>0?k=x.inward(c,p):k=x.outward(-p),k===null)continue;const D=x.quantity;let M=x.fifo;e===Fc.MovingAverage&&(M=x.movingAverage);const L=x.value,j=L-T,G={name:a,date:l,item:u,location:h,batch:O,serialNumber:S,quantity:p,balanceQuantity:D,incomingRate:k,valuationRate:M,balanceValue:L,valueChange:j,referenceName:m,referenceType:y};n.push(G)}return n}function Hy(t,e,n=!1,i="All"){var l,c,u,h,p;const s={},r=e.fromDate?Date.parse(e.fromDate):null,o=e.toDate?Date.parse(e.toDate):null;for(const m of t){if(e.item&&m.item!==e.item||e.location&&m.location!==e.location||e.batch&&m.batch!==e.batch||n&&(!m.serialNumber||m.serialNumber.trim()===""))continue;const y=m.batch||"",O=n?m.serialNumber:"";s[l=m.item]??(s[l]={}),(c=s[m.item])[u=m.location]??(c[u]={}),(h=s[m.item][m.location])[y]??(h[y]={}),(p=s[m.item][m.location][y])[O]??(p[O]=Xie(m.item,m.location,y,O));const S=m.date.valueOf();if(r&&S<r){const T=s[m.item][m.location][y][O];Wie(T,m);continue}if(o&&S>o)continue;const x=s[m.item][m.location][y][O];Gie(x,m)}let a=Object.values(s).map(m=>Object.values(m).map(y=>Object.values(y).map(O=>Object.values(O)))).flat(3);return i==="In stock"?a=a.filter(m=>m.balanceQuantity>0):i==="Out stock"&&(a=a.filter(m=>m.balanceQuantity<=0)),a}function Xie(t,e,n,i){return{name:0,item:t,location:e,batch:n,serialNumber:i,balanceQuantity:0,balanceValue:0,openingQuantity:0,openingValue:0,incomingQuantity:0,incomingValue:0,outgoingQuantity:0,outgoingValue:0,valuationRate:0}}function Wie(t,e){t.openingQuantity+=e.quantity,t.openingValue+=e.valueChange,t.balanceQuantity+=e.quantity,t.balanceValue+=e.valueChange}function Gie(t,e){t.balanceQuantity+=e.quantity,t.balanceValue+=e.valueChange,e.quantity>0?(t.incomingQuantity+=e.quantity,t.incomingValue+=e.valueChange):(t.outgoingQuantity-=e.quantity,t.outgoingValue-=e.valueChange),t.valuationRate=e.valuationRate}const Cf=class Cf extends DC{constructor(){super(...arguments),this.formulas={grandTotal:{formula:async()=>await this.getGrandTotal(),dependsOn:["items"]}},this.hidden={backReference:()=>!(this.backReference||!(this.isSubmitted||this.isCancelled)),terms:()=>!(this.terms||!(this.isSubmitted||this.isCancelled)),attachment:()=>!(this.attachment||!(this.isSubmitted||this.isCancelled)),returnAgainst:()=>(this.isSubmitted||this.isCancelled)&&!this.returnAgainst}}get isSales(){return this.schemaName===A.Shipment}get isReturn(){return!!this.returnAgainst}get enableDiscounting(){var e,n;return!!((n=(e=this.fyo.singles)==null?void 0:e.AccountingSettings)!=null&&n.enableDiscounting)}get invoiceSchemaName(){return this.isSales?A.SalesInvoice:A.PurchaseInvoice}getTotalDiscount(e){if(!this.enableDiscounting)return this.fyo.pesa(0);const n=this.getItemDiscountAmount(e),i=this.getInvoiceDiscountAmount(e);return n.add(i)}getNetTotal(){return this.getSum("items","amount",!1)}async getGrandTotal(){if(!this.backReference)return this.getSum("items","amount",!1);const e=await this.fyo.doc.getDoc(this.invoiceSchemaName,this.backReference),n=this.getTotalDiscount(e);return(e.taxes??[]).map(i=>i.amount).reduce((i,s)=>i.add(s),this.getNetTotal()).sub(n)}getInvoiceDiscountAmount(e){if(this.setDiscountAmount)return this.discountAmount??this.fyo.pesa(0);let n=this.fyo.pesa(0);for(const i of e.items??[])this.discountAfterTax?n=n.add(i.itemTaxedTotal):n=n.add(i.itemDiscountedTotal);return n.percent(e.discountPercent??0)??0}getItemDiscountAmount(e){var i;if(!((i=this==null?void 0:this.items)!=null&&i.length))return this.fyo.pesa(0);let n=this.fyo.pesa(0);for(const s of this.items??[])if(!s.itemDiscountAmount.isZero())n=n.add(s.itemDiscountAmount??this.fyo.pesa(0));else if(e.discountAfterTax)e.discountAfterTax&&(n=n.add((s.itemTaxedTotal??this.fyo.pesa(0)).mul((s.itemDiscountPercent??0)/100)));else{const r=(s.amount??this.fyo.pesa(0)).mul((s.itemDiscountPercent??0)/100);n=n.add(r)}return n}_getTransferDetails(){return(this.items??[]).map(e=>{let n,i;return this.isSales?n=e.location:i=e.location,{item:e.item,rate:e.rate,quantity:e.quantity,batch:e.batch,serialNumber:e.serialNumber,isReturn:e.isReturn,fromLocation:n,toLocation:i}})}async getPosting(){await this.validateAccounts();const e=await this.fyo.getValue(A.InventorySettings,"stockInHand"),n=await this.getPostingAmount(),i=new Ip(this,this.fyo);if(this.isSales){const s=await this.fyo.getValue(A.InventorySettings,"costOfGoodsSold");this.isReturn?(await i.debit(e,n),await i.credit(s,n)):(await i.debit(s,n),await i.credit(e,n))}else{const s=await this.fyo.getValue(A.InventorySettings,"stockReceivedButNotBilled");this.isReturn?(await i.debit(s,n),await i.credit(e,n)):(await i.debit(e,n),await i.credit(s,n))}return await i.makeRoundOffEntry(),i}async getPostingAmount(){return this.isSales?await qie(this):this.grandTotal??this.fyo.pesa(0)}async validateAccounts(){var i;const e=["stockInHand"];this.isSales?e.push("costOfGoodsSold"):e.push("stockReceivedButNotBilled");const n=[];for(const s of e){const r=(i=this.fyo.singles.InventorySettings)==null?void 0:i[s],o=this.fyo.getField(A.InventorySettings,s);if(!r){n.push(b`${o.label} account not set in Inventory Settings.`);continue}await this.fyo.db.exists(A.Account,r)||n.push(b`Account ${r} does not exist.`)}if(n.length)throw new ie(n.join(" "))}async validate(){await super.validate(),await TC(this),await S9(this),await Uie(this),await this._validateHasReturnDocs()}async afterSubmit(){await super.afterSubmit(),await Gy(this,!1,this.isReturn),await this._updateBackReference(),await this._updateItemsReturned()}async afterCancel(){await super.afterCancel(),await Gy(this,!0,this.isReturn),await this._updateBackReference(),await this._updateItemsReturned()}async _updateBackReference(){if(!this.isCancelled&&!this.isSubmitted||!this.backReference)return;const e=this.isSales?A.SalesInvoice:A.PurchaseInvoice,n=await this.fyo.doc.getDoc(e,this.backReference),i=this._getTransferMap();for(const r of n.items??[]){const o=r.item,a=r.quantity,l=r.stockNotTransferred??0,c=i[o];typeof c!="number"||typeof l!="number"||(this.isCancelled?(await r.set("stockNotTransferred",Math.min(l+c,a)),i[o]=Math.max(c+l-a,0)):(await r.set("stockNotTransferred",Math.max(l-c,0)),i[o]=Math.max(c-l,0)))}const s=n.getStockNotTransferred();await n.setAndSync("stockNotTransferred",s)}async _updateItemsReturned(){if(!this.returnAgainst)return;const e=await this.loadAndGetLink("returnAgainst");if(!e)return;const n=await this.fyo.doc.getDoc(this.schemaName,e.name),i=this.isSubmitted;await n.setAndSync({isReturned:i})}async _validateHasReturnDocs(){var r;if(!this.name||!this.isCancelled)return;const e=await this.fyo.db.getAll(this.schemaName,{filters:{returnAgainst:this.name}});if(!!!e.length)return;const i=e.map(o=>o.name).join(", "),s=((r=this.fyo.schemaMap[this.schemaName])==null?void 0:r.label)??this.schemaName;throw new ie(b`Cannot cancel ${this.schema.label} ${this.name} because of the following ${s}: ${i}`)}_getTransferMap(){return(this.items??[]).reduce((e,n)=>{var i;return!n.item||!n.quantity||(e[i=n.item]??(e[i]=0),e[n.item]+=n.quantity),e},{})}duplicate(){const e=super.duplicate();return e.backReference=void 0,e}async addItem(e){return await X9(e,this)}async change({doc:e,changed:n}){e.name===this.name&&n==="backReference"&&await this.setFieldsFromBackReference()}async setFieldsFromBackReference(){const e=this.backReference,{target:n}=this.fyo.getField(this.schemaName,"backReference");if(!e||!n)return;const i=await this.fyo.doc.getDoc(n,e);if(!(i instanceof za))return;const s=await i.getStockTransfer();if(s&&(await this.set("party",s.party),await this.set("terms",s.terms),await this.set("date",s.date),await this.set("items",s.items),this.items))for(const r of this.items){if(!r.item||!r.quantity)continue;if(await this.fyo.getValue(A.Item,r.item,"hasSerialNumber")){const a=await I1(this.fyo,r.item,Math.abs(r.quantity));a&&await r.set("serialNumber",a)}}}async getInvoice(){var a;if(!this.isSubmitted||this.backReference)return null;const e=this.invoiceSchemaName,n=this.fyo.singles.Defaults??{};let i,s;this.isSales?(i=n.salesInvoiceTerms??"",s=n.salesInvoiceNumberSeries??void 0):(i=n.purchaseInvoiceTerms??"",s=n.purchaseInvoiceNumberSeries??void 0);const r={party:this.party,date:new Date().toISOString(),terms:i,numberSeries:s,backReference:this.name},o=this.fyo.doc.getNewDoc(e,r);for(const l of this.items??[]){if(!l.item)continue;const c=l.item,u=l.unit,h=l.quantity,p=l.batch||null,m=l.rate??this.fyo.pesa(0),y=l.description,O=l.hsnCode;h&&await o.append("items",{item:c,quantity:h,unit:u,rate:m,batch:p,hsnCode:O,description:y})}return(a=o.items)!=null&&a.length?o:null}async getReturnDoc(){var a,l;if(!this.name)return;const e=this.getValidDict(!0,!0),n=e.items;if(!n)return;let i=[];const s=await this.fyo.db.getReturnBalanceItemsQty(this.schemaName,this.name);for(const c of n){if(!s){i=n,i.map(y=>(y.name=void 0,y.quantity*=-1,y));break}if(!!i.filter(y=>!c.batch&&y.item===c.item).length)continue;const h=s[c.item];let p=h.quantity,m=(a=h.serialNumbers)==null?void 0:a.join(`
`);c.batch&&h.batches&&h.batches[c.batch]&&(p=h.batches[c.batch].quantity,h.batches[c.batch].serialNumbers&&(m=(l=h.batches[c.batch].serialNumbers)==null?void 0:l.join(`
`))),i.push({...c,serialNumber:m,name:void 0,quantity:p})}const r={...e,name:void 0,date:new Date,items:i,returnAgainst:e.name},o=this.fyo.doc.getNewDoc(this.schema.name,r);return await o.runFormulas(),o}};Cf.defaults={numberSeries:e=>Q1(e.schemaName,e.fyo),terms:e=>{const n=e.fyo.singles.Defaults;return e.schemaName===A.Shipment?(n==null?void 0:n.shipmentTerms)??"":(n==null?void 0:n.purchaseReceiptTerms)??""},date:()=>new Date},Cf.filters={party:e=>({role:["in",[e.isSales?"Customer":"Supplier","Both"]]}),numberSeries:e=>({referenceType:e.schemaName}),backReference:()=>({stockNotTransferred:["!=",0],submitted:!0,cancelled:!1})},Cf.createFilters={party:e=>({role:e.isSales?"Customer":"Supplier"})};let xd=Cf;async function Uie(t){if(!t.isCancelled)for(const{serialNumber:e,item:n}of C9(t)){if(!await A9(n,e))continue;const s=await t.fyo.doc.getDoc(A.SerialNumber,e);if(!(s instanceof M1))continue;const r=s.status??"Inactive",o=!!t.isSubmitted,a=!!t.returnAgainst;if(o||a)return;if(t.schemaName===A.PurchaseReceipt&&r!=="Inactive")throw new ie(b`Serial Number ${e} is not Inactive`);if(t.schemaName===A.Shipment&&r!=="Active")throw new ie(b`Serial Number ${e} is not Active.`)}}var Gu=(t=>(t.Both="Both",t.Supplier="Supplier",t.Customer="Customer",t))(Gu||{});const pc=class pc extends ze{constructor(){super(...arguments),this.hidden={stockMovementNumberSeries:this.getInventoryHidden(),shipmentNumberSeries:this.getInventoryHidden(),purchaseReceiptNumberSeries:this.getInventoryHidden(),shipmentTerms:this.getInventoryHidden(),purchaseReceiptTerms:this.getInventoryHidden(),shipmentPrintTemplate:this.getInventoryHidden(),purchaseReceiptPrintTemplate:this.getInventoryHidden(),stockMovementPrintTemplate:this.getInventoryHidden(),posCashDenominations:this.getPointOfSaleHidden(),posCustomer:this.getPointOfSaleHidden(),saveButtonColour:this.getPointOfSaleHidden(),cancelButtonColour:this.getPointOfSaleHidden(),submitButtonColour:this.getPointOfSaleHidden(),heldButtonColour:this.getPointOfSaleHidden(),returnButtonColour:this.getPointOfSaleHidden(),payButtonColour:this.getPointOfSaleHidden(),payAndPrintButtonColour:this.getPointOfSaleHidden()}}getInventoryHidden(){return()=>{var e;return!((e=this.fyo.singles.AccountingSettings)!=null&&e.enableInventory)}}getPointOfSaleHidden(){return()=>{var e;return!((e=this.fyo.singles.InventorySettings)!=null&&e.enablePointOfSale)}}};pc.commonFilters={salesPaymentAccount:()=>({isGroup:!1,accountType:"Cash"}),purchasePaymentAccount:()=>({isGroup:!1,accountType:"Cash"}),salesQuoteNumberSeries:()=>({referenceType:A.SalesQuote}),salesInvoiceNumberSeries:()=>({referenceType:A.SalesInvoice}),purchaseInvoiceNumberSeries:()=>({referenceType:A.PurchaseInvoice}),journalEntryNumberSeries:()=>({referenceType:A.JournalEntry}),paymentNumberSeries:()=>({referenceType:A.Payment}),stockMovementNumberSeries:()=>({referenceType:A.StockMovement}),shipmentNumberSeries:()=>({referenceType:A.Shipment}),purchaseReceiptNumberSeries:()=>({referenceType:A.PurchaseReceipt}),salesQuotePrintTemplate:()=>({type:A.SalesQuote}),salesInvoicePrintTemplate:()=>({type:A.SalesInvoice}),posPrintTemplate:()=>({type:A.SalesInvoice}),purchaseInvoicePrintTemplate:()=>({type:A.PurchaseInvoice}),journalEntryPrintTemplate:()=>({type:A.JournalEntry}),paymentPrintTemplate:()=>({type:A.Payment}),shipmentPrintTemplate:()=>({type:A.Shipment}),purchaseReceiptPrintTemplate:()=>({type:A.PurchaseReceipt}),stockMovementPrintTemplate:()=>({type:A.StockMovement}),posCustomer:()=>({role:Gu.Customer})},pc.filters=pc.commonFilters,pc.createFilters=pc.commonFilters;let Vv=pc;const Q9={[A.SalesInvoice]:"salesInvoiceNumberSeries",[A.PurchaseInvoice]:"purchaseInvoiceNumberSeries",[A.JournalEntry]:"journalEntryNumberSeries",[A.Payment]:"paymentNumberSeries",[A.StockMovement]:"stockMovementNumberSeries",[A.Shipment]:"shipmentNumberSeries",[A.PurchaseReceipt]:"purchaseReceiptNumberSeries",[A.SalesQuote]:"salesQuoteNumberSeries"};class N9 extends ze{static getListViewSettings(){return{columns:["name",Z9(),mse()]}}}const V0=class V0 extends ze{constructor(e,n,i){super(e,n,i),this.formulas={description:{formula:async()=>await this.fyo.getValue("Item",this.item,"description"),dependsOn:["item"]},itemCode:{formula:async()=>await this.fyo.getValue("Item",this.item,"itemCode"),dependsOn:["item"]},rate:{formula:async s=>{var S;const r=await Hie(this);if(!(r!=null&&r.float)&&((S=this.rate)!=null&&S.float))return this.rate;if(s!=="itemTaxedTotal"&&s!=="itemDiscountedTotal")return(r==null?void 0:r.div(this.exchangeRate))??this.fyo.pesa(0);const o=this.quantity??0,a=this.itemDiscountPercent??0,l=this.itemDiscountAmount??this.fyo.pesa(0),c=await this.getTotalTaxRate(),u=this.itemTaxedTotal??this.fyo.pesa(0),h=this.itemDiscountedTotal??this.fyo.pesa(0),p=s==="itemTaxedTotal",m=this.discountAfterTax,y=!!this.setItemDiscountAmount;return ese(o,a,l,c,u,h,p,m,y)??r??this.fyo.pesa(0)},dependsOn:["date","priceList","batch","party","exchangeRate","item","quantity","itemTaxedTotal","itemDiscountedTotal","setItemDiscountAmount","pricingRuleDetail"]},unit:{formula:async()=>await this.fyo.getValue("Item",this.item,"unit"),dependsOn:["item"]},transferUnit:{formula:async s=>{if(!this.item)return;if(s==="quantity"||s==="unit")return this.unit;const r=await this.fyo.db.getAll(A.UOMConversionItem,{fields:["uom"],filters:{parent:this.item}});if(r.length)return this.unit;const o=r.map(a=>a.uom);return this.transferUnit&&o.includes(this.transferUnit)?this.transferUnit:this.unit},dependsOn:["item","unit"]},transferQuantity:{formula:s=>s==="qty"?this.qty:s==="quantity"||this.unit===this.transferUnit?this.quantity:this.transferQuantity,dependsOn:["item","quantity","qty"]},qty:{formula:s=>s==="transferQuantity"?this.transferQuantity:s==="quantity"||this.unit===this.transferUnit?this.quantity:this.transferQuantity,dependsOn:["transferQuantity","quantity"]},quantity:{formula:async s=>{if(!this.item)return this.quantity;const o=(await this.fyo.doc.getDoc(A.Item,this.item)).getLink("uom");let a=this.quantity??1;return this.isReturn&&a>0&&(a*=-1),!this.isReturn&&a<0&&(a*=-1),s==="transferQuantity"&&(a=this.transferQuantity*this.unitConversionFactor),o!=null&&o.isWhole?Math.round(a):kn(a)},dependsOn:["quantity","transferQuantity","transferUnit","unitConversionFactor","item","isReturn"]},unitConversionFactor:{formula:async()=>{var r,o;if(this.unit===this.transferUnit)return this.quantity=this.transferQuantity,1;const s=await this.fyo.db.getAll(A.UOMConversionItem,{fields:["conversionFactor","uom"],filters:{parent:this.item,uom:this.transferUnit}});return this.quantity=((r=s[0])==null?void 0:r.conversionFactor)*this.transferQuantity,kn(((o=s[0])==null?void 0:o.conversionFactor)??0)},dependsOn:["transferUnit","qty"]},account:{formula:()=>{let s="expenseAccount";return this.isSales&&(s="incomeAccount"),this.fyo.getValue("Item",this.item,s)},dependsOn:["item"]},tax:{formula:async()=>{const s=await this.fyo.getValue("Item",this.item,"tax");if(s)return s;const r=await this.fyo.getValue("Item",this.item,"itemGroup");if(!r)return"";const o=await this.fyo.doc.getDoc("ItemGroup",r);return o==null?void 0:o.tax},dependsOn:["item"]},amount:{formula:()=>this.rate.mul(this.quantity),dependsOn:["item","rate","quantity"]},hsnCode:{formula:async()=>await this.fyo.getValue("Item",this.item,"hsnCode"),dependsOn:["item"]},itemDiscountedTotal:{formula:async()=>{var c;const s=await this.getTotalTaxRate(),r=this.rate??this.fyo.pesa(0),o=this.quantity??1,a=this.itemDiscountAmount??this.fyo.pesa(0),l=this.itemDiscountPercent??0;return this.setItemDiscountAmount&&((c=this.itemDiscountAmount)!=null&&c.isZero())||!this.setItemDiscountAmount&&this.itemDiscountPercent===0?r.mul(o):this.discountAfterTax?Jie(s,r,o,a,l,!!this.setItemDiscountAmount):L9(r,o,a,l,!!this.setItemDiscountAmount)},dependsOn:["itemDiscountAmount","itemDiscountPercent","itemTaxedTotal","setItemDiscountAmount","tax","rate","quantity","item"]},itemTaxedTotal:{formula:async()=>{const s=await this.getTotalTaxRate(),r=this.rate??this.fyo.pesa(0),o=this.quantity??1,a=this.itemDiscountAmount??this.fyo.pesa(0),l=this.itemDiscountPercent??0;return this.discountAfterTax?F9(s,r,o):Kie(s,r,o,a,l,!!this.setItemDiscountAmount)},dependsOn:["rate","quantity","item"]},stockNotTransferred:{formula:async()=>{var c,u;if((c=this.parentdoc)!=null&&c.isSubmitted)return;if(!(await this.loadAndGetLink("item")).trackItem)return 0;const{backReference:r,stockTransferSchemaName:o}=this.parentdoc??{};if(!r||!o||typeof this.quantity!="number")return this.quantity;const l=((u=(await this.fyo.doc.getDoc(o,r)).items)==null?void 0:u.filter(h=>h.item===this.item).reduce((h,p)=>p.quantity??0+h,0))??0;return Math.max(0,this.quantity-l)},dependsOn:["item","quantity"]},setItemDiscountAmount:{formula:async()=>{var l,c,u;if(!((l=this.fyo.singles.AccountingSettings)!=null&&l.enablePricingRule))return this.setItemDiscountAmount;if(!((u=(c=this.parentdoc)==null?void 0:c.pricingRuleDetail)==null?void 0:u.some(h=>h.referenceItem===this.item))&&this.itemDiscountAmount.isZero())return!1;const r=await IC(this.parentdoc),o=r==null?void 0:r.find(h=>h.applyOnItem===this.item);if(!o){if(this.prule)await this.set("itemDiscountAmount",this.fyo.pesa(0));else return await this.set("itemDiscountAmount",this.itemDiscountAmount),!0;return!1}this.prule=o;const a=o.pricingRule;if(a.priceDiscountType==="amount"){const h=a.discountAmount??this.fyo.pesa(0);return await this.set("itemDiscountAmount",h),!0}return!1},dependsOn:["pricingRuleDetail","quantity","item"]},itemDiscountPercent:{formula:async()=>{var o,a,l;if(!((o=this.fyo.singles.AccountingSettings)!=null&&o.enablePricingRule))return this.itemDiscountPercent??0;const s=(l=(a=this.parentdoc)==null?void 0:a.pricingRuleDetail)==null?void 0:l.filter(c=>c.referenceItem===this.item);if(!s||!s.length)return this.prule?0:this.itemDiscountPercent;const r=await this.fyo.doc.getDoc(A.PricingRule,s[0].referenceName);return r.discountType==="Product Discount"?this.itemDiscountPercent??0:r.priceDiscountType==="percentage"?(await this.set("setItemDiscountAmount",!1),r.discountPercentage??0):this.itemDiscountPercent??0},dependsOn:["pricingRuleDetail","item"]}},this.validations={rate:s=>{if(!s.gte(0))throw new ie(this.fyo.t`Rate (${this.fyo.format(s,"Currency")}) cannot be less zero.`)},itemDiscountAmount:s=>{if(!s.lte(this.amount))throw new ie(this.fyo.t`Discount Amount (${this.fyo.format(s,"Currency")}) cannot be greated than Amount (${this.fyo.format(this.amount,"Currency")}).`)},itemDiscountPercent:s=>{if(!(s<100))throw new ie(this.fyo.t`Discount Percent (${s}) cannot be greater than 100.`)},transferUnit:async s=>{if(!this.item||s===this.unit)return;if((await this.fyo.db.getAll(A.UOMConversionItem,{fields:["parent"],filters:{uom:s,parent:this.item}})).length<1)throw new ie(b`Transfer Unit ${s} is not applicable for Item ${this.item}`)},qty:async s=>{var o;const r=Math.abs(s);!this.item||r<=0||this.isSales&&(o=this.fyo.singles.InventorySettings)!=null&&o.enableBatches&&this.batch&&await this.validateBatchQuantity(this.batch,r)},batch:async s=>{var o;if(!s||!this.item||!this.isSales||!((o=this.fyo.singles.InventorySettings)!=null&&o.enableBatches))return;const r=this.quantity??0;r>0?await this.validateBatchQuantity(s,r):r<0&&await this.validateBatchQuantity(s,Math.abs(r))}},this.hidden={itemDiscountedTotal:()=>{var s;return!!(!this.enableDiscounting||this.setItemDiscountAmount&&((s=this.itemDiscountAmount)!=null&&s.isZero())||!this.setItemDiscountAmount&&this.itemDiscountPercent===0)},setItemDiscountAmount:()=>!this.enableDiscounting,itemDiscountAmount:()=>!(this.enableDiscounting&&this.setItemDiscountAmount),itemDiscountPercent:()=>!(this.enableDiscounting&&!this.setItemDiscountAmount),batch:()=>{var s;return!((s=this.fyo.singles.InventorySettings)!=null&&s.enableBatches)},transferUnit:()=>{var s;return!((s=this.fyo.singles.InventorySettings)!=null&&s.enableUomConversions)},transferQuantity:()=>{var s;return!((s=this.fyo.singles.InventorySettings)!=null&&s.enableUomConversions)},unitConversionFactor:()=>{var s;return!((s=this.fyo.singles.InventorySettings)!=null&&s.enableUomConversions)}},this.getCurrencies={},this._setGetCurrencies()}get isSales(){return this.schemaName==="SalesInvoiceItem"||this.schemaName==="SalesQuoteItem"}get date(){var e;return((e=this.parentdoc)==null?void 0:e.date)??void 0}get party(){var e;return((e=this.parentdoc)==null?void 0:e.party)??void 0}get priceList(){var e;return((e=this.parentdoc)==null?void 0:e.priceList)??void 0}get discountAfterTax(){var e;return!!((e=this==null?void 0:this.parentdoc)!=null&&e.discountAfterTax)}get enableDiscounting(){var e,n;return!!((n=(e=this.fyo.singles)==null?void 0:e.AccountingSettings)!=null&&n.enableDiscounting)}get enableInventory(){var e,n;return!!((n=(e=this.fyo.singles)==null?void 0:e.AccountingSettings)!=null&&n.enableInventory)}get currency(){var e;return((e=this.parentdoc)==null?void 0:e.currency)??Ks}get exchangeRate(){var e;return((e=this.parentdoc)==null?void 0:e.exchangeRate)??1}get isMultiCurrency(){var e;return((e=this.parentdoc)==null?void 0:e.isMultiCurrency)??!1}get isReturn(){var e;return!!((e=this.parentdoc)!=null&&e.isReturn)}get pricingRuleDetail(){var e;return(e=this.parentdoc)==null?void 0:e.pricingRuleDetail}async change(e){if(await super.change(e),e.changed==="item"&&!this.isSales&&this.item&&await this.fyo.getValue(A.Item,this.item,"hasBatch")){const i=await qf(this.fyo,this.item);i&&await this.set("batch",i)}}async getTotalTaxRate(){return this.tax?(await this.fyo.getValue("Tax",this.tax,"details")??[]).reduce((n,i)=>i.rate+n,0):0}async validateBatchQuantity(e,n){var c,u,h;let i;if(this.location)i=this.location;else{const p=(c=this.fyo.singles.POSSettings)==null?void 0:c.posProfile;p?i=await this.fyo.getValue(A.POSProfile,p,"inventory"):i=(u=this.fyo.singles.POSSettings)==null?void 0:u.inventory}const s=((h=this.fyo.singles.InventorySettings)==null?void 0:h.valuationMethod)??Fc.FIFO,r=await Xf(this.fyo),o=Uy(r,s),l=Hy(o,{item:this.item,location:i,batch:e}).reduce((p,m)=>p+(m.balanceQuantity||0),0);if(n>l)throw new ie(this.fyo.t`
        Batch ${e} only has ${l} quantity available
        but ${n} is required
      `)}_getCurrency(){var e;return this.exchangeRate===1?((e=this.fyo.singles.SystemSettings)==null?void 0:e.currency)??Ks:this.currency}_setGetCurrencies(){var n;const e=this.schema.fields.filter(({fieldtype:i})=>i===Ie.Currency);for(const{fieldname:i}of e)(n=this.getCurrencies)[i]??(n[i]=this._getCurrency.bind(this))}};V0.filters={item:async e=>{var r;let n="Sales";e.isSales&&(n="Purchases");const i={for:["not in",[n]]};if((r=e.fyo.singles.AccountingSettings)==null?void 0:r.enableERPNextSync){const o=await $l(e.fyo);o==="Inventory Items"?i.trackItem=!0:o==="ERP Sync Items"?i.datafromErp=!0:o==="Non-Inventory Items"&&(i.trackItem=!1,i.datafromErp=!1)}return i},batch:async e=>{var s,r,o;if(!!!await e.fyo.getValue(A.Item,e.item,"hasBatch"))return{name:["in",[]]};let i;e.isSales||(i=await qf(e.fyo,e.item),i&&await e.set("batch",i));try{let a;if(e.location)a=e.location;else{const O=(s=e.fyo.singles.POSSettings)==null?void 0:s.posProfile;if(O){const S=await e.fyo.doc.getDoc(A.POSProfile,O);a=S==null?void 0:S.inventory}else a=(r=e.fyo.singles.POSSettings)==null?void 0:r.inventory}const l=await Xf(e.fyo),c=((o=e.fyo.singles.InventorySettings)==null?void 0:o.valuationMethod)??Fc.FIFO,u=Uy(l,c),p=Hy(u,{item:e.item,location:a}).filter(O=>O.batch&&O.balanceQuantity>0).map(O=>O.batch),m=new Set(p);return i&&m.add(i),{name:["in",Array.from(m)]}}catch{const c=(await e.fyo.db.getAll(A.Batch,{fields:["name"],filters:{item:e.item}})).map(p=>p.name),u=new Set(c);return i&&u.add(i),{name:["in",Array.from(u)]}}},transferUnit:async e=>{const i=(await e.fyo.db.getAll(A.UOMConversionItem,{fields:["uom"],filters:{parent:e.item}})).map(o=>o.uom),s=await e.fyo.getValue(A.Item,e.item,"unit");return{name:["in",[...i,s].filter(Boolean)]}}},V0.createFilters={item:e=>({for:e.isSales?"Sales":"Purchases"})};let kd=V0;async function Hie(t){var s,r,o;if(t.isFreeItem)return t.rate;let e;if((s=t.fyo.singles.AccountingSettings)!=null&&s.enablePricingRule&&(e=await Yie(t)),e)return e;let n;if((r=t.fyo.singles.AccountingSettings)!=null&&r.enablePriceList&&(n=await H9(t,(o=t.parentdoc)==null?void 0:o.priceList)),n)return n;if(!t.item)return;const i=await t.fyo.getValue(A.Item,t.item,"rate");if(ui(i))return i}async function Yie(t){var i,s;const e=(s=(i=t.parentdoc)==null?void 0:i.pricingRuleDetail)==null?void 0:s.filter(r=>r.referenceItem===t.item);if(!e||!e.length)return;const n=await t.fyo.doc.getDoc(A.PricingRule,e[0].referenceName);if(n.discountType==="Price Discount"&&n.priceDiscountType==="rate")return n.discountRate}function L9(t,e,n,i,s){return s?t.sub(n).mul(e):i>0?t.mul(e).percent(i):t.mul(e)}function Kie(t,e,n,i,s,r){return L9(e,n,i,s,r).mul(1+t/100)}function Jie(t,e,n,i,s,r){const o=F9(t,e,n);return r?o.sub(i):o.mul(1-s/100)}function F9(t,e,n){return e.mul(n).mul(1+t/100)}function ese(t,e,n,i,s,r,o,a,l){const c=!o,u=!a;return c&&u&&l?r.add(n).div(t):c&&u&&!l?r.div(t*(1-e/100)):c&&a&&l?r.add(n).div(t*(1+i/100)):c&&a&&!l?r.div(t*(100-e)*(100+i)/100):o&&a?s.div(t*(1+i/100)):o&&u&&l?s.div(1+i/100).add(n).div(t):o&&u&&!l?s.div(t*(1-e/100)*(1+i/100)):null}class Rp extends kd{}function tse(t,e){return[j9(t,e)]}function nse(t){return[sse(t),rse(t)]}function B9(t,e){return[ose(t),ise(t,e),Pd(t),z9(t)]}async function Yy(t){var l,c,u;const e={},n=((l=t.fyo.singles.InventorySettings)==null?void 0:l.valuationMethod)??Fc.FIFO,i=await Xf(t.fyo),s=Uy(i,n),r=(c=t.fyo.singles.POSSettings)==null?void 0:c.posProfile;let o;if(r){const h=await t.fyo.doc.getDoc(A.POSProfile,r);o=h==null?void 0:h.inventory}else o=(u=t.fyo.singles.POSSettings)==null?void 0:u.inventory;const a=Hy(s,{location:o});for(const h of a)e[h.item]||(e[h.item]={availableQty:0}),h.batch&&(e[h.item][h.batch]=h.balanceQuantity),e[h.item].availableQty+=h.balanceQuantity;return e}async function $l(t){var i,s,r,o;const e=(i=t.singles.POSSettings)==null?void 0:i.posProfile;if((s=t.singles.AccountingSettings)==null?void 0:s.enableERPNextSync)return(r=t.singles.POSSettings)==null?void 0:r.itemVisibilityERP;if(e){const a=await t.doc.getDoc(A.POSProfile,e);return a==null?void 0:a.itemVisibility}return(o=t.singles.POSSettings)==null?void 0:o.itemVisibility}function V9(t,e){return[j9(t,e),Pd(t,!1),Pd(t,!0),z9(t)]}function ise(t,e){let n=t.t`Shipment`;return e===A.PurchaseInvoice&&(n=t.t`Purchase Receipt`),{label:n,group:t.t`Create`,condition:i=>i.isSubmitted&&!!i.stockNotTransferred,action:async i=>{const s=await i.getStockTransfer();if(!s||!s.name)return;const{routeTo:r}=await rn(async()=>{const{routeTo:a}=await Promise.resolve().then(()=>su);return{routeTo:a}},void 0),o=`/edit/${s.schemaName}/${s.name}`;await r(o)}}}function j9(t,e){let n=t.t`Sales Invoice`;return e===A.PurchaseReceipt&&(n=t.t`Purchase Invoice`),{label:n,group:t.t`Create`,condition:i=>e===A.SalesQuote?i.isSubmitted:i.isSubmitted&&!i.backReference,action:async i=>{const s=await i.getInvoice();if(!s||!s.name)return;const{routeTo:r}=await rn(async()=>{const{routeTo:a}=await Promise.resolve().then(()=>su);return{routeTo:a}},void 0),o=`/edit/${s.schemaName}/${s.name}`;await r(o)}}}function sse(t){return{group:t.t`Create`,label:t.t`Customer`,condition:e=>!e.notInserted,action:async(e,n)=>{const i=e.createCustomer();i.name&&await n.push(`/edit/Party/${i.name}`)}}}function rse(t){return{group:t.t`Create`,label:t.t`Sales Quote`,condition:e=>!e.notInserted,action:async(e,n)=>{const i=e.createSalesQuote();i.name&&await n.push(`/edit/SalesQuote/${i.name}`)}}}function ose(t){return{label:t.t`Payment`,group:t.t`Create`,condition:e=>e.isSubmitted&&!e.outstandingAmount.isZero(),action:async(e,n)=>{var l;const i=e.schema.name,s=e.getPayment();if(!s)return;await(s==null?void 0:s.set("referenceType",i));const r=n.currentRoute.value.fullPath;s.once("afterSync",async()=>{await s.submit(),await e.load(),await n.push(r)});const o=["party","for"];(l=t.singles.AccountingSettings)!=null&&l.enableInvoiceReturns||o.push("paymentType"),e.schemaName===A.SalesInvoice?o.push("account"):o.push("paymentAccount"),await s.runFormulas();const{openQuickEdit:a}=await rn(async()=>{const{openQuickEdit:c}=await Promise.resolve().then(()=>su);return{openQuickEdit:c}},void 0);await a({doc:s,hideFields:o})}}}function Pd(t,e=!1){let n=t.t`Accounting Entries`,i="GeneralLedger";return e&&(n=t.t`Stock Entries`,i="StockLedger"),{label:n,group:t.t`View`,condition:s=>s.isSubmitted,action:async(s,r)=>{const o=jv(s,i);await r.push(o)}}}function jv(t,e){return{name:"Report",params:{reportClassName:e,defaultFilters:JSON.stringify({referenceType:t.schemaName,referenceName:t.name})}}}function z9(t){return{label:t.t`Return`,group:t.t`Create`,condition:e=>{var n,i;return(!!((n=t.singles.AccountingSettings)!=null&&n.enableInvoiceReturns)||!!((i=t.singles.InventorySettings)!=null&&i.enableStockReturns))&&e.isSubmitted&&!e.isReturn},action:async e=>{let n;if((e instanceof za||e instanceof xd)&&(n=await e.getReturnDoc()),!n||!n.name)return;const{routeTo:i}=await rn(async()=>{const{routeTo:r}=await Promise.resolve().then(()=>su);return{routeTo:r}},void 0),s=`/edit/${e.schemaName}/${n.name}`;await i(s)}}}function _p(){return{label:b`Status`,fieldname:"status",fieldtype:"Select",render(t){const e=E1(t),n=_1[e]??"gray",i=MC(e);return{template:`<Badge class="text-xs" color="${n}">${i}</Badge>`,metadata:{status:e,color:n,label:i}}}}}function ase(){return{label:b`Status`,fieldname:"status",fieldtype:"Select",render(t){const e=cse(t),n=_1[e]??"gray",i=lse(e);return{template:`<Badge class="text-xs" color="${n}">${i}</Badge>`}}}}const _1={"":"gray",Draft:"gray",Open:"gray",Replied:"yellow",Opportunity:"yellow",Unpaid:"orange",Paid:"green",PartlyPaid:"yellow",Interested:"yellow",Converted:"green",Quotation:"green",Saved:"blue",NotSaved:"gray",Submitted:"green",Cancelled:"red",DonotContact:"red",Return:"lime",ReturnIssued:"lime"};function MC(t){switch(t){case"Draft":return b`Draft`;case"Saved":return b`Saved`;case"NotSaved":return b`Not Saved`;case"Submitted":return b`Submitted`;case"Cancelled":return b`Cancelled`;case"Paid":return b`Paid`;case"Unpaid":return b`Unpaid`;case"PartlyPaid":return b`Partly Paid`;case"Return":return b`Return`;case"ReturnIssued":return b`Return Issued`;default:return""}}function lse(t){switch(t){case"Open":return b`Open`;case"Replied":return b`Replied`;case"Opportunity":return b`Opportunity`;case"Interested":return b`Interested`;case"Converted":return b`Converted`;case"Quotation":return b`Quotation`;case"DonotContact":return b`Do not Contact`;default:return""}}function cse(t){return t?t.status:""}function E1(t){var e;return t?t.notInserted?"Draft":t.dirty?"NotSaved":(e=t.schema)!=null&&e.isSubmittable?use(t):"Saved":""}function use(t){if([A.SalesInvoice,A.PurchaseInvoice].includes(t.schema.name))return dse(t);if([A.Shipment,A.PurchaseReceipt].includes(t.schema.name)){if(t.returnAgainst&&t.submitted&&!t.cancelled)return"Return";if(t.isReturned&&t.submitted&&!t.cancelled)return"ReturnIssued"}return t.submitted&&!t.cancelled?"Submitted":t.submitted&&t.cancelled?"Cancelled":"Saved"}function dse(t){return t.submitted&&!t.cancelled&&t.returnAgainst?"Return":t.submitted&&!t.cancelled&&t.isReturned?"ReturnIssued":t.submitted&&!t.cancelled&&t.outstandingAmount.isZero()?"Paid":t.submitted&&!t.cancelled&&t.outstandingAmount.eq(t.grandTotal)?"Unpaid":t.cancelled?"Cancelled":t.submitted&&!t.isCancelled&&t.outstandingAmount.isPositive()&&t.outstandingAmount.neq(t.grandTotal)?"PartlyPaid":"Saved"}function hse(){return{label:b`Status`,fieldname:"status",fieldtype:"Select",render(t){let e=t.status;typeof e!="string"&&(e="Inactive");const n=fse[e]??"gray",i=pse(e);return{template:`<Badge class="text-xs" color="${n}">${i}</Badge>`}}}}const fse={Inactive:"gray",Active:"green",Delivered:"blue"};function pse(t){switch(t){case"Inactive":return b`Inactive`;case"Active":return b`Active`;case"Delivered":return b`Delivered`;default:return b`Inactive`}}function mse(){return{label:b`Enabled For`,fieldname:"enabledFor",fieldtype:"Select",render({isSales:t,isPurchase:e}){let n=b`None`;return t&&e?n=b`Sales and Purchase`:t?n=b`Sales`:e&&(n=b`Purchase`),{template:`<Badge class="text-xs" color="gray">${n}</Badge>`}}}}function Z9(){return{label:b`Enabled`,fieldname:"enabled",fieldtype:"Data",render(t){let e=b`Disabled`,n="orange";return t.isEnabled&&(e=b`Enabled`,n="green"),{template:`<Badge class="text-xs" color="${n}">${e}</Badge>`}}}}async function gse({fromCurrency:t,toCurrency:e,date:n}){if(!fetch)return 1;n||(n=Te.local().toISODate());const i=`currencyExchangeRate:${n}:${t}:${e}`;let s=0;if(localStorage&&(s=kn(localStorage.getItem(i))),s&&s!==1)return s;try{s=(await(await fetch(`https://api.vatcomply.com/rates?date=${n}&base=${t}&symbols=${e}`)).json()).rates[e]}catch{s??(s=1)}return localStorage&&localStorage.setItem(i,String(s)),s}function zv(t){switch(t){case nn.Asset:return!1;case nn.Liability:return!0;case nn.Equity:return!0;case nn.Expense:return!1;case nn.Income:return!0;default:return!0}}function Q1(t,e){const n=Q9[t];if(!n)return;const i=e.singles.Defaults,s=e.getField(t,"numberSeries");return(i==null?void 0:i[n])??(s==null?void 0:s.default)}function q9(){return{label:b`Status`,fieldname:"status",fieldtype:"Select",render(t){const e=E1(t),n=_1[e]??"gray",i=MC(e);return{template:`<Badge class="text-xs" color="${n}">${i}</Badge>`,metadata:{status:e,color:n,label:i}}}}}function yse(){return{label:b`Status`,fieldname:"status",fieldtype:"Select",render(t){const e=Ose(t),n=bse[e]??"gray",i=vse(e);return{template:`<Badge class="text-xs" color="${n}">${i}</Badge>`,metadata:{status:e,color:n,label:i}}}}}function Ose(t){if(!t)return"";const e=new Date;e.setHours(0,0,0,0);const n=t.toDate;if(n&&n<=e)return"Expired";const i=t.maximumUse,s=t.used;return i>0&&s>=i?"Maxed":"Active"}const bse={Active:"green",Disabled:"gray",Expired:"red",Maxed:"orange"};function vse(t){switch(t){case"Active":return b`Active`;case"Disabled":return b`Disabled`;case"Expired":return b`Expired`;case"Maxed":return b`Maxed`;default:return""}}async function X9(t,e){var s;if(!e.canEdit)return;let i=(e.items??[]).find(r=>r.item===t);if(i){const r=i.quantity??0;await i.set("quantity",r+1);return}if(await e.append("items"),i=(s=e.items)==null?void 0:s.at(-1),!!i){if(await i.set("item",t),e instanceof za&&!e.isSales){const r=await x9(e.fyo,t);r&&await i.set("batch",r)}if(e instanceof xd&&e.schemaName===A.PurchaseReceipt){const r=await I1(e.fyo,t,1);r&&await i.set("serialNumber",r)}}}async function W9(t){const i=(await t.fyo.db.getAll(t.schemaName,{fields:["name","loyaltyPoints"],filters:{returnAgainst:t.returnAgainst,submitted:!0}})).filter(r=>r.name!==t.name).reduce((r,o)=>r+Math.abs(o.loyaltyPoints),0),s=await t.fyo.getValue(A.SalesInvoice,t.returnAgainst,"loyaltyPoints");return Math.abs(s-Math.abs(i))}async function z4(t){var s;const e=await t.fyo.db.getAll(t.schemaName,{fields:["*"],filters:{returnAgainst:t.name}}),n=await Promise.all(e.map(r=>t.fyo.doc.getDoc(t.schemaName,r.name))),i={};for(const r of t.items||[]){const o=r.item,a=r.batch,l=r.quantity;if(o)if(a)if(!i[o])i[o]={quantity:l,batches:{[a]:l}};else{const c=i[o];c.quantity+=l,c.batches[a]=(c.batches[a]||0)+l}else i[o]=(i[o]||0)+l}for(const r of n)for(const o of(r==null?void 0:r.items)||[]){const a=o.item,l=o.batch,c=Math.abs(o.quantity);if(!(!a||!i[a]))if(l&&i[a]){const u=i[a];u.quantity-=c,(s=u.batches)!=null&&s[l]&&(u.batches[l]-=c)}else i[a]=i[a]-c}return i}async function wse(t){var l;const e=await t.fyo.doc.getDoc(A.LoyaltyProgram,t==null?void 0:t.loyaltyProgram);if(!e.isEnabled)return;const n=e.toDate,i=new Date;if(i.setHours(0,0,0,0),n&&new Date(n).getTime()<i.getTime())return;const s=new Date(Date.now());s.setDate(s.getDate()+(e.expiryDuration||0));let r,o;if(t.redeemLoyaltyPoints)o=-(t.loyaltyPoints||0);else{if(r=U9(e,t==null?void 0:t.grandTotal),!r)return;const c=r.collectionFactor;o=Math.round(((l=t==null?void 0:t.grandTotal)==null?void 0:l.float)||0)*c}return await t.fyo.doc.getNewDoc(A.LoyaltyPointEntry,{loyaltyProgram:t.loyaltyProgram,customer:t.party,invoice:t.name,postingDate:t.date,purchaseAmount:t.grandTotal,expiryDate:s,loyaltyProgramTier:r==null?void 0:r.tierName,loyaltyPoints:o}).sync()}async function G9(t,e,n){const s=(await t.doc.getDoc(A.LoyaltyProgram,e)).conversionFactor;return t.pesa((n||0)*s)}function U9(t,e){if(!t.collectionRules)return;let n;for(const i of t.collectionRules)if(i.minimumTotalSpent!==void 0&&i.minimumTotalSpent!==null){let s;ui(i.minimumTotalSpent)?s=i.minimumTotalSpent:s=new Il(i.minimumTotalSpent),s.lte(e)&&(!n||s.gt(n.minimumTotalSpent))&&(n=i)}return n}async function Sse(t){if(!t.loyaltyProgram)return;const e=await t.fyo.db.getAll(A.LoyaltyPointEntry,{fields:["name","loyaltyPoints","expiryDate"],filters:{loyaltyProgram:t.loyaltyProgram,invoice:t.isReturn?t.returnAgainst:t.name}});if(!e.length)return;const n=await t.fyo.doc.getDoc(A.LoyaltyPointEntry,e[0].name),i=(n==null?void 0:n.loyaltyPoints)+Math.abs(t.loyaltyPoints);i!==0&&await t.fyo.doc.getNewDoc(A.LoyaltyPointEntry,{loyaltyProgram:n.loyaltyProgram,customer:n.customer,invoice:n.invoice,postingDate:n.date,purchaseAmount:n.purchaseAmount,expiryDate:n.expiryDate,loyaltyProgramTier:n.loyaltyProgramTier,loyaltyPoints:i}).sync();const s=await t.fyo.doc.getDoc(A.Party,t.party);await n.delete(),await s.updateLoyaltyPoints()}async function Eu(t,e,n){var a,l;if(!e)return;let i=e.name;const s=await t.fyo.getValue(A.Item,e.item,"hasBatch"),r=await Yy(t);if(e instanceof Rp&&(i=e.item),s&&!e.batch)throw new ie(b`Please select a batch first`);if(await t.fyo.getValue(A.Item,e.item,"trackItem")){if(!r[i]||r[i].availableQty===0)throw new ie(b`Item ${i} has Zero Quantity`);if(e.batch){if(n&&!r[i]||r[i][e.batch]<((a=n[0])==null?void 0:a.quantity))throw new ie(b`Item ${i} only has ${r[i][e.batch]} Quantity in batch ${e.batch}`)}else if(n&&!r[i]||r[i].availableQty<((l=n[0])==null?void 0:l.quantity))throw new ie(b`Item ${i} only has ${r[i].availableQty} Quantity`)}}async function Cse(t,e,n){var a,l;if(!((a=t==null?void 0:t.coupons)!=null&&a.length)&&!e)return;let i=[];const s=e?[e]:(l=t==null?void 0:t.coupons)==null?void 0:l.map(c=>c.coupons);return s!=null&&s.length&&(i=await t.fyo.db.getAll(A.CouponCode,{fields:["*"],filters:{name:["in",s]}})),i.filter(c=>c.pricingRule===n[0]).length?await t.fyo.db.getAll(A.PricingRule,{fields:["*"],filters:{name:["in",n],isEnabled:!0,isCouponCodeBased:!0},orderBy:"priority",order:"desc"}):void 0}async function IC(t,e){var i;if(!((i=t.fyo.singles.AccountingSettings)!=null&&i.enablePricingRule)||!t.isSales||!t.items)return;const n=[];for(const s of t.items){if(s.isFreeItem)continue;const r=(await t.fyo.db.getAll(A.PricingRuleItem,{fields:["parent"],filters:{item:s.item,unit:s.unit}})).map(h=>h.parent);let o;const a=await t.fyo.db.getAll(A.PricingRule,{fields:["*"],filters:{name:["in",r],isEnabled:!0,isCouponCodeBased:!1},orderBy:"priority",order:"desc"});if(a.length&&(o=a),(!a.length||e)&&(o=await Cse(t,e,r)),!o)continue;const l={};for(const h of t.items)h!=null&&h.item&&(l[h.item]?l[h.item]+=h.quantity??0:l[h.item]=h.quantity??0);const c=Y9(t,o,l[s.item],s.amount);!c.length||tM(c)||n.push({applyOnItem:s.item,pricingRule:c[0]})}return n}async function H9(t,e){var a;const n=t.item;if(!e||!n)return;const i=await t.fyo.doc.getDoc(A.PriceList,e);if(!(i instanceof N9))return;const s=t.unit,r=t.transferUnit,o=(a=i.priceListItem)==null?void 0:a.find(l=>l.item!==n||r&&l.unit!==r?!1:!(s&&l.unit!==s));return o==null?void 0:o.rate}function Y9(t,e,n,i){const s=[];for(const r of e)K9(r,t.date,n,i)&&s.push(r);return s}function K9(t,e,n,i){var s,r;return!(t.minQuantity>0&&n<t.minQuantity||t.maxQuantity>0&&n>t.maxQuantity||!((s=t.minAmount)!=null&&s.isZero())&&i.lte(t.minAmount)||!((r=t.maxAmount)!=null&&r.isZero())&&i.gte(t.maxAmount)||e&&(t.validFrom&&new Date(e).toISOString()<t.validFrom.toISOString()||t.validTo&&new Date(e).toISOString()>t.validTo.toISOString()))}function Ase(t,e,n){var i,s;return!(!((i=t.minAmount)!=null&&i.isZero())&&e.lte(t.minAmount)||!((s=t.maxAmount)!=null&&s.isZero())&&e.gte(t.maxAmount)||t.validFrom&&new Date(n).toISOString()<t.validFrom.toISOString()||t.validTo&&new Date(n).toISOString()>t.validTo.toISOString())}async function xse(t){var s,r;if(!((s=t.coupons)!=null&&s.length))return;const e=await Promise.all((r=t.coupons)==null?void 0:r.map(async o=>await J9(o.coupons,t))),n=e==null?void 0:e.flat();(await t.fyo.doc.getDoc(A.CouponCode,t.coupons[0].coupons)).removeUnusedCoupons(n,t)}async function J9(t,e){const n=await e.fyo.db.getAll(A.CouponCode,{fields:["*"],filters:{name:t,isEnabled:!0}});if(!n||!n.length)return[];const i=await IC(e,t);return i!=null&&i.length?i==null?void 0:i.filter(s=>{var r;return((r=s==null?void 0:s.pricingRule)==null?void 0:r.name)===n[0].pricingRule}).map(s=>({pricingRule:s.pricingRule.name,coupon:n[0].name})):[]}async function eM(t,e,n){var o,a,l,c,u,h,p,m,y;const i=await t.fyo.db.getAll(A.CouponCode,{fields:["minAmount","maxAmount","pricingRule","validFrom","validTo","maximumUse","used","isEnabled"],filters:{name:e}});if(!((o=i[0])!=null&&o.isEnabled))throw new ie("Coupon code cannot be applied as it is not enabled");if(((a=i[0])==null?void 0:a.maximumUse)<=((l=i[0])==null?void 0:l.used))throw new ie("Coupon code has been used maximum number of times");t.parentdoc||(t.parentdoc=n);const s=await J9(e,t.parentdoc);if(!(s!=null&&s.length))throw new ie(b`Coupon ${e} is not applicable for applied items.`);if((u=(c=t.parentdoc)==null?void 0:c.coupons)==null?void 0:u.some(O=>(O==null?void 0:O.coupons)===e))throw new ie(b`${e} already applied.`);if(i[0].minAmount.gte((h=t.parentdoc)==null?void 0:h.grandTotal)&&!i[0].minAmount.isZero())throw new ie(b`The Grand Total must exceed ${i[0].minAmount.float} to apply the coupon ${e}.`);if(i[0].maxAmount.lte((p=t.parentdoc)==null?void 0:p.grandTotal)&&!i[0].maxAmount.isZero())throw new ie(b`The Grand Total must be less than ${i[0].maxAmount.float} to apply this coupon.`);if(i[0].validFrom>((m=t.parentdoc)==null?void 0:m.date))throw new ie(b`Valid From Date should be less than Valid To Date.`);if(i[0].validTo<((y=t.parentdoc)==null?void 0:y.date))throw new ie(b`Valid To Date should be greater than Valid From Date.`)}async function kse(t,e){var s,r,o;const n=await t.fyo.db.getAll(A.LoyaltyProgram,{fields:["fromDate","toDate","maximumUse","used","isEnabled"],filters:{name:e}});if(((s=n[0])==null?void 0:s.maximumUse)>0&&((r=n[0])==null?void 0:r.used)>=((o=n[0])==null?void 0:o.maximumUse))return;if(n[0].fromDate&&t.date<n[0].fromDate)throw new ie("Loyalty program is not yet active");const i=n[0].toDate;if(i){const a=new Date;a.setHours(0,0,0,0);const l=new Date(i);if(l.setHours(0,0,0,0),l.getTime()<a.getTime())return}}function Pse(t){var e;if(!(!t||!t.items)&&!t.isPricingRuleApplied)for(const n of t.items)n.isFreeItem&&(t.items=(e=t.items)==null?void 0:e.filter(i=>i.name!==n.name))}function tM(t){const e=Array.from(t),n=e.shift();if(!n)return;const i=[];for(const s of e.slice(0))s.priority===(n==null?void 0:n.priority)&&i.push(s.name);if(i.length)return!0}function Tse(t,e){return Math[e](t)}async function Ky(t,e){if(!e)return!1;const n=await t.db.getAll(A.LoyaltyProgram,{fields:["toDate","maximumUse","used","isEnabled"],filters:{name:e}});if(!n.length)return!1;const i=n[0],s=new Date;s.setHours(0,0,0,0);const r=i.toDate,o=r&&new Date(r).getTime()<s.getTime(),a=i.maximumUse||0,l=i.used||0,c=a>0&&l>=a;return o||c}var Zs=(t=>(t.Receive="Receive",t.Pay="Pay",t))(Zs||{}),Gh=(t=>(t.Account="account",t.PaymentAccount="paymentAccount",t))(Gh||{});function $se(t,e){var n,i;return e!=null&&e.inserted&&t.fieldname==="numberSeries"||t.fieldname==="name"&&(e!=null&&e.inserted||(e==null?void 0:e.schema.naming)!=="manual")||e!=null&&e.isSubmitted||(n=e==null?void 0:e.parentdoc)!=null&&n.isSubmitted||e!=null&&e.isCancelled||(i=e==null?void 0:e.parentdoc)!=null&&i.isCancelled?!0:_C(t,e,"readOnly")}function RC(t,e){return _C(t,e,"hidden")}function Dse(t,e){return _C(t,e,"required")}function _C(t,e,n,i=!1){if(n===void 0)return i;const s=t[n];if(s!==void 0)return s;const r=e,o=n,a=r==null?void 0:r[o],l=a==null?void 0:a[t.fieldname];return typeof l=="function"?l():i}async function nM(t){var u,h,p;const e=t.fyo,n=t.schemaName,i=Object.values(e.schemaMap).filter(m=>!(m!=null&&m.isSingle)).map(m=>m==null?void 0:m.fields).flat().filter(m=>(m==null?void 0:m.fieldtype)==="Link"&&m.target===n),s=Object.values(e.schemaMap).filter(m=>!(m!=null&&m.isSingle)).map(m=>m==null?void 0:m.fields).flat().filter(m=>(m==null?void 0:m.fieldtype)==="DynamicLink"),r={},o={};for(const m of[i,s].flat()){if(!m.schemaName)continue;const y={filters:{[m.fieldname]:t.name},fields:["name"]};m.fieldtype==="DynamicLink"&&(y.filters[m.references]=t.schemaName);const O=e.schemaMap[m.schemaName];O!=null&&O.isChild?y.fields.push("parent","parentSchemaName"):(u=y.fields)==null||u.push("created"),O!=null&&O.isSubmittable&&(y.filters.cancelled=!1);const S=await e.db.getAllRaw(m.schemaName,y);if(S.length)for(const x of S)"parent"in x?(o[h=m.schemaName]??(o[h]=[]),o[m.schemaName].push(x)):(r[p=m.schemaName]??(r[p]=[]),r[m.schemaName].push(x))}const a=Object.values(o).flat().map(m=>`${m.parentSchemaName}.${m.parent}`),l=new Set(a);for(const m of l){const y=m.indexOf("."),O=m.slice(0,y),S=m.slice(y+1),x=await e.db.getAllRaw(O,{filters:{name:S},fields:["name","created"]});r[O]??(r[O]=[]),r[O].push(...x)}const c={};for(const m in r)c[m]=r[m].map(y=>({name:y.name,created:new Date(y.created)})).sort((y,O)=>O.created.valueOf()-y.created.valueOf()).map(y=>y.name);return c}var _o;let za=(_o=class extends Mp{constructor(e,n,i){super(e,n,i),this._taxes={},this.formulas={account:{formula:async()=>await this.fyo.getValue("Party",this.party,"defaultAccount"),dependsOn:["party"]},loyaltyProgram:{formula:async()=>{const s=await this.fyo.doc.getDoc(A.Party,this.party),r=s==null?void 0:s.loyaltyProgram;return r||""},dependsOn:["party","name"]},availableLoyaltyPoints:{formula:async()=>{if(!this.party)return 0;const s=this.loyaltyProgram;return s&&await Ky(this.fyo,s)?0:await this.fyo.getValue(A.Party,this.party,"loyaltyPoints")||0},dependsOn:["party","loyaltyProgram"]},currency:{formula:async()=>{const s=await this.fyo.getValue("Party",this.party,"currency");return xi(s)?this.fyo.singles.SystemSettings.currency:s},dependsOn:["party"]},exchangeRate:{formula:async()=>{var s;return this.currency===(((s=this.fyo.singles.SystemSettings)==null?void 0:s.currency)??Ks)?1:this.exchangeRate&&this.exchangeRate!==1?this.exchangeRate:await this.getExchangeRate()},dependsOn:["party","currency"]},netTotal:{formula:()=>this.getSum("items","amount",!1)},taxes:{formula:async()=>await this.getTaxSummary()},grandTotal:{formula:async()=>await this.getGrandTotal(),dependsOn:["loyaltyPoints"]},baseGrandTotal:{formula:()=>this.grandTotal.mul(this.exchangeRate??1),dependsOn:["grandTotal","exchangeRate"]},outstandingAmount:{formula:async()=>{var s,r;if(!this.submitted){if(this.isReturn){const o=await this.fyo.doc.getDoc(this.schemaName,this.returnAgainst);if((s=o.outstandingAmount)!=null&&s.isZero())return(r=this.grandTotal)==null?void 0:r.abs();{const a=o.grandTotal.abs().sub(o.outstandingAmount),l=this.grandTotal.abs();return l.lte(a)?l:a}}return this.baseGrandTotal}},dependsOn:["discountAmount","discountPercent"]},stockNotTransferred:{formula:async()=>{if(!this.submitted)return this.isReturn?(await this.fyo.doc.getDoc(this.schemaName,this.returnAgainst)).stockNotTransferred===0?this.getStockNotTransferred():0:this.getStockNotTransferred()},dependsOn:["items"]},makeAutoPayment:{formula:()=>!!this.autoPaymentAccount,dependsOn:[]},makeAutoStockTransfer:{formula:()=>{var s;return!!((s=this.fyo.singles.AccountingSettings)!=null&&s.enableInventory)&&!!this.autoStockTransferLocation},dependsOn:[]},isPricingRuleApplied:{formula:async()=>{var r;if(!((r=this.fyo.singles.AccountingSettings)!=null&&r.enablePricingRule))return!1;const s=await this.getPricingRule();return s?(await this.appendPricingRuleDetail(s),!!s):(this.pricingRuleDetail=[],!1)},dependsOn:["items","coupons"]}},this.hidden={makeAutoPayment:()=>this.submitted?!0:!this.autoPaymentAccount,makeAutoStockTransfer:()=>{var s;return this.submitted||!((s=this.fyo.singles.AccountingSettings)!=null&&s.enableInventory)?!0:!this.autoStockTransferLocation},setDiscountAmount:()=>!0,discountAmount:()=>!0,discountPercent:()=>!0,discountAfterTax:()=>!this.enableDiscounting,taxes:()=>{var s;return!((s=this.taxes)!=null&&s.length)},baseGrandTotal:()=>this.exchangeRate===1||this.baseGrandTotal.isZero(),terms:()=>!(this.terms||!(this.isSubmitted||this.isCancelled)),attachment:()=>!(this.attachment||!(this.isSubmitted||this.isCancelled)),backReference:()=>!this.backReference,quote:()=>!this.quote,loyaltyProgram:()=>!this.loyaltyProgram,availableLoyaltyPoints:()=>!this.loyaltyProgram||this.isReturn,loyaltyPoints:()=>!this.redeemLoyaltyPoints||this.isReturn,redeemLoyaltyPoints:()=>!this.loyaltyProgram||this.isReturn?!0:(this.availableLoyaltyPoints??0)<=0,coupons:()=>{var s;return this.isSubmitted&&!((s=this.coupons)!=null&&s.length)},priceList:()=>{var s;return!((s=this.fyo.singles.AccountingSettings)!=null&&s.enablePriceList)||!this.canEdit&&!this.priceList},returnAgainst:()=>(this.isSubmitted||this.isCancelled)&&!this.returnAgainst,pricingRuleDetail:()=>{var s,r;return!((s=this.fyo.singles.AccountingSettings)!=null&&s.enablePricingRule)||!((r=this.pricingRuleDetail)!=null&&r.length)}},this.getCurrencies={baseGrandTotal:()=>this.companyCurrency,outstandingAmount:()=>this.companyCurrency},this._setGetCurrencies()}get isSales(){return this.schemaName==="SalesInvoice"||this.schemaName=="SalesQuote"}get isQuote(){return this.schemaName=="SalesQuote"}get enableDiscounting(){var e,n;return!!((n=(e=this.fyo.singles)==null?void 0:e.AccountingSettings)!=null&&n.enableDiscounting)}get isMultiCurrency(){return this.currency?this.fyo.singles.SystemSettings.currency!==this.currency:!1}get companyCurrency(){var e;return((e=this.fyo.singles.SystemSettings)==null?void 0:e.currency)??Ks}get stockTransferSchemaName(){return this.isSales?A.Shipment:A.PurchaseReceipt}get hasLinkedTransfers(){return this.submitted?this.getStockTransferred()>0:!1}get hasLinkedPayments(){var e;return this.submitted?!((e=this.baseGrandTotal)!=null&&e.eq(this.outstandingAmount)):!1}get autoPaymentAccount(){var i;const e=this.isSales?"salesPaymentAccount":"purchasePaymentAccount",n=(i=this.fyo.singles.Defaults)==null?void 0:i[e];return typeof n=="string"&&n.length?n:null}get autoStockTransferLocation(){var i;const e=this.isSales?"shipmentLocation":"purchaseReceiptLocation",n=(i=this.fyo.singles.Defaults)==null?void 0:i[e];return typeof n=="string"&&n.length?n:null}get isReturn(){return!!this.returnAgainst}async validate(){var e,n;if(await super.validate(),!this.isQuote){if(!this.submitted&&this.loyaltyProgram&&await Ky(this.fyo,this.loyaltyProgram)){const{showToast:s}=await rn(async()=>{const{showToast:r}=await Promise.resolve().then(()=>Kp);return{showToast:r}},void 0);s({type:"warning",message:b`Loyalty program has expired or reached maximum usage`,duration:"short"})}if(this.enableDiscounting&&!((n=(e=this.fyo.singles)==null?void 0:e.AccountingSettings)!=null&&n.discountAccount))throw new ie(this.fyo.t`Discount Account is not set.`);await TC(this),await this._validatePricingRule()}}async beforeSubmit(){var n;const e=await this.fyo.doc.getDoc(A.Party,this.party);if(this.redeemLoyaltyPoints&&this.loyaltyPoints>0){const i=(e==null?void 0:e.loyaltyPoints)||0;let s=0;if(!this.isReturn&&this.loyaltyProgram){const o=await this.fyo.doc.getDoc(A.LoyaltyProgram,this.loyaltyProgram),a=U9(o,this==null?void 0:this.grandTotal);if(a){const l=a.collectionFactor;s=Math.round(((n=this==null?void 0:this.grandTotal)==null?void 0:n.float)||0)*l}}const r=i+s;if(this.loyaltyPoints>r)throw new ie(b`${this.party} only has ${i} points (${s} will be earned from this transaction)`)}else if(this.loyaltyPoints>((e==null?void 0:e.loyaltyPoints)||0))throw new ie(b`${this.party} only has ${e.loyaltyPoints} points`);this.loyaltyProgram&&await kse(this,this.loyaltyProgram)}async afterSubmit(){if(await super.afterSubmit(),this.isReturn&&(await this._removeLoyaltyPointEntry(),await this._updateIsItemsReturned(),this.reduceUsedCountOfCoupons(),await this.updateIsItemsFullyReturned(this)),this.isQuote)return;let e;if(this.redeemLoyaltyPoints&&(e=await this.getLPAddedBaseGrandTotal()),await this.fyo.db.update(this.schemaName,{name:this.name,outstandingAmount:e||this.baseGrandTotal}),await(await this.fyo.doc.getDoc(A.Party,this.party)).updateOutstandingAmount(),this.makeAutoPayment&&this.autoPaymentAccount){const i=this.getPayment();await(i==null?void 0:i.sync()),await(i==null?void 0:i.submit()),await this.load()}if(this.makeAutoStockTransfer&&this.autoStockTransferLocation){const i=await this.getStockTransfer(!0);await(i==null?void 0:i.sync()),await(i==null?void 0:i.submit()),await this.load()}await this._updateIsItemsReturned(),this.isReturn||await this._createLoyaltyPointEntry(),this.schemaName===A.SalesInvoice&&this.updateUsedCountOfCoupons(),this.loyaltyProgram&&await this.updateUsedCountOfLoyaltyProgram()}async afterCancel(){await super.afterCancel(),await this._cancelPayments(),await this._updatePartyOutStanding(),await this._updateIsItemsReturned(),await this._removeLoyaltyPointEntry(),this.reduceUsedCountOfCoupons(),this.loyaltyProgram&&await this.reduceUsedCountOfLoyaltyProgram()}async _removeLoyaltyPointEntry(){await Sse(this)}async _cancelPayments(){const e=await this.getPaymentIds();for(const n of e)await(await this.fyo.doc.getDoc("Payment",n)).cancel()}async _updatePartyOutStanding(){await(await this.fyo.doc.getDoc(A.Party,this.party)).updateOutstandingAmount()}async afterDelete(){await super.afterDelete();const e=await this.getPaymentIds();for(const n of e)await(await this.fyo.doc.getDoc(A.Payment,n)).delete()}async getPaymentIds(){const e=await this.fyo.db.getAll("PaymentFor",{fields:["parent"],filters:{referenceType:this.schemaName,referenceName:this.name},orderBy:"name"});return e.length!=0?[...new Set(e.map(({parent:n})=>n))]:[]}async getExchangeRate(){if(!this.currency)return 1;const e=await this.fyo.getValue(A.SystemSettings,"currency");if(this.currency===e)return 1;const n=await gse({fromCurrency:this.currency,toCurrency:e});return kn(n.toFixed(2))}async getTaxItems(){const e=[];for(const n of this.items??[]){if(!n.tax)continue;const i=await this.getTax(n.tax);for(const s of i.details??[]){let r=n.amount;if(this.isReturn&&r.isPositive()&&(r=r.neg()),!this.discountAfterTax){let o=this.getDiscountAmount(n);this.isReturn&&o.isNegative()&&(o=o.abs()),this.isReturn?r=r.add(o):r=r.sub(o);const a={details:s,exchangeRate:this.exchangeRate??1,fullAmount:r,taxAmount:r.mul(s.rate/100)};e.push(a)}}}return e}async getTaxSummary(){const e={};for(const{details:s,taxAmount:r}of await this.getTaxItems()){const o=s.account;e[o]??(e[o]={account:o,rate:s.rate,amount:this.fyo.pesa(0)}),e[o].amount=e[o].amount.add(r)}const n=[];let i=0;for(const s in e){const r=e[s];r.amount.isZero()||(n.push({...r,idx:i}),i+=1)}return n}async getTotalTax(){return(await this.getTaxSummary()).map(({amount:n})=>n).reduce((n,i)=>n.add(i),this.fyo.pesa(0))}async getTax(e){return this._taxes[e]||(this._taxes[e]=await this.fyo.doc.getDoc("Tax",e)),this._taxes[e]}getTotalDiscount(){if(!this.enableDiscounting)return this.fyo.pesa(0);const e=this.getItemDiscountAmount(),n=this.getInvoiceDiscountAmount();return this.isReturn&&e.add(n).isPositive()?e.add(n).neg():e.add(n)}getGrandTotal(){const e=this.getTotalDiscount();if(!this.taxes.length)return this.redeemLoyaltyPoints?this.getLPAddedBaseGrandTotal():this.netTotal.sub(e);const n=(this.taxes??[]).map(i=>i.amount).reduce((i,s)=>this.isReturn?i.abs().add(s.abs()).neg():i.add(s.abs()),this.netTotal.abs()).sub(e);return this.redeemLoyaltyPoints?this.getLPAddedBaseGrandTotal():n}getInvoiceDiscountAmount(){if(!this.enableDiscounting)return this.fyo.pesa(0);if(this.setDiscountAmount)return this.discountAmount??this.fyo.pesa(0);let e=this.fyo.pesa(0);for(const n of this.items??[])this.discountAfterTax?e=e.add(n.itemTaxedTotal):e=e.add(n.itemDiscountedTotal);return e.percent(this.discountPercent??0)}getDiscountAmount(e){var i;if(!this.enableDiscounting)return this.fyo.pesa(0);if(!((i=this==null?void 0:this.items)!=null&&i.length))return this.fyo.pesa(0);let n=this.fyo.pesa(0);return e.setItemDiscountAmount?n=n.add((e.itemDiscountAmount??this.fyo.pesa(0)).mul(e.quantity)):this.discountAfterTax?this.discountAfterTax&&(this.isReturn?n=n.add((e.itemTaxedTotal??this.fyo.pesa(0)).mul(-Math.abs(e.itemDiscountPercent)/100)):n=n.add((e.itemTaxedTotal??this.fyo.pesa(0)).mul((e.itemDiscountPercent??0)/100))):this.isReturn?n=n.add((e.amount??this.fyo.pesa(0)).mul(-Math.abs(e.itemDiscountPercent)/100)):n=n.add((e.amount??this.fyo.pesa(0)).mul((e.itemDiscountPercent??0)/100)),this.isReturn?n.neg():n}getItemDiscountAmount(){var n;if(!this.enableDiscounting)return this.fyo.pesa(0);if(!((n=this==null?void 0:this.items)!=null&&n.length))return this.fyo.pesa(0);let e=this.fyo.pesa(0);for(const i of this.items)i.setItemDiscountAmount?e=e.add((i.itemDiscountAmount??this.fyo.pesa(0)).mul(i.quantity)):this.discountAfterTax?this.discountAfterTax&&(this.isReturn?e=e.add((i.itemTaxedTotal??this.fyo.pesa(0)).mul(-Math.abs(i.itemDiscountPercent)/100)):e=e.add((i.itemTaxedTotal??this.fyo.pesa(0)).mul((i.itemDiscountPercent??0)/100))):this.isReturn?e=e.add((i.amount??this.fyo.pesa(0)).mul(Math.abs(i.itemDiscountPercent)/100)):e=e.add((i.amount??this.fyo.pesa(0)).mul((i.itemDiscountPercent??0)/100));return this.isReturn?e.neg():e}async getTotalTaxRate(e){return this.taxes.length?(await this.fyo.getValue("Tax",e.tax,"details")??[]).reduce((i,s)=>s.rate+i,0):0}async getItemsDiscountedTotal(e){var l;const n=await this.getTotalTaxRate(e),i=e.rate??this.fyo.pesa(0),s=e.quantity??1,r=e.itemDiscountAmount??this.fyo.pesa(0),o=e.itemDiscountPercent??0;if(e.setItemDiscountAmount&&((l=e.itemDiscountAmount)!=null&&l.isZero())||!e.setItemDiscountAmount&&e.itemDiscountPercent===0)return i.mul(s);if(!this.discountAfterTax){const c=i.mul(s);return e.setItemDiscountAmount?c.sub(r):c.mul(1-o/100)}const a=i.mul(s).mul(1+n/100);return e.setItemDiscountAmount?a.sub(r):a.mul(1-o/100)}async getReturnDoc(){var l,c;if(!this.name)return;const e=this.getValidDict(!0,!0);e.pricingRuleDetail=[];const n=e.items;if(!n)return;let i=[];const s=await z4(this),r=await this.fyo.db.getReturnBalanceItemsQty(this.schemaName,this.name);for(const u of n){if(s){if(u.isFreeItem){i.push({...u,name:void 0,quantity:-u.quantity,transferQuantity:-(u.quantity/u.unitConversionFactor)});continue}if(u.batch){const S=s[u.item];typeof S=="object"&&(S!=null&&S.batches)&&(i=n.map(x=>{const T=-(S==null?void 0:S.batches[x.batch])||0,k=T/(x.unitConversionFactor||1);return{...x,name:void 0,quantity:T,transferQuantity:k}}))}else i=n.map(S=>({...S,name:void 0,quantity:-(s[S.item]||0),qty:-s[S.item]/u.unitConversionFactor,transferQuantity:-(s[S.item]/u.unitConversionFactor)}));for(const S of i)S.itemDiscountedTotal=await this.getItemsDiscountedTotal(S);break}if(!!i.filter(S=>!u.batch&&S.item===u.item).length)continue;const p=r[u.item];if(!p)continue;let m=p.quantity,y=m/u.unitConversionFactor,O=(l=p.serialNumbers)==null?void 0:l.join(`
`);if(u.batch&&p.batches&&p.batches[u.batch]){p.batches[u.batch].serialNumbers&&(O=(c=p.batches[u.batch].serialNumbers)==null?void 0:c.join(`
`));const S=s[u.item];typeof S=="object"&&S.batches&&(m=-(S==null?void 0:S.batches[u.batch]),y=m/u.unitConversionFactor)}i.push({...u,serialNumber:O,name:void 0,quantity:m,qty:y,transferQuantity:y})}i=i.filter(u=>u.quantity<0);const o={...e,name:void 0,date:new Date,items:i,returnAgainst:e.name},a=this.fyo.doc.getNewDoc(this.schema.name,o);return await a.runFormulas(),a}updateUsedCountOfCoupons(){var e;(e=this.coupons)==null||e.map(async n=>{const i=await this.fyo.doc.getDoc(A.CouponCode,n.coupons);await i.setAndSync({used:i.used+1})})}reduceUsedCountOfCoupons(){var e,n;(e=this.coupons)!=null&&e.length&&((n=this.coupons)==null||n.map(async i=>{const s=await this.fyo.doc.getDoc(A.CouponCode,i.coupons);await s.setAndSync({used:s.used-1})}))}async updateUsedCountOfLoyaltyProgram(){if(!this.loyaltyProgram)return;const e=await this.fyo.doc.getDoc(A.LoyaltyProgram,this.loyaltyProgram),n=e.maximumUse,i=e.used||0;if(this.redeemLoyaltyPoints){const s=i+1;n>0&&s>=n?await e.setAndSync({used:s,isEnabled:!1}):await e.setAndSync({used:s})}}async reduceUsedCountOfLoyaltyProgram(){if(!this.loyaltyProgram)return;const e=await this.fyo.doc.getDoc(A.LoyaltyProgram,this.loyaltyProgram),n=e.maximumUse,s=(e.used||0)-1;this.redeemLoyaltyPoints&&(s<n?await e.setAndSync({used:s,isEnabled:!0}):await e.setAndSync({used:s}))}async updateIsItemsFullyReturned(e){if(!(e!=null&&e.returnAgainst)||e.schemaName!==A.SalesInvoice)return;const n=await this.fyo.doc.getDoc(A.SalesInvoice,e.returnAgainst),i=await z4(n??this),s=Object.values(i).every(o=>typeof o=="number"?o===0:(o==null?void 0:o.quantity)===0);if(!s)return;const r=await this.fyo.doc.getDoc(this.schemaName,this.returnAgainst);await r.setAndSync({isFullyReturned:s}),await r.submit()}async _updateIsItemsReturned(){if(!this.isReturn||!this.returnAgainst||this.isQuote)return;const n=!!(await this.fyo.db.getAll(this.schema.name,{filters:{submitted:!0,cancelled:!1,returnAgainst:this.returnAgainst}})).length,i=await this.fyo.doc.getDoc(this.schemaName,this.returnAgainst);await i.setAndSync({isReturned:n}),await i.submit()}async _createLoyaltyPointEntry(){if(!this.loyaltyProgram)return;const e=await this.fyo.doc.getDoc(A.LoyaltyProgram,this.loyaltyProgram),n=this.date,i=e.fromDate,s=e.toDate,r=new Date(n);r.setHours(0,0,0,0);const o=new Date(i);o.setHours(0,0,0,0);const a=new Date(s);if(a.setHours(0,0,0,0),!(a.getTime()<r.getTime())&&r.getTime()>=o.getTime()&&r.getTime()<=a.getTime()){const l=await this.loadAndGetLink("party");await wse(this),await l.updateLoyaltyPoints()}}async _validateHasLinkedReturnInvoices(){if(!this.name||this.isReturn||this.isQuote)return;const e=await this.fyo.db.getAll(this.schemaName,{filters:{returnAgainst:this.name}});if(!e.length)return;const n=e.map(({name:i})=>i).join(", ");throw new ie(this.fyo.t`Cannot cancel ${this.name} because of the following ${this.schema.label}: ${n}`)}async getLPAddedBaseGrandTotal(){var i;const e=this.getTotalDiscount();let n;if((i=this.taxes)!=null&&i.length?n=this.taxes.map(s=>s.amount).reduce((s,r)=>s.add(r.abs()),this.netTotal.abs()).sub(e):n=this.netTotal.sub(e),!this.isReturn){const s=await G9(this.fyo,this.loyaltyProgram,this.loyaltyPoints);return n.sub(s)}if(this.isReturn){const s=await W9(this),r=n.abs().sub(s);return this.loyaltyPoints=s,r.isNegative()?(this.loyaltyPoints=r.abs().float-Math.abs(s),this.fyo.pesa(0)):n.abs().sub(s)}return n}getStockTransferred(){return(this.items??[]).reduce((e,n)=>(n.quantity??0)-(n.stockNotTransferred??0)+e,0)}getTotalQuantity(){return(this.items??[]).reduce((e,n)=>e+(n.quantity??0),0)}getStockNotTransferred(){return(this.items??[]).reduce((e,n)=>(n.stockNotTransferred??0)+e,0)}getItemDiscountedAmounts(){let e=this.fyo.pesa(0);for(const n of this.items??[])e=e.add(n.itemDiscountedTotal??n.amount);return e}_getCurrency(){return this.exchangeRate===1?this.companyCurrency:this.currency??Ks}_setGetCurrencies(){var n;const e=this.schema.fields.filter(({fieldtype:i})=>i===Ie.Currency);for(const{fieldname:i}of e)(n=this.getCurrencies)[i]??(n[i]=this._getCurrency.bind(this))}getPayment(){var a;if(!this.isSubmitted)return null;const e=this.outstandingAmount;if(!e||(a=this.outstandingAmount)!=null&&a.isZero())return null;let n=Gh.Account,i=Zs.Receive,s;this.isSales?(s="SalesInvoice",this.isReturn&&(n=Gh.PaymentAccount,i=Zs.Pay)):(s="PurchaseInvoice",n=Gh.PaymentAccount,i=Zs.Pay,this.isReturn&&(n=Gh.Account,i=Zs.Receive));const r=this.isReturn?e:e==null?void 0:e.abs(),o={party:this.party,date:new Date().toISOString(),paymentType:i,amount:r,[n]:this.account,referenceType:s,for:[{referenceType:this.schemaName,referenceName:this.name,amount:this.isReturn?this.grandTotal:e}]};if(this.makeAutoPayment&&this.autoPaymentAccount){const l=this.isSales?"paymentAccount":"account";o[l]=this.autoPaymentAccount}return this.fyo.doc.getNewDoc(A.Payment,o)}async getStockTransfer(e=!1){var h,p;if(!this.isSubmitted)return null;let n;if(this.returnAgainst){const m=await this.fyo.doc.getDoc(A.SalesInvoice,this.returnAgainst);n=await nM(m)}const i=await $l(this.fyo);if(!this.stockNotTransferred&&i==="Inventory Items")return null;const s=this.stockTransferSchemaName,r=this.fyo.singles.Defaults??{};let o,a;this.isSales?(o=r.shipmentTerms??"",a=r.shipmentNumberSeries??void 0):(o=r.purchaseReceiptTerms??"",a=r.purchaseReceiptNumberSeries??void 0);const l={party:this.party,date:new Date().toISOString(),terms:o,numberSeries:a,backReference:this.name,returnAgainst:n?n.Shipment[0]:""};let c=this.autoStockTransferLocation;if(c||(c=((h=this.fyo.singles.InventorySettings)==null?void 0:h.defaultLocation)??null),e&&!c)return null;const u=this.fyo.doc.getNewDoc(s,l);for(const m of this.items??[]){if(!m.item)continue;const y=await m.loadAndGetLink("item");if(e&&(y.hasBatch||y.hasSerialNumber))continue;const O=m.isFreeItem??!1;if(O){await u.append("items",{item:m.item,quantity:m.quantity,location:c,rate:this.fyo.pesa(0),batch:m.batch||null,description:m.description,hsnCode:m.hsnCode,isFreeItem:O});continue}let S;y.trackItem?S=m.stockNotTransferred:S=m.quantity;const x=m.item,T=m.batch||null,k=m.description,D=m.hsnCode;let M=m.rate;this.exchangeRate&&this.exchangeRate>1&&(M=M.mul(this.exchangeRate)),!(!S&&i==="Inventory Items")&&(e&&(await this.fyo.db.getStockQuantity(x,c,void 0,l.date)??0)<S||await u.append("items",{item:x,quantity:S,location:c,rate:M,batch:T,description:k,hsnCode:D}))}return(p=u.items)!=null&&p.length?u:null}async beforeSync(){var e;await super.beforeSync(),(e=this.pricingRuleDetail)!=null&&e.length?await this.applyProductDiscount():this.clearFreeItems(),await xse(this)}async beforeCancel(){await super.beforeCancel(),await this._validateStockTransferCancelled(),await this._validateHasLinkedReturnInvoices()}async beforeDelete(){await super.beforeCancel(),await this._validateStockTransferCancelled(),await this._deleteCancelledStockTransfers()}async _deleteCancelledStockTransfers(){const e=this.stockTransferSchemaName,n=await this._getLinkedStockTransferNames(!0);for(const{name:i}of n)await(await this.fyo.doc.getDoc(e,i)).delete()}async _validateStockTransferCancelled(){var r;const e=this.stockTransferSchemaName,n=await this._getLinkedStockTransferNames(!1);if(!(n!=null&&n.length))return;const i=n.map(({name:o})=>o).join(", "),s=((r=this.fyo.schemaMap[e])==null?void 0:r.label)??e;throw new ie(this.fyo.t`Cannot cancel ${this.schema.label} ${this.name} because of the following ${s}: ${i}`)}async _getLinkedStockTransferNames(e){if(!this.name)throw new ie(`Name not found for ${this.schema.label}`);const i=this.stockTransferSchemaName;return await this.fyo.db.getAllRaw(i,{fields:["name"],filters:{backReference:this.name,cancelled:e}})}async getLinkedPayments(){if(!this.hasLinkedPayments)return[];const e=await this.fyo.db.getAllRaw("PaymentFor",{fields:["parent","amount"],filters:{referenceName:this.name,referenceType:this.schemaName}}),n=await this.fyo.db.getAllRaw("Payment",{fields:["name","date","submitted","cancelled"],filters:{name:["in",e.map(i=>i.parent)]}});return h4(n,e,"name","parent").map(i=>({name:i.name,date:new Date(i.date),submitted:!!i.submitted,cancelled:!!i.cancelled,amount:this.fyo.pesa(i.amount)})).sort((i,s)=>i.date.valueOf()-s.date.valueOf())}async getLinkedStockTransfers(){if(!this.hasLinkedTransfers)return[];const e=this.stockTransferSchemaName,n=await this.fyo.db.getAllRaw(e,{fields:["name","date","submitted","cancelled"],filters:{backReference:this.name}}),i=e+"Item",s=await this.fyo.db.getAllRaw(i,{fields:["parent","quantity","location","amount"],filters:{parent:["in",n.map(r=>r.name)],item:["in",this.items.map(r=>r.item)]}});return h4(n,s,"name","parent").map(r=>({name:r.name,date:new Date(r.date),submitted:!!r.submitted,cancelled:!!r.cancelled,amount:this.fyo.pesa(r.amount),location:r.location,quantity:r.quantity})).sort((r,o)=>r.date.valueOf()-o.date.valueOf())}async addItem(e){return await X9(e,this)}async appendPricingRuleDetail(e){await this.set("pricingRuleDetail",null);for(const n of e)await this.append("pricingRuleDetail",{referenceName:n.pricingRule.name,referenceItem:n.applyOnItem})}clearFreeItems(){var e,n;if(!((e=this.pricingRuleDetail)!=null&&e.length||!this.items||this.isReturn))for(const i of this.items)i.isFreeItem&&(this.items=(n=this.items)==null?void 0:n.filter(s=>s.name!==i.name))}async applyProductDiscount(){var e,n,i;if(!(!this.items||await this.ignorePricingRules())){this.isReturn||(this.items=this.items.filter(s=>!s.isFreeItem));for(const s of this.items){const r=(e=this.pricingRuleDetail)==null?void 0:e.filter(m=>m.referenceItem===s.item);if(!(r!=null&&r.length))continue;const o=await this.fyo.doc.getDoc(A.PricingRule,r[0].referenceName);if(o.discountType==="Price Discount")continue;const a=(n=o.appliedItems)==null?void 0:n.map(m=>m.item);if(!(a!=null&&a.includes(s.item))||!K9(o,this.date,s.quantity,s.amount))continue;let c=o.freeItemQuantity;if(o.isRecursive&&(c=s.quantity/o.recurseEvery),o.roundFreeItemQty&&(c=Tse(c,"floor")),c<=0)throw new ie(b`Free item "${o.freeItem}" was not added due to zero
           quantity`);const u=o.freeItem;(((i=(await Yy(this))[u])==null?void 0:i.availableQty)??0)<c||await this.append("items",{item:u,quantity:c,isFreeItem:!0,pricingRule:o.title,unit:o.freeItemUnit})}}}async ignorePricingRules(){var n,i;const e=(n=this.fyo.singles.POSSettings)==null?void 0:n.posProfile;if(e){const s=await this.fyo.doc.getDoc(A.POSProfile,e);if(s)return s.ignorePricingRule}return!!((i=this.fyo.singles.POSSettings)!=null&&i.ignorePricingRule)}async getPricingRuleDocNames(e,n){return(await n.fyo.db.getAll(A.PricingRuleItem,{fields:["parent"],filters:{item:e.item,unit:e.unit}})).map(s=>s.parent)}async getPricingRule(){var n,i,s,r;if(await this.ignorePricingRules()||!this.isSales||!this.items)return;const e=[];for(const o of this.items){if(o.isFreeItem)continue;const a=(n=this.pricingRuleDetail)==null?void 0:n.filter(y=>y.referenceItem==o.item);if(a&&(a==null?void 0:a.length)>=2)continue;const l=await this.getPricingRuleDocNames(o,this);if(!l.length)continue;if((i=this.coupons)!=null&&i.length)for(const y of this.coupons){const O=await this.fyo.db.getAll(A.CouponCode,{fields:["*"],filters:{name:y==null?void 0:y.coupons,isEnabled:!0}}),S=O.map(T=>T.pricingRule).filter(T=>l.includes(T));if(!S.length)continue;Ase(O[0],this.grandTotal,this.date)&&l.push(...S)}const c=await this.fyo.db.getAll(A.PricingRule,{fields:["*"],filters:{name:["in",l],isEnabled:!0},orderBy:"priority",order:"desc"});if(c.length&&c[0].isCouponCodeBased){if(!((s=this.coupons)!=null&&s.length))continue;const O=(await Promise.allSettled((r=this.coupons)==null?void 0:r.map(async S=>{if(!S.coupons)return!1;const[x]=(await this.fyo.db.getAll(A.CouponCode,{fields:["pricingRule"],filters:{name:S==null?void 0:S.coupons}})).map(T=>T.pricingRule);return x&&c[0].name===x?x:!1}))).filter(S=>S.status==="fulfilled").map(S=>S.value);if(!O[0]&&!O.filter(S=>S).length)continue}const h=(await this.fyo.doc.getDoc(A.Item,o.item)).rate.mul(o.quantity),p=Y9(this,c,o.quantity,h);!p||!p.length||tM(p)||e.push({applyOnItem:o.item,pricingRule:p[0]})}return e}async _validatePricingRule(){var e;(e=this.fyo.singles.AccountingSettings)!=null&&e.enablePricingRule&&this.items&&await this.getPricingRule()}},_o.defaults={makeAutoPayment:e=>e instanceof _o&&!!e.autoPaymentAccount,makeAutoStockTransfer:e=>{var n;return!!((n=e.fyo.singles.AccountingSettings)!=null&&n.enableInventory)&&e instanceof _o&&!!e.autoStockTransferLocation},numberSeries:e=>Q1(e.schemaName,e.fyo),terms:e=>{const n=e.fyo.singles.Defaults;return e.schemaName===A.SalesInvoice?(n==null?void 0:n.salesInvoiceTerms)??"":(n==null?void 0:n.purchaseInvoiceTerms)??""},date:()=>new Date},_o.filters={party:e=>({role:["in",[e.isSales?"Customer":"Supplier","Both"]]}),account:e=>({isGroup:!1,accountType:e.isSales?"Receivable":"Payable"}),numberSeries:e=>({referenceType:e.schemaName}),priceList:e=>({isEnabled:!0,...e.isSales?{isSales:!0}:{isPurchase:!0}})},_o.createFilters={party:e=>({role:e.isSales?"Customer":"Supplier"})},_o),iM=class extends za{async beforeSubmit(){if(await super.beforeSubmit(),this.isReturn)return;const e=[];for(const n of this.items??[]){if(!n.item||!n.batch)continue;await this.fyo.getValue(A.Item,n.item,"hasBatch")&&e.push({item:n.item,batch:n.batch})}for(const{item:n,batch:i}of e)await R1(this.fyo,n,i)}async getPosting(){var r;const e=this.exchangeRate??1,n=new Ip(this,this.fyo);this.isReturn?await n.debit(this.account,this.baseGrandTotal):await n.credit(this.account,this.baseGrandTotal);for(const o of this.items){if(this.isReturn){await n.credit(o.account,o.amount.mul(e));continue}await n.debit(o.account,o.amount.mul(e))}if(this.taxes)for(const o of this.taxes){if(this.isReturn){await n.credit(o.account,o.amount.mul(e));continue}await n.debit(o.account,o.amount.mul(e))}const i=this.getTotalDiscount(),s=(r=this.fyo.singles.AccountingSettings)==null?void 0:r.discountAccount;return s&&i.isPositive()&&(this.isReturn?await n.debit(s,i.mul(e)):await n.credit(s,i.mul(e))),await n.makeRoundOffEntry(),n}static getListViewSettings(){return{columns:["name",_p(),"party","date","baseGrandTotal","outstandingAmount"]}}static getActions(e){return B9(e,A.PurchaseInvoice)}},EC=class extends za{constructor(){super(...arguments),this.validations={loyaltyPoints:async e=>{if(!this.redeemLoyaltyPoints||this.isSubmitted||this.isReturn)return;const n=await this.fyo.doc.getDoc(A.Party,this.party);if(e<=0)throw new ie(b`Points must be greather than 0`);if(e>((n==null?void 0:n.loyaltyPoints)||0))throw new ie(b`${this.party} only has ${n.loyaltyPoints} points`);const i=await this.fyo.doc.getDoc(A.LoyaltyProgram,this.loyaltyProgram),s=i==null?void 0:i.toDate,r=new Date;if(r.setHours(0,0,0,0),s&&new Date(s).getTime()<r.getTime()||!(this!=null&&this.grandTotal))return;const o=(e||0)*((i==null?void 0:i.conversionFactor)||0);if(!this.isReturn){const a=this.getTotalDiscount();let l;if(this.taxes.length?l=(this.taxes??[]).map(c=>c.amount).reduce((c,u)=>this.isReturn?c.abs().add(u.abs()).neg():c.add(u.abs()),this.netTotal.abs()).sub(a):l=this.netTotal.sub(a),l!=null&&l.lt(o))throw new ie(b`no need ${e} points to purchase this item`)}}}}async getPosting(){var r;const e=this.exchangeRate??1,n=new Ip(this,this.fyo);this.isReturn?await n.credit(this.account,this.baseGrandTotal):await n.debit(this.account,this.baseGrandTotal);for(const o of this.items){if(this.isReturn){await n.debit(o.account,o.amount.mul(e));continue}await n.credit(o.account,o.amount.mul(e))}if(this.redeemLoyaltyPoints){const o=await this.fyo.doc.getDoc(A.LoyaltyProgram,this.loyaltyProgram);let a;this.isReturn?a=this.fyo.pesa(await W9(this)):a=await G9(this.fyo,this.loyaltyProgram,this.loyaltyPoints),await n.debit(o.expenseAccount,a)}if(this.taxes)for(const o of this.taxes){if(this.isReturn){await n.debit(o.account,o.amount.mul(e));continue}await n.credit(o.account,o.amount.mul(e))}const i=this.getTotalDiscount(),s=(r=this.fyo.singles.AccountingSettings)==null?void 0:r.discountAccount;return s&&i.isPositive()&&(this.isReturn?await n.credit(s,i.mul(e)):await n.debit(s,i.mul(e))),await n.makeRoundOffEntry(),n}static getListViewSettings(){return{columns:["name",_p(),"party","date","baseGrandTotal","outstandingAmount"]}}static getActions(e){return B9(e,A.SalesInvoice)}};const N=new bie({isTest:!1,isElectron:!0}),Ep=Symbol("languageDirection"),Mse=Symbol("keys"),sM=Symbol("searcher"),Is=Symbol("shortcuts");function Z4(){const t=[],e=Ws();for(const n of Object.values(e)){const{currency:i,code:s}=n??{};typeof i!="string"||typeof s!="string"||t.push({name:i,countryCode:s})}return t}function Zv(){return[{name:b`Standard Chart of Accounts`,countryCode:""},{countryCode:"ae",name:"U.A.E - Chart of Accounts"},{countryCode:"ca",name:"Canada - Plan comptable pour les provinces francophones"},{countryCode:"gt",name:"Guatemala - Cuentas"},{countryCode:"hu",name:"Hungary - Chart of Accounts"},{countryCode:"id",name:"Indonesia - Chart of Accounts"},{countryCode:"in",name:"India - Chart of Accounts"},{countryCode:"mx",name:"Mexico - Plan de Cuentas"},{countryCode:"ni",name:"Nicaragua - Catalogo de Cuentas"},{countryCode:"nl",name:"Netherlands - Grootboekschema"},{countryCode:"sg",name:"Singapore - Chart of Accounts"},{countryCode:"fr",name:"France - Plan Comptable General"}]}var dd;let rM=(dd=class extends ze{constructor(){super(...arguments),this.formulas={fiscalYearStart:{formula:e=>{var s;if(e==="fiscalYearEnd"&&this.fiscalYearEnd&&!this.fiscalYearStart)return Te.fromJSDate(this.fiscalYearEnd).minus({years:1}).plus({days:1}).toJSDate();if(!this.country)return;const i=((s=Ws()[this.country])==null?void 0:s.fiscal_year_start)??"";return Wy(i,!0)},dependsOn:["country","fiscalYearEnd"]},fiscalYearEnd:{formula:e=>{var s;if(e==="fiscalYearStart"&&this.fiscalYearStart&&!this.fiscalYearEnd)return Te.fromJSDate(this.fiscalYearStart).plus({years:1}).minus({days:1}).toJSDate();if(!this.country)return;const i=((s=Ws()[this.country])==null?void 0:s.fiscal_year_end)??"";return Wy(i,!1)},dependsOn:["country","fiscalYearStart"]},currency:{formula:()=>{const e=this.get("country");if(typeof e!="string")return;const n=Ws(),{code:i}=n[e]??{};if(!i)return;const s=Z4(),r=s.find(({countryCode:o})=>o===i);return r===void 0?s[0].name:r.name},dependsOn:["country"]},chartOfAccounts:{formula:()=>{var o;const e=this.get("country");if(e===void 0)return;const i=(o=Ws()[e])==null?void 0:o.code;if(!i)return;const s=Zv(),r=s.find(({countryCode:a})=>a===i);return(r==null?void 0:r.name)??s[0].name},dependsOn:["country"]}},this.validations={email:P1}}},dd.lists={country:()=>Object.keys(Ws()),currency:()=>Z4().map(({name:e})=>e),chartOfAccounts:()=>Zv().map(({name:e})=>e)},dd);var hd;let N1=(hd=class extends Cl{constructor(e){super(),this.columns=[],this.filters=[],this.usePagination=!1,this.shouldRefresh=!1,this.fyo=e,this.reportData=[]}get title(){return this.constructor.title}get reportName(){return this.constructor.reportName}async initialize(){await this.setDefaultFilters(),this.filters=await this.getFilters(),this.columns=await this.getColumns(),await this.setReportData()}get filterMap(){const e={};for(const{fieldname:n}of this.filters){const i=this.get(n);xi(i)||(e[n]=i)}return e}async set(e,n,i=!0){const s=this.filters.find(o=>o.fieldname===e);s===void 0||(n=Lc.toRawValue(n,s,this.fyo),this[e]===n)||(xi(n)?delete this[e]:this[e]=n,i&&await this.updateData(e))}async updateData(e,n){await this.setDefaultFilters(),this.filters=await this.getFilters(),this.columns=await this.getColumns(),await this.setReportData(e,n)}},hd.isInventory=!1,hd);function Ise(t){let e=q4(t);return e.length===1&&(e=q4(t,`
`)),e.map(Rse)}function QC(t){return Ese(t).join(`\r
`)}function q4(t,e=`\r
`){t.endsWith(e)||(t+=e);const n=[];let i="",s=!1;for(let r=0;r<=t.length;r++){const o=t[r];o==='"'&&(o[r+1]==='"'&&o[r+2]==='"'||o[r+1]!=='"')&&(s=!s);const a=[...e].slice(1).map((l,c)=>t[r+c+1]===l).every(Boolean);if(!s&&o===e[0]&&a){n.push(i),i="",r=r+e.length-1;continue}i+=o}return n}function Rse(t){t+=",";const e=[];let n="",i=!1;for(let s=0;s<t.length;s++){const r=t[s];if(r==='"'&&(r[s+1]==='"'&&r[s+2]==='"'||r[s+1]!=='"')&&(i=!i),!i&&r===","){n=_se(n),n=n.replaceAll('""','"'),e.push(n),n="";continue}n+=r}return e}function _se(t){const e=t.at(0),n=t.at(-1);return e==='"'&&n==='"'?t.slice(1,-1):t}function Ese(t){const e=[];for(const n of t){const i=[];for(const s of n){const r=Qse(s);i.push(r)}e.push(i.join(","))}return e}function Qse(t){return typeof t=="string"?Nse(t):t==null?"":typeof t=="object"?t.toString():String(t)}function Nse(t){let e=!1;return t.match(/^".*"$/)&&(e=!0,t=t.slice(1,-1)),t.match(/"/)&&(e=!0,t=t.replaceAll('"','""')),t.match(/,|\s/)&&(e=!0),e?'"'+t+'"':t}function NC(t){return["csv","json"].map(n=>({group:b`Export`,label:n.toUpperCase(),type:"primary",action:async()=>{await Lse(n,t)}}))}async function Lse(t,e){const{filePath:n,canceled:i}=await Wl(e.reportName,t);if(i||!n)return;let s="";t==="csv"?s=oM(e):t==="json"&&(s=Fse(e)),s.length&&(await LC(s,n),e.fyo.telemetry.log(si.Exported,e.reportName,{extention:t}))}function Fse(t){var s;const e={columns:[],rows:[],filters:{},timestamp:"",reportName:"",softwareName:"",softwareVersion:""},n=t.columns,i=((s=t.fyo.singles.SystemSettings)==null?void 0:s.displayPrecision)??2;e.columns=n.map(({fieldname:r,label:o})=>({fieldname:r,label:o}));for(const r of t.reportData){if(r.isEmpty)continue;const o={};for(let a=0;a<r.cells.length;a++){const{label:l}=n[a],c=aM(r.cells[a],i);o[l]=c}e.rows.push(o)}for(const{fieldname:r}of t.filters){const o=t.get(r);xi(o)||(e.filters[r]=String(o))}return e.timestamp=new Date().toISOString(),e.reportName=t.reportName,e.softwareName="Frappe Books",e.softwareVersion=t.fyo.store.appVersion,JSON.stringify(e)}function oM(t){const e=Bse(t);return QC(e)}function Bse(t){var r;const e=((r=t.fyo.singles.SystemSettings)==null?void 0:r.displayPrecision)??2,n=t.reportData,i=t.columns,s=[];s.push(i.map(o=>o.label));for(const o of n){if(o.isEmpty){s.push(Array(o.cells.length).fill(""));continue}const a=[];for(let l=0;l<o.cells.length;l++){const c=aM(o.cells[l],e);a.push(c)}s.push(a)}return s}function aM(t,e){const n=t.rawValue;if(n instanceof Date)return n.toISOString();if(typeof n=="number"){const i=n.toFixed(e);return i.endsWith("0".repeat(e))?i.slice(0,-e-1):i}return xi(t)?"":n}async function LC(t,e,n){await ipc.saveData(t,e),n??(n=b`Export Successful`),mO(n,e)}const j0=class j0 extends N1{constructor(e){super(e),this._rawData=[],this.shouldRefresh=!1,this._setObservers()}_setObservers(){const e=()=>this.shouldRefresh=!0;this.fyo.doc.observer.on(`sync:${A.AccountingLedgerEntry}`,e),this.fyo.doc.observer.on(`delete:${A.AccountingLedgerEntry}`,e)}_getGroupByKey(){let e="referenceName";return this.groupBy&&this.groupBy!=="none"&&(e=this.groupBy),e}_getGroupedMap(e,n){n??(n=this._getGroupByKey()),e&&this._rawData.sort((s,r)=>this.ascending?+s.date-+r.date:+r.date-+s.date);const i=new Map;for(const s of this._rawData){const r=s[n];i.has(r)||i.set(r,[]),i.get(r).push(s)}return i}async _setRawData(){const e=["name","account","date","debit","credit","referenceType","referenceName","party","reverted","reverts"],n=await this._getQueryFilters(),i=await this.fyo.db.getAllRaw(A.AccountingLedgerEntry,{fields:e,filters:n,orderBy:["date","created"],order:this.ascending?"asc":"desc"});this._rawData=i.map(s=>({name:Jc(s.name),account:s.account,date:new Date(s.date),debit:Math.abs(kn(s.debit)),credit:Math.abs(kn(s.credit)),balance:0,referenceType:s.referenceType,referenceName:s.referenceName,party:s.party,reverted:!!s.reverted,reverts:s.reverts}))}getActions(){return NC(this)}};j0.title=b`General Ledger`,j0.reportName="general-ledger";let Jy=j0;const e0=2,Po=1.25;class FC extends Jy{constructor(){super(...arguments),this.count=3,this.consolidateColumns=!1,this.hideGroupAmounts=!1,this.periodicity="Monthly",this.basedOn="Until Date",this._rawData=[],this.metaFilters=["basedOn"]}async setDefaultFilters(){this.basedOn==="Until Date"&&!this.toDate&&(this.toDate=Te.now().plus({days:1}).toISODate()),this.basedOn==="Fiscal Year"&&!this.toYear&&(this.fromYear=Te.now().year,this.toYear=this.fromYear+1),await this._setDateRanges()}async _setDateRanges(){this._dateRanges=await this._getDateRanges()}getRootNodes(e,n){return Object.values(n).filter(s=>s.rootType===e)}getEmptyRow(){return{isEmpty:!0,cells:this.getColumns().map(n=>({value:"",rawValue:"",width:n.width,align:"left"}))}}getTotalNode(e,n){const i={};for(const o of e)i[o.name]=o;const r=Wse(i).reduce((o,a)=>{var l,c,u;for(const h of this._dateRanges){const p=((l=o.get(h))==null?void 0:l.balance)??0,m=((u=(c=a.valueMap)==null?void 0:c.get(h))==null?void 0:u.balance)??0;o.set(h,{balance:p+m})}return o},new Map);return{name:n,valueMap:r,level:0}}getReportRowsFromAccountList(e){return e.map(n=>this.getRowFromAccountListNode(n))}getRowFromAccountListNode(e){const n={value:e.name,rawValue:e.name,align:"left",width:e0,bold:!e.level,indent:e.level??0},i=this._dateRanges.map(s=>{var a,l;const r=((l=(a=e.valueMap)==null?void 0:a.get(s))==null?void 0:l.balance)??0;let o=this.fyo.format(r,"Currency");return this.hideGroupAmounts&&e.isGroup&&(o=""),{rawValue:r,value:o,align:"right",width:Po}});return{cells:[n,i].flat(),level:e.level,isGroup:!!e.isGroup,folded:!1,foldedBelow:!1}}async _getGroupedByDateRanges(e){var i,s,r;const n=new Map;this.accountMap||await this._setAndReturnAccountMap();for(const o of e.keys()){const a=new Map;for(const l of e.get(o)){const c=this._getRangeMapKey(l);if(c===null)continue;(i=this.accountMap)!=null&&i[l.account]||await this._setAndReturnAccountMap(!0);const u=((s=a.get(c))==null?void 0:s.balance)??0,h=(l.debit??0)-(l.credit??0),p=(r=this.accountMap[l.account])==null?void 0:r.rootType;zv(p)?a.set(c,{balance:u-h}):a.set(c,{balance:u+h})}n.set(o,a)}return n}async _getAccountTree(e){const n=Vi.cloneDeep(await this._setAndReturnAccountMap());return Vse(n),jse(n,e),Zse(n),qse(n),Xse(n),n}async _setAndReturnAccountMap(e=!1){if(this.accountMap&&!e)return this.accountMap;const n=(await this.fyo.db.getAllRaw("Account",{fields:["name","rootType","isGroup","parentAccount"]})).map(i=>({name:i.name,rootType:i.rootType,isGroup:!!i.isGroup,parentAccount:i.parentAccount}));return this.accountMap=er(n,"name"),this.accountMap}_getRangeMapKey(e){const n=Te.fromISO(e.date.toISOString().split("T")[0]).toMillis();for(const i of this._dateRanges){const s=i.toDate.toMillis(),r=i.fromDate.toMillis();if(n>=r&&n<s)return i}return null}_fixMonthsJump(e,n){return e.day==e.daysInMonth&&n.day!=n.daysInMonth?n.set({day:n.daysInMonth}):n}async _getDateRanges(){const e=await this._getFromAndToDates(),n=Te.fromISO(e.fromDate),i=Te.fromISO(e.toDate);if(this.consolidateColumns)return[{toDate:i,fromDate:n}];const s=X4[this.periodicity],r=[{toDate:i,fromDate:this._fixMonthsJump(i,i.minus({months:s}))}];let o=this.count??1;this.basedOn==="Fiscal Year"&&(o=Math.ceil((this.toYear-this.fromYear)*12/s));for(let a=1;a<o;a++){const l=r.at(-1);r.push({toDate:l.fromDate,fromDate:this._fixMonthsJump(i,l.fromDate.minus({months:s}))})}return r.sort((a,l)=>a.toDate.toMillis()-l.toDate.toMillis())}async _getFromAndToDates(){let e,n;if(this.basedOn==="Until Date"){e=Te.fromISO(this.toDate).plus({days:1}).toISODate();const i=X4[this.periodicity]*Math.max(this.count??1,1);n=Te.fromISO(this.toDate).minus({months:i}).toISODate()}else{const i=await lM(this.toYear,this.fromYear,this.fyo);e=Te.fromISO(i.toDate).plus({days:1}).toISODate(),n=i.fromDate}return{fromDate:n,toDate:e}}async _getQueryFilters(){const e={},{fromDate:n,toDate:i}=await this._getFromAndToDates(),s=[];return s.push("<",i),s.push(">=",n),e.date=s,e.reverted=!1,e}getFilters(){const e={Monthly:b`Months`,Quarterly:b`Quarters`,"Half Yearly":b`Half Years`,Yearly:b`Years`},n=[{fieldtype:"Select",options:[{label:b`Fiscal Year`,value:"Fiscal Year"},{label:b`Until Date`,value:"Until Date"}],label:b`Based On`,fieldname:"basedOn"},{fieldtype:"Select",options:[{label:b`Monthly`,value:"Monthly"},{label:b`Quarterly`,value:"Quarterly"},{label:b`Half Yearly`,value:"Half Yearly"},{label:b`Yearly`,value:"Yearly"}],label:b`Periodicity`,fieldname:"periodicity"},,];let i=[{fieldtype:"Int",fieldname:"fromYear",placeholder:b`From Year`,label:b`From Year`,minvalue:2e3,required:!0},{fieldtype:"Int",fieldname:"toYear",placeholder:b`To Year`,label:b`To Year`,minvalue:2e3,required:!0}];return this.basedOn==="Until Date"&&(i=[{fieldtype:"Date",fieldname:"toDate",placeholder:b`To Date`,label:b`To Date`,required:!0},{fieldtype:"Int",fieldname:"count",minvalue:1,placeholder:b`Number of ${e[this.periodicity]}`,label:b`Number of ${e[this.periodicity]}`,required:!0}]),[n,i,{fieldtype:"Check",label:b`Consolidate Columns`,fieldname:"consolidateColumns"},{fieldtype:"Check",label:b`Hide Group Amounts`,fieldname:"hideGroupAmounts"}].flat()}getColumns(){const e=[{label:b`Account`,fieldtype:"Link",fieldname:"account",align:"left",width:e0}],n=this._dateRanges.sort((i,s)=>s.toDate.toMillis()-i.toDate.toMillis()).map(i=>{const s=i.toDate.minus({days:1});return{label:this.fyo.format(s.toJSDate(),"Date"),fieldtype:"Data",fieldname:"toDate",align:"right",width:Po}});return[e,n].flat()}}async function lM(t,e,n){const i=await n.getValue(A.AccountingSettings,"fiscalYearStart"),s=await n.getValue(A.AccountingSettings,"fiscalYearEnd"),r=[e,(i.getMonth()+1).toString().padStart(2,"0"),i.getDate().toString().padStart(2,"0")].join("-"),o=[t,(s.getMonth()+1).toString().padStart(2,"0"),s.getDate().toString().padStart(2,"0")].join("-");return{fromDate:r,toDate:o}}const X4={Monthly:1,Quarterly:3,"Half Yearly":6,Yearly:12};function Vse(t){for(const e of Object.values(t))e.prune=!0}function jse(t,e){for(const n of e.keys()){if(!t[n])continue;const i=e.get(n);t[n].valueMap=i,t[n].prune=!1;let s=t[n].parentAccount;for(;s!==null;)s=zse(t,s,i)}}function zse(t,e,n){const i=t[e];i.prune=!1,i.valueMap??(i.valueMap=new Map);for(const s of n.keys()){const r=i.valueMap.get(s),o=n.get(s),a={};for(const l of Object.keys(o))a[l]=((r==null?void 0:r[l])??0)+((o==null?void 0:o[l])??0);i.valueMap.set(s,a)}return i.parentAccount}function Zse(t){var n;const e=new Set;for(const i of Object.keys(t)){const s=t[i];s.parentAccount&&((n=t[s.parentAccount]).children??(n.children=[]),t[s.parentAccount].children.push(s),e.add(s.parentAccount))}}function qse(t){for(const e of Object.keys(t))t[e].parentAccount&&delete t[e]}function Xse(t){for(const e of Object.keys(t))t[e].prune&&delete t[e];for(const e of Object.keys(t))t[e].children=cM(t[e].children??[])}function cM(t){return t.filter(e=>{var n;return(n=e.children)!=null&&n.length&&(e.children=cM(e.children)),!e.prune})}function t0(t){if(!t||t.length==0)return[];const e=[];for(const n of t)uM(n,e,0);return e}function uM(t,e,n){e.push({name:t.name,rootType:t.rootType,isGroup:t.isGroup,parentAccount:t.parentAccount,valueMap:t.valueMap,level:n});const i=t.children??[],s=n+1;for(const r of i)uM(r,e,s)}function Wse(t){var n;const e=[];for(const i of Object.values(t)){if(!i)continue;const s=i.children??[];for(;s.length;){const r=s.shift();if(!((n=r==null?void 0:r.children)!=null&&n.length)){e.push(r);continue}s.unshift(...r.children??[])}}return e}const z0=class z0 extends FC{constructor(){super(...arguments),this.loading=!1}get rootTypes(){return[nn.Asset,nn.Liability,nn.Equity]}async setReportData(e,n){this.loading=!0,(n||e!=="hideGroupAmounts")&&await this._setRawData();const i=this._getGroupedMap(!0,"account"),s=await this._getGroupedByDateRanges(i),r=await this._getAccountTree(s);for(const a of Object.keys(r)){const{rootType:l}=r[a];this.rootTypes.includes(l)||delete r[a]}const o=this.rootTypes.map(a=>{const l=this.getRootNodes(a,r),c=t0(l);return{rootType:a,rootNodes:l,rows:this.getReportRowsFromAccountList(c)}}).filter(a=>!!a.rootNodes.length);this.reportData=this.getReportDataFromRows(er(o,"rootType")),this.loading=!1}getReportDataFromRows(e){var r;const n=[{rootType:nn.Asset,totalName:b`Total Asset (Debit)`},{rootType:nn.Liability,totalName:b`Total Liability (Credit)`},{rootType:nn.Equity,totalName:b`Total Equity (Credit)`}],i=[],s=this.getEmptyRow();for(const{rootType:o,totalName:a}of n){const l=e[o];if(l){if(i.push(...l.rows),l.rootNodes.length){const c=this.getTotalNode(l.rootNodes,a),u=this.getRowFromAccountListNode(c);i.push(u)}i.push(s)}}return(r=i.at(-1))!=null&&r.isEmpty&&i.pop(),i}};z0.title=b`Balance Sheet`,z0.reportName="balance-sheet";let qv=z0;const Z0=class Z0 extends Jy{constructor(e){super(e),this.usePagination=!0,this.loading=!1,this.ascending=!1,this.reverted=!1,this.referenceType="All",this.groupBy="none",this._rawData=[]}setDefaultFilters(){this.toDate||(this.toDate=Te.now().plus({days:1}).toISODate(),this.fromDate=Te.now().minus({years:1}).toISODate())}async setReportData(e,n){var l;this.loading=!0;let i=!0;(n||e!=="grouped"||this._rawData.length===0)&&(await this._setRawData(),i=!1);const s=this._getGroupedMap(i);this._setIndexOnEntries(s);const{totalDebit:r,totalCredit:o}=this._getTotalsAndSetBalance(s),a=this._consolidateEntries(s);((l=a.at(-1))==null?void 0:l.name)!==-3&&this._pushBlankEntry(a),a.push({name:-2,account:b`Closing`,date:null,debit:r,credit:o,balance:r-o,referenceType:"",referenceName:"",party:"",reverted:!1,reverts:""}),this.reportData=this._convertEntriesToReportData(a),this.loading=!1}_setIndexOnEntries(e){let n=1;for(const i of e.keys())for(const s of e.get(i))s.index=String(n),n=n+1}_convertEntriesToReportData(e){const n=[];for(const i of e){const s=this._getRowFromEntry(i,this.columns);n.push(s)}return n}_getRowFromEntry(e,n){var s;if(e.name===-3)return{isEmpty:!0,cells:n.map(r=>({rawValue:"",value:"",width:r.width??1}))};const i={cells:[]};for(const r of n){const o=r.align??"left",a=r.width??1,l=r.fieldname;let c=e[l];const u=c;c==null&&(c=""),c instanceof Date&&(c=this.fyo.format(c,Ie.Date)),typeof c=="number"&&l!=="index"&&(c=this.fyo.format(c,Ie.Currency)),typeof c=="boolean"&&l==="reverted"?c=c?b`Reverted`:"":c=String(c),l==="referenceType"&&(c=((s=this.fyo.schemaMap[c])==null?void 0:s.label)??c),i.cells.push({italics:e.name===-1,bold:e.name===-2,value:c,rawValue:u,align:o,width:a})}return i}_consolidateEntries(e){const n=[];for(const i of e.keys())n.push(...e.get(i)),this.groupBy!=="none"&&this._pushBlankEntry(n);return n}_pushBlankEntry(e){e.push({name:-3,account:"",date:null,debit:null,credit:null,balance:null,referenceType:"",referenceName:"",party:"",reverted:!1,reverts:""})}_getTotalsAndSetBalance(e){var s;let n=0,i=0;for(const r of e.keys()){let o=0,a=0,l=0;for(const c of e.get(r)){a+=c.debit,l+=c.credit;const u=c.debit-c.credit;o+=u,c.balance=o}this.groupBy!=="none"&&((s=e.get(r))==null||s.push({name:-1,account:b`Total`,date:null,debit:a,credit:l,balance:a-l,referenceType:"",referenceName:"",party:"",reverted:!1,reverts:""})),n+=a,i+=l}return{totalDebit:n,totalCredit:i}}_getQueryFilters(){const e={},n=["account","party","referenceName"];for(const i of n){const s=this[i];s!==void 0&&(e[i]=s)}return this.referenceType!=="All"&&(e.referenceType=this.referenceType),this.toDate&&(e.date??(e.date=[]),e.date.push("<=",this.toDate)),this.fromDate&&(e.date??(e.date=[]),e.date.push(">=",this.fromDate)),this.reverted||(e.reverted=!1),e}getFilters(){var n;const e=[{label:b`All`,value:"All"},{label:b`Sales Invoices`,value:"SalesInvoice"},{label:b`Purchase Invoices`,value:"PurchaseInvoice"},{label:b`Payments`,value:"Payment"},{label:b`Journal Entries`,value:"JournalEntry"}];return(n=this.fyo.singles.AccountingSettings)!=null&&n.enableInventory||e.push({label:b`Shipment`,value:"Shipment"},{label:b`Purchase Receipt`,value:"PurchaseReceipt"}),[{fieldtype:"Select",options:e,label:b`Ref Type`,fieldname:"referenceType",placeholder:b`Ref Type`},{fieldtype:"DynamicLink",label:b`Ref. Name`,references:"referenceType",placeholder:b`Ref Name`,emptyMessage:b`Change Ref Type`,fieldname:"referenceName"},{fieldtype:"Link",target:"Account",placeholder:b`Account`,label:b`Account`,fieldname:"account"},{fieldtype:"Link",target:"Party",label:b`Party`,placeholder:b`Party`,fieldname:"party"},{fieldtype:"Date",placeholder:b`From Date`,label:b`From Date`,fieldname:"fromDate"},{fieldtype:"Date",placeholder:b`To Date`,label:b`To Date`,fieldname:"toDate"},{fieldtype:"Select",label:b`Group By`,fieldname:"groupBy",options:[{label:b`None`,value:"none"},{label:b`Party`,value:"party"},{label:b`Account`,value:"account"},{label:b`Reference`,value:"referenceName"}]},{fieldtype:"Check",label:b`Include Cancelled`,fieldname:"reverted"},{fieldtype:"Check",label:b`Ascending Order`,fieldname:"ascending"}]}getColumns(){let e=[{label:"#",fieldtype:"Int",fieldname:"index",align:"right",width:.5},{label:b`Account`,fieldtype:"Link",fieldname:"account",width:1.5},{label:b`Date`,fieldtype:"Date",fieldname:"date"},{label:b`Debit`,fieldtype:"Currency",fieldname:"debit",align:"right",width:1.25},{label:b`Credit`,fieldtype:"Currency",fieldname:"credit",align:"right",width:1.25},{label:b`Balance`,fieldtype:"Currency",fieldname:"balance",align:"right",width:1.25},{label:b`Party`,fieldtype:"Link",fieldname:"party"},{label:b`Ref Name`,fieldtype:"Data",fieldname:"referenceName"},{label:b`Ref Type`,fieldtype:"Data",fieldname:"referenceType"},{label:b`Reverted`,fieldtype:"Check",fieldname:"reverted"}];return this.reverted||(e=e.filter(n=>n.fieldname!=="reverted")),e}};Z0.title=b`General Ledger`,Z0.reportName="general-ledger";let Xv=Z0;const vl={"01":"Jammu and Kashmir","02":"Himachal Pradesh","03":"Punjab","04":"Chandigarh","05":"Uttarakhand","06":"Haryana","07":"Delhi","08":"Rajasthan","09":"Uttar Pradesh",10:"Bihar",11:"Sikkim",12:"Arunachal Pradesh",13:"Nagaland",14:"Manipur",15:"Mizoram",16:"Tripura",17:"Meghalaya",18:"Assam",19:"West Bengal",20:"Jharkhand",21:"Odisha",22:"Chattisgarh",23:"Madhya Pradesh",24:"Gujarat",26:"Dadra and Nagar Haveli and Daman and Diu",27:"Maharashtra",29:"Karnataka",30:"Goa",31:"Lakshadweep",32:"Kerala",33:"Tamil Nadu",34:"Puducherry",35:"Andaman and Nicobar Islands",36:"Telangana",37:"Andhra Pradesh",38:"Ladakh"};function Wv(t,e=!1,n=!1){const i=[],s=[];return JSON.stringify(t,(r,o)=>{if(typeof o!="object"||o===null)return i.push(r),s.push(o),o;if(s.includes(o)){const a=i[s.indexOf(o)]||"{self}";return e?void 0:`[Circular:${a}]`}return i.push(r),s.push(o),n&&o instanceof ze?o.getValidDict():o})}function L1(t,e){const n=[...t],i=[...e];let s=n.shift(),r=i.shift(),o=!0,a=0;for(;s&&r;)s===r?s=n.shift():s.toLowerCase()===r.toLowerCase()?(s=n.shift(),a+=.5):a+=1,r=i.shift();return s!==void 0?(a=Number.MAX_SAFE_INTEGER,o=!1):a+=i.length,{isMatch:o,distance:a}}function eh(t,e){var o,a,l;const n=t.message||b`An error occurred.`;let{schemaName:i,name:s}=e??{};if(e||(i=(o=t.more)==null?void 0:o.schemaName,s=(a=t.more)==null?void 0:a.value),!i||!s)return n;const r=((l=N.db.schemaMap[i])==null?void 0:l.label)??i;return t instanceof x1?b`${r} ${s} is linked with existing records.`:t instanceof A1?b`${r} ${s} already exists.`:n}function lo(t){return typeof t!="string"&&(t=t==null?void 0:t.fieldtype),[Ie.Int,Ie.Float,Ie.Currency].includes(t)}var Uu=(t=>(t.B2B="B2B",t.B2CL="B2CL",t.B2CS="B2CS",t.NR="NR",t))(Uu||{});const dM={"GST-0":0,"GST-0.25":.25,"GST-3":3,"GST-5":5,"GST-6":6,"GST-12":12,"GST-18":18,"GST-28":28,"IGST-0":0,"IGST-0.25":.25,"IGST-3":3,"IGST-5":5,"IGST-6":6,"IGST-12":12,"IGST-18":18,"IGST-28":28},W4={"GST-0":0,"GST-0.25":.125,"GST-3":1.5,"GST-5":2.5,"GST-6":3,"GST-12":6,"GST-18":9,"GST-28":14},Gse={"IGST-0.25":.25,"IGST-3":3,"IGST-5":5,"IGST-6":6,"IGST-12":12,"IGST-18":18,"IGST-28":28};function Use(t){return["csv","json"].map(n=>({group:"Export",label:n.toUpperCase(),type:"primary",action:async()=>{await Hse(n,t)}}))}async function Hse(t,e){if(!await Yse(e))return;const{filePath:i,canceled:s}=await Wl(e.reportName,t);if(s||!i)return;let r="";t==="csv"?r=oM(e):t==="json"&&(r=await Kse(e)),r.length&&(await LC(r,i),e.fyo.telemetry.log(si.Exported,e.reportName,{extention:t}))}async function Yse(t){return await t.fyo.getValue(A.AccountingSettings,"gstin")?!0:(await Qn({title:t.fyo.t`Cannot Export`,detail:t.fyo.t`Please set GSTIN in General Settings.`,type:"error"}),!1)}async function Kse(t){const e=t.toDate,n=t.transferType,s={version:"GST3.0.4",hash:"hash",gstin:await t.fyo.getValue(A.AccountingSettings,"gstin"),fp:Te.fromISO(e).toFormat("MMyyyy")};return n===Uu.B2B?s.b2b=await Jse(t):n===Uu.B2CL?s.b2cl=await ere(t):n===Uu.B2CS&&(s.b2cs=tre(t)),JSON.stringify(s)}async function Jse(t){const e=t.fyo,n=[],i=t.gstrType==="GSTR-1"?A.SalesInvoiceItem:A.PurchaseInvoiceItem,s=t.gstrType==="GSTR-1"?A.SalesInvoice:A.PurchaseInvoice;for(const r of t.gstrRows??[]){const o={inum:r.invNo,idt:Te.fromJSDate(r.invDate).toFormat("dd-MM-yyyy"),val:r.invAmt,pos:r.gstin&&r.gstin.substring(0,2),rchrg:r.reverseCharge,inv_typ:"R",itms:[]},a=(await e.db.getAllRaw(s,{fields:["exchangeRate"],filters:{name:o.inum}}))[0].exchangeRate;(await e.db.getAllRaw(i,{fields:["amount","tax","hsnCode"],filters:{parent:o.inum}})).forEach(h=>{const p=h.hsnCode,m=h.tax,y=e.pesa(h.amount??0).mul(a),O={num:p,itm_det:{txval:y.float,rt:dM[m],csamt:0,camt:e.pesa(W4[m]??0).mul(y).div(100).float,samt:e.pesa(W4[m]??0).mul(y).div(100).float,iamt:e.pesa(Gse[m]??0).mul(y).div(100).float}};o.itms.push(O)});const c=n.find(h=>h.ctin===r.gstin),u={ctin:r.gstin,inv:[]};c?c.inv.push(o):(u.inv.push(o),n.push(u))}return n}async function ere(t){const e=t.fyo,n=[],i=HD(vl),s=t.gstrType==="GSTR-1"?A.SalesInvoiceItem:A.PurchaseInvoiceItem,r=t.gstrType==="GSTR-1"?A.SalesInvoice:A.PurchaseInvoice;for(const o of t.gstrRows??[]){const a={inum:o.invNo,idt:Te.fromJSDate(o.invDate).toFormat("dd-MM-yyyy"),val:o.invAmt,itms:[]},l=(await e.db.getAllRaw(r,{fields:["exchangeRate"],filters:{name:a.inum}}))[0].exchangeRate;(await e.db.getAllRaw(s,{fields:["amount","tax","hsnCode"],filters:{parent:a.inum}})).forEach(p=>{const m=p.hsnCode,y=p.tax,O=e.pesa(p.amount??0).mul(l),S={num:m,itm_det:{txval:O.float,rt:dM[y]??0,csamt:0,iamt:e.pesa(o.rate??0).mul(O).div(100).float}};a.itms.push(S)});const u=n.find(p=>p.pos===i[o.place]),h={pos:i[o.place],inv:[]};u?u.inv.push(a):(h.inv.push(a),n.push(h))}return n}function tre(t){const e=HD(vl),n=[];for(const i of t.gstrRows??[]){const s={sply_ty:i.inState?"INTRA":"INTER",pos:e[i.place],typ:"OE",txval:i.taxVal,rt:i.rate,iamt:i.inState?0:i.taxVal*i.rate/100,camt:i.inState?i.cgstAmt??0:0,samt:i.inState?i.sgstAmt??0:0,csamt:0};n.push(s)}return n}class hM extends N1{constructor(){super(...arguments),this.usePagination=!0,this.loading=!1}get transferTypeMap(){return this.gstrType==="GSTR-2"?{B2B:"B2B"}:{B2B:"B2B",B2CL:"B2C-Large",B2CS:"B2C-Small",NR:"Nil Rated, Exempted and Non GST supplies"}}get schemaName(){return this.gstrType==="GSTR-1"?A.SalesInvoice:A.PurchaseInvoice}async setReportData(){this.loading=!0;const e=await this.getGstrRows(),n=this.filterGstrRows(e);this.gstrRows=n,this.reportData=this.getReportDataFromGSTRRows(n),this.loading=!1}getReportDataFromGSTRRows(e){const n=[];for(const i of e){const s={cells:[]};for(const{fieldname:r,fieldtype:o,width:a}of this.columns){const l=lo(o)?"right":"left",c=i[r];let u="";c!==void 0&&(u=this.fyo.format(c,o)),s.cells.push({align:l,rawValue:c,value:u,width:a??1})}n.push(s)}return n}filterGstrRows(e){return e.filter(n=>{let i=!0;return this.place&&i&&(i=vl[this.place]===n.place),this.place,i&&(i=this.transferFilterFunction(n))})}get transferFilterFunction(){return this.transferType==="B2B"?e=>!!e.gstin:this.transferType==="B2CL"?e=>!e.gstin&&!e.inState&&e.invAmt>=25e4:this.transferType==="B2CS"?e=>!e.gstin&&(e.inState||e.invAmt<25e4):this.transferType==="NR"?e=>e.rate===0:()=>!0}async getEntries(){const e=[];return this.toDate&&e.push("<=",this.toDate),this.fromDate&&e.push(">=",this.fromDate),await this.fyo.db.getAllRaw(this.schemaName,{filters:{date:e,submitted:!0,cancelled:!1}})}async getGstrRows(){const e=await this.getEntries(),n=[];for(const i of e){const s=await this.getGstrRow(i.name);n.push(s)}return n}async getGstrRow(e){var l,c;const n=await this.fyo.doc.getDoc(this.schemaName,e),i=await this.fyo.getValue(A.AccountingSettings,"gstin"),s=await this.fyo.doc.getDoc("Party",n.party);let r="";if(s.address)r=await this.fyo.getValue(A.Address,s.address,"pos")??"";else if(s.gstin){const u=s.gstin.slice(0,2);r=vl[u]??""}let o=!1;i&&(o=vl[i.slice(0,2)]===r);const a={gstin:s.gstin??"",partyName:n.party,invNo:n.name,invDate:n.date,rate:0,reverseCharge:s.gstin?"N":"Y",inState:o,place:r,invAmt:((l=n.grandTotal)==null?void 0:l.float)??0,taxVal:((c=n.netTotal)==null?void 0:c.float)??0};for(const u of n.taxes??[])a.rate+=u.rate??0;return this.setTaxValuesOnGSTRRow(n,a),a}setTaxValuesOnGSTRRow(e,n){for(const i of e.taxes??[]){const s=i.rate??0;n.rate+=s;const r=e.netTotal.percent(s).float;switch(i.account){case"IGST":n.igstAmt=r,n.inState=!1;case"CGST":n.cgstAmt=r;case"SGST":n.sgstAmt=r;case"Nil Rated":n.nilRated=!0;case"Exempt":n.exempt=!0;case"Non GST":n.nonGST=!0}}}setDefaultFilters(){this.toDate||(this.toDate=Te.local().toISODate()),this.fromDate||(this.fromDate=Te.local().minus({months:3}).toISODate()),this.transferType||(this.transferType="B2B")}getFilters(){const e=this.transferTypeMap,n=Object.keys(e).map(i=>({value:i,label:e[i]}));return[{fieldtype:"Select",label:b`Transfer Type`,placeholder:b`Transfer Type`,fieldname:"transferType",options:n},{fieldtype:"AutoComplete",label:b`Place`,placeholder:b`Place`,fieldname:"place",options:Object.keys(vl).map(i=>({value:i,label:vl[i]}))},{fieldtype:"Date",label:b`From Date`,placeholder:b`From Date`,fieldname:"fromDate"},{fieldtype:"Date",label:b`To Date`,placeholder:b`To Date`,fieldname:"toDate"}]}getColumns(){const e=[{label:b`Party`,fieldtype:"Data",fieldname:"partyName",width:1.5},{label:b`Invoice No.`,fieldname:"invNo",fieldtype:"Data"},{label:b`Invoice Value`,fieldname:"invAmt",fieldtype:"Currency"},{label:b`Invoice Date`,fieldname:"invDate",fieldtype:"Date"},{label:b`Place of supply`,fieldname:"place",fieldtype:"Data"},{label:b`Rate`,fieldname:"rate",width:.5},{label:b`Taxable Value`,fieldname:"taxVal",fieldtype:"Currency"},{label:b`Reverse Chrg.`,fieldname:"reverseCharge",fieldtype:"Data"},{label:b`Intergrated Tax`,fieldname:"igstAmt",fieldtype:"Currency"},{label:b`Central Tax`,fieldname:"cgstAmt",fieldtype:"Currency"},{label:b`State Tax`,fieldname:"sgstAmt",fieldtype:"Currency"}];return(this.transferType??Uu.B2B)===Uu.B2B&&e.unshift({label:b`GSTIN No.`,fieldname:"gstin",fieldtype:"Data",width:1.5}),e}getActions(){return Use(this)}}const q0=class q0 extends hM{constructor(){super(...arguments),this.gstrType="GSTR-1"}};q0.title="GSTR1",q0.reportName="gstr-1";let Gv=q0;const X0=class X0 extends hM{constructor(){super(...arguments),this.gstrType="GSTR-2"}};X0.title="GSTR2",X0.reportName="gstr-2";let Uv=X0;var Rc;let nre=(Rc=class extends FC{constructor(){super(...arguments),this.loading=!1}get rootTypes(){return[nn.Income,nn.Expense]}async setReportData(e,n){this.loading=!0,(n||e!=="hideGroupAmounts")&&await this._setRawData();const i=this._getGroupedMap(!0,"account"),s=await this._getGroupedByDateRanges(i),r=await this._getAccountTree(s);for(const p of Object.keys(r)){const{rootType:m}=r[p];this.rootTypes.includes(m)||delete r[p]}const o=this.getRootNodes(nn.Income,r),a=t0(o),l=this.getReportRowsFromAccountList(a),c=this.getRootNodes(nn.Expense,r),u=t0(c),h=this.getReportRowsFromAccountList(u);this.reportData=this.getReportDataFromRows(l,h,o,c),this.loading=!1}getReportDataFromRows(e,n,i,s){return i&&i.length&&!s&&!s.length?this.getIncomeOrExpenseRows(i,e,b`Total Income (Credit)`):s&&s.length&&(!i||!i.length)?this.getIncomeOrExpenseRows(s,n,b`Total Income (Credit)`):!i||!i.length||!s||!s.length?[]:this.getIncomeAndExpenseRows(e,n,i,s)}getIncomeOrExpenseRows(e,n,i){const s=this.getTotalNode(e,i),r=this.getRowFromAccountListNode(s);return[n,r].flat()}getIncomeAndExpenseRows(e,n,i,s){var m,y;const r=this.getTotalNode(i,b`Total Income (Credit)`),o=this.getRowFromAccountListNode(r),a=this.getTotalNode(s,b`Total Expense (Debit)`),l=this.getRowFromAccountListNode(a),c=new Map;for(const O of r.valueMap.keys()){const S=((m=r.valueMap.get(O))==null?void 0:m.balance)??0,x=((y=a.valueMap.get(O))==null?void 0:y.balance)??0;c.set(O,{balance:S-x})}const u={name:b`Total Profit`,valueMap:c,level:0},h=this.getRowFromAccountListNode(u);h.cells.forEach(O=>{O.bold=!0,typeof O.rawValue=="number"&&(O.rawValue>0?O.color="green":O.rawValue<0&&(O.color="red"))});const p=this.getEmptyRow();return[e,o,p,n,l,p,h].flat()}},Rc.title=b`Profit And Loss`,Rc.reportName="profit-and-loss",Rc);const W0=class W0 extends FC{constructor(){super(...arguments),this.hideGroupAmounts=!1,this.loading=!1,this._rawData=[]}get rootTypes(){return[nn.Asset,nn.Liability,nn.Income,nn.Expense,nn.Equity]}async setReportData(e,n){this.loading=!0,(n||e!=="hideGroupAmounts")&&await this._setRawData();const i=this._getGroupedMap(!0,"account"),s=await this._getGroupedByDateRanges(i),r=await this._getAccountTree(s),o=this.rootTypes.map(a=>{const l=this.getRootNodes(a,r),c=t0(l);return{rootType:a,rootNodes:l,rows:this.getReportRowsFromAccountList(c)}}).filter(a=>!!(a.rootNodes&&a.rootNodes.length));this.reportData=await this.getReportDataFromRows(o),this.loading=!1}async getReportDataFromRows(e){const n=e.reduce((i,s)=>(i.push(...s.rows),i.push(this.getEmptyRow()),i),[]);return n.pop(),n}async _getGroupedByDateRanges(e){var i;const n=new Map;for(const s of e.keys()){const r=new Map;for(const o of e.get(s)){const a=this._getRangeMapKey(o);if(a===null)throw new oo(`invalid entry in trial balance ${((i=o.date)==null?void 0:i.toISOString())??""}`);const l=r.get(a),c=(l==null?void 0:l.credit)??0,u=(l==null?void 0:l.debit)??0;r.set(a,{credit:c+(o.credit??0),debit:u+(o.debit??0)})}n.set(s,r)}return n}async _getDateRanges(){(!this.toDate||!this.fromDate)&&await this.setDefaultFilters();const e=Te.fromISO(this.toDate),n=Te.fromISO(this.fromDate);return[{fromDate:Te.fromISO("0001-01-01"),toDate:n},{fromDate:n,toDate:e},{fromDate:e,toDate:Te.fromISO("9999-12-31")}]}getRowFromAccountListNode(e){const n={value:e.name,rawValue:e.name,align:"left",width:e0,bold:!e.level,indent:e.level??0},i=this._dateRanges.map(s=>{var a;const r=(a=e.valueMap)==null?void 0:a.get(s),o=this.hideGroupAmounts&&e.isGroup;return[{rawValue:(r==null?void 0:r.debit)??0,value:o?"":this.fyo.format((r==null?void 0:r.debit)??0,"Currency"),align:"right",width:Po},{rawValue:(r==null?void 0:r.credit)??0,value:o?"":this.fyo.format((r==null?void 0:r.credit)??0,"Currency"),align:"right",width:Po}]});return{cells:[n,i].flat(2),level:e.level,isGroup:!!e.isGroup,folded:!1,foldedBelow:!1}}async _getQueryFilters(){const e={};return e.reverted=!1,e}async setDefaultFilters(){if(!this.toDate||!this.fromDate){const{year:e}=Te.now(),n=await lM(e+1,e,this.fyo);this.fromDate=n.fromDate,this.toDate=Te.fromISO(n.toDate).minus({days:1}).toISODate()}await this._setDateRanges()}getFilters(){return[{fieldtype:"Date",fieldname:"fromDate",placeholder:b`From Date`,label:b`From Date`,required:!0},{fieldtype:"Date",fieldname:"toDate",placeholder:b`To Date`,label:b`To Date`,required:!0},{fieldtype:"Check",label:b`Hide Group Amounts`,fieldname:"hideGroupAmounts"}]}getColumns(){return[{label:b`Account`,fieldtype:"Link",fieldname:"account",align:"left",width:e0},{label:b`Opening (Dr)`,fieldtype:"Data",fieldname:"openingDebit",align:"right",width:Po},{label:b`Opening (Cr)`,fieldtype:"Data",fieldname:"openingCredit",align:"right",width:Po},{label:b`Debit`,fieldtype:"Data",fieldname:"debit",align:"right",width:Po},{label:b`Credit`,fieldtype:"Data",fieldname:"credit",align:"right",width:Po},{label:b`Closing (Dr)`,fieldtype:"Data",fieldname:"closingDebit",align:"right",width:Po},{label:b`Closing (Cr)`,fieldtype:"Data",fieldname:"closingCredit",align:"right",width:Po}]}};W0.title=b`Trial Balance`,W0.reportName="trial-balance";let Hv=W0;const Af=class Af extends N1{constructor(e){super(e),this.usePagination=!0,this.loading=!1,this.shouldRefresh=!1,this.referenceType="All",this.groupBy="none",this._setObservers()}get hasBatches(){return!!this.fyo.singles.InventorySettings.enableBatches}get hasSerialNumbers(){return!!this.fyo.singles.InventorySettings.enableSerialNumber}setDefaultFilters(){this.toDate||(this.toDate=Te.now().plus({days:1}).toISODate(),this.fromDate=Te.now().minus({years:1}).toISODate())}async setReportData(e,n){this.loading=!0,this.reportData=await this._getReportData(n),this.loading=!1}async _getReportData(e){var r;(this.shouldRefresh||e||!((r=this._rawData)!=null&&r.length))&&await this._setRawData();const n=Vi.cloneDeep(this._rawData);if(!n)return[];const i=this._getFilteredRawData(n);return this._getGroupedRawData(i).map(o=>this._convertRawDataRowToReportRow(o,{quantity:null,valueChange:null}))}async _setRawData(){const e=Fc.FIFO,n=await Xf(this.fyo);this._rawData=Uy(n,e)}_getFilteredRawData(e){const n=[];if(!e.length)return[];const i=this.fromDate?Date.parse(this.fromDate):null,s=this.toDate?Date.parse(this.toDate):null;this.ascending||e.reverse();let r=0;for(let o=0;o<e.length;o++){const a=e[o];if(this.item&&a.item!==this.item||this.location&&a.location!==this.location||this.batch&&a.batch!==this.batch)continue;const l=a.date.valueOf();s&&l>s||i&&l<i||this.referenceType!=="All"&&a.referenceType!==this.referenceType||this.referenceName&&a.referenceName!==this.referenceName||(a.name=++r,n.push(a))}return n}_getGroupedRawData(e){var o,a;const n=this.groupBy;if(n==="none")return e;const i=new Map;for(const l of e){const c=l[n];i.has(c)||i.set(c,[]),(o=i.get(c))==null||o.push(l)}const s=[];let r=0;for(const l of i.keys()){for(const c of i.get(l)??[])c.name=++r,s.push(c);s.push({name:null})}return((a=s.at(-1))==null?void 0:a.name)===null&&s.pop(),s}_convertRawDataRowToReportRow(e,n){var r;const i=[],s=this.getColumns();if(e.name===null)return{isEmpty:!0,cells:s.map(o=>({rawValue:"",value:"",width:o.width??1}))};for(const o of s){const a=o.fieldname,l=o.fieldtype,c=e[a];let u;o.fieldname==="referenceType"&&typeof c=="string"?u=((r=this.fyo.schemaMap[c])==null?void 0:r.label)??c:u=this.fyo.format(c,l);const h=lo(l)?"right":"left",p=a in n,m=typeof c=="number";let y;p&&n[a]?y=n[a]:p&&m&&c>0?y="green":p&&m&&c<0&&(y="red"),i.push({rawValue:c,value:u,align:h,color:y,width:o.width})}return{cells:i}}_setObservers(){const e=()=>this.shouldRefresh=!0;this.fyo.doc.observer.on(`sync:${A.StockLedgerEntry}`,e),this.fyo.doc.observer.on(`delete:${A.StockLedgerEntry}`,e)}getColumns(){const e=[],n=[];return this.hasBatches&&e.push({fieldname:"batch",label:"Batch",fieldtype:"Link",target:"Batch"}),this.hasSerialNumbers&&n.push({fieldname:"serialNumber",label:"Serial Number",fieldtype:"Data"}),[{fieldname:"name",label:"#",fieldtype:"Int",width:.5},{fieldname:"date",label:"Date",fieldtype:"Datetime",width:1.25},{fieldname:"item",label:"Item",fieldtype:"Link"},{fieldname:"location",label:"Location",fieldtype:"Link"},...e,...n,{fieldname:"quantity",label:"Quantity",fieldtype:"Float"},{fieldname:"balanceQuantity",label:"Balance Qty.",fieldtype:"Float"},{fieldname:"incomingRate",label:"Incoming rate",fieldtype:"Currency"},{fieldname:"valuationRate",label:"Valuation Rate",fieldtype:"Currency"},{fieldname:"balanceValue",label:"Balance Value",fieldtype:"Currency"},{fieldname:"valueChange",label:"Value Change",fieldtype:"Currency"},{fieldname:"referenceName",label:"Ref. Name",fieldtype:"DynamicLink"},{fieldname:"referenceType",label:"Ref. Type",fieldtype:"Data"}]}getFilters(){return[{fieldtype:"Select",options:[{label:b`All`,value:"All"},{label:b`Stock Movements`,value:"StockMovement"},{label:b`Shipment`,value:"Shipment"},{label:b`Purchase Receipt`,value:"PurchaseReceipt"}],label:b`Ref Type`,fieldname:"referenceType",placeholder:b`Ref Type`},{fieldtype:"DynamicLink",label:b`Ref Name`,references:"referenceType",placeholder:b`Ref Name`,emptyMessage:b`Change Ref Type`,fieldname:"referenceName"},{fieldtype:"Link",target:"Item",placeholder:b`Item`,label:b`Item`,fieldname:"item"},{fieldtype:"Link",target:"Location",placeholder:b`Location`,label:b`Location`,fieldname:"location"},...this.hasBatches?[{fieldtype:"Link",target:"Batch",placeholder:b`Batch`,label:b`Batch`,fieldname:"batch"}]:[],{fieldtype:"Date",placeholder:b`From Date`,label:b`From Date`,fieldname:"fromDate"},{fieldtype:"Date",placeholder:b`To Date`,label:b`To Date`,fieldname:"toDate"},{fieldtype:"Select",label:b`Group By`,fieldname:"groupBy",options:[{label:b`None`,value:"none"},{label:b`Item`,value:"item"},{label:b`Location`,value:"location"},{label:b`Reference`,value:"referenceName"}]},{fieldtype:"Check",label:b`Ascending Order`,fieldname:"ascending"}]}getActions(){return NC(this)}};Af.title=b`Stock Ledger`,Af.reportName="stock-ledger",Af.isInventory=!0;let n0=Af;const xf=class xf extends n0{constructor(){super(...arguments),this.ascending=!0,this.referenceType="All",this.referenceName="",this.showSerialNumbers=!1,this.serialNumberFilter="All"}async _getReportData(e){var s;(this.shouldRefresh||e||!((s=this._rawData)!=null&&s.length))&&await this._setRawData();const n={item:this.item,location:this.location,batch:this.batch,fromDate:this.fromDate,toDate:this.toDate};return Hy(this._rawData??[],n,this.showSerialNumbers,this.serialNumberFilter).map((r,o)=>{const a={...r,name:o+1};return this._convertRawDataRowToReportRow(a,{incomingQuantity:"green",outgoingQuantity:"red",balanceQuantity:null})})}getFilters(){return[{fieldtype:"Link",target:"Item",placeholder:b`Item`,label:b`Item`,fieldname:"item"},{fieldtype:"Link",target:"Location",placeholder:b`Location`,label:b`Location`,fieldname:"location"},...this.hasBatches?[{fieldtype:"Link",target:"Batch",placeholder:b`Batch`,label:b`Batch`,fieldname:"batch"}]:[],{fieldtype:"Date",placeholder:b`From Date`,label:b`From Date`,fieldname:"fromDate"},{fieldtype:"Date",placeholder:b`To Date`,label:b`To Date`,fieldname:"toDate"},{fieldtype:"Check",placeholder:b`Serial Number`,label:b`Serial Number`,fieldname:"showSerialNumbers"},...this.showSerialNumbers?[{fieldtype:"Select",options:[{label:b`All`,value:"All"},{label:b`In stock`,value:"In stock"},{label:b`Out stock`,value:"Out stock"}],placeholder:b`Serial Number Status`,label:b`Serial Number Status`,fieldname:"serialNumberFilter",default:"All"}]:[]]}getColumns(){const e=[],n=[];return this.hasBatches&&e.push({fieldname:"batch",label:"Batch",fieldtype:"Link"}),this.showSerialNumbers&&this.hasSerialNumbers&&n.push({fieldname:"serialNumber",label:"Serial Number",fieldtype:"Data"}),[{fieldname:"name",label:"#",fieldtype:"Int",width:.5},{fieldname:"item",label:"Item",fieldtype:"Link"},{fieldname:"location",label:"Location",fieldtype:"Link"},...e,...n,{fieldname:"balanceQuantity",label:"Balance Qty.",fieldtype:"Float"},{fieldname:"balanceValue",label:"Balance Value",fieldtype:"Float"},{fieldname:"openingQuantity",label:"Opening Qty.",fieldtype:"Float"},{fieldname:"openingValue",label:"Opening Value",fieldtype:"Float"},{fieldname:"incomingQuantity",label:"In Qty.",fieldtype:"Float"},{fieldname:"incomingValue",label:"In Value",fieldtype:"Currency"},{fieldname:"outgoingQuantity",label:"Out Qty.",fieldtype:"Float"},{fieldname:"outgoingValue",label:"Out Value",fieldtype:"Currency"},{fieldname:"valuationRate",label:"Valuation rate",fieldtype:"Currency"}]}getActions(){return NC(this)}};xf.title=b`Stock Balance`,xf.reportName="stock-balance",xf.isInventory=!0;let Yv=xf;const Hu={GeneralLedger:Xv,ProfitAndLoss:nre,BalanceSheet:qv,TrialBalance:Hv,GSTR1:Gv,GSTR2:Uv,StockLedger:n0,StockBalance:Yv},ire="SetupWizard",sre="Setup Wizard",rre=!0,ore=!1,are=!1,lre=[{fieldname:"logo",label:"Company Logo",fieldtype:"AttachImage",section:"Default"},{fieldname:"companyName",label:"Company Name",placeholder:"Company Name",fieldtype:"Data",required:!0,section:"Default"},{fieldname:"fullname",label:"Full Name",fieldtype:"Data",placeholder:"John Doe",required:!0},{fieldname:"email",label:"Email",fieldtype:"Data",placeholder:"john@doe.com",required:!0},{fieldname:"country",label:"Country",fieldtype:"AutoComplete",placeholder:"Select Country",section:"Locale",required:!0},{fieldname:"currency",label:"Currency",fieldtype:"AutoComplete",placeholder:"Currency",section:"Locale",required:!0},{fieldname:"bankName",label:"Bank Name",fieldtype:"Data",placeholder:"Prime Bank",section:"Accounting",required:!0},{fieldname:"chartOfAccounts",label:"Chart of Accounts",fieldtype:"AutoComplete",placeholder:"Select CoA",section:"Accounting",required:!0},{fieldname:"fiscalYearStart",label:"Fiscal Year Start Date",placeholder:"Fiscal Year Start Date",fieldtype:"Date",section:"Accounting",required:!0},{fieldname:"fiscalYearEnd",label:"Fiscal Year End Date",placeholder:"Fiscal Year End Date",fieldtype:"Date",section:"Accounting",required:!0},{fieldname:"completed",label:"Completed",fieldtype:"Check",hidden:!0,readOnly:!0}],cre=["fullname","bankName","country","currency","chartOfAccounts","fiscalYearStart","fiscalYearEnd"],ure={name:ire,label:sre,isSingle:rre,isChild:ore,isSubmittable:are,fields:lre,quickEditFields:cre};function F1(t){const e=Te.now().plus({days:1});let n;t==="This Year"?n=e.minus({months:12}):t==="YTD"?n=Te.now().startOf("year"):t==="This Quarter"?n=e.minus({months:3}):t==="This Month"?n=e.startOf("month"):n=e.minus({days:1});const i=[e];for(;;){const s=i.at(0).minus({months:1});if(s.toMillis()<n.toMillis()){if(t==="YTD"){i.unshift(s);break}break}i.unshift(s)}return i.shift(),{periodList:i,fromDate:n,toDate:e}}function dre(t){const e=Vi.cloneDeep(ure);return t&&Fy(e,t,s7),N.doc.getNewDoc("SetupWizard",{},!1,e,rM)}function fM(t){const e=t.config.get("files",[]),n=t.singles.AccountingSettings.companyName,i=t.singles.SystemSettings.instanceId,s=t.db.dbPath,r=t.singles.Misc.openCount,o=e.findIndex(l=>l.id===i);let a={id:i,companyName:n,dbPath:s,openCount:r};return o===-1?e.push(a):(e[o].companyName=n,e[o].dbPath=s,e[o].openCount=r,a=e[o]),t.config.set("files",e),a}const Xo={Dashboard:"books/dashboard",Reports:"books/reports",GeneralLedger:"books/general-ledger",ProfitAndLoss:"books/profit-and-loss",BalanceSheet:"books/balance-sheet",TrialBalance:"books/trial-balance",[A.SalesInvoice]:"books/sales-invoices",[A.PurchaseInvoice]:"books/purchase-invoices",[A.Payment]:"books/payments",[A.JournalEntry]:"books/journal-entries",[A.StockMovement]:"books/stock-movement",[A.Shipment]:"books/shipment",[A.PurchaseReceipt]:"books/purchase-receipt",StockLedger:"books/stock-ledger",StockBalance:"books/stock-balance",[A.Batch]:"books/batches",Entries:"books/books",[A.Party]:"books/party",[A.Item]:"books/items",[A.Tax]:"books/taxes",[A.PrintTemplate]:"books/print-templates",Search:"books/quick-search",NumberSeries:"books/number-series",ImportWizard:"books/import-wizard",Settings:"books/settings",ChartOfAccounts:"books/chart-of-accounts"};async function pM(t,e){const n=new Blob([e],{type:t});return new Promise(i=>{const s=new FileReader;s.addEventListener("loadend",()=>{i(s.result)}),s.readAsDataURL(n)})}async function hre(t,e){const n=await t.arrayBuffer(),i=new Uint8Array(n);return await pM(e,i)}function BC(t){const e={};for(const n in t){let i=t[n];Array.isArray(i)&&i[0]==="in"&&Array.isArray(i[1])&&(i=i[1].filter(s=>s!=="Both")[0]),!(i===void 0||Array.isArray(i))&&(e[n]=i)}return e}function mM(){return navigator.userAgent.indexOf("Mac")!==-1}async function gM(t){const e=N.store.reports[t];if(e)return e;const n=new Hu[t](N);return await n.initialize(),N.store.reports[t]=n,n}const ms={SalesItems:{for:["in",["Sales","Both"]]},PurchaseItems:{for:["in",["Purchases","Both"]]},Items:{for:"Both"},PurchasePayments:{referenceType:A.PurchaseInvoice},SalesPayments:{referenceType:A.SalesInvoice},Suppliers:{role:["in",["Supplier","Both"]]},Customers:{role:["in",["Customer","Both"]]},Party:{role:"Both"}},ol={SalesItems:{for:"Sales"},PurchaseItems:{for:"Purchases"},Items:{for:"Both"},PurchasePayments:{paymentType:"Pay"},SalesPayments:{paymentType:"Receive"},Suppliers:{role:"Supplier"},Customers:{role:"Customer"},Party:{role:"Both"}},og=["Docs","List","Create","Report","Page","Recent"];function yM(){return{Create:b`Create`,List:b`List`,Report:b`Report`,Docs:b`Docs`,Page:b`Page`,Recent:b`Recent`}}function Kv(t,e,n){return async function(){const s=t.doc.getNewDoc(e,n),r=$s(e,s.name);await St(r)}}function fre(t){var s;const e=(s=t.doc.singles.AccountingSettings)==null?void 0:s.enableInventory,n=[A.SalesInvoice,A.PurchaseInvoice,A.JournalEntry,...e?[A.Shipment,A.PurchaseReceipt,A.StockMovement]:[]].map(r=>{var o;return{label:(o=t.schemaMap[r])==null?void 0:o.label,group:"Create",action:Kv(t,r),schemaName:r}}),i=[{label:b`Sales Payment`,schemaName:A.Payment,create:ol.SalesPayments},{label:b`Purchase Payment`,schemaName:A.Payment,create:ol.PurchasePayments},{label:b`Customer`,schemaName:A.Party,create:ol.Customers},{label:b`Supplier`,schemaName:A.Party,create:ol.Suppliers},{label:b`Party`,schemaName:A.Party,create:ol.Party},{label:b`Sales Item`,schemaName:A.Item,create:ol.SalesItems},{label:b`Purchase Item`,schemaName:A.Item,create:ol.PurchaseItems},{label:b`Item`,schemaName:A.Item,create:ol.Items}].map(({label:r,create:o,schemaName:a})=>({label:r,group:"Create",action:Kv(t,a,o),schemaName:a,initData:o}));return[n,i].flat()}function pre(t){var s,r,o,a;const e=!!((r=(s=t.singles)==null?void 0:s.AccountingSettings)!=null&&r.gstin),n=!!((a=(o=t.singles)==null?void 0:o.AccountingSettings)!=null&&a.enableInventory);return Object.keys(Hu).filter(l=>{const c=Hu[l];return!(c.isInventory&&!n||c.title.startsWith("GST")&&!e)}).map(l=>({label:Hu[l].title,route:`/report/${l}`,group:"Report"}))}function mre(t){var s,r,o,a,l;let e=[A.Account,A.JournalEntry,A.PurchaseInvoice,A.SalesInvoice,A.Tax,A.UOM,A.Address,A.AccountingLedgerEntry,A.Currency,A.NumberSeries,A.PrintTemplate];(s=t.doc.singles.AccountingSettings)!=null&&s.enableInventory&&e.push(A.StockMovement,A.Shipment,A.PurchaseReceipt,A.Location,A.StockLedgerEntry),(r=t.doc.singles.AccountingSettings)!=null&&r.enablePriceList&&e.push(A.PriceList),(o=t.singles.InventorySettings)!=null&&o.enableBatches&&e.push(A.Batch),(a=t.singles.InventorySettings)!=null&&a.enableSerialNumber&&e.push(A.SerialNumber),(l=t.doc.singles.AccountingSettings)!=null&&l.enableFormCustomization&&e.push(A.CustomForm),e=Object.keys(t.schemaMap);const n=e.map(c=>t.schemaMap[c]).filter(c=>c&&!c.isChild&&!c.isSingle).map(c=>({label:c.label,route:`/list/${c.name}`,group:"List"})),i=[{label:b`Customers`,route:`/list/Party/${b`Customers`}`,filters:ms.Customers},{label:b`Suppliers`,route:`/list/Party/${b`Suppliers`}`,filters:ms.Suppliers},{label:b`Party`,route:`/list/Party/${b`Party`}`,filters:ms.Party},{label:b`Sales Items`,route:`/list/Item/${b`Sales Items`}`,filters:ms.SalesItems},{label:b`Sales Payments`,route:`/list/Payment/${b`Sales Payments`}`,filters:ms.SalesPayments},{label:b`Purchase Items`,route:`/list/Item/${b`Purchase Items`}`,filters:ms.PurchaseItems},{label:b`Items`,route:`/list/Item/${b`Items`}`,filters:ms.Items},{label:b`Purchase Payments`,route:`/list/Payment/${b`Purchase Payments`}`,filters:ms.PurchasePayments}].map(c=>{const u=c.label,h=encodeURI(`${c.route}?filters=${JSON.stringify(c.filters)}`);return{label:u,route:h,group:"List"}});return[n,i].flat()}function gre(){return[{label:b`Dashboard`,route:"/",group:"Page"},{label:b`Chart of Accounts`,route:"/chart-of-accounts",group:"Page"},{label:b`Import Wizard`,route:"/import-wizard",group:"Page"},{label:b`Settings`,route:"/settings",group:"Page"}]}function yre(t){return[mre(t),fre(t),pre(t),gre()].flat().map(e=>(e.route&&!e.action&&(e.action=async()=>{await St(e.route)}),e))}class Ore{constructor(e){this._obsSet=!1,this.numSearches=0,this.recentKey="searchRecents",this.priorityMap={[A.SalesInvoice]:125,[A.PurchaseInvoice]:100,[A.Payment]:75,[A.StockMovement]:75,[A.Shipment]:75,[A.PurchaseReceipt]:75,[A.Item]:50,[A.Party]:50,[A.JournalEntry]:50},this.filters={groupFilters:{List:!0,Report:!0,Create:!0,Page:!0,Docs:!0,Recent:!0},schemaFilters:{},skipTables:!1,skipTransactions:!1},this._intermediate={suggestions:[]},this.maxRecentItems=10,this.recentExpiryDays=30,this.fyo=e,this.keywords={},this.searchables={},this._nonDocSearchList=yre(e)}_loadAndCleanRecentItems(){try{const e=localStorage.getItem(this.recentKey);return e?JSON.parse(e):[]}catch{return[]}}_saveRecentItems(e){localStorage.setItem(this.recentKey,JSON.stringify(e))}addToRecent(e){const n=this._loadAndCleanRecentItems(),i={label:e.label,group:e.group,timestamp:Date.now()};"route"in e&&e.route?i.route=e.route:e.group==="Docs"?i.schemaName=e.schemaLabel:e.group==="Create"&&(i.schemaName=e.schemaName,i.initData=e.initData);const s=[i,...n.filter(r=>r.label!==i.label)].slice(0,this.maxRecentItems);this._saveRecentItems(s)}getRecentItems(e){try{const n=this._loadAndCleanRecentItems();let i=n;if(e){const r=e.toLowerCase();i=n.filter(o=>o.label.toLowerCase().includes(r)||o.group.toLowerCase().includes(r))}return i.map(r=>({label:r.label,group:"Recent",action:()=>this._executeRecentAction(r),route:r.route}))}catch{return[]}}_executeRecentAction(e){e.route?St(e.route):e.schemaName&&e.group==="Create"?Kv(this.fyo,e.schemaName,e.initData)():e.schemaName?this._openDocList(e.schemaName):e.reportName&&this._openReport(e.reportName)}_openDocList(e){const n=`/list/${e}`;St(n)}_openReport(e){const n=`/report/${e}`;St(n)}get skipTables(){let e=!0;for(const n of Object.values(this.searchables))n.isChild&&e&&(e=!this.filters.schemaFilters[n.schemaName]);return e}get skipTransactions(){let e=!0;for(const n of Object.values(this.searchables))n.isSubmittable&&e&&(e=!this.filters.schemaFilters[n.schemaName]);return e}set(e,n){e in this.filters.groupFilters?this.filters.groupFilters[e]=n:e in this.searchables?(this.filters.schemaFilters[e]=n,this.filters.skipTables=this.skipTables,this.filters.skipTransactions=this.skipTransactions):e==="skipTables"?(Object.values(this.searchables).filter(({isChild:i})=>i).forEach(({schemaName:i})=>{this.filters.schemaFilters[i]=!n}),this.filters.skipTables=n):e==="skipTransactions"&&(Object.values(this.searchables).filter(({isSubmittable:i})=>i).forEach(({schemaName:i})=>{this.filters.schemaFilters[i]=!n}),this.filters.skipTransactions=n),this._setIntermediate([])}async initializeKeywords(){this._setSearchables(),await this.updateKeywords(),this._setDocObservers(),this._setSchemaFilters(),this._groupLabelMap=yM(),this._setFilterDefaults()}_setFilterDefaults(){Object.values(this.searchables).filter(n=>n.isChild).map(n=>{var i;return((i=this.keywords[n.schemaName])==null?void 0:i.length)??0}).reduce((n,i)=>n+i,0)>2e3&&this.set("skipTables",!0)}_setSchemaFilters(){for(const e in this.searchables)this.filters.schemaFilters[e]=!0}async updateKeywords(){for(const e of Object.values(this.searchables)){if(!e.needsUpdate)continue;const n={fields:[e.fields,e.meta].flat(),order:"desc"};e.isChild||(n.orderBy="modified");const i=await this.fyo.db.getAllRaw(e.schemaName,n);this._setKeywords(i,e),this.searchables[e.schemaName].needsUpdate=!1}}_searchSuggestions(e){var s;const n=[];for(const r of this._intermediate.suggestions){const o=r.label,a=r.schemaLabel||((s=this._groupLabelMap)==null?void 0:s[r.group]),l=r.more??[],c=[o,l,a].flat().filter(Boolean),{isMatch:u,distance:h}=this._getMatchAndDistance(e,c);u&&n.push({si:r,distance:h})}n.sort((r,o)=>r.distance-o.distance);const i=n.map(r=>r.si);return this._setIntermediate(i,e),i}_shouldUseSuggestions(e){if(!e)return!1;const{suggestions:n,previousInput:i}=this._intermediate;return!(!(n!=null&&n.length)||!i||!e.startsWith(i))}_setIntermediate(e,n){this.numSearches=e.length,this._intermediate.suggestions=e,this._intermediate.previousInput=n}search(e){if(this._shouldUseSuggestions(e))return this._searchSuggestions(e);this._setIntermediate([]);const i=this._getGroupedKeywords(),s=Object.keys(i);s.includes("0")||s.push("0"),s.sort((a,l)=>kn(l)-kn(a));const r=[];if((!e||e.startsWith("#")||e.toLowerCase().startsWith("recent"))&&this.filters.groupFilters.Recent){const a=e==null?void 0:e.replace(/^#|recent/gi,"").trim(),l=this.getRecentItems(a);l.length>0&&r.push(...l)}for(const a of s){const l=i[a]??[];this._pushDocSearchItems(l,r,e),a==="0"&&this._pushNonDocSearchItems(r,e)}return this._setIntermediate(r,e),r}_pushDocSearchItems(e,n,i){if(!i||!this.filters.groupFilters.Docs)return;const s=this._getSubSortedArray(e,i);n.push(...s)}_pushNonDocSearchItems(e,n){const i=this._nonDocSearchList.filter(r=>this.filters.groupFilters[r.group]),s=this._getSubSortedArray(i,n);e.push(...s)}_getSubSortedArray(e,n){const i=[];for(const s of e){const r=this._getSubArrayItem(s,n);r&&i.push(r)}return i.sort((s,r)=>s.distance-r.distance),i.map(({item:s})=>s)}_getSubArrayItem(e,n){return bre(e)?this._getSubArrayItemFromSearchItem(e,n):n?this._getSubArrayItemFromKeyword(e,n):null}_getSubArrayItemFromSearchItem(e,n){if(!n)return{item:e,distance:0};const i=this._getValueListFromSearchItem(e).filter(Boolean),{isMatch:s,distance:r}=this._getMatchAndDistance(n,i);return s?{item:e,distance:r}:null}_getValueListFromSearchItem({label:e,group:n}){return[e,n]}_getSubArrayItemFromKeyword(e,n){const i=this._getValueListFromKeyword(e).filter(Boolean),{isMatch:s,distance:r}=this._getMatchAndDistance(n,i);return s?{item:this._getDocSearchItemFromKeyword(e),distance:r}:null}_getValueListFromKeyword({values:e,meta:n}){const i=n.schemaName;return[e,i].flat()}_getMatchAndDistance(e,n){let i=Number.MAX_SAFE_INTEGER;for(const s of e.split(" ").filter(Boolean)){const r=this._getInternalMatch(s,n);if(!r.isMatch)return{isMatch:!1,distance:Number.MAX_SAFE_INTEGER};i=r.distance<i?r.distance:i}return{isMatch:!0,distance:i}}_getInternalMatch(e,n){let i=!1,s=Number.MAX_SAFE_INTEGER;for(const r of n){const o=L1(e,r);i||(i=o.isMatch),o.distance<s&&(s=o.distance)}return{isMatch:i,distance:s}}_getDocSearchItemFromKeyword(e){var r;const n=e.meta.schemaName,i=((r=this.fyo.schemaMap[n])==null?void 0:r.label)??n,s=this._getRouteFromKeyword(e);return{label:e.values[0],schemaLabel:i,more:e.values.slice(1),group:"Docs",action:async()=>{await St(s)}}}_getRouteFromKeyword(e){const{parent:n,parentSchemaName:i,schemaName:s}=e.meta;return n&&i?$s(i,n):$s(s,e.values[0])}_getGroupedKeywords(){const e=[],n=Object.keys(this.keywords);for(const i of n){const s=this.searchables[i];!this.filters.schemaFilters[i]||!this.filters.groupFilters.Docs||s.isChild&&this.filters.skipTables||s.isSubmittable&&this.filters.skipTransactions||e.push(...this.keywords[i])}return Vi.groupBy(e.flat(),"priority")}_setSearchables(){var e;for(const n of Object.keys(this.fyo.schemaMap)){const i=this.fyo.schemaMap[n];if(!((e=i==null?void 0:i.keywordFields)!=null&&e.length)||this.searchables[n])continue;const s=[...i.keywordFields],r=[];i.isChild&&r.push("parent","parentSchemaName"),i.isSubmittable&&r.push("submitted","cancelled"),this.searchables[n]={schemaName:n,fields:s,meta:r,isChild:!!i.isChild,isSubmittable:!!i.isSubmittable,needsUpdate:!0}}}_setDocObservers(){if(!this._obsSet){for(const{schemaName:e}of Object.values(this.searchables))this.fyo.doc.observer.on(`sync:${e}`,()=>{this.searchables[e].needsUpdate=!0}),this.fyo.doc.observer.on(`delete:${e}`,()=>{this.searchables[e].needsUpdate=!0});this._obsSet=!0}}_setKeywords(e,n){if(e!=null&&e.length){this.keywords[n.schemaName]=[];for(const i of e){const s={values:[],meta:{},priority:0};this._setKeywordValues(i,n,s),this._setMeta(i,n,s),this.keywords[n.schemaName].push(s)}this._setPriority(n)}}_setKeywordValues(e,n,i){var s;for(const r of n.fields){let o=e[r];const a=this.fyo.getField(n.schemaName,r),{options:l}=a;l&&(o=((s=l.find(c=>c.value===o))==null?void 0:s.label)??o),i.values.push(o??"")}}_setMeta(e,n,i){for(const s of n.meta){const r=e[s];typeof r=="number"?i.meta[s]=!!r:typeof r=="string"&&(i.meta[s]=r)}i.meta.schemaName=n.schemaName,i.meta.parent&&i.values.unshift(i.meta.parent)}_setPriority(e){const n=this.keywords[e.schemaName]??[],i=this.priorityMap[e.schemaName]??0;for(const s of n)s.priority+=i,s.meta.submitted&&(s.priority+=25),s.meta.cancelled&&(s.priority-=200),e.isChild&&(s.priority-=150)}}function bre(t){return!!t.group}const vre=ve({props:{openModal:{default:!1,type:Boolean}},emits:["closemodal"],setup(){const t="Modal-"+Math.random().toString(36).slice(2,6);return{shortcuts:st(Is),context:t}},watch:{openModal(t){var e,n;t?(e=this.shortcuts)==null||e.set(this.context,["Escape"],()=>{this.$emit("closemodal")}):(n=this.shortcuts)==null||n.delete(this.context)}}});function wre(t,e,n,i,s,r){return w(),H(Ir,null,{default:U(()=>[t.openModal?(w(),P("div",{key:0,class:"backdrop z-20 flex justify-center items-center",onClick:e[1]||(e[1]=o=>t.$emit("closemodal"))},[v("div",Kc({class:"bg-white dark:bg-gray-850 rounded-lg shadow-2xl border dark:border-gray-800 overflow-hidden inner"},t.$attrs,{onClick:e[0]||(e[0]=_i(()=>{},["stop"]))}),[Ge(t.$slots,"default",{},void 0,!0)],16)])):B("",!0)]),_:3})}const di=ne(vre,[["render",wre],["__scopeId","data-v-e260f658"]]),G4="SearchBar",Sre=ve({components:{Modal:di,Button:At},setup(){return{searcher:st(sM),shortcuts:st(Is)}},data(){return{idx:0,searchGroups:og,openModal:!1,inputValue:"",showMore:!1,limit:50,allowedLimits:[50,100,500,-1]}},computed:{groupLabelMap(){return yM()},schemaFilters(){var i;const t=((i=this.searcher)==null?void 0:i.searchables)??{};return Object.keys(t).map(s=>{const r=N.schemaMap[s];if(!r)return;let o=1;return r.isSubmittable?o=0:r.isChild&&(o=2),{value:s,label:r.label,index:o}}).filter(Boolean).sort((s,r)=>s.index-r.index)},groupColorMap(){return{Docs:"blue",Create:"green",List:"teal",Report:"yellow",Page:"orange",Recent:"purple"}},groupColorClassMap(){return og.reduce((t,e)=>(t[e]=jf(this.groupColorMap[e]),t),{})},suggestions(){if(!this.searcher)return[];const t=this.searcher.search(this.inputValue);return this.limit===-1?t:t.slice(0,this.limit)}},async mounted(){N.store.isDevelopment&&(window.search=this),this.openModal=!1},activated(){this.setShortcuts(),this.openModal=!1},deactivated(){var t;(t=this.shortcuts)==null||t.delete(G4)},methods:{openDocs(){ipc.openLink("https://docs.frappe.io/"+Xo.Search)},getShortcuts(){const t=i=>()=>this.openModal&&i(),n=[{shortcut:"KeyK",callback:(i=>()=>!this.openModal&&i())(()=>this.open())}];for(const i in og)n.push({shortcut:`Digit${Number(i)+1}`,callback:t(()=>{const s=og[i];if(!this.searcher)return;const r=this.searcher.filters.groupFilters[s];typeof r=="boolean"&&this.searcher.set(s,!r)})});return n},setShortcuts(){for(const{shortcut:t,callback:e}of this.getShortcuts())this.shortcuts.pmod.set(G4,[t],e)},open(){var t;this.openModal=!0,(t=this.searcher)==null||t.updateKeywords(),Bi(()=>{var e;(e=this.$refs.input)==null||e.focus()})},close(){this.openModal=!1,this.reset()},reset(){this.inputValue=""},up(){this.idx=Math.max(this.idx-1,0),this.scrollToHighlighted()},down(){this.idx=Math.max(Math.min(this.idx+1,this.suggestions.length-1),0),this.scrollToHighlighted()},select(t){var n;this.idx=t??this.idx;const e=this.suggestions[this.idx];e!=null&&e.action&&((n=this.searcher)==null||n.addToRecent(e),e.action()),this.close()},scrollToHighlighted(){var n;const t=`[data-index="search-suggestion-${this.idx}"]`,e=(n=document.querySelectorAll(t))==null?void 0:n[0];e==null||e.scrollIntoView({block:"nearest"})},getGroupFilterButtonClass(t){if(!this.searcher)return"";const e=this.searcher.filters.groupFilters[t],n=this.groupColorMap[t];return e?`${jf(n)} border-${n}-100 dark:border-${n}-800`:`text-${n}-600 dark:text-${n}-400 border-${n}-100 dark:border-${n}-800`}}}),Cre={class:"w-form"},Are={class:"p-1"},xre=["placeholder"],kre={key:0,class:"dark:border-gray-800"},Pre={style:`max-height: ${49*6-1}px`,class:"overflow-auto custom-scroll custom-scroll-thumb2"},Tre=["data-index","onClick"],$re={class:"flex w-full justify-between px-3 items-center",style:{height:"var(--h-row-mid)"}},Dre={class:"flex items-center"},Mre={key:0,class:"text-gray-600 dark:text-gray-400 text-sm ms-3"},Ire={key:0,class:"dark:border-gray-800"},Rre={class:"m-1 flex justify-between flex-col gap-2 text-sm select-none"},_re={class:"flex justify-between"},Ere={class:"flex gap-1"},Qre=["onClick"],Nre={key:0,class:"-mt-1"},Lre={class:"flex gap-1 text-gray-800 dark:text-gray-200"},Fre=["onClick"],Bre={class:"flex mt-1 gap-1 text-blue-500 dark:text-blue-100 flex-wrap"},Vre=["onClick"],jre={class:"flex text-sm text-gray-500 justify-between items-baseline"},zre={class:"flex gap-4"},Zre={key:0,class:"ms-auto"},qre={key:1,class:"border border-gray-100 dark:border-gray-875 rounded flex justify-self-end ms-2"},Xre=["onClick"];function Wre(t,e,n,i,s,r){const o=Q("feather-icon"),a=Q("Button"),l=Q("Modal");return w(),P(le,null,[v("div",null,[_(a,{class:"px-3 py-2 rounded-r-none dark:bg-gray-900",padding:!1,onClick:t.open},{default:U(()=>[_(o,{name:"search",class:"w-4 h-4 text-gray-700 dark:text-gray-300"})]),_:1},8,["onClick"])]),_(l,{"open-modal":t.openModal,"set-close-listener":!1,onClosemodal:t.close},{default:U(()=>{var c,u;return[v("div",Cre,[v("div",Are,[mn(v("input",{ref:"input","onUpdate:modelValue":e[0]||(e[0]=h=>t.inputValue=h),type:"search",autocomplete:"off",spellcheck:"false",placeholder:t.t`Type to search...`,class:"bg-gray-100 dark:bg-gray-800 text-2xl focus:outline-none w-full placeholder-gray-500 text-gray-900 dark:text-gray-100 rounded-md p-3",onKeydown:[e[1]||(e[1]=pn((...h)=>t.up&&t.up(...h),["up"])),e[2]||(e[2]=pn((...h)=>t.down&&t.down(...h),["down"])),e[3]||(e[3]=pn(()=>t.select(),["enter"])),e[4]||(e[4]=pn((...h)=>t.close&&t.close(...h),["esc"]))]},null,40,xre),[[qo,t.inputValue]])]),t.suggestions.length?(w(),P("hr",kre)):B("",!0),v("div",Pre,[(w(!0),P(le,null,Pe(t.suggestions,(h,p)=>(w(),P("div",{key:`${p}-${h.label}`,"data-index":`search-suggestion-${p}`,class:ee(["hover:bg-gray-50 dark:hover:bg-gray-875 cursor-pointer",t.idx===p?"border-gray-700 dark:border-gray-200 bg-gray-50 dark:bg-gray-875 border-s-4":""]),onClick:m=>t.select(p)},[v("div",$re,[v("div",Dre,[v("p",{class:ee(t.idx===p?"text-gray-900 dark:text-gray-100":"text-gray-700 dark:text-gray-400"),style:qe(t.idx===p?"margin-left: -4px":"")},R(h.label),7),h.group==="Docs"?(w(),P("p",Mre,R(h.more.filter(Boolean).join(", ")),1)):B("",!0)]),v("p",{class:ee(["text-sm text-end justify-self-end",`text-${t.groupColorMap[h.group]}-500`])},R(h.group==="Docs"?h.schemaLabel:t.groupLabelMap[h.group]),3)]),p!==t.suggestions.length-1?(w(),P("hr",Ire)):B("",!0)],10,Tre))),128))]),e[8]||(e[8]=v("hr",{class:"dark:border-gray-800"},null,-1)),v("div",Rre,[v("div",_re,[v("div",Ere,[(w(!0),P(le,null,Pe(t.searchGroups,h=>(w(),P("button",{key:h,class:ee(["border dark:border-gray-800 px-1 py-0.5 rounded-lg",t.getGroupFilterButtonClass(h)]),onClick:p=>t.searcher.set(h,!t.searcher.filters.groupFilters[h])},R(t.groupLabelMap[h]),11,Qre))),128))]),v("button",{class:"hover:text-gray-900 dark:hover:text-gray-25 py-0.5 rounded text-gray-700 dark:text-gray-300",onClick:e[5]||(e[5]=h=>t.showMore=!t.showMore)},R(t.showMore?t.t`Less Filters`:t.t`More Filters`),1)]),t.showMore?(w(),P("div",Nre,[v("div",Lre,[(w(),P(le,null,Pe(["skipTables","skipTransactions"],h=>{var p;return v("button",{key:h,class:ee(["border dark:border-gray-800 px-1 py-0.5 rounded-lg",{"bg-gray-200":(p=t.searcher)==null?void 0:p.filters[h]}]),onClick:m=>{var y,O;return(O=t.searcher)==null?void 0:O.set(h,!((y=t.searcher)!=null&&y.filters[h]))}},R(h==="skipTables"?t.t`Skip Child Tables`:t.t`Skip Transactions`),11,Fre)}),64))]),v("div",Bre,[(w(!0),P(le,null,Pe(t.schemaFilters,h=>{var p;return w(),P("button",{key:h.value,class:ee(["border px-1 py-0.5 rounded-lg border-blue-100 dark:border-blue-800 whitespace-nowrap",{"bg-blue-100 dark:bg-blue-800":(p=t.searcher)==null?void 0:p.filters.schemaFilters[h.value]}]),onClick:m=>{var y,O;return(O=t.searcher)==null?void 0:O.set(h.value,!((y=t.searcher)!=null&&y.filters.schemaFilters[h.value]))}},R(h.label),11,Vre)}),128))])])):B("",!0),v("div",jre,[v("div",zre,[v("p",null," "+R(t.t`Navigate`),1),v("p",null," "+R(t.t`Select`),1),v("p",null,[e[7]||(e[7]=v("span",{class:"tracking-tighter"},"esc",-1)),He(" "+R(t.t`Close`),1)]),v("button",{class:"flex items-center hover:text-gray-800 dark:hover:text-gray-300",onClick:e[6]||(e[6]=(...h)=>t.openDocs&&t.openDocs(...h))},[_(o,{name:"help-circle",class:"w-4 h-4 me-1"}),He(" "+R(t.t`Help`),1)])]),(c=t.searcher)!=null&&c.numSearches?(w(),P("p",Zre,R(t.t`${t.suggestions.length} out of ${t.searcher.numSearches}`),1)):B("",!0),(((u=t.searcher)==null?void 0:u.numSearches)??0)>50?(w(),P("div",qre,[(w(!0),P(le,null,Pe(t.allowedLimits.filter(h=>{var p;return h<(((p=t.searcher)==null?void 0:p.numSearches)??0)||h===-1}),h=>(w(),P("button",{key:h+"-count",class:ee(["w-9",t.limit===h?"bg-gray-100 dark:bg-gray-875 rounded":""]),onClick:p=>t.limit=Number(h)},R(h===-1?t.t`All`:h),11,Xre))),128))])):B("",!0)])])])]}),_:1},8,["open-modal","onClosemodal"])],64)}const Gre=ne(Sre,[["render",Wre],["__scopeId","data-v-94d7c643"]]),U4="PageHeaderNavGroup",Ure=ve({components:{SearchBar:Gre},setup(){return{historyState:wv,backlink:Cn(null),shortcuts:st(Is)}},computed:{hasBack(){return!!history.back},hasForward(){return!!history.forward}},activated(){var t;(t=this.shortcuts)==null||t.shift.set(U4,["Backspace"],()=>{var e;(e=this.backlink)==null||e.click()}),window.ng=this},deactivated(){var t;(t=this.shortcuts)==null||t.delete(U4)}}),Hre={class:"flex"};function Yre(t,e,n,i,s,r){const o=Q("SearchBar"),a=Q("feather-icon");return w(),P("div",Hre,[_(o),v("a",{ref:"backlink",class:ee(["nav-link border-l border-r border-white dark:border-gray-850 dark:bg-gray-900",t.historyState.back?"text-gray-700 dark:text-gray-300 cursor-pointer":"text-gray-400 dark:text-gray-700"]),onClick:e[0]||(e[0]=l=>t.$router.back())},[_(a,{name:"chevron-left",class:"w-4 h-4"})],2),v("a",{class:ee(["nav-link rounded-md rounded-l-none dark:bg-gray-900",t.historyState.forward?"text-gray-700 dark:text-gray-400 cursor-pointer":"text-gray-400 dark:text-gray-700"]),onClick:e[1]||(e[1]=l=>t.$router.forward())},[_(a,{name:"chevron-right",class:"w-4 h-4"})],2)])}const Kre=ne(Ure,[["render",Yre],["__scopeId","data-v-34c3fc62"]]),Jre=ve({components:{Transition:Ir,PageHeaderNavGroup:Kre},props:{title:{type:String,default:""},border:{type:Boolean,default:!0},searchborder:{type:Boolean,default:!0}},setup(){return{showSidebar:Fo,languageDirection:st(Ep)}},computed:{showBorder(){return!!this.$slots.default&&this.searchborder},spacerClass(){return this.showSidebar?"":this.border?"w-tl me-4 border-e":"w-tl me-4"}}}),eoe={key:0,class:"text-xl font-semibold select-none whitespace-nowrap dark:text-white"},toe={class:"flex items-stretch window-no-drag gap-4"};function noe(t,e,n,i,s,r){const o=Q("PageHeaderNavGroup");return w(),P("div",{class:ee(["px-4 flex justify-between items-center h-row-largest flex-shrink-0 dark:bg-gray-875",[t.border?"border-b dark:border-gray-800":"",t.platform!=="Windows"?"window-drag":""]])},[_(Ir,{name:"spacer",class:"border-none"},{default:U(()=>[!t.showSidebar&&t.platform==="Mac"&&t.languageDirection!=="rtl"?(w(),P("div",{key:0,class:ee(["h-full",t.spacerClass])},null,2)):B("",!0)]),_:1}),v("div",{class:ee(["flex items-center window-no-drag gap-4 me-auto",t.platform==="Mac"&&t.languageDirection==="rtl"?"me-18":""])},[_(o),t.title?(w(),P("h1",eoe,R(t.title),1)):B("",!0),v("div",toe,[Ge(t.$slots,"left",{},void 0,!0)])],2),v("div",{class:ee(["flex items-stretch window-no-drag gap-2 ms-auto",t.platform==="Mac"&&t.languageDirection==="rtl"?"me-18":""])},[Ge(t.$slots,"default",{},void 0,!0)],2)],2)}const Nr=ne(Jre,[["render",noe],["__scopeId","data-v-fd026c10"]]),ioe=ve({components:{Button:At,PageHeader:Nr},props:{darkMode:{type:Boolean,default:!1}},setup(){return{languageDirection:st(Ep)}},data(){return{isAllCollapsed:!0,isAllExpanded:!1,root:null,accounts:[],schemaName:"Account",newAccountName:"",insertingAccount:!1,totals:{},refetchTotals:!1,settings:null}},computed:{allAccounts(){const t=[];return function e(n,i,s){for(let r=0;r<n.length;r++){const o=n[r];o.level=i,o.location=[...s,r],t.push(o),o.children!=null&&o.expanded&&e(o.children,i+1,o.location)}}(this.accounts,0,[]),t}},async mounted(){await this.setTotalDebitAndCredit(),N.doc.observer.on("sync:AccountingLedgerEntry",()=>{this.refetchTotals=!0})},async activated(){await this.fetchAccounts(),N.store.isDevelopment&&(window.coa=this),Ai.value=Xo.ChartOfAccounts,this.refetchTotals&&(await this.setTotalDebitAndCredit(),this.refetchTotals=!1)},deactivated(){Ai.value=""},methods:{async expand(){await this.toggleAll(this.accounts,!0),this.isAllCollapsed=!1,this.isAllExpanded=!0},async collapse(){await this.toggleAll(this.accounts,!1),this.isAllExpanded=!1,this.isAllCollapsed=!0},async toggleAll(t,e){Array.isArray(t)||(await this.toggle(t,e),t=t.children??[]);for(const n of t)await this.toggleAll(n,e)},async toggle(t,e){t.expanded===e||!t.isGroup||await this.toggleChildren(t)},getBalance(t){const e=this.totals[t.name];if(!e)return 0;const{totalCredit:n,totalDebit:i}=e;return zv(t.rootType)?n-i:i-n},getBalanceString(t){const e=zv(t.rootType)?b`Cr.`:b`Dr.`,n=this.getBalance(t);return`${N.format(n,"Currency")} ${e}`},async setTotalDebitAndCredit(){const t=await this.fyo.db.getTotalCreditAndDebit();this.totals=er(t,"account")},async fetchAccounts(){var n,i,s;this.settings=((n=N.models[A.Account])==null?void 0:n.getTreeSettings(N))??null;const t=((i=this.fyo.singles.SystemSettings)==null?void 0:i.currency)??"",e=await((s=this.settings)==null?void 0:s.getRootLabel())??"";this.root={label:e,balance:0,currency:t},this.accounts=await this.getChildren()},async onClick(t){let e=!t.isGroup;if(t.isGroup&&(e=!await this.toggleChildren(t)),t.isGroup&&t.expanded&&(this.isAllCollapsed=!1),t.isGroup&&!t.expanded&&(this.isAllExpanded=!1),!e)return;const n=await N.doc.getDoc(A.Account,t.name);this.setOpenAccountDocListener(n,t),await sS({doc:n})},setOpenAccountDocListener(t,e,n){t.hasListener("afterDelete")||t.once("afterDelete",()=>{this.removeAccount(t.name,e,n)})},async deleteAccount(t){if(!await this.canDeleteAccount(t))return;const n=await N.doc.getDoc(A.Account,t.name);this.setOpenAccountDocListener(n,t),await hO(n,!1)},async canDeleteAccount(t){var e,n;return t.isGroup&&!((e=t.children)!=null&&e.length)&&await this.fetchChildren(t),(n=t.children)!=null&&n.length?(await Qn({type:"error",title:b`Cannot Delete Account`,detail:b`${t.name} has linked child accounts.`}),!1):!0},removeAccount(t,e,n){if(e==null&&n==null||(e==null&&n&&(e=n.children.find(a=>(a==null?void 0:a.name)===t)),e==null))return;const i=e.location.slice(1).map(a=>Number(a));let s=Number(e.location[0]),r=this.accounts[s],o=this.accounts[s].children;for(;i.length>1;)s=i.shift(),r=o[s],o=o[s].children;s=i[0],o[s].name===t&&(r.children=IH(o,s))},async toggleChildren(t){return await this.fetchChildren(t)?(t.expanded=!t.expanded,t.expanded||(t.addingAccount=!1,t.addingGroupAccount=!1),!0):!1},async fetchChildren(t,e=!1){var n;return(t.children==null||e)&&(t.children=await this.getChildren(t.name)),!!((n=t==null?void 0:t.children)!=null&&n.length)},async getChildren(t=null){return(await N.db.getAll(A.Account,{filters:{parentAccount:t},fields:["name","parentAccount","isGroup","rootType","accountType"],orderBy:"name",order:"asc"})).map(n=>(n.expanded=!1,n.addingAccount=!1,n.addingGroupAccount=!1,n))},async addAccount(t,e){t.expanded||(await this.fetchChildren(t),t.expanded=!0);let n=e==="addingAccount"?"addingGroupAccount":"addingAccount";t[e]=!0,t[n]=!1,await Bi(),this.$refs[t.name][0].focus()},cancelAddingAccount(t){t.addingAccount=!1,t.addingGroupAccount=!1,this.newAccountName=""},async createNewAccount(t,e){this.insertingAccount=!0;const n=this.newAccountName.trim(),i=N.doc.getNewDoc("Account");try{let{name:s,rootType:r,accountType:o}=t;await i.set({name:n,parentAccount:s,rootType:r,accountType:o,isGroup:e}),await i.sync(),t.addingAccount=!1,t.addingGroupAccount=!1,await this.fetchChildren(t,!0),await sS({doc:i}),this.setOpenAccountDocListener(i,void 0,t),this.insertingAccount=!1,this.newAccountName=""}catch(s){this.insertingAccount=!1,await mo(s,i)}},isQuickEditOpen(t){let{edit:e,schemaName:n,name:i}=this.$route.query;return!!(e&&n==="Account"&&i===t.name)},getIconComponent(t,e){let n=this.darkMode?pt.gray[600]:pt.gray[400],i=this.darkMode?pt.gray[400]:pt.gray[700],s={"Application of Funds (Assets)":`<svg class="w-4 h-4" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
            <g fill="none" fill-rule="evenodd">
              <path d="M15.333 5.333H.667A.667.667 0 000 6v9.333c0 .368.299.667.667.667h14.666a.667.667 0 00.667-.667V6a.667.667 0 00-.667-.667zM8 12.667a2 2 0 110-4 2 2 0 010 4z" fill="${i}" fill-rule="nonzero"/>
              <path d="M14 2.667V4H2V2.667h12zM11.333 0v1.333H4.667V0h6.666z" fill="${n}"/>
            </g>
          </svg>`,Expenses:`<svg class="w-4 h-4" viewBox="0 0 14 16" xmlns="http://www.w3.org/2000/svg">
            <path d="M13.668 0v15.333a.666.666 0 01-.666.667h-12a.666.666 0 01-.667-.667V0l2.667 2 2-2 2 2 2-2 2 2 2.666-2zM9.964 4.273H4.386l-.311 1.133h1.62c.933 0 1.474.362 1.67.963H4.373l-.298 1.053h3.324c-.175.673-.767 1.044-1.705 1.044H4.182l.008.83L7.241 13h1.556v-.072L6.01 9.514c1.751-.106 2.574-.942 2.748-2.092h.904l.298-1.053H8.75a2.375 2.375 0 00-.43-1.044l1.342.009.302-1.061z" fill="${i}" fill-rule="evenodd"/>
          </svg>`,Income:`<svg class="w-4 h-4" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
            <g fill="none" fill-rule="evenodd">
              <path d="M16 12.859V14c0 1.105-2.09 2-4.667 2-2.494 0-4.531-.839-4.66-1.894L6.667 14v-1.141C7.73 13.574 9.366 14 11.333 14c1.968 0 3.602-.426 4.667-1.141zm0-3.334v1.142c0 1.104-2.09 2-4.667 2-2.494 0-4.531-.839-4.66-1.894l-.006-.106V9.525c1.064.716 2.699 1.142 4.666 1.142 1.968 0 3.602-.426 4.667-1.142zm-4.667-4.192c2.578 0 4.667.896 4.667 2 0 1.105-2.09 2-4.667 2s-4.666-.895-4.666-2c0-1.104 2.089-2 4.666-2z" fill="${i}"/>
              <path d="M0 10.859C1.065 11.574 2.7 12 4.667 12l.337-.005.33-.013v1.995c-.219.014-.44.023-.667.023-2.495 0-4.532-.839-4.66-1.894L0 12v-1.141zm0-2.192V7.525c1.065.716 2.7 1.142 4.667 1.142l.337-.005.33-.013v1.995c-.219.013-.44.023-.667.023-2.495 0-4.532-.839-4.66-1.894L0 8.667V7.525zm0-4.475c1.065.715 2.7 1.141 4.667 1.141.694 0 1.345-.056 1.946-.156-.806.56-1.27 1.292-1.278 2.134-.219.013-.441.022-.668.022-2.578 0-4.667-.895-4.667-2zM4.667 0c2.577 0 4.666.895 4.666 2S7.244 4 4.667 4C2.089 4 0 3.105 0 2s2.09-2 4.667-2z" fill="${n}"/>
            </g>
          </svg>`,"Source of Funds (Liabilities)":`<svg class="w-4 h-4" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
            <g fill="none" fill-rule="evenodd">
              <path d="M7.332 11.36l4.666-3.734 2 1.6V.666A.667.667 0 0013.332 0h-12a.667.667 0 00-.667.667v14.666c0 .369.298.667.667.667h6v-4.64zm-4-7.36H11.3v1.333H3.332V4zm2.666 8H3.332v-1.333h2.666V12zM3.332 8.667V7.333h5.333v1.334H3.332z" fill="${i}"/>
              <path d="M15.332 12l-3.334-2.667L8.665 12v3.333c0 .369.298.667.667.667h2v-2h1.333v2h2a.667.667 0 00.667-.667V12z" fill="${n}"/>
            </g>
          </svg>`},r=`<svg class="w-2 h-2" viewBox="0 0 8 8" xmlns="http://www.w3.org/2000/svg">
        <circle stroke="${i}" cx="4" cy="4" r="3.5" fill="none" fill-rule="evenodd"/>
      </svg>`,o=`<svg class="w-3 h-3" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
        <path d="M8.333 3.367L6.333.7H.667A.667.667 0 000 1.367v12a2 2 0 002 2h12a2 2 0 002-2V4.033a.667.667 0 00-.667-.666h-7z" fill="${i}" fill-rule="evenodd"/>
      </svg>`,a=t?o:r;return{template:s[e]||a}},getItemStyle(t){const e={height:"calc(var(--h-row-mid) + 1px)"};return this.languageDirection==="rtl"?e["padding-right"]=`calc(1rem + 2rem * ${t})`:e["padding-left"]=`calc(1rem + 2rem * ${t})`,e},getGroupStyle(t){const e={height:"height: calc(var(--h-row-mid) + 1px)"};return this.languageDirection==="rtl"?e["padding-right"]=`calc(1rem + 2rem * ${t})`:e["padding-left"]=`calc(1rem + 2rem * ${t})`,e}}}),soe={class:"flex flex-col h-full"},roe={key:0,class:"flex-1 flex flex-col overflow-y-auto mb-4 custom-scroll custom-scroll-thumb1"},ooe=["onClick"],aoe={class:"flex items-baseline"},loe={class:"ms-6 hidden group-hover:block"},coe=["onClick"],uoe=["onClick"],doe=["onClick"],hoe={key:0,class:"ms-auto text-base text-gray-800 dark:text-gray-400"},foe={class:"flex ms-4 h-row-mid items-center"},poe=["placeholder","disabled","onKeydown"],moe=["onClick"],goe=["onClick"];function yoe(t,e,n,i,s,r){const o=Q("Button"),a=Q("PageHeader");return w(),P("div",soe,[_(a,{title:t.t`Chart of Accounts`},{default:U(()=>[t.isAllExpanded?B("",!0):(w(),H(o,{key:0,onClick:t.expand},{default:U(()=>[He(R(t.t`Expand`),1)]),_:1},8,["onClick"])),t.isAllCollapsed?B("",!0):(w(),H(o,{key:1,onClick:t.collapse},{default:U(()=>[He(R(t.t`Collapse`),1)]),_:1},8,["onClick"]))]),_:1},8,["title"]),t.root?(w(),P("div",roe,[(w(!0),P(le,null,Pe(t.allAccounts,l=>(w(),P(le,{key:l.name},[v("div",{class:ee(["py-2 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-890 dark:text-gray-25 group flex items-center border-b dark:border-gray-800 flex-shrink-0 pe-4",[l.level!==0?"text-base":"text-lg",t.isQuickEditOpen(l)?"bg-gray-200 dark:bg-gray-900":""]]),style:qe(t.getItemStyle(l.level)),onClick:c=>t.onClick(l)},[(w(),H(ro(t.getIconComponent(!!l.isGroup,l.name)))),v("div",aoe,[v("div",{class:ee(["ms-4",[!l.parentAccount&&"font-semibold"]])},R(l.name),3),v("div",loe,[l.isGroup?(w(),P("button",{key:0,class:"text-xs text-gray-800 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 focus:outline-none",onClick:_i(c=>t.addAccount(l,"addingAccount"),["stop"])},R(t.t`Add Account`),9,coe)):B("",!0),l.isGroup?(w(),P("button",{key:1,class:"ms-3 text-xs text-gray-800 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 focus:outline-none",onClick:_i(c=>t.addAccount(l,"addingGroupAccount"),["stop"])},R(t.t`Add Group`),9,uoe)):B("",!0),v("button",{class:"ms-3 text-xs text-gray-800 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 focus:outline-none",onClick:_i(c=>t.deleteAccount(l),["stop"])},R(l.isGroup?t.t`Delete Group`:t.t`Delete Account`),9,doe)])]),l.isGroup?B("",!0):(w(),P("p",hoe,R(t.getBalanceString(l)),1))],14,ooe),l.addingAccount||l.addingGroupAccount?(w(),P("div",{key:l.name+"-adding-account",class:"px-4 border-b dark:border-gray-800 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-890 group flex items-center text-base",style:qe(t.getGroupStyle(l.level+1))},[(w(),H(ro(t.getIconComponent(l.addingGroupAccount)))),v("div",foe,[mn(v("input",{ref_for:!0,ref:l.name,"onUpdate:modelValue":e[0]||(e[0]=c=>t.newAccountName=c),class:ee(["focus:outline-none bg-transparent dark:placeholder-gray-600 dark:text-gray-400",{"text-gray-600 dark:text-gray-400":t.insertingAccount}]),placeholder:t.t`New Account`,type:"text",disabled:t.insertingAccount,onKeydown:[pn(c=>t.cancelAddingAccount(l),["esc"]),pn(c=>t.createNewAccount(l,l.addingGroupAccount),["enter"])]},null,42,poe),[[qo,t.newAccountName]]),t.insertingAccount?B("",!0):(w(),P("button",{key:0,class:"ms-4 text-xs text-gray-800 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 focus:outline-none",onClick:c=>t.createNewAccount(l,l.addingGroupAccount)},R(t.t`Save`),9,moe)),t.insertingAccount?B("",!0):(w(),P("button",{key:1,class:"ms-4 text-xs text-gray-800 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 focus:outline-none",onClick:c=>t.cancelAddingAccount(l)},R(t.t`Cancel`),9,goe))])],4)):B("",!0)],64))),128))])):B("",!0)])}const Ooe=ne(ioe,[["render",yoe]]),boe=ve({emits:["item-selected"],data(){return{timerId:null,barcode:"",cooldown:""}},mounted(){document.addEventListener("keydown",this.scanListener)},unmounted(){document.removeEventListener("keydown",this.scanListener)},activated(){document.addEventListener("keydown",this.scanListener)},deactivated(){document.removeEventListener("keydown",this.scanListener)},methods:{handleChange(t){const e=t.target;this.selectItem(e.value),e.value=""},async selectItem(t){var s;const e=t.trim();if(!/^[A-Za-z0-9]{12,}$/.test(e))return this.error(this.t`Invalid barcode value ${e}.`);if(this.cooldown===e)return;this.cooldown=e,setTimeout(()=>this.cooldown="",100);const n=await this.fyo.db.getAll("Item",{filters:{barcode:e},fields:["name"]}),i=(s=n==null?void 0:n[0])==null?void 0:s.name;if(!i)return this.error(this.t`Item with barcode ${e} not found.`);this.success(this.t`${i} quantity 1 added.`),this.$emit("item-selected",i)},async scanListener({key:t,code:e}){const n=Number(t),i=e==="Enter";if(!(Number.isNaN(n)&&!i)){if(i)return await this.setItemFromBarcode();this.clearInterval(),this.barcode+=t,this.timerId=setTimeout(async()=>{await this.setItemFromBarcode(),this.barcode=""},20)}},async setItemFromBarcode(){this.barcode.length<12||(await this.selectItem(this.barcode),this.barcode="",this.clearInterval())},clearInterval(){this.timerId!==null&&(clearInterval(this.timerId),this.timerId=null)},error(t){it({type:"error",message:t})},success(t){it({type:"success",message:t})}}}),voe={class:"px-2 w-36 flex items-center border rounded bg-gray-50 dark:text-gray-200 dark:border-gray-800 dark:bg-gray-890 dark:focus-within:bg-gray-900 focus-within:bg-gray-100"},woe=["placeholder"];function Soe(t,e,n,i,s,r){const o=Q("feather-icon");return w(),P("div",voe,[v("input",{ref:"scanner",type:"text",class:"text-base placeholder-gray-600 w-full bg-transparent outline-none",placeholder:t.t`Enter barcode`,onChange:e[0]||(e[0]=(...a)=>t.handleChange&&t.handleChange(...a))},null,40,woe),_(o,{name:"maximize",class:"w-3 h-3 text-gray-600 dark:text-gray-400 cursor-text",onClick:e[1]||(e[1]=()=>t.$refs.scanner.focus())})])}const Coe=ne(boe,[["render",Soe]]),Aoe=ve({props:{disabled:{type:Boolean,default:!1},fromCurrency:{type:String,default:"USD"},toCurrency:{type:String,default:"INR"},exchangeRate:{type:Number,default:75}},emits:["change"],data(){return{fromValue:1,isSwapped:!1}},computed:{left(){return this.isSwapped?this.toCurrency:this.fromCurrency},right(){return this.isSwapped?this.fromCurrency:this.toCurrency}},methods:{swap(){this.isSwapped=!this.isSwapped},rightChange(t){let e=1;t.target instanceof HTMLInputElement&&(e=t.target.value),e=kn(e);let n=e/this.fromValue;this.isSwapped&&(n=this.fromValue/e),this.$emit("change",n)}}}),xoe={class:"flex items-center bg-gray-50 dark:bg-gray-890 dark:border-gray-800 rounded-md text-sm p-1 border"},koe=["disabled"],Poe={class:"dark:text-gray-400"},Toe=["value","disabled"],$oe={class:"dark:text-gray-400"};function Doe(t,e,n,i,s,r){const o=Q("feather-icon");return w(),P("div",xoe,[v("div",{class:ee(["rate-container gap-2",t.disabled?"bg-gray-100 dark:bg-gray-850":"bg-gray-25 dark:bg-gray-890"])},[mn(v("input",{class:"text-right dark:text-gray-400 border-transparent focus:border-gray-500 focus:outline-none dark:focus:ring-1 focus:ring-gray-600 bg-gray-50 border","onUpdate:modelValue":e[0]||(e[0]=a=>t.fromValue=a),type:"number",disabled:t.disabled,min:"0"},null,8,koe),[[qo,t.fromValue]]),v("span",Poe,R(t.left),1)],2),e[3]||(e[3]=v("p",{class:"mx-1 text-gray-600 dark:text-gray-400"},"=",-1)),v("div",{class:ee(["rate-container gap-2",t.disabled?"bg-gray-100 dark:bg-gray-850":"bg-gray-25 dark:bg-gray-890"])},[v("input",{class:"text-right dark:text-gray-400 border-transparent focus:border-gray-500 focus:outline-none dark:focus:ring-1 focus:ring-gray-600 bg-gray-50 border",type:"number",value:t.isSwapped?t.fromValue/t.exchangeRate:t.exchangeRate*t.fromValue,disabled:t.disabled,min:"0",onChange:e[1]||(e[1]=(...a)=>t.rightChange&&t.rightChange(...a))},null,40,Toe),v("span",$oe,R(t.right),1)],2),t.disabled?B("",!0):(w(),P("button",{key:0,class:"bg-green-100 dark:bg-green-600 px-2 ms-1 -me-0.5 h-full border-s dark:border-gray-800",onClick:e[2]||(e[2]=(...a)=>t.swap&&t.swap(...a))},[_(o,{name:"refresh-cw",class:"w-3 h-3 text-gray-600 dark:text-gray-400"})]))])}const Moe=ne(Aoe,[["render",Doe],["__scopeId","data-v-3b06cdf4"]]);var Ps="top",Rr="bottom",_r="right",Ts="left",VC="auto",Qp=[Ps,Rr,_r,Ts],Td="start",Wf="end",Ioe="clippingParents",OM="viewport",Ih="popper",Roe="reference",H4=Qp.reduce(function(t,e){return t.concat([e+"-"+Td,e+"-"+Wf])},[]),bM=[].concat(Qp,[VC]).reduce(function(t,e){return t.concat([e,e+"-"+Td,e+"-"+Wf])},[]),_oe="beforeRead",Eoe="read",Qoe="afterRead",Noe="beforeMain",Loe="main",Foe="afterMain",Boe="beforeWrite",Voe="write",joe="afterWrite",zoe=[_oe,Eoe,Qoe,Noe,Loe,Foe,Boe,Voe,joe];function Wo(t){return t?(t.nodeName||"").toLowerCase():null}function tr(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Bc(t){var e=tr(t).Element;return t instanceof e||t instanceof Element}function Dr(t){var e=tr(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function jC(t){if(typeof ShadowRoot>"u")return!1;var e=tr(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Zoe(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var i=e.styles[n]||{},s=e.attributes[n]||{},r=e.elements[n];!Dr(r)||!Wo(r)||(Object.assign(r.style,i),Object.keys(s).forEach(function(o){var a=s[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function qoe(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(i){var s=e.elements[i],r=e.attributes[i]||{},o=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:n[i]),a=o.reduce(function(l,c){return l[c]="",l},{});!Dr(s)||!Wo(s)||(Object.assign(s.style,a),Object.keys(r).forEach(function(l){s.removeAttribute(l)}))})}}const vM={name:"applyStyles",enabled:!0,phase:"write",fn:Zoe,effect:qoe,requires:["computeStyles"]};function Bo(t){return t.split("-")[0]}var Mc=Math.max,i0=Math.min,$d=Math.round;function Jv(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function wM(){return!/^((?!chrome|android).)*safari/i.test(Jv())}function Dd(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var i=t.getBoundingClientRect(),s=1,r=1;e&&Dr(t)&&(s=t.offsetWidth>0&&$d(i.width)/t.offsetWidth||1,r=t.offsetHeight>0&&$d(i.height)/t.offsetHeight||1);var o=Bc(t)?tr(t):window,a=o.visualViewport,l=!wM()&&n,c=(i.left+(l&&a?a.offsetLeft:0))/s,u=(i.top+(l&&a?a.offsetTop:0))/r,h=i.width/s,p=i.height/r;return{width:h,height:p,top:u,right:c+h,bottom:u+p,left:c,x:c,y:u}}function zC(t){var e=Dd(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function SM(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&jC(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Na(t){return tr(t).getComputedStyle(t)}function Xoe(t){return["table","td","th"].indexOf(Wo(t))>=0}function jl(t){return((Bc(t)?t.ownerDocument:t.document)||window.document).documentElement}function B1(t){return Wo(t)==="html"?t:t.assignedSlot||t.parentNode||(jC(t)?t.host:null)||jl(t)}function Y4(t){return!Dr(t)||Na(t).position==="fixed"?null:t.offsetParent}function Woe(t){var e=/firefox/i.test(Jv()),n=/Trident/i.test(Jv());if(n&&Dr(t)){var i=Na(t);if(i.position==="fixed")return null}var s=B1(t);for(jC(s)&&(s=s.host);Dr(s)&&["html","body"].indexOf(Wo(s))<0;){var r=Na(s);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||e&&r.willChange==="filter"||e&&r.filter&&r.filter!=="none")return s;s=s.parentNode}return null}function Np(t){for(var e=tr(t),n=Y4(t);n&&Xoe(n)&&Na(n).position==="static";)n=Y4(n);return n&&(Wo(n)==="html"||Wo(n)==="body"&&Na(n).position==="static")?e:n||Woe(t)||e}function ZC(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function df(t,e,n){return Mc(t,i0(e,n))}function Goe(t,e,n){var i=df(t,e,n);return i>n?n:i}function CM(){return{top:0,right:0,bottom:0,left:0}}function AM(t){return Object.assign({},CM(),t)}function xM(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}var Uoe=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,AM(typeof e!="number"?e:xM(e,Qp))};function Hoe(t){var e,n=t.state,i=t.name,s=t.options,r=n.elements.arrow,o=n.modifiersData.popperOffsets,a=Bo(n.placement),l=ZC(a),c=[Ts,_r].indexOf(a)>=0,u=c?"height":"width";if(!(!r||!o)){var h=Uoe(s.padding,n),p=zC(r),m=l==="y"?Ps:Ts,y=l==="y"?Rr:_r,O=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],S=o[l]-n.rects.reference[l],x=Np(r),T=x?l==="y"?x.clientHeight||0:x.clientWidth||0:0,k=O/2-S/2,D=h[m],M=T-p[u]-h[y],L=T/2-p[u]/2+k,j=df(D,L,M),G=l;n.modifiersData[i]=(e={},e[G]=j,e.centerOffset=j-L,e)}}function Yoe(t){var e=t.state,n=t.options,i=n.element,s=i===void 0?"[data-popper-arrow]":i;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||SM(e.elements.popper,s)&&(e.elements.arrow=s))}const Koe={name:"arrow",enabled:!0,phase:"main",fn:Hoe,effect:Yoe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Md(t){return t.split("-")[1]}var Joe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function eae(t,e){var n=t.x,i=t.y,s=e.devicePixelRatio||1;return{x:$d(n*s)/s||0,y:$d(i*s)/s||0}}function K4(t){var e,n=t.popper,i=t.popperRect,s=t.placement,r=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,h=t.isFixed,p=o.x,m=p===void 0?0:p,y=o.y,O=y===void 0?0:y,S=typeof u=="function"?u({x:m,y:O}):{x:m,y:O};m=S.x,O=S.y;var x=o.hasOwnProperty("x"),T=o.hasOwnProperty("y"),k=Ts,D=Ps,M=window;if(c){var L=Np(n),j="clientHeight",G="clientWidth";if(L===tr(n)&&(L=jl(n),Na(L).position!=="static"&&a==="absolute"&&(j="scrollHeight",G="scrollWidth")),L=L,s===Ps||(s===Ts||s===_r)&&r===Wf){D=Rr;var Z=h&&L===M&&M.visualViewport?M.visualViewport.height:L[j];O-=Z-i.height,O*=l?1:-1}if(s===Ts||(s===Ps||s===Rr)&&r===Wf){k=_r;var K=h&&L===M&&M.visualViewport?M.visualViewport.width:L[G];m-=K-i.width,m*=l?1:-1}}var te=Object.assign({position:a},c&&Joe),W=u===!0?eae({x:m,y:O},tr(n)):{x:m,y:O};if(m=W.x,O=W.y,l){var oe;return Object.assign({},te,(oe={},oe[D]=T?"0":"",oe[k]=x?"0":"",oe.transform=(M.devicePixelRatio||1)<=1?"translate("+m+"px, "+O+"px)":"translate3d("+m+"px, "+O+"px, 0)",oe))}return Object.assign({},te,(e={},e[D]=T?O+"px":"",e[k]=x?m+"px":"",e.transform="",e))}function tae(t){var e=t.state,n=t.options,i=n.gpuAcceleration,s=i===void 0?!0:i,r=n.adaptive,o=r===void 0?!0:r,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:Bo(e.placement),variation:Md(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,K4(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,K4(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const kM={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:tae,data:{}};var ag={passive:!0};function nae(t){var e=t.state,n=t.instance,i=t.options,s=i.scroll,r=s===void 0?!0:s,o=i.resize,a=o===void 0?!0:o,l=tr(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&c.forEach(function(u){u.addEventListener("scroll",n.update,ag)}),a&&l.addEventListener("resize",n.update,ag),function(){r&&c.forEach(function(u){u.removeEventListener("scroll",n.update,ag)}),a&&l.removeEventListener("resize",n.update,ag)}}const PM={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:nae,data:{}};var iae={left:"right",right:"left",bottom:"top",top:"bottom"};function Yg(t){return t.replace(/left|right|bottom|top/g,function(e){return iae[e]})}var sae={start:"end",end:"start"};function J4(t){return t.replace(/start|end/g,function(e){return sae[e]})}function qC(t){var e=tr(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function XC(t){return Dd(jl(t)).left+qC(t).scrollLeft}function rae(t,e){var n=tr(t),i=jl(t),s=n.visualViewport,r=i.clientWidth,o=i.clientHeight,a=0,l=0;if(s){r=s.width,o=s.height;var c=wM();(c||!c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:r,height:o,x:a+XC(t),y:l}}function oae(t){var e,n=jl(t),i=qC(t),s=(e=t.ownerDocument)==null?void 0:e.body,r=Mc(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=Mc(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-i.scrollLeft+XC(t),l=-i.scrollTop;return Na(s||n).direction==="rtl"&&(a+=Mc(n.clientWidth,s?s.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}function WC(t){var e=Na(t),n=e.overflow,i=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+i)}function TM(t){return["html","body","#document"].indexOf(Wo(t))>=0?t.ownerDocument.body:Dr(t)&&WC(t)?t:TM(B1(t))}function hf(t,e){var n;e===void 0&&(e=[]);var i=TM(t),s=i===((n=t.ownerDocument)==null?void 0:n.body),r=tr(i),o=s?[r].concat(r.visualViewport||[],WC(i)?i:[]):i,a=e.concat(o);return s?a:a.concat(hf(B1(o)))}function ew(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function aae(t,e){var n=Dd(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function e8(t,e,n){return e===OM?ew(rae(t,n)):Bc(e)?aae(e,n):ew(oae(jl(t)))}function lae(t){var e=hf(B1(t)),n=["absolute","fixed"].indexOf(Na(t).position)>=0,i=n&&Dr(t)?Np(t):t;return Bc(i)?e.filter(function(s){return Bc(s)&&SM(s,i)&&Wo(s)!=="body"}):[]}function cae(t,e,n,i){var s=e==="clippingParents"?lae(t):[].concat(e),r=[].concat(s,[n]),o=r[0],a=r.reduce(function(l,c){var u=e8(t,c,i);return l.top=Mc(u.top,l.top),l.right=i0(u.right,l.right),l.bottom=i0(u.bottom,l.bottom),l.left=Mc(u.left,l.left),l},e8(t,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function $M(t){var e=t.reference,n=t.element,i=t.placement,s=i?Bo(i):null,r=i?Md(i):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(s){case Ps:l={x:o,y:e.y-n.height};break;case Rr:l={x:o,y:e.y+e.height};break;case _r:l={x:e.x+e.width,y:a};break;case Ts:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=s?ZC(s):null;if(c!=null){var u=c==="y"?"height":"width";switch(r){case Td:l[c]=l[c]-(e[u]/2-n[u]/2);break;case Wf:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function Gf(t,e){e===void 0&&(e={});var n=e,i=n.placement,s=i===void 0?t.placement:i,r=n.strategy,o=r===void 0?t.strategy:r,a=n.boundary,l=a===void 0?Ioe:a,c=n.rootBoundary,u=c===void 0?OM:c,h=n.elementContext,p=h===void 0?Ih:h,m=n.altBoundary,y=m===void 0?!1:m,O=n.padding,S=O===void 0?0:O,x=AM(typeof S!="number"?S:xM(S,Qp)),T=p===Ih?Roe:Ih,k=t.rects.popper,D=t.elements[y?T:p],M=cae(Bc(D)?D:D.contextElement||jl(t.elements.popper),l,u,o),L=Dd(t.elements.reference),j=$M({reference:L,element:k,placement:s}),G=ew(Object.assign({},k,j)),Z=p===Ih?G:L,K={top:M.top-Z.top+x.top,bottom:Z.bottom-M.bottom+x.bottom,left:M.left-Z.left+x.left,right:Z.right-M.right+x.right},te=t.modifiersData.offset;if(p===Ih&&te){var W=te[s];Object.keys(K).forEach(function(oe){var ye=[_r,Rr].indexOf(oe)>=0?1:-1,ke=[Ps,Rr].indexOf(oe)>=0?"y":"x";K[oe]+=W[ke]*ye})}return K}function uae(t,e){e===void 0&&(e={});var n=e,i=n.placement,s=n.boundary,r=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?bM:l,u=Md(i),h=u?a?H4:H4.filter(function(y){return Md(y)===u}):Qp,p=h.filter(function(y){return c.indexOf(y)>=0});p.length===0&&(p=h);var m=p.reduce(function(y,O){return y[O]=Gf(t,{placement:O,boundary:s,rootBoundary:r,padding:o})[Bo(O)],y},{});return Object.keys(m).sort(function(y,O){return m[y]-m[O]})}function dae(t){if(Bo(t)===VC)return[];var e=Yg(t);return[J4(t),e,J4(e)]}function hae(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var s=n.mainAxis,r=s===void 0?!0:s,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,h=n.rootBoundary,p=n.altBoundary,m=n.flipVariations,y=m===void 0?!0:m,O=n.allowedAutoPlacements,S=e.options.placement,x=Bo(S),T=x===S,k=l||(T||!y?[Yg(S)]:dae(S)),D=[S].concat(k).reduce(function(Pt,xt){return Pt.concat(Bo(xt)===VC?uae(e,{placement:xt,boundary:u,rootBoundary:h,padding:c,flipVariations:y,allowedAutoPlacements:O}):xt)},[]),M=e.rects.reference,L=e.rects.popper,j=new Map,G=!0,Z=D[0],K=0;K<D.length;K++){var te=D[K],W=Bo(te),oe=Md(te)===Td,ye=[Ps,Rr].indexOf(W)>=0,ke=ye?"width":"height",ge=Gf(e,{placement:te,boundary:u,rootBoundary:h,altBoundary:p,padding:c}),Se=ye?oe?_r:Ts:oe?Rr:Ps;M[ke]>L[ke]&&(Se=Yg(Se));var Oe=Yg(Se),Fe=[];if(r&&Fe.push(ge[W]<=0),a&&Fe.push(ge[Se]<=0,ge[Oe]<=0),Fe.every(function(Pt){return Pt})){Z=te,G=!1;break}j.set(te,Fe)}if(G)for(var dt=y?3:1,Je=function(xt){var Ft=D.find(function(ue){var De=j.get(ue);if(De)return De.slice(0,xt).every(function(re){return re})});if(Ft)return Z=Ft,"break"},ut=dt;ut>0;ut--){var Qt=Je(ut);if(Qt==="break")break}e.placement!==Z&&(e.modifiersData[i]._skip=!0,e.placement=Z,e.reset=!0)}}const DM={name:"flip",enabled:!0,phase:"main",fn:hae,requiresIfExists:["offset"],data:{_skip:!1}};function t8(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function n8(t){return[Ps,_r,Rr,Ts].some(function(e){return t[e]>=0})}function fae(t){var e=t.state,n=t.name,i=e.rects.reference,s=e.rects.popper,r=e.modifiersData.preventOverflow,o=Gf(e,{elementContext:"reference"}),a=Gf(e,{altBoundary:!0}),l=t8(o,i),c=t8(a,s,r),u=n8(l),h=n8(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}const pae={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:fae};function mae(t,e,n){var i=Bo(t),s=[Ts,Ps].indexOf(i)>=0?-1:1,r=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=r[0],a=r[1];return o=o||0,a=(a||0)*s,[Ts,_r].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function gae(t){var e=t.state,n=t.options,i=t.name,s=n.offset,r=s===void 0?[0,0]:s,o=bM.reduce(function(u,h){return u[h]=mae(h,e.rects,r),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=o}const MM={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:gae};function yae(t){var e=t.state,n=t.name;e.modifiersData[n]=$M({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const IM={name:"popperOffsets",enabled:!0,phase:"read",fn:yae,data:{}};function Oae(t){return t==="x"?"y":"x"}function bae(t){var e=t.state,n=t.options,i=t.name,s=n.mainAxis,r=s===void 0?!0:s,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,h=n.padding,p=n.tether,m=p===void 0?!0:p,y=n.tetherOffset,O=y===void 0?0:y,S=Gf(e,{boundary:l,rootBoundary:c,padding:h,altBoundary:u}),x=Bo(e.placement),T=Md(e.placement),k=!T,D=ZC(x),M=Oae(D),L=e.modifiersData.popperOffsets,j=e.rects.reference,G=e.rects.popper,Z=typeof O=="function"?O(Object.assign({},e.rects,{placement:e.placement})):O,K=typeof Z=="number"?{mainAxis:Z,altAxis:Z}:Object.assign({mainAxis:0,altAxis:0},Z),te=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,W={x:0,y:0};if(L){if(r){var oe,ye=D==="y"?Ps:Ts,ke=D==="y"?Rr:_r,ge=D==="y"?"height":"width",Se=L[D],Oe=Se+S[ye],Fe=Se-S[ke],dt=m?-G[ge]/2:0,Je=T===Td?j[ge]:G[ge],ut=T===Td?-G[ge]:-j[ge],Qt=e.elements.arrow,Pt=m&&Qt?zC(Qt):{width:0,height:0},xt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:CM(),Ft=xt[ye],ue=xt[ke],De=df(0,j[ge],Pt[ge]),re=k?j[ge]/2-dt-De-Ft-K.mainAxis:Je-De-Ft-K.mainAxis,he=k?-j[ge]/2+dt+De+ue+K.mainAxis:ut+De+ue+K.mainAxis,ct=e.elements.arrow&&Np(e.elements.arrow),Xt=ct?D==="y"?ct.clientTop||0:ct.clientLeft||0:0,F=(oe=te==null?void 0:te[D])!=null?oe:0,z=Se+re-F-Xt,se=Se+he-F,we=df(m?i0(Oe,z):Oe,Se,m?Mc(Fe,se):Fe);L[D]=we,W[D]=we-Se}if(a){var ce,Ce=D==="x"?Ps:Ts,_e=D==="x"?Rr:_r,$e=L[M],xe=M==="y"?"height":"width",be=$e+S[Ce],Ye=$e-S[_e],Ee=[Ps,Ts].indexOf(x)!==-1,Xe=(ce=te==null?void 0:te[M])!=null?ce:0,rt=Ee?be:$e-j[xe]-G[xe]-Xe+K.altAxis,gt=Ee?$e+j[xe]+G[xe]-Xe-K.altAxis:Ye,It=m&&Ee?Goe(rt,$e,gt):df(m?rt:be,$e,m?gt:Ye);L[M]=It,W[M]=It-$e}e.modifiersData[i]=W}}const RM={name:"preventOverflow",enabled:!0,phase:"main",fn:bae,requiresIfExists:["offset"]};function vae(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function wae(t){return t===tr(t)||!Dr(t)?qC(t):vae(t)}function Sae(t){var e=t.getBoundingClientRect(),n=$d(e.width)/t.offsetWidth||1,i=$d(e.height)/t.offsetHeight||1;return n!==1||i!==1}function Cae(t,e,n){n===void 0&&(n=!1);var i=Dr(e),s=Dr(e)&&Sae(e),r=jl(e),o=Dd(t,s,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&((Wo(e)!=="body"||WC(r))&&(a=wae(e)),Dr(e)?(l=Dd(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):r&&(l.x=XC(r))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function Aae(t){var e=new Map,n=new Set,i=[];t.forEach(function(r){e.set(r.name,r)});function s(r){n.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&s(l)}}),i.push(r)}return t.forEach(function(r){n.has(r.name)||s(r)}),i}function xae(t){var e=Aae(t);return zoe.reduce(function(n,i){return n.concat(e.filter(function(s){return s.phase===i}))},[])}function kae(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function Pae(t){var e=t.reduce(function(n,i){var s=n[i.name];return n[i.name]=s?Object.assign({},s,i,{options:Object.assign({},s.options,i.options),data:Object.assign({},s.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var i8={placement:"bottom",modifiers:[],strategy:"absolute"};function s8(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function _M(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,i=n===void 0?[]:n,s=e.defaultOptions,r=s===void 0?i8:s;return function(a,l,c){c===void 0&&(c=r);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},i8,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},h=[],p=!1,m={state:u,setOptions:function(x){var T=typeof x=="function"?x(u.options):x;O(),u.options=Object.assign({},r,u.options,T),u.scrollParents={reference:Bc(a)?hf(a):a.contextElement?hf(a.contextElement):[],popper:hf(l)};var k=xae(Pae([].concat(i,u.options.modifiers)));return u.orderedModifiers=k.filter(function(D){return D.enabled}),y(),m.update()},forceUpdate:function(){if(!p){var x=u.elements,T=x.reference,k=x.popper;if(s8(T,k)){u.rects={reference:Cae(T,Np(k),u.options.strategy==="fixed"),popper:zC(k)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(K){return u.modifiersData[K.name]=Object.assign({},K.data)});for(var D=0;D<u.orderedModifiers.length;D++){if(u.reset===!0){u.reset=!1,D=-1;continue}var M=u.orderedModifiers[D],L=M.fn,j=M.options,G=j===void 0?{}:j,Z=M.name;typeof L=="function"&&(u=L({state:u,options:G,name:Z,instance:m})||u)}}}},update:kae(function(){return new Promise(function(S){m.forceUpdate(),S(u)})}),destroy:function(){O(),p=!0}};if(!s8(a,l))return m;m.setOptions(c).then(function(S){!p&&c.onFirstUpdate&&c.onFirstUpdate(S)});function y(){u.orderedModifiers.forEach(function(S){var x=S.name,T=S.options,k=T===void 0?{}:T,D=S.effect;if(typeof D=="function"){var M=D({state:u,name:x,instance:m,options:k}),L=function(){};h.push(M||L)}})}function O(){h.forEach(function(S){return S()}),h=[]}return m}}var Tae=[PM,IM,kM,vM],$ae=_M({defaultModifiers:Tae}),Dae=[PM,IM,kM,vM,MM,DM,RM,Koe,pae],Mae=_M({defaultModifiers:Dae});const Iae={name:"Popover",props:{showPopup:{type:[Boolean,null],default:null},right:Boolean,entryDelay:{type:Number,default:0},exitDelay:{type:Number,default:0},placement:{type:String,default:"bottom-start"},popoverClass:[String,Object,Array]},emits:["open","close"],data(){return{isOpen:!1}},watch:{showPopup(t){t===!0&&this.open(),t===!1&&this.close()}},mounted(){this.listener=t=>{[this.$refs.reference,this.$refs.popover].some(i=>i&&(t.target===i||i.contains(t.target)))||this.close()},this.show==null&&document.addEventListener("click",this.listener)},beforeUnmount(){this.popper&&this.popper.destroy(),this.listener&&(document.removeEventListener("click",this.listener),delete this.listener)},methods:{setupPopper(){this.popper?this.popper.update():this.popper=Mae(this.$refs.reference,this.$refs.popover,{placement:this.placement,modifiers:[{name:"offset",options:{offset:[0,8]}}]})},togglePopover(t){t==null&&(t=!this.isOpen),t=!!t,t?this.open():this.close()},open(){this.isOpen||(this.isOpen=!0,Bi(()=>{this.setupPopper()}),this.$emit("open"))},close(){this.isOpen&&(this.isOpen=!1,this.$emit("close"))},handleBlur({relatedTarget:t}){t&&this.close()}}},Rae={ref:"reference"},_ae={class:"h-full"};function Eae(t,e,n,i,s,r){return w(),P("div",Rae,[v("div",_ae,[Ge(t.$slots,"target",{togglePopover:r.togglePopover,handleBlur:r.handleBlur},void 0,!0)]),_(Ir,null,{default:U(()=>[mn(v("div",{ref:"popover",class:ee([n.popoverClass,"bg-white dark:bg-gray-850 rounded-md border dark:border-gray-875 shadow-lg popover-container relative z-10"]),style:qe({"transition-delay":`${s.isOpen?n.entryDelay:n.exitDelay}ms`})},[Ge(t.$slots,"content",{togglePopover:r.togglePopover},void 0,!0)],6),[[ii,s.isOpen]])]),_:3})],512)}const V1=ne(Iae,[["render",Eae],["__scopeId","data-v-590cbd86"]]),Qae=ve({name:"Dropdown",components:{Popover:V1},props:{items:{type:Array,default:()=>[]},right:{type:Boolean,default:!1},isLoading:{type:Boolean,default:!1},df:{type:Object,default:null},doc:{type:Object,default:null}},data(){return{isShown:!1,highlightedIndex:-1}},computed:{dropdownItems(){const t=Nae(this.items??[]),e=Object.keys(t).filter(Boolean).sort(),n=t[""]??[];for(let i of e){n.push({label:i,isGroup:!0});const s=t[i]??[];n.push(...s)}return n}},watch:{highlightedIndex(){this.scrollToHighlighted()},dropdownItems(){const t=Math.max(this.highlightedIndex,-1);this.highlightedIndex=Math.min(t,this.dropdownItems.length-1)}},methods:{getEmptyMessage(){var i,s,r;const{schemaName:t,fieldname:e}=this.df??{};if(!t||!e||!this.doc)return this.t`Empty`;const n=(r=(i=N.models[t])==null?void 0:(s=i.emptyMessages)[e])==null?void 0:r.call(s,this.doc);return n||this.t`Empty`},async selectItem(t){!t||!(t!=null&&t.action)||(this.doc?await t.action(this.doc,this.$router):await t.action(),this.toggleDropdown(!1))},toggleDropdown(t){typeof t!="boolean"&&(t=!this.isShown),this.isShown=t},async selectHighlightedItem(){let t=this.dropdownItems[this.highlightedIndex];if(!t)if(this.dropdownItems.length===1)t=this.dropdownItems[0];else return;if(!t.isGroup)return await this.selectItem(t)},highlightItemUp(t){t==null||t.preventDefault(),this.highlightedIndex=Math.max(0,this.highlightedIndex-1)},highlightItemDown(t){t==null||t.preventDefault(),this.highlightedIndex=Math.min(this.dropdownItems.length-1,this.highlightedIndex+1)},scrollToHighlighted(){const t=this.$refs.items;if(!Array.isArray(t))return;const e=t[this.highlightedIndex];e instanceof Element&&e.scrollIntoView({block:"nearest"})}}});function Nae(t){const e={};for(let n of t){const i=n.group??"";e[i]??(e[i]=[]),e[i].push(n)}return e}const Lae={class:"h-full"},Fae={class:"bg-white dark:bg-gray-850 dark:text-white rounded w-full min-w-40 overflow-hidden"},Bae={class:"p-1 max-h-64 overflow-auto custom-scroll custom-scroll-thumb2 text-sm"},Vae={key:0,class:"p-2 text-gray-600 dark:text-gray-400 italic"},jae={key:1,class:"p-2 text-gray-600 dark:text-gray-400 italic"},zae={key:0,class:"px-2 pt-3 pb-1 text-xs uppercase text-gray-700 dark:text-gray-400 font-semibold tracking-wider"},Zae=["onMouseenter","onClick"];function qae(t,e,n,i,s,r){const o=Q("Popover"),a=BS("on-outside-click");return w(),H(o,{"show-popup":t.isShown,"hide-arrow":!0,placement:t.right?"bottom-end":"bottom-start"},{target:U(()=>[mn((w(),P("div",Lae,[Ge(t.$slots,"default",{toggleDropdown:t.toggleDropdown,highlightItemUp:t.highlightItemUp,highlightItemDown:t.highlightItemDown,selectHighlightedItem:t.selectHighlightedItem})])),[[a,()=>t.isShown=!1]])]),content:U(()=>[v("div",Fae,[v("div",Bae,[t.isLoading?(w(),P("div",Vae,R(t.t`Loading...`),1)):t.dropdownItems.length===0?(w(),P("div",jae,R(t.getEmptyMessage()),1)):(w(!0),P(le,{key:2},Pe(t.dropdownItems,(l,c)=>(w(),P("div",{key:`key-${c}`,ref_for:!0,ref:"items"},[l.isGroup?(w(),P("div",zae,R(l.label),1)):(w(),P("a",{key:1,class:ee(["block p-2 rounded-md mt-1 first:mt-0 cursor-pointer truncate",c===t.highlightedIndex?"bg-gray-100 dark:bg-gray-875":""]),onMouseenter:u=>t.highlightedIndex=c,onMousedown:e[0]||(e[0]=_i(()=>{},["prevent"])),onClick:u=>t.selectItem(l)},[l.component?(w(),H(ro(l.component),{key:0})):(w(),P(le,{key:1},[He(R(l.label),1)],64))],42,Zae))]))),128))])])]),_:3},8,["show-popup","placement"])}const GC=ne(Qae,[["render",qae]]),Xae=ve({name:"DropdownWithActions",components:{Dropdown:GC,Button:At},inject:{injectedDoc:{from:"doc",default:void 0}},props:{actions:{type:Array,default:()=>[]},type:{type:String,default:"secondary"},icon:{type:Boolean,default:!0}},computed:{doc(){const t=this.injectedDoc;if(t instanceof ze)return t},items(){return this.actions.map(({label:t,group:e,component:n,action:i})=>({label:t,group:e,action:i,component:n}))}}});function Wae(t,e,n,i,s,r){const o=Q("feather-icon"),a=Q("Button"),l=Q("Dropdown");return t.actions&&t.actions.length?(w(),H(l,{key:0,class:"text-xs",items:t.items,doc:t.doc,right:""},{default:U(({toggleDropdown:c})=>[_(a,{type:t.type,icon:t.icon,onClick:u=>c()},{default:U(()=>[Ge(t.$slots,"default",{},()=>[_(o,{name:"more-horizontal",class:"w-4 h-4"})])]),_:3},8,["type","icon","onClick"])]),_:3},8,["items","doc"])):B("",!0)}const th=ne(Xae,[["render",Wae]]),Gae=ve({components:{PageHeader:Nr},props:{title:{type:String,default:""},useFullWidth:{type:Boolean,default:!1},showHeader:{type:Boolean,default:!0},searchborder:{type:Boolean,default:!0}}}),Uae={class:"flex bg-gray-25 dark:bg-gray-875 overflow-x-auto custom-scroll custom-scroll-thumb1"},Hae={class:"flex flex-1 flex-col"};function Yae(t,e,n,i,s,r){const o=Q("PageHeader");return w(),P("div",Uae,[v("div",Hae,[t.showHeader?(w(),H(o,{key:0,title:t.title,border:!1,searchborder:t.searchborder},{left:U(()=>[Ge(t.$slots,"header-left")]),default:U(()=>[Ge(t.$slots,"header")]),_:3},8,["title","searchborder"])):B("",!0),v("div",{class:ee(["flex flex-col self-center h-full overflow-auto bg-white dark:bg-gray-890",t.useFullWidth?"w-full border-t dark:border-gray-800":"w-form border dark:border-gray-800 rounded-lg shadow-lg mb-4 mx-4"])},[Ge(t.$slots,"body")],2)]),Ge(t.$slots,"quickedit")])}const Lp=ne(Gae,[["render",Yae]]),Kae=ve({props:{formTitle:{type:String,default:""},formSubTitle:{type:String,default:""}}}),Jae={class:"px-4 text-xl font-semibold flex justify-between h-row-large items-center flex-shrink-0"},ele={key:0,class:"dark:text-gray-25"},tle={key:1,class:"text-gray-600 dark:text-gray-400"};function nle(t,e,n,i,s,r){return w(),P("div",Jae,[t.formTitle?(w(),P("h1",ele,R(t.formTitle),1)):B("",!0),Ge(t.$slots,"default"),t.formSubTitle?(w(),P("p",tle,R(t.formSubTitle),1)):B("",!0)])}const Za=ne(Kae,[["render",nle]]);var fd;let EM=(fd=class extends ze{constructor(){super(...arguments),this.formulas={defaultAccount:{formula:async()=>{const e=this.role;if(e==="Both")return"";let n="Debtors";return e==="Supplier"&&(n="Creditors"),await this.fyo.db.exists("Account",n)?n:""},dependsOn:["role"]},currency:{formula:()=>{if(!this.currency)return this.fyo.singles.SystemSettings.currency}}},this.validations={email:P1,phone:h7}}async updateOutstandingAmount(){const e=this.role;let n=this.fyo.pesa(0);if(e==="Customer"||e==="Both"){const i=await this._getTotalOutstandingAmount("SalesInvoice");n=n.add(i)}if(e==="Supplier"){const i=await this._getTotalOutstandingAmount("PurchaseInvoice");n=n.add(i)}if(e==="Both"){const i=await this._getTotalOutstandingAmount("PurchaseInvoice");n=n.sub(i)}await this.setAndSync({outstandingAmount:n})}async updateLoyaltyPoints(){let e=0;(this.role==="Customer"||this.role==="Both")&&(e=await this._getTotalLoyaltyPoints()),await this.setAndSync({loyaltyPoints:e})}async _getTotalLoyaltyPoints(){const e=this.loyaltyProgram;return e&&await Ky(this.fyo,e)?0:(await this.fyo.db.getAll(A.LoyaltyPointEntry,{fields:["name","loyaltyPoints","expiryDate","postingDate"],filters:{customer:this.name}})).reduce((s,r)=>r.expiryDate>r.postingDate?s+r.loyaltyPoints:s,0)}async _getTotalOutstandingAmount(e){return(await this.fyo.db.getAllRaw(e,{fields:["outstandingAmount"],filters:{submitted:!0,cancelled:!1,party:this.name}})).map(({outstandingAmount:i})=>this.fyo.pesa(i)).reduce((i,s)=>i.add(s),this.fyo.pesa(0))}static getListViewSettings(){return{columns:["name","email","phone","outstandingAmount"]}}async afterDelete(){if(await super.afterDelete(),!this.fromLead)return;await(await this.fyo.doc.getDoc(A.Lead,this.name)).setAndSync("status","Interested")}async afterSync(){if(await super.afterSync(),!this.fromLead)return;await(await this.fyo.doc.getDoc(A.Lead,this.name)).setAndSync("status","Converted")}static getActions(e){return[{label:e.t`Create Purchase`,condition:n=>!n.notInserted&&n.role!=="Customer",action:async(n,i)=>{const s=e.doc.getNewDoc("PurchaseInvoice",{party:n.name,account:n.defaultAccount});await i.push({path:`/edit/PurchaseInvoice/${s.name}`,query:{schemaName:"PurchaseInvoice",values:{party:n.name}}})}},{label:e.t`View Purchases`,condition:n=>!n.notInserted&&n.role!=="Customer",action:async(n,i)=>{await i.push({path:"/list/PurchaseInvoice",query:{filters:JSON.stringify({party:n.name})}})}},{label:e.t`Create Sale`,condition:n=>!n.notInserted&&n.role!=="Supplier",action:async(n,i)=>{const s=e.doc.getNewDoc("SalesInvoice",{party:n.name,account:n.defaultAccount});await i.push({path:`/edit/SalesInvoice/${s.name}`,query:{schemaName:"SalesInvoice",values:{party:n.name}}})}},{label:e.t`View Sales`,condition:n=>!n.notInserted&&n.role!=="Supplier",action:async(n,i)=>{await i.push({path:"/list/SalesInvoice",query:{filters:JSON.stringify({party:n.name})}})}}]}},fd.filters={defaultAccount:e=>{const n=e.role;return n==="Both"?{isGroup:!1,accountType:["in",["Payable","Receivable"]]}:{isGroup:!1,accountType:n==="Customer"?"Receivable":"Payable"}}},fd);class QM extends ze{constructor(){super(...arguments),this.validations={used:e=>{const n=e,i=this.maximumUse;if(n<0)throw new ie("Used count cannot be negative");if(i>0&&n>i)throw new ie("Used count cannot exceed maximum use limit")},maximumUse:e=>{if(e<0)throw new ie("Maximum use cannot be negative")}}}static getListViewSettings(){return{columns:["name",yse(),"fromDate","toDate"]}}}const ile=ve({props:{doc:{type:ze,required:!0}},data(){return{showStatus:!0}},computed:{styleClass(){return jf(this.color)},status(){return rle(this.doc)},text(){this.doc.schemaName===A.SalesQuote&&this.doc.isSubmitted&&(this.showStatus=!1);const t=ui(this.doc.outstandingAmount);if(t&&this.status==="Unpaid"){const e=this.fyo.format(this.doc.outstandingAmount,"Currency");return this.t`Unpaid ${e}`}if(t&&this.status==="PartlyPaid"){const e=this.fyo.format(this.doc.grandTotal.sub(this.doc.outstandingAmount),"Currency");return this.t`Partly Paid ${e}`}if(this.status==="Outstanding"){const e=this.fyo.format(this.doc.outstandingAmount,"Currency");return this.t`Unpaid ${e}`}return{Draft:this.t`Draft`,Cancelled:this.t`Cancelled`,Outstanding:this.t`Outstanding`,NotTransferred:this.t`Not Transferred`,NotSaved:this.t`Not Saved`,NotSubmitted:this.t`Not Submitted`,Paid:this.t`Paid`,Saved:this.t`Saved`,Submitted:this.t`Submitted`,Return:this.t`Return`,ReturnIssued:this.t`Return Issued`,Unpaid:this.t`Unpaid`,PartlyPaid:this.t`Partly Paid`,Expired:this.t`Expired`,Active:this.t`Active`,Maxed:this.t`Maxed`}[this.status]},color(){return sle[this.status]}}}),sle={Draft:"gray",Cancelled:"red",Outstanding:"orange",NotTransferred:"orange",NotSaved:"orange",NotSubmitted:"orange",Paid:"green",Saved:"blue",Submitted:"blue",Return:"gray",ReturnIssued:"gray",Unpaid:"red",PartlyPaid:"yellow",Expired:"red",Active:"green",Maxed:"orange"};function rle(t){var e;if(t.notInserted)return"Draft";if(t.dirty)return"NotSaved";if(t instanceof QM){const n=new Date;n.setHours(0,0,0,0);const i=t.maximumUse,s=t.used;if(i>0&&s>=i)return"Maxed";if(t.toDate&&t.toDate instanceof Date){const r=new Date(t.toDate);if(r.setHours(0,0,0,0),r<=n)return"Expired"}return"Active"}return t instanceof EM&&((e=t.outstandingAmount)==null?void 0:e.isZero())!==!0?"Outstanding":t.schema.isSubmittable?ole(t):"Saved"}function ole(t){var n,i,s,r,o;if(t.isCancelled)return"Cancelled";if(t.returnAgainst&&t.isSubmitted)return"Return";if(t.isReturned&&t.isSubmitted)return"ReturnIssued";const e=t instanceof za;return t.isSubmitted&&e&&(t.stockNotTransferred??0)>0?"NotTransferred":t.isSubmitted&&e&&((n=t.outstandingAmount)==null?void 0:n.isZero())===!0?"Paid":t.isSubmitted&&e&&!t.isCancelled&&((i=t.outstandingAmount)!=null&&i.isPositive())&&((s=t.outstandingAmount)!=null&&s.neq(t.grandTotal))?"PartlyPaid":t.isSubmitted&&e&&!t.isCancelled&&((r=t.outstandingAmount)!=null&&r.eq(t.grandTotal))?"Unpaid":t.isSubmitted&&e&&((o=t.outstandingAmount)==null?void 0:o.isZero())!==!0?"Outstanding":t.isSubmitted?"Submitted":"NotSubmitted"}function ale(t,e,n,i,s,r){return t.showStatus?(w(),P("p",{key:0,class:ee(["pill font-medium",t.styleClass])},R(t.text),3)):B("",!0)}const lle=ne(ile,[["render",ale]]);function cle(){const t=mM(),e=Bl({pressed:new Set,alt:!1,ctrl:!1,meta:!1,shift:!1,repeat:!1}),n=s=>{const r=!(s.altKey||s.metaKey||s.ctrlKey);if(s.target instanceof HTMLInputElement&&r||s.target instanceof HTMLElement&&s.target.contentEditable==="true"&&r)return;e.alt=s.altKey,e.ctrl=s.ctrlKey,e.meta=s.metaKey,e.shift=s.shiftKey,e.repeat=s.repeat;const{code:o}=s;o.startsWith("Alt")||o.startsWith("Control")||o.startsWith("Meta")||o.startsWith("Shift")||e.pressed.add(o)},i=s=>{const{code:r}=s;if(r.startsWith("Meta")&&t){e.alt=!1,e.ctrl=!1,e.meta=!1,e.shift=!1,e.repeat=!1,e.pressed.clear();return}e.pressed.delete(r)};return Yc(()=>{window.addEventListener("keydown",n),window.addEventListener("keyup",i)}),Wd(()=>{window.removeEventListener("keydown",n),window.removeEventListener("keyup",i)}),e}function UC(t,e,n,i=!0){let s=n;i&&(s=n+"-"+Math.random().toString(36).slice(2,6));const r=async()=>{const a=e.value;if(a){if(a.canSave)return await fO(a,!0);if(a.canSubmit)return await pO(a);CQ(a)}},o=async()=>{const a=e.value;if(a){if(a.canCancel)return await nx(a);if(a.canDelete)return await hO(a);AQ(a)}};return Yc(()=>{i&&t.has(s)||(t.pmod.set(s,["KeyS"],r,!1),t.pmod.set(s,["Backspace"],o,!1))}),QS(()=>{i&&t.has(s)||(t.pmod.set(s,["KeyS"],r,!1),t.pmod.set(s,["Backspace"],o,!1))}),NS(()=>{t.has(s)&&t.delete(s)}),Wd(()=>{t.has(s)&&t.delete(s)}),s}const ule=ve({name:"Base",inject:{injectedDoc:{from:"doc",default:void 0}},props:{df:{type:Object,required:!0},step:{type:Number,default:1},value:[String,Number,Boolean,Object],inputClass:[String,Array],border:{type:Boolean,default:!1},size:{type:String,default:"large"},placeholder:String,showLabel:{type:Boolean,default:!1},containerStyles:{type:Object,default:()=>({})},textRight:{type:[null,Boolean],default:null},readOnly:{type:[null,Boolean],default:null},required:{type:[null,Boolean],default:null}},emits:["focus","input","change"],computed:{doc(){const t=this.injectedDoc;if(t instanceof ze)return t},inputType(){return"text"},labelClasses(){return"text-gray-600 dark:text-gray-500 text-sm mb-1"},inputClasses(){const t=[];return t.push(...this.baseInputClasses),(this.textRight??lo(this.df))&&t.push("text-end"),t.push(this.sizeClasses),t.push(this.inputReadOnlyClasses),this.getInputClassesFromProp(t).filter(Boolean)},baseInputClasses(){return["text-base","focus:outline-none","w-full","placeholder-gray-500"]},sizeClasses(){return this.size==="small"?"px-2 py-1":"px-3 py-2"},inputReadOnlyClasses(){return this.isReadOnly?"text-gray-800 dark:text-gray-300 cursor-default":"text-gray-900 dark:text-gray-100"},containerClasses(){const t=[];return t.push(...this.baseContainerClasses),t.push(this.containerReadOnlyClasses),t.push(this.borderClasses),t.filter(Boolean)},baseContainerClasses(){return["rounded"]},containerReadOnlyClasses(){return this.isReadOnly?"":"focus-within:bg-gray-100 dark:focus-within:bg-gray-850"},borderClasses(){if(!this.border)return"";const t="border border-gray-200 dark:border-gray-800";let e="bg-gray-25 dark:bg-gray-875";return this.isReadOnly&&(e="bg-gray-50 dark:bg-gray-850"),t+" "+e},inputPlaceholder(){return this.placeholder||this.df.placeholder||this.df.label},showMandatory(){return this.isEmpty&&this.isRequired},isEmpty(){return!!(Array.isArray(this.value)&&!this.value.length||typeof this.value=="string"&&!this.value||xi(this.value))},isReadOnly(){return typeof this.readOnly=="boolean"?this.readOnly:$se(this.df,this.doc)},isRequired(){return typeof this.required=="boolean"?this.required:Dse(this.df,this.doc)}},methods:{onBlur(t){const e=t.target;e instanceof HTMLInputElement&&(this.isReadOnly||this.triggerChange(e.value))},getInputClassesFromProp(t){if(!this.inputClass)return t;let e=this.inputClass;return typeof e=="string"&&(e=[e]),e=e.filter(n=>typeof n=="string"),[t,e].flat()},focus(){const t=this.$refs.input;t instanceof HTMLInputElement&&t.focus()},triggerChange(t){t=this.parse(t),t===""&&(t=null),this.$emit("change",t)},parse(t){return t},isNumeric:lo}}),dle=["title"],hle=["type","value","placeholder","readonly","step","max","min","tabindex"];function fle(t,e,n,i,s,r){var o;return w(),P("div",{title:t.df.label},[t.showLabel?(w(),P("div",{key:0,class:ee(t.labelClasses)},R(t.df.label),3)):B("",!0),v("div",{class:ee(t.showMandatory?"show-mandatory":"")},[v("input",{ref:"input",spellcheck:"false",class:ee(["bg-transparent",[t.inputClasses,t.containerClasses]]),type:t.inputType,value:t.value,placeholder:t.inputPlaceholder,readonly:t.isReadOnly,step:t.step,max:t.isNumeric(t.df)?t.df.maxvalue:void 0,min:t.isNumeric(t.df)?t.df.minvalue:void 0,style:qe(t.containerStyles),tabindex:t.isReadOnly?"-1":"0",onBlur:e[0]||(e[0]=(...a)=>t.onBlur&&t.onBlur(...a)),onFocus:e[1]||(e[1]=a=>!t.isReadOnly&&t.$emit("focus",a)),onInput:e[2]||(e[2]=a=>!t.isReadOnly&&t.$emit("input",a))},null,46,hle)],2),t.showLabel?(w(),P("div",{key:1,class:ee(t.labelClasses)},R((o=t.df)==null?void 0:o.sub_label),3)):B("",!0)],8,dle)}const sr=ne(ule,[["render",fle]]),r8={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",webp:"image/webp",svg:"image/svg+xml"},ple=ve({name:"AttachImage",components:{FeatherIcon:Kd},extends:sr,props:{letterPlaceholder:{type:String,default:""},value:{type:String,default:""},df:{type:Object}},computed:{imageSizeStyle(){return this.size==="form"?{width:"135px",height:"135px"}:{}},shouldClear(){return!!this.value}},methods:{async handleClick(){return this.value?await this.clearImage():await this.selectImage()},async clearImage(){this.triggerChange(null)},async selectImage(){if(this.isReadOnly)return;const t={title:N.t`Select Image`,filters:[{name:"Image",extensions:Object.keys(r8)}]},{name:e,success:n,data:i}=await ipc.selectFile(t);if(!n)return;const s=e.split(".").at(-1),r=r8[s],o=await pM(r,i);this.triggerChange(o)}}}),mle=["title"],gle=["src"],yle={key:0,class:"flex h-full items-center justify-center text-gray-400 dark:text-gray-600 font-semibold w-full text-4xl select-none"},Ole={key:1,class:"w-6 h-6 text-gray-300 dark:text-gray-600",viewBox:"0 0 24 21",xmlns:"http://www.w3.org/2000/svg"};function ble(t,e,n,i,s,r){var a;const o=Q("FeatherIcon");return w(),P("div",{class:ee(["relative bg-white dark:bg-gray-900 border dark:border-gray-800 flex-center overflow-hidden group",{rounded:t.size==="form","w-20 h-20 rounded-full":t.size!=="small"&&t.size!=="form","w-12 h-12 rounded-full":t.size==="small"}]),title:(a=t.df)==null?void 0:a.label,style:qe(t.imageSizeStyle)},[t.value?(w(),P("img",{key:0,src:t.value},null,8,gle)):(w(),P("div",{key:1,class:ee([t.isReadOnly?"":"group-hover:opacity-90"])},[t.letterPlaceholder?(w(),P("div",yle,R(t.letterPlaceholder),1)):(w(),P("svg",Ole,[...e[1]||(e[1]=[v("path",{d:"M21 3h-4l-2-3H9L7 3H3a3 3 0 00-3 3v12a3 3 0 003 3h18a3 3 0 003-3V6a3 3 0 00-3-3zm-9 14a5 5 0 110-10 5 5 0 010 10z",fill:"currentColor","fill-rule":"nonzero"},null,-1)])]))],2)),v("div",{class:ee(["hidden w-full h-full absolute justify-center items-end",[t.isReadOnly?"":"group-hover:flex"]]),style:{background:"rgba(0, 0, 0, 0.2)","backdrop-filter":"blur(2px)"}},[v("button",{class:"bg-gray-100 dark:bg-gray-800 p-0.5 rounded mb-1",onClick:e[0]||(e[0]=(...l)=>t.handleClick&&t.handleClick(...l))},[_(o,{name:t.shouldClear?"x":"upload",class:"w-4 h-4 text-gray-600 dark:text-gray-400"},null,8,["name"])])],2)],14,mle)}const NM=ne(ple,[["render",ble]]),vle=ve({components:{FeatherIcon:Kd},extends:sr,props:{df:Object,value:{type:Object,default:null},border:{type:Boolean,default:!1},size:String},computed:{label(){var t,e;return this.value?this.value.name:((t=this.df)==null?void 0:t.placeholder)??((e=this.df)==null?void 0:e.label)??b`Attachment`},inputReadOnlyClasses(){if(this.value){if(this.isReadOnly)return"text-gray-800 cursor-default"}else return"text-gray-600";return"text-gray-900"},containerReadOnlyClasses(){return""}},methods:{upload(){this.$refs.fileInput.click()},clear(){this.$refs.fileInput.value="",this.triggerChange(null)},download(){if(!this.value)return;const{name:t,data:e}=this.value;if(!t||!e)return;const n=document.createElement("a");n.style.display="none",n.href=e,n.target="_self",n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)},async selectFile(t){var s;const n=(s=t.target.files)==null?void 0:s[0];if(!n)return;const i=await this.getAttachment(n);this.triggerChange(i)},async getAttachment(t){if(!t)return null;const e=t.name,n=t.type,i=await hre(t,n);return{name:e,type:n,data:i}}}}),wle=["disabled"],Sle={class:"me-2 flex gap-1"};function Cle(t,e,n,i,s,r){const o=Q("FeatherIcon");return w(),P("div",null,[t.showLabel&&t.df?(w(),P("div",{key:0,class:ee(t.labelClasses)},R(t.df.label),3)):B("",!0),v("div",{class:ee([t.containerClasses,"flex gap-2 items-center"])},[v("label",{for:"attachment",class:ee(["block whitespace-nowrap overflow-auto no-scrollbar",[t.inputClasses,t.value?"cursor-default":"text-gray-600 dark:text-gray-400"]])},R(t.label),3),v("input",{id:"attachment",ref:"fileInput",type:"file",accept:"image/*,.pdf",class:"hidden",disabled:!!t.value,onInput:e[0]||(e[0]=(...a)=>t.selectFile&&t.selectFile(...a))},null,40,wle),v("div",Sle,[t.value?B("",!0):(w(),P("button",{key:0,class:"p-0.5 rounded",onClick:e[1]||(e[1]=(...a)=>t.upload&&t.upload(...a))},[_(o,{name:"upload",class:"h-4 w-4 text-gray-600 dark:text-gray-400"})])),t.value?(w(),P("button",{key:1,class:"p-0.5 rounded",onClick:e[2]||(e[2]=(...a)=>t.download&&t.download(...a))},[_(o,{name:"download",class:"h-4 w-4 text-gray-600 dark:text-gray-400"})])):B("",!0),t.value&&!t.isReadOnly?(w(),P("button",{key:2,class:"p-0.5 rounded",onClick:e[3]||(e[3]=(...a)=>t.clear&&t.clear(...a))},[_(o,{name:"x",class:"h-4 w-4 text-gray-600 dark:text-gray-400"})])):B("",!0)])],2)])}const Ale=ne(vle,[["render",Cle]]),xle=ve({props:{schemaName:{type:String,required:!0},name:{type:String,required:!0}},data(){return{values:[]}},computed:{schema(){return this.fyo.schemaMap[this.schemaName]}},watch:{async name(t,e){t!==e&&await this.setValues()}},async mounted(){await this.setValues()},methods:{async setValues(){var n;const t=(((n=this.schema)==null?void 0:n.fields)??[]).filter(i=>i&&i.fieldtype!=="Table"&&i.fieldtype!=="AttachImage"&&i.fieldtype!=="Attachment"&&i.fieldname!=="name"&&!i.hidden&&!i.meta&&!i.abstract&&!i.computed),e=(await this.fyo.db.getAll(this.schemaName,{fields:t.map(i=>i.fieldname),filters:{name:this.name}}))[0];e&&(this.values=t.map(i=>{const s=e[i.fieldname];return qH(s)?{value:"",label:""}:{value:this.fyo.format(e[i.fieldname],i),label:i.label}}).filter(i=>!!i.value))}}}),kle={style:{"min-width":"192px","max-width":"300px"}},Ple={key:0,class:"font-semibold text-base text-gray-900 dark:text-gray-25"},Tle={class:"font-semibold text-base text-gray-600 dark:text-gray-400"},$le={key:0,class:"flex gap-2 p-2 flex-wrap"},Dle={class:"text-gray-600 dark:text-gray-500"},Mle={class:"text-gray-800 dark:text-gray-300 ml-1.5"};function Ile(t,e,n,i,s,r){var o,a,l;return w(),P("div",kle,[v("div",{class:ee(["p-2 flex justify-between",t.values.length?"border-b dark:border-gray-800":""])},[((o=t.schema)==null?void 0:o.naming)!=="random"&&!((a=t.schema)!=null&&a.isChild)?(w(),P("p",Ple,R(t.name),1)):B("",!0),v("p",Tle,R(((l=t.schema)==null?void 0:l.label)??""),1)],2),t.values.length?(w(),P("div",$le,[(w(!0),P(le,null,Pe(t.values,c=>(w(),P("p",{key:c.label,class:"pill bg-gray-200 dark:bg-gray-800"},[v("span",Dle,R(c.label),1),v("span",Mle,R(c.value),1)]))),128))])):B("",!0)])}const Rle=ne(xle,[["render",Ile]]),_le={name:"AutoComplete",components:{Dropdown:GC,Popover:V1,QuickView:Rle},extends:sr,emits:["focus"],data(){return{showQuickView:!1,linkValue:"",focInp:!1,isLoading:!1,suggestions:[],highlightedIndex:-1,isFocused:!1,isDropdownOpen:!1}},computed:{linkSchemaName(){var e,n,i;let t=(e=this.df)==null?void 0:e.target;if(!t){const s=((n=this.df)==null?void 0:n.references)??"";t=(i=this.doc)==null?void 0:i[s]}return t},options(){return this.df?c7(this.df,this.doc):[]},canLink(){var s,r;if(!this.value||!this.df)return!1;const t=(s=this.df)==null?void 0:s.fieldtype,e=t===Ie.Link,n=t===Ie.DynamicLink;if(!e&&!n)return!1;if(e&&this.df.target)return!0;const i=this.df.references;return!(!i||!((r=this.doc)!=null&&r[i]))}},watch:{value:{immediate:!0,handler(t){this.setLinkValue(this.getLinkValue(t))}}},mounted(){const t=this.linkValue||this.value;this.setLinkValue(this.getLinkValue(t))},unmounted(){this.showQuickView=!1},deactivated(){this.showQuickView=!1},methods:{clearValue(t){t&&(t.preventDefault(),t.stopPropagation()),this.triggerChange(""),this.setLinkValue("")},async routeToLinkedDoc(){const t=this.value;if(!this.linkSchemaName||!t)return;const e=$s(this.linkSchemaName,t);await St(e)},async focusInputTag(){this.focInp=!0,!this.linkValue&&(await this.$nextTick(),this.$refs.input.focus())},setLinkValue(t){this.linkValue=t},getLinkValue(t){const e=this.linkValue;let n=this.options.find(i=>i.value===t);return n||(n=this.options.find(i=>i.label===t)),!t&&!n?null:(n==null?void 0:n.label)??e},async updateSuggestions(t){typeof t=="string"&&this.setLinkValue(t,!0),this.isLoading=!0;const e=await this.getSuggestions(t);this.suggestions=this.setSetSuggestionAction(e),this.isLoading=!1},setSetSuggestionAction(t){for(const e of t)e.action||(e.action=()=>this.setSuggestion(e));return t},async getSuggestions(t=""){return t=t.toLowerCase(),t?this.options.map(e=>({...L1(t,e.label),item:e})).filter(({isMatch:e})=>e).sort((e,n)=>e.distance-n.distance).map(({item:e})=>e):this.options},setSuggestion(t){if(t!=null&&t.actionOnly){this.setLinkValue(this.value);return}t&&(this.setLinkValue(t.label),this.triggerChange(t.value))},onInputFocus(t){this.isFocused=!0},onClick(t,e){this.isFocused&&(e(!0),this.updateSuggestions(),this.isDropdownOpen=!0,this.$emit("focus",t))},onFocus(t,e){this.isFocused=!0,e(!0),this.updateSuggestions(),this.isDropdownOpen=!0,this.$emit("focus",t)},async onBlur(t,e){if(this.isFocused=!1,this.isDropdownOpen=!1,!t&&!this.value)return;if(!t){this.triggerChange("");return}if(this.suggestions.length===0){this.triggerChange(t);return}const n=this.suggestions.find(i=>i.label===t);if(n)this.setSuggestion(n);else{const i=await this.getSuggestions(t);this.setSuggestion(i[0])}},onInput(t,e){if(!this.isReadOnly){if(!t.target.value||this.focInp){t.target.value=null,this.focInp=!1,e(!1);return}this.triggerChange(t.target.value),this.updateSuggestions(t.target.value)}},async onPressEnter(t,e,n){if(t.preventDefault(),this.suggestions.length>0&&this.isFocused&&this.isDropdownOpen){await n(),this.closeDropdown(t,e);return}await this.updateSuggestions(this.linkValue||t.target.value),e(!0),this.isDropdownOpen=!0},onKeyDownUp(t,e,n){this.suggestions.length===0&&(this.updateSuggestions(),e(!0),this.isDropdownOpen=!0),n()},onKeyDownDown(t,e,n){this.suggestions.length===0&&(this.updateSuggestions(),e(!0),this.isDropdownOpen=!0),n()},closeDropdown(t,e){e(!1),this.isDropdownOpen=!1}}},Ele=["value","placeholder","readonly","tabindex","onClick","onBlur","onInput","onKeydown"],Qle=["onClick"],Nle={key:1,class:"flex items-center gap-1"};function Lle(t,e,n,i,s,r){const o=Q("feather-icon"),a=Q("QuickView"),l=Q("Popover"),c=Q("Dropdown");return w(),H(c,{items:s.suggestions,"is-loading":s.isLoading,df:t.df,doc:t.doc},{default:U(({toggleDropdown:u,highlightItemUp:h,highlightItemDown:p,selectHighlightedItem:m})=>[t.showLabel?(w(),P("div",{key:0,class:ee(t.labelClasses)},R(t.df.label),3)):B("",!0),v("div",{class:ee(["flex items-center justify-between pe-2 rounded",t.containerClasses]),style:qe(t.containerStyles)},[v("input",{ref:"input",spellcheck:"false",class:ee([t.inputClasses,"bg-transparent"]),type:"text",value:s.linkValue,placeholder:t.inputPlaceholder,readonly:t.isReadOnly,tabindex:t.isReadOnly?"-1":"0",onFocus:e[0]||(e[0]=y=>!t.isReadOnly&&r.onInputFocus(y)),onClick:y=>!t.isReadOnly&&r.onClick(y,u),onBlur:y=>!t.isReadOnly&&r.onBlur(y.target.value,u),onInput:y=>r.onInput(y,u),onKeydown:[pn(y=>r.onKeyDownUp(y,u,h),["up"]),pn(y=>r.onKeyDownDown(y,u,p),["down"]),pn(y=>r.onPressEnter(y,u,m),["enter"]),pn(y=>r.closeDropdown(y,u),["tab"]),pn(y=>r.closeDropdown(y,u),["esc"])]},null,42,Ele),!t.isReadOnly&&!r.canLink?(w(),P("svg",{key:0,class:"w-3 h-3",style:{background:"inherit","margin-right":"-3px"},viewBox:"0 0 5 10",xmlns:"http://www.w3.org/2000/svg",onClick:y=>!t.isReadOnly&&r.onFocus(y,u)},[v("path",{d:"M1 2.636L2.636 1l1.637 1.636M1 7.364L2.636 9l1.637-1.636",class:ee(["stroke-current",t.showMandatory?"text-red-400 dark:text-red-600":"text-gray-400"]),fill:"none","fill-rule":"evenodd","stroke-linecap":"round","stroke-linejoin":"round"},null,2)],8,Qle)):B("",!0),r.canLink?(w(),P("div",Nle,[t.value&&t.showClearButton?(w(),P("button",{key:0,class:"p-0.5 rounded bg-transparent text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-gray-100 transition-colors",onClick:e[1]||(e[1]=_i((...y)=>r.clearValue&&r.clearValue(...y),["stop","prevent"])),onMousedown:e[2]||(e[2]=_i(()=>{},["prevent"]))},[_(o,{name:"x",class:"w-3.5 h-3.5"})],32)):B("",!0),v("button",{class:"p-0.5 rounded -me1 bg-transparent",onMouseenter:e[3]||(e[3]=y=>s.showQuickView=!0),onMouseleave:e[4]||(e[4]=y=>s.showQuickView=!1),onClick:e[5]||(e[5]=(...y)=>r.routeToLinkedDoc&&r.routeToLinkedDoc(...y))},[_(l,{"show-popup":s.showQuickView,"entry-delay":300,placement:"bottom"},{target:U(()=>[_(o,{name:"chevron-right",class:"w-4 h-4 text-gray-600 dark:text-gray-400"})]),content:U(()=>[_(a,{"schema-name":r.linkSchemaName,name:t.value},null,8,["schema-name","name"])]),_:1},8,["show-popup"])],32)])):B("",!0)],6)]),_:1},8,["items","is-loading","df","doc"])}const zl=ne(_le,[["render",Lle]]),Fle=ve({name:"Check",extends:sr,props:{spaceBetween:{default:!1,type:Boolean},labelRight:{default:!0,type:Boolean},labelClass:String},emits:["focus"],data(){return{offColor:"#0000",color:"#A1ABB4"}},computed:{labelClasses(){return this.labelClass?this.labelClass:"text-gray-600 text-base"}},methods:{getChecked(t){return!!t},onChange(t){if(this.isReadOnly)return;const e=t.target;e instanceof HTMLInputElement&&this.triggerChange(e.checked)}}}),Ble={key:0,width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Vle=["fill"],jle=["fill"],zle=["fill"],Zle=["stroke"],qle=["checked","readonly","tabindex"];function Xle(t,e,n,i,s,r){return w(),P("div",{class:ee([t.inputClasses,t.containerClasses])},[v("label",{class:ee(["flex items-center",t.spaceBetween?"justify-between":""])},[t.showLabel&&!t.labelRight?(w(),P("div",{key:0,class:ee(["me-3",t.labelClasses])},R(t.df.label),3)):B("",!0),v("div",{style:{width:"14px",height:"14px"},class:ee(t.isReadOnly?"cursor-default":"cursor-pointer")},[t.value?(w(),P("svg",Ble,[e[2]||(e[2]=v("mask",{id:"path-1-inside-1_107_160",fill:"white"},[v("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3 0C1.34315 0 0 1.34315 0 3V11C0 12.6569 1.34315 14 3 14H11C12.6569 14 14 12.6569 14 11V3C14 1.34315 12.6569 0 11 0H3ZM5.49955 10.8938L11.687 3.58135L10.313 2.41865L4.75726 8.98447L2.6364 6.8636L1.3636 8.1364L4.1761 10.9489L4.86774 11.6405L5.49955 10.8938Z"})],-1)),v("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3 0C1.34315 0 0 1.34315 0 3V11C0 12.6569 1.34315 14 3 14H11C12.6569 14 14 12.6569 14 11V3C14 1.34315 12.6569 0 11 0H3ZM5.49955 10.8938L11.687 3.58135L10.313 2.41865L4.75726 8.98447L2.6364 6.8636L1.3636 8.1364L4.1761 10.9489L4.86774 11.6405L5.49955 10.8938Z",fill:t.color},null,8,Vle),v("path",{d:"M11.687 3.58135L12.4504 4.22729L13.0964 3.4639L12.333 2.81796L11.687 3.58135ZM5.49955 10.8938L6.26293 11.5398L6.26293 11.5398L5.49955 10.8938ZM10.313 2.41865L10.9589 1.65527L10.1955 1.00932L9.54957 1.77271L10.313 2.41865ZM4.75726 8.98447L4.05015 9.69158L4.81864 10.4601L5.52065 9.63041L4.75726 8.98447ZM2.6364 6.8636L3.3435 6.1565L2.6364 5.44939L1.92929 6.1565L2.6364 6.8636ZM1.3636 8.1364L0.656497 7.42929L-0.0506096 8.1364L0.656497 8.8435L1.3636 8.1364ZM4.1761 10.9489L3.469 11.656L3.469 11.656L4.1761 10.9489ZM4.86774 11.6405L4.16063 12.3476L4.92912 13.1161L5.63112 12.2865L4.86774 11.6405ZM1 3C1 1.89543 1.89543 1 3 1V-1C0.790861 -1 -1 0.790861 -1 3H1ZM1 11V3H-1V11H1ZM3 13C1.89543 13 1 12.1046 1 11H-1C-1 13.2091 0.790862 15 3 15V13ZM11 13H3V15H11V13ZM13 11C13 12.1046 12.1046 13 11 13V15C13.2091 15 15 13.2091 15 11H13ZM13 3V11H15V3H13ZM11 1C12.1046 1 13 1.89543 13 3H15C15 0.790861 13.2091 -1 11 -1V1ZM3 1H11V-1H3V1ZM10.9237 2.93541L4.73616 10.2479L6.26293 11.5398L12.4504 4.22729L10.9237 2.93541ZM9.66701 3.18204L11.0411 4.34473L12.333 2.81796L10.9589 1.65527L9.66701 3.18204ZM5.52065 9.63041L11.0763 3.06459L9.54957 1.77271L3.99387 8.33853L5.52065 9.63041ZM1.92929 7.57071L4.05015 9.69158L5.46437 8.27736L3.3435 6.1565L1.92929 7.57071ZM2.07071 8.8435L3.3435 7.57071L1.92929 6.1565L0.656497 7.42929L2.07071 8.8435ZM4.88321 10.2418L2.07071 7.42929L0.656497 8.8435L3.469 11.656L4.88321 10.2418ZM5.57485 10.9334L4.88321 10.2418L3.469 11.656L4.16063 12.3476L5.57485 10.9334ZM4.73616 10.2479L4.10435 10.9946L5.63112 12.2865L6.26293 11.5398L4.73616 10.2479Z",fill:t.color,mask:"url(#path-1-inside-1_107_160)"},null,8,jle)])):(w(),P("svg",{key:1,width:"14",height:"14",viewBox:"0 0 14 14",fill:t.offColor,xmlns:"http://www.w3.org/2000/svg"},[v("rect",{x:"0.5",y:"0.5",width:"13",height:"13",rx:"3",stroke:t.color,"stroke-width":"1.5"},null,8,Zle)],8,zle)),v("input",{ref:"input",type:"checkbox",checked:t.getChecked(t.value),readonly:t.isReadOnly,tabindex:t.isReadOnly?"-1":"0",onChange:e[0]||(e[0]=(...o)=>t.onChange&&t.onChange(...o)),onFocus:e[1]||(e[1]=o=>t.$emit("focus",o))},null,40,qle)],2),t.showLabel&&t.labelRight?(w(),P("div",{key:1,class:ee(["ms-3",t.labelClasses])},R(t.df.label),3)):B("",!0)],2)],2)}const Fp=ne(Fle,[["render",Xle],["__scopeId","data-v-1b06ac33"]]),Wle=ve({name:"Button",extends:sr,props:{spaceBetween:{type:Boolean,default:!0},labelRight:{type:Boolean,default:!1},labelClass:{type:String,default:""},showLabel:{type:Boolean,default:!0}},computed:{labelClasses(){return this.labelClass||"text-gray-600 text-base"}},methods:{onClick(t){this.isReadOnly||this.triggerChange(!0)}}}),Gle={class:"flex w-full"},Ule=["disabled"];function Hle(t,e,n,i,s,r){return w(),P("div",{class:ee([[t.containerClasses],"mt-6 w-full text-gray-900 dark:text-gray-100 text-base focus:outline-none"])},[v("label",Gle,[v("button",{type:"button",onClick:e[0]||(e[0]=(...o)=>t.onClick&&t.onClick(...o)),disabled:t.isReadOnly,class:"w-full flex items-center justify-center p-2 rounded-md bg-blue-300 hover:bg-blue-400 hover:shadow-md hover:-translate-y-[1px] transition"},R(t.df.label),9,Ule)])],2)}const Yle=ne(Wle,[["render",Hle]]),Kle={name:"Row",props:{columnWidth:{type:String,default:"1fr"},columnCount:{type:Number,default:0},ratio:{type:Array,default:()=>[]},gridTemplateColumns:{type:String,default:null},gap:String},computed:{style(){let t={};return this.columnCount&&(t["grid-template-columns"]=`repeat(${this.columnCount}, ${this.columnWidth})`),this.ratio.length&&(t["grid-template-columns"]=this.ratio.map(e=>`minmax(0, ${e}fr)`).join(" ")),this.gridTemplateColumns&&(t["grid-template-columns"]=this.gridTemplateColumns),this.gap&&(t["grid-gap"]=this.gap),t}}};function Jle(t,e,n,i,s,r){return w(),P("div",Kc({class:"inline-grid",style:r.style},t.$attrs),[Ge(t.$slots,"default")],16)}const ho=ne(Kle,[["render",Jle]]),ece={name:"Color",components:{Popover:V1,Row:ho},extends:sr,computed:{colors(){return this.df.options},selectedColorLabel(){if(!this.colors)return this.value;const t=this.colors.find(e=>this.value===e.value);return t?t.label:this.value}},methods:{setColorValue(t){t.startsWith("#")||(t="#"+t),/^#[0-9A-F]{6}$/i.test(t)&&this.triggerChange(t)}}},tce=["onClick"],nce={class:"flex items-center"},ice={key:1},sce={key:2,class:"text-gray-400 dark:text-gray-600"},rce={class:"text-sm p-2 text-center"},oce=["onClick"],ace={class:"mt-3 w-28"},lce=["placeholder","value"];function cce(t,e,n,i,s,r){const o=Q("Row"),a=Q("Popover");return w(),P("div",null,[t.showLabel?(w(),P("div",{key:0,class:ee(t.labelClasses)},R(t.df.label),3)):B("",!0),_(a,{placement:"bottom-end"},{target:U(({togglePopover:l})=>[v("div",{tabindex:"0",class:ee([t.inputClasses,t.containerClasses]),onClick:c=>!t.isReadOnly&&l()},[v("div",nce,[t.value?(w(),P("div",{key:0,class:"w-3 h-3 rounded me-1",style:qe({backgroundColor:t.value})},null,4)):B("",!0),t.value?(w(),P("span",ice,R(r.selectedColorLabel),1)):(w(),P("span",sce,R(t.inputPlaceholder),1))])],10,tce)]),content:U(()=>[v("div",rce,[v("div",null,[_(o,{"column-count":5,gap:"0.5rem"},{default:U(()=>[(w(!0),P(le,null,Pe(r.colors,l=>(w(),P("div",{key:l.value,class:"w-4 h-4 rounded cursor-pointer",style:qe({backgroundColor:l.value}),onClick:c=>r.setColorValue(l.value)},null,12,oce))),128))]),_:1})]),v("div",ace,[v("input",{type:"color",placeholder:t.t`Custom Hex`,class:ee([t.inputClasses,t.containerClasses]),value:t.value,style:{padding:"0"},onChange:e[0]||(e[0]=l=>r.setColorValue(l.target.value))},null,42,lce)])])]),_:1})])}const uce=ne(ece,[["render",cce]]),qa=ve({name:"Data",extends:sr,computed:{inputType(){return"text"}}}),nu=ve({name:"Int",extends:qa,computed:{inputType(){return"number"}},methods:{parse(t){return Jc(t)}}}),nh=ve({name:"Float",extends:nu,computed:{inputType(){return"number"}},methods:{parse(t){return kn(t)}}}),dce=ve({name:"Currency",extends:nh,emits:["input","focus"],data(){return{showInput:!1,currencySymbol:""}},props:{focusInput:Boolean},created(){this.focusInput&&(this.showInput=!0,Bi(()=>{this.focus()}))},computed:{formattedValue(){const t=this.parse(this.value);return N.format(t,this.df,this.doc)}},methods:{onFocus(t){const e=t.target;e instanceof HTMLInputElement&&(e.select(),this.showInput=!0,this.$emit("focus",t))},round(t){return ui(t)||(t=this.parse(t)),ui(t)?t.round():N.pesa(0).round()},parse(t){return KD(t,this.fyo)},onBlur(t){const e=t.target;e instanceof HTMLInputElement&&(this.showInput=!1,this.triggerChange(e.value))},activateInput(){this.isReadOnly||(this.showInput=!0,Bi(()=>{this.focus()}))}}}),hce=["type","value","placeholder","readonly","tabindex"];function fce(t,e,n,i,s,r){return w(),P("div",null,[t.showLabel?(w(),P("div",{key:0,class:ee(t.labelClasses)},R(t.df.label),3)):B("",!0),mn(v("input",{ref:"input",class:ee(["text-end",[t.inputClasses,t.containerClasses]]),type:t.inputType,value:t.round(t.value),placeholder:t.inputPlaceholder,readonly:t.isReadOnly,tabindex:t.isReadOnly?"-1":"0",onBlur:e[0]||(e[0]=(...o)=>t.onBlur&&t.onBlur(...o)),onFocus:e[1]||(e[1]=(...o)=>t.onFocus&&t.onFocus(...o)),onInput:e[2]||(e[2]=o=>t.$emit("input",o))},null,42,hce),[[ii,t.showInput]]),mn(v("div",{class:ee(["whitespace-nowrap overflow-x-auto no-scrollbar",[t.inputClasses,t.containerClasses]]),tabindex:"0",onClick:e[3]||(e[3]=(...o)=>t.activateInput&&t.activateInput(...o)),onFocus:e[4]||(e[4]=(...o)=>t.activateInput&&t.activateInput(...o))},R(t.formattedValue),35),[[ii,!t.showInput]])])}const Bp=ne(dce,[["render",fce]]),pce=ve({extends:sr,emits:["input","focus"],data(){return{showInput:!1}},computed:{inputValue(){let t=this.value;return typeof t=="string"&&(t=new Date(t)),t instanceof Date&&!Number.isNaN(t.valueOf())?Te.fromJSDate(t).toISODate():""},inputType(){return"date"},formattedValue(){const t=this.parse(this.value);return N.format(t,this.df,this.doc)},borderClasses(){if(!this.border)return"";const t="border border-gray-200 dark:border-gray-800";let e="bg-gray-25 dark:bg-gray-875";return this.isReadOnly&&(e="bg-gray-50 dark:bg-gray-850"),this.showInput?e:t+" "+e}},methods:{onFocus(t){const e=t.target;e instanceof HTMLInputElement&&(e.select(),this.showInput=!0,this.$emit("focus",t))},onBlur(t){const e=t.target;if(!(e instanceof HTMLInputElement))return;this.showInput=!1;let n=Te.fromISO(e.value).toJSDate();Number.isNaN(n.valueOf())&&(n=null),this.triggerChange(n)},activateInput(){this.isReadOnly||(this.showInput=!0,Bi(()=>{this.focus(),this.$refs.input.showPicker()}))}}}),mce=["type","value","placeholder","readonly","tabindex"],gce={key:1,class:"text-base text-gray-500 w-full"},yce={key:2,class:"-me-0.5 ms-1"};function Oce(t,e,n,i,s,r){const o=Q("FeatherIcon");return w(),P("div",null,[t.showLabel?(w(),P("div",{key:0,class:ee(t.labelClasses)},R(t.df.label),3)):B("",!0),mn(v("input",{ref:"input",class:ee([t.inputClasses,t.containerClasses]),type:t.inputType,value:t.inputValue,placeholder:t.inputPlaceholder,readonly:t.isReadOnly,tabindex:t.isReadOnly?"-1":"0",onBlur:e[0]||(e[0]=(...a)=>t.onBlur&&t.onBlur(...a)),onFocus:e[1]||(e[1]=(...a)=>t.onFocus&&t.onFocus(...a)),onInput:e[2]||(e[2]=a=>t.$emit("input",a))},null,42,mce),[[ii,t.showInput]]),mn(v("div",{class:ee(["flex",[t.containerClasses,t.sizeClasses]]),tabindex:"0",onClick:e[3]||(e[3]=(...a)=>t.activateInput&&t.activateInput(...a)),onFocus:e[4]||(e[4]=(...a)=>t.activateInput&&t.activateInput(...a))},[t.isEmpty?t.inputPlaceholder?(w(),P("p",gce,R(t.inputPlaceholder),1)):B("",!0):(w(),P("p",{key:0,class:ee([[t.baseInputClasses],"overflow-auto no-scrollbar whitespace-nowrap dark:text-gray-100"])},R(t.formattedValue),3)),t.isReadOnly?B("",!0):(w(),P("button",yce,[_(o,{name:"calendar",class:ee(["w-4 h-4",t.showMandatory?"text-red-600":"text-gray-600 dark:text-gray-400"])},null,8,["class"])]))],34),[[ii,!t.showInput]])])}const HC=ne(pce,[["render",Oce]]),bce=ve({extends:HC,computed:{inputType(){return"datetime-local"},inputValue(){let t=this.value;return typeof t=="string"&&(t=new Date(t)),t instanceof Date&&!Number.isNaN(t.valueOf())?Te.fromJSDate(t).toISO().split(".")[0]:""}}}),vce={name:"Badge",props:{color:{default:"gray"}},computed:{colorClass(){return jf(this.color)}}};function wce(t,e,n,i,s,r){return w(),P("div",{class:ee(["inline-block rounded-md px-2 py-1 truncate select-none",r.colorClass])},[Ge(t.$slots,"default")],2)}const YC=ne(vce,[["render",wce]]),rr={name:"Link",extends:zl,data(){return{results:[],filtersDisabled:!1}},watch:{value:{immediate:!0,handler(t){this.setLinkValue(t)}}},mounted(){this.value&&this.setLinkValue()},props:{focusInput:Boolean,showClearButton:Boolean},async created(){this.focusInput&&this.focusInputTag()},methods:{async setLinkValue(t,e){var a,l;if(e)return this.linkValue=t||"";const n=t??this.value,{fieldname:i,target:s}=this.df??{},r=(a=N.schemaMap[s??""])==null?void 0:a.linkDisplayField;if(!r)return this.linkValue=n;const o=await((l=this.doc)==null?void 0:l.loadAndGetLink(i));this.linkValue=(o==null?void 0:o.get(r))??""},getTargetSchemaName(){return this.df.target},async getOptions(t){var r;const e=this.getTargetSchemaName();if(!e)return[];if((r=this.results)!=null&&r.length)return this.results;const n=N.schemaMap[e],i=[...new Set(["name",n.titleField,this.df.groupBy])].filter(Boolean),s=await N.db.getAll(e,{filters:t,fields:i});return this.results=s.map(o=>{const a={label:o[n.titleField],value:o.name};return this.df.groupBy&&(a.group=o[this.df.groupBy]),a}).filter(Boolean)},async getSuggestions(t=""){var i;let e=this.filtersDisabled?null:await this.getFilters(),n=await this.getOptions(e||{});return t&&(n=n.map(s=>({...L1(t,s.label),item:s})).filter(({isMatch:s})=>s).sort((s,r)=>s.distance-r.distance).map(({item:s})=>s)),n.length===0&&!this.df.emptyMessage&&(e&&((i=N.singles.SystemSettings)!=null&&i.allowFilterBypass)?n=[{component:Hs({template:'<span class="text-gray-600 dark:text-gray-400">{{ t`No results found, disable filters` }}</span>'}),action:()=>this.disableFiltering(),actionOnly:!0}]:this.isFocused&&(!this.doc||!this.df.create)&&(n=[{component:Hs({template:'<span class="text-gray-600 dark:text-gray-400">{{ t`No results found` }}</span>'}),action:()=>{},actionOnly:!0}])),this.doc&&this.df.create&&(n=n.concat(this.getCreateNewOption())),n},getCreateNewOption(){return{label:b`Create`,action:()=>this.openNewDoc(),actionOnly:!0,component:Hs({template:'<div class="flex items-center font-semibold">{{ t`Create` }}<Badge color="blue" class="ms-2" v-if="isNewValue">{{ linkValue }}</Badge></div>',computed:{value:()=>this.value,linkValue:()=>this.linkValue,isNewValue:()=>{const t=this.suggestions.map(e=>e.label);return this.linkValue&&!t.includes(this.linkValue)}},components:{Badge:YC}})}},disableFiltering(t){this.filtersDisabled=!0,this.results=[],setTimeout(()=>{this.isDropdownOpen=!0,this.updateSuggestions(t)},1)},async openNewDoc(){const t=this.df.target,e=this.linkValue||N.doc.getTemporaryName(N.schemaMap[t]),n=await this.getCreateFilters(),{openQuickEdit:i}=await rn(async()=>{const{openQuickEdit:r}=await Promise.resolve().then(()=>su);return{openQuickEdit:r}},void 0),s=N.doc.getNewDoc(t,{name:e,...n});i({doc:s}),s.once("afterSync",()=>{this.$router.back(),this.results=[],this.triggerChange(s.name)})},async getCreateFilters(){var r,o;const{schemaName:t,fieldname:e}=this.df,n=(o=(r=N.models[t])==null?void 0:r.createFilters)==null?void 0:o[e];let i=await(n==null?void 0:n(this.doc));if(i!==void 0)return i;const s=await this.getFilters()??{};return BC(s)},async getFilters(){var i,s,r;if(this.df.filters)return this.df.filters;if((i=N.singles.SystemSettings)!=null&&i.removeFilter)return null;const{schemaName:t,fieldname:e}=this.df,n=(r=(s=N.models[t])==null?void 0:s.filters)==null?void 0:r[e];if(n===void 0)return null;if(this.doc)return await n(this.doc);try{return await n()}catch{return null}}}},Sce={name:"DynamicLink",extends:rr,inject:{report:{default:null}},props:["target"],created(){const t=`doc.${this.df.references}`;this.targetWatcher=this.$watch(t,function(e,n){n&&e!==n&&this.triggerChange("")})},unmounted(){this.targetWatcher()},methods:{getTargetSchemaName(){var n,i;const t=this.df.references;if(!t)return null;let e=(n=this.doc)==null?void 0:n[t];return e||(e=(i=this.report)==null?void 0:i[t]),!e||!N.schemaMap[e]?null:e},async getOptions(){var r;this.results=[];const t=this.getTargetSchemaName();if(!t)return[];if((r=this.results)!=null&&r.length)return this.results;const e=N.schemaMap[t],n=await this.getFilters(),i=[...new Set(["name",e.titleField,this.df.groupBy])].filter(Boolean),s=await N.db.getAll(t,{filters:n,fields:i});return this.results=s.map(o=>{const a={label:o[e.titleField],value:o.name};return this.df.groupBy&&(a.group=o[this.df.groupBy]),a}).filter(Boolean)},async openNewDoc(){const t=this.getTargetSchemaName();if(!t)return;const e=this.linkValue||N.doc.getTemporaryName(N.schemaMap[t]),n=await this.getCreateFilters(),{openQuickEdit:i}=await rn(async()=>{const{openQuickEdit:r}=await Promise.resolve().then(()=>su);return{openQuickEdit:r}},void 0),s=N.doc.getNewDoc(t,{name:e,...n});i({doc:s}),s.once("afterSync",()=>{this.$router.back(),this.results=[],this.triggerChange(s.name)})}}},Cce=ve({name:"Select",extends:sr,emits:["focus"],data(){return{dropdownVisible:!1,selectValue:this.value}},props:{closeDropDown:{type:Boolean,default:!0}},computed:{options(){return this.df.fieldtype!=="Select"?[]:this.df.options}},methods:{toggleDropdown(){this.closeDropDown?this.isReadOnly||(this.dropdownVisible=!this.dropdownVisible):this.dropdownVisible=!0},selectOption(t){this.selectValue=t.label,this.triggerChange(t.value),this.closeDropDown&&(this.dropdownVisible=!this.dropdownVisible)}}}),Ace={key:0,class:"cursor-text text-black dark:text-white w-full"},xce={key:1},kce={key:2,class:"w-3 h-3",style:{background:"inherit","margin-right":"-3px"},viewBox:"0 0 5 10",xmlns:"http://www.w3.org/2000/svg"},Pce={key:0,class:"absolute z-10 mt-4 w-60 bg-white dark:bg-gray-850 border border-gray-300 dark:border-gray-700 cursor-pointer rounded-md shadow-lg"},Tce={class:"max-h-40 p-1 overflow-auto custom-scroll custom-scroll-thumb1"},$ce=["onClick"],Dce={key:0,xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"13",height:"20",viewBox:"0 0 50 50",fill:"currentColor",class:"mr-1"};function Mce(t,e,n,i,s,r){const o=BS("on-outside-click");return w(),P("div",null,[t.showLabel?(w(),P("div",{key:0,class:ee(t.labelClasses)},R(t.df.label),3)):B("",!0),mn((w(),P("div",{class:ee(["relative flex items-center justify-between",[t.inputClasses,t.containerClasses,t.dropdownVisible?"dark:hover:bg-gray-850":""]])},[v("div",{class:"w-full",onClick:e[0]||(e[0]=(...a)=>t.toggleDropdown&&t.toggleDropdown(...a))},[v("div",{class:ee(["flex items-center justify-between bg-transparent w-full cursor-pointer custom-scroll custom-scroll-thumb2",{"pointer-events-none":t.isReadOnly,"text-gray-500":!t.value}])},[t.selectValue||t.value?(w(),P("span",Ace,R(t.selectValue?t.selectValue:t.value),1)):(w(),P("span",xce,R(t.inputPlaceholder),1)),t.isReadOnly?B("",!0):(w(),P("svg",kce,[v("path",{d:"M1 2.636L2.636 1l1.637 1.636M1 7.364L2.636 9l1.637-1.636",class:ee(["stroke-current",t.showMandatory?"text-red-400 dark:text-red-600":"text-gray-400 dark:text-gray-600"]),fill:"none","fill-rule":"evenodd","stroke-linecap":"round","stroke-linejoin":"round"},null,2)]))],2),t.dropdownVisible?(w(),P("div",Pce,[v("ul",Tce,[(w(!0),P(le,null,Pe(t.options,a=>(w(),P("li",{key:a.value,onClick:l=>t.selectOption(a),class:ee(["p-1.5 rounded-md hover:bg-gray-100 dark:hover:bg-gray-875 flex",t.selectValue!==a.label?"pl-6":"pl-2"])},[t.selectValue===a.label?(w(),P("svg",Dce,[...e[1]||(e[1]=[v("path",{d:"M 41.9375 8.625 C 41.273438 8.648438 40.664063 9 40.3125 9.5625 L 21.5 38.34375 L 9.3125 27.8125 C 8.789063 27.269531 8.003906 27.066406 7.28125 27.292969 C 6.5625 27.515625 6.027344 28.125 5.902344 28.867188 C 5.777344 29.613281 6.078125 30.363281 6.6875 30.8125 L 20.625 42.875 C 21.0625 43.246094 21.640625 43.410156 22.207031 43.328125 C 22.777344 43.242188 23.28125 42.917969 23.59375 42.4375 L 43.6875 11.75 C 44.117188 11.121094 44.152344 10.308594 43.78125 9.644531 C 43.410156 8.984375 42.695313 8.589844 41.9375 8.625 Z"},null,-1)])])):B("",!0),He(" "+R(a.label),1)],10,$ce))),128))])])):B("",!0)])],2)),[[o,()=>t.dropdownVisible=!1]])])}const iu=ne(Cce,[["render",Mce]]),Ice={name:"Text",extends:sr,props:{rows:{type:Number,default:3}},emits:["focus","input"]},Rce=["rows","value","placeholder","readonly","tabindex"];function _ce(t,e,n,i,s,r){return w(),P("div",null,[t.showLabel?(w(),P("div",{key:0,class:ee(t.labelClasses)},R(t.df.label),3)):B("",!0),v("div",{class:ee(t.showMandatory?"show-mandatory":"")},[v("textarea",{ref:"input",rows:t.df.rows??n.rows,class:ee(["resize-none bg-transparent",t.inputClasses,t.containerClasses]),value:t.value,placeholder:t.inputPlaceholder,style:{"vertical-align":"top"},readonly:t.isReadOnly,tabindex:t.isReadOnly?"-1":"0",onBlur:e[0]||(e[0]=o=>t.triggerChange(o.target.value)),onFocus:e[1]||(e[1]=o=>t.$emit("focus",o)),onInput:e[2]||(e[2]=o=>t.$emit("input",o))},null,42,Rce)],2)])}const j1=ne(Ice,[["render",_ce]]),Ece=ve({name:"Secret",extends:sr,computed:{inputType(){return"password"}}}),Qce={AttachImage:NM,Data:qa,Check:Fp,Button:Yle,Color:uce,Select:iu,Link:rr,Date:HC,Datetime:bce,AutoComplete:zl,DynamicLink:Sce,Int:nu,Float:nh,Attachment:Ale,Currency:Bp,Text:j1,Secret:Ece},is={name:"FormControl",methods:{clear(){const t=this.$refs.control.$refs.input;t instanceof HTMLInputElement&&(t.value="")},select(){var t,e;(e=(t=this.$refs.control.$refs)==null?void 0:t.input)==null||e.select()},focus(){this.$refs.control.focus()},getInput(){return this.$refs.control.$refs.input}},render(){const t=this.$attrs.df.fieldtype,e=Qce[t]??qa;return ja(e,{...this.$attrs,ref:"control"})}},Nce={name:"TableRow",components:{Row:ho,FormControl:is,Button:At},provide(){return{doc:Dt(()=>this.row)}},props:{row:ze,tableFields:Array,size:String,ratio:Array,isNumeric:Function,readOnly:Boolean,canEditRow:{type:Boolean,default:!1}},emits:["remove","change"],data:()=>({isRowIndexVisible:!1,errors:{}}),computed:{hasErrors(){return Object.values(this.errors).filter(Boolean).length}},beforeCreate(){this.$options.components.FormControl=is},methods:{async onChange(t,e){const n=t.fieldname;this.errors[n]=null;const i=this.row[n];try{await this.row.set(n,e),this.$emit("change",t,e)}catch(s){this.errors[n]=eh(s,this.row),this.row[n]="",Bi(()=>this.row[n]=i)}},getErrorString(){return Object.values(this.errors).filter(Boolean).join(" ")},openRowQuickEdit(){this.row&&this.$parent.$emit("editrow",this.row)},onFieldFocus(t){t===0&&(this.isRowIndexVisible=!0)},onFieldBlur(t){t===0&&(this.isRowIndexVisible=!1)},focusFirstInput(){const t=this.$el.querySelector(".form-control, input, textarea, select");t&&t.focus()}}},Lce={class:"relative w-4 h-4 flex items-center justify-center"},Fce={key:0},Bce={key:1,class:"text-xs text-red-600 ps-2 col-span-full relative",style:{bottom:"0.75rem",height:"0px"}};function Vce(t,e,n,i,s,r){const o=Q("feather-icon"),a=Q("FormControl"),l=Q("Button"),c=Q("Row");return w(),H(c,{ratio:n.ratio,class:ee(["w-full px-2 group flex items-center justify-center h-row-mid",n.readOnly?"":"hover:bg-gray-25 dark:hover:bg-gray-900"])},{default:U(()=>[v("div",{class:"flex items-center ps-2 text-gray-600 dark:text-gray-400",onMouseenter:e[4]||(e[4]=u=>t.isRowIndexVisible=!1),onMouseleave:e[5]||(e[5]=u=>t.isRowIndexVisible=!0)},[v("span",Lce,[!n.readOnly&&!t.isRowIndexVisible?(w(),H(o,{key:0,name:"x",class:"w-4 h-4 -ms-1 cursor-pointer rounded focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-blue-50 dark:focus:bg-gray-800 transition",button:!0,tabindex:"0",role:"button","aria-label":"Delete row",onClick:e[0]||(e[0]=u=>t.$emit("remove")),onKeydown:e[1]||(e[1]=pn(u=>t.$emit("remove"),["enter"]))})):B("",!0),!n.readOnly&&t.isRowIndexVisible?(w(),P("span",{key:1,class:"absolute left-0 top-0 w-full h-full flex items-center justify-center focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 rounded",tabindex:"0",role:"button","aria-label":"Delete row",onFocus:e[2]||(e[2]=u=>t.isRowIndexVisible=!1),onKeydown:e[3]||(e[3]=pn(u=>t.$emit("remove"),["enter"]))},R(n.row.idx+1),33)):B("",!0)]),n.readOnly?(w(),P("span",Fce,R(n.row.idx+1),1)):B("",!0)],32),(w(!0),P(le,null,Pe(n.tableFields,(u,h)=>(w(),H(a,{key:u.fieldname,size:n.size,df:u,value:n.row[u.fieldname],onChange:p=>r.onChange(u,p),onFocus:p=>r.onFieldFocus(h),onBlur:p=>r.onFieldBlur(h)},null,8,["size","df","value","onChange","onFocus","onBlur"]))),128)),n.canEditRow?(w(),H(l,{key:0,icon:!0,padding:!1,background:!1,onClick:r.openRowQuickEdit},{default:U(()=>[_(o,{name:"edit",class:"w-4 h-4 text-gray-600 dark:text-gray-400"})]),_:1},8,["onClick"])):B("",!0),r.hasErrors?(w(),P("div",Bce,R(r.getErrorString()),1)):B("",!0)]),_:1},8,["ratio","class"])}const jce=ne(Nce,[["render",Vce]]),zce={name:"Table",components:{Row:ho,TableRow:jce},extends:sr,props:{value:{type:Array,default:()=>[]},showHeader:{type:Boolean,default:!0},maxRowsBeforeOverflow:{type:Number,default:3},border:{type:Boolean,default:!1}},emits:["editrow","row-change"],data(){return{maxHeight:""}},computed:{height(){return this.size,2},canEditRow(){return this.df.edit},ratio(){const t=[.3].concat(this.tableFields.map(()=>1));return this.canEditRow?t.concat(.3):t},tableFields(){return(N.schemaMap[this.df.target].tableFields??[]).map(e=>N.getField(this.df.target,e))}},watch:{value(){this.setMaxHeight()}},mounted(){N.store.isDevelopment&&(window.tab=this)},methods:{focus(){},async addRow(){await this.doc.append(this.df.fieldname),await Bi(),this.scrollToRow(this.value.length-1),this.triggerChange(this.value),this.$nextTick(()=>{const t=this.$refs["table-row"];if(t&&t.length>0){const e=t[t.length-1];e.focusFirstInput&&e.focusFirstInput()}})},removeRow(t){this.doc.remove(this.df.fieldname,t.idx).then(e=>{e&&this.triggerChange(this.value)})},scrollToRow(t){const e=this.$refs["table-row"][t];e&&e.$el.scrollIntoView({block:"nearest"})},setMaxHeight(){var i,s,r,o;if(this.maxRowsBeforeOverflow===0)return this.maxHeight="";const t=((i=this==null?void 0:this.value)==null?void 0:i.length)??0;if(t===0)return this.maxHeight="";const e=(o=(r=(s=this.$refs)==null?void 0:s["table-row"])==null?void 0:r[0])==null?void 0:o.$el.offsetHeight;if(e===void 0)return this.maxHeight="";const n=e*Math.min(this.maxRowsBeforeOverflow,t);return this.maxHeight=`${n}px`}}},Zce={key:0},qce={key:0,class:"text-gray-600 dark:text-gray-400 text-sm mb-1"},Xce={key:0,class:"text-xs"},Wce={class:"flex items-center ps-1"},Gce={key:0,class:"text-end px-2"};function Uce(t,e,n,i,s,r){var c;const o=Q("Row"),a=Q("TableRow"),l=Q("feather-icon");return(c=r.tableFields)!=null&&c.length?(w(),P("div",Zce,[t.showLabel?(w(),P("div",qce,R(t.df.label),1)):B("",!0),v("div",{class:ee(n.border?"border dark:border-gray-800 rounded-md":"")},[_(o,{ratio:r.ratio,class:"border-b dark:border-gray-800 px-2 text-gray-600 dark:text-gray-400 w-full flex items-center"},{default:U(()=>[e[1]||(e[1]=v("div",{class:"flex items-center ps-2"},"#",-1)),(w(!0),P(le,null,Pe(r.tableFields,u=>(w(),P("div",{key:u.fieldname,class:ee(["flex px-2 h-row-mid",[u.sub_label?"flex-col items-center text-center":t.isNumeric(u)?"ms-auto items-center":"items-center"]])},[v("span",null,R(u.label),1),u.sub_label?(w(),P("p",Xce,R(u.sub_label),1)):B("",!0)],2))),128))]),_:1},8,["ratio"]),n.value?(w(),P("div",{key:0,class:"overflow-auto custom-scroll custom-scroll-thumb1",style:qe({"max-height":s.maxHeight})},[(w(!0),P(le,null,Pe(n.value,(u,h)=>(w(),H(a,Kc({ref_for:!0,ref:"table-row",key:u.name,class:h<n.value.length-1?"border-b dark:border-gray-800":""},{ref_for:!0},{row:u,tableFields:r.tableFields,size:t.size,ratio:r.ratio,isNumeric:t.isNumeric},{"read-only":t.isReadOnly,"can-edit-row":r.canEditRow,onRemove:p=>r.removeRow(u),onChange:e[0]||(e[0]=(p,m)=>t.$emit("row-change",p,m,t.df))}),null,16,["class","read-only","can-edit-row","onRemove"]))),128))],4)):B("",!0),t.isReadOnly?B("",!0):(w(),H(o,{key:1,ratio:r.ratio,class:ee(["text-gray-500 cursor-pointer px-2 w-full h-row-mid flex items-center focus:outline-none focus:ring-1 focus:ring-blue-500",n.value.length>0?"border-t dark:border-gray-800":""]),tabindex:"0",onClick:r.addRow,onKeydown:pn(r.addRow,["enter"])},{default:U(()=>[v("div",Wce,[_(l,{name:"plus",class:"w-4 h-4 text-gray-500"})]),v("div",{class:"flex justify-between px-2",style:qe(`grid-column: 2 / ${r.ratio.length+1}`)},[v("p",null,R(t.t`Add Row`),1),n.value&&n.maxRowsBeforeOverflow&&n.value.length>n.maxRowsBeforeOverflow?(w(),P("p",Gce,R(t.t`${n.value.length} rows`),1)):B("",!0)],4)]),_:1},8,["ratio","class","onClick","onKeydown"]))],2)])):B("",!0)}const z1=ne(zce,[["render",Uce]]),Hce=ve({components:{FormControl:is,Table:z1},props:{title:{type:String,default:""},errors:{type:Object,required:!0},showTitle:Boolean,doc:{type:Object,required:!0},collapsible:{type:Boolean,default:!0},fields:{type:Array,required:!0}},emits:["editrow","value-change","row-change"],data(){return{collapsed:!1}},mounted(){dO(this.doc,this.$refs.nameField)},methods:{tableValue(t){return Array.isArray(t)?t:[]},toggleCollapsed(){this.collapsible&&(this.collapsed=!this.collapsed)}}}),Yce={key:0},Kce={class:"text-base text-gray-900 dark:text-gray-25 font-semibold"},Jce={key:1,class:"grid gap-4 gap-x-8 grid-cols-2"},eue={key:2,class:"text-sm text-red-600 mt-1"};function tue(t,e,n,i,s,r){const o=Q("feather-icon"),a=Q("Table"),l=Q("FormControl");return(t.fields??[]).length>0?(w(),P("div",Yce,[t.showTitle&&t.title?(w(),P("div",{key:0,class:ee(["flex justify-between items-center select-none",[t.collapsed?"":"mb-4",t.collapsible?"cursor-pointer":""]]),onClick:e[0]||(e[0]=(...c)=>t.toggleCollapsed&&t.toggleCollapsed(...c))},[v("h2",Kce,R(t.title),1),t.collapsible?(w(),H(o,{key:0,name:t.collapsed?"chevron-up":"chevron-down",class:"w-4 h-4 text-gray-600 dark:text-gray-400"},null,8,["name"])):B("",!0)],2)):B("",!0),t.collapsed?B("",!0):(w(),P("div",Jce,[(w(!0),P(le,null,Pe(t.fields,c=>{var u;return w(),P("div",{key:c.fieldname,class:ee([c.fieldtype==="Table"?"col-span-2 text-base":"",c.fieldtype==="AttachImage"?"row-span-2":"",c.fieldtype==="Check"?"mt-auto":"mb-auto",c.fieldname==="termsAndConditions"?"col-span-2":"",c.invisible?"invisible":""]),style:qe(c.invisible?"visibility: hidden;":"")},[c.fieldtype==="Table"?(w(),H(a,{key:0,ref_for:!0,ref:"fields","show-label":!0,border:!0,df:c,value:t.tableValue(t.doc[c.fieldname]),onEditrow:e[1]||(e[1]=h=>t.$emit("editrow",h)),onChange:h=>t.$emit("value-change",c,h),onRowChange:(h,p,m)=>t.$emit("row-change",h,p,m)},null,8,["df","value","onChange","onRowChange"])):(w(),H(l,{key:1,ref_for:!0,ref:c.fieldname==="name"?"nameField":"fields",size:c.fieldtype==="AttachImage"?"form":void 0,"show-label":!0,border:!0,df:c,value:t.doc[c.fieldname],onEditrow:e[2]||(e[2]=h=>t.$emit("editrow",h)),onChange:h=>t.$emit("value-change",c,h),onRowChange:(h,p,m)=>t.$emit("row-change",h,p,m)},null,8,["size","df","value","onChange","onRowChange"])),(u=t.errors)!=null&&u[c.fieldname]?(w(),P("div",eue,R(t.errors[c.fieldname]),1)):B("",!0)],6)}),128))]))])):B("",!0)}const KC=ne(Hce,[["render",tue]]),o8="LinkedEntries",nue=ve({components:{Button:At},props:{doc:{type:Object,required:!0}},emits:["close"],setup(){return{shortcuts:st(Is)}},data(){return{entries:{}}},computed:{sequence(){const t=iue.filter(e=>{var n,i;return!!((i=(n=this.entries[e])==null?void 0:n.details)!=null&&i.length)});for(const e in this.entries)t.includes(e)||t.push(e);return t}},async mounted(){var t;await this.setLinkedEntries(),(t=this.shortcuts)==null||t.set(o8,["Escape"],()=>this.$emit("close"))},unmounted(){var t;(t=this.shortcuts)==null||t.delete(o8)},methods:{isPesa:ui,colorClass:jf,async routeTo(t,e){const n=$s(t,e);await St(n)},async setLinkedEntries(){const t=await nM(this.doc);for(const e in t){const i=t[e];if(!i.length)continue;const s=sue[e]??["name"],r=await this.fyo.db.getAll(e,{fields:s,filters:{name:["in",i]}});this.entries[e]={collapsed:!1,details:r}}}}}),iue=[A.SalesInvoice,A.PurchaseInvoice,A.Shipment,A.PurchaseReceipt,A.Payment,A.JournalEntry,A.StockMovement,A.Party,A.Item,A.Account,A.Location,A.AccountingLedgerEntry,A.StockLedgerEntry],sue={[A.SalesInvoice]:["name","date","party","grandTotal","outstandingAmount","stockNotTransferred"],[A.PurchaseInvoice]:["name","date","party","grandTotal","outstandingAmount","stockNotTransferred"],[A.Shipment]:["name","date","party","grandTotal"],[A.PurchaseReceipt]:["name","date","party","grandTotal"],[A.Payment]:["name","date","party","amount"],[A.JournalEntry]:["name","date","entryType"],[A.StockMovement]:["name","date","amount"],[A.AccountingLedgerEntry]:["name","date","account","credit","debit"],[A.StockLedgerEntry]:["name","date","item","location","quantity"]},rue={class:"w-quick-edit bg-white dark:bg-gray-850 border-l dark:border-gray-800 overflow-y-auto custom-scroll custom-scroll-thumb2"},oue={class:"flex items-center justify-between px-4 h-row-largest sticky top-0 bg-white dark:bg-gray-850",style:{"z-index":"1"}},aue={class:"flex items-center justify-between w-full"},lue={class:"text-xl font-semibold text-gray-600 dark:text-gray-400"},cue={key:0,class:"w-full overflow-y-auto custom-scroll custom-scroll-thumb2 border-t dark:border-gray-800"},uue=["onClick"],due={class:"text-base text-gray-600 dark:text-gray-400 font-semibold select-none"},hue={class:"font-normal"},fue={class:"entry-container rounded-md border dark:border-gray-800 overflow-hidden"},pue=["onClick"],mue={class:"flex justify-between"},gue={class:"font-semibold dark:text-gray-25"},yue={key:0,class:"text-xs text-gray-600 dark:text-gray-400"},Oue={class:"flex gap-2 mt-1 pill-container flex-wrap"},bue={key:1,class:"p-4 text-sm text-gray-600 dark:text-gray-400"};function vue(t,e,n,i,s,r){const o=Q("feather-icon"),a=Q("Button");return w(),P("div",rue,[v("div",oue,[v("div",aue,[_(a,{icon:!0,onClick:e[0]||(e[0]=l=>t.$emit("close"))},{default:U(()=>[_(o,{name:"x",class:"w-4 h-4"})]),_:1}),v("p",lue,R(t.t`Linked Entries`),1)])]),t.sequence.length?(w(),P("div",cue,[(w(!0),P(le,null,Pe(t.sequence,l=>{var c;return w(),P("div",{key:l,class:"border-b dark:border-gray-800 p-4 overflow-auto"},[v("div",{class:ee(["flex justify-between cursor-pointer",t.entries[l].collapsed?"":"pb-4"]),onClick:u=>t.entries[l].collapsed=!t.entries[l].collapsed},[v("h2",due,[He(R(((c=t.fyo.schemaMap[l])==null?void 0:c.label)??l),1),v("span",hue,R(`  ${t.entries[l].details.length}`),1)]),_(o,{name:t.entries[l].collapsed?"chevron-up":"chevron-down",class:"w-4 h-4 text-gray-600 dark:text-gray-400"},null,8,["name"])],10,uue),mn(v("div",fue,[(w(!0),P(le,null,Pe(t.entries[l].details,u=>(w(),P("div",{key:String(u.name)+l,class:"p-2 text-sm cursor-pointer border-b last:border-0 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-875",onClick:h=>t.routeTo(l,String(u.name))},[v("div",mue,[v("p",gue,R(u.name),1),u.date?(w(),P("p",yue,R(t.fyo.format(u.date,"Date")),1)):B("",!0)]),v("div",Oue,[t.isPesa(u.credit)&&u.credit.isPositive()?(w(),P("p",{key:0,class:ee(["pill",t.colorClass("gray")])},R(t.t`Cr. ${t.fyo.format(u.credit,"Currency")}`),3)):t.isPesa(u.debit)&&u.debit.isPositive()?(w(),P("p",{key:1,class:ee(["pill",t.colorClass("gray")])},R(t.t`Dr. ${t.fyo.format(u.debit,"Currency")}`),3)):B("",!0),u.party||u.entryType||u.account?(w(),P("p",{key:2,class:ee(["pill",t.colorClass("gray")])},R(u.party||u.entryType||u.account),3)):B("",!0),u.item?(w(),P("p",{key:3,class:ee(["pill",t.colorClass("gray")])},R(u.item),3)):B("",!0),u.location?(w(),P("p",{key:4,class:ee(["pill",t.colorClass("gray")])},R(u.location),3)):B("",!0),t.isPesa(u.outstandingAmount)&&u.outstandingAmount.isPositive()?(w(),P("p",{key:5,class:ee(["pill no-scrollbar",t.colorClass("orange")])},R(t.t`Unpaid ${t.fyo.format(u.outstandingAmount,"Currency")}`),3)):t.isPesa(u.grandTotal)&&u.grandTotal.isPositive()?(w(),P("p",{key:6,class:ee(["pill no-scrollbar",t.colorClass("green")])},R(t.fyo.format(u.grandTotal,"Currency")),3)):t.isPesa(u.amount)&&u.amount.isPositive()?(w(),P("p",{key:7,class:ee(["pill no-scrollbar",t.colorClass("green")])},R(t.fyo.format(u.amount,"Currency")),3)):B("",!0),u.stockNotTransferred?(w(),P("p",{key:8,class:ee(["pill no-scrollbar",t.colorClass("orange")])},R(t.t`Pending qty. ${t.fyo.format(u.stockNotTransferred,"Float")}`),3)):typeof u.quantity=="number"&&u.quantity?(w(),P("p",{key:9,class:ee(["pill no-scrollbar",t.colorClass("gray")])},R(t.t`Qty. ${t.fyo.format(u.quantity,"Float")}`),3)):B("",!0)])],8,pue))),128))],512),[[ii,!t.entries[l].collapsed]])])}),128))])):(w(),P("p",bue,R(t.t`No linked entries found`),1))])}const wue=ne(nue,[["render",vue],["__scopeId","data-v-5fb63195"]]),Sue=ve({name:"TwoColumnForm",components:{FormControl:is,Table:z1},props:{doc:{type:ze,required:!0},fields:{type:Array,default:()=>[]},columnRatio:{type:Array,default:()=>[1,1]}},data(){return{formFields:[],errors:{}}},computed:{style(){return{"grid-template-columns":(this.columnRatio||[1,1]).map(e=>`minmax(0, ${e}fr)`).join(" ")}}},watch:{doc(){this.setFormFields()}},mounted(){this.setFormFields(),N.store.isDevelopment&&(window.tcf=this)},methods:{getFieldHeight(t){return["AttachImage","Text"].includes(t.fieldtype)||this.errors[t.fieldname]?"calc((var(--h-row-mid) + 1px) * 2)":"calc(var(--h-row-mid) + 1px)"},async onChange(t,e){const{fieldname:n}=t;delete this.errors[n];let i=!1;try{i=await this.doc.set(n,e)}catch(s){if(!(s instanceof Error))return;this.errors[n]=eh(s,this.doc)}i&&this.setFormFields()},setFormFields(){let t=this.fields;t.length===0&&(t=this.doc.quickEditFields),t.length===0&&(t=this.doc.schema.fields.filter(e=>e.required)),this.formFields=t.filter(e=>e&&!RC(e,this.doc))}}}),Cue={class:"text-sm"},Aue={class:"ps-4 flex text-gray-600 dark:text-gray-400"},xue={key:0,class:"text-sm text-red-600 mt-2 ps-2"};function kue(t,e,n,i,s,r){const o=Q("Table"),a=Q("FormControl");return w(),P("div",Cue,[(w(!0),P(le,null,Pe(t.formFields,l=>(w(),P(le,null,[l.fieldtype==="Table"?(w(),H(o,{key:`${l.fieldname}-table`,ref_for:!0,ref:"controls",size:"small",df:l,value:t.doc[l.fieldname]??[],onChange:async c=>await t.onChange(l,c)},null,8,["df","value","onChange"])):(w(),P("div",{key:`${l.fieldname}-regular`,class:"grid items-center border-b dark:border-gray-800",style:qe({...t.style,height:t.getFieldHeight(l)})},[v("div",Aue,R(l.label),1),v("div",{class:ee(["py-2 pe-4",{"ps-2":l.fieldtype==="AttachImage"}])},[_(a,{ref_for:!0,ref:"controls",size:"small",df:l,value:t.doc[l.fieldname],class:ee({"p-2":l.fieldtype==="Check"}),"text-end":!1,onChange:async c=>await t.onChange(l,c)},null,8,["df","value","class","onChange"]),t.errors[l.fieldname]?(w(),P("div",xue,R(t.errors[l.fieldname]),1)):B("",!0)],2)],4))],64))),256))])}const LM=ne(Sue,[["render",kue]]),a8="RowEditForm",Pue=ve({components:{Button:At,TwoColumnForm:LM,FormHeader:Za},provide(){return{doc:Dt(()=>this.row)}},props:{doc:{type:ze,required:!0},index:{type:Number,required:!0},fieldname:{type:String,required:!0}},emits:["next","previous","close"],setup(){return{shortcuts:st(Is)}},computed:{fieldlabel(){var t;return((t=this.fyo.getField(this.doc.schemaName,this.fieldname))==null?void 0:t.label)??""},row(){const t=this.doc.get(this.fieldname);if(Array.isArray(t)&&t[this.index]instanceof ze)return t[this.index];const e=`${this.doc.name??"_name"}.${this.fieldname}[${this.index}]`;throw new oo(this.t`Invalid value found for ${e}`)},fields(){return(this.row.schema.quickEditFields??[]).map(e=>this.fyo.getField(this.row.schemaName,e))},previous(){return this.index-1},next(){const t=this.doc.get(this.fieldname);return!Array.isArray(t)||t.length-1===this.index?-1:this.index+1}},mounted(){var t;(t=this.shortcuts)==null||t.set(a8,["Escape"],()=>this.$emit("close"))},unmounted(){var t;(t=this.shortcuts)==null||t.delete(a8)}}),Tue={class:"border-s dark:border-gray-800 h-full overflow-auto w-quick-edit bg-white dark:bg-gray-890 custom-scroll custom-scroll-thumb2"},$ue={class:"sticky top-0 border-b dark:border-gray-800 bg-white dark:bg-gray-890",style:{"z-index":"1"}},Due={class:"flex items-center justify-between px-4 h-row-largest"},Mue={class:"flex items-stretch gap-2"};function Iue(t,e,n,i,s,r){const o=Q("feather-icon"),a=Q("Button"),l=Q("FormHeader"),c=Q("TwoColumnForm");return w(),P("div",Tue,[v("div",$ue,[v("div",Due,[_(a,{icon:!0,onClick:e[0]||(e[0]=u=>t.$emit("close"))},{default:U(()=>[_(o,{name:"x",class:"w-4 h-4"})]),_:1}),v("div",Mue,[t.previous>=0?(w(),H(a,{key:0,icon:!0,onClick:e[1]||(e[1]=u=>t.$emit("previous",t.previous))},{default:U(()=>[_(o,{name:"chevron-left",class:"w-4 h-4"})]),_:1})):B("",!0),t.next>=0?(w(),H(a,{key:1,icon:!0,onClick:e[2]||(e[2]=u=>t.$emit("next",t.next))},{default:U(()=>[_(o,{name:"chevron-right",class:"w-4 h-4"})]),_:1})):B("",!0)])]),_(l,{class:"border-t dark:border-gray-800","form-title":t.t`Row ${t.index+1}`,"form-sub-title":t.fieldlabel},null,8,["form-title","form-sub-title"])]),_(c,{ref:"form",class:"w-full",doc:t.row,fields:t.fields,"column-ratio":[1.1,2]},null,8,["doc","fields"])])}const JC=ne(Pue,[["render",Iue]]),Rue=ve({components:{FormContainer:Lp,FormHeader:Za,CommonFormSection:KC,Button:At,DropdownWithActions:th,Barcode:Coe,ExchangeRate:Moe,LinkedEntries:wue,RowEditForm:JC,StatusPill:lle},provide(){return{doc:Dt(()=>this.docOrNull)}},props:{name:{type:String,default:""},schemaName:{type:String,default:A.SalesInvoice}},setup(){const t=st(Is),e=Cn(null);let n="CommonForm";return t&&(n=UC(t,e,"CommonForm",!0)),{docOrNull:e,shortcuts:t,context:n,printButton:Cn(null)}},data(){return{errors:{},activeTab:this.t`Default`,groupedFields:null,isPrintable:!1,showLinks:!1,useFullWidth:!1,row:null}},computed:{canShowBarcode(){var t,e;return!((t=this.fyo.singles.InventorySettings)!=null&&t.enableBarcodes)||!this.hasDoc||this.doc.isSubmitted||this.doc.isCancelled?!1:typeof((e=this.doc)==null?void 0:e.addItem)=="function"},canShowExchangeRate(){return this.hasDoc&&!!this.doc.isMultiCurrency},exchangeRate(){return!this.hasDoc||typeof this.doc.exchangeRate!="number"?1:this.doc.exchangeRate},fromCurrency(){var e;const t=(e=this.doc)==null?void 0:e.currency;return typeof t!="string"?this.toCurrency:t},toCurrency(){var e;const t=(e=this.fyo.singles.SystemSettings)==null?void 0:e.currency;return typeof t!="string"?Ks:t},canPrint(){return this.hasDoc?!this.doc.isCancelled&&!this.doc.dirty&&this.isPrintable:!1},canShowLinks(){return!this.hasDoc||this.doc.schema.isSubmittable&&!this.doc.isSubmitted?!1:this.doc.inserted},hasDoc(){return this.docOrNull instanceof ze},status(){return this.hasDoc?E1(this.doc):""},doc(){const t=this.docOrNull;if(!t)throw new ie(this.t`Doc ${this.schema.label} ${this.name} not set`);return t},title(){var t,e;return this.schema.isSubmittable&&((t=this.docOrNull)!=null&&t.notInserted)?this.t`New Entry`:((e=this.docOrNull)==null?void 0:e.name)||this.t`New Entry`},schema(){const t=this.fyo.schemaMap[this.schemaName];if(!t)throw new ie(`no schema found with ${this.schemaName}`);return t},activeGroup(){if(!this.groupedFields)return new Map;const t=this.groupedFields.get(this.activeTab);if(!t){const e=[...this.groupedFields.keys()][0];return this.groupedFields.get(e)??new Map}return t},groupedActions(){return this.hasDoc?OQ(this.doc):[]}},beforeMount(){var t;this.useFullWidth=!!((t=this.fyo.singles.Misc)!=null&&t.useFullWidth)},async mounted(){this.fyo.store.isDevelopment&&(window.cf=this),await this.setDoc(),this.replacePathAfterSync(),this.updateGroupedFields(),this.groupedFields&&(this.activeTab=[...this.groupedFields.keys()][0]),this.isPrintable=await vQ(this.schemaName)},activated(){var t,e,n;this.useFullWidth=!!((t=this.fyo.singles.Misc)!=null&&t.useFullWidth),Ai.value=Xo[this.schemaName]??"",(e=this.shortcuts)==null||e.pmod.set(this.context,["KeyP"],()=>{var i;this.canPrint&&((i=this.printButton)==null||i.$el.click())}),(n=this.shortcuts)==null||n.pmod.set(this.context,["KeyL"],()=>{!this.canShowLinks&&!this.showLinks||(this.showLinks=!this.showLinks)})},deactivated(){Ai.value="",this.showLinks=!1,this.row=null},methods:{routeTo:St,async toggleWidth(){var e;const t=!this.useFullWidth;await((e=this.fyo.singles.Misc)==null?void 0:e.setAndSync("useFullWidth",t)),this.useFullWidth=t},updateGroupedFields(){this.hasDoc&&(this.groupedFields=ex(this.schema,this.doc))},async sync(t){await fO(this.doc,t)&&this.updateGroupedFields()},async submit(){await pO(this.doc)&&this.updateGroupedFields()},async setDoc(){this.hasDoc||(this.docOrNull=await pp(this.schemaName,this.name))},replacePathAfterSync(){!this.hasDoc||this.doc.inserted||this.doc.once("afterSync",async()=>{const t=$s(this.schemaName,this.doc.name);await this.$router.replace(t)})},async showRowEditForm(t){this.showLinks&&(this.showLinks=!1,await Bi());const e=t.idx,n=t.parentFieldname;typeof e=="number"&&typeof n=="string"&&(this.row={index:e,fieldname:n})},async onValueChange(t,e){const{fieldname:n}=t;delete this.errors[n];try{await this.doc.set(n,e)}catch(i){if(!(i instanceof Error))return;this.errors[n]=eh(i,this.doc)}this.updateGroupedFields()}}}),_ue={key:2,class:"text-xl font-semibold items-center text-gray-600"},Eue={key:0},Que={key:0,class:"overflow-auto custom-scroll custom-scroll-thumb1"},Nue={key:1,class:"mt-auto px-4 pb-4 flex gap-8 border-t dark:border-gray-800 flex-shrink-0 sticky bottom-0 bg-white dark:bg-gray-875"},Lue=["onClick"];function Fue(t,e,n,i,s,r){const o=Q("Barcode"),a=Q("ExchangeRate"),l=Q("feather-icon"),c=Q("Button"),u=Q("DropdownWithActions"),h=Q("StatusPill"),p=Q("FormHeader"),m=Q("CommonFormSection"),y=Q("LinkedEntries"),O=Q("RowEditForm"),S=Q("FormContainer");return w(),H(S,{"use-full-width":t.useFullWidth},jS({body:U(()=>[_(p,{"form-title":t.title,class:"sticky top-0 bg-white dark:bg-gray-890 border-b dark:border-gray-800"},{default:U(()=>[t.hasDoc?(w(),H(h,{key:0,doc:t.doc},null,8,["doc"])):B("",!0)]),_:1},8,["form-title"]),t.hasDoc?(w(),P("div",Que,[(w(!0),P(le,null,Pe(t.activeGroup.entries(),([x,T],k)=>(w(),H(m,{key:x+k,ref_for:!0,ref:"section",class:ee(["p-4",k!==0&&t.activeGroup.size>1?"border-t dark:border-gray-800":""]),"show-title":t.activeGroup.size>1&&x!==t.t`Default`,title:x,fields:T,doc:t.doc,errors:t.errors,onEditrow:e[4]||(e[4]=D=>t.showRowEditForm(D)),onValueChange:t.onValueChange,onRowChange:t.updateGroupedFields},null,8,["class","show-title","title","fields","doc","errors","onValueChange","onRowChange"]))),128))])):B("",!0),t.groupedFields&&t.groupedFields.size>1?(w(),P("div",Nue,[(w(!0),P(le,null,Pe(t.groupedFields.keys(),x=>(w(),P("div",{key:x,class:ee(["text-sm cursor-pointer",x===t.activeTab?"text-gray-900 dark:text-gray-25 font-semibold border-t-2 border-gray-800 dark:border-gray-100":"text-gray-700 dark:text-gray-200 "]),style:qe({paddingTop:x===t.activeTab?"calc(1rem - 2px)":"1rem"}),onClick:T=>t.activeTab=x},R(x),15,Lue))),128))])):B("",!0)]),quickedit:U(()=>[_(Ir,{name:"quickedit"},{default:U(()=>[t.showLinks&&t.canShowLinks?(w(),H(y,{key:0,doc:t.doc,onClose:e[5]||(e[5]=x=>t.showLinks=!1)},null,8,["doc"])):B("",!0)]),_:1}),_(Ir,{name:"quickedit"},{default:U(()=>[t.row&&!t.showLinks?(w(),H(O,{key:0,doc:t.doc,fieldname:t.row.fieldname,index:t.row.index,onPrevious:e[6]||(e[6]=x=>t.row.index=x),onNext:e[7]||(e[7]=x=>t.row.index=x),onClose:e[8]||(e[8]=()=>t.row=null)},null,8,["doc","fieldname","index"])):B("",!0)]),_:1})]),_:2},[t.hasDoc?{name:"header-left",fn:U(()=>{var x,T;return[t.canShowBarcode?(w(),H(o,{key:0,class:"h-8",onItemSelected:e[0]||(e[0]=k=>{var D;(D=t.doc)==null||D.addItem(k)})})):B("",!0),t.canShowExchangeRate?(w(),H(a,{key:1,disabled:((x=t.doc)==null?void 0:x.isSubmitted)||((T=t.doc)==null?void 0:T.isCancelled),"from-currency":t.fromCurrency,"to-currency":t.toCurrency,"exchange-rate":t.exchangeRate,onChange:e[1]||(e[1]=async k=>await t.doc.set("exchangeRate",k))},null,8,["disabled","from-currency","to-currency","exchange-rate"])):B("",!0),t.schema.label&&!(t.canShowBarcode||t.canShowExchangeRate)?(w(),P("p",_ue,R(t.schema.label),1)):B("",!0)]}),key:"0"}:void 0,t.hasDoc?{name:"header",fn:U(()=>{var x,T;return[t.canShowLinks?(w(),H(c,{key:0,icon:!0,title:t.t`View linked entries`,onClick:e[2]||(e[2]=k=>t.showLinks=!0)},{default:U(()=>[_(l,{name:"link",class:"w-4 h-4"})]),_:1},8,["title"])):B("",!0),t.canPrint?(w(),H(c,{key:1,ref:"printButton",icon:!0,title:t.t`Open Print View`,onClick:e[3]||(e[3]=k=>t.routeTo(`/print/${t.doc.schemaName}/${t.doc.name}`))},{default:U(()=>[_(l,{name:"printer",class:"w-4 h-4"})]),_:1},8,["title"])):B("",!0),_(c,{icon:!0,title:t.t`Toggle between form and full width`,onClick:t.toggleWidth},{default:U(()=>[_(l,{name:t.useFullWidth?"minimize":"maximize",class:"w-4 h-4"},null,8,["name"])]),_:1},8,["title","onClick"]),(w(!0),P(le,null,Pe(t.groupedActions,k=>(w(),H(u,{key:k.label,type:k.type,actions:k.actions},{default:U(()=>[k.group?(w(),P("p",Eue,R(k.group),1)):(w(),H(l,{key:1,name:"more-horizontal",class:"w-4 h-4"}))]),_:2},1032,["type","actions"]))),128)),(x=t.doc)!=null&&x.canSave?(w(),H(c,{key:2,type:"primary",onClick:t.sync},{default:U(()=>[He(R(t.t`Save`),1)]),_:1},8,["onClick"])):(T=t.doc)!=null&&T.canSubmit?(w(),H(c,{key:3,type:"primary",onClick:t.submit},{default:U(()=>[He(R(t.t`Submit`),1)]),_:1},8,["onClick"])):B("",!0)]}),key:"1"}:void 0]),1032,["use-full-width"])}const Bue=ne(Rue,[["render",Fue]]);function l8(t=0,e=0){return()=>({width:0,height:0,top:e,right:t,bottom:e,left:t})}const Vue={props:{offset:{type:Number,default:10},placement:{type:String,default:"auto"}},data(){return{popper:null,virtualElement:null,opacity:0}},methods:{create(){if(this.popper){this.opacity=1;return}this.$refs.tooltip.setAttribute("data-show",""),this.virtualElement={getBoundingClientRect:l8(-1e3,-1e3)},this.popper=$ae(this.virtualElement,this.$refs.tooltip,{placement:this.placement,modifiers:[DM,RM,Object.assign(MM,{options:{offset:[0,this.offset]}})]}),this.opacity=1},update({clientX:t,clientY:e}){!this.popper||!this.virtualElement||(this.virtualElement.getBoundingClientRect=l8(t,e),this.popper.update())},destroy(){var t;this.opacity=0,this.$refs.tooltip.removeAttribute("data-show"),(t=this.popper)==null||t.destroy(),this.virtualElement=null,this.popper=null}}};function jue(t,e,n,i,s,r){return w(),P("div",{id:"tooltip",ref:"tooltip",style:qe([{transition:"opacity 100ms ease-in"},{opacity:s.opacity}])},[Ge(t.$slots,"default",{},void 0,!0)],4)}const eA=ne(Vue,[["render",jue],["__scopeId","data-v-c29838ee"]]),zue=ve({components:{Tooltip:eA},props:{show:{type:Boolean,default:!1}},watch:{show(t){t?(this.$refs.tooltip.create(),this.setListeners()):(this.$refs.tooltip.destroy(),this.removeListener())}},methods:{mousemoveListener(t){this.$refs.tooltip.update(t)},setListeners(){window.addEventListener("mousemove",this.mousemoveListener)},removeListener(){window.removeEventListener("mousemove",this.mousemoveListener)}}});function Zue(t,e,n,i,s,r){const o=Q("Tooltip");return w(),H(o,{ref:"tooltip"},{default:U(()=>[Ge(t.$slots,"default")]),_:3},512)}const FM=ne(zue,[["render",Zue]]),Z1=ve({props:{commonPeriod:{type:String,default:"This Year"}},emits:["period-change"],data(){return{period:"This Year",periodOptions:["This Year","YTD","This Quarter","This Month"]}},watch:{period:"periodChange",commonPeriod(t){this.periodOptions.includes(t)&&(this.period=t)}},methods:{async periodChange(){this.$emit("period-change",this.period),await this.setData()},async setData(){return Promise.resolve(null)}}}),que=ve({name:"PeriodSelector",components:{Dropdown:GC},props:{value:{type:String,default:"This Year"},options:{type:Array,default:()=>["This Year","This Quarter","This Month","YTD"]}},emits:["change"],data(){return{periodSelectorMap:{},periodOptions:[]}},mounted(){this.periodSelectorMap={"":b`Set Period`,"This Year":b`This Year`,YTD:b`Year to Date`,"This Quarter":b`This Quarter`,"This Month":b`This Month`},this.periodOptions=this.options.map(t=>({label:this.periodSelectorMap[t]??t,action:()=>this.selectOption(t)}))},methods:{selectOption(t){this.$emit("change",t),this.$refs.dropdown.toggleDropdown(!1)}}}),Xue=["onClick","onKeydown"];function Wue(t,e,n,i,s,r){const o=Q("feather-icon"),a=Q("Dropdown");return w(),H(a,{ref:"dropdown",class:"text-sm",items:t.periodOptions,right:""},{default:U(({toggleDropdown:l,highlightItemUp:c,highlightItemDown:u,selectHighlightedItem:h})=>{var p;return[v("div",{class:ee(["text-sm flex focus:outline-none hover:text-gray-800 dark:hover:text-gray-100 focus:text-gray-800 dark:focus:text-gray-100 items-center py-1 rounded-md leading-relaxed cursor-pointer",t.value?"text-gray-900 dark:text-gray-300":"text-gray-600 dark:text-gray-500"]),tabindex:"0",onClick:m=>l(),onKeydown:[pn(u,["down"]),pn(c,["up"]),pn(h,["enter"])]},[He(R(((p=t.periodSelectorMap)==null?void 0:p[t.value])??t.value)+" ",1),_(o,{name:"chevron-down",class:"ms-1 w-3 h-3"})],42,Xue)]}),_:1},8,["items"])}const Vp=ne(que,[["render",Wue]]),Gue={},Uue={class:"flex items-baseline justify-between dark:text-white"},Hue={class:"font-semibold text-base"};function Yue(t,e){return w(),P("div",Uue,[v("span",Hue,[Ge(t.$slots,"title")]),Ge(t.$slots,"action")])}const tA=ne(Gue,[["render",Yue]]),Kue=ve({name:"UnpaidInvoices",components:{PeriodSelector:Vp,SectionHeader:tA,MouseFollower:FM},extends:Z1,props:{schemaName:{type:String,required:!0},darkMode:{type:Boolean,default:!1}},data(){return{show:!1,total:0,unpaid:0,hasData:!1,paid:0,count:0,unpaidCount:0,paidCount:0,barWidth:40,period:"This Year"}},computed:{title(){var t;return((t=N.schemaMap[this.schemaName])==null?void 0:t.label)??""},color(){return this.schemaName===A.SalesInvoice?"blue":"pink"},colors(){return pt[this.color][this.darkMode?"600":"500"]},paidColor(){return this.hasData?`bg-${this.color}-${this.darkMode?"600":"500"}`:this.darkMode?"bg-gray-700":"bg-gray-400"},unpaidColor(){return this.hasData?`bg-${this.color}-${this.darkMode?"700 bg-opacity-20":"200"}`:`bg-gray-${this.darkMode?"800":"200"}`}},async activated(){await this.setData()},methods:{async routeToInvoices(t){var a;if(t==="paid"&&!this.paidCount||t==="unpaid"&&!this.unpaidCount)return;const n={outstandingAmount:["=",this.fyo.pesa(0).store]},i=((a=N.schemaMap[this.schemaName])==null?void 0:a.label)??"";let s=b`Paid ${i}`;t==="unpaid"&&(n.outstandingAmount[0]="!=",s=b`Unpaid ${i}`);const r=`/list/${this.schemaName}/${s}`,o={filters:JSON.stringify(n)};await St({path:r,query:o})},async setData(){const{fromDate:t,toDate:e}=F1(this.period),{total:n,outstanding:i}=await N.db.getTotalOutstanding(this.schemaName,t.toISO(),e.toISO()),{countTotal:s,countOutstanding:r}=await this.getCounts(this.schemaName,t,e);this.total=n??0,this.unpaid=i??0,this.paid=n-i,this.hasData=s>0,this.count=s,this.paidCount=s-r,this.unpaidCount=r,this.barWidth=this.paid/(this.total||1)*100},async newInvoice(){const t=N.doc.getNewDoc(this.schemaName);await St(`/edit/${this.schemaName}/${t.name}`)},async getCounts(t,e,n){const s=(await N.db.getAllRaw(t,{fields:["outstandingAmount"],filters:{cancelled:!1,submitted:!0,date:["<=",n.toISO(),">=",e.toISO()]}})).map(r=>kn(r.outstandingAmount));return{countTotal:s.length,countOutstanding:s.filter(r=>r>0).length}}}}),Jue={class:"flex-col justify-between w-full p-4"},ede={class:"mt-4"},tde={class:"flex justify-between"},nde=["title"],ide=["title"],sde={class:"flex justify-between gap-4"},rde={class:"font-semibold"},ode={key:0,class:"flex justify-between gap-4"},ade={class:"font-semibold"};function lde(t,e,n,i,s,r){const o=Q("PeriodSelector"),a=Q("SectionHeader"),l=Q("MouseFollower");return w(),P("div",Jue,[_(a,null,{title:U(()=>[He(R(t.title),1)]),action:U(()=>[_(o,{value:t.period,onChange:e[0]||(e[0]=c=>t.period=c)},null,8,["value"])]),_:1}),v("div",ede,[v("div",tde,[v("div",{class:ee(["text-sm font-medium dark:text-gray-25",{"bg-gray-200 dark:bg-gray-700 text-gray-200 dark:text-gray-700 rounded":!t.count,"cursor-pointer":t.paidCount>0}]),title:t.paidCount>0?t.t`View Paid Invoices`:"",onClick:e[1]||(e[1]=()=>t.routeToInvoices("paid"))},[He(R(t.fyo.format(t.paid,"Currency"))+" ",1),v("span",{class:ee({"text-gray-900 dark:text-gray-200 font-normal":t.count})},R(t.t`Paid`),3)],10,nde),v("div",{class:ee(["text-sm font-medium dark:text-gray-25",{"bg-gray-200 dark:bg-gray-700 text-gray-200 dark:text-gray-700 rounded":!t.count,"cursor-pointer":t.unpaidCount>0}]),title:t.unpaidCount>0?t.t`View Unpaid Invoices`:"",onClick:e[2]||(e[2]=()=>t.routeToInvoices("unpaid"))},[He(R(t.fyo.format(t.unpaid,"Currency"))+" ",1),v("span",{class:ee({"text-gray-900 dark:text-gray-200 font-normal":t.count})},R(t.t`Unpaid`),3)],10,ide)]),v("div",{class:"mt-2 relative rounded overflow-hidden",onMouseenter:e[3]||(e[3]=c=>t.show=!0),onMouseleave:e[4]||(e[4]=c=>t.show=!1)},[v("div",{class:ee(["w-full h-4",t.unpaidColor])},null,2),v("div",{class:ee(["absolute inset-0 h-4",t.paidColor]),style:qe(`width: ${t.barWidth}%`)},null,6)],32)]),t.hasData?(w(),H(l,{key:0,offset:15,show:t.show,placement:"top",class:"text-sm shadow-md px-2 py-1 bg-white dark:bg-gray-900 text-gray-900 dark:text-white border-s-4",style:qe({borderColor:t.colors})},{default:U(()=>[v("div",sde,[v("p",null,R(t.t`Paid`),1),v("p",rde,R(t.paidCount??0),1)]),t.unpaidCount>0?(w(),P("div",ode,[v("p",null,R(t.t`Unpaid`),1),v("p",ade,R(t.unpaidCount??0),1)])):B("",!0)]),_:1},8,["show","style"])):B("",!0)])}const cde=ne(Kue,[["render",lde]]);function BM(t){if(Math.abs(t)<1)return Math.round(t).toString();const e=Math.floor(Math.log10(Math.abs(t))),n=Math.floor(e/3),i=Math.round(t/Math.pow(10,n*3)),s=["","K","M","B","T","Q","P"][n];return`${i} ${s}`}function ude(t,e,n,i){const s=Math.pow(n-t,2)+Math.pow(i-e,2);return Math.sqrt(s)}function dde(t){const e=Math.max(Math.log10(Math.abs(t))-1,0);return 10**Math.floor(e)}function VM(t){const e=dde(t);return(t>=0?1:-1)===1?Math.ceil(t/e)*e:Math.floor(t/e)*e}function jM(t){const e=Math.max(...t.flat());return e===0?0:VM(e)}function hde(t){const e=Math.min(...t.flat());return e===0?e:VM(e)}function zM(t){return Te.fromISO(t).toFormat("MMM yy")}const fde={components:{Tooltip:eA},props:{colors:{type:Array,default:()=>[]},xLabels:{type:Array,default:()=>[]},yLabelDivisions:{type:Number,default:4},points:{type:Array,default:()=>[[]]},drawAxis:{type:Boolean,default:!1},drawXGrid:{type:Boolean,default:!0},drawLabels:{type:Boolean,default:!0},viewBoxHeight:{type:Number,default:500},aspectRatio:{type:Number,default:4},axisPadding:{type:Number,default:30},pointsPadding:{type:Number,default:24},xLabelOffset:{type:Number,default:20},yLabelOffset:{type:Number,default:5},gridColor:{type:String,default:"rgba(0, 0, 0, 0.2)"},axisColor:{type:String,default:"rgba(0, 0, 0, 0.5)"},thickness:{type:Number,default:5},axisThickness:{type:Number,default:1},gridThickness:{type:Number,default:.5},yMin:{type:Number,default:null},yMax:{type:Number,default:null},format:{type:Function,default:t=>t.toFixed(1)},formatY:{type:Function,default:BM},formatX:{type:Function,default:t=>t},fontSize:{type:Number,default:20},fontColor:{type:String,default:"#415668"},bottom:{type:Number,default:0},left:{type:Number,default:55},extendGridX:{type:Number,default:-20},tooltipDispDistThreshold:{type:Number,default:40},showTooltip:{type:Boolean,default:!0}},data(){return{cx:-1,cy:-1,xi:-1,yi:-1}},computed:{fontStyle(){return{fontSize:this.fontSize,fill:this.fontColor}},viewBoxWidth(){return this.aspectRatio*this.viewBoxHeight},num(){return this.points.length},count(){return Math.max(...this.points.map(t=>t.length))},xs(){return Array(this.count).fill().map((t,e)=>this.padding+this.left+e*(this.viewBoxWidth-this.left-2*this.padding)/(this.count-1||1))},ys(){const t=this.hMin,e=this.hMax;return this.points.map(n=>n.map(i=>this.padding+(1-(i-t)/(e-t))*(this.viewBoxHeight-2*this.padding-this.bottom)))},xy(){return this.xs.map((t,e)=>[t,this.ys.map(n=>n[e])])},min(){return Math.min(...this.points.flat())},max(){return Math.max(...this.points.flat())},axis(){return`M ${this.axisPadding+this.left} ${this.axisPadding} V ${this.viewBoxHeight-this.axisPadding-this.bottom} H ${this.viewBoxWidth-this.axisPadding}`},padding(){return this.axisPadding+this.pointsPadding},xGrid(){const{l:t,r:e}=this.xLims,n=t+this.extendGridX,i=e-this.extendGridX;return Array(this.yLabelDivisions+1).fill().map((r,o)=>this.yScalerLocation(o)).map(r=>`M ${n} ${r} H ${i}`).join(" ")},yGrid(){return[]},xLims(){const t=this.padding+this.left,e=this.viewBoxWidth-this.padding;return{l:t,r:e}},hMin(){return Math.min(this.yMin??this.min,0)},hMax(){let t=Math.max(this.yMax??this.max,0);return t===this.hMin?t+1e3:t}},methods:{gradY(t){return Math.min(...this.ys[t]).toFixed()},yScalerLocation(t){return(this.yLabelDivisions-t)*(this.viewBoxHeight-this.padding*2-this.bottom)/this.yLabelDivisions+this.padding},yScalerValue(t){const e=this.hMin,n=this.hMax;return this.formatY(t*(n-e)/this.yLabelDivisions+e)},getLine(t){const[e,n]=this.xy[0];let i=`M ${e} ${n[t]} `;return this.xy.slice(1).forEach(([s,r])=>{i+=`L ${s} ${r[t]} `}),i},getGradLine(t){let e=this.viewBoxHeight-this.padding-this.bottom,n=`M ${this.padding+this.left} ${e}`;return this.xy.forEach(([i,s])=>{n+=`L ${i} ${s[t]} `}),n+` V ${e} Z`},getRandomColor(){return`rgb(${Array(3).fill().map(()=>parseInt(Math.random()*255)).join(",")})`},update(t){if(!this.showTooltip)return;const{x:e,y:n}=this.getSvgXY(t),{xi:i,yi:s,cx:r,cy:o,d:a}=this.getPointIndexAndCoords(e,n);if(a>this.tooltipDispDistThreshold){this.xi=-1,this.yi=-1,this.cx=-1,this.cy=-1,this.$refs.tooltip.destroy();return}this.$refs.tooltip.create(),this.xi=i,this.yi=s,this.cx=r,this.cy=o,this.$refs.tooltip.update(t)},getSvgXY({clientX:t,clientY:e}){const n=this.$refs.chartSvg.getScreenCTM().inverse(),i=new DOMPoint(t,e),{x:s,y:r}=i.matrixTransform(n);return{x:s,y:r}},getPointIndexAndCoords(t,e){const{l:n,r:i}=this.xLims,s=Math.round((t-n)/((i-n)/(this.count-1)));if(s<0||s>this.count-1)return{d:this.tooltipDispDistThreshold+1};const r=this.xs[s],o=this.ys.map(u=>u[s]),a=o.map(u=>ude(t,e,r,u)),l=Math.min(...a),c=a.map((u,h)=>[u-l,h]).filter(([u,h])=>u===0).at(-1)[1];return{xi:s,yi:c,cx:r,cy:o[c],d:l}}}},pde=["viewBox"],mde=["d","stroke","stroke-width"],gde=["d","stroke-width","stroke"],yde=["y","x"],Ode=["y","x"],bde=["id"],vde=["y","height"],wde=["d","stroke-width","fill","mask"],Sde=["d","stroke","stroke-width"],Cde=["cx","cy","fill"],Ade={class:"flex flex-col justify-center items-center"},xde={class:"font-semibold"};function kde(t,e,n,i,s,r){const o=Q("Tooltip");return w(),P("div",null,[(w(),P("svg",{ref:"chartSvg",viewBox:`0 0 ${r.viewBoxWidth} ${n.viewBoxHeight}`,xmlns:"http://www.w3.org/2000/svg",onMousemove:e[0]||(e[0]=(...a)=>r.update&&r.update(...a))},[n.drawXGrid?(w(),P("path",{key:0,d:r.xGrid,stroke:n.gridColor,"stroke-width":n.gridThickness,"stroke-linecap":"round",fill:"transparent"},null,8,mde)):B("",!0),n.drawAxis?(w(),P("path",{key:1,d:r.axis,"stroke-width":n.axisThickness,stroke:n.axisColor,fill:"transparent"},null,8,gde)):B("",!0),n.drawLabels&&n.xLabels.length>0?(w(!0),P(le,{key:2},Pe(r.count,(a,l)=>(w(),P("text",{key:l+"-xlabels",style:qe(r.fontStyle),y:n.viewBoxHeight-n.axisPadding+n.yLabelOffset+r.fontStyle.fontSize/2-n.bottom,x:r.xs[a-1],"text-anchor":"middle"},R(n.formatX(n.xLabels[a-1]||"")),13,yde))),128)):B("",!0),n.drawLabels&&n.yLabelDivisions>0?(w(!0),P(le,{key:3},Pe(n.yLabelDivisions+1,(a,l)=>(w(),P("text",{key:l+"-ylabels",style:qe(r.fontStyle),y:r.yScalerLocation(a-1),x:n.axisPadding-n.xLabelOffset+n.left,"text-anchor":"end"},R(r.yScalerValue(a-1)),13,Ode))),128)):B("",!0),v("defs",null,[e[1]||(e[1]=v("linearGradient",{id:"grad",x1:"0",y1:"0",x2:"0",y2:"85%"},[v("stop",{offset:"0%","stop-color":"rgba(255, 255, 255, 0.5)"}),v("stop",{offset:"40%","stop-color":"rgba(255, 255, 255, 0.1)"}),v("stop",{offset:"70%","stop-color":"rgba(255, 255, 255, 0)"})],-1)),(w(!0),P(le,null,Pe(r.num,(a,l)=>(w(),P("mask",{id:"rect-mask-"+a,key:l+"-mask"},[v("rect",{x:"0",y:r.gradY(l),height:n.viewBoxHeight-r.gradY(l),width:"100%",fill:"url('#grad')"},null,8,vde)],8,bde))),128))]),(w(!0),P(le,null,Pe(r.num,(a,l)=>(w(),P("g",{key:l+"-gpath"},[v("path",{"stroke-linejoin":"round",d:r.getGradLine(a-1),"stroke-width":n.thickness,"stroke-linecap":"round",fill:n.colors[a-1]||r.getRandomColor(),mask:`url('#rect-mask-${a}')`},null,8,wde),v("path",{"stroke-linejoin":"round",d:r.getLine(a-1),stroke:n.colors[a-1]||r.getRandomColor(),"stroke-width":n.thickness,"stroke-linecap":"round",fill:"transparent"},null,8,Sde)]))),128)),s.xi>-1&&s.yi>-1?(w(),P("circle",{key:4,r:"12",cx:s.cx,cy:s.cy,fill:n.colors[s.yi],style:{filter:"brightness(115%) drop-shadow(0px 2px 3px rgba(0, 0, 0, 0.25))"}},null,8,Cde)):B("",!0)],40,pde)),n.showTooltip?(w(),H(o,{key:0,ref:"tooltip",offset:15,placement:"top",class:"text-sm shadow-md px-2 py-1 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-200 border-s-4",style:qe({borderColor:n.colors[s.yi]})},{default:U(()=>[v("div",Ade,[v("p",null,R(s.xi>-1?n.formatX(n.xLabels[s.xi]):""),1),v("p",xde,R(s.yi>-1?n.format(n.points[s.yi][s.xi]):""),1)])]),_:1},8,["style"])):B("",!0)])}const Pde=ne(fde,[["render",kde]]),Tde=ve({name:"Cashflow",components:{PeriodSelector:Vp,LineChart:Pde},extends:Z1,props:{darkMode:{type:Boolean,default:!1}},data:()=>({data:[],periodList:[],periodOptions:["This Year","This Quarter","YTD"],hasData:!1}),computed:{chartData(){let t=this.data,e=[pt.blue[this.darkMode?"600":"500"],pt.pink[this.darkMode?"600":"500"]];this.hasData||(t=$de,e=[this.darkMode?pt.gray[700]:pt.gray[200],this.darkMode?pt.gray[800]:pt.gray[100]]);const n=t.map(o=>o.yearmonth),i=["inflow","outflow"].map(o=>t.map(a=>a[o])),s=o=>N.format(o??0,"Currency"),r=jM(i);return{points:i,xLabels:n,colors:e,format:s,yMax:r,formatX:zM,gridColor:this.darkMode?"rgba(200, 200, 200, 0.2)":void 0,fontColor:this.darkMode?pt.gray[400]:void 0}}},async activated(){await this.setData(),this.hasData||await this.setHasData()},methods:{async setData(){const{periodList:t,fromDate:e,toDate:n}=F1(this.period),i=await N.db.getCashflow(e.toISO(),n.toISO()),s=er(i,"yearmonth");this.data=t.map(r=>{const o=r.toFormat("yyyy-MM"),a=s[o];return a||{inflow:0,outflow:0,yearmonth:o}})},async setHasData(){const e=(await N.db.getAllRaw("Account",{filters:{accountType:["in",[ln.Cash,ln.Bank]]}})).map(i=>i.name),n=await N.db.count(A.AccountingLedgerEntry,{filters:{account:["in",e]}});this.hasData=n>0}}}),$de=[{inflow:100,outflow:250,yearmonth:"2021-05"},{inflow:350,outflow:100,yearmonth:"2021-06"},{inflow:50,outflow:300,yearmonth:"2021-07"},{inflow:320,outflow:100,yearmonth:"2021-08"}],Dde={class:"flex items-center justify-between"},Mde={class:"font-semibold text-base dark:text-white"},Ide={key:0,class:"flex text-base gap-8"},Rde={class:"flex items-center gap-2"},_de={class:"text-gray-900 dark:text-gray-25"},Ede={class:"flex items-center gap-2"},Qde={class:"text-gray-900 dark:text-gray-25"},Nde={key:1,class:"w-16 h-5 bg-gray-200 dark:bg-gray-700 rounded"},Lde={key:3,class:"w-20 h-5 bg-gray-200 dark:bg-gray-700 rounded"};function Fde(t,e,n,i,s,r){const o=Q("PeriodSelector"),a=Q("LineChart");return w(),P("div",null,[v("div",Dde,[v("div",Mde,R(t.t`Cashflow`),1),t.hasData?(w(),P("div",Ide,[v("div",Rde,[e[1]||(e[1]=v("span",{class:"w-3 h-3 rounded-sm inline-block bg-blue-500 dark:bg-blue-600"},null,-1)),v("span",_de,R(t.t`Inflow`),1)]),v("div",Ede,[e[2]||(e[2]=v("span",{class:"w-3 h-3 rounded-sm inline-block bg-pink-500 dark:bg-pink-600"},null,-1)),v("span",Qde,R(t.t`Outflow`),1)])])):(w(),P("div",Nde)),t.hasData?(w(),H(o,{key:2,value:t.period,options:t.periodOptions,onChange:e[0]||(e[0]=l=>t.period=l)},null,8,["value","options"])):(w(),P("div",Lde))]),t.chartData.points.length?(w(),H(a,{key:0,class:"mt-4","aspect-ratio":4.15,colors:t.chartData.colors,"grid-color":t.chartData.gridColor,"font-color":t.chartData.fontColor,points:t.chartData.points,"x-labels":t.chartData.xLabels,format:t.chartData.format,"format-x":t.chartData.formatX,"y-max":t.chartData.yMax,"draw-labels":t.hasData,"show-tooltip":t.hasData},null,8,["colors","grid-color","font-color","points","x-labels","format","format-x","y-max","draw-labels","show-tooltip"])):B("",!0)])}const Bde=ne(Tde,[["render",Fde]]),Vde={props:{sectors:{default:()=>[],type:Array},totalLabel:{default:"Total",type:String},radius:{default:36,type:Number},startAngle:{default:Math.PI,type:Number},thickness:{default:10,type:Number},active:{default:null,type:Number},valueFormatter:{default:t=>t.toString(),Function},offsetX:{default:0,type:Number},offsetY:{default:0,type:Number},textOffsetX:{default:0,type:Number},textOffsetY:{default:0,type:Number},darkMode:{type:Boolean,default:!1}},emits:["change"],computed:{cx(){return 50+this.offsetX},cy(){return 50+this.offsetY},totalValue(){return this.sectors.map(({value:t})=>t).reduce((t,e)=>t+e,0)},thetasAndStarts(){const t=this.sectors.map(({value:n},i)=>({value:2*Math.PI*n/this.totalValue,filterOut:n!==0,i})).filter(({filterOut:n})=>n),e=[...t.map(({value:n})=>n)];return e.forEach(({value:n},i)=>{e[i]+=e[i-1]??0}),e.unshift(0),e.pop(),t.map((n,i)=>[n.i,n.value,e[i]])},hasNonZeroValues(){return this.thetasAndStarts.some(t=>this.sectors[t[0]].value!==0)}},methods:{getArcPath(...t){let[e,n,i,s,r]=t.map(parseFloat);s+=parseFloat(this.startAngle);const o=e+i*Math.cos(s),a=n+i*Math.sin(s),l=e+i*Math.cos(s+r),c=n+i*Math.sin(s+r),u=r>Math.PI?1:0;return`M ${o} ${a} A ${i} ${i} 0 ${u} 1 ${l} ${c}`},getSectorColor(t){return this.darkMode?this.sectors[t].color.darkColor:this.sectors[t].color.color}}},jde={id:"donut-hole"},zde=["cx","cy","r"],Zde=["cx","cy","r","stroke-width","stroke"],qde=["d","stroke","stroke-width","onMouseover"],Xde=["x","y"],Wde=["x","y"];function Gde(t,e,n,i,s,r){return w(),P("div",null,[(w(),P("svg",{version:"1.1",viewBox:"0 0 100 100",onMouseleave:e[1]||(e[1]=o=>t.$emit("change",null))},[v("defs",null,[v("clipPath",jde,[v("circle",{cx:r.cx,cy:r.cy,r:n.radius+n.thickness/2,fill:"black","stroke-width":"0"},null,8,zde)])]),r.thetasAndStarts.length===1||r.thetasAndStarts.length===0?(w(),P("circle",{key:0,"clip-path":"url(#donut-hole)",cx:r.cx,cy:r.cy,r:n.radius,"stroke-width":n.thickness+(r.hasNonZeroValues&&n.active===r.thetasAndStarts[0][0]?4:0),stroke:r.hasNonZeroValues?n.sectors[r.thetasAndStarts[0][0]].color:"#f4f4f6",class:ee(r.hasNonZeroValues?"sector":""),style:qe({transformOrigin:`${r.cx}px ${r.cy}px`}),fill:"transparent",onMouseover:e[0]||(e[0]=o=>t.$emit("change",r.thetasAndStarts.length===1?r.thetasAndStarts[0][0]:null))},null,46,Zde)):B("",!0),r.thetasAndStarts.length>1?(w(!0),P(le,{key:1},Pe(r.thetasAndStarts,([o,a,l])=>(w(),P("path",{key:o,"clip-path":"url(#donut-hole)",d:r.getArcPath(r.cx,r.cy,n.radius,l,a),stroke:r.getSectorColor(o),"stroke-width":n.thickness+(n.active===o?4:0),style:qe({transformOrigin:`${r.cx}px ${r.cy}px`}),class:"sector",fill:"transparent",onMouseover:c=>t.$emit("change",o)},null,44,qde))),128)):B("",!0),v("text",{x:r.cx,y:r.cy,"text-anchor":"middle",style:qe({fontSize:"6px",fontWeight:"bold",fill:n.darkMode?"#FFFFFF":"#415668"})},R(n.valueFormatter(n.active!==null&&n.sectors.length!==0?n.sectors[n.active].value:r.totalValue,"Currency")),13,Xde),v("text",{x:r.cx,y:r.cy+8,"text-anchor":"middle",style:{"font-size":"5px",fill:"#a1abb4"}},R(n.active!==null&&n.sectors.length!==0?n.sectors[n.active].label:n.totalLabel),9,Wde)],32))])}const Ude=ne(Vde,[["render",Gde],["__scopeId","data-v-9603ab69"]]),Hde=ve({name:"Expenses",components:{DonutChart:Ude,PeriodSelector:Vp,SectionHeader:tA},extends:Z1,props:{darkMode:{type:Boolean,default:!1}},data:()=>({active:null,expenses:[]}),computed:{totalExpense(){return this.expenses.reduce((t,e)=>t+e.total,0)},hasData(){return this.expenses.length>0},sectors(){return this.expenses.map(({account:t,color:e,total:n})=>({color:e,label:Vi.truncate(t,{length:21}),value:n}))}},activated(){this.setData()},methods:{async setData(){const{fromDate:t,toDate:e}=F1(this.period);let n=await N.db.getTopExpenses(t.toISO(),e.toISO());const i=[{class:"bg-pink-500",hex:pt.pink[500]},{class:"bg-pink-400",hex:pt.pink[400]},{class:"bg-pink-300",hex:pt.pink[300]},{class:"bg-pink-200",hex:pt.pink[200]},{class:"bg-pink-100",hex:pt.pink[100]}],s=[{class:"bg-pink-600",hex:pt.pink[600]},{class:"bg-pink-500",hex:pt.pink[500]},{class:"bg-pink-400",hex:pt.pink[400]},{class:"bg-pink-300",hex:pt.pink[300]},{class:"bg-pink-200 dark:bg-opacity-80",hex:pt.pink[200]+"CC"}];this.expenses=n.filter(r=>r.total>0).map((r,o)=>({account:r.account,total:r.total,color:{color:i[o].hex,darkColor:s[o].hex},class:{class:i[o].class,darkClass:s[o].class}}))}}}),Yde={class:"flex flex-col h-full"},Kde={class:"flex relative"},Jde={class:"w-1/2 flex flex-col gap-4 justify-center dark:text-gray-25"},ehe=["onMouseover"],the={class:"ms-2 overflow-x-auto whitespace-nowrap no-scrollbar w-28"},nhe={class:"whitespace-nowrap flex-shrink-0 ms-auto"},ihe={key:0,class:"flex-1 w-full h-full flex-center my-20"},she={class:"text-base text-gray-600 dark:text-gray-500"};function rhe(t,e,n,i,s,r){const o=Q("PeriodSelector"),a=Q("SectionHeader"),l=Q("DonutChart");return w(),P("div",Yde,[_(a,null,{title:U(()=>[He(R(t.t`Top Expenses`),1)]),action:U(()=>[_(o,{value:t.period,onChange:e[0]||(e[0]=c=>t.period=c)},null,8,["value"])]),_:1}),mn(v("div",Kde,[v("div",Jde,[(w(!0),P(le,null,Pe(t.expenses,(c,u)=>(w(),P("div",{key:c.account,class:"flex items-center text-sm",onMouseover:h=>t.active=u,onMouseleave:e[1]||(e[1]=h=>t.active=null)},[v("div",{class:ee(["w-3 h-3 rounded-sm flex-shrink-0",c.class])},null,2),v("p",the,R(c.account),1),v("p",nhe,R(t.fyo.format((c==null?void 0:c.total)??0,"Currency")),1)],40,ehe))),128))]),_(l,{class:"w-1/2 my-auto",active:t.active,sectors:t.sectors,"offset-x":3,thickness:10,"text-offset-x":6.5,"value-formatter":c=>t.fyo.format(c,"Currency"),"total-label":t.t`Total Spending`,"dark-mode":t.darkMode,onChange:e[2]||(e[2]=c=>t.active=c)},null,8,["active","sectors","value-formatter","total-label","dark-mode"])],512),[[ii,t.hasData]]),t.expenses.length===0?(w(),P("div",ihe,[v("span",she,R(t.t`No expenses in this period`),1)])):B("",!0)])}const ohe=ne(Hde,[["render",rhe]]),ahe={components:{Tooltip:eA},props:{skipXLabel:{type:Number,default:2},colors:{type:Array,default:()=>[]},xLabels:{type:Array,default:()=>[]},yLabelDivisions:{type:Number,default:4},points:{type:Array,default:()=>[[]]},drawAxis:{type:Boolean,default:!1},drawXGrid:{type:Boolean,default:!0},viewBoxHeight:{type:Number,default:500},aspectRatio:{type:Number,default:2.1},axisPadding:{type:Number,default:30},pointsPadding:{type:Number,default:40},xLabelOffset:{type:Number,default:20},yLabelOffset:{type:Number,default:0},gridColor:{type:String,default:"rgba(0, 0, 0, 0.2)"},zeroLineColor:{type:String,default:"rgba(0, 0, 0, 0.2)"},axisColor:{type:String,default:"rgba(0, 0, 0, 0.5)"},axisThickness:{type:Number,default:1},gridThickness:{type:Number,default:.5},yMin:{type:Number,default:null},yMax:{type:Number,default:null},format:{type:Function,default:t=>t.toFixed(1)},formatY:{type:Function,default:BM},formatX:{type:Function,default:t=>t},fontSize:{type:Number,default:22},fontColor:{type:String,default:"#415668"},bottom:{type:Number,default:0},width:{type:Number,default:28},left:{type:Number,default:65},radius:{type:Number,default:17},extendGridX:{type:Number,default:-20},tooltipDispDistThreshold:{type:Number,default:20},drawZeroLine:{type:Boolean,default:!0}},data(){return{xi:-1,yi:-1,activeColor:"rgba(0, 0, 0, 0.2)"}},computed:{fontStyle(){return{fontSize:this.fontSize,fill:this.fontColor}},viewBoxWidth(){return this.aspectRatio*this.viewBoxHeight},num(){return this.points.length},count(){return Math.max(...this.points.map(t=>t.length))},xs(){return Array(this.count).fill().map((t,e)=>this.padding+this.left+e*(this.viewBoxWidth-this.left-2*this.padding)/(this.count-1||1))},z(){return this.getViewBoxY(0)},ys(){return this.points.map(t=>t.map(this.getViewBoxY))},xy(){return this.xs.map((t,e)=>[t,this.ys.map(n=>n[e])])},min(){return Math.min(...this.points.flat())},max(){return Math.max(...this.points.flat())},axis(){return`M ${this.axisPadding+this.left} ${this.axisPadding} V ${this.viewBoxHeight-this.axisPadding-this.bottom} H ${this.viewBoxWidth-this.axisPadding}`},padding(){return this.axisPadding+this.pointsPadding},xGrid(){const{l:t,r:e}=this.xLims,n=t+this.extendGridX,i=e-this.extendGridX;return Array(this.yLabelDivisions+1).fill().map((r,o)=>this.yScalerLocation(o)).map(r=>`M ${n} ${r} H ${i}`).join(" ")},yGrid(){return[]},zLine(){const{l:t,r:e}=this.xLims,n=t+this.extendGridX,i=e-this.extendGridX;return`M ${n} ${this.z} H ${i}`},xLims(){const t=this.padding+this.left,e=this.viewBoxWidth-this.padding;return{l:t,r:e}},positiveRects(){return this.rects.flat().filter(({isPositive:t})=>t)},negativeRects(){return this.rects.flat().filter(({isPositive:t})=>!t)},rects(){return this.xy.map(([t,e],n)=>e.map((i,s)=>this.getRect(t,i,n,s)))},hMin(){return Math.min(this.yMin??this.min,0)},hMax(){let t=Math.max(this.yMax??this.max,0);return t===this.hMin?t+1e3:t}},methods:{gradY(t){return Math.min(...this.ys[t]).toFixed()},getViewBoxY(t){const e=this.hMin,n=this.hMax;let i=1-(t-e)/(n-e);return i===-1/0&&(i=0),this.padding+i*(this.viewBoxHeight-2*this.padding-this.bottom)},getRect(t,e,n,i){const s=e<=this.z,r=t-this.width*this.num/2+i*this.width,o=s?e:this.z-this.radius,l=Math.abs(e-this.z)+this.radius,c=this.getColor(i,s);return{x:r,y:o,height:l,color:c,isPositive:s,xi:n,yi:i}},getColor(t,e){if(this.colors.length>0){const n=this.colors[t];return typeof n=="string"?n:n[e?"positive":"negative"]}return this.getRandomColor()},yScalerLocation(t){return(this.yLabelDivisions-t)*(this.viewBoxHeight-this.padding*2-this.bottom)/this.yLabelDivisions+this.padding},yScalerValue(t){const e=this.hMin,n=this.hMax;return this.formatY(t*(n-e)/this.yLabelDivisions+e)},getLine(t){const[e,n]=this.xy[0];let i=`M ${e} ${n[t]} `;return this.xy.slice(1).forEach(([s,r])=>{i+=`L ${s} ${r[t]} `}),i},getGradLine(t){let e=this.viewBoxHeight-this.padding-this.bottom,n=`M ${this.padding+this.left} ${e}`;return this.xy.forEach(([i,s])=>{n+=`L ${i} ${s[t]} `}),n+` V ${e} Z`},getRandomColor(){return`rgb(${Array(3).fill().map(()=>parseInt(Math.random()*255)).join(",")})`},create(t,e){this.xi=t,this.yi=e,this.activeColor=this.getColor(e,this.points[e][t]>0),this.$refs.tooltip.create()},update(t){this.$refs.tooltip.update(t)},destroy(){this.xi=-1,this.yi=-1,this.$refs.tooltip.destroy()}}},lhe=["viewBox"],che=["d","stroke","stroke-width"],uhe=["d","stroke","stroke-width"],dhe=["d","stroke-width","stroke"],hhe=["y","x"],fhe=["y","x"],phe={id:"positive-rect-clip"},mhe=["width","height"],ghe={id:"negative-rect-clip"},yhe=["y","width","height"],Ohe=["rx","ry","x","y","width","height","fill","onMouseenter"],bhe=["rx","ry","x","y","width","height","fill","onMouseenter"],vhe={class:"flex flex-col justify-center items-center"},whe={class:"font-semibold"};function She(t,e,n,i,s,r){const o=Q("Tooltip");return w(),P("div",null,[(w(),P("svg",{ref:"chartSvg",viewBox:`0 0 ${r.viewBoxWidth} ${n.viewBoxHeight}`,xmlns:"http://www.w3.org/2000/svg"},[n.drawXGrid?(w(),P("path",{key:0,d:r.xGrid,stroke:n.gridColor,"stroke-width":n.gridThickness,"stroke-linecap":"round",fill:"transparent"},null,8,che)):B("",!0),n.drawZeroLine?(w(),P("path",{key:1,d:r.zLine,stroke:n.zeroLineColor,"stroke-width":n.gridThickness,"stroke-linecap":"round",fill:"transparent"},null,8,uhe)):B("",!0),n.drawAxis?(w(),P("path",{key:2,d:r.axis,"stroke-width":n.axisThickness,stroke:n.axisColor,fill:"transparent"},null,8,dhe)):B("",!0),n.xLabels.length>0?(w(!0),P(le,{key:3},Pe(r.count,(a,l)=>(w(),P("text",{key:l+"-xlabels",style:qe(r.fontStyle),y:n.viewBoxHeight-n.axisPadding+n.yLabelOffset+r.fontStyle.fontSize/2-n.bottom,x:r.xs[a-1],"text-anchor":"middle"},R(l%n.skipXLabel===0?n.formatX(n.xLabels[a-1]||""):""),13,hhe))),128)):B("",!0),n.yLabelDivisions>0?(w(!0),P(le,{key:4},Pe(n.yLabelDivisions+1,(a,l)=>(w(),P("text",{key:l+"-ylabels",style:qe(r.fontStyle),y:r.yScalerLocation(a-1),x:n.axisPadding-n.xLabelOffset+n.left,"text-anchor":"end"},R(r.yScalerValue(a-1)),13,fhe))),128)):B("",!0),v("defs",null,[v("clipPath",phe,[v("rect",{x:"0",y:"0",width:r.viewBoxWidth,height:r.z},null,8,mhe)]),v("clipPath",ghe,[v("rect",{x:"0",y:r.z,width:r.viewBoxWidth,height:n.viewBoxHeight-r.z},null,8,yhe)])]),(w(!0),P(le,null,Pe(r.positiveRects,(a,l)=>(w(),P("rect",{key:l+"prec",rx:n.radius,ry:n.radius,x:a.x,y:a.y,width:n.width,height:a.height,fill:a.color,"clip-path":"url(#positive-rect-clip)",onMouseenter:()=>r.create(a.xi,a.yi),onMousemove:e[0]||(e[0]=(...c)=>r.update&&r.update(...c)),onMouseleave:e[1]||(e[1]=(...c)=>r.destroy&&r.destroy(...c))},null,40,Ohe))),128)),(w(!0),P(le,null,Pe(r.negativeRects,(a,l)=>(w(),P("rect",{key:l+"nrec",rx:n.radius,ry:n.radius,x:a.x,y:a.y,width:n.width,height:a.height,fill:a.color,"clip-path":"url(#negative-rect-clip)",onMouseenter:()=>r.create(a.xi,a.yi),onMousemove:e[2]||(e[2]=(...c)=>r.update&&r.update(...c)),onMouseleave:e[3]||(e[3]=(...c)=>r.destroy&&r.destroy(...c))},null,40,bhe))),128))],8,lhe)),_(o,{ref:"tooltip",offset:15,placement:"top",class:"text-sm shadow-md px-2 py-1 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-200 border-s-4",style:qe({borderColor:s.activeColor})},{default:U(()=>[v("div",vhe,[v("p",null,R(s.xi>-1?n.formatX(n.xLabels[s.xi]):""),1),v("p",whe,R(s.yi>-1?n.format(n.points[s.yi][s.xi]):""),1)])]),_:1},8,["style"])])}const Che=ne(ahe,[["render",She],["__scopeId","data-v-aa1d71fb"]]),Ahe=ve({name:"ProfitAndLoss",components:{PeriodSelector:Vp,SectionHeader:tA,BarChart:Che},extends:Z1,props:{darkMode:{type:Boolean,default:!1}},data:()=>({data:[],hasData:!1,periodOptions:["This Year","This Quarter","YTD"]}),computed:{chartData(){const t=[this.data.map(r=>r.balance)],e=[{positive:pt.blue[this.darkMode?"600":"500"],negative:pt.pink[this.darkMode?"600":"500"]}],n=r=>N.format(r??0,"Currency"),i=jM(t),s=hde(t);return{xLabels:this.data.map(r=>r.yearmonth),points:t,format:n,colors:e,yMax:i,yMin:s,formatX:zM,gridColor:this.darkMode?"rgba(200, 200, 200, 0.2)":void 0,fontColor:this.darkMode?pt.gray[400]:void 0,zeroLineColor:this.darkMode?pt.gray[400]:void 0}}},activated(){this.setData()},methods:{async setData(){const{fromDate:t,toDate:e,periodList:n}=F1(this.period),i=await N.db.getIncomeAndExpenses(t.toISO(),e.toISO()),s=zf(i.income,"yearmonth","balance"),r=zf(i.expense,"yearmonth","balance");this.data=n.map(o=>{const a=o.toFormat("yyyy-MM"),l=s[a]??0,c=r[a]??0;return{yearmonth:a,balance:l-c}}),this.hasData=i.income.length>0||i.expense.length>0}}}),xhe={class:"flex flex-col h-full"},khe={key:1,class:"flex-1 w-full h-full flex-center my-20"},Phe={class:"text-base text-gray-600 dark:text-gray-500"};function The(t,e,n,i,s,r){const o=Q("PeriodSelector"),a=Q("SectionHeader"),l=Q("BarChart");return w(),P("div",xhe,[_(a,null,{title:U(()=>[He(R(t.t`Profit and Loss`),1)]),action:U(()=>[_(o,{value:t.period,options:t.periodOptions,onChange:e[0]||(e[0]=c=>t.period=c)},null,8,["value","options"])]),_:1}),t.hasData?(w(),H(l,{key:0,class:"mt-4","aspect-ratio":2.05,colors:t.chartData.colors,"grid-color":t.chartData.gridColor,"font-color":t.chartData.fontColor,points:t.chartData.points,"x-labels":t.chartData.xLabels,format:t.chartData.format,"format-x":t.chartData.formatX,"y-max":t.chartData.yMax,"y-min":t.chartData.yMin},null,8,["colors","grid-color","font-color","points","x-labels","format","format-x","y-max","y-min"])):(w(),P("div",khe,[v("span",Phe,R(t.t`No transactions yet`),1)]))])}const $he=ne(Ahe,[["render",The]]),Dhe={name:"Dashboard",components:{PageHeader:Nr,Cashflow:Bde,ProfitAndLoss:$he,Expenses:ohe,PeriodSelector:Vp,UnpaidInvoices:cde},props:{darkMode:{type:Boolean,default:!1}},data(){return{period:"This Year"}},activated(){Ai.value="books/dashboard"},deactivated(){Ai.value=""},methods:{handlePeriodChange(t){t!==this.period&&(this.period="")}}},Mhe={class:"h-screen",style:{width:"var(--w-desk)"}},Ihe={class:"border dark:border-gray-900 rounded bg-gray-50 dark:bg-gray-890 focus-within:bg-gray-100 dark:focus-within:bg-gray-900 flex items-center"},Rhe={class:"no-scrollbar overflow-auto dark:bg-gray-875",style:{height:"calc(100vh - var(--h-row-largest) - 1px)"}},_he={style:{"min-width":"var(--w-desk-fixed)"},class:"overflow-auto"},Ehe={class:"flex w-full"},Qhe={class:"flex"};function Nhe(t,e,n,i,s,r){const o=Q("PeriodSelector"),a=Q("PageHeader"),l=Q("Cashflow"),c=Q("UnpaidInvoices"),u=Q("ProfitAndLoss"),h=Q("Expenses");return w(),P("div",Mhe,[_(a,{title:t.t`Dashboard`},{default:U(()=>[v("div",Ihe,[_(o,{class:"px-3",value:s.period,options:["This Year","This Quarter","This Month","YTD"],onChange:e[0]||(e[0]=p=>s.period=p)},null,8,["value"])])]),_:1},8,["title"]),v("div",Rhe,[v("div",_he,[_(l,{class:"p-4","common-period":s.period,"dark-mode":n.darkMode,onPeriodChange:r.handlePeriodChange},null,8,["common-period","dark-mode","onPeriodChange"]),e[1]||(e[1]=v("hr",{class:"dark:border-gray-800"},null,-1)),v("div",Ehe,[_(c,{"schema-name":"SalesInvoice","common-period":s.period,"dark-mode":n.darkMode,class:"border-e dark:border-gray-800",onPeriodChange:r.handlePeriodChange},null,8,["common-period","dark-mode","onPeriodChange"]),_(c,{"schema-name":"PurchaseInvoice","common-period":s.period,"dark-mode":n.darkMode,onPeriodChange:r.handlePeriodChange},null,8,["common-period","dark-mode","onPeriodChange"])]),e[2]||(e[2]=v("hr",{class:"dark:border-gray-800"},null,-1)),v("div",Qhe,[_(u,{class:"w-full p-4 border-e dark:border-gray-800","common-period":s.period,"dark-mode":n.darkMode,onPeriodChange:r.handlePeriodChange},null,8,["common-period","dark-mode","onPeriodChange"]),_(h,{class:"w-full p-4","common-period":s.period,"dark-mode":n.darkMode,onPeriodChange:r.handlePeriodChange},null,8,["common-period","dark-mode","onPeriodChange"])]),e[3]||(e[3]=v("hr",{class:"dark:border-gray-800"},null,-1))])])])}const Lhe=ne(Dhe,[["render",Nhe]]),Fhe={},Bhe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 11"};function Vhe(t,e){return w(),P("svg",Bhe,[...e[0]||(e[0]=[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 2.25L9 2.25 2.25 2.25 2.25 4.5 0 2.25 2.25 0 2.25 2.25zM8.75 7.875L2 7.875 8.75 7.875 8.75 5.625 11 7.875 8.75 10.125 8.75 7.875z",transform:"translate(.5)"},null,-1)])])}const jhe=ne(Fhe,[["render",Vhe]]),zhe={},Zhe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 12"};function qhe(t,e){return w(),P("svg",Zhe,[...e[0]||(e[0]=[v("path",{d:"M3.375,3 C2.54657288,3 1.875,2.32842712 1.875,1.5 C1.875,0.671572875 2.54657288,0 3.375,0 C4.20342712,0 4.875,0.671572875 4.875,1.5 C4.875,2.32842712 4.20342712,3 3.375,3 Z M3.375,12 C2.54657288,12 1.875,11.3284271 1.875,10.5 C1.875,9.67157288 2.54657288,9 3.375,9 C4.20342712,9 4.875,9.67157288 4.875,10.5 C4.875,11.3284271 4.20342712,12 3.375,12 Z M3.375,7.5 C2.54657288,7.5 1.875,6.82842712 1.875,6 C1.875,5.17157288 2.54657288,4.5 3.375,4.5 C4.20342712,4.5 4.875,5.17157288 4.875,6 C4.875,6.82842712 4.20342712,7.5 3.375,7.5 Z M8.625,3 C7.79657288,3 7.125,2.32842712 7.125,1.5 C7.125,0.671572875 7.79657288,0 8.625,0 C9.45342712,0 10.125,0.671572875 10.125,1.5 C10.125,2.32842712 9.45342712,3 8.625,3 Z M8.625,12 C7.79657288,12 7.125,11.3284271 7.125,10.5 C7.125,9.67157288 7.79657288,9 8.625,9 C9.45342712,9 10.125,9.67157288 10.125,10.5 C10.125,11.3284271 9.45342712,12 8.625,12 Z M8.625,7.5 C7.79657288,7.5 7.125,6.82842712 7.125,6 C7.125,5.17157288 7.79657288,4.5 8.625,4.5 C9.45342712,4.5 10.125,5.17157288 10.125,6 C10.125,6.82842712 9.45342712,7.5 8.625,7.5 Z",transform:"translate(-1)"},null,-1)])])}const Xhe=ne(zhe,[["render",qhe]]),Whe={},Ghe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 10"};function Uhe(t,e){return w(),P("svg",Ghe,[...e[0]||(e[0]=[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.2 1.5L.8 1.5M3 5.75L9 5.75M5 10.5L7 10.5",transform:"translate(0 -2)"},null,-1)])])}const Hhe=ne(Whe,[["render",Uhe]]),Yhe={},Khe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 10"};function Jhe(t,e){return w(),P("svg",Khe,[...e[0]||(e[0]=[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M1.5,0.5 L10.5,0.5 C11.0522847,0.5 11.5,0.94771525 11.5,1.5 L11.5,8.5 C11.5,9.05228475 11.0522847,9.5 10.5,9.5 L1.5,9.5 C0.94771525,9.5 0.5,9.05228475 0.5,8.5 L0.5,1.5 C0.5,0.94771525 0.94771525,0.5 1.5,0.5 Z M7.5,0.5 L7.5,9.5"},null,-1)])])}const efe=ne(Yhe,[["render",Jhe]]),tfe={},nfe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 5 10"};function ife(t,e){return w(),P("svg",nfe,[...e[0]||(e[0]=[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4,3.63636364 L5.63636364,2 L7.27272727,3.63636364 M4,8.36363636 L5.63636364,10 L7.27272727,8.36363636",transform:"translate(-3 -1)"},null,-1)])])}const sfe=ne(tfe,[["render",ife]]),rfe={},ofe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 10"};function afe(t,e){return w(),P("svg",ofe,[...e[0]||(e[0]=[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M1.5,0.5 L10.5,0.5 C11.0522847,0.5 11.5,0.94771525 11.5,1.5 L11.5,8.5 C11.5,9.05228475 11.0522847,9.5 10.5,9.5 L1.5,9.5 C0.94771525,9.5 0.5,9.05228475 0.5,8.5 L0.5,1.5 C0.5,0.94771525 0.94771525,0.5 1.5,0.5 Z"},null,-1)])])}const lfe=ne(rfe,[["render",afe]]),cfe={"arrow-left-right":jhe,"drag-handle":Xhe,filter:Hhe,list:efe,select:sfe,sidebar:lfe},ufe={extends:tn},dfe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18"};function hfe(t,e,n,i,s,r){return w(),P("svg",dfe,[...e[0]||(e[0]=[v("g",{fill:"none","fill-rule":"evenodd"},[v("path",{fill:"#92D336","fill-rule":"nonzero",d:"M9,0 C4.02943725,-3.04359188e-16 6.08718376e-16,4.02943725 0,9 C-6.08718376e-16,13.9705627 4.02943725,18 9,18 C13.9705627,18 18,13.9705627 18,9 C17.985583,4.03542125 13.9645788,0.0144170383 9,0 Z"}),v("polyline",{stroke:"#FFF","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",points:"5 9.733 7.222 12.133 13 6"})],-1)])])}const ffe=ne(ufe,[["render",hfe]]),pfe={name:"IconPurchase",extends:tn},mfe={width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},gfe=["fill"],yfe=["fill"],Ofe=["fill"];function bfe(t,e,n,i,s,r){return w(),P("svg",mfe,[v("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.28577 0.728572C1.28577 0.326193 1.61196 0 2.01434 0H15.5572C15.9596 0 16.2858 0.326193 16.2858 0.728571V8.78571H12.1V12.5317H8.50592L12.9132 18H2.01434C1.61196 18 1.28577 17.6738 1.28577 17.2714V0.728572ZM13.5001 5.89286H4.71434V4.39286H13.5001V5.89286ZM4.71434 9.75H10.7143V8.25H4.71434V9.75ZM7.28577 13.6071H4.71434V12.1071H7.28577V13.6071Z",fill:t.darkColor},null,8,gfe),v("path",{d:"M16.2858 13.7317V15.6992L14.4429 17.9857L11.0143 13.7317H13.3V9.98571H15.5857V13.7317H16.2858Z",fill:t.darkColor},null,8,yfe),v("path",{d:"M13.3 13.7317V9.98572H14.4429H15.5857V13.7317H17.8714L14.4429 17.9857L11.0143 13.7317H13.3Z",fill:t.lightColor},null,8,Ofe)])}const vfe=ne(pfe,[["render",bfe]]),wfe={extends:tn},Sfe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18"};function Cfe(t,e,n,i,s,r){return w(),P("svg",Sfe,[...e[0]||(e[0]=[v("path",{fill:"#FED73A","fill-rule":"evenodd",d:"M13.8000002,0 L0.600000009,0 C0.268800004,0 0,0.268800004 0,0.600000009 L0,13.8000002 C0,14.1312002 0.268800004,14.4000002 0.600000009,14.4000002 L13.8000002,14.4000002 C14.1312002,14.4000002 14.4000002,14.1312002 14.4000002,13.8000002 L14.4000002,0.600000009 C14.4000002,0.268800004 14.1312002,0 13.8000002,0 Z M4.80000007,4.80000007 C4.80000007,3.47460005 5.87460009,2.40000004 7.20000011,2.40000004 C8.52540013,2.40000004 9.60000014,3.47460005 9.60000014,4.80000007 L9.60000014,5.40000008 C9.60000014,6.7254001 8.52540013,7.80000012 7.20000011,7.80000012 C5.87460009,7.80000012 4.80000007,6.7254001 4.80000007,5.40000008 L4.80000007,4.80000007 Z M10.8000002,12.6000002 L3.60000005,12.6000002 C3.26880005,12.6000002 3.00000004,12.3312002 3.00000004,12.0000002 C3.00000004,10.3434002 4.34340006,9.00000013 6.00000009,9.00000013 L8.40000013,9.00000013 C10.0566001,9.00000013 11.4000002,10.3434002 11.4000002,12.0000002 C11.4000002,12.3312002 11.1312002,12.6000002 10.8000002,12.6000002 Z",transform:"translate(2 2)"},null,-1)])])}const Afe=ne(wfe,[["render",Cfe]]),xfe={name:"IconDashboard",extends:tn},kfe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},Pfe={fill:"none","fill-rule":"evenodd",transform:"translate(.7)"},Tfe=["fill"],$fe=["fill"];function Dfe(t,e,n,i,s,r){return w(),P("svg",kfe,[v("g",Pfe,[v("path",{fill:t.lightColor,d:"M6,9.33333333 L0.666666667,9.33333333 C0.298666667,9.33333333 1.95399252e-14,9.03466667 1.95399252e-14,8.66666667 L1.95399252e-14,0.666666667 C1.95399252e-14,0.298666667 0.298666667,0 0.666666667,0 L6,0 C6.368,0 6.66666667,0.298666667 6.66666667,0.666666667 L6.66666667,8.66666667 C6.66666667,9.03466667 6.368,9.33333333 6,9.33333333 Z M14,5.33333333 L8.66666667,5.33333333 C8.29866667,5.33333333 8,5.03466667 8,4.66666667 L8,0.666666667 C8,0.298666667 8.29866667,-4.4408921e-16 8.66666667,-4.4408921e-16 L14,-4.4408921e-16 C14.368,-4.4408921e-16 14.6666667,0.298666667 14.6666667,0.666666667 L14.6666667,4.66666667 C14.6666667,5.03466667 14.368,5.33333333 14,5.33333333 Z"},null,8,Tfe),v("path",{fill:t.darkColor,"fill-rule":"nonzero",d:"M6,16 L0.666666667,16 C0.298666667,16 1.95399252e-14,15.7013333 1.95399252e-14,15.3333333 L1.95399252e-14,11.3333333 C1.95399252e-14,10.9653333 0.298666667,10.6666667 0.666666667,10.6666667 L6,10.6666667 C6.368,10.6666667 6.66666667,10.9653333 6.66666667,11.3333333 L6.66666667,15.3333333 C6.66666667,15.7013333 6.368,16 6,16 Z M14,16 L8.66666667,16 C8.29866667,16 8,15.7013333 8,15.3333333 L8,7.33333333 C8,6.96533333 8.29866667,6.66666667 8.66666667,6.66666667 L14,6.66666667 C14.368,6.66666667 14.6666667,6.96533333 14.6666667,7.33333333 L14.6666667,15.3333333 C14.6666667,15.7013333 14.368,16 14,16 Z"},null,8,$fe)])])}const Mfe=ne(xfe,[["render",Dfe]]),Ife={name:"IconGeneral",extends:tn},Rfe={width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_fe=["fill"],Efe=["fill"];function Qfe(t,e,n,i,s,r){return w(),P("svg",Rfe,[v("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.81398 5.75342L5.67204 6.73249L3.9698 5.03025L3.00005 6L5.09165e-05 3L3.00005 0L6.00005 3L5.0303 3.96975L6.81398 5.75342ZM14.2051 10.455L17.2238 13.473C18.2596 14.5088 18.2596 16.1873 17.2238 17.223C16.1881 18.2588 14.5096 18.2588 13.4738 17.223L10.0853 13.8345L12.8161 10.4602C13.0441 10.4865 13.2713 10.5 13.5001 10.5C13.7386 10.5 13.9733 10.482 14.2051 10.455Z",fill:t.lightColor},null,8,_fe),v("path",{d:"M15.2033 5.07825L12.9218 2.79675L15.3278 0.39075C14.7691 0.14175 14.1518 0 13.5001 0C11.0146 0 9.00005 2.0145 9.00005 4.5C9.00005 4.9455 9.0668 5.3745 9.18755 5.781L1.0958 12.3285C0.427551 12.9187 0.0285509 13.7678 0.00155092 14.658C-0.0261991 15.549 0.319551 16.4212 0.949551 17.0505C1.56155 17.6632 2.3753 18 3.2408 18C4.17005 18 5.05655 17.601 5.67155 16.9042L12.2191 8.8125C12.6256 8.93325 13.0546 9 13.5001 9C15.9856 9 18.0001 6.9855 18.0001 4.5C18.0001 3.84825 17.8583 3.231 17.6093 2.6715L15.2033 5.07825Z",fill:t.lightColor},null,8,Efe)])}const Nfe=ne(Ife,[["render",Qfe]]),Lfe={name:"IconGST",extends:tn},Ffe={width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Bfe=["fill"];function Vfe(t,e,n,i,s,r){return w(),P("svg",Ffe,[v("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2 1C0.895431 1 0 1.89543 0 3V15C0 16.1046 0.89543 17 2 17H16C17.1046 17 18 16.1046 18 15V3C18 1.89543 17.1046 1 16 1H2ZM8.58582 13.4571V11.64H6.95725V13.5429C6.95725 14.0229 7.10582 14.4114 7.40297 14.7086C7.70011 14.9943 8.08868 15.1371 8.56868 15.1371H9.46011C9.94011 15.1371 10.3287 14.9943 10.6258 14.7086C10.923 14.4114 11.0715 14.0229 11.0715 13.5429V10.1314C11.0715 9.83429 10.9973 9.6 10.8487 9.42857C10.7115 9.25714 10.5515 9.13143 10.3687 9.05143C10.1858 8.97143 10.043 8.90857 9.94011 8.86286L8.58582 8.26286V4.68C8.58582 4.62286 8.61439 4.59429 8.67154 4.59429H9.35725C9.41439 4.59429 9.44297 4.62286 9.44297 4.68V6.99429L11.0715 7.13143V4.59429C11.0715 4.11429 10.923 3.73143 10.6258 3.44571C10.3287 3.14857 9.94011 3 9.46011 3H8.56868C8.08868 3 7.70011 3.14857 7.40297 3.44571C7.10582 3.73143 6.95725 4.11429 6.95725 4.59429V8.50286C6.95725 8.8 7.02582 9.03429 7.16297 9.20571C7.31154 9.37714 7.47725 9.50857 7.66011 9.6C7.84297 9.68 7.98582 9.73714 8.08868 9.77143L9.44297 10.3714V13.4571C9.44297 13.5143 9.41439 13.5429 9.35725 13.5429H8.67154C8.61439 13.5429 8.58582 13.5143 8.58582 13.4571ZM12.0715 4.59429V3H16.7858V4.59429H15.2429V15H13.6144V4.59429H12.0715ZM5.51153 14.5714C5.80867 14.2743 5.95724 13.8857 5.95724 13.4057V8.17714H3.79724L3.6601 9.77143H4.32867V13.32C4.32867 13.3771 4.3001 13.4057 4.24295 13.4057H3.21438C3.15724 13.4057 3.12867 13.3771 3.12867 13.32V4.68C3.12867 4.62286 3.15724 4.59429 3.21438 4.59429H4.24295C4.3001 4.59429 4.32867 4.62286 4.32867 4.68V7.33714H5.95724V4.59429C5.95724 4.11429 5.80867 3.73143 5.51153 3.44571C5.21438 3.14857 4.82581 3 4.34581 3H3.11153C2.63153 3 2.24295 3.14857 1.94581 3.44571C1.64867 3.73143 1.5001 4.11429 1.5001 4.59429V13.4057C1.5001 13.8857 1.64867 14.2743 1.94581 14.5714C2.24295 14.8571 2.63153 15 3.11153 15H4.34581C4.82581 15 5.21438 14.8571 5.51153 14.5714Z",fill:t.darkColor},null,8,Bfe)])}const jfe=ne(Lfe,[["render",Vfe]]),zfe={name:"IconInventory",extends:tn},Zfe={width:"20",height:"20",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},qfe=["fill"],Xfe=["fill"],Wfe=["fill"],Gfe=["fill"];function Ufe(t,e,n,i,s,r){return w(),P("svg",Zfe,[v("path",{d:"M7.4943 0.151836C7.88385 -0.0506121 8.33973 -0.0506121 8.72928 0.151836L17.0957 4.49986L14.7724 5.70728L5.78847 1.03835L7.4943 0.151836Z",fill:t.lightColor},null,8,qfe),v("path",{d:"M9.88794 8.24572L0.904053 3.57679L4.11554 1.90778L13.0994 6.57671L9.88794 8.24572Z",fill:t.lightColor},null,8,Xfe),v("path",{d:"M10.6569 9.58498L17.9952 5.77127C17.9984 5.81193 18 5.85301 18 5.89441V12.453C18 12.9868 17.7304 13.4692 17.3093 13.7319L10.6569 17.8806L10.6569 9.58498Z",fill:t.darkColor},null,8,Wfe),v("path",{d:"M9.11923 9.58498L9.11923 18L0.78452 13.6684C0.313082 13.4234 0 12.9121 0 12.336V4.97134C0 4.92994 0.00161725 4.88887 0.00479439 4.84821L9.11923 9.58498Z",fill:t.darkColor},null,8,Gfe)])}const Hfe=ne(zfe,[["render",Ufe]]),Yfe={name:"IconInvoice",extends:tn},Kfe={width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Jfe=["fill"],epe=["fill"];function tpe(t,e,n,i,s,r){return w(),P("svg",Kfe,[v("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.475 6.3L0.3375 4.1625C-0.1125 3.7125 -0.1125 3.0375 0.3375 2.5875L2.5875 0.3375C3.0375 -0.1125 3.7125 -0.1125 4.1625 0.3375L6.3 2.475L2.475 6.3ZM15.525 11.7L17.6625 13.8375C17.8875 14.0625 18 14.2875 18 14.625V18H14.625C14.2875 18 14.0625 17.8875 13.8375 17.6625L11.7 15.525L15.525 11.7Z",fill:t.lightColor},null,8,Jfe),v("path",{d:"M17.6625 4.8375L13.1625 0.3375C12.7125 -0.1125 12.0375 -0.1125 11.5875 0.3375L10.125 1.8L12.0375 3.7125L10.4625 5.2875L8.55 3.375L6.75 5.175L8.6625 7.0875L7.0875 8.6625L5.175 6.75L3.375 8.55L5.2875 10.4625L3.7125 12.0375L1.8 10.125L0.3375 11.5875C-0.1125 12.0375 -0.1125 12.7125 0.3375 13.1625L4.8375 17.6625C5.2875 18.1125 5.9625 18.1125 6.4125 17.6625L17.6625 6.4125C18.1125 5.9625 18.1125 5.2875 17.6625 4.8375Z",fill:t.lightColor},null,8,epe)])}const npe=ne(Yfe,[["render",tpe]]),ipe={extends:tn},spe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18"};function rpe(t,e,n,i,s,r){return w(),P("svg",spe,[...e[0]||(e[0]=[v("path",{fill:"#F46181",d:"M13.7999992,0 C14.1311992,0 14.3999991,0.268799984 14.3999991,0.599999964 L14.3999991,2.99999982 C14.3999991,3.3311998 14.1311992,3.59999979 13.7999992,3.59999979 L0.599999964,3.59999979 C0.268799984,3.59999979 0,3.3311998 0,2.99999982 L0,0.599999964 C0,0.268799984 0.268799984,0 0.599999964,0 L13.7999992,0 Z M13.1999992,4.79999971 L13.1999992,12.5999992 C13.1999992,12.9311992 12.9311992,13.1999992 12.5999992,13.1999992 L1.79999989,13.1999992 C1.46879991,13.1999992 1.19999993,12.9311992 1.19999993,12.5999992 L1.19999993,4.79999971 L13.1999992,4.79999971 Z M9.59999943,9.59999943 L9.59999943,7.19999957 L4.79999971,7.19999957 L4.79999971,9.59999943 L9.59999943,9.59999943 Z",transform:"translate(2 2.2)"},null,-1)])])}const ope=ne(ipe,[["render",rpe]]),ape={extends:tn},lpe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18"};function cpe(t,e,n,i,s,r){return w(),P("svg",lpe,[...e[0]||(e[0]=[v("path",{fill:"#6881DF",d:"M10.05,9.45 L18,5.175 L18,12.75 C18,13.9926407 16.9926407,15 15.75,15 L2.25,15 C1.00735931,15 -8.42477746e-13,13.9926407 -8.42629924e-13,12.75 L-8.42629924e-13,5.175 L7.95,9.45 C8.25827686,9.66106884 8.62674743,9.76634614 9,9.75 C9.37325257,9.76634614 9.74172314,9.66106884 10.05,9.45 Z M15.75,-5.55111512e-16 C16.9926407,1.44328993e-15 18,1.00735931 18,2.25 L18,3 C18.0014575,3.27504919 17.8593023,3.53092845 17.625,3.675 L9.375,8.175 C9.25984373,8.23562752 9.12961637,8.261673 9,8.25 C8.87038363,8.261673 8.74015627,8.23562752 8.625,8.175 L0.375,3.675 C0.140697691,3.53092845 -0.00145745239,3.27504919 -1.08668614e-12,3 L-1.08668614e-12,2.25 C-1.08653396e-12,1.00735931 1.00735931,-8.8817842e-16 2.25,-5.55111512e-16 L15.75,-5.55111512e-16 Z",transform:"translate(0 2)"},null,-1)])])}const upe=ne(ape,[["render",cpe]]),dpe={extends:tn},hpe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},fpe=["fill"];function ppe(t,e,n,i,s,r){return w(),P("svg",hpe,[e[0]||(e[0]=v("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1)),v("path",{fill:t.darkColor,d:"M21 13V20C21 20.5523 20.5523 21 20 21H4C3.44772 21 3 20.5523 3 20V13H2V11L3 6H21L22 11V13H21ZM5 13V19H19V13H5ZM6 14H14V17H6V14ZM3 3H21V5H3V3Z"},null,8,fpe)])}const mpe=ne(dpe,[["render",ppe]]),gpe={extends:tn},ype={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18"};function Ope(t,e,n,i,s,r){return w(),P("svg",ype,[...e[0]||(e[0]=[v("path",{fill:"#FD9E64",d:"M17.25,3 L3,3 L2.25,3 C1.83675,3 1.5,2.66325 1.5,2.25 C1.5,1.83675 1.83675,1.5 2.25,1.5 L13.5,1.5 L13.5,2.25 L15,2.25 L15,0.75 C15,0.336 14.664,0 14.25,0 L2.25,0 C1.00725,0 0,1.00725 0,2.25 L0,15 C0,16.65675 1.34325,18 3,18 L17.25,18 C17.664,18 18,17.664 18,17.25 L18,3.75 C18,3.336 17.664,3 17.25,3 Z M13.5,12 C12.67125,12 12,11.32875 12,10.5 C12,9.67125 12.67125,9 13.5,9 C14.32875,9 15,9.67125 15,10.5 C15,11.32875 14.32875,12 13.5,12 Z"},null,-1)])])}const bpe=ne(gpe,[["render",Ope]]),vpe={extends:tn},wpe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18"};function Spe(t,e,n,i,s,r){return w(),P("svg",wpe,[...e[0]||(e[0]=[v("path",{fill:"#D279E6","fill-rule":"evenodd",d:"M9,0 C4.03725,0 0,4.03725 0,9 C0,13.96275 4.03725,18 9,18 C13.96275,18 18,13.96275 18,9 C18,4.03725 13.96275,0 9,0 Z M4.5,6 C4.5,5.17125 5.17125,4.5 6,4.5 C6.82875,4.5 7.5,5.17125 7.5,6 C7.5,6.82875 6.82875,7.5 6,7.5 C5.17125,7.5 4.5,6.82875 4.5,6 Z M6,13.0605 L4.9395,12 L12,4.9395 L13.0605,6 L6,13.0605 Z M12,13.5 C11.17125,13.5 10.5,12.82875 10.5,12 C10.5,11.17125 11.17125,10.5 12,10.5 C12.82875,10.5 13.5,11.17125 13.5,12 C13.5,12.82875 12.82875,13.5 12,13.5 Z"},null,-1)])])}const Cpe=ne(vpe,[["render",Spe]]),Ape={},xpe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"};function kpe(t,e){return w(),P("svg",xpe,[...e[0]||(e[0]=[v("g",{fill:"none","fill-rule":"evenodd"},[v("path",{fill:"#415668","fill-rule":"nonzero",d:"M15.5246667,2.028 L8.858,0.028 C8.65616136,-0.0324717007 8.43761545,0.00603303671 8.2685973,0.131844525 C8.09957915,0.257656014 7.99998537,0.455963879 8,0.666666667 L8,4 L9.33333333,4 L9.33333333,1.56266667 L14.6666667,3.16266667 L14.6666667,14.6666667 L10.6666667,14.6666667 L10.6666667,6 C10.6666667,5.63181017 10.3681898,5.33333333 10,5.33333333 L3.33333333,5.33333333 C2.9651435,5.33333333 2.66666667,5.63181017 2.66666667,6 L2.66666667,14.6666667 L1.33333333,14.6666667 L1.33333333,8 L0.666666667,8 C0.298476833,8 4.50902501e-17,8.29847683 0,8.66666667 L0,15.3333333 C4.50902501e-17,15.7015232 0.298476833,16 0.666666667,16 L15.3333333,16 C15.7015232,16 16,15.7015232 16,15.3333333 L16,2.66666667 C16.0000204,2.3721545 15.8067889,2.11252499 15.5246667,2.028 Z M8,14 L5.33333333,14 L5.33333333,12.6666667 L8,12.6666667 L8,14 Z M8,11.3333333 L5.33333333,11.3333333 L5.33333333,10 L8,10 L8,11.3333333 Z M8,8.66666667 L5.33333333,8.66666667 L5.33333333,7.33333333 L8,7.33333333 L8,8.66666667 Z"}),v("rect",{width:"1.333",height:"8",x:"12",y:"5.333",fill:"#A1ABB4"})],-1)])])}const Ppe=ne(Ape,[["render",kpe]]),Tpe={extends:tn},$pe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18"};function Dpe(t,e,n,i,s,r){return w(),P("svg",$pe,[...e[0]||(e[0]=[v("path",{fill:"#4ADAFC",d:"M14.25,0 L0.75,0 C0.336,0 0,0.33525 0,0.75 L0,18 L3,15.75 L5.25,18 L7.5,15.75 L9.75,18 L12,15.75 L15,18 L15,0.75 C15,0.33525 14.664,0 14.25,0 Z M8.25,12 L3,12 L3,10.5 L8.25,10.5 L8.25,12 Z M8.25,9 L3,9 L3,7.5 L8.25,7.5 L8.25,9 Z M8.25,6 L3,6 L3,4.5 L8.25,4.5 L8.25,6 Z M12,12 L9.75,12 L9.75,10.5 L12,10.5 L12,12 Z M12,9 L9.75,9 L9.75,7.5 L12,7.5 L12,9 Z M12,6 L9.75,6 L9.75,4.5 L12,4.5 L12,6 Z",transform:"translate(1.5)"},null,-1)])])}const Mpe=ne(Tpe,[["render",Dpe]]),Ipe={name:"IconPurchase",extends:tn},Rpe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 18"},_pe={fill:"none","fill-rule":"evenodd",transform:"translate(0 .5)"},Epe=["fill"],Qpe=["fill"];function Npe(t,e,n,i,s,r){return w(),P("svg",Rpe,[v("g",_pe,[v("path",{fill:t.darkColor,"fill-rule":"nonzero",d:"M0,4.3972168 L16,4.3972168 L16,15 C16,16.1045695 15.1045695,17 14,17 L2,17 C0.8954305,17 1.3527075e-16,16.1045695 0,15 L0,4.3972168 Z M8,12.2222222 C10.4,12.2222222 12.3636364,10.2722222 12.3636364,7.88888889 C12.3636364,7.45555556 12.0727273,7.16666667 11.6363636,7.16666667 C11.2,7.16666667 10.9090909,7.45555556 10.9090909,7.88888889 C10.9090909,9.47777778 9.6,10.7777778 8,10.7777778 C6.4,10.7777778 5.09090909,9.47777778 5.09090909,7.88888889 C5.09090909,7.45555556 4.8,7.16666667 4.36363636,7.16666667 C3.92727273,7.16666667 3.63636364,7.45555556 3.63636364,7.88888889 C3.63636364,10.2722222 5.6,12.2222222 8,12.2222222 Z"},null,8,Epe),v("path",{fill:t.lightColor,d:"M0,3 L1.49222874,1.12925513 C2.06146543,0.415626854 2.92465315,1.0558663e-15 3.83750348,8.8817842e-16 L12.1683182,-4.4408921e-16 C13.0831751,-6.12145698e-16 13.9480333,0.417447486 14.5171563,1.13373106 L16,3 L0,3 Z"},null,8,Qpe)])])}const Lpe=ne(Ipe,[["render",Npe]]),Fpe={name:"IconReports",extends:tn},Bpe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 17 16"},Vpe={"fill-rule":"evenodd"},jpe=["fill"],zpe=["fill"];function Zpe(t,e,n,i,s,r){return w(),P("svg",Bpe,[v("g",Vpe,[v("path",{fill:t.lightColor,d:"M16.2857143,2.5 L16.2857143,7.26902668 L11.9220779,7.26902668 C11.7032818,7.26906827 11.4982329,7.36737803 11.3613275,7.53318731 L11.2988052,7.62157447 L9.87116883,10 L7.50680519,4.09173512 C7.40433373,3.83523222 7.16527403,3.6589327 6.88983266,3.63673596 C6.64882146,3.61731381 6.41639286,3.71881295 6.26674592,3.90311574 L6.2078961,3.98706113 L4.23771429,7.26902668 L0.285714286,7.26902668 L0.285714286,2.5 C0.285714286,1.11928813 1.40500241,2.53632657e-16 2.78571429,0 L13.7857143,0 C15.1664262,-1.47995115e-15 16.2857143,1.11928813 16.2857143,2.5 Z"},null,8,jpe),v("path",{fill:t.darkColor,d:"M0.285714286,13.5 L0.285714286,8.73097332 L4.64935065,8.73097332 C4.86814675,8.73093173 5.07319563,8.63262197 5.2101011,8.46681269 L5.27262338,8.37842553 L6.70025974,6 L9.06462338,11.9104456 C9.15434161,12.1350283 9.34876191,12.2981168 9.58061609,12.3501369 L9.68207792,12.3654867 L9.74025974,12.3654867 C9.95905584,12.3654451 10.1641047,12.2671353 10.3010102,12.101326 L10.3635325,12.0129389 L12.3337143,8.73097332 L16.2857143,8.73097332 L16.2857143,13.5 C16.2857143,14.8807119 15.1664262,16 13.7857143,16 L2.78571429,16 C1.40500241,16 0.285714286,14.8807119 0.285714286,13.5 Z"},null,8,zpe)])])}const qpe=ne(Fpe,[["render",Zpe]]),Xpe={extends:tn},Wpe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18"};function Gpe(t,e,n,i,s,r){return w(),P("svg",Wpe,[...e[0]||(e[0]=[v("path",{fill:"#126FE1",d:"M7.125,9.75 C6.08946609,9.75 5.25,8.91053391 5.25,7.875 C5.25,6.83946609 6.08946609,6 7.125,6 C8.16053391,6 9,6.83946609 9,7.875 C9,8.91053391 8.16053391,9.75 7.125,9.75 Z M14.25,0 C14.6642136,2.53632657e-17 15,0.335786438 15,0.75 L15,17.25 C15,17.6642136 14.6642136,18 14.25,18 L0.75,18 C0.335786438,18 0,17.6642136 0,17.25 L0,0.75 C0,0.335786438 0.335786438,-2.53632657e-17 0.75,0 L14.25,0 Z M11.25,13.0605 L12.3105,12 L9.975,9.6645 C10.3162196,9.12988339 10.4983068,8.50922619 10.5,7.875 C10.5,6.01103897 8.98896103,4.5 7.125,4.5 C5.26103897,4.5 3.75,6.01103897 3.75,7.875 C3.75,9.73896103 5.26103897,11.25 7.125,11.25 C7.75922619,11.2483068 8.37988339,11.0662196 8.9145,10.725 L11.25,13.0605 Z",transform:"translate(1.5)"},null,-1)])])}const Upe=ne(Xpe,[["render",Gpe]]),Hpe={extends:tn},Ype={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18"};function Kpe(t,e,n,i,s,r){return w(),P("svg",Ype,[...e[0]||(e[0]=[v("path",{fill:"#36D3B1",d:"M14.25,0 L0.75,0 C0.335786438,-2.53632657e-17 0,0.335786438 0,0.75 L0,17.901 L3,15.9 L5.25,17.4 L7.5,15.9 L9.75,17.4 L12,15.9 L15,17.8995 L15,0.75 C15,0.335786438 14.6642136,2.53632657e-17 14.25,0 Z M8.25,11.25 L3,11.25 L3,9.75 L8.25,9.75 L8.25,11.25 Z M7.5,7.5 C6.25735931,7.5 5.25,6.49264069 5.25,5.25 C5.25,4.00735931 6.25735931,3 7.5,3 C8.74264069,3 9.75,4.00735931 9.75,5.25 C9.75,5.8467371 9.51294711,6.41903341 9.09099026,6.84099026 C8.66903341,7.26294711 8.0967371,7.5 7.5,7.5 Z M12,11.25 L9.75,11.25 L9.75,9.75 L12,9.75 L12,11.25 Z",transform:"translate(1.5)"},null,-1)])])}const Jpe=ne(Hpe,[["render",Kpe]]),eme={name:"IconSales",extends:tn},tme={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 14"},nme={fill:"none","fill-rule":"evenodd"},ime=["fill"],sme=["fill"];function rme(t,e,n,i,s,r){return w(),P("svg",tme,[v("g",nme,[v("path",{fill:t.darkColor,d:"M0,5.11230469 L16,5.11230469 L16,12 C16,13.1045695 15.1045695,14 14,14 L2,14 C0.8954305,14 1.3527075e-16,13.1045695 0,12 L0,5.11230469 Z M8.5,10 C8.22385763,10 8,10.2238576 8,10.5 C8,10.7761424 8.22385763,11 8.5,11 L12.5,11 C12.7761424,11 13,10.7761424 13,10.5 C13,10.2238576 12.7761424,10 12.5,10 L8.5,10 Z"},null,8,ime),v("path",{fill:t.lightColor,d:"M2,0 L14,0 C15.1045695,-2.02906125e-16 16,0.8954305 16,2 L16,3.64526367 L0,3.64526367 L0,2 C-1.3527075e-16,0.8954305 0.8954305,2.02906125e-16 2,0 Z"},null,8,sme)])])}const ome=ne(eme,[["render",rme]]),ame={name:"IconSettings",extends:tn},lme={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 18"},cme={fill:"none","fill-rule":"evenodd",transform:"translate(0 .5)"},ume=["fill"],dme=["fill"];function hme(t,e,n,i,s,r){return w(),P("svg",lme,[v("g",cme,[v("path",{fill:t.lightColor,d:"M4,8 L12,8 C14.1818182,8 16,6.18181818 16,4 C16,1.81818182 14.1818182,0 12,0 L4,0 C1.81818182,0 0,1.81818182 0,4 C0,6.18181818 1.81818182,8 4,8 Z M4,1.45454545 C5.38181818,1.45454545 6.54545455,2.61818182 6.54545455,4 C6.54545455,5.38181818 5.38181818,6.54545455 4,6.54545455 C2.61818182,6.54545455 1.45454545,5.38181818 1.45454545,4 C1.45454545,2.61818182 2.61818182,1.45454545 4,1.45454545 Z"},null,8,ume),v("path",{fill:t.darkColor,d:"M12,9 L4,9 C1.81818182,9 0,10.8181818 0,13 C0,15.1818182 1.81818182,17 4,17 L12,17 C14.1818182,17 16,15.1818182 16,13 C16,10.8181818 14.1818182,9 12,9 Z M12,15.5454545 C10.6181818,15.5454545 9.45454545,14.3818182 9.45454545,13 C9.45454545,11.6181818 10.6181818,10.4545455 12,10.4545455 C13.3818182,10.4545455 14.5454545,11.6181818 14.5454545,13 C14.5454545,14.3818182 13.3818182,15.5454545 12,15.5454545 Z"},null,8,dme)])])}const fme=ne(ame,[["render",hme]]),pme={extends:tn},mme={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18"};function gme(t,e,n,i,s,r){return w(),P("svg",mme,[...e[0]||(e[0]=[v("g",{fill:"none","fill-rule":"evenodd",transform:"translate(0 .35)"},[v("path",{fill:"#A1ABB4",d:"M6.54141662,5.52328734 L5.44516019,6.46319093 L3.81100888,4.82904 L2.88004888,5.76 L4.8879784e-05,2.88 L2.88004888,-2.5903612e-12 L5.76004888,2.88 L4.82908888,3.81096 L6.54141662,5.52328734 Z M13.6368489,10.0368 L16.5348489,12.93408 C17.5291689,13.9284 17.5291689,15.53976 16.5348489,16.53408 C15.5405289,17.5284 13.9291689,17.5284 12.9348489,16.53408 L9.68188888,13.28112 L12.3034089,10.04184 C12.5222889,10.06704 12.7404489,10.08 12.9600489,10.08 C13.1890089,10.08 13.4143689,10.06272 13.6368489,10.0368 Z"}),v("path",{fill:"#415668","fill-rule":"nonzero",d:"M14.5951689,4.87512 L12.4049289,2.68488 L14.7146889,0.37512 C14.1782889,0.13608 13.5857289,-1.77635684e-14 12.9600489,-1.77635684e-14 C10.5739689,-1.77635684e-14 8.64004888,1.93392 8.64004888,4.32 C8.64004888,4.74768 8.70412888,5.15952 8.82004888,5.54976 L1.05196888,11.83536 C0.41044888,12.402 0.0274088798,13.21704 0.00148887978,14.07168 C-0.0251511202,14.92704 0.30676888,15.7644 0.91156888,16.36848 C1.49908888,16.95672 2.28028888,17.28 3.11116888,17.28 C4.00324888,17.28 4.85428888,16.89696 5.44468888,16.22808 L11.7302889,8.46 C12.1205289,8.57592 12.5323689,8.64 12.9600489,8.64 C15.3461289,8.64 17.2800489,6.70608 17.2800489,4.32 C17.2800489,3.69432 17.1439689,3.10176 16.9049289,2.56464 L14.5951689,4.87512 Z"})],-1)])])}const yme=ne(pme,[["render",gme]]),Ome={extends:tn},bme={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18"};function vme(t,e,n,i,s,r){return w(),P("svg",bme,[...e[0]||(e[0]=[v("path",{fill:"#8F6FD8",d:"M5.40000008,7.20000011 C3.74580006,7.20000011 2.40000004,5.85420009 2.40000004,4.20000006 L2.40000004,3.00000004 C2.40000004,1.34580002 3.74580006,0 5.40000008,0 C7.05420011,0 8.40000013,1.34580002 8.40000013,3.00000004 L8.40000013,4.20000006 C8.40000013,5.85420009 7.05420011,7.20000011 5.40000008,7.20000011 Z M9.25380014,9.08700014 C10.1790002,9.43740014 10.8000002,10.3398002 10.8000002,11.3316002 L10.8000002,14.4000002 L0,14.4000002 L0,11.3316002 C0,10.3398002 0.621000009,9.43740014 1.54560002,9.08760014 C2.37480004,8.77320013 3.71640006,8.40000013 5.40000008,8.40000013 C7.08360011,8.40000013 8.42520013,8.77320013 9.25380014,9.08700014 Z M9.60000014,1.80000003 L14.4000002,1.80000003 L14.4000002,3.00000004 L9.60000014,3.00000004 L9.60000014,1.80000003 Z M9.60000014,4.80000007 L14.4000002,4.80000007 L14.4000002,6.00000009 L9.60000014,6.00000009 L9.60000014,4.80000007 Z M11.4000002,7.80000012 L14.4000002,7.80000012 L14.4000002,9.00000013 L11.4000002,9.00000013 L11.4000002,7.80000012 Z",transform:"translate(2 2)"},null,-1)])])}const wme=ne(Ome,[["render",vme]]),Sme={name:"IconSystem",extends:tn},Cme={width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ame=["fill"];function xme(t,e,n,i,s,r){return w(),P("svg",Cme,[v("path",{d:"M15.654 10.0898C15.7153 9.72968 15.7474 9.36524 15.75 9C15.7474 8.63476 15.7153 8.27032 15.654 7.91025L17.229 6.3885C17.4761 6.1494 17.5289 5.7729 17.3572 5.475L16.2322 3.525C16.0583 3.22835 15.7061 3.08632 15.375 3.17925L13.275 3.77925C12.7064 3.31615 12.0663 2.9486 11.3797 2.691L10.8525 0.5685C10.7692 0.234504 10.4692 9.5096e-05 10.125 0H7.87499C7.53076 9.5096e-05 7.2308 0.234504 7.14749 0.5685L6.61724 2.691C5.93172 2.94889 5.29265 3.31643 4.72499 3.77925L2.62499 3.17925C2.29389 3.0866 1.94191 3.22856 1.76774 3.525L0.642742 5.475C0.470644 5.77308 0.523523 6.15003 0.770992 6.38925L2.34599 7.911C2.28471 8.27082 2.2526 8.63501 2.24999 9C2.25256 9.36524 2.28467 9.72968 2.34599 10.0898L0.770992 11.6115C0.523898 11.8506 0.47104 12.2271 0.642742 12.525L1.76774 14.475C1.90185 14.7073 2.14978 14.8503 2.41799 14.85C2.4877 14.8497 2.55706 14.8401 2.62424 14.8215L4.72424 14.2215C5.29281 14.6846 5.93292 15.0522 6.61949 15.3098L7.14974 17.4323C7.23313 17.7651 7.53182 17.999 7.87499 18H10.125C10.4692 17.9999 10.7692 17.7655 10.8525 17.4315L11.3827 15.309C12.0683 15.0511 12.7073 14.6836 13.275 14.2208L15.375 14.8207C15.4422 14.8394 15.5115 14.8489 15.5812 14.8492C15.8495 14.8495 16.0974 14.7065 16.2315 14.4742L17.3565 12.5242C17.5286 12.2262 17.4757 11.8492 17.2282 11.61L15.654 10.0898ZM8.99999 12C7.34314 12 5.99999 10.6569 5.99999 9C5.99999 7.34315 7.34314 6 8.99999 6C10.6568 6 12 7.34315 12 9C12 9.79565 11.6839 10.5587 11.1213 11.1213C10.5587 11.6839 9.79564 12 8.99999 12Z",fill:t.lightColor},null,8,Ame)])}const kme=ne(Sme,[["render",xme]]),Pme={check:ffe,"common-entries":vfe,customer:Afe,dashboard:Mfe,fb:qD,general:Nfe,gst:jfe,inventory:Hfe,invoice:npe,item:ope,mail:upe,pos:mpe,"opening-ac":bpe,percentage:Cpe,property:Ppe,"purchase-invoice":Mpe,purchase:Lpe,reports:qpe,"review-ac":Upe,"sales-invoice":Jpe,sales:ome,settings:fme,start:yme,supplier:wme,system:kme},Tme={name:"IconGeneral",extends:tn},$me={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Dme={fill:"none","fill-rule":"evenodd"},Mme=["fill"],Ime=["fill"];function Rme(t,e,n,i,s,r){return w(),P("svg",$me,[v("g",Dme,[v("path",{fill:t.lightColor,d:"M9.08530087,7.67123242 L7.56272248,8.97665406 L5.29306789,6.707 L4.00006789,8 L6.78885887e-05,4 L4.00006789,-3.55351234e-12 L8.00006789,4 L6.70706789,5.293 L9.08530087,7.67123242 Z M18.9400679,13.94 L22.9650679,17.964 C24.3460679,19.345 24.3460679,21.583 22.9650679,22.964 C21.5840679,24.345 19.3460679,24.345 17.9650679,22.964 L13.4470679,18.446 L17.0880679,13.947 C17.3920679,13.982 17.6950679,14 18.0000679,14 C18.3180679,14 18.6310679,13.976 18.9400679,13.94 Z"},null,8,Mme),v("path",{fill:t.darkColor,"fill-rule":"nonzero",d:"M20.2710679,6.771 L17.2290679,3.729 L20.4370679,0.521 C19.6920679,0.189 18.8690679,-1.77635684e-14 18.0000679,-1.77635684e-14 C14.6860679,-1.77635684e-14 12.0000679,2.686 12.0000679,6 C12.0000679,6.594 12.0890679,7.166 12.2500679,7.708 L1.46106789,16.438 C0.570067889,17.225 0.0380678886,18.357 0.00206788859,19.544 C-0.0349321114,20.732 0.426067889,21.895 1.26606789,22.734 C2.08206789,23.551 3.16706789,24 4.32106789,24 C5.56006789,24 6.74206789,23.468 7.56206789,22.539 L16.2920679,11.75 C16.8340679,11.911 17.4060679,12 18.0000679,12 C21.3140679,12 24.0000679,9.314 24.0000679,6 C24.0000679,5.131 23.8110679,4.308 23.4790679,3.562 L20.2710679,6.771 Z"},null,8,Ime)])])}const _me=ne(Tme,[["render",Rme]]),Eme={name:"IconGreenCheck",extends:tn},Qme={width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg"};function Nme(t,e,n,i,s,r){return w(),P("svg",Qme,[...e[0]||(e[0]=[v("g",{fill:"none","fill-rule":"evenodd"},[v("path",{d:"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12C23.98 5.38 18.62.02 12 0z",fill:"#92D336","fill-rule":"nonzero"}),v("path",{stroke:"#FFF","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",d:"M8 12.756l2.222 2.4L16 9.022"})],-1)])])}const Lme=ne(Eme,[["render",Nme]]),Fme={name:"IconInvoice",extends:tn},Bme={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Vme={fill:"none","fill-rule":"evenodd"},jme=["fill"],zme=["fill"];function Zme(t,e,n,i,s,r){return w(),P("svg",Bme,[v("g",Vme,[v("path",{fill:t.lightColor,d:"M3.3,8.4 L0.45,5.55 C-0.15,4.95 -0.15,4.05 0.45,3.45 L3.45,0.45 C4.05,-0.15 4.95,-0.15 5.55,0.45 L8.4,3.3 L3.3,8.4 Z M20.7,15.6 L23.55,18.45 C23.85,18.75 24,19.05 24,19.5 L24,24 L19.5,24 C19.05,24 18.75,23.85 18.45,23.55 L15.6,20.7 L20.7,15.6 Z"},null,8,jme),v("path",{fill:t.darkColor,"fill-rule":"nonzero",d:"M23.55,6.45 L17.55,0.45 C16.95,-0.15 16.05,-0.15 15.45,0.45 L13.5,2.4 L16.05,4.95 L13.95,7.05 L11.4,4.5 L9,6.9 L11.55,9.45 L9.45,11.55 L6.9,9 L4.5,11.4 L7.05,13.95 L4.95,16.05 L2.4,13.5 L0.45,15.45 C-0.15,16.05 -0.15,16.95 0.45,17.55 L6.45,23.55 C7.05,24.15 7.95,24.15 8.55,23.55 L23.55,8.55 C24.15,7.95 24.15,7.05 23.55,6.45 Z"},null,8,zme)])])}const qme=ne(Fme,[["render",Zme]]),Xme={name:"IconMail",extends:tn},Wme={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 20"},Gme={fill:"none","fill-rule":"evenodd"},Ume=["fill"],Hme=["fill"];function Yme(t,e,n,i,s,r){return w(),P("svg",Wme,[v("g",Gme,[v("path",{fill:t.lightColor,"fill-rule":"nonzero",d:"M13.4,12.6 C12.9889642,12.8814251 12.4976701,13.0217949 12,13 C11.5023299,13.0217949 11.0110358,12.8814251 10.6,12.6 L0,6.9 L0,17 C2.02906125e-16,18.6568542 1.34314575,20 3,20 L21,20 C22.6568542,20 24,18.6568542 24,17 L24,6.9 L13.4,12.6 Z"},null,8,Ume),v("path",{fill:t.darkColor,d:"M21,-4.4408921e-16 L3,-4.4408921e-16 C1.34314575,-8.8817842e-16 4.60042228e-16,1.34314575 2.57135486e-16,3 L2.57135486e-16,4 C-0.00194326986,4.36673226 0.187596922,4.7079046 0.5,4.9 L11.5,10.9 C11.6535417,10.9808367 11.8271782,11.015564 12,11 C12.1728218,11.015564 12.3464583,10.9808367 12.5,10.9 L23.5,4.9 C23.8124031,4.7079046 24.0019433,4.36673226 24,4 L24,3 C24,1.34314575 22.6568542,2.22044605e-15 21,-4.4408921e-16 Z"},null,8,Hme)])])}const Kme=ne(Xme,[["render",Yme]]),Jme={name:"IconPrivacy",extends:tn},ege={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 22 24"},tge=["fill"];function nge(t,e,n,i,s,r){return w(),P("svg",ege,[v("path",{fill:t.darkColor,d:"M20.0525217,2.11095652 C20.5302337,2.21715027 20.8699706,2.64106207 20.8695652,3.13043478 L20.8695652,13.5652174 C20.8695652,19.3281887 16.1977539,24 10.4347826,24 C4.67181131,24 2.30018902e-12,19.3281887 2.29787204e-12,13.5652174 L2.29787204e-12,3.13043478 C-0.000405357328,2.64106207 0.339331532,2.21715027 0.817043478,2.11095652 L10.2083478,0.024 C10.3575704,-0.00835725383 10.5119948,-0.00835725383 10.6612174,0.024 L20.0525217,2.11095652 Z M15.6521739,16.6956522 L15.6521739,11.4782609 C15.6521739,10.9019637 15.1849928,10.4347826 14.6086957,10.4347826 L13.5652174,10.4347826 L13.5652174,8.34782609 C13.5652174,6.6189347 12.163674,5.2173913 10.4347826,5.2173913 C8.70589122,5.2173913 7.30434783,6.6189347 7.30434783,8.34782609 L7.30434783,10.4347826 L6.26086957,10.4347826 C5.68457243,10.4347826 5.2173913,10.9019637 5.2173913,11.4782609 L5.2173913,16.6956522 C5.2173913,17.2719493 5.68457243,17.7391304 6.26086957,17.7391304 L14.6086957,17.7391304 C15.1849928,17.7391304 15.6521739,17.2719493 15.6521739,16.6956522 Z M10.4347826,7.30434783 C11.0110797,7.30434783 11.4782609,7.77152896 11.4782609,8.34782609 L11.4782609,10.4347826 L9.39130435,10.4347826 L9.39130435,8.34782609 C9.39130435,7.77152896 9.85848548,7.30434783 10.4347826,7.30434783 Z",transform:"translate(.565)"},null,8,tge)])}const ige=ne(Jme,[["render",nge]]),sge={name:"IconSystem",extends:tn},rge={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},oge=["fill"];function age(t,e,n,i,s,r){return w(),P("svg",rge,[v("path",{fill:t.darkColor,d:"M20.872,13.453 C20.9537653,12.972909 20.9965715,12.4869919 21,12 C20.9965715,11.5130081 20.9537653,11.027091 20.872,10.547 L22.972,8.518 C23.3014584,8.19919706 23.371936,7.69719821 23.143,7.3 L21.643,4.7 C21.4110152,4.30446242 20.9414902,4.11509143 20.5,4.239 L17.7,5.039 C16.9419059,4.42152683 16.0884306,3.93146247 15.173,3.588 L14.47,0.758 C14.3589292,0.312671834 13.9589705,0.000126794654 13.5,0 L10.5,0 C10.0410295,0.000126794654 9.64107084,0.312671834 9.53,0.758 L8.823,3.588 C7.90897533,3.93185202 7.05687784,4.42190095 6.3,5.039 L3.5,4.239 C3.05853017,4.11546064 2.58922628,4.30474244 2.357,4.7 L0.857,7.3 C0.627535562,7.69743398 0.698040781,8.20004136 1.028,8.519 L3.128,10.548 C3.04628835,11.0277616 3.00348235,11.5133421 3,12 C3.00342848,12.4869919 3.04623467,12.972909 3.128,13.453 L1.028,15.482 C0.698541645,15.8008029 0.628063973,16.3028018 0.857,16.7 L2.357,19.3 C2.53580678,19.6097028 2.86638627,19.8003484 3.224,19.8 C3.31694619,19.7995843 3.40942403,19.7868055 3.499,19.762 L6.299,18.962 C7.05709407,19.5794732 7.91056935,20.0695375 8.826,20.413 L9.533,23.243 C9.64418563,23.6868483 10.0424394,23.9986148 10.5,24 L13.5,24 C13.9589705,23.9998732 14.3589292,23.6873282 14.47,23.242 L15.177,20.412 C16.0910247,20.068148 16.9431222,19.578099 17.7,18.961 L20.5,19.761 C20.589576,19.7858055 20.6820538,19.7985843 20.775,19.799 C21.1326137,19.7993484 21.4631932,19.6087028 21.642,19.299 L23.142,16.699 C23.3714644,16.301566 23.3009592,15.7989586 22.971,15.48 L20.872,13.453 Z M12,16 C9.790861,16 8,14.209139 8,12 C8,9.790861 9.790861,8 12,8 C14.209139,8 16,9.790861 16,12 C16,13.060866 15.5785726,14.0782816 14.8284271,14.8284271 C14.0782816,15.5785726 13.060866,16 12,16 Z"},null,8,oge)])}const lge=ne(sge,[["render",age]]),cge={general:_me,"green-check":Lme,invoice:qme,mail:Kme,privacy:ige,system:lge},uge={},dge={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 8 7"};function hge(t,e){return w(),P("svg",dge,[...e[0]||(e[0]=[v("g",{"fill-rule":"evenodd","stroke-linecap":"round","stroke-linejoin":"round"},[v("path",{d:"M6.8 4.002L.8 4M4.6 1.335l2.667 2.667L4.6 6.668"})],-1)])])}const fge=ne(uge,[["render",hge]]),pge={},mge={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 6 10"};function gge(t,e){return w(),P("svg",mge,[...e[0]||(e[0]=[v("path",{d:"M4.75 8.5L1.25 5l3.5-3.5","stroke-width":"1.5","fill-rule":"evenodd","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])}const yge=ne(pge,[["render",gge]]),Oge={},bge={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 6 8"};function vge(t,e){return w(),P("svg",bge,[...e[0]||(e[0]=[v("path",{d:"M1.25 7.75l3.5-3.5-3.5-3.5","fill-rule":"evenodd","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])}const wge=ne(Oge,[["render",vge]]),Sge={},Cge={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 8 8"};function Age(t,e){return w(),P("svg",Cge,[...e[0]||(e[0]=[v("circle",{cx:"4",cy:"4",r:"3.5","fill-rule":"evenodd"},null,-1)])])}const xge=ne(Sge,[["render",Age]]),kge={},Pge={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 8 2"};function Tge(t,e){return w(),P("svg",Pge,[...e[0]||(e[0]=[v("path",{d:"M1.633 1.033a.833.833 0 11-1.666 0 .833.833 0 011.666 0zm3.2 0a.833.833 0 11-1.666 0 .833.833 0 011.666 0zm3.2 0a.833.833 0 11-1.666 0 .833.833 0 011.666 0z","fill-rule":"nonzero"},null,-1)])])}const $ge=ne(kge,[["render",Tge]]),Dge={},Mge={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2 9"};function Ige(t,e){return w(),P("svg",Mge,[...e[0]||(e[0]=[v("path",{d:"M1 6.4a.833.833 0 110 1.667A.833.833 0 011 6.4zm0-3.2a.833.833 0 110 1.667A.833.833 0 011 3.2zM1 0a.833.833 0 110 1.667A.833.833 0 011 0z","fill-rule":"nonzero"},null,-1)])])}const Rge=ne(Dge,[["render",Ige]]),_ge={},Ege={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 10"};function Qge(t,e){return w(),P("svg",Ege,[...e[0]||(e[0]=[v("path",{d:"M7 1.4L8.6 3 3.8 7.8l-2.4.8.8-2.4z","fill-rule":"evenodd","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])}const Nge=ne(_ge,[["render",Qge]]),Lge={},Fge={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 8 8"};function Bge(t,e){return w(),P("svg",Fge,[...e[0]||(e[0]=[v("path",{d:"M4 .8v6.4M7.2 4H.8","fill-rule":"evenodd","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])}const Vge=ne(Lge,[["render",Bge]]),jge={},zge={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 6 8"};function Zge(t,e){return w(),P("svg",zge,[...e[0]||(e[0]=[v("g",{"fill-rule":"nonzero"},[v("path",{d:"M0 3h6L3 0z"}),v("path",{opacity:".5",d:"M3 8l3-3H0z"})],-1)])])}const qge=ne(jge,[["render",Zge]]),Xge={},Wge={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 8 8"};function Gge(t,e){return w(),P("svg",Wge,[...e[0]||(e[0]=[v("path",{d:"M7.2.8L.8 7.2m6.4 0L.8.8","fill-rule":"evenodd","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])}const Uge=ne(Xge,[["render",Gge]]),Hge={"arrow-right":fge,"chevron-left":yge,"chevron-right":wge,circle:xge,"dot-horizontal":$ge,"dot-vertical":Rge,pencil:Nge,plus:Vge,up:qge,x:Uge},Yge={8:Hge,12:cfe,18:Pme,24:cge},Kge={name:"Icon",props:{name:{type:String,required:!0},active:{type:Boolean,default:!1},darkMode:{type:Boolean,default:!1},size:{type:String,required:!0},height:Number},computed:{iconComponent(){return Yge[this.size][this.name]??null},iconClasses(){let t={8:"w-2 h-2",12:"w-3 h-3",16:"w-4 h-4",18:"w-5 h-5",24:"w-6 h-6"}[this.size];return this.height&&(t=`w-${this.height} h-${this.height}`),[t,"fill-current"]}}};function Jge(t,e,n,i,s,r){return w(),H(ro(r.iconComponent),Kc(t.$attrs,{class:r.iconClasses,active:n.active,darkMode:n.darkMode}),null,16,["class","active","darkMode"])}const s0=ne(Kge,[["render",Jge]]);function eye(){return[{label:b`Organisation`,items:[{key:"General",label:b`General`,icon:"general",description:b`Set up your company information, email, country and fiscal year`,fieldname:"companySetup",action:()=>rd(A.AccountingSettings)},{key:"Print",label:b`Print`,icon:"invoice",description:b`Customize your invoices by adding a logo and address details`,fieldname:"printSetup",action:()=>rd(A.PrintSettings)},{key:"System",label:b`System`,icon:"system",description:b`Setup system defaults like date format and display precision`,fieldname:"systemSetup",action:()=>rd(A.SystemSettings)}]},{label:b`Accounts`,items:[{key:"Review Accounts",label:b`Review Accounts`,icon:"review-ac",description:b`Review your chart of accounts, add any account or tax heads as needed`,action:()=>St("/chart-of-accounts"),fieldname:"chartOfAccountsReviewed",documentation:"https://docs.frappe.io/books/chart-of-accounts"},{key:"Opening Balances",label:b`Opening Balances`,icon:"opening-ac",fieldname:"openingBalanceChecked",description:b`Set up your opening balances before performing any accounting entries`,documentation:"https://docs.frappe.io/books/setup-opening-balances"},{key:"Add Taxes",label:b`Add Taxes`,icon:"percentage",fieldname:"taxesAdded",description:b`Set up your tax templates for your sales or purchase transactions`,action:()=>St("/list/Tax"),documentation:"https://docs.frappe.io/books/create-initial-entries#add-taxes"}]},{label:b`Sales`,items:[{key:"Add Sales Items",label:b`Add Items`,icon:"item",description:b`Add products or services that you sell to your customers`,action:()=>St({path:`/list/Item/${b`Sales Items`}`,query:{filters:JSON.stringify({for:"Sales"})}}),fieldname:"salesItemCreated",documentation:"https://docs.frappe.io/books/create-initial-entries#add-sales-items"},{key:"Add Customers",label:b`Add Customers`,icon:"customer",description:b`Add a few customers to create your first sales invoice`,action:()=>St({path:`/list/Party/${b`Customers`}`,query:{filters:JSON.stringify({role:"Customer"})}}),fieldname:"customerCreated",documentation:"https://docs.frappe.io/books/create-initial-entries#add-customers"},{key:"Create Sales Invoice",label:b`Create Sales Invoice`,icon:"sales-invoice",description:b`Create your first sales invoice for the created customer`,action:()=>St("/list/SalesInvoice"),fieldname:"invoiceCreated",documentation:"https://docs.frappe.io/books/sales-invoices"}]},{label:b`Purchase`,items:[{key:"Add Purchase Items",label:b`Add Items`,icon:"item",description:b`Add products or services that you buy from your suppliers`,action:()=>St({path:`/list/Item/${b`Purchase Items`}`,query:{filters:JSON.stringify({for:"Purchases"})}}),fieldname:"purchaseItemCreated"},{key:"Add Suppliers",label:b`Add Suppliers`,icon:"supplier",description:b`Add a few suppliers to create your first purchase invoice`,action:()=>St({path:`/list/Party/${b`Suppliers`}`,query:{filters:JSON.stringify({role:"Supplier"})}}),fieldname:"supplierCreated"},{key:"Create Purchase Invoice",label:b`Create Purchase Invoice`,icon:"purchase-invoice",description:b`Create your first purchase invoice from the created supplier`,action:()=>St("/list/PurchaseInvoice"),fieldname:"billCreated",documentation:"https://docs.frappe.io/books/purchase-invoices#creating-purchase-invoices"}]}]}const tye=ve({name:"GetStarted",components:{PageHeader:Nr,Button:At,Icon:s0},props:{darkMode:{type:Boolean,default:!1}},data(){return{activeCard:null,sections:eye()}},async activated(){await N.doc.getDoc("GetStarted"),await this.checkForCompletedTasks()},methods:{async handleDocumentation({key:t,documentation:e}){switch(e&&ipc.openLink(e),t){case"Opening Balances":await this.updateChecks({openingBalanceChecked:!0});break}},async handleAction({key:t,action:e}){switch(e&&(e(),this.activeCard=null),t){case"Print":await this.updateChecks({printSetup:!0});break;case"General":await this.updateChecks({companySetup:!0});break;case"System":await this.updateChecks({systemSetup:!0});break;case"Review Accounts":await this.updateChecks({chartOfAccountsReviewed:!0});break;case"Add Taxes":await this.updateChecks({taxesAdded:!0});break}},async checkIsOnboardingComplete(){var n,i;if((n=N.singles.GetStarted)!=null&&n.onboardingComplete)return!0;const t=await N.doc.getDoc("GetStarted"),e=(i=N.schemaMap.GetStarted)==null?void 0:i.fields.filter(({fieldname:s})=>s!=="onboardingComplete").map(({fieldname:s})=>t.get(s)).every(Boolean);if(e){await this.updateChecks({onboardingComplete:e});const s=await N.doc.getDoc("SystemSettings");await s.set("hideGetStarted",!0),await s.sync()}return e},async checkForCompletedTasks(){var e,n,i,s,r,o;let t={};if(!await this.checkIsOnboardingComplete()){if(!((e=N.singles.GetStarted)!=null&&e.salesItemCreated)){const a=await N.db.count("Item",{filters:{for:"Sales"}});t.salesItemCreated=a>0}if(!((n=N.singles.GetStarted)!=null&&n.purchaseItemCreated)){const a=await N.db.count("Item",{filters:{for:"Purchases"}});t.purchaseItemCreated=a>0}if(!((i=N.singles.GetStarted)!=null&&i.invoiceCreated)){const a=await N.db.count("SalesInvoice");t.invoiceCreated=a>0}if(!((s=N.singles.GetStarted)!=null&&s.customerCreated)){const a=await N.db.count("Party",{filters:{role:"Customer"}});t.customerCreated=a>0}if(!((r=N.singles.GetStarted)!=null&&r.billCreated)){const a=await N.db.count("SalesInvoice");t.billCreated=a>0}if(!((o=N.singles.GetStarted)!=null&&o.supplierCreated)){const a=await N.db.count("Party",{filters:{role:"Supplier"}});t.supplierCreated=a>0}await this.updateChecks(t)}},async updateChecks(t){var e;await((e=N.singles.GetStarted)==null?void 0:e.setAndSync(t)),await N.doc.getDoc("GetStarted")},isCompleted(t){var e;return((e=N.singles.GetStarted)==null?void 0:e.get(t.fieldname))||!1},getIconComponent(t){var s;let e=((s=N.singles.GetStarted)==null?void 0:s[t.fieldname])||!1,n=e?"green-check":t.icon,i=e?"24":"18";return{name:n,render(){return ja(s0,{...Object.assign({name:n,size:i},this.$attrs)})}}}}}),nye={class:"flex flex-col overflow-y-hidden"},iye={class:"flex-1 overflow-y-auto overflow-x-hidden custom-scroll custom-scroll-thumb1"},sye={class:"font-medium dark:text-gray-25"},rye={class:"flex mt-4 gap-4"},oye=["onMouseenter"],aye={class:"font-medium"},lye={class:"mt-2 text-sm text-gray-800 dark:text-gray-400"},cye={class:"flex mt-2 overflow-hidden"};function uye(t,e,n,i,s,r){const o=Q("PageHeader"),a=Q("Icon"),l=Q("Button");return w(),P("div",nye,[_(o,{title:t.t`Set Up Your Workspace`},null,8,["title"]),v("div",iye,[(w(!0),P(le,null,Pe(t.sections,c=>(w(),P("div",{key:c.label,class:"p-4 border-b dark:border-gray-800"},[v("h2",sye,R(c.label),1),v("div",rye,[(w(!0),P(le,null,Pe(c.items,u=>(w(),P("div",{key:u.label,class:"w-full md:w-1/3 sm:w-1/2"},[v("div",{class:"flex flex-col justify-between h-40 p-4 border dark:border-gray-800 dark:text-gray-50 rounded-lg",onMouseenter:()=>t.activeCard=u.key,onMouseleave:e[0]||(e[0]=()=>t.activeCard=null)},[v("div",null,[mn((w(),H(ro(t.getIconComponent(u)),{class:"mb-4"},null,512)),[[ii,t.activeCard!==u.key&&!t.isCompleted(u)]]),mn(_(a,{name:"green-check",size:"24",class:"w-5 h-5 mb-4"},null,512),[[ii,t.isCompleted(u)]]),v("h3",aye,R(u.label),1),v("p",lye,R(u.description),1)]),mn(v("div",cye,[u.action?(w(),H(l,{key:0,class:"leading-tight text-base",type:"primary",onClick:h=>t.handleAction(u)},{default:U(()=>[He(R(t.t`Set Up`),1)]),_:1},8,["onClick"])):B("",!0),u.documentation?(w(),H(l,{key:1,class:ee(["leading-tight text-base",{"ms-4":u.action}]),onClick:h=>t.handleDocumentation(u)},{default:U(()=>[He(R(t.t`Documentation`),1)]),_:1},8,["class","onClick"])):B("",!0)],512),[[ii,t.activeCard===u.key&&!t.isCompleted(u)]])],40,oye)]))),128))])]))),128))])])}const dye=ne(tye,[["render",uye]]),hye=[Ie.AttachImage,Ie.Attachment,Ie.Table];class fye{constructor(e,n){if(!n.schemaMap[e])throw new ie(`Invalid schemaName ${e} found in importer`);this.hasChildTables=!1,this.schemaName=e,this.fyo=n,this.docs=[],this.valueMatrix=[],this.optionsMap={values:{},labelValueMap:{}};const i=pye(e,n,this);this.assignedTemplateFields=i.map(s=>s.fieldKey),this.templateFieldsMap=new Map,this.templateFieldsPicked=new Map,i.forEach(s=>{this.templateFieldsMap.set(s.fieldKey,s),this.templateFieldsPicked.set(s.fieldKey,!0)})}selectFile(e){try{const n=Ise(e);this.selectParsed(n)}catch{return!1}return!0}async checkLinks(){var s,r,o;const e=this.assignedTemplateFields.map((a,l)=>({key:a,index:l,tf:this.templateFieldsMap.get(a??"")})).filter(({key:a,tf:l})=>!a||!l?!1:l.fieldtype===Ie.Link),n=new Map;for(const a of this.valueMatrix)for(const{tf:l,index:c}of e){const u=l.target,h=(s=a[c])==null?void 0:s.value;typeof h!="string"||!h||(n.has(u)||n.set(u,new Set),(r=n.get(u))==null||r.add(h))}const i=[];for(const[a,l]of n.entries())for(const c of l)await this.fyo.db.exists(a,c)||i.push({schemaName:a,schemaLabel:(o=this.fyo.schemaMap[this.schemaName])==null?void 0:o.label,name:c});return i}checkCellErrors(){var i;const e=this.assignedTemplateFields.map((s,r)=>({key:s,index:r,tf:this.templateFieldsMap.get(s??"")})).filter(({key:s,tf:r})=>!!s&&!!r),n=[];for(let s=0;s<this.valueMatrix.length;s++){const r=this.valueMatrix[s];for(const{tf:o,index:a}of e){if(!((i=r[a])!=null&&i.error))continue;const l=this.fyo.t`Row ${s+1}`,c=Kg(o);n.push(`(${l}, ${c})`)}}return n}populateDocs(){var r;const{dataMap:e,childTableMap:n}=this.getDataAndChildTableMapFromValueMatrix(),i=this.fyo.schemaMap[this.schemaName],s=i==null?void 0:i.fields.filter(o=>o.fieldtype===Ie.Table).reduce((o,a)=>{const{target:l,fieldname:c}=a;return o[l]=c,o},{});for(const[o,a]of e.entries()){const l=this.fyo.doc.getNewDoc(this.schemaName,a,!1);for(const c in s){const u=s[c],h=(r=n[o])==null?void 0:r[c];if(h)for(const p of h.values())l.push(u,p)}this.docs.push(l)}}getDataAndChildTableMapFromValueMatrix(){var r,o,a,l,c;const e=new Map,n={},i=this.assignedTemplateFields.map((u,h)=>({key:u,index:h})).filter(u=>{var h;return(h=u.key)==null?void 0:h.endsWith(".name")}).reduce((u,h)=>{if(h.key==null)return u;const p=h.key.split(".")[0];return u[p]=h.index,u},{}),s=i==null?void 0:i[this.schemaName];if(s<0)return{dataMap:e,childTableMap:n};for(let u=0;u<this.valueMatrix.length;u++){const h=this.valueMatrix[u],p=(r=h[s])==null?void 0:r.value;if(typeof p=="string")for(let m=0;m<h.length;m++){const y=this.assignedTemplateFields[m],O=this.templateFieldsMap.get(y??"");if(!O||!y)continue;const S=(o=this.fyo.schemaMap[O.schemaName])==null?void 0:o.isChild,x=h[m];if(x.value==null)continue;if(!S&&!e.has(p)&&e.set(p,{}),!S){e.get(p)[O.fieldname]=x.value;continue}const T=i[O.schemaName];let k=(a=h[T])==null?void 0:a.value;typeof k!="string"&&(k=`${O.schemaName}-${u}`),n[p]??(n[p]={}),(l=n[p])[c=O.schemaName]??(l[c]=new Map);const D=n[p][O.schemaName];D.has(k)||D.set(k,{});const M=D.get(k);M&&(M[O.fieldname]=x.value)}}return{dataMap:e,childTableMap:n}}selectParsed(e){if(!(e!=null&&e.length))return;let n=-1,i;for(let s=3;s>=0;s--){const r=e[s];if(r!=null&&r.length&&(i=this.assignTemplateFieldsFromParsedRow(r),i)){n=s+1;break}}i||this.clearAndResizeAssignedTemplateFields(e[0].length),n===-1&&(n=0),this.assignValueMatrixFromParsed(e.slice(n))}clearAndResizeAssignedTemplateFields(e){for(let n=0;n<e;n++)n>=this.assignedTemplateFields.length?this.assignedTemplateFields.push(null):this.assignedTemplateFields[n]=null}assignValueMatrixFromParsed(e){if(e!=null&&e.length)for(const n of e)this.pushToValueMatrixFromParsedRow(n)}pushToValueMatrixFromParsedRow(e){const n=[];for(let i=0;i<e.length;i++){const s=e[i],r=Number(i);r>=this.assignedTemplateFields.length&&this.assignedTemplateFields.push(null),n.push(this.getValueMatrixItem(r,s))}this.valueMatrix.push(n)}setTemplateField(e,n){e>=this.assignedTemplateFields.length?this.assignedTemplateFields.push(n):this.assignedTemplateFields[e]=n,this.updateValueMatrixColumn(e)}updateValueMatrixColumn(e){for(const n of this.valueMatrix){const i=this.getValueMatrixItem(e,n[e].rawValue??null);e>=n.length?n.push(i):n[e]=i}}getValueMatrixItem(e,n){const i={rawValue:n},s=this.assignedTemplateFields[e];if(!s)return i;const r=this.templateFieldsMap.get(s);if(!r)return i;if(i.rawValue==="")return i.value=null,i;if("options"in r&&typeof i.rawValue=="string")return this.getOptionFieldVmi(i,r);try{i.value=Lc.toDocValue(n,r,this.fyo)}catch{i.error=!0}return i}getOptionFieldVmi({rawValue:e},n){if(typeof e!="string")return{error:!0,value:null,rawValue:e};if(!(n!=null&&n.options.length))return{value:null,rawValue:e};if(!this.optionsMap.labelValueMap[n.fieldKey]){const r=new Set(n.options.map(({value:a})=>a)),o=zf(n.options,"label","value");this.optionsMap.labelValueMap[n.fieldKey]=o,this.optionsMap.values[n.fieldKey]=r}if(this.optionsMap.values[n.fieldKey].has(e))return{value:e,rawValue:e};const s=this.optionsMap.labelValueMap[n.fieldKey][e];return s?{value:s,rawValue:e}:{error:!0,value:null,rawValue:e}}assignTemplateFieldsFromParsedRow(e){if(!e.some(i=>this.templateFieldsMap.has(i)))return!1;for(let i=0;i<e.length;i++){const s=e[i],r=this.templateFieldsMap.get(s);let o=s;r||(o=null),o!==null&&!this.templateFieldsPicked.get(s)&&(o=null),Number(i)>=this.assignedTemplateFields.length?this.assignedTemplateFields.push(o):this.assignedTemplateFields[i]=o}return!0}addRow(){const e=this.assignedTemplateFields.map(n=>{n??(n="");const{fieldtype:i}=this.templateFieldsMap.get(n)??{};let s=null;return i&&(s=GH(i,this.fyo)),{value:s}});this.valueMatrix.push(e)}removeRow(e){this.valueMatrix=this.valueMatrix.filter((n,i)=>i!==e)}getCSVTemplate(){const e=[],n=[],i=[];for(const[s,r]of this.templateFieldsPicked.entries()){if(!r)continue;const o=this.templateFieldsMap.get(s);o&&(e.push(o.schemaLabel),n.push(o.label),i.push(o.fieldKey))}return QC([e,n,i])}}function pye(t,e,n){var o,a;const i=[{schema:e.schemaMap[t]}],s=[],r=((o=e.schemaMap[n.schemaName])==null?void 0:o.fields.reduce((l,c)=>(c.target&&(l[c.fieldname]=c),l),{}))??{};for(;i.length;){const{schema:l,parentSchemaChildField:c}=i.pop()??{};if(l)for(const u of l.fields){if(mye(u,l)||(u.fieldtype===Ie.Table&&(n.hasChildTables=!0,i.push({schema:e.schemaMap[u.target],parentSchemaChildField:u})),hye.includes(u.fieldtype)))continue;const h={...u};h.readOnly&&(h.readOnly=!1),l.isChild&&h.fieldname==="name"&&(h.required=!1),l.isChild&&h.required&&!((a=r[h.schemaName??""])!=null&&a.required)&&(h.required=!1);const p=l.name,m=l.label,y=`${l.name}.${u.fieldname}`;s.push({...h,schemaName:p,schemaLabel:m,fieldKey:y,parentSchemaChildField:c})}}return s}function Kg(t){return t.parentSchemaChildField?`${t.label} (${t.parentSchemaChildField.label})`:t.label}function mye(t,e){return t.computed||t.meta?!0:e.naming==="numberSeries"&&t.fieldname==="name"?!1:!!(t.hidden||t.readOnly&&!t.required)}const gye={props:{open:{type:Boolean,default:!1},percent:{type:Number,default:.5},message:{type:String,default:""},fullWidth:{type:Boolean,default:!1},showX:{type:Boolean,default:!0}},data(){return{close:!1}},mounted(){window.l=this},methods:{closeToast(){this.close=!0}}},yye={class:"border dark:border-gray-800 text-gray-900 dark:text-gray-100 shadow-lg px-3 py-3 items-center w-96 z-10 bg-white dark:bg-gray-900 rounded-lg"},Oye={key:0,class:"text-base text-gray-600 dark:text-gray-400 pb-2"},bye={class:"w-full flex flex-row items-center"};function vye(t,e,n,i,s,r){var a;const o=Q("feather-icon");return n.open&&!s.close?(w(),P("div",{key:0,class:"absolute bottom-0 flex justify-end pb-6 pe-6",style:qe({width:n.fullWidth?"100%":"calc(100% - 12rem)"})},[v("div",yye,[(a=n.message)!=null&&a.length?(w(),P("p",Oye,R(n.message),1)):B("",!0),v("div",bye,[v("div",{class:ee(["w-full h-3 me-2 rounded",n.percent>=0?"bg-gray-200 dark:bg-gray-800":"bg-gray-300 dark:bg-gray-700"])},[n.percent>=0?(w(),P("div",{key:0,class:"h-3 rounded bg-gray-800 dark:bg-gray-200",style:qe({width:`${n.percent*100}%`})},null,4)):B("",!0)],2),n.showX?(w(),H(o,{key:0,name:"x",class:"w-4 h-4 ms-auto text-gray-600 dark:text-gray-400 cursor-pointer hover:text-gray-800 dark:hover:text-gray-200",onClick:r.closeToast},null,8,["onClick"])):B("",!0)])])],4)):B("",!0)}const ZM=ne(gye,[["render",vye]]),wye=ve({components:{PageHeader:Nr,FormControl:is,Button:At,DropdownWithActions:th,Loading:ZM,AutoComplete:zl,Data:qa,Modal:di,FormHeader:Za,Check:Fp,Select:iu},data(){return{showColumnPicker:!1,complete:!1,success:[],successOldName:[],failed:[],file:null,nullOrImporter:null,importType:"",isMakingEntries:!1,percentLoading:0,messageLoading:""}},computed:{gridTemplateColumn(){return`grid-template-columns: 4rem repeat(${this.columnCount}, 10rem)`},duplicates(){if(!this.hasImporter)return[];const t=new Set,e=new Set;for(const n of this.importer.assignedTemplateFields){if(!n)continue;const i=this.importer.templateFieldsMap.get(n);e.has(n)&&i&&t.add(Kg(i)),e.add(n)}return Array.from(t)},requiredNotSelected(){if(!this.hasImporter)return[];const t=new Set(this.importer.assignedTemplateFields);return[...this.importer.templateFieldsMap.values()].filter(e=>t.has(e.fieldKey)||!e.required||e.parentSchemaChildField&&!e.parentSchemaChildField.required?!1:e.required).map(e=>Kg(e))},errorMessage(){return this.duplicates.length?this.t`Duplicate columns found: ${this.duplicates.join(", ")}`:this.requiredNotSelected.length?this.t`Required fields not selected: ${this.requiredNotSelected.join(", ")}`:""},canImportData(){return this.hasImporter?this.importer.valueMatrix.length>0:!1},canSelectFile(){return!this.file},columnCount(){return this.hasImporter?this.file?this.importer.valueMatrix.length?Math.min(this.importer.assignedTemplateFields.length,this.importer.valueMatrix[0].length):this.importer.assignedTemplateFields.length:this.numColumnsPicked:0},columnIterator(){return Array(this.columnCount).fill(null).map((t,e)=>e)},hasImporter(){return!!this.nullOrImporter},numColumnsPicked(){return[...this.importer.templateFieldsPicked.values()].filter(Boolean).length},columnPickerFieldsMap(){const t=new Map;for(const e of this.importer.templateFieldsMap.values()){let n=e.schemaLabel;e.parentSchemaChildField&&(n=`${e.parentSchemaChildField.label} (${e.schemaLabel})`),t.has(n)||t.set(n,[]),t.get(n).push(e)}return t},importer(){if(!this.nullOrImporter)throw new ie(this.t`Importer not set, reload tool`,!1);return this.nullOrImporter},importableSchemaNames(){var n;const t=[A.SalesInvoice,A.PurchaseInvoice,A.Payment,A.Party,A.Item,A.JournalEntry,A.Tax,A.Account,A.Address,A.NumberSeries];return((n=N.doc.singles.AccountingSettings)==null?void 0:n.enableInventory)&&t.push(A.StockMovement,A.Shipment,A.PurchaseReceipt,A.Location),t},actions(){const t=[];let e=this.t`Select File`;this.file&&(e=this.t`Change File`),this.canImportData&&t.push({label:e,component:{template:`<span>{{ "${e}" }}</span>`},action:this.selectFile.bind(this)});const n={label:this.t`Pick Import Columns`,component:{template:"<span>{{ t`Pick Import Columns` }}</span>"},action:()=>this.showColumnPicker=!0},i={label:this.t`Cancel`,component:{template:'<span class="text-red-700" >{{ t`Cancel` }}</span>'},action:this.clear.bind(this)};return t.push(n,i),t},fileName(){return this.file?this.file.name:""},helperMessage(){if(this.importType){if(!this.fileName)return""}else return this.t`Set an Import Type`;return this.fileName},isSubmittable(){var e;const t=this.importer.schemaName;return((e=N.schemaMap[t])==null?void 0:e.isSubmittable)??!1},gridColumnTitleDf(){const t=[];for(const e of this.importer.templateFieldsMap.values()){const n=e.fieldKey;if(!this.importer.templateFieldsPicked.get(n))continue;const i=Kg(e);t.push({value:n,label:i})}return t.push({value:"",label:this.t`None`}),{fieldname:"col",fieldtype:"Select",options:t}},pickedArray(){return[...this.importer.templateFieldsPicked.entries()].filter(([,t])=>t).map(([t])=>t)}},watch:{columnCount(t){if(!this.hasImporter)return;const e=this.importer.assignedTemplateFields.length;if(!(t>=this.importer.assignedTemplateFields.length))for(let n=t;n<e;n++)this.importer.assignedTemplateFields[n]=null}},mounted(){N.store.isDevelopment&&(window.iw=this)},activated(){Ai.value=Xo.ImportWizard},deactivated(){Ai.value="",this.complete&&this.clear()},methods:{getFieldTitle(t){const e=[];return t.value!=null&&e.push(this.t`Value: ${String(t.value)}`),t.rawValue!=null&&e.push(this.t`Raw Value: ${String(t.rawValue)}`),t.error&&e.push(this.t`Conversion Error`),e.length?e.join(", "):this.t`No Value`},pickColumn(t,e){if(this.importer.templateFieldsPicked.set(t,e),e)return;const n=this.importer.assignedTemplateFields.findIndex(i=>i===t);n>=0&&(this.importer.assignedTemplateFields[n]=null,this.reassignTemplateFields())},reassignTemplateFields(){if(this.importer.valueMatrix.length)return;for(let e=0;e<this.importer.assignedTemplateFields.length;e++)this.importer.assignedTemplateFields[e]=null;let t=0;for(const[e,n]of this.importer.templateFieldsPicked)n&&(this.importer.assignedTemplateFields[t]=e,t+=1)},async showMe(){const t=this.importer.schemaName;this.clear(),await this.$router.push(`/list/${t}`)},clear(){this.file=null,this.success=[],this.successOldName=[],this.failed=[],this.nullOrImporter=null,this.importType="",this.complete=!1,this.isMakingEntries=!1,this.percentLoading=0,this.messageLoading=""},async saveTemplate(){const t=this.importer.getCSVTemplate(),e=this.importType+" "+this.t`Template`,{canceled:n,filePath:i}=await Wl(e,"csv");n||!i||await ipc.saveData(t,i)},async preImportValidations(){const t=this.t`Cannot Import`;if(this.errorMessage.length)return await Qn({title:t,type:"error",detail:this.errorMessage}),!1;const e=this.importer.checkCellErrors();if(e.length)return await Qn({title:t,type:"error",detail:this.t`Following cells have errors: ${e.join(", ")}.`}),!1;const n=await this.importer.checkLinks();return n.length?(await Qn({title:t,type:"error",detail:this.t`Following links do not exist: ${n.map(i=>`(${i.schemaLabel??i.schemaName}, ${i.name})`).join(", ")}.`}),!1):!0},async importData(){if(!await this.preImportValidations()||this.isMakingEntries||this.complete)return;this.isMakingEntries=!0,this.importer.populateDocs();const e=await this.askShouldSubmit();let n=0;for(const i of this.importer.docs){this.setLoadingStatus(n,this.importer.docs.length);const s=i.name??"";try{await i.sync(),e&&await i.submit(),n+=1,this.success.push(i.name),this.successOldName.push(s)}catch(r){r instanceof Error&&this.failed.push({name:i.name,error:r})}}this.fyo.telemetry.log(si.Imported,this.importer.schemaName),this.isMakingEntries=!1,this.complete=!0},async askShouldSubmit(){var e;if(!((e=this.fyo.schemaMap[this.importType])!=null&&e.isSubmittable))return!1;let t=!1;return await Qn({title:this.t`Submit entries?`,type:"info",details:this.t`Should entries be submitted after syncing?`,buttons:[{label:this.t`Yes`,action(){t=!0},isPrimary:!0},{label:this.t`No`,action(){return null},isEscape:!0}]}),t},clearSuccessfullyImportedEntries(){const e=`${this.importer.schemaName}.name`,n=this.importer.assignedTemplateFields.findIndex(s=>s===e),i=this.importer.valueMatrix.filter(s=>{const r=s[n].value;return typeof r!="string"?!1:!this.successOldName.includes(r)});this.setImportType(this.importType),this.importer.valueMatrix=i},setImportType(t){this.clear(),t&&(this.importType=t,this.nullOrImporter=new fye(t,N))},setLoadingStatus(t,e){this.percentLoading=t/e,this.messageLoading=this.isMakingEntries?`${t} entries made out of ${e}...`:""},async selectFile(){const{text:t,name:e,filePath:n}=await tx([{name:"CSV",extensions:["csv"]}]);if(!t)return;if(!this.importer.selectFile(t)){await Qn({title:this.t`Cannot read file`,detail:this.t`Bad import data, could not read file.`,type:"error"});return}this.file={name:e,filePath:n,text:t}}}}),Sye={class:"flex flex-col overflow-hidden w-full"},Cye={class:"flex text-base w-full flex-col"},Aye={class:"h-row-largest flex flex-row justify-start items-center w-full gap-2 border-b dark:border-gray-800 p-4"},xye={key:0,class:"text-base ms-2 text-red-500"},kye={key:0,class:"font-normal"},Pye={key:1,class:"font-normal"},Tye={key:2},$ye={key:3,class:"font-normal"},Dye={key:0,class:"overflow-auto custom-scroll custom-scroll-thumb1",style:{"max-height":"calc(100vh - (2 * var(--h-row-largest)) - 2px)"}},Mye=["onClick"],Iye={class:"group-hover:hidden"},Rye={key:1,class:"ps-4 text-gray-700 dark:text-gray-300 sticky left-0 flex items-center",style:{height:"62.5px"}},_ye={class:"w-form"},Eye={class:"text-sm font-semibold text-gray-800 dark:text-gray-200"},Qye={class:"grid grid-cols-3 border dark:border-gray-800 rounded mt-1"},Nye={key:0,class:"w-0 text-red-600 -ml-4"},Lye={class:"p-4 flex justify-between items-center"},Fye={class:"text-sm text-gray-600 dark:text-gray-400"},Bye={class:"w-form"},Vye={key:0},jye={class:"flex justify-between px-4 pt-4 pb-1"},zye={class:"text-base font-semibold dark:text-gray-200"},Zye={class:"text-sm text-gray-600 dark:text-gray-400"},qye={class:"max-h-40 overflow-auto text-gray-900 dark:text-gray-50"},Xye={class:"text-end"},Wye={class:"whitespace-nowrap overflow-auto no-scrollbar"},Gye={key:1},Uye={class:"flex justify-between px-4 pt-4 pb-1"},Hye={class:"text-base font-semibold"},Yye={class:"text-sm text-gray-600 dark:text-gray-400"},Kye={class:"max-h-40 overflow-auto text-gray-900 dark:text-gray-50"},Jye={class:"text-end"},e0e={class:"whitespace-nowrap overflow-auto no-scrollbar"},t0e={class:"whitespace-nowrap overflow-auto no-scrollbar"},n0e={key:2,class:"p-4 text-base dark:text-gray-200"},i0e={class:"flex justify-between p-4"};function s0e(t,e,n,i,s,r){const o=Q("DropdownWithActions"),a=Q("feather-icon"),l=Q("Button"),c=Q("PageHeader"),u=Q("AutoComplete"),h=Q("Select"),p=Q("Data"),m=Q("FormControl"),y=Q("Loading"),O=Q("FormHeader"),S=Q("Check"),x=Q("Modal");return w(),P("div",Sye,[_(c,{title:t.t`Import Wizard`},{default:U(()=>[t.hasImporter?(w(),H(o,{key:0,actions:t.actions,disabled:t.isMakingEntries,title:t.t`More`},null,8,["actions","disabled","title"])):B("",!0),t.hasImporter?(w(),H(l,{key:1,title:t.t`Add Row`,disabled:t.isMakingEntries,icon:!0,onClick:e[0]||(e[0]=()=>t.importer.addRow())},{default:U(()=>[_(a,{name:"plus",class:"w-4 h-4"})]),_:1},8,["title","disabled"])):B("",!0),t.hasImporter?(w(),H(l,{key:2,title:t.t`Save Template`,icon:!0,onClick:t.saveTemplate},{default:U(()=>[_(a,{name:"download",class:"w-4 h-4"})]),_:1},8,["title","onClick"])):B("",!0),t.canImportData?(w(),H(l,{key:3,title:t.t`Import Data`,type:"primary",disabled:t.errorMessage.length>0||t.isMakingEntries,onClick:t.importData},{default:U(()=>[He(R(t.t`Import Data`),1)]),_:1},8,["title","disabled","onClick"])):B("",!0),t.importType&&!t.canImportData?(w(),H(l,{key:4,title:t.t`Select File`,type:"primary",onClick:t.selectFile},{default:U(()=>[He(R(t.t`Select File`),1)]),_:1},8,["title","onClick"])):B("",!0)]),_:1},8,["title"]),v("div",Cye,[v("div",Aye,[_(u,{df:{fieldname:"importType",label:t.t`Import Type`,fieldtype:"AutoComplete",options:t.importableSchemaNames.map(T=>{var k;return{value:T,label:((k=t.fyo.schemaMap[T])==null?void 0:k.label)??T}})},class:"w-40",border:!0,value:t.importType,size:"small",onChange:t.setImportType},null,8,["df","value","onChange"]),t.errorMessage.length>0?(w(),P("p",xye,R(t.errorMessage),1)):(w(),P("p",{key:1,class:ee(["text-base ms-2",t.fileName?"text-gray-900 dark:text-gray-25 font-semibold":"text-gray-700 dark:text-gray-200"])},[t.fileName?(w(),P("span",kye,R(t.t`Selected`),1)):B("",!0),He(" "+R(t.helperMessage)+R(t.fileName?",":"")+" ",1),t.fileName?(w(),P("span",Pye,R(t.t`check values and click on`),1)):B("",!0),e[3]||(e[3]=He(R(" "),-1)),t.fileName?(w(),P("span",Tye,R(t.t`Import Data.`),1)):B("",!0),t.hasImporter&&t.importer.valueMatrix.length>0?(w(),P("span",$ye,R(" "+(t.importer.valueMatrix.length===2?t.t`${t.importer.valueMatrix.length} row added.`:t.t`${t.importer.valueMatrix.length} rows added.`)),1)):B("",!0)],2))]),t.hasImporter?(w(),P("div",Dye,[v("div",{class:"grid sticky top-0 py-4 pe-4 bg-white dark:bg-gray-875 border-b border-e dark:border-gray-800 gap-4",style:qe([{"z-index":"1",width:"fit-content"},t.gridTemplateColumn])},[e[4]||(e[4]=v("div",{class:"index-cell"},"#",-1)),(w(!0),P(le,null,Pe(t.columnIterator,T=>(w(),H(h,{key:T,class:"flex-shrink-0",size:"small",border:!0,df:t.gridColumnTitleDf,value:t.importer.assignedTemplateFields[T],onChange:k=>t.importer.setTemplateField(T,k)},null,8,["df","value","onChange"]))),128))],4),t.importer.valueMatrix.length?(w(),P("div",{key:0,class:"grid py-4 pe-4 bg-white dark:bg-gray-875 gap-4 border-e last:border-b dark:border-gray-800",style:qe([{width:"fit-content"},t.gridTemplateColumn])},[(w(!0),P(le,null,Pe(t.importer.valueMatrix,(T,k)=>(w(),P(le,{key:k},[v("div",{class:"index-cell group cursor-pointer",onClick:D=>t.importer.removeRow(k)},[_(a,{name:"x",class:"w-4 h-4 hidden group-hover:inline-block -me-1",button:!0}),v("span",Iye,R(k+1),1)],8,Mye),(w(!0),P(le,null,Pe(T.slice(0,t.columnCount),(D,M)=>(w(),P(le,{key:`cell-${k}-${M}`},[t.importer.assignedTemplateFields[M]?(w(),H(m,{key:1,class:ee(D.error?"border border-red-300 dark:border-red-600 rounded-md":""),title:t.getFieldTitle(D),df:t.importer.templateFieldsMap.get(t.importer.assignedTemplateFields[M]),size:"small",rows:1,border:!0,value:D.error?null:D.value,"read-only":!1,onChange:L=>{t.importer.valueMatrix[k][M].error=!1,t.importer.valueMatrix[k][M].value=L}},null,8,["class","title","df","value","onChange"])):(w(),H(p,{key:0,title:t.getFieldTitle(D),df:{fieldtype:"Data",fieldname:"tempField",label:t.t`Temporary`,placeholder:t.t`Select column`},size:"small",border:!0,value:D.value!=null?String(D.value):D.rawValue!=null?String(D.rawValue):"","read-only":!0},null,8,["title","df","value"]))],64))),128))],64))),128))],4)):(w(),P("div",Rye,R(t.t`No rows added. Select a file or add rows.`),1))])):B("",!0)]),t.isMakingEntries?(w(),H(y,{key:0,open:t.isMakingEntries,percent:t.percentLoading,message:t.messageLoading},null,8,["open","percent","message"])):B("",!0),_(x,{"open-modal":t.showColumnPicker,onClosemodal:e[2]||(e[2]=T=>t.showColumnPicker=!1)},{default:U(()=>[v("div",_ye,[_(O,{"form-title":t.t`Pick Import Columns`},null,8,["form-title"]),e[5]||(e[5]=v("hr",{class:"dark:border-gray-800"},null,-1)),(w(!0),P(le,null,Pe(t.columnPickerFieldsMap.entries(),([T,k])=>(w(),P("div",{key:T,class:"p-4 max-h-80 overflow-auto custom-scroll custom-scroll-thumb1"},[v("h2",Eye,R(T),1),v("div",Qye,[(w(!0),P(le,null,Pe(k,D=>(w(),P("div",{key:D.fieldKey,class:"flex items-center"},[_(S,{df:{fieldtype:"Check",fieldname:D.fieldname,label:D.label},"show-label":!0,"read-only":D.required,value:t.importer.templateFieldsPicked.get(D.fieldKey),onChange:M=>t.pickColumn(D.fieldKey,M)},null,8,["df","read-only","value","onChange"]),D.required?(w(),P("p",Nye,"*")):B("",!0)]))),128))])]))),128)),e[6]||(e[6]=v("hr",{class:"dark:border-gray-800"},null,-1)),v("div",Lye,[v("p",Fye,R(t.t`${t.numColumnsPicked} fields selected`),1),_(l,{type:"primary",onClick:e[1]||(e[1]=T=>t.showColumnPicker=!1)},{default:U(()=>[He(R(t.t`Done`),1)]),_:1})])])]),_:1},8,["open-modal"]),_(x,{"open-modal":t.complete,onClosemodal:t.clear},{default:U(()=>[v("div",Bye,[_(O,{"form-title":t.t`Import Complete`},null,8,["form-title"]),e[9]||(e[9]=v("hr",{class:"dark:border-gray-800"},null,-1)),t.success.length>0?(w(),P("div",Vye,[v("div",jye,[v("p",zye,R(t.t`Success`),1),v("p",Zye,R(t.success.length===1?t.t`${t.success.length} entry imported`:t.t`${t.success.length} entries imported`),1)]),v("div",qye,[(w(!0),P(le,null,Pe(t.success,(T,k)=>(w(),P("div",{key:T,class:"px-4 py-1 grid grid-cols-2 text-base gap-4",style:{"grid-template-columns":"1rem auto"}},[v("div",Xye,R(k+1)+".",1),v("p",Wye,R(T),1)]))),128))]),e[7]||(e[7]=v("hr",{class:"dark:border-gray-800"},null,-1))])):B("",!0),t.failed.length>0?(w(),P("div",Gye,[v("div",Uye,[v("p",Hye,R(t.t`Failed`),1),v("p",Yye,R(t.failed.length===1?t.t`${t.failed.length} entry failed`:t.t`${t.failed.length} entries failed`),1)]),v("div",Kye,[(w(!0),P(le,null,Pe(t.failed,(T,k)=>(w(),P("div",{key:T.name,class:"px-4 py-1 grid grid-cols-2 text-base gap-4",style:{"grid-template-columns":"1rem 8rem auto"}},[v("div",Jye,R(k+1)+".",1),v("p",e0e,R(T.name),1),v("p",t0e,R(T.error.message),1)]))),128))]),e[8]||(e[8]=v("hr",null,null,-1))])):B("",!0),t.failed.length===0&&t.success.length===0?(w(),P("div",n0e,R(t.t`No entries were imported.`),1)):B("",!0),v("div",i0e,[t.failed.length>0?(w(),H(l,{key:0,onClick:t.clearSuccessfullyImportedEntries},{default:U(()=>[He(R(t.t`Fix Failed`),1)]),_:1},8,["onClick"])):B("",!0),t.failed.length===0&&t.success.length>0?(w(),H(l,{key:1,onClick:t.showMe},{default:U(()=>[He(R(t.t`Show Me`),1)]),_:1},8,["onClick"])):B("",!0),_(l,{onClick:t.clear},{default:U(()=>[He(R(t.t`Done`),1)]),_:1},8,["onClick"])])])]),_:1},8,["open-modal","onClosemodal"])])}const r0e=ne(wye,[["render",s0e],["__scopeId","data-v-91c1db64"]]),o0e=[Ie.AttachImage,Ie.Attachment];function qM(t,e=[]){return t.filter(n=>!n.computed&&n.label&&!e.includes(n.fieldname)).map(n=>{const{fieldname:i,label:s}=n,r=n.fieldtype;return{fieldname:i,fieldtype:r,label:s,export:!o0e.includes(r)}})}function a0e(t,e){return t.filter(n=>n.fieldtype===Ie.Table).map(n=>{var o;const i=n.target,s=((o=e.schemaMap[i])==null?void 0:o.fields)??[],r=qM(s,["name"]);return{fieldname:n.fieldname,label:n.label,target:i,fields:r}}).filter(n=>!!n.fields.length)}async function l0e(t,e,n,i,s,r){const o=await XM(t,e,n,i,s,r);return h0e(o.parentData,o.childTableData),JSON.stringify(o.parentData)}async function c0e(t,e,n,i,s,r){const{childTableData:o,parentData:a}=await XM(t,e,n,i,s,r),l=d0e(o),c=u0e(t,e,n),u=[];for(const y of a){const O=y.name;if(!O)continue;const S=c.parent.map(T=>y[T.fieldname]??""),x=l[O];if(!x||!Object.keys(x??{}).length){u.push([S,c.child.map(()=>"")].flat());continue}for(const T in x){const k=x[T]??[];for(const D of k){const M=c.child.map(L=>L.parentFieldname!==T?"":D[L.fieldname]??"");u.push([S,M].flat())}}}const h=[c.parent,c.child].flat(),p=h.map(y=>y.label),m=h.map(y=>`${y.schemaName}.${y.fieldname}`);return u.unshift(m),u.unshift(p),QC(u)}function u0e(t,e,n){var s;const i={parent:[],child:[]};for(const{label:r,fieldname:o,fieldtype:a,export:l}of e)!l||a===Ie.Table||i.parent.push({schemaName:t,label:r,fieldname:o});for(const r of n)if((s=e.find(o=>o.fieldname===r.fieldname))!=null&&s.export)for(const o of r.fields)o.export&&i.child.push({schemaName:r.target,label:o.label,fieldname:o.fieldname,parentFieldname:r.fieldname});return i}function d0e(t){var n;const e={};for(const i in t)for(const s of t[i]){const r=s.parent;r&&(e[r]??(e[r]={}),(n=e[r])[i]??(n[i]=[]),e[r][i].push(s))}return e}async function XM(t,e,n,i,s,r){const o=await f0e(t,s,e,i,r),a=o.map(c=>c.name).filter(Boolean),l=await p0e(n,e,a,r);return{parentData:o,childTableData:l}}function h0e(t,e){var i;const n=er(t,"name");for(const s in e){const r=e[s];for(const o of r){const a=o.parent;!a||!(n!=null&&n[a])||((i=n[a])[s]??(i[s]=[]),delete o.parent,delete o.name,n[a][s].push(o))}}}async function f0e(t,e,n,i,s){const r=["created"];s.db.fieldMap[t].date&&r.unshift("date");const o={filters:e,orderBy:r,order:"desc"};i&&(o.limit=i),o.fields=n.filter(l=>l.export&&l.fieldtype!==Ie.Table).map(l=>l.fieldname),o.fields.includes("name")||o.fields.unshift("name");const a=await s.db.getAllRaw(t,o);return WM(a,n),a}async function p0e(t,e,n,i){const s={};for(const r of t){const o=e.find(a=>a.fieldname===r.fieldname);o!=null&&o.export&&(s[r.fieldname]=await m0e(r,n,i))}return s}async function m0e(t,e,n){const i=t.fields.filter(r=>r.export&&r.fieldtype!==Ie.Table).map(r=>r.fieldname);i.includes("parent")||i.unshift("parent");const s=await n.db.getAllRaw(t.target,{orderBy:"idx",fields:i,filters:{parent:["in",e]}});return WM(s,t.fields),s}function WM(t,e){const n=e.filter(i=>i.fieldtype===Ie.Currency);for(const i of t)for(const{fieldname:s}of n)i[s]=kn(i[s]??"0")}const g0e=ve({components:{FormHeader:Za,Check:Fp,Select:iu,Button:At,Int:nu},props:{schemaName:{type:String,required:!0},listFilters:{type:Object,default:()=>{}},pageTitle:String},data(){var i;const t=((i=N.schemaMap[this.schemaName])==null?void 0:i.fields)??[],e=qM(t),n=a0e(t,N);return{limit:null,useListFilters:!0,exportFormat:"csv",fields:e,tableFields:n}},computed:{label(){var t,e;return this.pageTitle?this.pageTitle:((e=(t=N.schemaMap)==null?void 0:t[this.schemaName])==null?void 0:e.label)??""},filteredTableFields(){return this.tableFields.filter(t=>{const e=this.getExportField(t.fieldname);return!!(e!=null&&e.export)})},numSelected(){return this.filteredTableFields.reduce((t,e)=>e.fields.filter(n=>n.export).length+t,0)+this.fields.filter(t=>t.fieldtype!==Ie.Table&&t.export).length},configFields(){return{useListFilters:{fieldtype:"Check",label:b`Use List Filters`,fieldname:"useListFilters"},limit:{placeholder:"Limit number of rows",fieldtype:"Int",label:b`Limit`,fieldname:"limit"},exportFormat:{fieldtype:"Select",label:b`Export Format`,fieldname:"exportFormat",options:[{value:"json",label:"JSON"},{value:"csv",label:"CSV"}]}}}},methods:{getField(t){return{fieldtype:"Check",label:t.label,fieldname:t.fieldname}},getExportField(t,e){var i;let n;if(e?n=(i=this.tableFields.find(s=>s.target===e))==null?void 0:i.fields:n=this.fields,!!n)return n.find(s=>s.fieldname===t)},setExportFieldValue(t,e,n){const i=this.getExportField(t.fieldname,n);i&&(i.export=e)},async exportData(){const t=JSON.parse(JSON.stringify(this.useListFilters?this.listFilters:{}));let e;this.exportFormat==="json"?e=await l0e(this.schemaName,this.fields,this.tableFields,this.limit,t,N):e=await c0e(this.schemaName,this.fields,this.tableFields,this.limit,t,N),await this.saveExportData(e)},async saveExportData(t){const e=this.getFileName(),{canceled:n,filePath:i}=await Wl(e,this.exportFormat);n||!i||(await ipc.saveData(t,i),this.fyo.telemetry.log(si.Exported,this.schemaName,{extension:this.exportFormat}),mO(N.t`Export Successful`,i))},getFileName(){const t=this.label.toLowerCase().replace(/\s/g,"-"),e=new Date().toISOString().split("T")[0];return`${t}_${e}`}}}),y0e={class:"grid grid-cols-3 p-4 gap-4"},O0e={class:"max-h-80 overflow-auto custom-scroll custom-scroll-thumb2"},b0e={class:"p-4"},v0e={class:"text-sm font-semibold text-gray-800 dark:text-gray-300"},w0e={class:"grid grid-cols-3 border dark:border-gray-800 rounded mt-1"},S0e={class:"text-sm font-semibold text-gray-800 dark:text-gray-300"},C0e={class:"grid grid-cols-3 border dark:border-gray-800 rounded mt-1"},A0e={class:"p-4 flex justify-between items-center"},x0e={class:"text-sm text-gray-600 dark:text-gray-400"};function k0e(t,e,n,i,s,r){var h;const o=Q("FormHeader"),a=Q("Check"),l=Q("Select"),c=Q("Int"),u=Q("Button");return w(),P("div",null,[_(o,{"form-title":t.label,"form-sub-title":t.t`Export Wizard`},null,8,["form-title","form-sub-title"]),e[3]||(e[3]=v("hr",{class:"dark:border-gray-800"},null,-1)),v("div",y0e,[t.configFields.useListFilters&&Object.keys(t.listFilters).length?(w(),H(a,{key:0,df:t.configFields.useListFilters,"space-between":!0,"show-label":!0,"label-right":!1,value:t.useListFilters,border:!0,onChange:e[0]||(e[0]=p=>t.useListFilters=p)},null,8,["df","value"])):B("",!0),t.configFields.exportFormat?(w(),H(l,{key:1,df:t.configFields.exportFormat,value:t.exportFormat,border:!0,onChange:e[1]||(e[1]=p=>t.exportFormat=p)},null,8,["df","value"])):B("",!0),t.configFields.limit?(w(),H(c,{key:2,df:t.configFields.limit,value:t.limit??void 0,border:!0,onChange:e[2]||(e[2]=p=>t.limit=p)},null,8,["df","value"])):B("",!0)]),e[4]||(e[4]=v("hr",{class:"dark:border-gray-800"},null,-1)),v("div",O0e,[v("div",b0e,[v("h2",v0e,R(((h=t.fyo.schemaMap[t.schemaName])==null?void 0:h.label)??t.schemaName),1),v("div",w0e,[(w(!0),P(le,null,Pe(t.fields,p=>(w(),H(a,{key:p.fieldname,"label-class":p.fieldtype==="Table"?"text-sm text-gray-600 dark:text-gray-300 font-semibold":"text-sm text-gray-600 dark:text-gray-400",df:t.getField(p),"show-label":!0,value:p.export,onChange:m=>t.setExportFieldValue(p,m)},null,8,["label-class","df","value","onChange"]))),128))])]),(w(!0),P(le,null,Pe(t.filteredTableFields,p=>{var m;return w(),P("div",{key:p.fieldname,class:"p-4"},[v("h2",S0e,R(((m=t.fyo.schemaMap[p.target])==null?void 0:m.label)??t.schemaName),1),v("div",C0e,[(w(!0),P(le,null,Pe(p.fields,y=>(w(),H(a,{key:y.fieldname,"label-class":"text-gray-600 dark:text-gray-300",df:t.getField(y),"show-label":!0,value:y.export,onChange:O=>t.setExportFieldValue(y,O,p.target)},null,8,["df","value","onChange"]))),128))])])}),128))]),e[5]||(e[5]=v("hr",{class:"dark:border-gray-800"},null,-1)),v("div",A0e,[v("p",x0e,R(t.t`${t.numSelected} fields selected`),1),_(u,{type:"primary",onClick:t.exportData},{default:U(()=>[He(R(t.t`Export`),1)]),_:1},8,["onClick"])])])}const P0e=ne(g0e,[["render",k0e]]),lg=[{label:b`Is`,value:"="},{label:b`Is Not`,value:"!="},{label:b`Contains`,value:"like"},{label:b`Does Not Contain`,value:"not like"},{label:b`Greater Than`,value:">"},{label:b`Less Than`,value:"<"},{label:b`Is Empty`,value:"is null"},{label:b`Is Not Empty`,value:"is not null"}],T0e=ve({name:"FilterDropdown",components:{Popover:V1,Button:At,Icon:s0,Select:iu,Data:qa},props:{schemaName:{type:String,required:!0}},emits:["change"],data(){return{filters:[],newFilters:[]}},computed:{fields(){var r,o,a,l;const t=[Ie.Table,Ie.Attachment,Ie.AttachImage],e=(o=(r=N.models[this.schemaName])==null?void 0:r.getListViewSettings)==null?void 0:o.call(r,N),n=(a=e==null?void 0:e.columns)==null?void 0:a[1],i=((l=N.schemaMap[this.schemaName])==null?void 0:l.fields)??[],s=i.filter(c=>c.filter?!0:!(t.includes(c.fieldtype)||c.computed||c.meta||c.readOnly));if(n&&n.fieldname&&!s.some(u=>u.fieldname===n.fieldname)){const u=i.find(h=>h.fieldname===n.fieldname);u?s.unshift(u):s.unshift(n)}return s},fieldOptions(){return this.fields.map(t=>({label:t.fieldname,value:t.fieldname}))},conditions(){return[...lg]},conditionsForDropdown(){return lg.map(t=>({label:t.label,value:t.label}))},explicitFilters(){return this.filters.filter(t=>!t.implicit)},activeFilterCount(){return this.explicitFilters.filter(t=>t.value).length},filterAppliedMessage(){return this.activeFilterCount===1?this.t`1 filter applied`:this.t`${this.activeFilterCount} filters applied`}},methods:{getRandomString:Vl,getConditionLabel(t){const e=lg.find(n=>n.value===t);return e?e.label:t},getConditionValue(t){const e=lg.find(n=>n.label===t);return e?e.value:t},addNewFilter(){const t=this.fields[0];t&&this.addFilter(t.fieldname,"like","",!1)},addFilter(t,e,n,i){const s=this.getConditionLabel(e),r={fieldname:t,condition:s,value:n,implicit:!!i};this.filters.push(r),this.newFilters.push(r)},applyFilters(){this.emitFilterChange()},removeFilter(t){this.filters.splice(t,1),this.newFilters.splice(t,1)},clearAllFilters(){this.filters=[],this.newFilters=[],this.$emit("change",{})},updateNewFilters(t,e,n){if(e==="condition"){const i=this.getConditionLabel(n);this.newFilters[t][e]=i,this.filters[t][e]=i}else this.newFilters[t][e]=n,this.filters[t][e]=n},setFilter(t,e){this.filters=[],this.newFilters=[],Object.keys(t).map(n=>{let i=t[n],s,r;Array.isArray(i)?(s=i[0],r=i[1]):(s="=",r=i),this.addFilter(n,s,r,e)}),this.emitFilterChange()},emitFilterChange(){const t={};for(const{condition:e,value:n,fieldname:i}of this.newFilters){if(n===""||n===null||n===void 0)continue;const s=this.getConditionValue(e);i==="numberSeries"?t.name=[s,n]:t[i]=[s,n]}this.$emit("change",t),this.filters=[...this.newFilters],this.newFilters.length&&(this.filters=this.filters.filter(e=>e.condition&&e.value&&e.fieldname),this.filters.push(this.newFilters[this.newFilters.length-1])),this.filters=Array.from(new Map(this.filters.map(e=>[`${e.condition}-${e.value}-${e.fieldname}`,e])).values())}}}),$0e={class:"flex items-center"},D0e={class:"ms-1"},M0e={class:"p-2"},I0e={key:0,class:"flex flex-col gap-2"},R0e={class:"cursor-pointer w-4 h-4 flex items-center justify-center text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-300 rounded-md group"},_0e={class:"hidden group-hover:inline-block"},E0e={class:"group-hover:hidden"},Q0e={key:1,class:"text-base text-gray-600 dark:text-gray-500"},N0e={class:"flex justify-between border-t dark:border-gray-800"},L0e={class:"ms-2"},F0e={class:"flex"},B0e={class:"ms-2"},V0e={class:"ml-2 text-sm"};function j0e(t,e,n,i,s,r){const o=Q("Icon"),a=Q("Button"),l=Q("feather-icon"),c=Q("Select"),u=Q("Data"),h=Q("Popover");return t.fields.length?(w(),H(h,{key:0,ref:"filterPopover",placement:"bottom-end",onClose:t.emitFilterChange,"close-on-click-outside":!0,"close-on-click-content":!1},{target:U(({togglePopover:p})=>[_(a,{icon:!0,onClick:m=>p()},{default:U(()=>[v("span",$0e,[_(o,{name:"filter",size:"12",class:"stroke-current text-gray-700 dark:text-gray-400"}),v("span",D0e,[t.activeFilterCount>0?(w(),P(le,{key:0},[He(R(t.filterAppliedMessage),1)],64)):(w(),P(le,{key:1},[He(R(t.t`Filter`),1)],64))])])]),_:1},8,["onClick"])]),content:U(()=>[v("div",null,[v("div",M0e,[t.explicitFilters.length?(w(),P("div",I0e,[(w(!0),P(le,null,Pe(t.explicitFilters,(p,m)=>(w(),P("div",{key:p.fieldname+t.getRandomString(),class:"flex items-center justify-between text-base gap-2"},[v("div",R0e,[v("span",_0e,[_(l,{name:"x",class:"w-4 h-4 cursor-pointer",button:!0,onClick:y=>t.removeFilter(m)},null,8,["onClick"])]),v("span",E0e,R(m+1),1)]),_(c,{border:!0,size:"small",class:"w-24",df:{label:t.t`Field`,placeholder:t.t`field`,fieldname:"fieldname",fieldtype:"Select",options:t.fieldOptions},value:p.fieldname,onMousedown:e[0]||(e[0]=_i(()=>{},["stop"])),onClick:e[1]||(e[1]=_i(()=>{},["stop"])),onChange:y=>t.updateNewFilters(m,"fieldname",y),onKeydown:pn(t.applyFilters,["enter"])},null,8,["df","value","onChange","onKeydown"]),_(c,{border:!0,size:"small",class:"w-24",df:{label:t.t`Condition`,placeholder:t.t`Condition`,fieldname:"condition",fieldtype:"Select",options:t.conditionsForDropdown},value:p.condition,"close-drop-down":!1,onMousedown:e[2]||(e[2]=_i(()=>{},["stop"])),onClick:e[3]||(e[3]=_i(()=>{},["stop"])),onChange:y=>t.updateNewFilters(m,"condition",y),onKeydown:pn(t.applyFilters,["enter"])},null,8,["df","value","onChange","onKeydown"]),_(u,{border:!0,size:"small",class:"w-24",df:{label:t.t`Value`,placeholder:t.t`Value`,fieldname:"value",fieldtype:"Data"},value:String(p.value),"close-drop-down":!1,onMousedown:e[4]||(e[4]=_i(()=>{},["stop"])),onClick:e[5]||(e[5]=_i(()=>{},["stop"])),onChange:y=>t.updateNewFilters(m,"value",y),onKeydown:pn(t.applyFilters,["enter"])},null,8,["df","value","onChange","onKeydown"])]))),128))])):(w(),P("span",Q0e,R(t.t`No filters selected`),1))]),v("div",N0e,[v("div",{class:"text-base border-t dark:border-gray-800 p-2 flex items-center text-gray-600 dark:text-gray-500 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-875",onClick:e[6]||(e[6]=_i((...p)=>t.addNewFilter&&t.addNewFilter(...p),["stop"]))},[_(l,{name:"plus",class:"w-4 h-4"}),v("span",L0e,R(t.t`Add a filter`),1)]),v("div",F0e,[t.filters.length?(w(),P("div",{key:0,class:"text-base p-2 flex items-center text-gray-600 dark:text-gray-500 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-875",onClick:e[7]||(e[7]=(...p)=>t.clearAllFilters&&t.clearAllFilters(...p))},[_(l,{name:"trash-2",class:"w-4 h-4"}),v("span",B0e,R(t.t`Clear`),1)])):B("",!0),t.filters.length?(w(),P("div",{key:1,onClick:e[8]||(e[8]=(...p)=>t.applyFilters&&t.applyFilters(...p)),class:"text-base border-t dark:border-gray-800 p-2 flex items-center text-gray-600 dark:text-gray-500 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-875"},[_(l,{name:"search",class:"w-4 h-4"}),v("span",V0e,R(t.t`Apply`),1)])):B("",!0)])])])]),_:1},8,["onClose"])):B("",!0)}const z0e=ne(T0e,[["render",j0e]]),Z0e=ve({props:{itemCount:{type:Number,default:0},allowedCounts:{type:Array,default:()=>[50,100,500,-1]}},emits:["index-change"],data(){return{pageNo:1,count:0}},computed:{maxPages(){return Math.ceil(this.itemCount/this.count)},filteredCounts(){return this.allowedCounts.filter(this.filterCount)}},mounted(){this.count=this.allowedCounts[0],this.emitIndices()},methods:{filterCount(t){return!(t!==-1&&this.itemCount<t||t===-1&&this.itemCount<this.allowedCounts[0])},setPageNo(t){t=parseInt(t),!isNaN(t)&&(this.pageNo=Math.min(Math.max(1,t),this.maxPages),this.emitIndices())},setCount(t){this.pageNo=1,t===-1&&(t=this.itemCount),this.count=t,this.emitIndices()},emitIndices(){const t=this.getSliceIndices();this.$emit("index-change",t)},getSliceIndices(){const t=(this.pageNo-1)*this.count,e=this.pageNo*this.count;return{start:t,end:e}}}}),q0e={class:"grid grid-cols-3 text-gray-800 dark:text-gray-100 text-sm select-none items-center",style:{height:"50px"}},X0e={class:"justify-self-start"},W0e={class:"flex gap-1 items-center justify-self-center"},G0e={class:"flex gap-1 bg-gray-100 dark:bg-gray-890 rounded"},U0e=["value","max"],H0e={class:"w-7"},Y0e={key:0,class:"border border-gray-100 dark:border-gray-800 rounded flex justify-self-end"},K0e=["onClick"];function J0e(t,e,n,i,s,r){const o=Q("feather-icon");return w(),P("div",q0e,[v("div",X0e,R(`${(t.pageNo-1)*t.count+1} - ${Math.min(t.pageNo*t.count,t.itemCount)}`),1),v("div",W0e,[_(o,{name:"chevron-left",class:ee(["w-4 h-4 rtl-rotate-180",t.pageNo>1?"text-gray-600 dark:text-gray-500 cursor-pointer":"text-transparent"]),onClick:e[0]||(e[0]=()=>t.setPageNo(Math.max(1,t.pageNo-1)))},null,8,["class"]),v("div",G0e,[v("input",{type:"number",class:"w-7 text-end outline-none bg-transparent focus:text-gray-900 dark:focus:text-gray-25",value:t.pageNo,min:"1",max:t.maxPages,onChange:e[1]||(e[1]=a=>t.setPageNo(a.target.value)),onInput:e[2]||(e[2]=a=>t.setPageNo(a.target.value))},null,40,U0e),e[4]||(e[4]=v("p",{class:"text-gray-600"},"/",-1)),v("p",H0e,R(t.maxPages),1)]),_(o,{name:"chevron-right",class:ee(["w-4 h-4 rtl-rotate-180",t.pageNo<t.maxPages?"text-gray-600 dark:text-gray-500 cursor-pointer":"text-transparent"]),onClick:e[3]||(e[3]=()=>t.setPageNo(Math.min(t.maxPages,t.pageNo+1)))},null,8,["class"])]),t.filteredCounts.length?(w(),P("div",Y0e,[(w(!0),P(le,null,Pe(t.filteredCounts,a=>(w(),P("button",{key:a+"-count",class:ee(["w-9",t.count===a||t.count===t.itemCount&&a===-1?"rounded bg-gray-100 dark:bg-gray-890":""]),onClick:l=>t.setCount(a)},R(a===-1?t.t`All`:a),11,K0e))),128))])):B("",!0)])}const nA=ne(Z0e,[["render",J0e]]);function e1e(t){return!(t.display||t.render)}const t1e=ve({name:"ListCell",props:{row:{type:Object,required:!0},column:{type:Object,required:!0}},emits:["status-found"],computed:{columnValue(){var n;const t=this.column,e=this.row[this.column.fieldname];return e1e(t)?N.format(e,t):((n=t.display)==null?void 0:n.call(t,e,N))??""},customRenderer(){const{render:t}=this.column;if(t)return t(this.row)},cellClass(){return lo(this.column.fieldtype)?"justify-end":""}},mounted(){const{render:t}=this.column;if(t){const e=t(this.row);e!=null&&e.metadata&&this.$emit("status-found",{rowId:this.row.name||this.row.id,fieldname:this.column.fieldname,status:e.metadata.status,label:e.metadata.label})}}}),n1e={key:0,class:"truncate"};function i1e(t,e,n,i,s,r){return w(),P("div",{class:ee(["flex items-center truncate",t.cellClass])},[t.customRenderer?(w(),H(ro(t.customRenderer),{key:1})):(w(),P("span",n1e,R(t.columnValue),1))],2)}const s1e=ne(t1e,[["render",i1e]]),r1e=ve({name:"List",components:{Row:ho,ListCell:s1e,Button:At,Check:Fp,Paginator:nA},props:{listConfig:{type:Object,default:()=>({columns:[]})},filters:{type:Object,default:()=>({})},schemaName:{type:String,required:!0},canCreate:Boolean,isSelectionMode:Boolean},emits:["openDoc","makeNewDoc","updatedData","selected-items-changed"],data(){return{data:[],pageStart:0,pageEnd:0,statusMap:{},selectedItems:[]}},computed:{dataSlice(){return this.data.slice(this.pageStart,this.pageEnd)},count(){return this.pageEnd-this.pageStart+1},isAllSelected(){return this.data.length>0&&this.selectedItems.length===this.data.length},columns(){var e,n;let t=((e=this.listConfig)==null?void 0:e.columns)??[];return t.length===0&&(t=((n=N.schemaMap[this.schemaName])==null?void 0:n.quickEditFields)??[],t=[...new Set(["name",...t])]),t.map(i=>typeof i=="object"?i:N.getField(this.schemaName,i)).filter(Boolean)}},watch:{async schemaName(t,e){t!==e&&await this.updateData()}},async mounted(){await this.updateData(),this.setUpdateListeners()},methods:{handleStatusFound({rowId:t,status:e}){this.statusMap[t]=e},isNumeric:lo,setPageIndices({start:t,end:e}){this.pageStart=t,this.pageEnd=e},setUpdateListeners(){var e;if(!this.schemaName)return;const t=async()=>{await this.updateData()};(e=N.schemaMap[this.schemaName])!=null&&e.isSubmittable&&(N.doc.observer.on(`submit:${this.schemaName}`,t),N.doc.observer.on(`revert:${this.schemaName}`,t)),N.doc.observer.on(`sync:${this.schemaName}`,t),N.db.observer.on(`delete:${this.schemaName}`,t),N.doc.observer.on(`rename:${this.schemaName}`,t)},async updateData(t){const e=Vi.cloneDeep(Lt(this.filters));t=Vi.cloneDeep({...e,...t});let n;"status"in t&&(n=t.status);const i=Array.isArray(n)&&n[0]==="like";i&&delete t.status;const s=["created"];N.db.fieldMap[this.schemaName].date&&s.unshift("date");const r=await N.db.getAll(this.schemaName,{fields:["*"],filters:t,orderBy:s});let o=r;if(i&&(n!=null&&n[1])){const a=String(n[1]).toLowerCase(),l=Object.entries(this.statusMap).filter(c=>c[1].toLowerCase()===a).map(c=>c[0]);o=r.filter(c=>l.includes(String(c.name)))}this.data=o.map(a=>({...a,schema:N.schemaMap[this.schemaName]})),this.$emit("updatedData",t)},toggleItemSelection(t){const e=this.selectedItems.indexOf(t);e>-1?this.selectedItems.splice(e,1):this.selectedItems.push(t),this.$emit("selected-items-changed",this.selectedItems)},toggleSelectAll(t){this.selectedItems=t?this.data.map(e=>e.name):[],this.$emit("selected-items-changed",this.selectedItems)}}}),o1e="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20viewBox='0%200%2078%2085'%3e%3crect%20width='64'%20height='72'%20x='13'%20y='12'%20stroke='%23C7C7C7'%20stroke-width='2'%20rx='7'/%3e%3cpath%20fill='%23C7C7C7'%20fill-rule='evenodd'%20d='M8%202H58C61.3137%202%2064%204.68629%2064%208V9H66V8C66%203.58172%2062.4183%200%2058%200H8C3.58172%200%200%203.58172%200%208V66C0%2070.4183%203.58172%2074%208%2074H10V72H8C4.68629%2072%202%2069.3137%202%2066V8C2%204.68629%204.68629%202%208%202Z'%20clip-rule='evenodd'/%3e%3cpath%20stroke='%23C7C7C7'%20stroke-linecap='round'%20stroke-width='2'%20d='M42%2031H66'/%3e%3cpath%20stroke='%23C7C7C7'%20stroke-linecap='round'%20stroke-width='2'%20d='M42%2051H66'/%3e%3cpath%20stroke='%23C7C7C7'%20stroke-linecap='round'%20stroke-width='2'%20d='M42%2025H55'/%3e%3cpath%20stroke='%23C7C7C7'%20stroke-linecap='round'%20stroke-width='2'%20d='M42%2045H55'/%3e%3crect%20width='10'%20height='10'%20x='24'%20y='23'%20stroke='%237C7C7C'%20stroke-width='2'%20rx='2'/%3e%3crect%20width='10'%20height='10'%20x='24'%20y='43'%20stroke='%237C7C7C'%20stroke-width='2'%20rx='2'/%3e%3c/svg%3e",a1e={class:"text-base flex flex-col overflow-hidden"},l1e={key:0,class:"w-8 text-end me-2 text-gray-700 dark:text-gray-400"},c1e={key:1,class:"w-8 flex justify-end me-2"},u1e={key:0,class:"overflow-y-auto dark:dark-scroll custom-scroll custom-scroll-thumb1"},d1e={class:"flex hover:bg-gray-50 dark:hover:bg-gray-850 items-center"},h1e={key:0,class:"w-8 text-end me-2 text-gray-700 dark:text-gray-400"},f1e={key:1,class:"w-8 flex justify-end me-2"},p1e={key:0,class:"dark:border-gray-800"},m1e={key:1,class:"mt-auto"},g1e={key:2,class:"flex flex-col items-center justify-center my-auto"},y1e={class:"my-3 text-gray-800 dark:text-gray-200"};function O1e(t,e,n,i,s,r){var h,p;const o=Q("Check"),a=Q("Row"),l=Q("ListCell"),c=Q("Paginator"),u=Q("Button");return w(),P("div",a1e,[v("div",{class:"flex items-center",style:qe({paddingRight:t.dataSlice.length>13?"var(--w-scrollbar)":""})},[t.isSelectionMode?(w(),P("div",c1e,[_(o,{df:{fieldtype:"Check",fieldname:"selectAll",label:""},"show-label":!1,value:t.isAllSelected,onChange:t.toggleSelectAll},null,8,["value","onChange"])])):(w(),P("div",l1e," # ")),_(a,{class:"flex-1 text-gray-700 dark:text-gray-400 h-row-mid","column-count":t.columns.length,gap:"1rem"},{default:U(()=>[(w(!0),P(le,null,Pe(t.columns,(m,y)=>(w(),P("div",{key:m.label,class:ee(["overflow-x-auto no-scrollbar whitespace-nowrap h-row items-center flex",{"ms-auto":t.isNumeric(m.fieldtype),"pe-4":y===t.columns.length-1}])},R(m.label),3))),128))]),_:1},8,["column-count"])],4),e[3]||(e[3]=v("hr",{class:"dark:border-gray-800"},null,-1)),t.dataSlice.length!==0?(w(),P("div",u1e,[(w(!0),P(le,null,Pe(t.dataSlice,(m,y)=>(w(),P("div",{key:m.name},[v("div",d1e,[t.isSelectionMode?(w(),P("div",f1e,[_(o,{df:{fieldtype:"Check",fieldname:"selectItem",label:""},"show-label":!1,value:t.selectedItems.includes(m.name),onChange:O=>t.toggleItemSelection(m.name)},null,8,["value","onChange"])])):(w(),P("div",h1e,R(y+t.pageStart+1),1)),_(a,{gap:"1rem",class:"cursor-pointer text-gray-900 dark:text-gray-300 flex-1 h-row-mid","column-count":t.columns.length,onClick:O=>t.isSelectionMode?null:t.$emit("openDoc",m.name)},{default:U(()=>[(w(!0),P(le,null,Pe(t.columns,(O,S)=>(w(),H(l,{key:O.label,class:ee({"text-end":t.isNumeric(O.fieldtype),"pe-4":S===t.columns.length-1}),row:m,column:O,onStatusFound:t.handleStatusFound},null,8,["class","row","column","onStatusFound"]))),128))]),_:2},1032,["column-count","onClick"])]),y===t.dataSlice.length-1&&y>13?B("",!0):(w(),P("hr",p1e))]))),128))])):B("",!0),(h=t.data)!=null&&h.length?(w(),P("div",m1e,[e[1]||(e[1]=v("hr",{class:"dark:border-gray-800"},null,-1)),_(c,{"item-count":t.data.length,class:"px-4",onIndexChange:t.setPageIndices},null,8,["item-count","onIndexChange"])])):B("",!0),(p=t.data)!=null&&p.length?B("",!0):(w(),P("div",g1e,[e[2]||(e[2]=v("img",{src:o1e,alt:"",class:"w-24"},null,-1)),v("p",y1e,R(t.t`No entries found`),1),t.canCreate?(w(),H(u,{key:0,type:"primary",onClick:e[0]||(e[0]=m=>t.$emit("makeNewDoc"))},{default:U(()=>[He(R(t.t`Make Entry`),1)]),_:1})):B("",!0)]))])}const b1e=ne(r1e,[["render",O1e]]),v1e=ve({name:"ListView",components:{PageHeader:Nr,List:b1e,Button:At,FilterDropdown:z0e,Modal:di,ExportWizard:P0e},props:{schemaName:{type:String,required:!0},filters:{type:Object,default:void 0},pageTitle:{type:String,default:""}},setup(){return{shortcuts:st(Is),list:Cn(null),makeNewDocButton:Cn(null),exportButton:Cn(null),filterDropdown:Cn(null)}},data(){return{listConfig:void 0,openExportModal:!1,listFilters:{},isSelectionMode:!1,showDropdown:!1,selectedItems:[]}},computed:{context(){return"ListView-"+this.schemaName},title(){var t;return this.pageTitle?this.pageTitle:((t=N.schemaMap[this.schemaName])==null?void 0:t.label)??this.schemaName},fields(){var t;return((t=N.schemaMap[this.schemaName])==null?void 0:t.fields)??[]},canCreate(){var t;return((t=N.schemaMap[this.schemaName])==null?void 0:t.create)!==!1},actionOptions(){return[{value:"SalesQuote",label:"Sales Quote"},{value:"SalesInvoice",label:"Sales Invoice"},{value:"PurchaseInvoice",label:"Purchase Invoice"}]}},activated(){this.listConfig=w1e(this.schemaName),Ai.value=Xo[this.schemaName]??Xo.Entries??"",this.fyo.store.isDevelopment&&(window.lv=this),this.setShortcuts()},deactivated(){var t;Ai.value="",(t=this.shortcuts)==null||t.delete(this.context)},methods:{setShortcuts(){this.shortcuts&&(this.shortcuts.pmod.set(this.context,["KeyN"],()=>{var t;return(t=this.makeNewDocButton)==null?void 0:t.$el.click()}),this.shortcuts.pmod.set(this.context,["KeyE"],()=>{var t;return(t=this.exportButton)==null?void 0:t.$el.click()}))},updatedData(t){this.listFilters=t},async openDoc(t){const e=$s(this.schemaName,t);await St(e)},async makeNewDoc(){if(!this.canCreate)return;const t=BC(this.filters??{}),e=N.doc.getNewDoc(this.schemaName,t),n=$s(this.schemaName,e.name);await St(n)},async handleMakeNewDoc(){await this.makeNewDoc()},applyFilter(t){var e;(e=this.list)==null||e.updateData(t)},toggleSelectionMode(){this.isSelectionMode=!this.isSelectionMode,this.isSelectionMode||(this.showDropdown=!1,this.selectedItems=[])},toggleDropdown(){this.showDropdown=!this.showDropdown},async createInvoice(t){if(t===A.SalesQuote||t===A.SalesInvoice||t===A.PurchaseInvoice){const e=N.doc.getNewDoc(t);for(const i of this.selectedItems){const s=await N.doc.getDoc("Item",i),r={item:i,rate:s.rate||N.pesa(0),quantity:1};await e.append("items",r)}const n=$s(t,e.name);await St(n),this.selectedItems=[],this.isSelectionMode=!1,this.showDropdown=!1}},updateSelectedItems(t){this.selectedItems=t}}});function w1e(t){var n,i;const e=(i=(n=N.models[t])==null?void 0:n.getListViewSettings)==null?void 0:i.call(n,N);return(e==null?void 0:e.columns)===void 0?{columns:["name"]}:e}const S1e={class:"flex flex-col"},C1e={key:1,class:"relative"},A1e={key:0,class:"absolute top-full mt-1 bg-white border border-gray-300 rounded shadow-lg z-10 w-40"},x1e=["onClick"];function k1e(t,e,n,i,s,r){const o=Q("Button"),a=Q("FilterDropdown"),l=Q("feather-icon"),c=Q("PageHeader"),u=Q("List"),h=Q("ExportWizard"),p=Q("Modal");return w(),P("div",S1e,[_(c,{title:t.title},{default:U(()=>[t.schemaName==="Item"&&(!t.isSelectionMode||t.isSelectionMode&&t.selectedItems.length===0)?(w(),H(o,{key:0,onClick:t.toggleSelectionMode},{default:U(()=>[He(R(t.t`Select`),1)]),_:1},8,["onClick"])):B("",!0),t.isSelectionMode&&t.schemaName==="Item"&&t.selectedItems.length>0?(w(),P("div",C1e,[_(o,{class:"w-40",onClick:t.toggleDropdown},{default:U(()=>[...e[2]||(e[2]=[He(" Create ",-1)])]),_:1},8,["onClick"]),t.showDropdown?(w(),P("div",A1e,[(w(!0),P(le,null,Pe(t.actionOptions,m=>(w(),P("div",{key:m.value,class:"px-4 py-2 hover:bg-gray-100 cursor-pointer text-sm",onClick:y=>t.createInvoice(m.value)},R(m.label),9,x1e))),128))])):B("",!0)])):B("",!0),_(o,{ref:"exportButton",icon:!1,onClick:e[0]||(e[0]=m=>t.openExportModal=!0)},{default:U(()=>[He(R(t.t`Export`),1)]),_:1},512),_(a,{ref:"filterDropdown","schema-name":t.schemaName,onChange:t.applyFilter},null,8,["schema-name","onChange"]),t.canCreate?(w(),H(o,{key:2,ref:"makeNewDocButton",icon:!0,type:"primary",padding:!1,class:"px-3",onClick:t.handleMakeNewDoc},{default:U(()=>[_(l,{name:"plus",class:"w-4 h-4"})]),_:1},8,["onClick"])):B("",!0)]),_:1},8,["title"]),_(u,{ref:"list","schema-name":t.schemaName,"list-config":t.listConfig,filters:t.filters,"can-create":t.canCreate,"is-selection-mode":t.isSelectionMode,class:"flex-1 flex h-full",onOpenDoc:t.openDoc,onUpdatedData:t.updatedData,onMakeNewDoc:t.makeNewDoc,onSelectedItemsChanged:t.updateSelectedItems},null,8,["schema-name","list-config","filters","can-create","is-selection-mode","onOpenDoc","onUpdatedData","onMakeNewDoc","onSelectedItemsChanged"]),_(p,{"open-modal":t.openExportModal,onClosemodal:e[1]||(e[1]=m=>t.openExportModal=!1)},{default:U(()=>[_(h,{class:"w-form","schema-name":t.schemaName,title:t.pageTitle,"list-filters":t.listFilters},null,8,["schema-name","title","list-filters"])]),_:1},8,["open-modal"])])}const P1e=ne(v1e,[["render",k1e]]),GM=["logo","displayLogo","color","font","email","phone","address","companyName","amountInWords","displaytermsandconditions","termsAndConditions"],UM=["gstin","taxId"];async function iA(t){var h,p,m;const e=t.fyo;let n,i;const s={doc:{},print:{}};if(s.doc=await pf(t),(s.doc.entryType===A.SalesInvoice||s.doc.entryType===A.PurchaseInvoice)&&(n=await t.getPaymentIds(),n&&n.length)){const y=await T1e(t,n);s.doc.paymentDetails=y}if(t.referenceType==A.SalesInvoice){const y=(h=t==null?void 0:t.for[0])==null?void 0:h.referenceName;y&&(i=await e.doc.getDoc(A.SalesInvoice,y),i.taxes&&(s.doc.taxes=i.taxes))}let r;s.doc.entryType!==A.Shipment&&(r=await((p=i??t)==null?void 0:p.getTotalTax())),t.schema.name==A.Payment&&(s.doc.amountPaidInWords=c8((m=t.amountPaid)==null?void 0:m.float)),s.doc.subTotal=t.fyo.format((t.grandTotal??t.amount).sub(r||0),A.Currency);const o=await e.doc.getDoc(A.PrintSettings),a=await pf(o,GM),l=await e.doc.getDoc(A.AccountingSettings),c=await pf(l,UM);return s.print={...a,...c},["Invoice","Quote"].some(y=>{var O;return(O=t.schemaName)==null?void 0:O.endsWith(y)})&&(s.doc.totalDiscount=R1e(t)),s.doc.showHSN=M1e(t),s.doc.grandTotalInWords=c8((t.grandTotal??t.amount).float),s.doc.date=$1e(t.date),o.displayTime&&(s.doc.time=D1e(t.date)),o.displayDescription&&(s.doc.description=I1e(t)),s}async function T1e(t,e){const n=e.sort(),i=[];let s=t.grandTotal;for(const r of n){const o=await t.fyo.doc.getDoc(A.Payment,r);s=s.sub(o.amount),i.push({amount:t.fyo.format(o.amount,A.Currency),amountPaid:t.fyo.format(o.amountPaid,A.Currency),paymentMethod:o.paymentMethod,outstandingAmount:t.fyo.format(s,A.Currency)})}return i}function $1e(t){const e=new Date(t);return e.setMonth(e.getMonth()),`${e.toLocaleString("default",{month:"short"})} ${e.getDate()}, ${e.getFullYear()}`}function D1e(t){return new Date(t).toTimeString().split(" ")[0]}function tw(t,e){const n={},i=e.schemaMap[t];n.doc=ff(i,e);const s=ff(e.schemaMap[A.PrintSettings],e,GM),r=ff(e.schemaMap[A.AccountingSettings],e,UM);return n.print={...s,...r},t!=null&&t.endsWith("Invoice")&&(n.doc.totalDiscount=e.t`Total Discount`,n.doc.showHSN=e.t`Show HSN`),n}function c8(t){const e=t.toFixed(2),[n,i]=e.split("."),s=["",b`One`,b`Two`,b`Three`,b`Four`,b`Five`,b`Six`,b`Seven`,b`Eight`,b`Nine`],r=[b`Ten`,b`Eleven`,b`Twelve`,b`Thirteen`,b`Fourteen`,b`Fifteen`,b`Sixteen`,b`Seventeen`,b`Eighteen`,b`Nineteen`],o=["","",b`Twenty`,b`Thirty`,b`Forty`,b`Fifty`,b`Sixty`,b`Seventy`,b`Eighty`,b`Ninety`],a=["",b`Thousand`,b`Million`,b`Billion`];function l(y){let O="";const S=Math.floor(y/100),x=y%100;if(S>0&&(O+=s[S]+` ${b`Hundred`}`),x>0)if(S>0&&(O+=` ${b`And`} `),x<10)O+=s[x];else if(x<20)O+=r[x-10];else{const T=Math.floor(x/10),k=x%10;O+=o[T],k>0&&(O+=" "+s[k])}return O}let c="";const u=n.match(/(\d{1,3})(?=(\d{3})*$)/g)||[],h=u.length;u.forEach((y,O)=>{const S=parseInt(y);if(S>0){const x=l(S),T=a[h-O-1];c+=x+(T?" "+T:"")+" "}}),c=c.trim()||b`Zero`;let p="";const m=parseInt(i);return m!==0&&(p=` ${b`and`} `+l(m)+` ${b`Paisa`}`),`${c}${p} ${b`only`}`}function M1e(t){const e=t.items;return Array.isArray(e)?e.map(n=>n.hsnCode).every(Boolean):!1}function I1e(t){return(Array.isArray(t.items)?t.items.map(n=>n.description).filter(Boolean):[]).length>0}function R1e(t){if(!(t instanceof za))return"";const e=t.getTotalDiscount();return e!=null&&e.float?t.fyo.format(e,A.Currency):""}function ff(t,e,n,i){i??(i=0);const s={},r={};let o=t.fields;n&&(o=o.filter(a=>n.includes(a.fieldname)));for(const a of o){const{fieldname:l,fieldtype:c,label:u,meta:h}=a;if(c===Ie.Attachment||h)continue;s[l]=u??l;const{target:p}=a,m=e.schemaMap[p];c===Ie.Link&&m&&i<2&&(r[l]=ff(m,e,void 0,i+1)),c===Ie.Table&&m&&(s[l]=[ff(m,e)])}return s.submitted=e.t`Submitted`,s.entryType=e.t`Entry Type`,s.entryLabel=e.t`Entry Label`,Object.keys(r).length&&(s.links=r),s}async function pf(t,e){const n={};if(!(t instanceof ze))return n;let i=t.schema.fields;e&&(i=i.filter(r=>e.includes(r.fieldname)));for(const r of i){const{fieldname:o,fieldtype:a,meta:l}=r;if(a===Ie.Attachment||l)continue;const c=t.get(o);if(!c){n[o]="";continue}if(!Array.isArray(c)){n[o]=t.fyo.format(c,r,t);continue}const u=[];for(const h of c){const p=await pf(h);u.push(p)}n[o]=u}n.submitted=t.submitted,n.entryType=t.schema.name,n.entryLabel=t.schema.label,await t.loadLinks();const s={};for(const[r,o]of Object.entries(t.links??{}))e&&!e.includes(r)||(s[r]=await pf(o));return Object.keys(s).length&&(n.links=s),n}async function sA(t,e,n,i,s){if(s){const r=u8(e),o=await ipc.printDocument(r,n,i);it(o?{message:b`Print Successful`,type:"success"}:{message:b`Print Failed`,type:"error"})}else{const{filePath:r}=await Wl(t,"pdf");if(!r)return;const o=u8(e);await ipc.makePDF(o,r,n,i)?mO(b`Save as PDF Successful`,r):it({message:b`Export Failed`,type:"error"})}}function u8(t){const e=document.createElement("html"),n=document.createElement("head"),i=document.createElement("body"),s=_1e(),r=document.createElement("style");return r.innerHTML=`
    @media print {
      html, body {
        margin: 0 !important;
        padding: 0 !important;
        background: white;
      }

      @page {
        margin: 0;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
    }
  `,n.innerHTML=['<meta charset="UTF-8">',"<title>Print Window</title>"].join(`
`),n.append(s,r),i.innerHTML=t,e.append(n,i),e.outerHTML}function _1e(){const t=[];for(const n of document.styleSheets){for(const i of n.cssRules)t.push(i.cssText);n.ownerRule&&t.push(n.ownerRule.cssText)}const e=document.createElement("style");return e.innerHTML=t.join(`
`),e}async function HM(t){var o;const e=await ipc.getTemplates((o=t.singles.PrintSettings)==null?void 0:o.posPrintWidth),n=await t.db.getAll(A.PrintTemplate,{fields:["name","modified"],filters:{isCustom:!1}}),i=zf(n,"name","modified"),s=[];for(const a of e){const l=E1e(a,i,t);s.push(...l)}const r=t.store.skipTelemetryLogging;t.store.skipTelemetryLogging=!0;for(const{name:a,type:l,template:c,width:u,height:h}of s){const p=await pp(A.PrintTemplate,a),m={name:a,type:l,template:c,isCustom:!1,...u?{width:u}:{},...h?{height:h}:{}};await p.set(m),await p.sync()}t.store.skipTelemetryLogging=r}function E1e({file:t,template:e,modified:n,width:i,height:s},r,o){const a=[],l=new Date(n);for(const{name:c,type:u}of Q1e(t,o)){const h=r[c];h&&l.valueOf()<=h.valueOf()||a.push({height:s,width:i,name:c,type:u,template:e})}return a}function Q1e(t,e){var r;const n=t.split(".template.html")[0],i=n.split(".")[0],s=n.split(".")[1];if(s){const o=((r=e.schemaMap[s])==null?void 0:r.label)??s;return[{name:`${i} - ${o}`,type:s}]}return[A.SalesInvoice,A.SalesQuote,A.PurchaseInvoice].map(o=>{var l;const a=((l=e.schemaMap[o])==null?void 0:l.label)??o;return{name:`${i} - ${a}`,type:o}})}const YM=`<main class="h-full w-full bg-white">

  <!-- Edit This Code -->
  <header class="p-4 flex justify-between border-b">
    <h2 
      class="font-semibold text-2xl" 
      :style="{ color: print.color }"
    >
      {{ print.companyName }}
    </h2>
    <h2 class="font-semibold text-2xl" >
      {{ doc.name }}
    </h2>
  </header>

  <div class="p-4 text-gray-600">
    Edit the code in the Template Editor on the right
    to create your own personalized custom template.
  </div>

</main>
`,N1e=Object.freeze(Object.defineProperty({__proto__:null,baseTemplate:YM,getPathAndMakePDF:sA,getPrintTemplatePropHints:tw,getPrintTemplatePropValues:iA,updatePrintTemplates:HM},Symbol.toStringTag,{value:"Module"})),L1e=ve({props:{propagate:{type:Boolean,default:!0}},emits:["error-captured"],errorCaptured(t){return this.$emit("error-captured",t),this.propagate}});function F1e(t,e,n,i,s,r){return Ge(t.$slots,"default")}const B1e=ne(L1e,[["render",F1e]]),V1e=ve({props:{height:{type:Number,default:29.7},width:{type:Number,default:21},scale:{type:Number,default:.65},showOverflow:{type:Boolean,default:!1}},computed:{innerContainerStyle(){const t={};return t.width=`${this.width}cm`,t.height=`${this.height}cm`,t.transform=`scale(${this.scale})`,t["margin-top"]=`calc(-1 * (${this.height}cm * ${1-this.scale}) / 2)`,t["margin-left"]=`calc(-1 * (${this.width}cm * ${1-this.scale}) / 2)`,t},outerContainerStyle(){const t={};return t.height=`calc(${this.scale} * ${this.height}cm)`,t.width=`calc(${this.scale} * ${this.width}cm)`,t}}});function j1e(t,e,n,i,s,r){return w(),P("div",{class:"overflow-hidden",style:qe(t.outerContainerStyle)},[v("div",{style:qe(t.innerContainerStyle),class:ee(t.showOverflow?"overflow-auto no-scrollbar":"overflow-visible")},[Ge(t.$slots,"default")],6)],4)}const KM=ne(V1e,[["render",j1e]]),z1e=`<main class="h-full w-full bg-white">
  <p class="p-4 text-red-500">
    <span class="font-bold">ERROR</span>: Template failed to load due to errors.
  </p>
</main>
`,Z1e=ve({components:{ScaledContainer:KM,ErrorBoundary:B1e},props:{template:{type:String,required:!0},printSchemaName:{type:String,required:!0},scale:{type:Number,default:.65},width:{type:Number,default:21},height:{type:Number,default:29.7},values:{type:Object,required:!0}},data(){return{error:null}},computed:{templateComponent(){let t=this.template;return this.error&&(t=z1e),{template:t,props:["doc","print"],computed:{fyo(){return{}},platform(){return""}}}}},watch:{template(t){this.compile(t)}},mounted(){this.compile(this.template)},methods:{compile(t){return this.error=null,VD(t,{hoistStatic:!0,onWarn:this.onError.bind(this),onError:this.onError.bind(this)})},handleErrorCaptured(t){if(!(t instanceof Error))throw t;const e=t.message;let n=t.name,i="";n==="TypeError"&&e.includes("Cannot read")&&(n=this.t`Invalid Key Error`,i=this.t`Please check Key Hints for valid key names`),this.error={name:n,message:e,detail:i}},onError({message:t,loc:e}){const n=e?this.getCodeFrame(e):"";this.error={name:this.t`Template Compilation Error`,detail:n,message:t}},getCodeFrame(t){return $Z(this.template,t.start.offset,t.end.offset)},async savePDF(t,e){const n=this.$refs.scaledContainer.$el.children[0].innerHTML;typeof n=="string"&&(await sA(t??this.t`Entry`,n,this.width,this.height,e),this.fyo.telemetry.log(si.Printed,this.printSchemaName))}}}),q1e={key:1,class:"h-full bg-red-100 dark:bg-red-900 dark:bg-opacity-50 w-full text-2xl text-gray-900 dark:text-gray-25 flex flex-col gap-4"},X1e={class:"text-4xl font-bold text-red-500 dark:text-red-200 p-4 border-b border-red-200 dark:border-red-900"},W1e={class:"px-4 font-semibold"},G1e={key:0,class:"px-4 text-xl text-gray-700 dark:text-gray-400"};function U1e(t,e,n,i,s,r){const o=Q("ErrorBoundary"),a=Q("ScaledContainer");return w(),H(a,{ref:"scaledContainer",scale:Math.max(t.scale,.1),width:t.width,height:t.height,"show-overflow":!0,class:"mx-auto shadow-lg border"},{default:U(()=>[t.error?(w(),P("div",q1e,[v("h1",X1e,R(t.error.name),1),v("p",W1e,R(t.error.message),1),t.error.detail?(w(),P("pre",G1e,R(t.error.detail),1)):B("",!0)])):(w(),H(o,{key:0,propagate:!1,onErrorCaptured:t.handleErrorCaptured},{default:U(()=>[(w(),H(ro(t.templateComponent),{class:"flex-1 bg-white",doc:t.values.doc,print:t.values.print},null,8,["doc","print"]))]),_:1},8,["onErrorCaptured"]))]),_:1},8,["scale","width","height"])}const JM=ne(Z1e,[["render",U1e]]),H1e=ve({name:"PrintView",components:{PageHeader:Nr,Button:At,AutoComplete:zl,PrintContainer:JM,DropdownWithActions:th},props:{schemaName:{type:String,required:!0},name:{type:String,required:!0}},data(){return{doc:null,scale:1,values:null,templateDoc:null,templateName:null,templateList:[]}},computed:{helperMessage(){var t;if(!this.templateList.length){const e=((t=this.fyo.schemaMap[this.schemaName])==null?void 0:t.label)??this.schemaName;return this.t`No Print Templates not found for entry type ${e}`}return this.templateDoc?"":this.t`Please select a Print Template`},printProps(){var n;const t=this.values;if(!t)return null;const e=(n=this.templateDoc)==null?void 0:n.template;return e?{values:t,template:e}:null},actions(){var n;const t=[{label:this.t`Print Settings`,group:this.t`View`,async action(){await rd(A.PrintSettings)}},{label:this.t`New Template`,group:this.t`Create`,action:async()=>{const i=this.fyo.doc.getNewDoc(A.PrintTemplate,{type:this.schemaName}),s=$s(i.schemaName,i.name);await St(s)}}],e=(n=this.templateDoc)==null?void 0:n.name;return e&&(t.push({label:e,group:this.t`View`,action:async()=>{const i=$s(A.PrintTemplate,e);await St(i)}}),t.push({label:this.t`Duplicate Template`,group:this.t`Create`,action:async()=>{var r;const i=this.fyo.doc.getNewDoc(A.PrintTemplate,{type:this.schemaName,template:(r=this.templateDoc)==null?void 0:r.template}),s=$s(i.schemaName,i.name);await St(s)}})),t}},async mounted(){await this.initialize(),N.store.isDevelopment&&(window.pv=this)},async activated(){await this.initialize()},unmounted(){this.reset()},deactivated(){this.reset()},methods:{async initialize(){this.doc=await N.doc.getDoc(this.schemaName,this.name),await this.setTemplateList(),await this.setTemplateFromDefault(),!this.templateDoc&&this.templateList.length&&await this.onTemplateNameChange(this.templateList[0]),this.doc&&(this.values=await iA(this.doc))},setScale(){var n;this.scale=1;const t=(((n=this.templateDoc)==null?void 0:n.width)??21)*37.8;let e=window.innerWidth-32;Fo.value&&(e-=12*16),this.scale=Math.min(e/t,1)},reset(){this.doc=null,this.values=null,this.templateList=[],this.templateDoc=null,this.scale=1},async onTemplateNameChange(t){if(!t){this.templateDoc=null;return}this.templateName=t;try{this.templateDoc=await this.fyo.doc.getDoc(A.PrintTemplate,this.templateName)}catch(e){await mo(e)}this.setScale()},async setTemplateList(){const t=await this.fyo.db.getAllRaw(A.PrintTemplate,{filters:{type:this.schemaName}});this.templateList=t.map(({name:e})=>e)},async savePDF(t){var n;const e=this.$refs.printContainer;e!=null&&e.savePDF&&await e.savePDF((n=this.doc)==null?void 0:n.name,t)},async setTemplateFromDefault(){var n,i,s;const t=this.schemaName[0].toLowerCase()+this.schemaName.slice(1)+A.PrintTemplate;let e;if(this.schemaName==A.SalesInvoice&&this.doc.isPOS){e=(n=this.fyo.singles.Defaults)==null?void 0:n.posPrintTemplate;const r=(i=this.fyo.singles.POSSettings)==null?void 0:i.posProfile;if(r){const o=await this.fyo.doc.getDoc(A.POSProfile,r);o.posPrintTemplate&&(e=o.posPrintTemplate)}}else e=(s=this.fyo.singles.Defaults)==null?void 0:s.get(t);typeof e=="string"&&await this.onTemplateNameChange(e)}}}),Y1e={class:"flex flex-col flex-1 bg-gray-25 dark:bg-gray-875"},K1e={class:"overflow-auto custom-scroll custom-scroll-thumb1 p-4"},J1e={key:0,class:"text-sm text-gray-700 dark:text-gray-300"};function eOe(t,e,n,i,s,r){var h,p;const o=Q("AutoComplete"),a=Q("DropdownWithActions"),l=Q("Button"),c=Q("PageHeader"),u=Q("PrintContainer");return w(),P("div",Y1e,[_(c,{border:!0,title:t.t`Print View`},{default:U(()=>[t.templateList.length?(w(),H(o,{key:0,df:{fieldtype:"AutoComplete",fieldname:"templateName",label:t.t`Template Name`,options:t.templateList.map(m=>({label:m,value:m}))},"input-class":"text-base py-0 h-8",class:"w-40",border:!0,value:t.templateName??"",onChange:t.onTemplateNameChange},null,8,["df","value","onChange"])):B("",!0),_(a,{actions:t.actions,title:t.t`More`},null,8,["actions","title"]),_(l,{class:"text-xs",type:"primary",onClick:e[0]||(e[0]=m=>t.savePDF())},{default:U(()=>[He(R(t.t`Save as PDF`),1)]),_:1}),_(l,{class:"text-xs",type:"primary",onClick:e[1]||(e[1]=m=>t.savePDF(!0))},{default:U(()=>[He(R(t.t`Print`),1)]),_:1})]),_:1},8,["title"]),v("div",K1e,[t.helperMessage?(w(),P("div",J1e,R(t.helperMessage),1)):B("",!0),t.printProps?(w(),H(u,{key:1,ref:"printContainer","print-schema-name":t.schemaName,template:t.printProps.template,values:t.printProps.values,scale:t.scale,width:(h=t.templateDoc)==null?void 0:h.width,height:(p=t.templateDoc)==null?void 0:p.height},null,8,["print-schema-name","template","values","scale","width","height"])):B("",!0)])])}const tOe=ne(H1e,[["render",eOe]]),nOe=ve({components:{PageHeader:Nr,Button:At,Check:Fp,Int:nu,ScaledContainer:KM,Select:iu},props:{reportName:{type:String,required:!0}},data(){return{start:1,limit:0,printSize:"A4",isLandscape:!1,scale:.65,report:null,columnSelection:[]}},computed:{title(){var t;return((t=Hu[this.reportName])==null?void 0:t.title)??this.t`Report`},printSizeDf(){return{label:"Print Size",fieldname:"printSize",fieldtype:"Select",options:sx.filter(t=>t!=="Custom").map(t=>({value:t,label:t}))}},matrix(){var r;if(!this.report)return[];const e=[this.report.columns.map((o,a)=>({value:o.label,idx:a})).filter((o,a)=>this.columnSelection[a])],n=Math.max(this.start-1,0),i=Math.min(n+this.limit,this.report.reportData.length),s=this.report.reportData.slice(n,i);for(let o=0;o<s.length;o++){const a=s[o];e.push([]);for(let l=0;l<a.cells.length;l++){if(!this.columnSelection[l])continue;const c=a.cells[l].value;(r=e.at(-1))==null||r.push({value:c,idx:Number(l)})}}return e},rowStyles(){const t={},e=this.columnSelection.filter(Boolean).length;return t["grid-template-columns"]=`repeat(${e}, minmax(0, auto))`,t},size(){const t=Q0[this.printSize],e=t.width>t.height?t.width:t.height,n=t.width<=t.height?t.width:t.height;return this.isLandscape?{width:e,height:n}:{width:n,height:e}}},watch:{size(){this.setScale()}},async mounted(){this.report=await gM(this.reportName),this.limit=this.report.reportData.length,this.columnSelection=this.report.columns.map(()=>!0),this.setScale(),window.rpv=this},methods:{setScale(){const t=this.size.width*37.2;let e=window.innerWidth-26*16;Fo.value&&(e-=12*16),this.scale=Math.min(e/t,1)},async savePDF(t){const e=this.$refs.scaledContainer.$el.children[0].innerHTML;if(typeof e!="string")return;const n=this.title+" - "+this.fyo.format(new Date,"Date");await sA(n,e,this.size.width,this.size.height,t),this.fyo.telemetry.log(si.Printed,this.report.reportName)},cellClasses(t,e){const n=[];if(!this.report)return n;const i=this.report.columns[t],s=t===0;return i.align&&n.push(`text-${i.align}`),e===0&&n.push("font-semibold"),n.push("border-t"),s||n.push("border-l"),n}}}),iOe={class:"flex flex-col w-full h-full"},sOe={class:"outer-container overflow-y-auto custom-scroll custom-scroll-thumb1"},rOe={class:"p-4 bg-gray-25 dark:bg-gray-890 overflow-auto flex justify-center custom-scroll custom-scroll-thumb1"},oOe={class:"bg-white mx-auto"},aOe={class:"p-2"},lOe={class:"font-semibold text-xl w-full flex justify-between"},cOe={class:"text-gray-600"},uOe={class:"border-t p-2"},dOe={class:"text-xs text-right w-full"},hOe={key:0,class:"border-l dark:border-gray-800 flex flex-col"},fOe={class:"p-4 text-sm text-gray-600 dark:text-gray-400"},pOe={class:"p-4 border-t dark:border-gray-800"},mOe={class:"border-t dark:border-gray-800 p-4"},gOe={class:"border-t dark:border-gray-800 p-4"},yOe={class:"text-sm text-gray-600 dark:text-gray-400"},OOe={class:"border dark:border-gray-800 rounded grid grid-cols-2 mt-1"};function bOe(t,e,n,i,s,r){var p,m,y;const o=Q("Button"),a=Q("PageHeader"),l=Q("ScaledContainer"),c=Q("Int"),u=Q("Select"),h=Q("Check");return w(),P("div",iOe,[_(a,{title:t.t`Print ${t.title}`},{default:U(()=>[_(o,{class:"text-xs",type:"primary",onClick:e[0]||(e[0]=O=>t.savePDF())},{default:U(()=>[He(R(t.t`Save as PDF`),1)]),_:1}),_(o,{class:"text-xs",type:"primary",onClick:e[1]||(e[1]=O=>t.savePDF(!0))},{default:U(()=>[He(R(t.t`Print`),1)]),_:1})]),_:1},8,["title"]),v("div",sOe,[v("div",rOe,[_(l,{ref:"scaledContainer",class:"shadow-lg border bg-white",scale:t.scale,width:t.size.width,height:t.size.height,"show-overflow":!0},{default:U(()=>{var O;return[v("div",oOe,[v("div",aOe,[v("div",lOe,[v("h1",null,R(`${(O=t.fyo.singles.PrintSettings)==null?void 0:O.companyName}`),1),v("p",cOe,R(t.title),1)])]),v("div",{class:"grid",style:qe(t.rowStyles)},[(w(!0),P(le,null,Pe(t.matrix,(S,x)=>(w(),P(le,{key:`row-${x}`},[(w(!0),P(le,null,Pe(S,(T,k)=>(w(),P("div",{key:`cell-${x}.${k}`,class:ee([t.cellClasses(T.idx,x),"text-sm p-2"]),style:{"min-height":"2rem"}},R(T.value),3))),128))],64))),128))],4),v("div",uOe,[v("p",dOe,R(t.fyo.format(new Date,"Datetime")),1)])])]}),_:1},8,["scale","width","height"])]),t.report?(w(),P("div",hOe,[v("p",fOe,R([t.t`Hidden values will be visible on Print on.`,t.t`Report will use more than one page if required.`].join(" ")),1),v("div",pOe,[_(c,{"show-label":!0,border:!0,df:{label:t.t`Start From Row Index`,fieldtype:"Int",fieldname:"numRows",minvalue:1,maxvalue:((p=t.report)==null?void 0:p.reportData.length)??1e3},value:t.start,onChange:e[2]||(e[2]=O=>t.start=O)},null,8,["df","value"]),_(c,{class:"mt-4","show-label":!0,border:!0,df:{label:t.t`Number of Rows`,fieldtype:"Int",fieldname:"numRows",minvalue:0,maxvalue:((m=t.report)==null?void 0:m.reportData.length)??1e3},value:t.limit,onChange:e[3]||(e[3]=O=>t.limit=O)},null,8,["df","value"])]),v("div",mOe,[_(u,{"show-label":!0,border:!0,df:t.printSizeDf,value:t.printSize,onChange:e[4]||(e[4]=O=>t.printSize=O)},null,8,["df","value"]),_(h,{class:"mt-4","show-label":!0,border:!0,df:{label:t.t`Is Landscape`,fieldname:"isLandscape",fieldtype:"Check"},value:t.isLandscape,onChange:e[5]||(e[5]=O=>t.isLandscape=O)},null,8,["df","value"])]),v("div",gOe,[v("h2",yOe,R(t.t`Pick Columns`),1),v("div",OOe,[(w(!0),P(le,null,Pe((y=t.report)==null?void 0:y.columns,(O,S)=>(w(),H(h,{key:O.fieldname,"show-label":!0,df:{label:O.label,fieldname:O.fieldname,fieldtype:"Check"},value:t.columnSelection[S],onChange:x=>t.columnSelection[S]=x},null,8,["df","value","onChange"]))),128))])])])):B("",!0)])])}const vOe=ne(nOe,[["render",bOe],["__scopeId","data-v-86015fec"]]),wOe=ve({name:"QuickEditForm",components:{Button:At,FormControl:is,TwoColumnForm:LM,AttachImage:NM},provide(){return{doc:Dt(()=>this.doc)}},props:{name:{type:String,required:!0},schemaName:{type:String,required:!0},hideFields:{type:Array,default:()=>[]},showFields:{type:Array,default:()=>[]}},emits:["close"],setup(){const t=Cn(null),e=st(Is);let n="QuickEditForm";return e&&(n=UC(e,t,n,!0)),{form:Cn(null),doc:t,context:n,shortcuts:e}},data(){return{titleField:null,imageField:null}},computed:{letterPlaceHolder(){var n;if(!this.doc)return"";const t=((n=this.titleField)==null?void 0:n.fieldname)??"name",e=this.doc.get(t);return typeof e=="string"?e[0]:""},schema(){return N.schemaMap[this.schemaName]},fields(){var e;if(!this.schema)return[];const t=(this.schema.quickEditFields??["name"]).filter(n=>!this.hideFields.includes(n));return(e=this.showFields)!=null&&e.length&&t.push(...this.schema.fields.map(n=>n.fieldname).filter(n=>this.showFields.includes(n))),t.map(n=>N.getField(this.schemaName,n))}},activated(){this.setShortcuts()},async mounted(){await this.initialize(),N.store.isDevelopment&&(window.qef=this),this.setShortcuts()},methods:{setShortcuts(){var t;(t=this.shortcuts)==null||t.set(this.context,["Escape"],async()=>{await this.routeToPrevious()})},async initialize(){this.schema&&(this.setFields(),await this.setDoc(),this.doc&&dO(this.doc,this.$refs.titleControl,!1))},setFields(){const t=this.schema.titleField??"name";this.titleField=N.getField(this.schemaName,t)??null,this.imageField=N.getField(this.schemaName,"image")??null},async setDoc(){try{this.doc=await N.doc.getDoc(this.schemaName,this.name)}catch{return this.$router.back()}},valueChange(t,e){var n;(n=this.form)==null||n.onChange(t,e)},async sync(){this.doc&&await fO(this.doc)},async submit(){this.doc&&await pO(this.doc)},async routeToPrevious(){var t,e;(t=this.doc)!=null&&t.dirty&&((e=this.doc)!=null&&e.inserted)&&await this.doc.load(),this.doc&&this.doc.notInserted&&await this.doc.delete(),this.$router.back()}}}),SOe={class:"border-s dark:border-gray-800 h-full overflow-auto w-quick-edit bg-white dark:bg-gray-850"},COe={class:"flex items-center justify-between px-4 h-row-largest sticky top-0 bg-white dark:bg-gray-850",style:{"z-index":"1"}};function AOe(t,e,n,i,s,r){var h,p;const o=Q("feather-icon"),a=Q("Button"),l=Q("AttachImage"),c=Q("FormControl"),u=Q("TwoColumnForm");return w(),P("div",SOe,[v("div",COe,[_(a,{icon:!0,onClick:t.routeToPrevious},{default:U(()=>[_(o,{name:"x",class:"w-4 h-4"})]),_:1},8,["onClick"]),(h=t.doc)!=null&&h.canSave?(w(),H(a,{key:0,icon:!0,type:"primary",onClick:t.sync},{default:U(()=>[He(R(t.t`Save`),1)]),_:1},8,["onClick"])):(p=t.doc)!=null&&p.canSubmit?(w(),H(a,{key:1,icon:!0,type:"primary",onClick:t.submit},{default:U(()=>[He(R(t.t`Submit`),1)]),_:1},8,["onClick"])):B("",!0)]),t.doc&&(t.titleField||t.imageField)?(w(),P("div",{key:0,class:ee(["items-center border-b border-t dark:border-gray-800",t.imageField?"grid":"flex justify-center"]),style:qe({height:`calc(var(--h-row-mid) * ${t.imageField?"2 + 1px":"1"})`,gridTemplateColumns:"minmax(0, 1.1fr) minmax(0, 2fr)"})},[t.imageField?(w(),H(l,{key:0,class:"ms-4",df:t.imageField,value:String(t.doc[t.imageField.fieldname]??""),"letter-placeholder":t.letterPlaceHolder,onChange:e[0]||(e[0]=m=>t.valueChange(t.imageField,m))},null,8,["df","value","letter-placeholder"])):B("",!0),t.titleField?(w(),H(c,{key:1,ref:"titleControl",class:ee(t.imageField?"me-4":"w-full mx-4"),"input-class":["font-semibold text-xl",t.imageField?"":"text-center"],size:"small",df:t.titleField,value:t.doc[t.titleField.fieldname],"read-only":t.doc.inserted||t.doc.schema.naming!=="manual",onChange:e[1]||(e[1]=m=>t.valueChange(t.titleField,m))},null,8,["class","input-class","df","value","read-only"])):B("",!0)],6)):B("",!0),t.doc?(w(),H(u,{key:1,ref:"form",class:"w-full",doc:t.doc,fields:t.fields,"column-ratio":[1.1,2]},null,8,["doc","fields"])):B("",!0)])}const Rh=ne(wOe,[["render",AOe]]),xOe=ve({name:"WithScroll",emits:["scroll"],data(){return{listener:void 0}},mounted(){this.listener=()=>{let{scrollLeft:t,scrollTop:e}=this.$el;this.$emit("scroll",{scrollLeft:t,scrollTop:e})},this.$el.addEventListener("scroll",this.listener)},beforeUnmount(){this.listener&&(this.$el.removeEventListener("scroll",this.listener),delete this.listener)}}),kOe={class:"custom-scroll custom-scroll-thumb1"};function POe(t,e,n,i,s,r){return w(),P("div",kOe,[Ge(t.$slots,"default")])}const TOe=ne(xOe,[["render",POe]]),$Oe=ve({components:{Paginator:nA,WithScroll:TOe},props:{report:N1},setup(){return{languageDirection:st(Ep)}},data(){return{wconst:8,hconst:48,pageStart:0,pageEnd:0}},computed:{dataSlice(){var t;return(t=this.report)!=null&&t.usePagination?this.report.reportData.slice(this.pageStart,this.pageEnd):this.report.reportData}},methods:{scroll({scrollLeft:t}){this.$refs.titlerow.scrollLeft=t},setPageIndices({start:t,end:e}){this.pageStart=t,this.pageEnd=e},onRowClick(t,e){if(!t.isGroup)return;e+=1,t.foldedBelow=!t.foldedBelow;const n=t.foldedBelow;let i=this.dataSlice[e];for(;i&&i.level>t.level;)i.folded=n,e+=1,i=this.dataSlice[e]},getCellStyle(t,e){const n={},i=t.width??1;let s=t.align??"left";return this.languageDirection==="rtl"&&(s=this.languageDirection==="rtl"?"right":"left"),n.width=`${i*this.wconst}rem`,n["text-align"]=s,t.bold&&(n["font-weight"]="bold"),t.italics&&(n["font-style"]="oblique 15deg"),e===0&&(this.languageDirection==="rtl"?n["padding-right"]="0px":n["padding-left"]="0px"),!t.align&&lo(t.fieldtype)&&(n["text-align"]="right"),e===this.report.columns.length-1&&(this.languageDirection==="rtl"?n["padding-left"]="0px":n["padding-right"]="0px"),t.indent&&(this.languageDirection==="rtl"?n["padding-right"]=`${t.indent*2}rem`:n["padding-left"]=`${t.indent*2}rem`),n},getCellColorClass(t){var n,i;if(t.color==="red")return"text-red-600";if(t.color==="green")return"text-green-600";if(!t.rawValue)return"text-gray-600 dark:text-gray-400";if(typeof t.rawValue!="number")return"text-gray-900 dark:text-gray-100";if(t.rawValue===0)return"text-gray-600 dark:text-gray-400";const e=((i=(n=this.fyo)==null?void 0:n.singles)==null?void 0:i.displayPrecision)??2;return Number(t.rawValue.toFixed(e))===0?"text-gray-600 dark:text-gray-500":"text-gray-900 dark:text-gray-300"}}}),DOe={class:"overflow-hidden flex flex-col h-full"},MOe={key:0,class:"overflow-hidden"},IOe=["onClick"],ROe={key:1,class:"w-full text-center mt-20 text-gray-800 dark:text-gray-100 text-base"},_Oe={key:2,class:"mt-auto flex-shrink-0"},EOe={key:3,class:"h-4"};function QOe(t,e,n,i,s,r){var l,c;const o=Q("WithScroll"),a=Q("Paginator");return w(),P("div",DOe,[t.dataSlice.length?(w(),P("div",MOe,[v("div",{ref:"titlerow",class:"w-full overflow-x-hidden flex items-center dark:text-gray-25 border-b dark:border-gray-800 px-4",style:qe({height:`${t.hconst}px`,paddingRight:"calc(var(--w-scrollbar) + 1rem)"})},[(w(!0),P(le,null,Pe(t.report.columns,(u,h)=>(w(),P("div",{key:h+"-col",style:qe(t.getCellStyle(u,h)),class:"text-base px-3 flex-shrink-0 overflow-x-auto whitespace-nowrap no-scrollbar"},R(u.label),5))),128))],4),_(o,{class:"overflow-auto w-full",style:{height:"calc(100% - 49px)"},onScroll:t.scroll},{default:U(()=>[(w(!0),P(le,null,Pe(t.dataSlice,(u,h)=>(w(),P(le,{key:h+"-row"},[u.folded?B("",!0):(w(),P("div",{key:0,class:ee(["flex items-center w-max px-4",[h!==t.pageEnd-1?"border-b dark:border-gray-800":"",u.isGroup?"hover:bg-gray-50 dark:hover:bg-gray-890 cursor-pointer":""]]),style:qe({height:`${t.hconst}px`,minWidth:"calc(var(--w-desk) - var(--w-scrollbar))"}),onClick:()=>t.onRowClick(u,h)},[(w(!0),P(le,null,Pe(u.cells,(p,m)=>(w(),P("div",{key:`${m}-${h}-cell`,style:qe(t.getCellStyle(p,m)),class:ee(["text-base px-3 flex-shrink-0 overflow-x-auto whitespace-nowrap no-scrollbar",[t.getCellColorClass(p)]])},R(p.value),7))),128))],14,IOe))],64))),128))]),_:1},8,["onScroll"])])):(w(),P("p",ROe,R(t.report.loading?t.t`Loading Report...`:t.t`No Values to be Displayed`),1)),t.report.usePagination?(w(),P("div",_Oe,[_(a,{"item-count":((c=(l=t.report)==null?void 0:l.reportData)==null?void 0:c.length)??0,class:"px-4",onIndexChange:t.setPageIndices},null,8,["item-count","onIndexChange"])])):(w(),P("div",EOe))])}const NOe=ne($Oe,[["render",QOe]]),LOe=ve({components:{PageHeader:Nr,FormControl:is,ListReport:NOe,DropdownWithActions:th,Button:At},provide(){return{report:Dt(()=>this.report)}},props:{reportClassName:{type:String,required:!0},defaultFilters:{type:String,default:"{}"}},setup(){return{shortcuts:st(Is)}},data(){return{loading:!1,report:null}},computed:{title(){var t;return((t=Hu[this.reportClassName])==null?void 0:t.title)??b`Report`},groupedActions(){var n;const e=(((n=this.report)==null?void 0:n.getActions())??[]).reduce((i,s)=>{var r;return s.group||(s.group="none"),i[r=s.group]??(i[r]={group:s.group,label:s.label??"",type:s.type??"secondary",actions:[]}),i[s.group].actions.push(s),i},{});return Object.values(e)}},async activated(){var i,s,r;Ai.value=Xo[this.reportClassName]??Xo.Reports,await this.setReportData();const t=this.$route.query,e={};if(t.defaultFilters&&typeof t.defaultFilters=="string"){const o=JSON.parse(t.defaultFilters);Object.assign(e,o)}for(const[o,a]of Object.entries(t))o!=="defaultFilters"&&typeof a=="string"&&(e[o]=a);const n=Object.keys(e);for(const o of n)await((i=this.report)==null?void 0:i.set(o,e[o]));n.length&&await((s=this.report)==null?void 0:s.updateData()),N.store.isDevelopment&&(window.rep=this),(r=this.shortcuts)==null||r.pmod.set(this.reportClassName,["KeyP"],async()=>{await St(`/report-print/${this.reportClassName}`)})},deactivated(){var t;Ai.value="",(t=this.shortcuts)==null||t.delete(this.reportClassName)},methods:{routeTo:St,async setReportData(){this.report===null&&(this.report=await gM(this.reportClassName)),this.report.reportData.length?this.report.shouldRefresh&&await this.report.setReportData(void 0,!0):await this.report.setReportData()}}}),FOe={class:"flex flex-col w-full h-full"},BOe={key:0,class:"grid grid-cols-5 gap-4 p-4 border-b dark:border-gray-800"};function VOe(t,e,n,i,s,r){const o=Q("DropdownWithActions"),a=Q("feather-icon"),l=Q("Button"),c=Q("PageHeader"),u=Q("FormControl"),h=Q("ListReport");return w(),P("div",FOe,[_(c,{title:t.title},{default:U(()=>[(w(!0),P(le,null,Pe(t.groupedActions,p=>(w(),H(o,{key:p.label,icon:!1,type:p.type,actions:p.actions,class:"text-xs"},{default:U(()=>[He(R(p.group),1)]),_:2},1032,["type","actions"]))),128)),_(l,{ref:"printButton",icon:!0,title:t.t`Open Report Print View`,onClick:e[0]||(e[0]=p=>t.routeTo(`/report-print/${t.reportClassName}`))},{default:U(()=>[_(a,{name:"printer",class:"w-4 h-4"})]),_:1},8,["title"])]),_:1},8,["title"]),t.report&&t.report.filters.length?(w(),P("div",BOe,[(w(!0),P(le,null,Pe(t.report.filters,p=>(w(),H(u,{key:p.fieldname+"-filter",border:!0,size:"small",class:ee([p.fieldtype==="Check"?"self-end":""]),"show-label":!0,df:p,value:t.report.get(p.fieldname),"read-only":t.loading,onChange:async m=>{var y;return await((y=t.report)==null?void 0:y.set(p.fieldname,m))}},null,8,["class","df","value","read-only","onChange"]))),128))])):B("",!0),t.report?(w(),H(h,{key:1,report:t.report,class:""},null,8,["report"])):B("",!0)])}const jOe=ne(LOe,[["render",VOe]]),d8="Settings",zOe=ve({components:{FormContainer:Lp,Button:At,FormHeader:Za,CommonFormSection:KC},provide(){return{doc:Dt(()=>this.doc)}},setup(){return{shortcuts:st(Is)}},data(){return{errors:{},activeTab:A.AccountingSettings,groupedFields:null}},computed:{canSave(){return[A.AccountingSettings,A.InventorySettings,A.Defaults,A.POSSettings,A.ERPNextSyncSettings,A.PrintSettings,A.SystemSettings].some(t=>{var e;return(e=this.fyo.singles[t])==null?void 0:e.canSave})},doc(){const t=this.fyo.singles[this.activeTab];return t||null},tabLabels(){return{[A.AccountingSettings]:this.t`General`,[A.PrintSettings]:this.t`Print`,[A.InventorySettings]:this.t`Inventory`,[A.Defaults]:this.t`Defaults`,[A.POSSettings]:this.t`POS Settings`,[A.ERPNextSyncSettings]:this.t`ERPNext Sync`,[A.SystemSettings]:this.t`System`}},schemas(){var i,s,r;const t=!!((i=this.fyo.singles.AccountingSettings)!=null&&i.enableInventory),e=!!((s=this.fyo.singles.InventorySettings)!=null&&s.enablePointOfSale),n=!!((r=this.fyo.singles.AccountingSettings)!=null&&r.enableERPNextSync);return[A.AccountingSettings,A.InventorySettings,A.Defaults,A.POSSettings,A.ERPNextSyncSettings,A.PrintSettings,A.SystemSettings].filter(o=>!(o===A.InventorySettings&&!t||o===A.POSSettings&&!e||o===A.ERPNextSyncSettings&&!n)).map(o=>this.fyo.schemaMap[o])},activeGroup(){if(!this.groupedFields)return new Map;const t=this.groupedFields.get(this.activeTab);if(!t)throw new ie(`Tab group ${this.activeTab} has no value set`);return t}},mounted(){this.fyo.store.isDevelopment&&(window.settings=this),this.update()},activated(){var e;const t=this.$route.query.tab;typeof t=="string"&&this.tabLabels[t]&&(this.activeTab=t),Ai.value=Xo.Settings,(e=this.shortcuts)==null||e.pmod.set(d8,["KeyS"],async()=>{this.canSave&&await this.sync()})},async deactivated(){var t;Ai.value="",(t=this.shortcuts)==null||t.delete(d8),this.canSave&&await this.reset()},methods:{async reset(){const t=this.schemas.map(({name:e})=>this.fyo.singles[e]).filter(e=>e==null?void 0:e.dirty);for(const e of t)await e.load();this.update()},async sync(){const t=this.schemas.map(({name:e})=>this.fyo.singles[e]).filter(e=>e==null?void 0:e.canSave);for(const e of t)await this.syncDoc(e);this.update(),await Qn({title:this.t`Reload Frappe Books?`,detail:this.t`Changes made to settings will be visible on reload.`,type:"info",buttons:[{label:this.t`Yes`,isPrimary:!0,action:ipc.reloadWindow.bind(ipc)},{label:this.t`No`,action:()=>null,isEscape:!0}]})},async syncDoc(t){try{await t.sync(),this.updateGroupedFields()}catch(e){await mo(e,t)}},async onValueChange(t,e){var i;const{fieldname:n}=t;delete this.errors[n];try{await((i=this.doc)==null?void 0:i.set(n,e??""))}catch(s){if(!(s instanceof Error))return;this.errors[n]=eh(s,this.doc??void 0)}this.update()},update(){this.updateGroupedFields()},updateGroupedFields(){const t=new Map,e=this.schemas.map(n=>n.fields).flat();for(const n of e){const i=n.schemaName;t.has(i)||t.set(i,new Map);const s=t.get(i),r=n.section??this.t`Miscellaneous`;if(s.has(r)||s.set(r,[]),n.meta)continue;const o=this.fyo.singles[i];RC(n,o)||s.get(r).push(n)}this.groupedFields=t}}}),ZOe={key:0,class:"overflow-auto custom-scroll custom-scroll-thumb1"},qOe={key:1,class:"mt-auto px-4 pb-4 flex gap-8 border-t dark:border-gray-800 flex-shrink-0 sticky bottom-0 bg-white dark:bg-gray-890"},XOe=["onClick"];function WOe(t,e,n,i,s,r){const o=Q("Button"),a=Q("FormHeader"),l=Q("CommonFormSection"),c=Q("FormContainer");return w(),H(c,null,{header:U(()=>[t.canSave?(w(),H(o,{key:0,type:"primary",onClick:t.sync},{default:U(()=>[He(R(t.t`Save`),1)]),_:1},8,["onClick"])):B("",!0)]),body:U(()=>[_(a,{"form-title":t.tabLabels[t.activeTab]??"","form-sub-title":t.t`Settings`,class:"sticky top-0 bg-white dark:bg-gray-890 border-b dark:border-gray-800"},null,8,["form-title","form-sub-title"]),t.doc?(w(),P("div",ZOe,[(w(!0),P(le,null,Pe(t.activeGroup.entries(),([u,h],p)=>(w(),H(l,{key:u+p,ref_for:!0,ref:"section",class:ee(["p-4",p!==0&&t.activeGroup.size>1?"border-t dark:border-gray-800":""]),"show-title":t.activeGroup.size>1&&u!==t.t`Default`,title:u,fields:h,doc:t.doc,errors:t.errors,onValueChange:t.onValueChange},null,8,["class","show-title","title","fields","doc","errors","onValueChange"]))),128))])):B("",!0),t.groupedFields&&t.groupedFields.size>1?(w(),P("div",qOe,[(w(!0),P(le,null,Pe(t.groupedFields.keys(),u=>(w(),P("div",{key:u,class:ee(["text-sm cursor-pointer",u===t.activeTab?"text-gray-900 dark:text-gray-25 font-semibold border-t-2 border-gray-800 dark:border-gray-100":"text-gray-700 dark:text-gray-200 "]),style:qe({paddingTop:u===t.activeTab?"calc(1rem - 2px)":"1rem"}),onClick:h=>t.activeTab=u},R(t.tabLabels[u]),15,XOe))),128))])):B("",!0)]),_:1})}const GOe=ne(zOe,[["render",WOe]]);let nw=[],eI=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?eI:nw).push(n=n+t[e])})();function UOe(t){if(t<768)return!1;for(let e=0,n=nw.length;;){let i=e+n>>1;if(t<nw[i])n=i;else if(t>=eI[i])e=i+1;else return!0;if(e==n)return!1}}function h8(t){return t>=127462&&t<=127487}const f8=8205;function HOe(t,e,n=!0,i=!0){return(n?tI:YOe)(t,e,i)}function tI(t,e,n){if(e==t.length)return e;e&&nI(t.charCodeAt(e))&&iI(t.charCodeAt(e-1))&&e--;let i=n2(t,e);for(e+=p8(i);e<t.length;){let s=n2(t,e);if(i==f8||s==f8||n&&UOe(s))e+=p8(s),i=s;else if(h8(s)){let r=0,o=e-2;for(;o>=0&&h8(n2(t,o));)r++,o-=2;if(r%2==0)break;e+=2}else break}return e}function YOe(t,e,n){for(;e>0;){let i=tI(t,e-2,n);if(i<e)return i;e--}return 0}function n2(t,e){let n=t.charCodeAt(e);if(!iI(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return nI(i)?(n-55296<<10)+(i-56320)+65536:n}function nI(t){return t>=56320&&t<57344}function iI(t){return t>=55296&&t<56320}function p8(t){return t<65536?1:2}class Zt{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){[e,n]=Id(this,e,n);let s=[];return this.decompose(0,e,s,2),i.length&&i.decompose(0,i.length,s,3),this.decompose(n,this.length,s,1),Mo.from(s,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=Id(this,e,n);let i=[];return this.decompose(e,n,i,0),Mo.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),s=new mf(this),r=new mf(e);for(let o=n,a=n;;){if(s.next(o),r.next(o),o=0,s.lineBreak!=r.lineBreak||s.done!=r.done||s.value!=r.value)return!1;if(a+=s.value.length,s.done||a>=i)return!0}}iter(e=1){return new mf(this,e)}iterRange(e,n=this.length){return new sI(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let s=this.line(e).from;i=this.iterRange(s,Math.max(s,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new rI(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Zt.empty:e.length<=32?new Vn(e):Mo.from(Vn.split(e,[]))}}class Vn extends Zt{constructor(e,n=KOe(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,s){for(let r=0;;r++){let o=this.text[r],a=s+o.length;if((n?i:a)>=e)return new JOe(s,a,i,o);s=a+1,i++}}decompose(e,n,i,s){let r=e<=0&&n>=this.length?this:new Vn(m8(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(s&1){let o=i.pop(),a=Jg(r.text,o.text.slice(),0,r.length);if(a.length<=32)i.push(new Vn(a,o.length+r.length));else{let l=a.length>>1;i.push(new Vn(a.slice(0,l)),new Vn(a.slice(l)))}}else i.push(r)}replace(e,n,i){if(!(i instanceof Vn))return super.replace(e,n,i);[e,n]=Id(this,e,n);let s=Jg(this.text,Jg(i.text,m8(this.text,0,e)),n),r=this.length+i.length-(n-e);return s.length<=32?new Vn(s,r):Mo.from(Vn.split(s,[]),r)}sliceString(e,n=this.length,i=`
`){[e,n]=Id(this,e,n);let s="";for(let r=0,o=0;r<=n&&o<this.text.length;o++){let a=this.text[o],l=r+a.length;r>e&&o&&(s+=i),e<l&&n>r&&(s+=a.slice(Math.max(0,e-r),n-r)),r=l+1}return s}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],s=-1;for(let r of e)i.push(r),s+=r.length+1,i.length==32&&(n.push(new Vn(i,s)),i=[],s=-1);return s>-1&&n.push(new Vn(i,s)),n}}class Mo extends Zt{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,s){for(let r=0;;r++){let o=this.children[r],a=s+o.length,l=i+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,i,s);s=a+1,i=l+1}}decompose(e,n,i,s){for(let r=0,o=0;o<=n&&r<this.children.length;r++){let a=this.children[r],l=o+a.length;if(e<=l&&n>=o){let c=s&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!c?i.push(a):a.decompose(e-o,n-o,i,c)}o=l+1}}replace(e,n,i){if([e,n]=Id(this,e,n),i.lines<this.lines)for(let s=0,r=0;s<this.children.length;s++){let o=this.children[s],a=r+o.length;if(e>=r&&n<=a){let l=o.replace(e-r,n-r,i),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let u=this.children.slice();return u[s]=l,new Mo(u,this.length-(n-e)+i.length)}return super.replace(r,a,l)}r=a+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){[e,n]=Id(this,e,n);let s="";for(let r=0,o=0;r<this.children.length&&o<=n;r++){let a=this.children[r],l=o+a.length;o>e&&r&&(s+=i),e<l&&n>o&&(s+=a.sliceString(e-o,n-o,i)),o=l+1}return s}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Mo))return 0;let i=0,[s,r,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=n,r+=n){if(s==o||r==a)return i;let l=this.children[s],c=e.children[r];if(l!=c)return i+l.scanIdentical(c,n);i+=l.length+1}}static from(e,n=e.reduce((i,s)=>i+s.length+1,-1)){let i=0;for(let m of e)i+=m.lines;if(i<32){let m=[];for(let y of e)y.flatten(m);return new Vn(m,n)}let s=Math.max(32,i>>5),r=s<<1,o=s>>1,a=[],l=0,c=-1,u=[];function h(m){let y;if(m.lines>r&&m instanceof Mo)for(let O of m.children)h(O);else m.lines>o&&(l>o||!l)?(p(),a.push(m)):m instanceof Vn&&l&&(y=u[u.length-1])instanceof Vn&&m.lines+y.lines<=32?(l+=m.lines,c+=m.length+1,u[u.length-1]=new Vn(y.text.concat(m.text),y.length+1+m.length)):(l+m.lines>s&&p(),l+=m.lines,c+=m.length+1,u.push(m))}function p(){l!=0&&(a.push(u.length==1?u[0]:Mo.from(u,c)),c=-1,l=u.length=0)}for(let m of e)h(m);return p(),a.length==1?a[0]:new Mo(a,n)}}Zt.empty=new Vn([""],0);function KOe(t){let e=-1;for(let n of t)e+=n.length+1;return e}function Jg(t,e,n=0,i=1e9){for(let s=0,r=0,o=!0;r<t.length&&s<=i;r++){let a=t[r],l=s+a.length;l>=n&&(l>i&&(a=a.slice(0,i-s)),s<n&&(a=a.slice(n-s)),o?(e[e.length-1]+=a,o=!1):e.push(a)),s=l+1}return e}function m8(t,e,n){return Jg(t,[""],e,n)}class mf{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof Vn?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,s=this.nodes[i],r=this.offsets[i],o=r>>1,a=s instanceof Vn?s.text.length:s.children.length;if(o==(n>0?a:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((r&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof Vn){let l=s.text[o+(n<0?-1:0)];if(this.offsets[i]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=s.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof Vn?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class sI{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new mf(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*n,this.value=s.length<=i?s:n<0?s.slice(s.length-i):s.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class rI{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:s}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Zt.prototype[Symbol.iterator]=function(){return this.iter()},mf.prototype[Symbol.iterator]=sI.prototype[Symbol.iterator]=rI.prototype[Symbol.iterator]=function(){return this});class JOe{constructor(e,n,i,s){this.from=e,this.to=n,this.number=i,this.text=s}get length(){return this.to-this.from}}function Id(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function ci(t,e,n=!0,i=!0){return HOe(t,e,n,i)}function ebe(t){return t>=56320&&t<57344}function tbe(t){return t>=55296&&t<56320}function Os(t,e){let n=t.charCodeAt(e);if(!tbe(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return ebe(i)?(n-55296<<10)+(i-56320)+65536:n}function rA(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Io(t){return t<65536?1:2}const iw=/\r\n?|\n/;var vi=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(vi||(vi={}));class Vo{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,s=0;n<this.sections.length;){let r=this.sections[n++],o=this.sections[n++];o<0?(e(i,s,r),s+=r):s+=o,i+=r}}iterChangedRanges(e,n=!1){sw(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],s=this.sections[n++];s<0?e.push(i,s):e.push(s,i)}return new Vo(e)}composeDesc(e){return this.empty?e:e.empty?this:oI(this,e)}mapDesc(e,n=!1){return e.empty?this:rw(this,e,n)}mapPos(e,n=-1,i=vi.Simple){let s=0,r=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=s+a;if(l<0){if(c>e)return r+(e-s);r+=a}else{if(i!=vi.Simple&&c>=e&&(i==vi.TrackDel&&s<e&&c>e||i==vi.TrackBefore&&s<e||i==vi.TrackAfter&&c>e))return null;if(c>e||c==e&&n<0&&!a)return e==s||n<0?r:r+l;r+=l}s=c}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return r}touchesRange(e,n=e){for(let i=0,s=0;i<this.sections.length&&s<=n;){let r=this.sections[i++],o=this.sections[i++],a=s+r;if(o>=0&&s<=n&&a>=e)return s<e&&a>n?"cover":!0;s=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],s=this.sections[n++];e+=(e?" ":"")+i+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Vo(e)}static create(e){return new Vo(e)}}class ti extends Vo{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return sw(this,(n,i,s,r,o)=>e=e.replace(s,s+(i-n),o),!1),e}mapDesc(e,n=!1){return rw(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let s=0,r=0;s<n.length;s+=2){let o=n[s],a=n[s+1];if(a>=0){n[s]=a,n[s+1]=o;let l=s>>1;for(;i.length<l;)i.push(Zt.empty);i.push(o?e.slice(r,r+o):Zt.empty)}r+=o}return new ti(n,i)}compose(e){return this.empty?e:e.empty?this:oI(this,e,!0)}map(e,n=!1){return e.empty?this:rw(this,e,n,!0)}iterChanges(e,n=!1){sw(this,e,n)}get desc(){return Vo.create(this.sections)}filter(e){let n=[],i=[],s=[],r=new Uf(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&r.len==0;){if(r.done)break e;let u=Math.min(r.len,l-a);Ei(s,u,-1);let h=r.ins==-1?-1:r.off==0?r.ins:0;Ei(n,u,h),h>0&&Al(i,n,r.text),r.forward(u),a+=u}let c=e[o++];for(;a<c;){if(r.done)break e;let u=Math.min(r.len,c-a);Ei(n,u,-1),Ei(s,u,r.ins==-1?-1:r.off==0?r.ins:0),r.forward(u),a+=u}}return{changes:new ti(n,i),filtered:Vo.create(s)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],s=this.sections[n+1];s<0?e.push(i):s==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let s=[],r=[],o=0,a=null;function l(u=!1){if(!u&&!s.length)return;o<n&&Ei(s,n-o,-1);let h=new ti(s,r);a=a?a.compose(h.map(a)):h,s=[],r=[],o=0}function c(u){if(Array.isArray(u))for(let h of u)c(h);else if(u instanceof ti){if(u.length!=n)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${n})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:h,to:p=h,insert:m}=u;if(h>p||h<0||p>n)throw new RangeError(`Invalid change range ${h} to ${p} (in doc of length ${n})`);let y=m?typeof m=="string"?Zt.of(m.split(i||iw)):m:Zt.empty,O=y.length;if(h==p&&O==0)return;h<o&&l(),h>o&&Ei(s,h-o,-1),Ei(s,p-h,O),Al(r,s,y),o=p}}return c(e),l(!a),a}static empty(e){return new ti(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let s=0;s<e.length;s++){let r=e[s];if(typeof r=="number")n.push(r,-1);else{if(!Array.isArray(r)||typeof r[0]!="number"||r.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(r.length==1)n.push(r[0],0);else{for(;i.length<s;)i.push(Zt.empty);i[s]=Zt.of(r.slice(1)),n.push(r[0],i[s].length)}}}return new ti(n,i)}static createSet(e,n){return new ti(e,n)}}function Ei(t,e,n,i=!1){if(e==0&&n<=0)return;let s=t.length-2;s>=0&&n<=0&&n==t[s+1]?t[s]+=e:s>=0&&e==0&&t[s]==0?t[s+1]+=n:i?(t[s]+=e,t[s+1]+=n):t.push(e,n)}function Al(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(Zt.empty);t.push(n)}}function sw(t,e,n){let i=t.inserted;for(let s=0,r=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)s+=a,r+=a;else{let c=s,u=r,h=Zt.empty;for(;c+=a,u+=l,l&&i&&(h=h.append(i[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(s,c,r,u,h),s=c,r=u}}}function rw(t,e,n,i=!1){let s=[],r=i?[]:null,o=new Uf(t),a=new Uf(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);Ei(s,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let c=a.len;for(Ei(s,a.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=u&&(Ei(s,0,o.ins),r&&Al(r,s,o.text),l=o.i),o.forward(u),c-=u}a.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(a.ins==-1){let h=Math.min(u,a.len);c+=h,u-=h,a.forward(h)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;Ei(s,c,l<o.i?o.ins:0),r&&l<o.i&&Al(r,s,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return r?ti.createSet(s,r):Vo.create(s);throw new Error("Mismatched change set lengths")}}}function oI(t,e,n=!1){let i=[],s=n?[]:null,r=new Uf(t),o=new Uf(e);for(let a=!1;;){if(r.done&&o.done)return s?ti.createSet(i,s):Vo.create(i);if(r.ins==0)Ei(i,r.len,0,a),r.next();else if(o.len==0&&!o.done)Ei(i,0,o.ins,a),s&&Al(s,i,o.text),o.next();else{if(r.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(r.len2,o.len),c=i.length;if(r.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;Ei(i,l,u,a),s&&u&&Al(s,i,o.text)}else o.ins==-1?(Ei(i,r.off?0:r.len,l,a),s&&Al(s,i,r.textBit(l))):(Ei(i,r.off?0:r.len,o.off?0:o.ins,a),s&&!o.off&&Al(s,i,o.text));a=(r.ins>l||o.ins>=0&&o.len>l)&&(a||i.length>c),r.forward2(l),o.forward(l)}}}}class Uf{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Zt.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?Zt.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class yc{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let i,s;return this.empty?i=s=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),i==this.from&&s==this.to?this:new yc(i,s,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return fe.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return fe.range(this.anchor,i)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&this.goalColumn==e.goalColumn&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return fe.range(e.anchor,e.head)}static create(e,n,i){return new yc(e,n,i)}}class fe{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:fe.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new fe([this.main],0)}addRange(e,n=!0){return fe.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,fe.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new fe(e.ranges.map(n=>yc.fromJSON(n)),e.main)}static single(e,n=e){return new fe([fe.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,s=0;s<e.length;s++){let r=e[s];if(r.empty?r.from<=i:r.from<i)return fe.normalized(e.slice(),n);i=r.to}return new fe(e,n)}static cursor(e,n=0,i,s){return yc.create(e,e,(n==0?0:n<0?8:16)|(i==null?7:Math.min(6,i))|(s??16777215)<<6)}static range(e,n,i,s){let r=(i??16777215)<<6|(s==null?7:Math.min(6,s));return n<e?yc.create(n,e,48|r):yc.create(e,n,(n>e?8:0)|r)}static normalized(e,n=0){let i=e[n];e.sort((s,r)=>s.from-r.from),n=e.indexOf(i);for(let s=1;s<e.length;s++){let r=e[s],o=e[s-1];if(r.empty?r.from<=o.to:r.from<o.to){let a=o.from,l=Math.max(r.to,o.to);s<=n&&n--,e.splice(--s,2,r.anchor>r.head?fe.range(l,a):fe.range(a,l))}}return new fe(e,n)}}function aI(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let oA=0;class Ve{constructor(e,n,i,s,r){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=s,this.id=oA++,this.default=e([]),this.extensions=typeof r=="function"?r(this):r}get reader(){return this}static define(e={}){return new Ve(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:aA),!!e.static,e.enables)}of(e){return new ey([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new ey(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new ey(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function aA(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class ey{constructor(e,n,i,s){this.dependencies=e,this.facet=n,this.type=i,this.value=s,this.id=oA++}dynamicSlot(e){var n;let i=this.value,s=this.facet.compareInput,r=this.id,o=e[r]>>1,a=this.type==2,l=!1,c=!1,u=[];for(let h of this.dependencies)h=="doc"?l=!0:h=="selection"?c=!0:((n=e[h.id])!==null&&n!==void 0?n:1)&1||u.push(e[h.id]);return{create(h){return h.values[o]=i(h),1},update(h,p){if(l&&p.docChanged||c&&(p.docChanged||p.selection)||ow(h,u)){let m=i(h);if(a?!g8(m,h.values[o],s):!s(m,h.values[o]))return h.values[o]=m,1}return 0},reconfigure:(h,p)=>{let m,y=p.config.address[r];if(y!=null){let O=o0(p,y);if(this.dependencies.every(S=>S instanceof Ve?p.facet(S)===h.facet(S):S instanceof Pi?p.field(S,!1)==h.field(S,!1):!0)||(a?g8(m=i(h),O,s):s(m=i(h),O)))return h.values[o]=O,0}else m=i(h);return h.values[o]=m,1}}}}function g8(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function ow(t,e){let n=!1;for(let i of e)gf(t,i)&1&&(n=!0);return n}function nbe(t,e,n){let i=n.map(l=>t[l.id]),s=n.map(l=>l.type),r=i.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let c=[];for(let u=0;u<i.length;u++){let h=o0(l,i[u]);if(s[u]==2)for(let p of h)c.push(p);else c.push(h)}return e.combine(c)}return{create(l){for(let c of i)gf(l,c);return l.values[o]=a(l),1},update(l,c){if(!ow(l,r))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,c){let u=ow(l,i),h=c.config.facets[e.id],p=c.facet(e);if(h&&!u&&aA(n,h))return l.values[o]=p,0;let m=a(l);return e.compare(m,p)?(l.values[o]=p,0):(l.values[o]=m,1)}}}const cg=Ve.define({static:!0});class Pi{constructor(e,n,i,s,r){this.id=e,this.createF=n,this.updateF=i,this.compareF=s,this.spec=r,this.provides=void 0}static define(e){let n=new Pi(oA++,e.create,e.update,e.compare||((i,s)=>i===s),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(cg).find(i=>i.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,s)=>{let r=i.values[n],o=this.updateF(r,s);return this.compareF(r,o)?0:(i.values[n]=o,1)},reconfigure:(i,s)=>{let r=i.facet(cg),o=s.facet(cg),a;return(a=r.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(i.values[n]=a.create(i),1):s.config.address[this.id]!=null?(i.values[n]=s.field(this),0):(i.values[n]=this.create(i),1)}}}init(e){return[this,cg.of({field:this,create:e})]}get extension(){return this}}const hc={lowest:4,low:3,default:2,high:1,highest:0};function _h(t){return e=>new lI(e,t)}const Zl={highest:_h(hc.highest),high:_h(hc.high),default:_h(hc.default),low:_h(hc.low),lowest:_h(hc.lowest)};class lI{constructor(e,n){this.inner=e,this.prec=n}}class Rd{of(e){return new aw(this,e)}reconfigure(e){return Rd.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class aw{constructor(e,n){this.compartment=e,this.inner=n}}class r0{constructor(e,n,i,s,r,o){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=s,this.staticValues=r,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let s=[],r=Object.create(null),o=new Map;for(let p of ibe(e,n,o))p instanceof Pi?s.push(p):(r[p.facet.id]||(r[p.facet.id]=[])).push(p);let a=Object.create(null),l=[],c=[];for(let p of s)a[p.id]=c.length<<1,c.push(m=>p.slot(m));let u=i==null?void 0:i.config.facets;for(let p in r){let m=r[p],y=m[0].facet,O=u&&u[p]||[];if(m.every(S=>S.type==0))if(a[y.id]=l.length<<1|1,aA(O,m))l.push(i.facet(y));else{let S=y.combine(m.map(x=>x.value));l.push(i&&y.compare(S,i.facet(y))?i.facet(y):S)}else{for(let S of m)S.type==0?(a[S.id]=l.length<<1|1,l.push(S.value)):(a[S.id]=c.length<<1,c.push(x=>S.dynamicSlot(x)));a[y.id]=c.length<<1,c.push(S=>nbe(S,y,m))}}let h=c.map(p=>p(a));return new r0(e,o,h,a,l,r)}}function ibe(t,e,n){let i=[[],[],[],[],[]],s=new Map;function r(o,a){let l=s.get(o);if(l!=null){if(l<=a)return;let c=i[l].indexOf(o);c>-1&&i[l].splice(c,1),o instanceof aw&&n.delete(o.compartment)}if(s.set(o,a),Array.isArray(o))for(let c of o)r(c,a);else if(o instanceof aw){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;n.set(o.compartment,c),r(c,a)}else if(o instanceof lI)r(o.inner,o.prec);else if(o instanceof Pi)i[a].push(o),o.provides&&r(o.provides,a);else if(o instanceof ey)i[a].push(o),o.facet.extensions&&r(o.facet.extensions,hc.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);r(c,a)}}return r(t,hc.default),i.reduce((o,a)=>o.concat(a))}function gf(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let s=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|s}function o0(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const cI=Ve.define(),lw=Ve.define({combine:t=>t.some(e=>e),static:!0}),uI=Ve.define({combine:t=>t.length?t[0]:void 0,static:!0}),dI=Ve.define(),hI=Ve.define(),fI=Ve.define(),pI=Ve.define({combine:t=>t.length?t[0]:!1});class Xa{constructor(e,n){this.type=e,this.value=n}static define(){return new sbe}}class sbe{of(e){return new Xa(this,e)}}class rbe{constructor(e){this.map=e}of(e){return new ht(this,e)}}class ht{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new ht(this.type,n)}is(e){return this.type==e}static define(e={}){return new rbe(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let s of e){let r=s.map(n);r&&i.push(r)}return i}}ht.reconfigure=ht.define();ht.appendConfig=ht.define();class Wn{constructor(e,n,i,s,r,o){this.startState=e,this.changes=n,this.selection=i,this.effects=s,this.annotations=r,this.scrollIntoView=o,this._doc=null,this._state=null,i&&aI(i,n.newLength),r.some(a=>a.type==Wn.time)||(this.annotations=r.concat(Wn.time.of(Date.now())))}static create(e,n,i,s,r,o){return new Wn(e,n,i,s,r,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Wn.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Wn.time=Xa.define();Wn.userEvent=Xa.define();Wn.addToHistory=Xa.define();Wn.remote=Xa.define();function obe(t,e){let n=[];for(let i=0,s=0;;){let r,o;if(i<t.length&&(s==e.length||e[s]>=t[i]))r=t[i++],o=t[i++];else if(s<e.length)r=e[s++],o=e[s++];else return n;!n.length||n[n.length-1]<r?n.push(r,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function mI(t,e,n){var i;let s,r,o;return n?(s=e.changes,r=ti.empty(e.changes.length),o=t.changes.compose(e.changes)):(s=e.changes.map(t.changes),r=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(s)),{changes:o,selection:e.selection?e.selection.map(r):(i=t.selection)===null||i===void 0?void 0:i.map(s),effects:ht.mapEffects(t.effects,s).concat(ht.mapEffects(e.effects,r)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function cw(t,e,n){let i=e.selection,s=Yu(e.annotations);return e.userEvent&&(s=s.concat(Wn.userEvent.of(e.userEvent))),{changes:e.changes instanceof ti?e.changes:ti.of(e.changes||[],n,t.facet(uI)),selection:i&&(i instanceof fe?i:fe.single(i.anchor,i.head)),effects:Yu(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function gI(t,e,n){let i=cw(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let r=1;r<e.length;r++){e[r].filter===!1&&(n=!1);let o=!!e[r].sequential;i=mI(i,cw(t,e[r],o?i.changes.newLength:t.doc.length),o)}let s=Wn.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return lbe(n?abe(s):s)}function abe(t){let e=t.startState,n=!0;for(let s of e.facet(dI)){let r=s(t);if(r===!1){n=!1;break}Array.isArray(r)&&(n=n===!0?r:obe(n,r))}if(n!==!0){let s,r;if(n===!1)r=t.changes.invertedDesc,s=ti.empty(e.doc.length);else{let o=t.changes.filter(n);s=o.changes,r=o.filtered.mapDesc(o.changes).invertedDesc}t=Wn.create(e,s,t.selection&&t.selection.map(r),ht.mapEffects(t.effects,r),t.annotations,t.scrollIntoView)}let i=e.facet(hI);for(let s=i.length-1;s>=0;s--){let r=i[s](t);r instanceof Wn?t=r:Array.isArray(r)&&r.length==1&&r[0]instanceof Wn?t=r[0]:t=gI(e,Yu(r),!1)}return t}function lbe(t){let e=t.startState,n=e.facet(fI),i=t;for(let s=n.length-1;s>=0;s--){let r=n[s](t);r&&Object.keys(r).length&&(i=mI(i,cw(e,r,t.changes.newLength),!0))}return i==t?t:Wn.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const cbe=[];function Yu(t){return t==null?cbe:Array.isArray(t)?t:[t]}var An=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(An||(An={}));const ube=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let uw;try{uw=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function dbe(t){if(uw)return uw.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||ube.test(n)))return!0}return!1}function hbe(t){return e=>{if(!/\S/.test(e))return An.Space;if(dbe(e))return An.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return An.Word;return An.Other}}class Vt{constructor(e,n,i,s,r,o){this.config=e,this.doc=n,this.selection=i,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=r,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)gf(this,a<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return gf(this,i),o0(this,i)}update(...e){return gI(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:s}=n;for(let a of e.effects)a.is(Rd.reconfigure)?(n&&(s=new Map,n.compartments.forEach((l,c)=>s.set(c,l)),n=null),s.set(a.value.compartment,a.value.extension)):a.is(ht.reconfigure)?(n=null,i=a.value):a.is(ht.appendConfig)&&(n=null,i=Yu(i).concat(a.value));let r;n?r=e.startState.values.slice():(n=r0.resolve(i,s,this),r=new Vt(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let o=e.startState.facet(lw)?e.newSelection:e.newSelection.asSingle();new Vt(n,e.newDoc,o,r,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:fe.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),s=this.changes(i.changes),r=[i.range],o=Yu(i.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),c=this.changes(l.changes),u=c.map(s);for(let p=0;p<a;p++)r[p]=r[p].map(u);let h=s.mapDesc(c,!0);r.push(l.range.map(h)),s=s.compose(u),o=ht.mapEffects(o,u).concat(ht.mapEffects(Yu(l.effects),h))}return{changes:s,selection:fe.create(r,n.mainIndex),effects:o}}changes(e=[]){return e instanceof ti?e:ti.of(e,this.doc.length,this.facet(Vt.lineSeparator))}toText(e){return Zt.of(e.split(this.facet(Vt.lineSeparator)||iw))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(gf(this,n),o0(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let s=e[i];s instanceof Pi&&this.config.address[s.id]!=null&&(n[i]=s.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(i){for(let r in i)if(Object.prototype.hasOwnProperty.call(e,r)){let o=i[r],a=e[r];s.push(o.init(l=>o.spec.fromJSON(a,l)))}}return Vt.create({doc:e.doc,selection:fe.fromJSON(e.selection),extensions:n.extensions?s.concat([n.extensions]):s})}static create(e={}){let n=r0.resolve(e.extensions||[],new Map),i=e.doc instanceof Zt?e.doc:Zt.of((e.doc||"").split(n.staticFacet(Vt.lineSeparator)||iw)),s=e.selection?e.selection instanceof fe?e.selection:fe.single(e.selection.anchor,e.selection.head):fe.single(0);return aI(s,i.length),n.staticFacet(lw)||(s=s.asSingle()),new Vt(n,i,s,n.dynamicSlots.map(()=>null),(r,o)=>o.create(r),null)}get tabSize(){return this.facet(Vt.tabSize)}get lineBreak(){return this.facet(Vt.lineSeparator)||`
`}get readOnly(){return this.facet(pI)}phrase(e,...n){for(let i of this.facet(Vt.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,s)=>{if(s=="$")return"$";let r=+(s||1);return!r||r>n.length?i:n[r-1]})),e}languageDataAt(e,n,i=-1){let s=[];for(let r of this.facet(cI))for(let o of r(this,n,i))Object.prototype.hasOwnProperty.call(o,e)&&s.push(o[e]);return s}charCategorizer(e){let n=this.languageDataAt("wordChars",e);return hbe(n.length?n[0]:"")}wordAt(e){let{text:n,from:i,length:s}=this.doc.lineAt(e),r=this.charCategorizer(e),o=e-i,a=e-i;for(;o>0;){let l=ci(n,o,!1);if(r(n.slice(l,o))!=An.Word)break;o=l}for(;a<s;){let l=ci(n,a);if(r(n.slice(a,l))!=An.Word)break;a=l}return o==a?null:fe.range(o+i,a+i)}}Vt.allowMultipleSelections=lw;Vt.tabSize=Ve.define({combine:t=>t.length?t[0]:4});Vt.lineSeparator=uI;Vt.readOnly=pI;Vt.phrases=Ve.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(s=>t[s]==e[s])}});Vt.languageData=cI;Vt.changeFilter=dI;Vt.transactionFilter=hI;Vt.transactionExtender=fI;Rd.reconfigure=ht.define();function Go(t,e,n={}){let i={};for(let s of t)for(let r of Object.keys(s)){let o=s[r],a=i[r];if(a===void 0)i[r]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,r))i[r]=n[r](a,o);else throw new Error("Config merge conflict for field "+r)}for(let s in e)i[s]===void 0&&(i[s]=e[s]);return i}class Rl{eq(e){return this==e}range(e,n=e){return dw.create(e,n,this)}}Rl.prototype.startSide=Rl.prototype.endSide=0;Rl.prototype.point=!1;Rl.prototype.mapMode=vi.TrackDel;function lA(t,e){return t==e||t.constructor==e.constructor&&t.eq(e)}let dw=class yI{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new yI(e,n,i)}};function hw(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class cA{constructor(e,n,i,s){this.from=e,this.to=n,this.value=i,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,s=0){let r=i?this.to:this.from;for(let o=s,a=r.length;;){if(o==a)return o;let l=o+a>>1,c=r[l]-e||(i?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,n,i,s){for(let r=this.findIndex(n,-1e9,!0),o=this.findIndex(i,1e9,!1,r);r<o;r++)if(s(this.from[r]+e,this.to[r]+e,this.value[r])===!1)return!1}map(e,n){let i=[],s=[],r=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,h=this.to[l]+e,p,m;if(u==h){let y=n.mapPos(u,c.startSide,c.mapMode);if(y==null||(p=m=y,c.startSide!=c.endSide&&(m=n.mapPos(u,c.endSide),m<p)))continue}else if(p=n.mapPos(u,c.startSide),m=n.mapPos(h,c.endSide),p>m||p==m&&c.startSide>0&&c.endSide<=0)continue;(m-p||c.endSide-c.startSide)<0||(o<0&&(o=p),c.point&&(a=Math.max(a,m-p)),i.push(c),s.push(p-o),r.push(m-o))}return{mapped:i.length?new cA(s,r,i,a):null,pos:o}}}class Mt{constructor(e,n,i,s){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=s}static create(e,n,i,s){return new Mt(e,n,i,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:s=0,filterTo:r=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(i&&(n=n.slice().sort(hw)),this.isEmpty)return n.length?Mt.of(n):this;let a=new OI(this,null,-1).goto(0),l=0,c=[],u=new La;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let h=n[l++];u.addInner(h.from,h.to,h.value)||c.push(h)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||s>this.chunkEnd(a.chunkIndex)||r<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||s>a.to||r<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||c.push(dw.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?Mt.empty:this.nextLayer.update({add:c,filter:o,filterFrom:s,filterTo:r}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],s=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)s=Math.max(s,l.maxPoint),n.push(l),i.push(e.mapPos(a));else if(c===!0){let{mapped:u,pos:h}=l.map(a,e);u&&(s=Math.max(s,u.maxPoint),n.push(u),i.push(h))}}let r=this.nextLayer.map(e);return n.length==0?r:new Mt(i,n,r||Mt.empty,s)}between(e,n,i){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let r=this.chunkPos[s],o=this.chunk[s];if(n>=r&&e<=r+o.length&&o.between(r,e-r,n-r,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return Hf.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Hf.from(e).goto(n)}static compare(e,n,i,s,r=-1){let o=e.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=r),a=n.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=r),l=y8(o,a,i),c=new Eh(o,l,r),u=new Eh(a,l,r);i.iterGaps((h,p,m)=>O8(c,h,u,p,m,s)),i.empty&&i.length==0&&O8(c,0,u,0,0,s)}static eq(e,n,i=0,s){s==null&&(s=999999999);let r=e.filter(u=>!u.isEmpty&&n.indexOf(u)<0),o=n.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(r.length!=o.length)return!1;if(!r.length)return!0;let a=y8(r,o),l=new Eh(r,a,0).goto(i),c=new Eh(o,a,0).goto(i);for(;;){if(l.to!=c.to||!fw(l.active,c.active)||l.point&&(!c.point||!lA(l.point,c.point)))return!1;if(l.to>s)return!0;l.next(),c.next()}}static spans(e,n,i,s,r=-1){let o=new Eh(e,null,r).goto(n),a=n,l=o.openStart;for(;;){let c=Math.min(o.to,i);if(o.point){let u=o.activeForPoint(o.to),h=o.pointFrom<n?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,l);s.point(a,c,o.point,u,h,o.pointRank),l=Math.min(o.openEnd(c),u.length)}else c>a&&(s.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>i)return l+(o.point&&o.to>i?1:0);a=o.to,o.next()}}static of(e,n=!1){let i=new La;for(let s of e instanceof dw?[e]:n?fbe(e):e)i.add(s.from,s.to,s.value);return i.finish()}static join(e){if(!e.length)return Mt.empty;let n=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let s=e[i];s!=Mt.empty;s=s.nextLayer)n=new Mt(s.chunkPos,s.chunk,n,Math.max(s.maxPoint,n.maxPoint));return n}}Mt.empty=new Mt([],[],null,-1);function fbe(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(hw(e,i)>0)return t.slice().sort(hw);e=i}return t}Mt.empty.nextLayer=Mt.empty;class La{finishChunk(e){this.chunks.push(new cA(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new La)).add(e,n,i)}addInner(e,n,i){let s=e-this.lastTo||i.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(Mt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=Mt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function y8(t,e,n){let i=new Map;for(let r of t)for(let o=0;o<r.chunk.length;o++)r.chunk[o].maxPoint<=0&&i.set(r.chunk[o],r.chunkPos[o]);let s=new Set;for(let r of e)for(let o=0;o<r.chunk.length;o++){let a=i.get(r.chunk[o]);a!=null&&(n?n.mapPos(a):a)==r.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+r.chunk[o].length))&&s.add(r.chunk[o])}return s}class OI{constructor(e,n,i,s=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Hf{constructor(e){this.heap=e}static from(e,n=null,i=-1){let s=[];for(let r=0;r<e.length;r++)for(let o=e[r];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&s.push(new OI(o,n,i,r));return s.length==1?s[0]:new Hf(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)i2(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)i2(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),i2(this.heap,0)}}}function i2(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let s=t[i];if(i+1<t.length&&s.compare(t[i+1])>=0&&(s=t[i+1],i++),n.compare(s)<0)break;t[i]=n,t[e]=s,e=i}}class Eh{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Hf.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){ug(this.active,e),ug(this.activeTo,e),ug(this.activeRank,e),this.minActive=b8(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:s,rank:r}=this.cursor;for(;n<this.activeRank.length&&(r-this.activeRank[n]||s-this.activeTo[n])>0;)n++;dg(this.active,n,i),dg(this.activeTo,n,s),dg(this.activeRank,n,r),e&&dg(e,n,this.cursor.from),this.minActive=b8(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),i&&ug(i,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let r=this.cursor.value;if(!r.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=r,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=r.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let s=i.length-1;s>=0&&i[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function O8(t,e,n,i,s,r){t.goto(e),n.goto(i);let o=i+s,a=i,l=i-e,c=!!r.boundChange;for(let u=!1;;){let h=t.to+l-n.to,p=h||t.endSide-n.endSide,m=p<0?t.to+l:n.to,y=Math.min(m,o);if(t.point||n.point?(t.point&&n.point&&lA(t.point,n.point)&&fw(t.activeForPoint(t.to),n.activeForPoint(n.to))||r.comparePoint(a,y,t.point,n.point),u=!1):(u&&r.boundChange(a),y>a&&!fw(t.active,n.active)&&r.compareRange(a,y,t.active,n.active),c&&y<o&&(h||t.openEnd(m)!=n.openEnd(m))&&(u=!0)),m>o)break;a=m,p<=0&&t.next(),p>=0&&n.next()}}function fw(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!lA(t[n],e[n]))return!1;return!0}function ug(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function dg(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function b8(t,e){let n=-1,i=1e9;for(let s=0;s<e.length;s++)(e[s]-i||t[s].endSide-t[n].endSide)<0&&(n=s,i=e[s]);return n}function ih(t,e,n=t.length){let i=0;for(let s=0;s<n&&s<t.length;)t.charCodeAt(s)==9?(i+=e-i%e,s++):(i++,s=ci(t,s));return i}function pw(t,e,n,i){for(let s=0,r=0;;){if(r>=e)return s;if(s==t.length)break;r+=t.charCodeAt(s)==9?n-r%n:1,s=ci(t,s)}return i===!0?-1:t.length}const mw="",v8=typeof Symbol>"u"?"__"+mw:Symbol.for(mw),gw=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),w8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class _l{constructor(e,n){this.rules=[];let{finish:i}=n||{};function s(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function r(o,a,l,c){let u=[],h=/^@(\w+)\b/.exec(o[0]),p=h&&h[1]=="keyframes";if(h&&a==null)return l.push(o[0]+";");for(let m in a){let y=a[m];if(/&/.test(m))r(m.split(/,\s*/).map(O=>o.map(S=>O.replace(/&/,S))).reduce((O,S)=>O.concat(S)),y,l);else if(y&&typeof y=="object"){if(!h)throw new RangeError("The value of a property ("+m+") should be a primitive value.");r(s(m),y,u,p)}else y!=null&&u.push(m.replace(/_.*/,"").replace(/[A-Z]/g,O=>"-"+O.toLowerCase())+": "+y+";")}(u.length||p)&&l.push((i&&!h&&!c?o.map(i):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)r(s(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=w8[v8]||1;return w8[v8]=e+1,mw+e.toString(36)}static mount(e,n,i){let s=e[gw],r=i&&i.nonce;s?r&&s.setNonce(r):s=new pbe(e,r),s.mount(Array.isArray(n)?n:[n],e)}}let S8=new Map;class pbe{constructor(e,n){let i=e.ownerDocument||e,s=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&s.CSSStyleSheet){let r=S8.get(i);if(r)return e[gw]=r;this.sheet=new s.CSSStyleSheet,S8.set(i,this)}else this.styleTag=i.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[gw]=this}mount(e,n){let i=this.sheet,s=0,r=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<r&&l>-1&&(this.modules.splice(l,1),r--,l=-1),l==-1){if(this.modules.splice(r++,0,a),i)for(let c=0;c<a.rules.length;c++)i.insertRule(a.rules[c],s++)}else{for(;r<l;)s+=this.modules[r++].rules.length;s+=a.rules.length,r++}}if(i)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=n.head||n;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var El={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Yf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mbe=typeof navigator<"u"&&/Mac/.test(navigator.platform),gbe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Oi=0;Oi<10;Oi++)El[48+Oi]=El[96+Oi]=String(Oi);for(var Oi=1;Oi<=24;Oi++)El[Oi+111]="F"+Oi;for(var Oi=65;Oi<=90;Oi++)El[Oi]=String.fromCharCode(Oi+32),Yf[Oi]=String.fromCharCode(Oi);for(var s2 in El)Yf.hasOwnProperty(s2)||(Yf[s2]=El[s2]);function ybe(t){var e=mbe&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||gbe&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Yf:El)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function on(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var s=n[i];typeof s=="string"?t.setAttribute(i,s):s!=null&&(t[i]=s)}e++}for(;e<arguments.length;e++)bI(t,arguments[e]);return t}function bI(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)bI(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}let Hi=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},yw=typeof document<"u"?document:{documentElement:{style:{}}};const Ow=/Edge\/(\d+)/.exec(Hi.userAgent),vI=/MSIE \d/.test(Hi.userAgent),bw=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Hi.userAgent),q1=!!(vI||bw||Ow),C8=!q1&&/gecko\/(\d+)/i.test(Hi.userAgent),r2=!q1&&/Chrome\/(\d+)/.exec(Hi.userAgent),Obe="webkitFontSmoothing"in yw.documentElement.style,vw=!q1&&/Apple Computer/.test(Hi.vendor),A8=vw&&(/Mobile\/\w+/.test(Hi.userAgent)||Hi.maxTouchPoints>2);var je={mac:A8||/Mac/.test(Hi.platform),windows:/Win/.test(Hi.platform),linux:/Linux|X11/.test(Hi.platform),ie:q1,ie_version:vI?yw.documentMode||6:bw?+bw[1]:Ow?+Ow[1]:0,gecko:C8,gecko_version:C8?+(/Firefox\/(\d+)/.exec(Hi.userAgent)||[0,0])[1]:0,chrome:!!r2,chrome_version:r2?+r2[1]:0,ios:A8,android:/Android\b/.test(Hi.userAgent),webkit_version:Obe?+(/\bAppleWebKit\/(\d+)/.exec(Hi.userAgent)||[0,0])[1]:0,safari:vw,safari_version:vw?+(/\bVersion\/(\d+(\.\d+)?)/.exec(Hi.userAgent)||[0,0])[1]:0,tabSize:yw.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function uA(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const a0=Object.create(null);function dA(t,e,n){if(t==e)return!0;t||(t=a0),e||(e=a0);let i=Object.keys(t),s=Object.keys(e);if(i.length-0!=s.length-0)return!1;for(let r of i)if(r!=n&&(s.indexOf(r)==-1||t[r]!==e[r]))return!1;return!0}function bbe(t,e){for(let n=t.attributes.length-1;n>=0;n--){let i=t.attributes[n].name;e[i]==null&&t.removeAttribute(i)}for(let n in e){let i=e[n];n=="style"?t.style.cssText=i:t.getAttribute(n)!=i&&t.setAttribute(n,i)}}function x8(t,e,n){let i=!1;if(e)for(let s in e)n&&s in n||(i=!0,s=="style"?t.style.cssText="":t.removeAttribute(s));if(n)for(let s in n)e&&e[s]==n[s]||(i=!0,s=="style"?t.style.cssText=n[s]:t.setAttribute(s,n[s]));return i}function vbe(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class Uo{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Ci=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(Ci||(Ci={}));class et extends Rl{constructor(e,n,i,s){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=s}get heightRelevant(){return!1}static mark(e){return new jp(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new Vc(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,s;if(e.isBlockGap)i=-5e8,s=4e8;else{let{start:r,end:o}=wI(e,n);i=(r?n?-3e8:-1:5e8)-1,s=(o?n?2e8:1:-6e8)+1}return new Vc(e,i,s,n,e.widget||null,!0)}static line(e){return new zp(e)}static set(e,n=!1){return Mt.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}et.none=Mt.empty;class jp extends et{constructor(e){let{start:n,end:i}=wI(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.attrs=e.class&&e.attributes?uA(e.attributes,{class:e.class}):e.class?{class:e.class}:e.attributes||a0}eq(e){return this==e||e instanceof jp&&this.tagName==e.tagName&&dA(this.attrs,e.attrs)}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}jp.prototype.point=!1;class zp extends et{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof zp&&this.spec.class==e.spec.class&&dA(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}zp.prototype.mapMode=vi.TrackBefore;zp.prototype.point=!0;class Vc extends et{constructor(e,n,i,s,r,o){super(n,i,r,e),this.block=s,this.isReplace=o,this.mapMode=s?n<=0?vi.TrackBefore:vi.TrackAfter:vi.TrackDel}get type(){return this.startSide!=this.endSide?Ci.WidgetRange:this.startSide<=0?Ci.WidgetBefore:Ci.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Vc&&wbe(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}Vc.prototype.point=!0;function wI(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function wbe(t,e){return t==e||!!(t&&e&&t.compare(e))}function Ku(t,e,n,i=0){let s=n.length-1;s>=0&&n[s]+i>=t?n[s]=Math.max(n[s],e):n.push(t,e)}class Kf extends Rl{constructor(e,n){super(),this.tagName=e,this.attributes=n}eq(e){return e==this||e instanceof Kf&&this.tagName==e.tagName&&dA(this.attributes,e.attributes)}static create(e){return new Kf(e.tagName,e.attributes||a0)}static set(e,n=!1){return Mt.of(e,n)}}Kf.prototype.startSide=Kf.prototype.endSide=-1;function Jf(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function ww(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function yf(t,e){if(!e.anchorNode)return!1;try{return ww(t,e.anchorNode)}catch{return!1}}function ty(t){return t.nodeType==3?ep(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function Of(t,e,n,i){return n?k8(t,e,n,i,-1)||k8(t,e,n,i,1):!1}function Ql(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function l0(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function k8(t,e,n,i,s){for(;;){if(t==n&&e==i)return!0;if(e==(s<0?0:Fa(t))){if(t.nodeName=="DIV")return!1;let r=t.parentNode;if(!r||r.nodeType!=1)return!1;e=Ql(t)+(s<0?0:1),t=r}else if(t.nodeType==1){if(t=t.childNodes[e+(s<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=s<0?Fa(t):0}else return!1}}function Fa(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function c0(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function Sbe(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function SI(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}function Cbe(t,e,n,i,s,r,o,a){let l=t.ownerDocument,c=l.defaultView||window;for(let u=t,h=!1;u&&!h;)if(u.nodeType==1){let p,m=u==l.body,y=1,O=1;if(m)p=Sbe(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(h=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let T=u.getBoundingClientRect();({scaleX:y,scaleY:O}=SI(u,T)),p={left:T.left,right:T.left+u.clientWidth*y,top:T.top,bottom:T.top+u.clientHeight*O}}let S=0,x=0;if(s=="nearest")e.top<p.top?(x=e.top-(p.top+o),n>0&&e.bottom>p.bottom+x&&(x=e.bottom-p.bottom+o)):e.bottom>p.bottom&&(x=e.bottom-p.bottom+o,n<0&&e.top-x<p.top&&(x=e.top-(p.top+o)));else{let T=e.bottom-e.top,k=p.bottom-p.top;x=(s=="center"&&T<=k?e.top+T/2-k/2:s=="start"||s=="center"&&n<0?e.top-o:e.bottom-k+o)-p.top}if(i=="nearest"?e.left<p.left?(S=e.left-(p.left+r),n>0&&e.right>p.right+S&&(S=e.right-p.right+r)):e.right>p.right&&(S=e.right-p.right+r,n<0&&e.left<p.left+S&&(S=e.left-(p.left+r))):S=(i=="center"?e.left+(e.right-e.left)/2-(p.right-p.left)/2:i=="start"==a?e.left-r:e.right-(p.right-p.left)+r)-p.left,S||x)if(m)c.scrollBy(S,x);else{let T=0,k=0;if(x){let D=u.scrollTop;u.scrollTop+=x/O,k=(u.scrollTop-D)*O}if(S){let D=u.scrollLeft;u.scrollLeft+=S/y,T=(u.scrollLeft-D)*y}e={left:e.left-T,top:e.top-k,right:e.right-T,bottom:e.bottom-k},T&&Math.abs(T-S)<1&&(i="nearest"),k&&Math.abs(k-x)<1&&(s="nearest")}if(m)break;(e.top<p.top||e.bottom>p.bottom||e.left<p.left||e.right>p.right)&&(e={left:Math.max(e.left,p.left),right:Math.min(e.right,p.right),top:Math.max(e.top,p.top),bottom:Math.min(e.bottom,p.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function Abe(t){let e=t.ownerDocument,n,i;for(let s=t.parentNode;s&&!(s==e.body||n&&i);)if(s.nodeType==1)!i&&s.scrollHeight>s.clientHeight&&(i=s),!n&&s.scrollWidth>s.clientWidth&&(n=s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;return{x:n,y:i}}class xbe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?Fa(n):0),i,Math.min(e.focusOffset,i?Fa(i):0))}set(e,n,i,s){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=s}}let uc=null;je.safari&&je.safari_version>=26&&(uc=!1);function CI(t){if(t.setActive)return t.setActive();if(uc)return t.focus(uc);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(uc==null?{get preventScroll(){return uc={preventScroll:!0},!0}}:void 0),!uc){uc=!1;for(let n=0;n<e.length;){let i=e[n++],s=e[n++],r=e[n++];i.scrollTop!=s&&(i.scrollTop=s),i.scrollLeft!=r&&(i.scrollLeft=r)}}}let P8;function ep(t,e,n=e){let i=P8||(P8=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function Ju(t,e,n,i){let s={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=i);let r=new KeyboardEvent("keydown",s);r.synthetic=!0,t.dispatchEvent(r);let o=new KeyboardEvent("keyup",s);return o.synthetic=!0,t.dispatchEvent(o),r.defaultPrevented||o.defaultPrevented}function kbe(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function Pbe(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,Fa(n));;)if(i){if(n.nodeType!=1)return!1;let s=n.childNodes[i-1];s.contentEditable=="false"?i--:(n=s,i=Fa(n))}else{if(n==t)return!0;i=Ql(n),n=n.parentNode}}function AI(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function xI(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i>0)return{node:n,offset:i};if(n.nodeType==1&&i>0){if(n.contentEditable=="false")return null;n=n.childNodes[i-1],i=Fa(n)}else if(n.parentNode&&!l0(n))i=Ql(n),n=n.parentNode;else return null}}function kI(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i<n.nodeValue.length)return{node:n,offset:i};if(n.nodeType==1&&i<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[i],i=0}else if(n.parentNode&&!l0(n))i=Ql(n)+1,n=n.parentNode;else return null}}class Yr{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new Yr(e.parentNode,Ql(e),n)}static after(e,n){return new Yr(e.parentNode,Ql(e)+1,n)}}var un=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(un||(un={}));const jc=un.LTR,hA=un.RTL;function PI(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const Tbe=PI("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),$be=PI("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Sw=Object.create(null),vo=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);Sw[e]=n,Sw[n]=-e}function TI(t){return t<=247?Tbe[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?$be[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const Dbe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Eo{get dir(){return this.level%2?hA:jc}constructor(e,n,i){this.from=e,this.to=n,this.level=i}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,i,s){let r=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==i)return o;(r<0||(s!=0?s<0?a.from<n:a.to>n:e[r].level>a.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}}function $I(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],s=e[n];if(i.from!=s.from||i.to!=s.to||i.direction!=s.direction||!$I(i.inner,s.inner))return!1}return!0}const cn=[];function Mbe(t,e,n,i,s){for(let r=0;r<=i.length;r++){let o=r?i[r-1].to:e,a=r<i.length?i[r].from:n,l=r?256:s;for(let c=o,u=l,h=l;c<a;c++){let p=TI(t.charCodeAt(c));p==512?p=u:p==8&&h==4&&(p=16),cn[c]=p==4?2:p,p&7&&(h=p),u=p}for(let c=o,u=l,h=l;c<a;c++){let p=cn[c];if(p==128)c<a-1&&u==cn[c+1]&&u&24?p=cn[c]=u:cn[c]=256;else if(p==64){let m=c+1;for(;m<a&&cn[m]==64;)m++;let y=c&&u==8||m<n&&cn[m]==8?h==1?1:8:256;for(let O=c;O<m;O++)cn[O]=y;c=m-1}else p==8&&h==1&&(cn[c]=1);u=p,p&7&&(h=p)}}}function Ibe(t,e,n,i,s){let r=s==1?2:1;for(let o=0,a=0,l=0;o<=i.length;o++){let c=o?i[o-1].to:e,u=o<i.length?i[o].from:n;for(let h=c,p,m,y;h<u;h++)if(m=Sw[p=t.charCodeAt(h)])if(m<0){for(let O=a-3;O>=0;O-=3)if(vo[O+1]==-m){let S=vo[O+2],x=S&2?s:S&4?S&1?r:s:0;x&&(cn[h]=cn[vo[O]]=x),a=O;break}}else{if(vo.length==189)break;vo[a++]=h,vo[a++]=p,vo[a++]=l}else if((y=cn[h])==2||y==1){let O=y==s;l=O?0:1;for(let S=a-3;S>=0;S-=3){let x=vo[S+2];if(x&2)break;if(O)vo[S+2]|=2;else{if(x&4)break;vo[S+2]|=4}}}}}function Rbe(t,e,n,i){for(let s=0,r=i;s<=n.length;s++){let o=s?n[s-1].to:t,a=s<n.length?n[s].from:e;for(let l=o;l<a;){let c=cn[l];if(c==256){let u=l+1;for(;;)if(u==a){if(s==n.length)break;u=n[s++].to,a=s<n.length?n[s].from:e}else if(cn[u]==256)u++;else break;let h=r==1,p=(u<e?cn[u]:i)==1,m=h==p?h?1:2:i;for(let y=u,O=s,S=O?n[O-1].to:t;y>l;)y==S&&(y=n[--O].from,S=O?n[O-1].to:t),cn[--y]=m;l=u}else r=c,l++}}}function Cw(t,e,n,i,s,r,o){let a=i%2?2:1;if(i%2==s%2)for(let l=e,c=0;l<n;){let u=!0,h=!1;if(c==r.length||l<r[c].from){let O=cn[l];O!=a&&(u=!1,h=O==16)}let p=!u&&a==1?[]:null,m=u?i:i+1,y=l;e:for(;;)if(c<r.length&&y==r[c].from){if(h)break e;let O=r[c];if(!u)for(let S=O.to,x=c+1;;){if(S==n)break e;if(x<r.length&&r[x].from==S)S=r[x++].to;else{if(cn[S]==a)break e;break}}if(c++,p)p.push(O);else{O.from>l&&o.push(new Eo(l,O.from,m));let S=O.direction==jc!=!(m%2);Aw(t,S?i+1:i,s,O.inner,O.from,O.to,o),l=O.to}y=O.to}else{if(y==n||(u?cn[y]!=a:cn[y]==a))break;y++}p?Cw(t,l,y,i+1,s,p,o):l<y&&o.push(new Eo(l,y,m)),l=y}else for(let l=n,c=r.length;l>e;){let u=!0,h=!1;if(!c||l>r[c-1].to){let O=cn[l-1];O!=a&&(u=!1,h=O==16)}let p=!u&&a==1?[]:null,m=u?i:i+1,y=l;e:for(;;)if(c&&y==r[c-1].to){if(h)break e;let O=r[--c];if(!u)for(let S=O.from,x=c;;){if(S==e)break e;if(x&&r[x-1].to==S)S=r[--x].from;else{if(cn[S-1]==a)break e;break}}if(p)p.push(O);else{O.to<l&&o.push(new Eo(O.to,l,m));let S=O.direction==jc!=!(m%2);Aw(t,S?i+1:i,s,O.inner,O.from,O.to,o),l=O.from}y=O.from}else{if(y==e||(u?cn[y-1]!=a:cn[y-1]==a))break;y--}p?Cw(t,y,l,i+1,s,p,o):y<l&&o.push(new Eo(y,l,m)),l=y}}function Aw(t,e,n,i,s,r,o){let a=e%2?2:1;Mbe(t,s,r,i,a),Ibe(t,s,r,i,a),Rbe(s,r,i,a),Cw(t,s,r,e,n,i,o)}function _be(t,e,n){if(!t)return[new Eo(0,0,e==hA?1:0)];if(e==jc&&!n.length&&!Dbe.test(t))return DI(t.length);if(n.length)for(;t.length>cn.length;)cn[cn.length]=256;let i=[],s=e==jc?0:1;return Aw(t,s,s,n,0,t.length,i),i}function DI(t){return[new Eo(0,t,0)]}let MI="";function Ebe(t,e,n,i,s){var r;let o=i.head-t.from,a=Eo.find(e,o,(r=i.bidiLevel)!==null&&r!==void 0?r:-1,i.assoc),l=e[a],c=l.side(s,n);if(o==c){let p=a+=s?1:-1;if(p<0||p>=e.length)return null;l=e[a=p],o=l.side(!s,n),c=l.side(s,n)}let u=ci(t.text,o,l.forward(s,n));(u<l.from||u>l.to)&&(u=c),MI=t.text.slice(Math.min(o,u),Math.max(o,u));let h=a==(s?e.length-1:0)?null:e[a+(s?1:-1)];return h&&u==c&&h.level+(s?0:1)<l.level?fe.cursor(h.side(!s,n)+t.from,h.forward(s,n)?1:-1,h.level):fe.cursor(u+t.from,l.forward(s,n)?-1:1,l.level)}function Qbe(t,e,n){for(let i=e;i<n;i++){let s=TI(t.charCodeAt(i));if(s==1)return jc;if(s==2||s==4)return hA}return jc}const II=Ve.define(),RI=Ve.define(),_I=Ve.define(),EI=Ve.define(),xw=Ve.define(),QI=Ve.define(),NI=Ve.define(),fA=Ve.define(),pA=Ve.define(),LI=Ve.define({combine:t=>t.some(e=>e)}),FI=Ve.define({combine:t=>t.some(e=>e)}),BI=Ve.define();class ed{constructor(e,n="nearest",i="nearest",s=5,r=5,o=!1){this.range=e,this.y=n,this.x=i,this.yMargin=s,this.xMargin=r,this.isSnapshot=o}map(e){return e.empty?this:new ed(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ed(fe.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const hg=ht.define({map:(t,e)=>t.map(e)}),VI=ht.define();function As(t,e,n){let i=t.facet(EI);i.length?i[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const va=Ve.define({combine:t=>t.length?t[0]:!0});let Nbe=0;const Qu=Ve.define({combine(t){return t.filter((e,n)=>{for(let i=0;i<n;i++)if(t[i].plugin==e.plugin)return!1;return!0})}});class zn{constructor(e,n,i,s,r){this.id=e,this.create=n,this.domEventHandlers=i,this.domEventObservers=s,this.baseExtensions=r(this),this.extension=this.baseExtensions.concat(Qu.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Qu.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:i,eventObservers:s,provide:r,decorations:o}=n||{};return new zn(Nbe++,e,i,s,a=>{let l=[];return o&&l.push(X1.of(c=>{let u=c.plugin(a);return u?o(u):et.none})),r&&l.push(r(a)),l})}static fromClass(e,n){return zn.define((i,s)=>new e(i,s),n)}}class o2{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(As(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){As(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){As(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const jI=Ve.define(),mA=Ve.define(),X1=Ve.define(),zI=Ve.define(),gA=Ve.define(),Zp=Ve.define(),ZI=Ve.define();function T8(t,e){let n=t.state.facet(ZI);if(!n.length)return n;let i=n.map(r=>r instanceof Function?r(t):r),s=[];return Mt.spans(i,e.from,e.to,{point(){},span(r,o,a,l){let c=r-e.from,u=o-e.from,h=s;for(let p=a.length-1;p>=0;p--,l--){let m=a[p].spec.bidiIsolate,y;if(m==null&&(m=Qbe(e.text,c,u)),l>0&&h.length&&(y=h[h.length-1]).to==c&&y.direction==m)y.to=u,h=y.inner;else{let O={from:c,to:u,direction:m,inner:[]};h.push(O),h=O.inner}}}}),s}const qI=Ve.define();function yA(t){let e=0,n=0,i=0,s=0;for(let r of t.state.facet(qI)){let o=r(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(s=Math.max(s,o.bottom)))}return{left:e,right:n,top:i,bottom:s}}const Uh=Ve.define();class xr{constructor(e,n,i,s){this.fromA=e,this.toA=n,this.fromB=i,this.toB=s}join(e){return new xr(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let s=e[n-1];if(!(s.fromA>i.toA)){if(s.toA<i.fromA)break;i=i.join(s),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let s=0,r=0,o=0;;){let a=s<e.length?e[s].fromB:1e9,l=r<n.length?n[r]:1e9,c=Math.min(a,l);if(c==1e9)break;let u=c+o,h=c,p=u;for(;;)if(r<n.length&&n[r]<=h){let m=n[r+1];r+=2,h=Math.max(h,m);for(let y=s;y<e.length&&e[y].fromB<=h;y++)o=e[y].toA-e[y].toB;p=Math.max(p,m+o)}else if(s<e.length&&e[s].fromB<=h){let m=e[s++];h=Math.max(h,m.toB),p=Math.max(p,m.toA),o=m.toA-m.toB}else break;i.push(new xr(u,p,c,h))}return i}}class u0{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=ti.empty(this.startState.doc.length);for(let r of i)this.changes=this.changes.compose(r.changes);let s=[];this.changes.iterChangedRanges((r,o,a,l)=>s.push(new xr(r,o,a,l))),this.changedRanges=s}static create(e,n,i){return new u0(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}const Lbe=[];class Un{constructor(e,n,i=0){this.dom=e,this.length=n,this.flags=i,this.parent=null,e.cmTile=this}get breakAfter(){return this.flags&1}get children(){return Lbe}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(e){if(this.flags|=2,this.flags&4){this.flags&=-5;let n=this.domAttrs;n&&bbe(this.dom,n)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(e){this.dom=e,e.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e,n=this.posAtStart){let i=n;for(let s of this.children){if(s==e)return i;i+=s.length+s.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}covers(e){return!0}coordsIn(e,n){return null}domPosFor(e,n){let i=Ql(this.dom),s=this.length?e>0:n>0;return new Yr(this.parent.dom,i+(s?1:0),e==0||e==this.length)}markDirty(e){this.flags&=-3,e&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let e=this;e;e=e.parent)if(e instanceof G1)return e;return null}static get(e){return e.cmTile}}class W1 extends Un{constructor(e){super(e,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(e){this.children.push(e),e.parent=this}sync(e){if(this.flags&2)return;super.sync(e);let n=this.dom,i=null,s,r=(e==null?void 0:e.node)==n?e:null,o=0;for(let a of this.children){if(a.sync(e),o+=a.length+a.breakAfter,s=i?i.nextSibling:n.firstChild,r&&s!=a.dom&&(r.written=!0),a.dom.parentNode==n)for(;s&&s!=a.dom;)s=$8(s);else n.insertBefore(a.dom,s);i=a.dom}for(s=i?i.nextSibling:n.firstChild,r&&s&&(r.written=!0);s;)s=$8(s);this.length=o}}function $8(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class G1 extends W1{constructor(e,n){super(n),this.view=e}owns(e){for(;e;e=e.parent)if(e==this)return!0;return!1}isBlock(){return!0}nearest(e){for(;;){if(!e)return null;let n=Un.get(e);if(n&&this.owns(n))return n;e=e.parentNode}}blockTiles(e){for(let n=[],i=this,s=0,r=0;;)if(s==i.children.length){if(!n.length)return;i=i.parent,i.breakAfter&&r++,s=n.pop()}else{let o=i.children[s++];if(o instanceof Pa)n.push(s),i=o,s=0;else{let a=r+o.length,l=e(o,r);if(l!==void 0)return l;r=a+o.breakAfter}}}resolveBlock(e,n){let i,s=-1,r,o=-1;if(this.blockTiles((a,l)=>{let c=l+a.length;if(e>=l&&e<=c){if(a.isWidget()&&n>=-1&&n<=1){if(a.flags&32)return!0;a.flags&16&&(i=void 0)}(l<e||e==c&&(n<-1?a.length:a.covers(1)))&&(!i||!a.isWidget()&&i.isWidget())&&(i=a,s=e-l),(c>e||e==l&&(n>1?a.length:a.covers(-1)))&&(!r||!a.isWidget()&&r.isWidget())&&(r=a,o=e-l)}}),!i&&!r)throw new Error("No tile at position "+e);return i&&n<0||!r?{tile:i,offset:s}:{tile:r,offset:o}}}class Pa extends W1{constructor(e,n){super(e),this.wrapper=n}isBlock(){return!0}covers(e){return this.children.length?e<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(e,n){let i=new Pa(n||document.createElement(e.tagName),e);return n||(i.flags|=4),i}}class _d extends W1{constructor(e,n){super(e),this.attrs=n}isLine(){return!0}static start(e,n,i){let s=new _d(n||document.createElement("div"),e);return(!n||!i)&&(s.flags|=4),s}get domAttrs(){return this.attrs}resolveInline(e,n,i){let s=null,r=-1,o=null,a=-1;function l(u,h){for(let p=0,m=0;p<u.children.length&&m<=h;p++){let y=u.children[p],O=m+y.length;O>=h&&(y.isComposite()?l(y,h-m):(!o||o.isHidden&&(n>0||i&&Bbe(o,y)))&&(O>h||y.flags&32)?(o=y,a=h-m):(m<h||y.flags&16&&!y.isHidden)&&(s=y,r=h-m)),m=O}}l(this,e);let c=(n<0?s:o)||s||o;return c?{tile:c,offset:c==s?r:a}:null}coordsIn(e,n){let i=this.resolveInline(e,n,!0);return i?i.tile.coordsIn(Math.max(0,i.offset),n):Fbe(this)}domIn(e,n){let i=this.resolveInline(e,n);if(i){let{tile:s,offset:r}=i;if(this.dom.contains(s.dom))return s.isText()?new Yr(s.dom,Math.min(s.dom.nodeValue.length,r)):s.domPosFor(r,s.flags&16?1:s.flags&32?-1:n);let o=i.tile.parent,a=!1;for(let l of o.children){if(a)return new Yr(l.dom,0);l==i.tile&&(a=!0)}}return new Yr(this.dom,0)}}function Fbe(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=ty(e);return n[n.length-1]||null}function Bbe(t,e){let n=t.coordsIn(0,1),i=e.coordsIn(0,1);return n&&i&&i.top<n.bottom}class ws extends W1{constructor(e,n){super(e),this.mark=n}get domAttrs(){return this.mark.attrs}static of(e,n){let i=new ws(n||document.createElement(e.tagName),e);return n||(i.flags|=4),i}}class Oc extends Un{constructor(e,n){super(e,n.length),this.text=n}sync(e){this.flags&2||(super.sync(e),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(e,n){let i=this.dom.nodeValue.length;e>i&&(e=i);let s=e,r=e,o=0;e==0&&n<0||e==i&&n>=0?je.chrome||je.gecko||(e?(s--,o=1):r<i&&(r++,o=-1)):n<0?s--:r<i&&r++;let a=ep(this.dom,s,r).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return je.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?c0(l,o<0):l||null}static of(e,n){let i=new Oc(n||document.createTextNode(e),e);return n||(i.flags|=2),i}}class zc extends Un{constructor(e,n,i,s){super(e,n,s),this.widget=i}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(e){return this.flags&48?!1:(this.flags&(e<0?64:128))>0}coordsIn(e,n){return this.coordsInWidget(e,n,!1)}coordsInWidget(e,n,i){let s=this.widget.coordsAt(this.dom,e,n);if(s)return s;if(i)return c0(this.dom.getBoundingClientRect(),this.length?e==0:n<=0);{let r=this.dom.getClientRects(),o=null;if(!r.length)return null;let a=this.flags&16?!0:this.flags&32?!1:e>0;for(let l=a?r.length-1:0;o=r[l],!(e>0?l==0:l==r.length-1||o.top<o.bottom);l+=a?-1:1);return c0(o,!a)}}get overrideDOMText(){if(!this.length)return Zt.empty;let{root:e}=this;if(!e)return Zt.empty;let n=this.posAtStart;return e.view.state.doc.slice(n,n+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(e,n,i,s,r){return r||(r=e.toDOM(n),e.editable||(r.contentEditable="false")),new zc(r,i,e,s)}}class d0 extends Un{constructor(e){let n=document.createElement("img");n.className="cm-widgetBuffer",n.setAttribute("aria-hidden","true"),super(n,0,e)}get isHidden(){return!0}get overrideDOMText(){return Zt.empty}coordsIn(e){return this.dom.getBoundingClientRect()}}class Vbe{constructor(e){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=e}advance(e,n,i){let{tile:s,index:r,beforeBreak:o,parents:a}=this;for(;e||n>0;)if(s.isComposite())if(o){if(!e)break;i&&i.break(),e--,o=!1}else if(r==s.children.length){if(!e&&!a.length)break;i&&i.leave(s),o=!!s.breakAfter,{tile:s,index:r}=a.pop(),r++}else{let l=s.children[r],c=l.breakAfter;(n>0?l.length<=e:l.length<e)&&(!i||i.skip(l,0,l.length)!==!1||!l.isComposite)?(o=!!c,r++,e-=l.length):(a.push({tile:s,index:r}),s=l,r=0,i&&l.isComposite()&&i.enter(l))}else if(r==s.length)o=!!s.breakAfter,{tile:s,index:r}=a.pop(),r++;else if(e){let l=Math.min(e,s.length-r);i&&i.skip(s,r,r+l),e-=l,r+=l}else break;return this.tile=s,this.index=r,this.beforeBreak=o,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class jbe{constructor(e,n,i,s){this.from=e,this.to=n,this.wrapper=i,this.rank=s}}class zbe{constructor(e,n,i){this.cache=e,this.root=n,this.blockWrappers=i,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(e,n,i,s){var r;this.flushBuffer();let o=this.ensureMarks(n,i),a=o.lastChild;if(a&&a.isText()&&!(a.flags&8)&&a.length+e.length<512){this.cache.reused.set(a,2);let l=o.children[o.children.length-1]=new Oc(a.dom,a.text+e);l.parent=o}else o.append(s||Oc.of(e,(r=this.cache.find(Oc))===null||r===void 0?void 0:r.dom));this.pos+=e.length,this.afterWidget=null}addComposition(e,n){let i=this.curLine;i.dom!=n.line.dom&&(i.setDOM(this.cache.reused.has(n.line)?a2(n.line.dom):n.line.dom),this.cache.reused.set(n.line,2));let s=i;for(let a=n.marks.length-1;a>=0;a--){let l=n.marks[a],c=s.lastChild;if(c instanceof ws&&c.mark.eq(l.mark))c.dom!=l.dom&&c.setDOM(a2(l.dom)),s=c;else{if(this.cache.reused.get(l)){let h=Un.get(l.dom);h&&h.setDOM(a2(l.dom))}let u=ws.of(l.mark,l.dom);s.append(u),s=u}this.cache.reused.set(l,2)}let r=Un.get(e.text);r&&this.cache.reused.set(r,2);let o=new Oc(e.text,e.text.nodeValue);o.flags|=8,s.append(o)}addInlineWidget(e,n,i){let s=this.afterWidget&&e.flags&48&&(this.afterWidget.flags&48)==(e.flags&48);s||this.flushBuffer();let r=this.ensureMarks(n,i);!s&&!(e.flags&16)&&r.append(this.getBuffer(1)),r.append(e),this.pos+=e.length,this.afterWidget=e}addMark(e,n,i){this.flushBuffer(),this.ensureMarks(n,i).append(e),this.pos+=e.length,this.afterWidget=null}addBlockWidget(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}continueWidget(e){let n=this.afterWidget||this.lastBlock;n.length+=e,this.pos+=e}addLineStart(e,n){var i;e||(e=XI);let s=_d.start(e,n||((i=this.cache.find(_d))===null||i===void 0?void 0:i.dom),!!n);this.getBlockPos().append(this.lastBlock=this.curLine=s)}addLine(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(e){this.blockPosCovered()||this.addLineStart(e)}ensureLine(e){this.curLine||this.addLineStart(e)}ensureMarks(e,n){var i;let s=this.curLine;for(let r=e.length-1;r>=0;r--){let o=e[r],a;if(n>0&&(a=s.lastChild)&&a instanceof ws&&a.mark.eq(o))s=a,n--;else{let l=ws.of(o,(i=this.cache.find(ws,c=>c.mark.eq(o)))===null||i===void 0?void 0:i.dom);s.append(l),s=l,n=0}}return s}endLine(){if(this.curLine){this.flushBuffer();let e=this.curLine.lastChild;(!e||!D8(this.curLine,!1)||e.dom.nodeName!="BR"&&e.isWidget()&&!(je.ios&&D8(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget(l2,0,32)||new zc(l2.toDOM(),0,l2,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let e=this.wrappers.length-1;e>=0;e--)this.wrappers[e].to<this.pos&&this.wrappers.splice(e,1);for(let e=this.blockWrappers;e.value&&e.from<=this.pos;e.next())if(e.to>=this.pos){let n=new jbe(e.from,e.to,e.value,e.rank),i=this.wrappers.length;for(;i>0&&(this.wrappers[i-1].rank-n.rank||this.wrappers[i-1].to-n.to)<0;)i--;this.wrappers.splice(i,0,n)}this.wrapperPos=this.pos}getBlockPos(){var e;this.updateBlockWrappers();let n=this.root;for(let i of this.wrappers){let s=n.lastChild;if(i.from<this.pos&&s instanceof Pa&&s.wrapper.eq(i.wrapper))n=s;else{let r=Pa.of(i.wrapper,(e=this.cache.find(Pa,o=>o.wrapper.eq(i.wrapper)))===null||e===void 0?void 0:e.dom);n.append(r),n=r}}return n}blockPosCovered(){let e=this.lastBlock;return e!=null&&!e.breakAfter&&(!e.isWidget()||(e.flags&160)>0)}getBuffer(e){let n=2|(e<0?16:32),i=this.cache.find(d0,void 0,1);return i&&(i.flags=n),i||new d0(n)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}}class Zbe{constructor(e){this.skipCount=0,this.text="",this.textOff=0,this.cursor=e.iter()}skip(e){this.textOff+e<=this.text.length?this.textOff+=e:(this.skipCount+=e-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(e){if(this.textOff==this.text.length){let{value:s,lineBreak:r,done:o}=this.cursor.next(this.skipCount);if(this.skipCount=0,o)throw new Error("Ran out of text content when drawing inline views");this.text=s;let a=this.textOff=Math.min(e,s.length);return r?null:s.slice(0,a)}let n=Math.min(this.text.length,this.textOff+e),i=this.text.slice(this.textOff,n);return this.textOff=n,i}}const h0=[zc,_d,Oc,ws,d0,Pa,G1];for(let t=0;t<h0.length;t++)h0[t].bucket=t;class qbe{constructor(e){this.view=e,this.buckets=h0.map(()=>[]),this.index=h0.map(()=>0),this.reused=new Map}add(e){let n=e.constructor.bucket,i=this.buckets[n];i.length<6?i.push(e):i[this.index[n]=(this.index[n]+1)%6]=e}find(e,n,i=2){let s=e.bucket,r=this.buckets[s],o=this.index[s];for(let a=r.length-1;a>=0;a--){let l=(a+o)%r.length,c=r[l];if((!n||n(c))&&!this.reused.has(c))return r.splice(l,1),l<o&&this.index[s]--,this.reused.set(c,i),c}return null}findWidget(e,n,i){let s=this.buckets[0];if(s.length)for(let r=0,o=0;;r++){if(r==s.length){if(o)return null;o=1,r=0}let a=s[r];if(!this.reused.has(a)&&(o==0?a.widget.compare(e):a.widget.constructor==e.constructor&&e.updateDOM(a.dom,this.view)))return s.splice(r,1),r<this.index[0]&&this.index[0]--,a.widget==e&&a.length==n&&(a.flags&497)==i?(this.reused.set(a,1),a):(this.reused.set(a,2),new zc(a.dom,n,e,a.flags&-498|i))}}reuse(e){return this.reused.set(e,1),e}maybeReuse(e,n=2){if(!this.reused.has(e))return this.reused.set(e,n),e.dom}clear(){for(let e=0;e<this.buckets.length;e++)this.buckets[e].length=this.index[e]=0}}class Xbe{constructor(e,n,i,s,r){this.view=e,this.decorations=s,this.disallowBlockEffectsFor=r,this.openWidget=!1,this.openMarks=0,this.cache=new qbe(e),this.text=new Zbe(e.state.doc),this.builder=new zbe(this.cache,new G1(e,e.contentDOM),Mt.iter(i)),this.cache.reused.set(n,2),this.old=new Vbe(n),this.reuseWalker={skip:(o,a,l)=>{if(this.cache.add(o),o.isComposite())return!1},enter:o=>this.cache.add(o),leave:()=>{},break:()=>{}}}run(e,n){let i=n&&this.getCompositionContext(n.text);for(let s=0,r=0,o=0;;){let a=o<e.length?e[o++]:null,l=a?a.fromA:this.old.root.length;if(l>s){let c=l-s;this.preserve(c,!o,!a),s=l,r+=c}if(!a)break;n&&a.fromA<=n.range.fromA&&a.toA>=n.range.toA?(this.forward(a.fromA,n.range.fromA,n.range.fromA<n.range.toA?1:-1),this.emit(r,n.range.fromB),this.cache.clear(),this.builder.addComposition(n,i),this.text.skip(n.range.toB-n.range.fromB),this.forward(n.range.fromA,a.toA),this.emit(n.range.toB,a.toB)):(this.forward(a.fromA,a.toA),this.emit(r,a.toB)),r=a.toB,s=a.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(e,n,i){let s=Ube(this.old),r=this.openMarks;this.old.advance(e,i?1:-1,{skip:(o,a,l)=>{if(o.isWidget())if(this.openWidget)this.builder.continueWidget(l-a);else{let c=l>0||a<o.length?zc.of(o.widget,this.view,l-a,o.flags&496,this.cache.maybeReuse(o)):this.cache.reuse(o);c.flags&256?(c.flags&=-2,this.builder.addBlockWidget(c)):(this.builder.ensureLine(null),this.builder.addInlineWidget(c,s,r),r=s.length)}else if(o.isText())this.builder.ensureLine(null),!a&&l==o.length?this.builder.addText(o.text,s,r,this.cache.reuse(o)):(this.cache.add(o),this.builder.addText(o.text.slice(a,l),s,r)),r=s.length;else if(o.isLine())o.flags&=-2,this.cache.reused.set(o,1),this.builder.addLine(o);else if(o instanceof d0)this.cache.add(o);else if(o instanceof ws)this.builder.ensureLine(null),this.builder.addMark(o,s,r),this.cache.reused.set(o,1),r=s.length;else return!1;this.openWidget=!1},enter:o=>{o.isLine()?this.builder.addLineStart(o.attrs,this.cache.maybeReuse(o)):(this.cache.add(o),o instanceof ws&&s.unshift(o.mark)),this.openWidget=!1},leave:o=>{o.isLine()?s.length&&(s.length=r=0):o instanceof ws&&(s.shift(),r=Math.min(r,s.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(e)}emit(e,n){let i=null,s=this.builder,r=0,o=Mt.spans(this.decorations,e,n,{point:(a,l,c,u,h,p)=>{if(c instanceof Vc){if(this.disallowBlockEffectsFor[p]){if(c.block)throw new RangeError("Block decorations may not be specified via plugins");if(l>this.view.state.doc.lineAt(a).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(r=u.length,h>u.length)s.continueWidget(l-a);else{let m=c.widget||(c.block?Ed.block:Ed.inline),y=Wbe(c),O=this.cache.findWidget(m,l-a,y)||zc.of(m,this.view,l-a,y);c.block?(c.startSide>0&&s.addLineStartIfNotCovered(i),s.addBlockWidget(O)):(s.ensureLine(i),s.addInlineWidget(O,u,h))}i=null}else i=Gbe(i,c);l>a&&this.text.skip(l-a)},span:(a,l,c,u)=>{for(let h=a;h<l;){let p=this.text.next(Math.min(512,l-h));p==null?(s.addLineStartIfNotCovered(i),s.addBreak(),h++):(s.ensureLine(i),s.addText(p,c,h==a?u:c.length),h+=p.length),i=null}}});s.addLineStartIfNotCovered(i),this.openWidget=o>r,this.openMarks=o}forward(e,n,i=1){n-e<=10?this.old.advance(n-e,i,this.reuseWalker):(this.old.advance(5,-1,this.reuseWalker),this.old.advance(n-e-10,-1),this.old.advance(5,i,this.reuseWalker))}getCompositionContext(e){let n=[],i=null;for(let s=e.parentNode;;s=s.parentNode){let r=Un.get(s);if(s==this.view.contentDOM)break;r instanceof ws?n.push(r):r!=null&&r.isLine()?i=r:r instanceof Pa||(s.nodeName=="DIV"&&!i&&s!=this.view.contentDOM?i=new _d(s,XI):i||n.push(ws.of(new jp({tagName:s.nodeName.toLowerCase(),attributes:vbe(s)}),s)))}return{line:i,marks:n}}}function D8(t,e){let n=i=>{for(let s of i.children)if((e?s.isText():s.length)||n(s))return!0;return!1};return n(t)}function Wbe(t){let e=t.isReplace?(t.startSide<0?64:0)|(t.endSide>0?128:0):t.startSide>0?32:16;return t.block&&(e|=256),e}const XI={class:"cm-line"};function Gbe(t,e){let n=e.spec.attributes,i=e.spec.class;return!n&&!i||(t||(t={class:"cm-line"}),n&&uA(n,t),i&&(t.class+=" "+i)),t}function Ube(t){let e=[];for(let n=t.parents.length;n>1;n--){let i=n==t.parents.length?t.tile:t.parents[n].tile;i instanceof ws&&e.push(i.mark)}return e}function a2(t){let e=Un.get(t);return e&&e.setDOM(t.cloneNode()),t}class Ed extends Uo{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Ed.inline=new Ed("span");Ed.block=new Ed("div");const l2=new class extends Uo{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class M8{constructor(e){this.view=e,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=et.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new G1(e,e.contentDOM),this.updateInner([new xr(0,0,0,e.state.doc.length)],null)}update(e){var n;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:u,toA:h})=>h<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?s=this.domChanged.newSel.head:!s2e(e.changes,this.hasComposition)&&!e.selectionSet&&(s=e.state.selection.main.head));let r=s>-1?Ybe(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){let{from:u,to:h}=this.hasComposition;i=new xr(u,h,e.changes.mapPos(u,-1),e.changes.mapPos(h,1)).addToSet(i.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(je.ie||je.chrome)&&!r&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.blockWrappers;this.updateDeco();let l=e2e(o,this.decorations,e.changes);l.length&&(i=xr.extendWithRanges(i,l));let c=n2e(a,this.blockWrappers,e.changes);return c.length&&(i=xr.extendWithRanges(i,c)),r&&!i.some(u=>u.fromA<=r.range.fromA&&u.toA>=r.range.toA)&&(i=r.range.addToSet(i.slice())),this.tile.flags&2&&i.length==0?!1:(this.updateInner(i,r),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n){this.view.viewState.mustMeasureContent=!0;let{observer:i}=this.view;i.ignore(()=>{if(n||e.length){let o=this.tile,a=new Xbe(this.view,o,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=a.run(e,n),kw(o,a.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let r=je.chrome||je.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(r),r&&(r.written||i.selectionRange.focusNode!=r.node||!this.tile.dom.contains(r.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let r of this.tile.children)r.isWidget()&&r.widget instanceof c2&&s.push(r.dom);i.updateGaps(s)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let i of n.effects)i.is(VI)&&(this.editContextFormatting=i.value)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:i}=this.tile,s=this.view.root.activeElement,r=s==i,o=!r&&!(this.view.state.facet(va)||i.tabIndex>-1)&&yf(i,this.view.observer.selectionRange)&&!(s&&i.contains(s));if(!(r||n||o))return;let a=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,c,u;if(l.empty?u=c=this.inlineDOMNearPos(l.anchor,l.assoc||1):(u=this.inlineDOMNearPos(l.head,l.head==l.from?1:-1),c=this.inlineDOMNearPos(l.anchor,l.anchor==l.from?1:-1)),je.gecko&&l.empty&&!this.hasComposition&&Hbe(c)){let p=document.createTextNode("");this.view.observer.ignore(()=>c.node.insertBefore(p,c.node.childNodes[c.offset]||null)),c=u=new Yr(p,0),a=!0}let h=this.view.observer.selectionRange;(a||!h.focusNode||(!Of(c.node,c.offset,h.anchorNode,h.anchorOffset)||!Of(u.node,u.offset,h.focusNode,h.focusOffset))&&!this.suppressWidgetCursorChange(h,l))&&(this.view.observer.ignore(()=>{je.android&&je.chrome&&i.contains(h.focusNode)&&i2e(h.focusNode,i)&&(i.blur(),i.focus({preventScroll:!0}));let p=Jf(this.view.root);if(p)if(l.empty){if(je.gecko){let m=Kbe(c.node,c.offset);if(m&&m!=3){let y=(m==1?xI:kI)(c.node,c.offset);y&&(c=new Yr(y.node,y.offset))}}p.collapse(c.node,c.offset),l.bidiLevel!=null&&p.caretBidiLevel!==void 0&&(p.caretBidiLevel=l.bidiLevel)}else if(p.extend){p.collapse(c.node,c.offset);try{p.extend(u.node,u.offset)}catch{}}else{let m=document.createRange();l.anchor>l.head&&([c,u]=[u,c]),m.setEnd(u.node,u.offset),m.setStart(c.node,c.offset),p.removeAllRanges(),p.addRange(m)}o&&this.view.root.activeElement==i&&(i.blur(),s&&s.focus())}),this.view.observer.setSelectionRange(c,u)),this.impreciseAnchor=c.precise?null:new Yr(h.anchorNode,h.anchorOffset),this.impreciseHead=u.precise?null:new Yr(h.focusNode,h.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&Of(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=Jf(e.root),{anchorNode:s,anchorOffset:r}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let o=this.lineAt(n.head,n.assoc);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),c=this.coordsAt(n.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(n.head+n.assoc,n.assoc);i.collapse(u.node,u.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=n.from&&i.collapse(s,r)}posFromDOM(e,n){let i=this.tile.nearest(e);if(!i)return this.tile.dom.compareDocumentPosition(e)&2?0:this.view.state.doc.length;let s=i.posAtStart;if(i.isComposite()){let r;if(e==i.dom)r=i.dom.childNodes[n];else{let o=Fa(e)==0?0:n==0?-1:1;for(;;){let a=e.parentNode;if(a==i.dom)break;o==0&&a.firstChild!=a.lastChild&&(e==a.firstChild?o=-1:o=1),e=a}o<0?r=e:r=e.nextSibling}if(r==i.dom.firstChild)return s;for(;r&&!Un.get(r);)r=r.nextSibling;if(!r)return s+i.length;for(let o=0,a=s;;o++){let l=i.children[o];if(l.dom==r)return a;a+=l.length+l.breakAfter}}else return i.isText()?e==i.dom?s+n:s+(n?i.length:0):s}domAtPos(e,n){let{tile:i,offset:s}=this.tile.resolveBlock(e,n);return i.isWidget()?i.domPosFor(e,n):i.domIn(s,n)}inlineDOMNearPos(e,n){let i,s=-1,r=!1,o,a=-1,l=!1;return this.tile.blockTiles((c,u)=>{if(c.isWidget()){if(c.flags&32&&u>=e)return!0;c.flags&16&&(r=!0)}else{let h=u+c.length;if(u<=e&&(i=c,s=e-u,r=h<e),h>=e&&!o&&(o=c,a=e-u,l=u>e),u>e&&o)return!0}}),!i&&!o?this.domAtPos(e,n):(r&&o?i=null:l&&i&&(o=null),i&&n<0||!o?i.domIn(s,n):o.domIn(a,n))}coordsAt(e,n){let{tile:i,offset:s}=this.tile.resolveBlock(e,n);return i.isWidget()?i.widget instanceof c2?null:i.coordsInWidget(s,n,!0):i.coordsIn(s,n)}lineAt(e,n){let{tile:i}=this.tile.resolveBlock(e,n);return i.isLine()?i:null}coordsForChar(e){let{tile:n,offset:i}=this.tile.resolveBlock(e,1);if(!n.isLine())return null;function s(r,o){if(r.isComposite())for(let a of r.children){if(a.length>=o){let l=s(a,o);if(l)return l}if(o-=a.length,o<0)break}else if(r.isText()&&o<r.length){let a=ci(r.text,o);if(a==o)return null;let l=ep(r.dom,o,a).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(c==l.length-1||u.top<u.bottom&&u.left<u.right)return u}}return null}return s(n,i)}measureVisibleLineHeights(e){let n=[],{from:i,to:s}=e,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==un.LTR,c=0,u=(h,p,m)=>{for(let y=0;y<h.children.length&&!(p>s);y++){let O=h.children[y],S=p+O.length,x=O.dom.getBoundingClientRect(),{height:T}=x;if(m&&!y&&(c+=x.top-m.top),O instanceof Pa)S>i&&u(O,p,x);else if(p>=i&&(c>0&&n.push(-c),n.push(T+c),c=0,o)){let k=O.dom.lastChild,D=k?ty(k):[];if(D.length){let M=D[D.length-1],L=l?M.right-x.left:x.right-M.left;L>a&&(a=L,this.minWidth=r,this.minWidthFrom=p,this.minWidthTo=S)}}m&&y==h.children.length-1&&(c+=m.bottom-x.bottom),p=S+O.breakAfter}};return u(this.tile,0,null),n}textDirectionAt(e){let{tile:n}=this.tile.resolveBlock(e,1);return getComputedStyle(n.dom).direction=="rtl"?un.RTL:un.LTR}measureTextSize(){let e=this.tile.blockTiles(o=>{if(o.isLine()&&o.children.length&&o.length<=20){let a=0,l;for(let c of o.children){if(!c.isText()||/[^ -~]/.test(c.text))return;let u=ty(c.dom);if(u.length!=1)return;a+=u[0].width,l=u[0].height}if(a)return{lineHeight:o.dom.getBoundingClientRect().height,charWidth:a/o.length,textHeight:l}}});if(e)return e;let n=document.createElement("div"),i,s,r;return n.className="cm-line",n.style.width="99999px",n.style.position="absolute",n.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(n);let o=ty(n.firstChild)[0];i=n.getBoundingClientRect().height,s=o&&o.width?o.width/27:7,r=o&&o.height?o.height:i,n.remove()}),{lineHeight:i,charWidth:s,textHeight:r}}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,s=0;;s++){let r=s==n.viewports.length?null:n.viewports[s],o=r?r.from-1:this.view.state.doc.length;if(o>i){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(i).top)/this.view.scaleY;e.push(et.replace({widget:new c2(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!r)break;i=r.to+1}return et.set(e)}updateDeco(){let e=1,n=this.view.state.facet(X1).map(r=>(this.dynamicDecorationMap[e++]=typeof r=="function")?r(this.view):r),i=!1,s=this.view.state.facet(gA).map((r,o)=>{let a=typeof r=="function";return a&&(i=!0),a?r(this.view):r});for(s.length&&(this.dynamicDecorationMap[e++]=i,n.push(Mt.join(s))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;this.blockWrappers=this.view.state.facet(zI).map(r=>typeof r=="function"?r(this.view):r)}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(BI))try{if(c(this.view,e.range,e))return!0}catch(u){As(this.view.state,u,"scroll handler")}let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),s;if(!i)return;!n.empty&&(s=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,s.left),top:Math.min(i.top,s.top),right:Math.max(i.right,s.right),bottom:Math.max(i.bottom,s.bottom)});let r=yA(this.view),o={left:i.left-r.left,top:i.top-r.top,right:i.right+r.right,bottom:i.bottom+r.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;if(Cbe(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==un.LTR),window.visualViewport&&window.innerHeight-window.visualViewport.height>1&&(i.top>window.pageYOffset+window.visualViewport.offsetTop+window.visualViewport.height||i.bottom<window.pageYOffset+window.visualViewport.offsetTop)){let c=this.view.docView.lineAt(n.head,1);c&&c.dom.scrollIntoView({block:"nearest"})}}lineHasWidget(e){let n=i=>i.isWidget()||i.children.some(n);return n(this.tile.resolveBlock(e,1).tile)}destroy(){kw(this.tile)}}function kw(t,e){let n=e==null?void 0:e.get(t);if(n!=1){n==null&&t.destroy();for(let i of t.children)kw(i,e)}}function Hbe(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function WI(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=xI(n.focusNode,n.focusOffset),s=kI(n.focusNode,n.focusOffset),r=i||s;if(s&&i&&s.node!=i.node){let a=Un.get(s.node);if(!a||a.isText()&&a.text!=s.node.nodeValue)r=s;else if(t.docView.lastCompositionAfterCursor){let l=Un.get(i.node);!l||l.isText()&&l.text!=i.node.nodeValue||(r=s)}}if(t.docView.lastCompositionAfterCursor=r!=i,!r)return null;let o=e-r.offset;return{from:o,to:o+r.node.nodeValue.length,node:r.node}}function Ybe(t,e,n){let i=WI(t,n);if(!i)return null;let{node:s,from:r,to:o}=i,a=s.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(i.from,i.to)!=a)return null;let l=e.invertedDesc;return{range:new xr(l.mapPos(r),l.mapPos(o),r,o),text:s}}function Kbe(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let Jbe=class{constructor(){this.changes=[]}compareRange(e,n){Ku(e,n,this.changes)}comparePoint(e,n){Ku(e,n,this.changes)}boundChange(e){Ku(e,e,this.changes)}};function e2e(t,e,n){let i=new Jbe;return Mt.compare(t,e,n,i),i.changes}class t2e{constructor(){this.changes=[]}compareRange(e,n){Ku(e,n,this.changes)}comparePoint(){}boundChange(e){Ku(e,e,this.changes)}}function n2e(t,e,n){let i=new t2e;return Mt.compare(t,e,n,i),i.changes}function i2e(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function s2e(t,e){let n=!1;return e&&t.iterChangedRanges((i,s)=>{i<e.to&&s>e.from&&(n=!0)}),n}class c2 extends Uo{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function r2e(t,e,n=1){let i=t.charCategorizer(e),s=t.doc.lineAt(e),r=e-s.from;if(s.length==0)return fe.cursor(e);r==0?n=1:r==s.length&&(n=-1);let o=r,a=r;n<0?o=ci(s.text,r,!1):a=ci(s.text,r);let l=i(s.text.slice(o,a));for(;o>0;){let c=ci(s.text,o,!1);if(i(s.text.slice(c,o))!=l)break;o=c}for(;a<s.length;){let c=ci(s.text,a);if(i(s.text.slice(a,c))!=l)break;a=c}return fe.range(o+s.from,a+s.from)}function o2e(t,e,n,i,s){let r=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((s-n.top-(t.defaultLineHeight-a)*.5)/a);r+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+pw(o,r,t.state.tabSize)}function Pw(t,e,n){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){let s;for(let r of i.type){if(r.from>e)break;if(!(r.to<e)){if(r.from<e&&r.to>e)return r;(!s||r.type==Ci.Text&&(s.type!=r.type||(n<0?r.from<e:r.to>e)))&&(s=r)}}return s||i}return i}function a2e(t,e,n,i){let s=Pw(t,e.head,e.assoc||-1),r=!i||s.type!=Ci.Text||!(t.lineWrapping||s.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(r){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(s.from),l=t.posAtCoords({x:n==(a==un.LTR)?o.right-1:o.left+1,y:(r.top+r.bottom)/2});if(l!=null)return fe.cursor(l,n?-1:1)}return fe.cursor(n?s.to:s.from,n?-1:1)}function I8(t,e,n,i){let s=t.state.doc.lineAt(e.head),r=t.bidiSpans(s),o=t.textDirectionAt(s.from);for(let a=e,l=null;;){let c=Ebe(s,r,o,a,n),u=MI;if(!c){if(s.number==(n?t.state.doc.lines:1))return a;u=`
`,s=t.state.doc.line(s.number+(n?1:-1)),r=t.bidiSpans(s),c=t.visualLineSide(s,!n)}if(l){if(!l(u))return a}else{if(!i)return c;l=i(u)}a=c}}function l2e(t,e,n){let i=t.state.charCategorizer(e),s=i(n);return r=>{let o=i(r);return s==An.Space&&(s=o),s==o}}function c2e(t,e,n,i){let s=e.head,r=n?1:-1;if(s==(n?t.state.doc.length:0))return fe.cursor(s,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(s,(e.empty?e.assoc:0)||(n?1:-1)),u=t.documentTop;if(c)o==null&&(o=c.left-l.left),a=r<0?c.top:c.bottom;else{let y=t.viewState.lineBlockAt(s);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(s-y.from))),a=(r<0?y.top:y.bottom)+u}let h=l.left+o,p=i??t.viewState.heightOracle.textHeight>>1,m=Tw(t,{x:h,y:a+p*r},!1,r);return fe.cursor(m.pos,m.assoc,void 0,o)}function bf(t,e,n){for(;;){let i=0;for(let s of t)s.between(e-1,e+1,(r,o,a)=>{if(e>r&&e<o){let l=i||n||(e-r<o-e?-1:1);e=l<0?r:o,i=l}});if(!i)return e}}function GI(t,e){let n=null;for(let i=0;i<e.ranges.length;i++){let s=e.ranges[i],r=null;if(s.empty){let o=bf(t,s.from,0);o!=s.from&&(r=fe.cursor(o,-1))}else{let o=bf(t,s.from,-1),a=bf(t,s.to,1);(o!=s.from||a!=s.to)&&(r=fe.range(s.from==s.anchor?o:a,s.from==s.head?o:a))}r&&(n||(n=e.ranges.slice()),n[i]=r)}return n?fe.create(n,e.mainIndex):e}function u2(t,e,n){let i=bf(t.state.facet(Zp).map(s=>s(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:fe.cursor(i,i<n.from?1:-1)}class Ro{constructor(e,n){this.pos=e,this.assoc=n}}function Tw(t,e,n,i){let s=t.contentDOM.getBoundingClientRect(),r=s.top+t.viewState.paddingTop,{x:o,y:a}=e,l=a-r,c;for(;;){if(l<0)return new Ro(0,1);if(l>t.viewState.docHeight)return new Ro(t.state.doc.length,-1);if(c=t.elementAtHeight(l),i==null)break;if(c.type==Ci.Text){if(i<0?c.to<t.viewport.from:c.from>t.viewport.to)break;let p=t.docView.coordsAt(i<0?c.from:c.to,i>0?-1:1);if(p&&(i<0?p.top<=l+r:p.bottom>=l+r))break}let h=t.viewState.heightOracle.textHeight/2;l=i>0?c.bottom+h:c.top-h}if(t.viewport.from>=c.to||t.viewport.to<=c.from){if(n)return null;if(c.type==Ci.Text){let h=o2e(t,s,c,o,a);return new Ro(h,h==c.from?1:-1)}}if(c.type!=Ci.Text)return l<(c.top+c.bottom)/2?new Ro(c.from,1):new Ro(c.to,-1);let u=t.docView.lineAt(c.from,2);return(!u||u.length!=c.length)&&(u=t.docView.lineAt(c.from,-2)),new u2e(t,o,a,t.textDirectionAt(c.from)).scanTile(u,c.from)}class u2e{constructor(e,n,i,s){this.view=e,this.x=n,this.y=i,this.baseDir=s,this.line=null,this.spans=null}bidiSpansAt(e){return(!this.line||this.line.from>e||this.line.to<e)&&(this.line=this.view.state.doc.lineAt(e),this.spans=this.view.bidiSpans(this.line)),this}baseDirAt(e,n){let{line:i,spans:s}=this.bidiSpansAt(e);return s[Eo.find(s,e-i.from,-1,n)].level==this.baseDir}dirAt(e,n){let{line:i,spans:s}=this.bidiSpansAt(e);return s[Eo.find(s,e-i.from,-1,n)].dir}bidiIn(e,n){let{spans:i,line:s}=this.bidiSpansAt(e);return i.length>1||i.length&&(i[0].level!=this.baseDir||i[0].to+s.from<n)}scan(e,n){let i=0,s=e.length-1,r=new Set,o=this.bidiIn(e[0],e[s]),a,l,c=-1,u=1e9,h;e:for(;i<s;){let m=s-i,y=i+s>>1;t:if(r.has(y)){let S=i+Math.floor(Math.random()*m);for(let x=0;x<m;x++){if(!r.has(S)){y=S;break t}S++,S==s&&(S=i)}break e}r.add(y);let O=n(y);if(O)for(let S=0;S<O.length;S++){let x=O[S],T=0;if(x.bottom<this.y)(!a||a.bottom<x.bottom)&&(a=x),T=1;else if(x.top>this.y)(!l||l.top>x.top)&&(l=x),T=-1;else{let k=x.left>this.x?this.x-x.left:x.right<this.x?this.x-x.right:0,D=Math.abs(k);D<u&&(c=y,u=D,h=x),k&&(T=k<0==(this.baseDir==un.LTR)?-1:1)}T==-1&&(!o||this.baseDirAt(e[y],1))?s=y:T==1&&(!o||this.baseDirAt(e[y+1],-1))&&(i=y+1)}}if(!h){let m=a&&(!l||this.y-a.bottom<l.top-this.y)?a:l;return this.y=(m.top+m.bottom)/2,this.scan(e,n)}let p=(o?this.dirAt(e[c],1):this.baseDir)==un.LTR;return{i:c,after:this.x>(h.left+h.right)/2==p}}scanText(e,n){let i=[];for(let r=0;r<e.length;r=ci(e.text,r))i.push(n+r);i.push(n+e.length);let s=this.scan(i,r=>{let o=i[r]-n,a=i[r+1]-n;return ep(e.dom,o,a).getClientRects()});return s.after?new Ro(i[s.i+1],-1):new Ro(i[s.i],1)}scanTile(e,n){if(!e.length)return new Ro(n,1);if(e.children.length==1){let a=e.children[0];if(a.isText())return this.scanText(a,n);if(a.isComposite())return this.scanTile(a,n)}let i=[n];for(let a=0,l=n;a<e.children.length;a++)i.push(l+=e.children[a].length);let s=this.scan(i,a=>{let l=e.children[a];return l.flags&48?null:(l.dom.nodeType==1?l.dom:ep(l.dom,0,l.length)).getClientRects()}),r=e.children[s.i],o=i[s.i];return r.isText()?this.scanText(r,o):r.isComposite()?this.scanTile(r,o):s.after?new Ro(i[s.i+1],-1):new Ro(o,1)}}const Hh="";class d2e{constructor(e,n){this.points=e,this.view=n,this.text="",this.lineSeparator=n.state.facet(Vt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Hh}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let s=e;;){this.findPointBefore(i,s);let r=this.text.length;this.readNode(s);let o=Un.get(s),a=s.nextSibling;if(a==n){o!=null&&o.breakAfter&&!a&&i!=this.view.contentDOM&&this.lineBreak();break}let l=Un.get(a);(o&&l?o.breakAfter:(o?o.breakAfter:l0(s))||l0(a)&&(s.nodeName!="BR"||o!=null&&o.isWidget())&&this.text.length>r)&&!f2e(a,n)&&this.lineBreak(),s=a}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let r=-1,o=1,a;if(this.lineSeparator?(r=n.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(a=s.exec(n))&&(r=a.index,o=a[0].length),this.append(n.slice(i,r<0?n.length:r)),r<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);i=r+o}}readNode(e){let n=Un.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let s=i.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(h2e(e,i.node,i.offset)?n:0))}}function h2e(t,e,n){for(;;){if(!e||n<Fa(e))return!1;if(e==t)return!0;n=Ql(e)+1,e=e.parentNode}}function f2e(t,e){let n;for(;!(t==e||!t);t=t.nextSibling){let i=Un.get(t);if(!(i!=null&&i.isWidget()))return!1;i&&(n||(n=[])).push(i)}if(n)for(let i of n){let s=i.overrideDOMText;if(s!=null&&s.length)return!1}return!0}let R8=class{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}};class p2e{constructor(e,n,i,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:r,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=UI(e.docView.tile,n,i,0))){let a=r||o?[]:g2e(e),l=new d2e(a,e);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=y2e(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=r&&r.node==a.focusNode&&r.offset==a.focusOffset||!ww(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!ww(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),u=e.viewport;if((je.ios||je.chrome)&&e.state.selection.main.empty&&l!=c&&(u.from>0||u.to<e.state.doc.length)){let h=Math.min(l,c),p=Math.max(l,c),m=u.from-h,y=u.to-p;(m==0||m==1||h==0)&&(y==0||y==-1||p==e.state.doc.length)&&(l=0,c=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(fe.range(c,l)):this.newSel=fe.single(c,l)}}}function UI(t,e,n,i){if(t.isComposite()){let s=-1,r=-1,o=-1,a=-1;for(let l=0,c=i,u=i;l<t.children.length;l++){let h=t.children[l],p=c+h.length;if(c<e&&p>n)return UI(h,e,n,c);if(p>=e&&s==-1&&(s=l,r=c),c>n&&h.dom.parentNode==t.dom){o=l,a=u;break}u=p,c=p+h.breakAfter}return{from:r,to:a<0?i+t.length:a,startDOM:(s?t.children[s-1].dom.nextSibling:null)||t.dom.firstChild,endDOM:o<t.children.length&&o>=0?t.children[o].dom:null}}else return t.isText()?{from:i,to:i+t.length,startDOM:t.dom,endDOM:t.dom.nextSibling}:null}function HI(t,e){let n,{newSel:i}=e,s=t.state.selection.main,r=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=s.from,c=null;(r===8||je.android&&e.text.length<a-o)&&(l=s.to,c="end");let u=YI(t.state.doc.sliceString(o,a,Hh),e.text,l-o,c);u&&(je.chrome&&r==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==Hh+Hh&&u.toB--,n={from:o+u.from,to:o+u.toA,insert:Zt.of(e.text.slice(u.from,u.toB).split(Hh))})}else i&&(!t.hasFocus&&t.state.facet(va)||f0(i,s))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!s.empty&&i&&i.main.empty?n={from:s.from,to:s.to,insert:t.state.doc.slice(s.from,s.to)}:(je.mac||je.android)&&n&&n.from==n.to&&n.from==s.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=fe.single(i.main.anchor-1,i.main.head-1)),n={from:n.from,to:n.to,insert:Zt.of([n.insert.toString().replace("."," ")])}):n&&n.from>=s.from&&n.to<=s.to&&(n.from!=s.from||n.to!=s.to)&&s.to-s.from-(n.to-n.from)<=4?n={from:s.from,to:s.to,insert:t.state.doc.slice(s.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,s.to))}:t.state.doc.lineAt(s.from).to<s.to&&t.docView.lineHasWidget(s.to)&&t.inputState.insertingTextAt>Date.now()-50?n={from:s.from,to:s.to,insert:t.state.toText(t.inputState.insertingText)}:je.chrome&&n&&n.from==n.to&&n.from==s.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=fe.single(i.main.anchor-1,i.main.head-1)),n={from:s.from,to:s.to,insert:Zt.of([" "])}),n)return OA(t,n,i,r);if(i&&!f0(i,s)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin,a=="select.pointer"&&(i=GI(t.state.facet(Zp).map(l=>l(t)),i))),t.dispatch({selection:i,scrollIntoView:o,userEvent:a}),!0}else return!1}function OA(t,e,n,i=-1){if(je.ios&&t.inputState.flushIOSKey(e))return!0;let s=t.state.selection.main;if(je.android&&(e.to==s.to&&(e.from==s.from||e.from==s.from-1&&t.state.sliceDoc(e.from,s.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Ju(t.contentDOM,"Enter",13)||(e.from==s.from-1&&e.to==s.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>s.head)&&Ju(t.contentDOM,"Backspace",8)||e.from==s.from&&e.to==s.to+1&&e.insert.length==0&&Ju(t.contentDOM,"Delete",46)))return!0;let r=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=m2e(t,e,n));return t.state.facet(QI).some(l=>l(t,e.from,e.to,r,a))||t.dispatch(a()),!0}function m2e(t,e,n){let i,s=t.state,r=s.selection.main,o=-1;if(e.from==e.to&&e.from<r.from||e.from>r.to){let l=e.from<r.from?-1:1,c=l<0?r.from:r.to,u=bf(s.facet(Zp).map(h=>h(t)),c,l);e.from==u&&(o=u)}if(o>-1)i={changes:e,selection:fe.cursor(e.from+e.insert.length,-1)};else if(e.from>=r.from&&e.to<=r.to&&e.to-e.from>=(r.to-r.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let l=r.from<e.from?s.sliceDoc(r.from,e.from):"",c=r.to>e.to?s.sliceDoc(e.to,r.to):"";i=s.replaceSelection(t.state.toText(l+e.insert.sliceString(0,void 0,t.state.lineBreak)+c))}else{let l=s.changes(e),c=n&&n.main.to<=l.newLength?n.main:void 0;if(s.selection.ranges.length>1&&(t.inputState.composing>=0||t.inputState.compositionPendingChange)&&e.to<=r.to+10&&e.to>=r.to-10){let u=t.state.sliceDoc(e.from,e.to),h,p=n&&WI(t,n.main.head);if(p){let y=e.insert.length-(e.to-e.from);h={from:p.from,to:p.to-y}}else h=t.state.doc.lineAt(r.head);let m=r.to-e.to;i=s.changeByRange(y=>{if(y.from==r.from&&y.to==r.to)return{changes:l,range:c||y.map(l)};let O=y.to-m,S=O-u.length;if(t.state.sliceDoc(S,O)!=u||O>=h.from&&S<=h.to)return{range:y};let x=s.changes({from:S,to:O,insert:e.insert}),T=y.to-r.to;return{changes:x,range:c?fe.range(Math.max(0,c.anchor+T),Math.max(0,c.head+T)):y.map(x)}})}else i={changes:l,selection:c&&s.selection.replaceRange(c)}}let a="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,a+=".compose",t.inputState.compositionFirstChange&&(a+=".start",t.inputState.compositionFirstChange=!1)),s.update(i,{userEvent:a,scrollIntoView:!0})}function YI(t,e,n,i){let s=Math.min(t.length,e.length),r=0;for(;r<s&&t.charCodeAt(r)==e.charCodeAt(r);)r++;if(r==s&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(i=="end"){let l=Math.max(0,r-Math.min(o,a));n-=o+l-r}if(o<r&&t.length<e.length){let l=n<=r&&n>=o?r-n:0;r-=l,a=r+(a-o),o=r}else if(a<r){let l=n<=r&&n>=a?r-n:0;r-=l,o=r+(o-a),a=r}return{from:r,toA:o,toB:a}}function g2e(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:s,focusOffset:r}=t.observer.selectionRange;return n&&(e.push(new R8(n,i)),(s!=n||r!=i)&&e.push(new R8(s,r))),e}function y2e(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?fe.single(n+e,i+e):null}function f0(t,e){return e.head==t.main.head&&e.anchor==t.main.anchor}class O2e{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,je.safari&&e.contentDOM.addEventListener("input",()=>null),je.gecko&&R2e(e.contentDOM.ownerDocument)}handleEvent(e){!k2e(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let i=this.handlers[e];if(i){for(let s of i.observers)s(this.view,n);for(let s of i.handlers){if(n.defaultPrevented)break;if(s(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=b2e(e),i=this.handlers,s=this.view.contentDOM;for(let r in n)if(r!="scroll"){let o=!n[r].handlers.length,a=i[r];a&&o!=!a.handlers.length&&(s.removeEventListener(r,this.handleEvent),a=null),a||s.addEventListener(r,this.handleEvent,{passive:o})}for(let r in i)r!="scroll"&&!n[r]&&s.removeEventListener(r,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&JI.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),je.android&&je.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return je.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=KI.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||v2e.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Ju(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:je.safari&&!je.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function _8(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(s){As(n.state,s)}}}function b2e(t){let e=Object.create(null);function n(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of t){let s=i.spec,r=s&&s.plugin.domEventHandlers,o=s&&s.plugin.domEventObservers;if(r)for(let a in r){let l=r[a];l&&n(a).handlers.push(_8(i.value,l))}if(o)for(let a in o){let l=o[a];l&&n(a).observers.push(_8(i.value,l))}}for(let i in co)n(i).handlers.push(co[i]);for(let i in Er)n(i).observers.push(Er[i]);return e}const KI=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],v2e="dthko",JI=[16,17,18,20,91,92,224,225],fg=6;function pg(t){return Math.max(0,t)*.7+8}function w2e(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class S2e{constructor(e,n,i,s){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=Abe(e.contentDOM),this.atoms=e.state.facet(Zp).map(o=>o(e));let r=e.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(Vt.allowMultipleSelections)&&C2e(e,n),this.dragging=x2e(e,n)&&nR(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&w2e(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,i=0,s=0,r=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:r,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=yA(this.view);e.clientX-l.left<=s+fg?n=-pg(s-e.clientX):e.clientX+l.right>=o-fg&&(n=pg(e.clientX-o)),e.clientY-l.top<=r+fg?i=-pg(r-e.clientY):e.clientY+l.bottom>=a-fg&&(i=pg(e.clientY-a)),this.setScrollSpeed(n,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:n}=this,i=GI(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function C2e(t,e){let n=t.state.facet(II);return n.length?n[0](e):je.mac?e.metaKey:e.ctrlKey}function A2e(t,e){let n=t.state.facet(RI);return n.length?n[0](e):je.mac?!e.altKey:!e.ctrlKey}function x2e(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=Jf(t.root);if(!i||i.rangeCount==0)return!0;let s=i.getRangeAt(0).getClientRects();for(let r=0;r<s.length;r++){let o=s[r];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function k2e(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=Un.get(n))&&i.isWidget()&&!i.isHidden&&i.widget.ignoreEvent(e))return!1;return!0}const co=Object.create(null),Er=Object.create(null),eR=je.ie&&je.ie_version<15||je.ios&&je.webkit_version<604;function P2e(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),tR(t,n.value)},50)}function U1(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function tR(t,e){e=U1(t.state,fA,e);let{state:n}=t,i,s=1,r=n.toText(e),o=r.lines==n.selection.ranges.length;if($w!=null&&n.selection.ranges.every(l=>l.empty)&&$w==r.toString()){let l=-1;i=n.changeByRange(c=>{let u=n.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let h=n.toText((o?r.line(s++).text:e)+n.lineBreak);return{changes:{from:u.from,insert:h},range:fe.cursor(c.from+h.length)}})}else o?i=n.changeByRange(l=>{let c=r.line(s++);return{changes:{from:l.from,to:l.to,insert:c.text},range:fe.cursor(l.from+c.length)}}):i=n.replaceSelection(r);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Er.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};co.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);Er.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Er.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};co.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(_I))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=$2e(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new S2e(t,e,n,i)),i&&t.observer.ignore(()=>{CI(t.contentDOM);let r=t.root.activeElement;r&&!r.contains(t.contentDOM)&&r.blur()});let s=t.inputState.mouseSelection;if(s)return s.start(e),s.dragging===!1}else t.inputState.setSelectionOrigin("select.pointer");return!1};function E8(t,e,n,i){if(i==1)return fe.cursor(e,n);if(i==2)return r2e(t.state,e,n);{let s=t.docView.lineAt(e,n),r=t.state.doc.lineAt(s?s.posAtEnd:e),o=s?s.posAtStart:r.from,a=s?s.posAtEnd:r.to;return a<t.state.doc.length&&a==r.to&&a++,fe.range(o,a)}}const T2e=je.ie&&je.ie_version<=11;let Q8=null,N8=0,L8=0;function nR(t){if(!T2e)return t.detail;let e=Q8,n=L8;return Q8=t,L8=Date.now(),N8=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(N8+1)%3:1}function $2e(t,e){let n=t.posAndSideAtCoords({x:e.clientX,y:e.clientY},!1),i=nR(e),s=t.state.selection;return{update(r){r.docChanged&&(n.pos=r.changes.mapPos(n.pos),s=s.map(r.changes))},get(r,o,a){let l=t.posAndSideAtCoords({x:r.clientX,y:r.clientY},!1),c,u=E8(t,l.pos,l.assoc,i);if(n.pos!=l.pos&&!o){let h=E8(t,n.pos,n.assoc,i),p=Math.min(h.from,u.from),m=Math.max(h.to,u.to);u=p<u.from?fe.range(p,m):fe.range(m,p)}return o?s.replaceRange(s.main.extend(u.from,u.to)):a&&i==1&&s.ranges.length>1&&(c=D2e(s,l.pos))?c:a?s.addRange(u):fe.create([u])}}}function D2e(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:s}=t.ranges[n];if(i<=e&&s>=e)return fe.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}co.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let s=t.docView.tile.nearest(e.target);if(s&&s.isWidget()){let r=s.posAtStart,o=r+s.length;(r>=n.to||o<=n.from)&&(n=fe.range(r,o))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",U1(t.state,pA,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};co.dragend=t=>(t.inputState.draggedContent=null,!1);function F8(t,e,n,i){if(n=U1(t.state,fA,n),!n)return;let s=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:r}=t.inputState,o=i&&r&&A2e(t,e)?{from:r.from,to:r.to}:null,a={from:s,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(s,-1),head:l.mapPos(s,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}co.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),s=0,r=()=>{++s==n.length&&F8(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=r,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[o]=a.result),r()},a.readAsText(n[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return F8(t,e,i,!0),!0}return!1};co.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=eR?null:e.clipboardData;return n?(tR(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(P2e(t),!1)};function M2e(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function I2e(t){let e=[],n=[],i=!1;for(let s of t.selection.ranges)s.empty||(e.push(t.sliceDoc(s.from,s.to)),n.push(s));if(!e.length){let s=-1;for(let{from:r}of t.selection.ranges){let o=t.doc.lineAt(r);o.number>s&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),s=o.number}i=!0}return{text:U1(t,pA,e.join(t.lineBreak)),ranges:n,linewise:i}}let $w=null;co.copy=co.cut=(t,e)=>{if(!yf(t.contentDOM,t.observer.selectionRange))return!1;let{text:n,ranges:i,linewise:s}=I2e(t.state);if(!n&&!s)return!1;$w=s?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let r=eR?null:e.clipboardData;return r?(r.clearData(),r.setData("text/plain",n),!0):(M2e(t,n),!1)};const iR=Xa.define();function sR(t,e){let n=[];for(let i of t.facet(NI)){let s=i(t,e);s&&n.push(s)}return n.length?t.update({effects:n,annotations:iR.of(!0)}):null}function rR(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=sR(t.state,e);n?t.dispatch(n):t.update([])}},10)}Er.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),rR(t)};Er.blur=t=>{t.observer.clearSelectionRange(),rR(t)};Er.compositionstart=Er.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};Er.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,je.chrome&&je.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};Er.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};co.beforeinput=(t,e)=>{var n,i;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(t.inputState.insertingText=e.data,t.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&t.observer.editContext){let r=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(r&&o.length){let a=o[0],l=t.posAtDOM(a.startContainer,a.startOffset),c=t.posAtDOM(a.endContainer,a.endOffset);return OA(t,{from:l,to:c,insert:t.state.toText(r)},null),!0}}let s;if(je.chrome&&je.android&&(s=KI.find(r=>r.inputType==e.inputType))&&(t.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let r=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>r+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return je.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),je.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>Er.compositionend(t,e),20),!1};const B8=new Set;function R2e(t){B8.has(t)||(B8.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const V8=["pre-wrap","normal","pre-line","break-spaces"];let Qd=!1;function j8(){Qd=!1}class _2e{constructor(e){this.lineWrapping=e,this.doc=Zt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return V8.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let s=e[i];s<0?i++:this.heightSamples[Math.floor(s*10)]||(n=!0,this.heightSamples[Math.floor(s*10)]=!0)}return n}refresh(e,n,i,s,r,o){let a=V8.indexOf(e)>-1,l=Math.abs(n-this.lineHeight)>.3||this.lineWrapping!=a||Math.abs(i-this.charWidth)>.1;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=i,this.textHeight=s,this.lineLength=r,l){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class E2e{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class Ur{constructor(e,n,i,s,r){this.from=e,this.length=n,this.top=i,this.height=s,this._content=r}get type(){return typeof this._content=="number"?Ci.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Vc?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Ur(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var fn=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(fn||(fn={}));const ny=.001;class ts{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>ny&&(Qd=!0),this.height=e)}replace(e,n,i){return ts.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,s){let r=this,o=i.doc;for(let a=s.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:u,toB:h}=s[a],p=r.lineAt(l,fn.ByPosNoHeight,i.setDoc(n),0,0),m=p.to>=c?p:r.lineAt(c,fn.ByPosNoHeight,i,0,0);for(h+=m.to-c,c=m.to;a>0&&p.from<=s[a-1].toA;)l=s[a-1].fromA,u=s[a-1].fromB,a--,l<p.from&&(p=r.lineAt(l,fn.ByPosNoHeight,i,0,0));u+=p.from-l,l=p.from;let y=bA.build(i.setDoc(o),e,u,h);r=p0(r,r.replace(l,c,y))}return r.updateHeight(i,0)}static empty(){return new qs(0,0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,s=0,r=0;for(;;)if(n==i)if(s>r*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),i+=1+a.break,s-=a.size}else if(r>s*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,r-=a.size}else break;else if(s<r){let a=e[n++];a&&(s+=a.size)}else{let a=e[--i];a&&(r+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,i++),new N2e(ts.of(e.slice(0,n)),o,ts.of(e.slice(i)))}}function p0(t,e){return t==e?t:(t.constructor!=e.constructor&&(Qd=!0),e)}ts.prototype.size=1;const Q2e=et.replace({});class oR extends ts{constructor(e,n,i){super(e,n),this.deco=i,this.spaceAbove=0}mainBlock(e,n){return new Ur(n,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(e,n,i,s){return this.spaceAbove&&e<i+this.spaceAbove?new Ur(s,0,i,this.spaceAbove,Q2e):this.mainBlock(i,s)}lineAt(e,n,i,s,r){let o=this.mainBlock(s,r);return this.spaceAbove?this.blockAt(0,i,s,r).join(o):o}forEachLine(e,n,i,s,r,o){e<=r+this.length&&n>=r&&o(this.lineAt(0,fn.ByPos,i,s,r))}setMeasuredHeight(e){let n=e.heights[e.index++];n<0?(this.spaceAbove=-n,n=e.heights[e.index++]):this.spaceAbove=0,this.setHeight(n)}updateHeight(e,n=0,i=!1,s){return s&&s.from<=n&&s.more&&this.setMeasuredHeight(s),this.outdated=!1,this}toString(){return`block(${this.length})`}}class qs extends oR{constructor(e,n,i){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=i}mainBlock(e,n){return new Ur(n,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(e,n,i){let s=i[0];return i.length==1&&(s instanceof qs||s instanceof yi&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof yi?s=new qs(s.length,this.height,this.spaceAbove):s.height=this.height,this.outdated||(s.outdated=!1),s):ts.of(i)}updateHeight(e,n=0,i=!1,s){return s&&s.from<=n&&s.more?this.setMeasuredHeight(s):(i||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class yi extends ts{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,s=e.doc.lineAt(n+this.length).number,r=s-i+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*r);o=l/r,this.length>r+1&&(a=(this.height-l)/(this.length-r-1))}else o=this.height/r;return{firstLine:i,lastLine:s,perLine:o,perChar:a}}blockAt(e,n,i,s){let{firstLine:r,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,s);if(n.lineWrapping){let c=s+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),u=n.doc.lineAt(c),h=a+u.length*l,p=Math.max(i,e-h/2);return new Ur(u.from,u.length,p,h,0)}else{let c=Math.max(0,Math.min(o-r,Math.floor((e-i)/a))),{from:u,length:h}=n.doc.line(r+c);return new Ur(u,h,i+a*c,a,0)}}lineAt(e,n,i,s,r){if(n==fn.ByHeight)return this.blockAt(e,i,s,r);if(n==fn.ByPosNoHeight){let{from:m,to:y}=i.doc.lineAt(e);return new Ur(m,y-m,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(i,r),c=i.doc.lineAt(e),u=a+c.length*l,h=c.number-o,p=s+a*h+l*(c.from-r-h);return new Ur(c.from,c.length,Math.max(s,Math.min(p,s+this.height-u)),u,0)}forEachLine(e,n,i,s,r,o){e=Math.max(e,r),n=Math.min(n,r+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(i,r);for(let u=e,h=s;u<=n;){let p=i.doc.lineAt(u);if(u==e){let y=p.number-a;h+=l*y+c*(e-r-y)}let m=l+c*p.length;o(new Ur(p.from,p.length,h,m,0)),h+=m,u=p.to+1}}replace(e,n,i){let s=this.length-n;if(s>0){let r=i[i.length-1];r instanceof yi?i[i.length-1]=new yi(r.length+s):i.push(null,new yi(s-1))}if(e>0){let r=i[0];r instanceof yi?i[0]=new yi(e+r.length):i.unshift(new yi(e-1),null)}return ts.of(i)}decomposeLeft(e,n){n.push(new yi(e-1),null)}decomposeRight(e,n){n.push(null,new yi(this.length-e-1))}updateHeight(e,n=0,i=!1,s){let r=n+this.length;if(s&&s.from<=n+this.length&&s.more){let o=[],a=Math.max(n,s.from),l=-1;for(s.from>n&&o.push(new yi(s.from-n-1).updateHeight(e,n));a<=r&&s.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let h=s.heights[s.index++],p=0;h<0&&(p=-h,h=s.heights[s.index++]),l==-1?l=h:Math.abs(h-l)>=ny&&(l=-2);let m=new qs(u,h,p);m.outdated=!1,o.push(m),a+=u+1}a<=r&&o.push(null,new yi(r-a).updateHeight(e,a));let c=ts.of(o);return(l<0||Math.abs(c.height-this.height)>=ny||Math.abs(l-this.heightMetrics(e,n).perLine)>=ny)&&(Qd=!0),p0(this,c)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class N2e extends ts{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,s){let r=i+this.left.height;return e<r?this.left.blockAt(e,n,i,s):this.right.blockAt(e,n,r,s+this.left.length+this.break)}lineAt(e,n,i,s,r){let o=s+this.left.height,a=r+this.left.length+this.break,l=n==fn.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,n,i,s,r):this.right.lineAt(e,n,i,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let u=n==fn.ByPosNoHeight?fn.ByPosNoHeight:fn.ByPos;return l?c.join(this.right.lineAt(a,u,i,o,a)):this.left.lineAt(a,u,i,s,r).join(c)}forEachLine(e,n,i,s,r,o){let a=s+this.left.height,l=r+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,i,s,r,o),n>=l&&this.right.forEachLine(e,n,i,a,l,o);else{let c=this.lineAt(l,fn.ByPos,i,s,r);e<c.from&&this.left.forEachLine(e,c.from-1,i,s,r,o),c.to>=e&&c.from<=n&&o(c),n>c.to&&this.right.forEachLine(c.to+1,n,i,a,l,o)}}replace(e,n,i){let s=this.left.length+this.break;if(n<s)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,n-s,i));let r=[];e>0&&this.decomposeLeft(e,r);let o=r.length;for(let a of i)r.push(a);if(e>0&&z8(r,o-1),n<this.length){let a=r.length;this.decomposeRight(n,r),z8(r,a)}return ts.of(r)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,s=i+this.break;if(e>=s)return this.right.decomposeRight(e-s,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<s&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?ts.of(this.break?[e,null,n]:[e,n]):(this.left=p0(this.left,e),this.right=p0(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,s){let{left:r,right:o}=this,a=n+r.length+this.break,l=null;return s&&s.from<=n+r.length&&s.more?l=r=r.updateHeight(e,n,i,s):r.updateHeight(e,n,i),s&&s.from<=a+o.length&&s.more?l=o=o.updateHeight(e,a,i,s):o.updateHeight(e,a,i),l?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function z8(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof yi&&(i=t[e+1])instanceof yi&&t.splice(e-1,3,new yi(n.length+1+i.length))}const L2e=5;class bA{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof qs?s.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new qs(i-this.pos,-1,0)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let s=i.widget?i.widget.estimatedHeight:0,r=i.widget?i.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let o=n-e;i.block?this.addBlock(new oR(o,s,i)):(o||r||s>=L2e)&&this.addLineDeco(s,r,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new qs(this.pos-e,-1,0)),this.writtenTo=this.pos}blankContent(e,n){let i=new yi(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof qs)return e;let n=new qs(0,-1,0);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,i){let s=this.ensureLine();s.length+=i,s.collapsed+=i,s.widgetHeight=Math.max(s.widgetHeight,e),s.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof qs)&&!this.isCovered?this.nodes.push(new qs(0,-1,0)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let s of this.nodes)s instanceof qs&&s.updateHeight(this.oracle,i),i+=s?s.length:1;return this.nodes}static build(e,n,i,s){let r=new bA(i,e);return Mt.spans(n,i,s,r,0),r.finish(i)}}function F2e(t,e,n){let i=new B2e;return Mt.compare(t,e,n,i,0),i.changes}class B2e{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,s){(e<n||i&&i.heightRelevant||s&&s.heightRelevant)&&Ku(e,n,this.changes,5)}}function V2e(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,s=i.defaultView||window,r=Math.max(0,n.left),o=Math.min(s.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(s.innerHeight,n.bottom);for(let c=t.parentNode;c&&c!=i.body;)if(c.nodeType==1){let u=c,h=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&h.overflow!="visible"){let p=u.getBoundingClientRect();r=Math.max(r,p.left),o=Math.min(o,p.right),a=Math.max(a,p.top),l=Math.min(c==t.parentNode?s.innerHeight:l,p.bottom)}c=h.position=="absolute"||h.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:r-n.left,right:Math.max(r,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function j2e(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function z2e(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class d2{constructor(e,n,i,s){this.from=e,this.to=n,this.size=i,this.displaySize=s}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let s=e[i],r=n[i];if(s.from!=r.from||s.to!=r.to||s.size!=r.size)return!1}return!0}draw(e,n){return et.replace({widget:new Z2e(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class Z2e extends Uo{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Z8{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=q8,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=un.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(mA).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new _2e(n),this.stateDeco=X8(e),this.heightMap=ts.empty().applyChanges(this.stateDeco,Zt.empty,this.heightOracle.setDoc(e.doc),[new xr(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=et.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let s=i?n.head:n.anchor;if(!e.some(({from:r,to:o})=>s>=r&&s<=o)){let{from:r,to:o}=this.lineBlockAt(s);e.push(new mg(r,o))}}return this.viewports=e.sort((i,s)=>i.from-s.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?q8:new vA(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Yh(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=X8(this.state);let s=e.changedRanges,r=xr.extendWithRanges(s,F2e(i,this.stateDeco,e?e.changes:ti.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);j8(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),r),(this.heightMap.height!=o||Qd)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let l=r.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let c=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&(e.selectionSet||e.focusChanged)&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(FI)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),s=this.heightOracle,r=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?un.RTL:un.LTR;let o=this.heightOracle.mustRefreshForWrapping(r)||this.mustMeasureContent==="refresh",a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,u=0;if(a.width&&a.height){let{scaleX:D,scaleY:M}=SI(n,a);(D>.005&&Math.abs(this.scaleX-D)>.005||M>.005&&Math.abs(this.scaleY-M)>.005)&&(this.scaleX=D,this.scaleY=M,c|=16,o=l=!0)}let h=(parseInt(i.paddingTop)||0)*this.scaleY,p=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=h||this.paddingBottom!=p)&&(this.paddingTop=h,this.paddingBottom=p,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let m=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=m&&(this.scrollAnchorHeight=-1,this.scrollTop=m),this.scrolledToBottom=AI(e.scrollDOM);let y=(this.printing?z2e:V2e)(n,this.paddingTop),O=y.top-this.pixelViewport.top,S=y.bottom-this.pixelViewport.bottom;this.pixelViewport=y;let x=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(x!=this.inView&&(this.inView=x,x&&(l=!0)),!this.inView&&!this.scrollTarget&&!j2e(e.dom))return 0;let T=a.width;if((this.contentDOMWidth!=T||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),l){let D=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(D)&&(o=!0),o||s.lineWrapping&&Math.abs(T-this.contentDOMWidth)>s.charWidth){let{lineHeight:M,charWidth:L,textHeight:j}=e.docView.measureTextSize();o=M>0&&s.refresh(r,M,L,j,Math.max(5,T/L),D),o&&(e.docView.minWidth=0,c|=16)}O>0&&S>0?u=Math.max(O,S):O<0&&S<0&&(u=Math.min(O,S)),j8();for(let M of this.viewports){let L=M.from==this.viewport.from?D:e.docView.measureVisibleLineHeights(M);this.heightMap=(o?ts.empty().applyChanges(this.stateDeco,Zt.empty,this.heightOracle,[new xr(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,o,new E2e(M.from,L))}Qd&&(c|=2)}let k=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return k&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(c&2||k)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,r=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new mg(s.lineAt(o-i*1e3,fn.ByHeight,r,0,0).from,s.lineAt(a+(1-i)*1e3,fn.ByHeight,r,0,0).to);if(n){let{head:c}=n.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),h=s.lineAt(c,fn.ByPos,r,0,0),p;n.y=="center"?p=(h.top+h.bottom)/2-u/2:n.y=="start"||n.y=="nearest"&&c<l.from?p=h.top:p=h.bottom-u,l=new mg(s.lineAt(p-1e3/2,fn.ByHeight,r,0,0).from,s.lineAt(p+u+1e3/2,fn.ByHeight,r,0,0).to)}}return l}mapViewport(e,n){let i=n.mapPos(e.from,-1),s=n.mapPos(e.to,1);return new mg(this.heightMap.lineAt(i,fn.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,fn.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,fn.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(n,fn.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||s<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||r>=a+Math.max(10,Math.min(i,250)))&&s>o-2*1e3&&r<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let s of e)n.touchesRange(s.from,s.to)||i.push(new d2(n.mapPos(s.from),n.mapPos(s.to),s.size,s.displaySize));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,s=i?1e4:2e3,r=s>>1,o=s<<1;if(this.defaultTextDirection!=un.LTR&&!i)return[];let a=[],l=(u,h,p,m)=>{if(h-u<r)return;let y=this.state.selection.main,O=[y.from];y.empty||O.push(y.to);for(let x of O)if(x>u&&x<h){l(u,x-10,p,m),l(x+10,h,p,m);return}let S=X2e(e,x=>x.from>=p.from&&x.to<=p.to&&Math.abs(x.from-u)<r&&Math.abs(x.to-h)<r&&!O.some(T=>x.from<T&&x.to>T));if(!S){if(h<p.to&&n&&i&&n.visibleRanges.some(k=>k.from<=h&&k.to>=h)){let k=n.moveToLineBoundary(fe.cursor(h),!1,!0).head;k>u&&(h=k)}let x=this.gapSize(p,u,h,m),T=i||x<2e6?x:2e6;S=new d2(u,h,x,T)}a.push(S)},c=u=>{if(u.length<o||u.type!=Ci.Text)return;let h=q2e(u.from,u.to,this.stateDeco);if(h.total<o)return;let p=this.scrollTarget?this.scrollTarget.range.head:null,m,y;if(i){let O=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,S,x;if(p!=null){let T=yg(h,p),k=((this.visibleBottom-this.visibleTop)/2+O)/u.height;S=T-k,x=T+k}else S=(this.visibleTop-u.top-O)/u.height,x=(this.visibleBottom-u.top+O)/u.height;m=gg(h,S),y=gg(h,x)}else{let O=h.total*this.heightOracle.charWidth,S=s*this.heightOracle.charWidth,x=0;if(O>2e6)for(let L of e)L.from>=u.from&&L.from<u.to&&L.size!=L.displaySize&&L.from*this.heightOracle.charWidth+x<this.pixelViewport.left&&(x=L.size-L.displaySize);let T=this.pixelViewport.left+x,k=this.pixelViewport.right+x,D,M;if(p!=null){let L=yg(h,p),j=((k-T)/2+S)/O;D=L-j,M=L+j}else D=(T-S)/O,M=(k+S)/O;m=gg(h,D),y=gg(h,M)}m>u.from&&l(u.from,m,u,h),y<u.to&&l(y,u.to,u,h)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(c):c(u);return a}gapSize(e,n,i,s){let r=yg(s,i)-yg(s,n);return this.heightOracle.lineWrapping?e.height*r:s.total*this.heightOracle.charWidth*r}updateLineGaps(e){d2.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=et.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let i=[];Mt.spans(n,this.viewport.from,this.viewport.to,{span(r,o){i.push({from:r,to:o})},point(){}},20);let s=0;if(i.length!=this.visibleRanges.length)s=12;else for(let r=0;r<i.length&&!(s&8);r++){let o=this.visibleRanges[r],a=i[r];(o.from!=a.from||o.to!=a.to)&&(s|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(s|=8))}return this.visibleRanges=i,s}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Yh(this.heightMap.lineAt(e,fn.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||Yh(this.heightMap.lineAt(this.scaler.fromDOM(e),fn.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Yh(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class mg{constructor(e,n){this.from=e,this.to=n}}function q2e(t,e,n){let i=[],s=t,r=0;return Mt.spans(n,t,e,{span(){},point(o,a){o>s&&(i.push({from:s,to:o}),r+=o-s),s=a}},20),s<e&&(i.push({from:s,to:e}),r+=e-s),{total:r,ranges:i}}function gg({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let s=0;;s++){let{from:r,to:o}=e[s],a=o-r;if(i<=a)return r+i;i-=a}}function yg(t,e){let n=0;for(let{from:i,to:s}of t.ranges){if(e<=s){n+=e-i;break}n+=s-i}return n/t.total}function X2e(t,e){for(let n of t)if(e(n))return n}const q8={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};function X8(t){let e=t.facet(X1).filter(i=>typeof i!="function"),n=t.facet(gA).filter(i=>typeof i!="function");return n.length&&e.push(Mt.join(n)),e}class vA{constructor(e,n,i){let s=0,r=0,o=0;this.viewports=i.map(({from:a,to:l})=>{let c=n.lineAt(a,fn.ByPos,e,0,0).top,u=n.lineAt(l,fn.ByPos,e,0,0).bottom;return s+=u-c,{from:a,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(n.height-s);for(let a of this.viewports)a.domTop=o+(a.top-r)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),r=a.bottom}toDOM(e){for(let n=0,i=0,s=0;;n++){let r=n<this.viewports.length?this.viewports[n]:null;if(!r||e<r.top)return s+(e-i)*this.scale;if(e<=r.bottom)return r.domTop+(e-r.top);i=r.bottom,s=r.domBottom}}fromDOM(e){for(let n=0,i=0,s=0;;n++){let r=n<this.viewports.length?this.viewports[n]:null;if(!r||e<r.domTop)return i+(e-s)/this.scale;if(e<=r.domBottom)return r.top+(e-r.domTop);i=r.bottom,s=r.domBottom}}eq(e){return e instanceof vA?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,i)=>n.from==e.viewports[i].from&&n.to==e.viewports[i].to):!1}}function Yh(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new Ur(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(s=>Yh(s,e)):t._content)}const Og=Ve.define({combine:t=>t.join(" ")}),Dw=Ve.define({combine:t=>t.indexOf(!0)>-1}),Mw=_l.newName(),aR=_l.newName(),lR=_l.newName(),cR={"&light":"."+aR,"&dark":"."+lR};function Iw(t,e,n){return new _l(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,s=>{if(s=="&")return t;if(!n||!n[s])throw new RangeError(`Unsupported selector: ${s}`);return n[s]}):t+" "+i}})}const W2e=Iw("."+Mw,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},cR),G2e={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},h2=je.ie&&je.ie_version<=11;class U2e{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new xbe,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(je.ie&&je.ie_version<=11||je.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&je.android&&e.constructor.EDIT_CONTEXT!==!1&&!(je.chrome&&je.chrome_version<126)&&(this.editContext=new Y2e(e),e.state.facet(va)&&(e.contentDOM.editContext=this.editContext.editContext)),h2&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,s=this.selectionRange;if(i.state.facet(va)?i.root.activeElement!=this.dom:!yf(this.dom,s))return;let r=s.anchorNode&&i.docView.tile.nearest(s.anchorNode);if(r&&r.isWidget()&&r.widget.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(je.ie&&je.ie_version<=11||je.android&&je.chrome)&&!i.state.selection.main.empty&&s.focusNode&&Of(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Jf(e.root);if(!n)return!1;let i=je.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&H2e(this.view,n)||n;if(!i||this.selectionRange.eq(i))return!1;let s=yf(this.dom,i);return s&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&Pbe(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),s&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,G2e),h2&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),h2&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let s=()=>{let r=this.delayedAndroidKey;r&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=r.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&r.force&&Ju(this.dom,r.key,r.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,s=!1;for(let r of e){let o=this.readMutation(r);o&&(o.typeOver&&(s=!0),n==-1?{from:n,to:i}=o:(n=Math.min(o.from,n),i=Math.max(o.to,i)))}return{from:n,to:i,typeOver:s}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),s=this.selectionChanged&&yf(this.dom,this.selectionRange);if(e<0&&!s)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new p2e(this.view,e,n,i);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let i=this.view.state,s=HI(this.view,n);return this.view.state==i&&(n.domChanged||n.newSel&&!f0(this.view.state.selection,n.newSel.main))&&this.view.update([]),s}readMutation(e){let n=this.view.docView.tile.nearest(e.target);if(!n||n.isWidget())return null;if(n.markDirty(e.type=="attributes"),e.type=="childList"){let i=W8(n,e.previousSibling||e.target.previousSibling,-1),s=W8(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:s?n.posBefore(s):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(va)!=e.state.facet(va)&&(e.view.contentDOM.editContext=e.state.facet(va)?this.editContext.editContext:null))}destroy(){var e,n,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function W8(t,e,n){for(;e;){let i=Un.get(e);if(i&&i.parent==t)return i;let s=e.parentNode;e=s!=t.dom?s:n>0?e.nextSibling:e.previousSibling}return null}function G8(t,e){let n=e.startContainer,i=e.startOffset,s=e.endContainer,r=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor,1);return Of(o.node,o.offset,s,r)&&([n,i,s,r]=[s,r,n,i]),{anchorNode:n,anchorOffset:i,focusNode:s,focusOffset:r}}function H2e(t,e){if(e.getComposedRanges){let s=e.getComposedRanges(t.root)[0];if(s)return G8(t,s)}let n=null;function i(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?G8(t,n):null}class Y2e{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let s=e.state.selection.main,{anchor:r,head:o}=s,a=this.toEditorPos(i.updateRangeStart),l=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:a,drifted:!1});let c=l-a>i.text.length;a==this.from&&r<this.from?a=r:l==this.to&&r>this.to&&(l=r);let u=YI(e.state.sliceDoc(a,l),i.text,(c?s.from:s.to)-a,c?"end":null);if(!u){let p=fe.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));f0(p,s)||e.dispatch({selection:p,userEvent:"select"});return}let h={from:u.from+a,to:u.toA+a,insert:Zt.of(i.text.slice(u.from,u.toB).split(`
`))};if((je.mac||je.android)&&h.from==o-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(h={from:a,to:l,insert:Zt.of([i.text.replace("."," ")])}),this.pendingContextChange=h,!e.state.readOnly){let p=this.to-this.from+(h.to-h.from+h.insert.length);OA(e,h,fe.single(this.toEditorPos(i.selectionStart,p),this.toEditorPos(i.selectionEnd,p)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),h.from<h.to&&!h.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(n.text.slice(Math.max(0,i.updateRangeStart-1),Math.min(n.text.length,i.updateRangeStart+1)))&&this.handlers.compositionend(i)},this.handlers.characterboundsupdate=i=>{let s=[],r=null;for(let o=this.toEditorPos(i.rangeStart),a=this.toEditorPos(i.rangeEnd);o<a;o++){let l=e.coordsForChar(o);r=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||r||new DOMRect,s.push(r)}n.updateCharacterBounds(i.rangeStart,s)},this.handlers.textformatupdate=i=>{let s=[];for(let r of i.getTextFormats()){let o=r.underlineStyle,a=r.underlineThickness;if(!/none/i.test(o)&&!/none/i.test(a)){let l=this.toEditorPos(r.rangeStart),c=this.toEditorPos(r.rangeEnd);if(l<c){let u=`text-decoration: underline ${/^[a-z]/.test(o)?o+" ":o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${/thin/i.test(a)?1:2}px`;s.push(et.mark({attributes:{style:u}}).range(l,c))}}}e.dispatch({effects:VI.of(et.set(s))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)n.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let s=Jf(i.root);s&&s.rangeCount&&this.editContext.updateSelectionBounds(s.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,i=!1,s=this.pendingContextChange;return e.changes.iterChanges((r,o,a,l,c)=>{if(i)return;let u=c.length-(o-r);if(s&&o>=s.to)if(s.from==r&&s.to==o&&s.insert.eq(c)){s=this.pendingContextChange=null,n+=u,this.to+=u;return}else s=null,this.revertPending(e.state);if(r+=n,o+=n,o<=this.from)this.from+=u,this.to+=u;else if(r<this.to){if(r<this.from||o>this.to||this.to-this.from+c.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(r),this.toContextPos(o),c.toString()),this.to+=u}n+=u}),s&&!i&&this.revertPending(e.state),!i}update(e){let n=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(s=>!s.isUserEvent("input.type")&&s.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),s=this.toContextPos(n.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=s)&&this.editContext.updateSelection(i,s)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Le{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(s=>s.forEach(r=>i(r,this)))||(s=>this.update(s)),this.dispatch=this.dispatch.bind(this),this._root=e.root||kbe(e.parent)||document,this.viewState=new Z8(e.state||Vt.create(e)),e.scrollTo&&e.scrollTo.is(hg)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Qu).map(s=>new o2(s));for(let s of this.plugins)s.update(this);this.observer=new U2e(this),this.inputState=new O2e(this),this.inputState.ensureHandlers(this.plugins),this.docView=new M8(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>{this.viewState.mustMeasureContent="refresh",this.requestMeasure()})}dispatch(...e){let n=e.length==1&&e[0]instanceof Wn?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,s,r=this.state;for(let p of e){if(p.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=p.state}if(this.destroyed){this.viewState.state=r;return}let o=this.hasFocus,a=0,l=null;e.some(p=>p.annotation(iR))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=sR(r,o),l||(a=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(u=null)):this.observer.clear(),r.facet(Vt.phrases)!=this.state.facet(Vt.phrases))return this.setState(r);s=u0.create(this,r,e),s.flags|=a;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let p of e){if(h&&(h=h.map(p.changes)),p.scrollIntoView){let{main:m}=p.state.selection;h=new ed(m.empty?m:fe.cursor(m.head,m.head>m.anchor?-1:1))}for(let m of p.effects)m.is(hg)&&(h=m.value.clip(this.state))}this.viewState.update(s,h),this.bidiCache=m0.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),n=this.docView.update(s),this.state.facet(Uh)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(p=>p.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(Og)!=s.state.facet(Og)&&(this.viewState.mustMeasureContent=!0),(n||i||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!s.empty)for(let p of this.state.facet(xw))try{p(s)}catch(m){As(this.state,m,"update listener")}(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!HI(this,u)&&c.force&&Ju(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new Z8(e),this.plugins=e.facet(Qu).map(i=>new o2(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new M8(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Qu),i=e.state.facet(Qu);if(n!=i){let s=[];for(let r of i){let o=n.indexOf(r);if(o<0)s.push(new o2(r));else{let a=this.plugins[o];a.mustUpdate=e,s.push(a)}}for(let r of this.plugins)r.mustUpdate!=e&&r.destroy(this);this.plugins=s,this.pluginMap.clear()}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this);n!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(i){As(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,s=i.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:o}=this.viewState;Math.abs(s-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(AI(i))r=-1,o=this.viewState.heightMap.height;else{let m=this.viewState.scrollAnchorAt(s);r=m.from,o=m.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(m=>{try{return m.read(this)}catch(y){return As(this.state,y),U8}}),h=u0.create(this,this.state,[]),p=!1;h.flags|=l,n?n.flags|=l:n=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),p=this.docView.update(h),p&&this.docViewUpdate());for(let m=0;m<c.length;m++)if(u[m]!=U8)try{let y=c[m];y.write&&y.write(u[m],this)}catch(y){As(this.state,y)}if(p&&this.docView.updateSelection(!0),!h.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let y=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-o;if(y>1||y<-1){s=s+y,i.scrollTop=s/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(xw))a(n)}get themeClasses(){return Mw+" "+(this.state.facet(Dw)?lR:aR)+" "+this.state.facet(Og)}updateAttrs(){let e=H8(this,jI,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(va)?"true":"false",class:"cm-content",style:`${je.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),H8(this,mA,n);let i=this.observer.ignore(()=>{let s=x8(this.contentDOM,this.contentAttrs,n),r=x8(this.dom,this.editorAttrs,e);return s||r});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let s of i.effects)if(s.is(Le.announce)){n&&(this.announceDOM.textContent=""),n=!1;let r=this.announceDOM.appendChild(document.createElement("div"));r.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(Uh);let e=this.state.facet(Le.cspNonce);_l.mount(this.root,this.styleModules.concat(W2e).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return u2(this,e,I8(this,e,n,i))}moveByGroup(e,n){return u2(this,e,I8(this,e,n,i=>l2e(this,e.head,i)))}visualLineSide(e,n){let i=this.bidiSpans(e),s=this.textDirectionAt(e.from),r=i[n?i.length-1:0];return fe.cursor(r.side(n,s)+e.from,r.forward(!n,s)?1:-1)}moveToLineBoundary(e,n,i=!0){return a2e(this,e,n,i)}moveVertically(e,n,i){return u2(this,e,c2e(this,e,n,i))}domAtPos(e,n=1){return this.docView.domAtPos(e,n)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){this.readMeasured();let i=Tw(this,e,n);return i&&i.pos}posAndSideAtCoords(e,n=!0){return this.readMeasured(),Tw(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let s=this.state.doc.lineAt(e),r=this.bidiSpans(s),o=r[Eo.find(r,e-s.from,-1,n)];return c0(i,o.dir==un.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(LI)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>K2e)return DI(e.length);let n=this.textDirectionAt(e.from),i;for(let r of this.bidiCache)if(r.from==e.from&&r.dir==n&&(r.fresh||$I(r.isolates,i=T8(this,e))))return r.order;i||(i=T8(this,e));let s=_be(e.text,n,i);return this.bidiCache.push(new m0(e.from,e.to,n,i,!0,s)),s}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||je.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{CI(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return hg.of(new ed(typeof e=="number"?fe.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return hg.of(new ed(fe.cursor(i.from),"start","start",i.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return zn.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return zn.define(()=>({}),{eventObservers:e})}static theme(e,n){let i=_l.newName(),s=[Og.of(i),Uh.of(Iw(`.${i}`,e))];return n&&n.dark&&s.push(Dw.of(!0)),s}static baseTheme(e){return Zl.lowest(Uh.of(Iw("."+Mw,e,cR)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),s=i&&Un.get(i)||Un.get(e);return((n=s==null?void 0:s.root)===null||n===void 0?void 0:n.view)||null}}Le.styleModule=Uh;Le.inputHandler=QI;Le.clipboardInputFilter=fA;Le.clipboardOutputFilter=pA;Le.scrollHandler=BI;Le.focusChangeEffect=NI;Le.perLineTextDirection=LI;Le.exceptionSink=EI;Le.updateListener=xw;Le.editable=va;Le.mouseSelectionStyle=_I;Le.dragMovesSelection=RI;Le.clickAddsSelectionRange=II;Le.decorations=X1;Le.blockWrappers=zI;Le.outerDecorations=gA;Le.atomicRanges=Zp;Le.bidiIsolatedRanges=ZI;Le.scrollMargins=qI;Le.darkTheme=Dw;Le.cspNonce=Ve.define({combine:t=>t.length?t[0]:""});Le.contentAttributes=mA;Le.editorAttributes=jI;Le.lineWrapping=Le.contentAttributes.of({class:"cm-lineWrapping"});Le.announce=ht.define();const K2e=4096,U8={};class m0{constructor(e,n,i,s,r,o){this.from=e,this.to=n,this.dir=i,this.isolates=s,this.fresh=r,this.order=o}static update(e,n){if(n.empty&&!e.some(r=>r.fresh))return e;let i=[],s=e.length?e[e.length-1].dir:un.LTR;for(let r=Math.max(0,e.length-10);r<e.length;r++){let o=e[r];o.dir==s&&!n.touchesRange(o.from,o.to)&&i.push(new m0(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function H8(t,e,n){for(let i=t.state.facet(e),s=i.length-1;s>=0;s--){let r=i[s],o=typeof r=="function"?r(t):r;o&&uA(o,n)}return n}const J2e=je.mac?"mac":je.windows?"win":je.linux?"linux":"key";function eve(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let s,r,o,a;for(let l=0;l<n.length-1;++l){const c=n[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))s=!0;else if(/^(c|ctrl|control)$/i.test(c))r=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:r=!0;else throw new Error("Unrecognized modifier name: "+c)}return s&&(i="Alt-"+i),r&&(i="Ctrl-"+i),a&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function bg(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const tve=Zl.default(Le.domEventHandlers({keydown(t,e){return dR(uR(e.state),t,e,"editor")}})),H1=Ve.define({enables:tve}),Y8=new WeakMap;function uR(t){let e=t.facet(H1),n=Y8.get(e);return n||Y8.set(e,n=sve(e.reduce((i,s)=>i.concat(s),[]))),n}function nve(t,e,n){return dR(uR(t.state),e,t,n)}let wl=null;const ive=4e3;function sve(t,e=J2e){let n=Object.create(null),i=Object.create(null),s=(o,a)=>{let l=i[o];if(l==null)i[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},r=(o,a,l,c,u)=>{var h,p;let m=n[o]||(n[o]=Object.create(null)),y=a.split(/ (?!$)/).map(x=>eve(x,e));for(let x=1;x<y.length;x++){let T=y.slice(0,x).join(" ");s(T,!0),m[T]||(m[T]={preventDefault:!0,stopPropagation:!1,run:[k=>{let D=wl={view:k,prefix:T,scope:o};return setTimeout(()=>{wl==D&&(wl=null)},ive),!0}]})}let O=y.join(" ");s(O,!1);let S=m[O]||(m[O]={preventDefault:!1,stopPropagation:!1,run:((p=(h=m._any)===null||h===void 0?void 0:h.run)===null||p===void 0?void 0:p.slice())||[]});l&&S.run.push(l),c&&(S.preventDefault=!0),u&&(S.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let u=n[c]||(n[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:h}=o;for(let p in u)u[p].run.push(m=>h(m,Rw))}let l=o[e]||o.key;if(l)for(let c of a)r(c,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&r(c,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}let Rw=null;function dR(t,e,n,i){Rw=e;let s=ybe(e),r=Os(s,0),o=Io(r)==s.length&&s!=" ",a="",l=!1,c=!1,u=!1;wl&&wl.view==n&&wl.scope==i&&(a=wl.prefix+" ",JI.indexOf(e.keyCode)<0&&(c=!0,wl=null));let h=new Set,p=S=>{if(S){for(let x of S.run)if(!h.has(x)&&(h.add(x),x(n)))return S.stopPropagation&&(u=!0),!0;S.preventDefault&&(S.stopPropagation&&(u=!0),c=!0)}return!1},m=t[i],y,O;return m&&(p(m[a+bg(s,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(je.windows&&e.ctrlKey&&e.altKey)&&!(je.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(y=El[e.keyCode])&&y!=s?(p(m[a+bg(y,e,!0)])||e.shiftKey&&(O=Yf[e.keyCode])!=s&&O!=y&&p(m[a+bg(O,e,!1)]))&&(l=!0):o&&e.shiftKey&&p(m[a+bg(s,e,!0)])&&(l=!0),!l&&p(m._any)&&(l=!0)),c&&(l=!0),l&&u&&e.stopPropagation(),Rw=null,l}class qp{constructor(e,n,i,s,r){this.className=e,this.left=n,this.top=i,this.width=s,this.height=r}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let s=e.coordsAtPos(i.head,i.assoc||1);if(!s)return[];let r=hR(e);return[new qp(n,s.left-r.left,s.top-r.top,null,s.bottom-s.top)]}else return rve(e,n,i)}}function hR(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==un.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function K8(t,e,n,i){let s=t.coordsAtPos(e,n*2);if(!s)return i;let r=t.dom.getBoundingClientRect(),o=(s.top+s.bottom)/2,a=t.posAtCoords({x:r.left+1,y:o}),l=t.posAtCoords({x:r.right-1,y:o});return a==null||l==null?i:{from:Math.max(i.from,Math.min(a,l)),to:Math.min(i.to,Math.max(a,l))}}function rve(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),s=Math.min(n.to,t.viewport.to),r=t.textDirection==un.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=hR(t),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),h=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),p=a.right-(u?parseInt(u.paddingRight):0),m=Pw(t,i,1),y=Pw(t,s,-1),O=m.type==Ci.Text?m:null,S=y.type==Ci.Text?y:null;if(O&&(t.lineWrapping||m.widgetLineBreaks)&&(O=K8(t,i,1,O)),S&&(t.lineWrapping||y.widgetLineBreaks)&&(S=K8(t,s,-1,S)),O&&S&&O.from==S.from&&O.to==S.to)return T(k(n.from,n.to,O));{let M=O?k(n.from,null,O):D(m,!1),L=S?k(null,n.to,S):D(y,!0),j=[];return(O||m).to<(S||y).from-(O&&S?1:0)||m.widgetLineBreaks>1&&M.bottom+t.defaultLineHeight/2<L.top?j.push(x(h,M.bottom,p,L.top)):M.bottom<L.top&&t.elementAtHeight((M.bottom+L.top)/2).type==Ci.Text&&(M.bottom=L.top=(M.bottom+L.top)/2),T(M).concat(j).concat(T(L))}function x(M,L,j,G){return new qp(e,M-l.left,L-l.top,Math.max(0,j-M),G-L)}function T({top:M,bottom:L,horizontal:j}){let G=[];for(let Z=0;Z<j.length;Z+=2)G.push(x(j[Z],M,j[Z+1],L));return G}function k(M,L,j){let G=1e9,Z=-1e9,K=[];function te(ye,ke,ge,Se,Oe){let Fe=t.coordsAtPos(ye,ye==j.to?-2:2),dt=t.coordsAtPos(ge,ge==j.from?2:-2);!Fe||!dt||(G=Math.min(Fe.top,dt.top,G),Z=Math.max(Fe.bottom,dt.bottom,Z),Oe==un.LTR?K.push(r&&ke?h:Fe.left,r&&Se?p:dt.right):K.push(!r&&Se?h:dt.left,!r&&ke?p:Fe.right))}let W=M??j.from,oe=L??j.to;for(let ye of t.visibleRanges)if(ye.to>W&&ye.from<oe)for(let ke=Math.max(ye.from,W),ge=Math.min(ye.to,oe);;){let Se=t.state.doc.lineAt(ke);for(let Oe of t.bidiSpans(Se)){let Fe=Oe.from+Se.from,dt=Oe.to+Se.from;if(Fe>=ge)break;dt>ke&&te(Math.max(Fe,ke),M==null&&Fe<=W,Math.min(dt,ge),L==null&&dt>=oe,Oe.dir)}if(ke=Se.to+1,ke>=ge)break}return K.length==0&&te(W,M==null,oe,L==null,t.textDirection),{top:G,bottom:Z,horizontal:K}}function D(M,L){let j=a.top+(L?M.top:M.bottom);return{top:j,bottom:j,horizontal:[]}}}function ove(t,e){return t.constructor==e.constructor&&t.eq(e)}class ave{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(iy)!=e.state.facet(iy)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(iy);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!ove(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let s of e)s.update&&n&&s.constructor&&this.drawn[i].constructor&&s.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(s.draw(),n);for(;n;){let s=n.nextSibling;n.remove(),n=s}this.drawn=e,je.safari&&je.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const iy=Ve.define();function fR(t){return[zn.define(e=>new ave(e,t)),iy.of(t)]}const tp=Ve.define({combine(t){return Go(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function lve(t={}){return[tp.of(t),cve,uve,dve,FI.of(!0)]}function pR(t){return t.startState.facet(tp)!=t.state.facet(tp)}const cve=fR({above:!0,markers(t){let{state:e}=t,n=e.facet(tp),i=[];for(let s of e.selection.ranges){let r=s==e.selection.main;if(s.empty||n.drawRangeCursor){let o=r?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=s.empty?s:fe.cursor(s.head,s.head>s.anchor?-1:1);for(let l of qp.forRange(t,o,a))i.push(l)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=pR(t);return n&&J8(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){J8(e.state,t)},class:"cm-cursorLayer"});function J8(t,e){e.style.animationDuration=t.facet(tp).cursorBlinkRate+"ms"}const uve=fR({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:qp.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||pR(t)},class:"cm-selectionLayer"}),dve=Zl.highest(Le.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),mR=ht.define({map(t,e){return t==null?null:e.mapPos(t)}}),Kh=Pi.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,i)=>i.is(mR)?i.value:n,t)}}),hve=zn.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(Kh);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Kh)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(Kh),n=e!=null&&t.coordsAtPos(e);if(!n)return null;let i=t.scrollDOM.getBoundingClientRect();return{left:n.left-i.left+t.scrollDOM.scrollLeft*t.scaleX,top:n.top-i.top+t.scrollDOM.scrollTop*t.scaleY,height:n.bottom-n.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/n+"px",this.cursor.style.height=t.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Kh)!=t&&this.view.dispatch({effects:mR.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function fve(){return[Kh,hve]}function eP(t,e,n,i,s){e.lastIndex=0;for(let r=t.iterRange(n,i),o=n,a;!r.next().done;o+=r.value.length)if(!r.lineBreak)for(;a=e.exec(r.value);)s(o+a.index,a)}function pve(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:s,to:r}of n)s=Math.max(t.state.doc.lineAt(s).from,s-e),r=Math.min(t.state.doc.lineAt(r).to,r+e),i.length&&i[i.length-1].to>=s?i[i.length-1].to=r:i.push({from:s,to:r});return i}class mve{constructor(e){const{regexp:n,decoration:i,decorate:s,boundary:r,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,s)this.addMatch=(a,l,c,u)=>s(u,c,c+a[0].length,a,l);else if(typeof i=="function")this.addMatch=(a,l,c,u)=>{let h=i(a,l,c);h&&u(c,c+a[0].length,h)};else if(i)this.addMatch=(a,l,c,u)=>u(c,c+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=r,this.maxLength=o}createDeco(e){let n=new La,i=n.add.bind(n);for(let{from:s,to:r}of pve(e,this.maxLength))eP(e.state.doc,this.regexp,s,r,(o,a)=>this.addMatch(a,e,o,i));return n.finish()}updateDeco(e,n){let i=1e9,s=-1;return e.docChanged&&e.changes.iterChanges((r,o,a,l)=>{l>=e.view.viewport.from&&a<=e.view.viewport.to&&(i=Math.min(a,i),s=Math.max(l,s))}),e.viewportMoved||s-i>1e3?this.createDeco(e.view):s>-1?this.updateRange(e.view,n.map(e.changes),i,s):n}updateRange(e,n,i,s){for(let r of e.visibleRanges){let o=Math.max(r.from,i),a=Math.min(r.to,s);if(a>=o){let l=e.state.doc.lineAt(o),c=l.to<a?e.state.doc.lineAt(a):l,u=Math.max(r.from,l.from),h=Math.min(r.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){u=o;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){h=a;break}}let p=[],m,y=(O,S,x)=>p.push(x.range(O,S));if(l==c)for(this.regexp.lastIndex=u-l.from;(m=this.regexp.exec(l.text))&&m.index<h-l.from;)this.addMatch(m,e,m.index+l.from,y);else eP(e.state.doc,this.regexp,u,h,(O,S)=>this.addMatch(S,e,O,y));n=n.update({filterFrom:u,filterTo:h,filter:(O,S)=>O<u||S>h,add:p})}}return n}}const _w=/x/.unicode!=null?"gu":"g",gve=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,_w),yve={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let f2=null;function Ove(){var t;if(f2==null&&typeof document<"u"&&document.body){let e=document.body.style;f2=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return f2||!1}const sy=Ve.define({combine(t){let e=Go(t,{render:null,specialChars:gve,addSpecialChars:null});return(e.replaceTabs=!Ove())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,_w)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,_w)),e}});function bve(t={}){return[sy.of(t),vve()]}let tP=null;function vve(){return tP||(tP=zn.fromClass(class{constructor(t){this.view=t,this.decorations=et.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(sy)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new mve({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:s}=n.state,r=Os(e[0],0);if(r==9){let o=s.lineAt(i),a=n.state.tabSize,l=ih(o.text,a,i-o.from);return et.replace({widget:new Ave((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[r]||(this.decorationCache[r]=et.replace({widget:new Cve(t,r)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(sy);t.startState.facet(sy)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const wve="";function Sve(t){return t>=32?wve:t==10?"":String.fromCharCode(9216+t)}class Cve extends Uo{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=Sve(this.code),i=e.state.phrase("Control character")+" "+(yve[this.code]||"0x"+this.code.toString(16)),s=this.options.render&&this.options.render(this.code,i,n);if(s)return s;let r=document.createElement("span");return r.textContent=n,r.title=i,r.setAttribute("aria-label",i),r.className="cm-specialChar",r}ignoreEvent(){return!1}}class Ave extends Uo{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function xve(){return Pve}const kve=et.line({class:"cm-activeLine"}),Pve=zn.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let s=t.lineBlockAt(i.head);s.from>e&&(n.push(kve.range(s.from)),e=s.from)}return et.set(n)}},{decorations:t=>t.decorations}),Ew=2e3;function Tve(t,e,n){let i=Math.min(e.line,n.line),s=Math.max(e.line,n.line),r=[];if(e.off>Ew||n.off>Ew||e.col<0||n.col<0){let o=Math.min(e.off,n.off),a=Math.max(e.off,n.off);for(let l=i;l<=s;l++){let c=t.doc.line(l);c.length<=a&&r.push(fe.range(c.from+o,c.to+a))}}else{let o=Math.min(e.col,n.col),a=Math.max(e.col,n.col);for(let l=i;l<=s;l++){let c=t.doc.line(l),u=pw(c.text,o,t.tabSize,!0);if(u<0)r.push(fe.cursor(c.to));else{let h=pw(c.text,a,t.tabSize);r.push(fe.range(c.from+u,c.from+h))}}}return r}function $ve(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}function nP(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),i=t.state.doc.lineAt(n),s=n-i.from,r=s>Ew?-1:s==i.length?$ve(t,e.clientX):ih(i.text,t.state.tabSize,n-i.from);return{line:i.number,col:r,off:s}}function Dve(t,e){let n=nP(t,e),i=t.state.selection;return n?{update(s){if(s.docChanged){let r=s.changes.mapPos(s.startState.doc.line(n.line).from),o=s.state.doc.lineAt(r);n={line:o.number,col:n.col,off:Math.min(n.off,o.length)},i=i.map(s.changes)}},get(s,r,o){let a=nP(t,s);if(!a)return i;let l=Tve(t.state,n,a);return l.length?o?fe.create(l.concat(i.ranges)):fe.create(l):i}}:null}function Mve(t){let e=n=>n.altKey&&n.button==0;return Le.mouseSelectionStyle.of((n,i)=>e(i)?Dve(n,i):null)}const Ive={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},Rve={style:"cursor: crosshair"};function _ve(t={}){let[e,n]=Ive[t.key||"Alt"],i=zn.fromClass(class{constructor(s){this.view=s,this.isDown=!1}set(s){this.isDown!=s&&(this.isDown=s,this.view.update([]))}},{eventObservers:{keydown(s){this.set(s.keyCode==e||n(s))},keyup(s){(s.keyCode==e||!n(s))&&this.set(!1)},mousemove(s){this.set(n(s))}}});return[i,Le.contentAttributes.of(s=>{var r;return!((r=s.plugin(i))===null||r===void 0)&&r.isDown?Rve:null})]}const vg="-10000px";class gR{constructor(e,n,i,s){this.facet=n,this.createTooltipView=i,this.removeTooltipView=s,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let r=null;this.tooltipViews=this.tooltips.map(o=>r=i(o,r))}update(e,n){var i;let s=e.state.facet(this.facet),r=s.filter(l=>l);if(s===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=n?[]:null;for(let l=0;l<r.length;l++){let c=r[l],u=-1;if(c){for(let h=0;h<this.tooltips.length;h++){let p=this.tooltips[h];p&&p.create==c.create&&(u=h)}if(u<0)o[l]=this.createTooltipView(c,l?o[l-1]:null),a&&(a[l]=!!c.above);else{let h=o[l]=this.tooltipViews[u];a&&(a[l]=n[u]),h.update&&h.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(i=l.destroy)===null||i===void 0||i.call(l));return n&&(a.forEach((l,c)=>n[c]=l),n.length=a.length),this.input=s,this.tooltips=r,this.tooltipViews=o,!0}}function Eve(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const p2=Ve.define({combine:t=>{var e,n,i;return{position:je.ios?"absolute":((e=t.find(s=>s.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(s=>s.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(s=>s.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||Eve}}}),iP=new WeakMap,wA=zn.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(p2);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new gR(t,SA,(n,i)=>this.createTooltip(n,i),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(p2);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let s of this.manager.tooltipViews)s.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let s of this.manager.tooltipViews)this.container.appendChild(s.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),i=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let s=document.createElement("div");s.className="cm-tooltip-arrow",n.dom.appendChild(s)}return n.dom.style.position=this.position,n.dom.style.top=vg,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(t=i.destroy)===null||t===void 0||t.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:r}=this.manager.tooltipViews[0];if(je.safari){let o=r.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}else n=!!r.offsetParent&&r.offsetParent!=this.container.ownerDocument.body}if(n||this.position=="absolute")if(this.parent){let r=this.parent.getBoundingClientRect();r.width&&r.height&&(t=r.width/this.parent.offsetWidth,e=r.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),s=yA(this.view);return{visible:{left:i.left+s.left,top:i.top+s.top,right:i.right-s.right,bottom:i.bottom-s.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((r,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(r.pos):this.view.coordsAtPos(r.pos)}),size:this.manager.tooltipViews.map(({dom:r})=>r.getBoundingClientRect()),space:this.view.state.facet(p2).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:n,space:i,scaleX:s,scaleY:r}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,h=t.pos[a],p=t.size[a];if(!h||l.clip!==!1&&(h.bottom<=Math.max(n.top,i.top)||h.top>=Math.min(n.bottom,i.bottom)||h.right<Math.max(n.left,i.left)-.1||h.left>Math.min(n.right,i.right)+.1)){u.style.top=vg;continue}let m=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,y=m?7:0,O=p.right-p.left,S=(e=iP.get(c))!==null&&e!==void 0?e:p.bottom-p.top,x=c.offset||Nve,T=this.view.textDirection==un.LTR,k=p.width>i.right-i.left?T?i.left:i.right-p.width:T?Math.max(i.left,Math.min(h.left-(m?14:0)+x.x,i.right-O)):Math.min(Math.max(i.left,h.left-O+(m?14:0)-x.x),i.right-O),D=this.above[a];!l.strictSide&&(D?h.top-S-y-x.y<i.top:h.bottom+S+y+x.y>i.bottom)&&D==i.bottom-h.bottom>h.top-i.top&&(D=this.above[a]=!D);let M=(D?h.top-i.top:i.bottom-h.bottom)-y;if(M<S&&c.resize!==!1){if(M<this.view.defaultLineHeight){u.style.top=vg;continue}iP.set(c,S),u.style.height=(S=M)/r+"px"}else u.style.height&&(u.style.height="");let L=D?h.top-S-y-x.y:h.bottom+y+x.y,j=k+O;if(c.overlap!==!0)for(let G of o)G.left<j&&G.right>k&&G.top<L+S&&G.bottom>L&&(L=D?G.top-S-2-y:G.bottom+y+2);if(this.position=="absolute"?(u.style.top=(L-t.parent.top)/r+"px",sP(u,(k-t.parent.left)/s)):(u.style.top=L/r+"px",sP(u,k/s)),m){let G=h.left+(T?x.x:-x.x)-(k+14-7);m.style.left=G/s+"px"}c.overlap!==!0&&o.push({left:k,top:L,right:j,bottom:L+S}),u.classList.toggle("cm-tooltip-above",D),u.classList.toggle("cm-tooltip-below",!D),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=vg}},{eventObservers:{scroll(){this.maybeMeasure()}}});function sP(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const Qve=Le.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Nve={x:0,y:0},SA=Ve.define({enables:[wA,Qve]}),g0=Ve.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class Y1{static create(e){return new Y1(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new gR(e,g0,(n,i)=>this.createHostedView(n,i),n=>n.dom.remove())}createHostedView(e,n){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let i of this.manager.tooltipViews){let s=i[e];if(s!==void 0){if(n===void 0)n=s;else if(n!==s)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const Lve=SA.compute([g0],t=>{let e=t.facet(g0);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var i;return(i=n.end)!==null&&i!==void 0?i:n.pos})),create:Y1.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class Fve{constructor(e,n,i,s,r){this.view=e,this.source=n,this.field=i,this.setHover=s,this.hoverTime=r,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,i=e.docView.tile.nearest(n.target);if(!i)return;let s,r=1;if(i.isWidget())s=i.posAtStart;else{if(s=e.posAtCoords(n),s==null)return;let a=e.coordsAtPos(s);if(!a||n.y<a.top||n.y>a.bottom||n.x<a.left-e.defaultCharacterWidth||n.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(s)).find(u=>u.from<=s&&u.to>=s),c=l&&l.dir==un.RTL?-1:1;r=n.x<a.left?-c:c}let o=this.source(e,s,r);if(o!=null&&o.then){let a=this.pending={pos:s};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>As(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(wA),n=e?e.manager.tooltips.findIndex(i=>i.create==Y1.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:s,tooltip:r}=this;if(s.length&&r&&!Bve(r.dom,e)||this.pending){let{pos:o}=s[0]||this.pending,a=(i=(n=s[0])===null||n===void 0?void 0:n.end)!==null&&i!==void 0?i:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!Vve(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=i=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),clearTimeout(this.restartTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const wg=4;function Bve(t,e){let{left:n,right:i,top:s,bottom:r}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();s=Math.min(a.top,s),r=Math.max(a.bottom,r)}return e.clientX>=n-wg&&e.clientX<=i+wg&&e.clientY>=s-wg&&e.clientY<=r+wg}function Vve(t,e,n,i,s,r){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>i||o.right<i||o.top>s||Math.min(o.bottom,a)<s)return!1;let l=t.posAtCoords({x:i,y:s},!1);return l>=e&&l<=n}function jve(t,e={}){let n=ht.define(),i=Pi.define({create(){return[]},update(s,r){if(s.length&&(e.hideOnChange&&(r.docChanged||r.selection)?s=[]:e.hideOn&&(s=s.filter(o=>!e.hideOn(r,o))),r.docChanged)){let o=[];for(let a of s){let l=r.changes.mapPos(a.pos,-1,vi.TrackDel);if(l!=null){let c=Object.assign(Object.create(null),a);c.pos=l,c.end!=null&&(c.end=r.changes.mapPos(c.end)),o.push(c)}}s=o}for(let o of r.effects)o.is(n)&&(s=o.value),o.is(zve)&&(s=[]);return s},provide:s=>g0.from(s)});return{active:i,extension:[i,zn.define(s=>new Fve(s,t,i,n,e.hoverTime||300)),Lve]}}function yR(t,e){let n=t.plugin(wA);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const zve=ht.define(),rP=Ve.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function CA(t,e){let n=t.plugin(OR),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const OR=zn.fromClass(class{constructor(t){this.input=t.state.facet(np),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(rP);this.top=new Sg(t,!0,e.topContainer),this.bottom=new Sg(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(rP);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Sg(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Sg(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(np);if(n!=this.input){let i=n.filter(l=>l),s=[],r=[],o=[],a=[];for(let l of i){let c=this.specs.indexOf(l),u;c<0?(u=l(t.view),a.push(u)):(u=this.panels[c],u.update&&u.update(t)),s.push(u),(u.top?r:o).push(u)}this.specs=i,this.panels=s,this.top.sync(r),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Le.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Sg{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=oP(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=oP(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function oP(t){let e=t.nextSibling;return t.remove(),e}const np=Ve.define({enables:OR});function Zve(t,e){let n,i=new Promise(o=>n=o),s=o=>qve(o,e,n);t.state.field(m2,!1)?t.dispatch({effects:bR.of(s)}):t.dispatch({effects:ht.appendConfig.of(m2.init(()=>[s]))});let r=vR.of(s);return{close:r,result:i.then(o=>((t.win.queueMicrotask||(l=>t.win.setTimeout(l,10)))(()=>{t.state.field(m2).indexOf(s)>-1&&t.dispatch({effects:r})}),o))}}const m2=Pi.define({create(){return[]},update(t,e){for(let n of e.effects)n.is(bR)?t=[n.value].concat(t):n.is(vR)&&(t=t.filter(i=>i!=n.value));return t},provide:t=>np.computeN([t],e=>e.field(t))}),bR=ht.define(),vR=ht.define();function qve(t,e,n){let i=e.content?e.content(t,()=>o(null)):null;if(!i){if(i=on("form"),e.input){let a=on("input",e.input);/^(text|password|number|email|tel|url)$/.test(a.type)&&a.classList.add("cm-textfield"),a.name||(a.name="input"),i.appendChild(on("label",(e.label||"")+": ",a))}else i.appendChild(document.createTextNode(e.label||""));i.appendChild(document.createTextNode(" ")),i.appendChild(on("button",{class:"cm-button",type:"submit"},e.submitLabel||"OK"))}let s=i.nodeName=="FORM"?[i]:i.querySelectorAll("form");for(let a=0;a<s.length;a++){let l=s[a];l.addEventListener("keydown",c=>{c.keyCode==27?(c.preventDefault(),o(null)):c.keyCode==13&&(c.preventDefault(),o(l))}),l.addEventListener("submit",c=>{c.preventDefault(),o(l)})}let r=on("div",i,on("button",{onclick:()=>o(null),"aria-label":t.state.phrase("close"),class:"cm-dialog-close",type:"button"},[""]));e.class&&(r.className=e.class),r.classList.add("cm-dialog");function o(a){r.contains(r.ownerDocument.activeElement)&&t.focus(),n(a)}return{dom:r,top:e.top,mount:()=>{if(e.focus){let a;typeof e.focus=="string"?a=i.querySelector(e.focus):a=i.querySelector("input")||i.querySelector("button"),a&&"select"in a?a.select():a&&"focus"in a&&a.focus()}}}}class Ba extends Rl{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Ba.prototype.elementClass="";Ba.prototype.toDOM=void 0;Ba.prototype.mapMode=vi.TrackBefore;Ba.prototype.startSide=Ba.prototype.endSide=-1;Ba.prototype.point=!0;const ry=Ve.define(),Xve=Ve.define(),Wve={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Mt.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},vf=Ve.define();function Gve(t){return[wR(),vf.of({...Wve,...t})]}const aP=Ve.define({combine:t=>t.some(e=>e)});function wR(t){return[Uve]}const Uve=zn.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(vf).map(e=>new cP(t,e)),this.fixed=!t.state.facet(aP);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(aP)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=Mt.iter(this.view.state.facet(ry),this.view.viewport.from),i=[],s=this.gutters.map(r=>new Hve(r,this.view.viewport,-this.view.documentPadding.top));for(let r of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(r.type)){let o=!0;for(let a of r.type)if(a.type==Ci.Text&&o){Qw(n,i,a.from);for(let l of s)l.line(this.view,a,i);o=!1}else if(a.widget)for(let l of s)l.widget(this.view,a)}else if(r.type==Ci.Text){Qw(n,i,r.from);for(let o of s)o.line(this.view,r,i)}else if(r.widget)for(let o of s)o.widget(this.view,r);for(let r of s)r.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(vf),n=t.state.facet(vf),i=t.docChanged||t.heightChanged||t.viewportChanged||!Mt.eq(t.startState.facet(ry),t.state.facet(ry),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let s of this.gutters)s.update(t)&&(i=!0);else{i=!0;let s=[];for(let r of n){let o=e.indexOf(r);o<0?s.push(new cP(this.view,r)):(this.gutters[o].update(t),s.push(this.gutters[o]))}for(let r of this.gutters)r.dom.remove(),s.indexOf(r)<0&&r.destroy();for(let r of s)r.config.side=="after"?this.getDOMAfter().appendChild(r.dom):this.dom.appendChild(r.dom);this.gutters=s}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>Le.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let i=n.dom.offsetWidth*e.scaleX,s=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==un.LTR?{left:i,right:s}:{right:i,left:s}})});function lP(t){return Array.isArray(t)?t:[t]}function Qw(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class Hve{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=Mt.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:s}=this,r=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==s.elements.length){let a=new SR(e,o,r,i);s.elements.push(a),s.dom.appendChild(a.dom)}else s.elements[this.i].update(e,o,r,i);this.height=n.bottom,this.i++}line(e,n,i){let s=[];Qw(this.cursor,s,n.from),i.length&&(s=s.concat(i));let r=this.gutter.config.lineMarker(e,n,s);r&&s.unshift(r);let o=this.gutter;s.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,s)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n),s=i?[i]:null;for(let r of e.state.facet(Xve)){let o=r(e,n.widget,n);o&&(s||(s=[])).push(o)}s&&this.addElement(e,n,s)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class cP{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,s=>{let r=s.target,o;if(r!=this.dom&&this.dom.contains(r)){for(;r.parentNode!=this.dom;)r=r.parentNode;let l=r.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=s.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[i](e,a,s)&&s.preventDefault()});this.markers=lP(n.markers(e)),n.initialSpacer&&(this.spacer=new SR(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=lP(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let i=e.view.viewport;return!Mt.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class SR{constructor(e,n,i,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,s)}update(e,n,i,s){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),Yve(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,n){let i="cm-gutterElement",s=this.dom.firstChild;for(let r=0,o=0;;){let a=o,l=r<n.length?n[r++]:null,c=!1;if(l){let u=l.elementClass;u&&(i+=" "+u);for(let h=o;h<this.markers.length;h++)if(this.markers[h].compare(l)){a=h,c=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(s);let h=s.nextSibling;s.remove(),s=h}}if(!l)break;l.toDOM&&(c?s=s.nextSibling:this.dom.insertBefore(l.toDOM(e),s)),c&&o++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function Yve(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const Kve=Ve.define(),Jve=Ve.define(),Nu=Ve.define({combine(t){return Go(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let s in n){let r=i[s],o=n[s];i[s]=r?(a,l,c)=>r(a,l,c)||o(a,l,c):o}return i}})}});class g2 extends Ba{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function y2(t,e){return t.state.facet(Nu).formatNumber(e,t.state)}const ewe=vf.compute([Nu],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(Kve)},lineMarker(e,n,i){return i.some(s=>s.toDOM)?null:new g2(y2(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,i)=>{for(let s of e.state.facet(Jve)){let r=s(e,n,i);if(r)return r}return null},lineMarkerChange:e=>e.startState.facet(Nu)!=e.state.facet(Nu),initialSpacer(e){return new g2(y2(e,uP(e.state.doc.lines)))},updateSpacer(e,n){let i=y2(n.view,uP(n.view.state.doc.lines));return i==e.number?e:new g2(i)},domEventHandlers:t.facet(Nu).domEventHandlers,side:"before"}));function twe(t={}){return[Nu.of(t),wR(),ewe]}function uP(t){let e=9;for(;e<t;)e=e*10+9;return e}const nwe=new class extends Ba{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},iwe=ry.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let s=t.doc.lineAt(i.head).from;s>n&&(n=s,e.push(nwe.range(s)))}return Mt.of(e)});function swe(){return iwe}const CR=1024;let rwe=0;class kr{constructor(e,n){this.from=e,this.to=n}}class Ct{constructor(e={}){this.id=rwe++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=ss.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}Ct.closedBy=new Ct({deserialize:t=>t.split(" ")});Ct.openedBy=new Ct({deserialize:t=>t.split(" ")});Ct.group=new Ct({deserialize:t=>t.split(" ")});Ct.isolate=new Ct({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});Ct.contextHash=new Ct({perNode:!0});Ct.lookAhead=new Ct({perNode:!0});Ct.mounted=new Ct({perNode:!0});class td{constructor(e,n,i,s=!1){this.tree=e,this.overlay=n,this.parser=i,this.bracketed=s}static get(e){return e&&e.props&&e.props[Ct.mounted.id]}}const owe=Object.create(null);class ss{constructor(e,n,i,s=0){this.name=e,this.props=n,this.id=i,this.flags=s}static define(e){let n=e.props&&e.props.length?Object.create(null):owe,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new ss(e.name||"",n,e.id,i);if(e.props){for(let r of e.props)if(Array.isArray(r)||(r=r(s)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[r[0].id]=r[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(Ct.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let s of i.split(" "))n[s]=e[i];return i=>{for(let s=i.prop(Ct.group),r=-1;r<(s?s.length:0);r++){let o=n[r<0?i.name:s[r]];if(o)return o}}}}ss.none=new ss("",Object.create(null),0,8);class AA{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let s=null;for(let r of e){let o=r(i);if(o){s||(s=Object.assign({},i.props));let a=o[1],l=o[0];l.combine&&l.id in s&&(a=l.combine(s[l.id],a)),s[l.id]=a}}n.push(s?new ss(i.name,s,i.id,i.flags):i)}return new AA(n)}}const Cg=new WeakMap,dP=new WeakMap;var en;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays",t[t.EnterBracketed=16]="EnterBracketed"})(en||(en={}));class xn{constructor(e,n,i,s,r){if(this.type=e,this.children=n,this.positions=i,this.length=s,this.props=null,r&&r.length){this.props=Object.create(null);for(let[o,a]of r)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=td.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let s=i.toString();s&&(n&&(n+=","),n+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new y0(this.topNode,e)}cursorAt(e,n=0,i=0){let s=Cg.get(this)||this.topNode,r=new y0(s);return r.moveTo(e,n),Cg.set(this,r._tree),r}get topNode(){return new Fi(this,0,0,null)}resolve(e,n=0){let i=ip(Cg.get(this)||this.topNode,e,n,!1);return Cg.set(this,i),i}resolveInner(e,n=0){let i=ip(dP.get(this)||this.topNode,e,n,!0);return dP.set(this,i),i}resolveStack(e,n=0){return cwe(this,e,n)}iterate(e){let{enter:n,leave:i,from:s=0,to:r=this.length}=e,o=e.mode||0,a=(o&en.IncludeAnonymous)>0;for(let l=this.cursor(o|en.IncludeAnonymous);;){let c=!1;if(l.from<=r&&l.to>=s&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&i&&(a||!l.type.isAnonymous)&&i(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:PA(ss.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,s)=>new xn(this.type,n,i,s,this.propValues),e.makeTree||((n,i,s)=>new xn(ss.none,n,i,s)))}static build(e){return uwe(e)}}xn.empty=new xn(ss.none,[],[],0);class xA{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new xA(this.buffer,this.index)}}class Nl{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return ss.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],s=this.set.types[n],r=s.name;if(/\W/.test(r)&&!s.isError&&(r=JSON.stringify(r)),e+=4,i==e)return r;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return r+"("+o.join(",")+")"}findChild(e,n,i,s,r){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(AR(r,s,o[l+1],o[l+2])&&(a=l,i>0));l=o[l+3]);return a}slice(e,n,i){let s=this.buffer,r=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){r[l++]=s[a++],r[l++]=s[a++]-i;let c=r[l++]=s[a++]-i;r[l++]=s[a++]-e,o=Math.max(o,c)}return new Nl(r,o,this.set)}}function AR(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function ip(t,e,n,i){for(var s;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof Fi&&t.index<0?null:t.parent;if(!o)return t;t=o}let r=i?0:en.IgnoreOverlays;if(i)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof Fi&&o.index<0&&((s=a.enter(e,n,r))===null||s===void 0?void 0:s.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,r);if(!o)return t;t=o}}class xR{cursor(e=0){return new y0(this,e)}getChild(e,n=null,i=null){let s=hP(this,e,n,i);return s.length?s[0]:null}getChildren(e,n=null,i=null){return hP(this,e,n,i)}resolve(e,n=0){return ip(this,e,n,!1)}resolveInner(e,n=0){return ip(this,e,n,!0)}matchContext(e){return Nw(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),i=this;for(;n;){let s=n.lastChild;if(!s||s.to!=n.to)break;s.type.isError&&s.from==s.to?(i=n,n=s.prevSibling):n=s}return i}get node(){return this}get next(){return this.parent}}class Fi extends xR{constructor(e,n,i,s){super(),this._tree=e,this.from=n,this.index=i,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,s,r=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=n>0?a.length:-1;e!=c;e+=n){let u=a[e],h=l[e]+o.from,p;if(!(!(r&en.EnterBracketed&&u instanceof xn&&(p=td.get(u))&&!p.overlay&&p.bracketed&&i>=h&&i<=h+u.length)&&!AR(s,i,h,h+u.length))){if(u instanceof Nl){if(r&en.ExcludeBuffers)continue;let m=u.findChild(0,u.buffer.length,n,i-h,s);if(m>-1)return new Qo(new awe(o,u,e,h),null,m)}else if(r&en.IncludeAnonymous||!u.type.isAnonymous||kA(u)){let m;if(!(r&en.IgnoreMounts)&&(m=td.get(u))&&!m.overlay)return new Fi(m.tree,h,e,o);let y=new Fi(u,h,e,o);return r&en.IncludeAnonymous||!y.type.isAnonymous?y:y.nextChild(n<0?u.children.length-1:0,n,i,s,r)}}}if(r&en.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}prop(e){return this._tree.prop(e)}enter(e,n,i=0){let s;if(!(i&en.IgnoreOverlays)&&(s=td.get(this._tree))&&s.overlay){let r=e-this.from,o=i&en.EnterBracketed&&s.bracketed;for(let{from:a,to:l}of s.overlay)if((n>0||o?a<=r:a<r)&&(n<0||o?l>=r:l>r))return new Fi(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function hP(t,e,n,i){let s=t.cursor(),r=[];if(!s.firstChild())return r;if(n!=null){for(let o=!1;!o;)if(o=s.type.is(n),!s.nextSibling())return r}for(;;){if(i!=null&&s.type.is(i))return r;if(s.type.is(e)&&r.push(s.node),!s.nextSibling())return i==null?r:[]}}function Nw(t,e,n=e.length-1){for(let i=t;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class awe{constructor(e,n,i,s){this.parent=e,this.buffer=n,this.index=i,this.start=s}}class Qo extends xR{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){super(),this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:s}=this.context,r=s.findChild(this.index+4,s.buffer[this.index+3],e,n-this.context.start,i);return r<0?null:new Qo(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}prop(e){return this.type.prop(e)}enter(e,n,i=0){if(i&en.ExcludeBuffers)return null;let{buffer:s}=this.context,r=s.findChild(this.index+4,s.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return r<0?null:new Qo(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Qo(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Qo(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,s=this.index+4,r=i.buffer[this.index+3];if(r>s){let o=i.buffer[this.index+1];e.push(i.slice(s,r,o)),n.push(0)}return new xn(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function kR(t){if(!t.length)return null;let e=0,n=t[0];for(let r=1;r<t.length;r++){let o=t[r];(o.from>n.from||o.to<n.to)&&(n=o,e=r)}let i=n instanceof Fi&&n.index<0?null:n.parent,s=t.slice();return i?s[e]=i:s.splice(e,1),new lwe(s,n)}class lwe{constructor(e,n){this.heads=e,this.node=n}get next(){return kR(this.heads)}}function cwe(t,e,n){let i=t.resolveInner(e,n),s=null;for(let r=i instanceof Fi?i:i.context.parent;r;r=r.parent)if(r.index<0){let o=r.parent;(s||(s=[i])).push(o.resolve(e,n)),r=o}else{let o=td.get(r.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new Fi(o.tree,o.overlay[0].from+r.from,-1,r);(s||(s=[i])).push(ip(a,e,n,!1))}}return s?kR(s):i}class y0{get name(){return this.type.name}constructor(e,n=0){if(this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,this.mode=n&~en.EnterBracketed,e instanceof Fi)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:s}=this.buffer;return this.type=n||s.set.types[s.buffer[e]],this.from=i+s.buffer[e+1],this.to=i+s.buffer[e+2],!0}yield(e){return e?e instanceof Fi?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:s}=this.buffer,r=s.findChild(this.index+4,s.buffer[this.index+3],e,n-this.buffer.start,i);return r<0?!1:(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&en.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&en.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&en.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let s=i<0?0:this.stack[i]+4;if(this.index!=s)return this.yieldBuf(n.findChild(s,this.index,-1,0,4))}else{let s=n.buffer[this.index+3];if(s<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(s)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let r=0;r<this.index;r++)if(s.buffer.buffer[r+3]<this.index)return!1;({index:n,parent:i}=s)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let r=n+e,o=e<0?-1:i._tree.children.length;r!=o;r+=e){let a=i._tree.children[r];if(this.mode&en.IncludeAnonymous||a instanceof Nl||!a.type.isAnonymous||kA(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let s=this.index,r=this.stack.length;r>=0;){for(let o=e;o;o=o._parent)if(o.index==s){if(s==this.index)return o;n=o,i=r+1;break e}s=this.stack[--r]}for(let s=i;s<this.stack.length;s++)n=new Qo(this.buffer,n,this.stack[s]);return this.bufferNode=new Qo(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(s=!0)}for(;;){if(s&&n&&n(this),s=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,s=!0}}}matchContext(e){if(!this.buffer)return Nw(this.node.parent,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let s=e.length-1,r=this.stack.length-1;s>=0;r--){if(r<0)return Nw(this._tree,e,s);let o=i[n.buffer[this.stack[r]]];if(!o.isAnonymous){if(e[s]&&e[s]!=o.name)return!1;s--}}return!0}}function kA(t){return t.children.some(e=>e instanceof Nl||!e.type.isAnonymous||kA(e))}function uwe(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:s=CR,reused:r=[],minRepeatType:o=i.types.length}=t,a=Array.isArray(n)?new xA(n,n.length):n,l=i.types,c=0,u=0;function h(M,L,j,G,Z,K){let{id:te,start:W,end:oe,size:ye}=a,ke=u,ge=c;if(ye<0)if(a.next(),ye==-1){let Je=r[te];j.push(Je),G.push(W-M);return}else if(ye==-3){c=te;return}else if(ye==-4){u=te;return}else throw new RangeError(`Unrecognized record size: ${ye}`);let Se=l[te],Oe,Fe,dt=W-M;if(oe-W<=s&&(Fe=S(a.pos-L,Z))){let Je=new Uint16Array(Fe.size-Fe.skip),ut=a.pos-Fe.size,Qt=Je.length;for(;a.pos>ut;)Qt=x(Fe.start,Je,Qt);Oe=new Nl(Je,oe-Fe.start,i),dt=Fe.start-M}else{let Je=a.pos-ye;a.next();let ut=[],Qt=[],Pt=te>=o?te:-1,xt=0,Ft=oe;for(;a.pos>Je;)Pt>=0&&a.id==Pt&&a.size>=0?(a.end<=Ft-s&&(y(ut,Qt,W,xt,a.end,Ft,Pt,ke,ge),xt=ut.length,Ft=a.end),a.next()):K>2500?p(W,Je,ut,Qt):h(W,Je,ut,Qt,Pt,K+1);if(Pt>=0&&xt>0&&xt<ut.length&&y(ut,Qt,W,xt,W,Ft,Pt,ke,ge),ut.reverse(),Qt.reverse(),Pt>-1&&xt>0){let ue=m(Se,ge);Oe=PA(Se,ut,Qt,0,ut.length,0,oe-W,ue,ue)}else Oe=O(Se,ut,Qt,oe-W,ke-oe,ge)}j.push(Oe),G.push(dt)}function p(M,L,j,G){let Z=[],K=0,te=-1;for(;a.pos>L;){let{id:W,start:oe,end:ye,size:ke}=a;if(ke>4)a.next();else{if(te>-1&&oe<te)break;te<0&&(te=ye-s),Z.push(W,oe,ye),K++,a.next()}}if(K){let W=new Uint16Array(K*4),oe=Z[Z.length-2];for(let ye=Z.length-3,ke=0;ye>=0;ye-=3)W[ke++]=Z[ye],W[ke++]=Z[ye+1]-oe,W[ke++]=Z[ye+2]-oe,W[ke++]=ke;j.push(new Nl(W,Z[2]-oe,i)),G.push(oe-M)}}function m(M,L){return(j,G,Z)=>{let K=0,te=j.length-1,W,oe;if(te>=0&&(W=j[te])instanceof xn){if(!te&&W.type==M&&W.length==Z)return W;(oe=W.prop(Ct.lookAhead))&&(K=G[te]+W.length+oe)}return O(M,j,G,Z,K,L)}}function y(M,L,j,G,Z,K,te,W,oe){let ye=[],ke=[];for(;M.length>G;)ye.push(M.pop()),ke.push(L.pop()+j-Z);M.push(O(i.types[te],ye,ke,K-Z,W-K,oe)),L.push(Z-j)}function O(M,L,j,G,Z,K,te){if(K){let W=[Ct.contextHash,K];te=te?[W].concat(te):[W]}if(Z>25){let W=[Ct.lookAhead,Z];te=te?[W].concat(te):[W]}return new xn(M,L,j,G,te)}function S(M,L){let j=a.fork(),G=0,Z=0,K=0,te=j.end-s,W={size:0,start:0,skip:0};e:for(let oe=j.pos-M;j.pos>oe;){let ye=j.size;if(j.id==L&&ye>=0){W.size=G,W.start=Z,W.skip=K,K+=4,G+=4,j.next();continue}let ke=j.pos-ye;if(ye<0||ke<oe||j.start<te)break;let ge=j.id>=o?4:0,Se=j.start;for(j.next();j.pos>ke;){if(j.size<0)if(j.size==-3||j.size==-4)ge+=4;else break e;else j.id>=o&&(ge+=4);j.next()}Z=Se,G+=ye,K+=ge}return(L<0||G==M)&&(W.size=G,W.start=Z,W.skip=K),W.size>4?W:void 0}function x(M,L,j){let{id:G,start:Z,end:K,size:te}=a;if(a.next(),te>=0&&G<o){let W=j;if(te>4){let oe=a.pos-(te-4);for(;a.pos>oe;)j=x(M,L,j)}L[--j]=W,L[--j]=K-M,L[--j]=Z-M,L[--j]=G}else te==-3?c=G:te==-4&&(u=G);return j}let T=[],k=[];for(;a.pos>0;)h(t.start||0,t.bufferStart||0,T,k,-1,0);let D=(e=t.length)!==null&&e!==void 0?e:T.length?k[0]+T[0].length:0;return new xn(l[t.topID],T.reverse(),k.reverse(),D)}const fP=new WeakMap;function oy(t,e){if(!t.isAnonymous||e instanceof Nl||e.type!=t)return 1;let n=fP.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof xn)){n=1;break}n+=oy(t,i)}fP.set(e,n)}return n}function PA(t,e,n,i,s,r,o,a,l){let c=0;for(let y=i;y<s;y++)c+=oy(t,e[y]);let u=Math.ceil(c*1.5/8),h=[],p=[];function m(y,O,S,x,T){for(let k=S;k<x;){let D=k,M=O[k],L=oy(t,y[k]);for(k++;k<x;k++){let j=oy(t,y[k]);if(L+j>=u)break;L+=j}if(k==D+1){if(L>u){let j=y[D];m(j.children,j.positions,0,j.children.length,O[D]+T);continue}h.push(y[D])}else{let j=O[k-1]+y[k-1].length-M;h.push(PA(t,y,O,D,k,M,j,null,l))}p.push(M+T-r)}}return m(e,n,i,s,0),(a||l)(h,p,o)}class PR{constructor(){this.map=new WeakMap}setBuffer(e,n,i){let s=this.map.get(e);s||this.map.set(e,s=new Map),s.set(n,i)}getBuffer(e,n){let i=this.map.get(e);return i&&i.get(n)}set(e,n){e instanceof Qo?this.setBuffer(e.context.buffer,e.index,n):e instanceof Fi&&this.map.set(e.tree,n)}get(e){return e instanceof Qo?this.getBuffer(e.context.buffer,e.index):e instanceof Fi?this.map.get(e.tree):void 0}cursorSet(e,n){e.buffer?this.setBuffer(e.buffer.buffer,e.index,n):this.map.set(e.tree,n)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class Ta{constructor(e,n,i,s,r=!1,o=!1){this.from=e,this.to=n,this.tree=i,this.offset=s,this.open=(r?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let s=[new Ta(0,e.length,e,0,!1,i)];for(let r of n)r.to>e.length&&s.push(r);return s}static applyChanges(e,n,i=128){if(!n.length)return e;let s=[],r=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<n.length?n[a]:null,h=u?u.fromA:1e9;if(h-l>=i)for(;o&&o.from<h;){let p=o;if(l>=p.from||h<=p.to||c){let m=Math.max(p.from,l)-c,y=Math.min(p.to,h)-c;p=m>=y?null:new Ta(m,y,p.tree,p.offset+c,a>0,!!u)}if(p&&s.push(p),o.to>h)break;o=r<e.length?e[r++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return s}}class TR{startParse(e,n,i){return typeof e=="string"&&(e=new dwe(e)),i=i?i.length?i.map(s=>new kr(s.from,s.to)):[new kr(0,0)]:[new kr(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let s=this.startParse(e,n,i);for(;;){let r=s.advance();if(r)return r}}}class dwe{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}function K1(t){return(e,n,i,s)=>new fwe(e,t,n,i,s)}class pP{constructor(e,n,i,s,r,o){this.parser=e,this.parse=n,this.overlay=i,this.bracketed=s,this.target=r,this.from=o}}function mP(t){if(!t.length||t.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(t))}class hwe{constructor(e,n,i,s,r,o,a,l){this.parser=e,this.predicate=n,this.mounts=i,this.index=s,this.start=r,this.bracketed=o,this.target=a,this.prev=l,this.depth=0,this.ranges=[]}}const Lw=new Ct({perNode:!0});class fwe{constructor(e,n,i,s,r){this.nest=n,this.input=i,this.fragments=s,this.ranges=r,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let i=this.baseParse.advance();if(!i)return null;if(this.baseParse=null,this.baseTree=i,this.startInner(),this.stoppedAt!=null)for(let s of this.inner)s.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let i=this.baseTree;return this.stoppedAt!=null&&(i=new xn(i.type,i.children,i.positions,i.length,i.propValues.concat([[Lw,this.stoppedAt]]))),i}let e=this.inner[this.innerDone],n=e.parse.advance();if(n){this.innerDone++;let i=Object.assign(Object.create(null),e.target.props);i[Ct.mounted.id]=new td(n,e.overlay,e.parser,e.bracketed),e.target.props=i}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let n=this.innerDone;n<this.inner.length;n++)this.inner[n].from<e&&(e=Math.min(e,this.inner[n].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let n=this.innerDone;n<this.inner.length;n++)this.inner[n].parse.stopAt(e)}startInner(){let e=new gwe(this.fragments),n=null,i=null,s=new y0(new Fi(this.baseTree,this.ranges[0].from,0,null),en.IncludeAnonymous|en.IgnoreMounts);e:for(let r,o;;){let a=!0,l;if(this.stoppedAt!=null&&s.from>=this.stoppedAt)a=!1;else if(e.hasNode(s)){if(n){let c=n.mounts.find(u=>u.frag.from<=s.from&&u.frag.to>=s.to&&u.mount.overlay);if(c)for(let u of c.mount.overlay){let h=u.from+c.pos,p=u.to+c.pos;h>=s.from&&p<=s.to&&!n.ranges.some(m=>m.from<p&&m.to>h)&&n.ranges.push({from:h,to:p})}}a=!1}else if(i&&(o=pwe(i.ranges,s.from,s.to)))a=o!=2;else if(!s.type.isAnonymous&&(r=this.nest(s,this.input))&&(s.from<s.to||!r.overlay)){s.tree||(mwe(s),n&&n.depth++,i&&i.depth++);let c=e.findMounts(s.from,r.parser);if(typeof r.overlay=="function")n=new hwe(r.parser,r.overlay,c,this.inner.length,s.from,!!r.bracketed,s.tree,n);else{let u=OP(this.ranges,r.overlay||(s.from<s.to?[new kr(s.from,s.to)]:[]));u.length&&mP(u),(u.length||!r.overlay)&&this.inner.push(new pP(r.parser,u.length?r.parser.startParse(this.input,bP(c,u),u):r.parser.startParse(""),r.overlay?r.overlay.map(h=>new kr(h.from-s.from,h.to-s.from)):null,!!r.bracketed,s.tree,u.length?u[0].from:s.from)),r.overlay?u.length&&(i={ranges:u,depth:0,prev:i}):a=!1}}else if(n&&(l=n.predicate(s))&&(l===!0&&(l=new kr(s.from,s.to)),l.from<l.to)){let c=n.ranges.length-1;c>=0&&n.ranges[c].to==l.from?n.ranges[c]={from:n.ranges[c].from,to:l.to}:n.ranges.push(l)}if(a&&s.firstChild())n&&n.depth++,i&&i.depth++;else for(;!s.nextSibling();){if(!s.parent())break e;if(n&&!--n.depth){let c=OP(this.ranges,n.ranges);c.length&&(mP(c),this.inner.splice(n.index,0,new pP(n.parser,n.parser.startParse(this.input,bP(n.mounts,c),c),n.ranges.map(u=>new kr(u.from-n.start,u.to-n.start)),n.bracketed,n.target,c[0].from))),n=n.prev}i&&!--i.depth&&(i=i.prev)}}}}function pwe(t,e,n){for(let i of t){if(i.from>=n)break;if(i.to>e)return i.from<=e&&i.to>=n?2:1}return 0}function gP(t,e,n,i,s,r){if(e<n){let o=t.buffer[e+1];i.push(t.slice(e,n,o)),s.push(o-r)}}function mwe(t){let{node:e}=t,n=[],i=e.context.buffer;do n.push(t.index),t.parent();while(!t.tree);let s=t.tree,r=s.children.indexOf(i),o=s.children[r],a=o.buffer,l=[r];function c(u,h,p,m,y,O){let S=n[O],x=[],T=[];gP(o,u,S,x,T,m);let k=a[S+1],D=a[S+2];l.push(x.length);let M=O?c(S+4,a[S+3],o.set.types[a[S]],k,D-k,O-1):e.toTree();return x.push(M),T.push(k-m),gP(o,a[S+3],h,x,T,m),new xn(p,x,T,y)}s.children[r]=c(0,a.length,ss.none,0,o.length,n.length-1);for(let u of l){let h=t.tree.children[u],p=t.tree.positions[u];t.yield(new Fi(h,p+t.from,u,t._tree))}}class yP{constructor(e,n){this.offset=n,this.done=!1,this.cursor=e.cursor(en.IncludeAnonymous|en.IgnoreMounts)}moveTo(e){let{cursor:n}=this,i=e-this.offset;for(;!this.done&&n.from<i;)n.to>=e&&n.enter(i,1,en.IgnoreOverlays|en.ExcludeBuffers)||n.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let n=this.cursor.tree;;){if(n==e.tree)return!0;if(n.children.length&&n.positions[0]==0&&n.children[0]instanceof xn)n=n.children[0];else break}return!1}}let gwe=class{constructor(e){var n;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let i=this.curFrag=e[0];this.curTo=(n=i.tree.prop(Lw))!==null&&n!==void 0?n:i.to,this.inner=new yP(i.tree,-i.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let n=this.curFrag=this.fragments[this.fragI];this.curTo=(e=n.tree.prop(Lw))!==null&&e!==void 0?e:n.to,this.inner=new yP(n.tree,-n.offset)}}findMounts(e,n){var i;let s=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let r=this.inner.cursor.node;r;r=r.parent){let o=(i=r.tree)===null||i===void 0?void 0:i.prop(Ct.mounted);if(o&&o.parser==n)for(let a=this.fragI;a<this.fragments.length;a++){let l=this.fragments[a];if(l.from>=r.to)break;l.tree==this.curFrag.tree&&s.push({frag:l,pos:r.from-l.offset,mount:o})}}}return s}};function OP(t,e){let n=null,i=e;for(let s=1,r=0;s<t.length;s++){let o=t[s-1].to,a=t[s].from;for(;r<i.length;r++){let l=i[r];if(l.from>=a)break;l.to<=o||(n||(i=n=e.slice()),l.from<o?(n[r]=new kr(l.from,o),l.to>a&&n.splice(r+1,0,new kr(a,l.to))):l.to>a?n[r--]=new kr(a,l.to):n.splice(r--,1))}}return i}function ywe(t,e,n,i){let s=0,r=0,o=!1,a=!1,l=-1e9,c=[];for(;;){let u=s==t.length?1e9:o?t[s].to:t[s].from,h=r==e.length?1e9:a?e[r].to:e[r].from;if(o!=a){let p=Math.max(l,n),m=Math.min(u,h,i);p<m&&c.push(new kr(p,m))}if(l=Math.min(u,h),l==1e9)break;u==l&&(o?(o=!1,s++):o=!0),h==l&&(a?(a=!1,r++):a=!0)}return c}function bP(t,e){let n=[];for(let{pos:i,mount:s,frag:r}of t){let o=i+(s.overlay?s.overlay[0].from:0),a=o+s.tree.length,l=Math.max(r.from,o),c=Math.min(r.to,a);if(s.overlay){let u=s.overlay.map(p=>new kr(p.from+i,p.to+i)),h=ywe(e,u,l,c);for(let p=0,m=l;;p++){let y=p==h.length,O=y?c:h[p].from;if(O>m&&n.push(new Ta(m,O,s.tree,-o,r.from>=m||r.openStart,r.to<=O||r.openEnd)),y)break;m=h[p].to}}else n.push(new Ta(l,c,s.tree,-o,r.from>=o||r.openStart,r.to<=a||r.openEnd))}return n}let Owe=0;class Sr{constructor(e,n,i,s){this.name=e,this.set=n,this.base=i,this.modified=s,this.id=Owe++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let i=typeof e=="string"?e:"?";if(e instanceof Sr&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let s=new Sr(i,[],null,[]);if(s.set.push(s),n)for(let r of n.set)s.set.push(r);return s}static defineModifier(e){let n=new O0(e);return i=>i.modified.indexOf(n)>-1?i:O0.get(i.base||i,i.modified.concat(n).sort((s,r)=>s.id-r.id))}}let bwe=0;class O0{constructor(e){this.name=e,this.instances=[],this.id=bwe++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(a=>a.base==e&&vwe(n,a.modified));if(i)return i;let s=[],r=new Sr(e.name,s,e,n);for(let a of n)a.instances.push(r);let o=wwe(n);for(let a of e.set)if(!a.modified.length)for(let l of o)s.push(O0.get(a,l));return r}}function vwe(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function wwe(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,s=e.length;i<s;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function Xp(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let s of n.split(" "))if(s){let r=[],o=2,a=s;for(let h=0;;){if(a=="..."&&h>0&&h+3==s.length){o=1;break}let p=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!p)throw new RangeError("Invalid path: "+s);if(r.push(p[0]=="*"?"":p[0][0]=='"'?JSON.parse(p[0]):p[0]),h+=p[0].length,h==s.length)break;let m=s[h++];if(h==s.length&&m=="!"){o=0;break}if(m!="/")throw new RangeError("Invalid path: "+s);a=s.slice(h)}let l=r.length-1,c=r[l];if(!c)throw new RangeError("Invalid path: "+s);let u=new sp(i,o,l>0?r.slice(0,l):null);e[c]=u.sort(e[c])}}return $R.add(e)}const $R=new Ct({combine(t,e){let n,i,s;for(;t||e;){if(!t||e&&t.depth>=e.depth?(s=e,e=e.next):(s=t,t=t.next),n&&n.mode==s.mode&&!s.context&&!n.context)continue;let r=new sp(s.tags,s.mode,s.context);n?n.next=r:i=r,n=r}return i}});class sp{constructor(e,n,i,s){this.tags=e,this.mode=n,this.context=i,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}sp.empty=new sp([],2,null);function DR(t,e){let n=Object.create(null);for(let r of t)if(!Array.isArray(r.tag))n[r.tag.id]=r.class;else for(let o of r.tag)n[o.id]=r.class;let{scope:i,all:s=null}=e||{};return{style:r=>{let o=s;for(let a of r)for(let l of a.set){let c=n[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:i}}function Swe(t,e){let n=null;for(let i of t){let s=i.style(e);s&&(n=n?n+" "+s:s)}return n}function Cwe(t,e,n,i=0,s=t.length){let r=new Awe(i,Array.isArray(e)?e:[e],n);r.highlightRange(t.cursor(),i,s,"",r.highlighters),r.flush(s)}class Awe{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,s,r){let{type:o,from:a,to:l}=e;if(a>=i||l<=n)return;o.isTop&&(r=this.highlighters.filter(m=>!m.scope||m.scope(o)));let c=s,u=xwe(e)||sp.empty,h=Swe(r,u.tags);if(h&&(c&&(c+=" "),c+=h,u.mode==1&&(s+=(s?" ":"")+h)),this.startSpan(Math.max(n,a),c),u.opaque)return;let p=e.tree&&e.tree.prop(Ct.mounted);if(p&&p.overlay){let m=e.node.enter(p.overlay[0].from+a,1),y=this.highlighters.filter(S=>!S.scope||S.scope(p.tree.type)),O=e.firstChild();for(let S=0,x=a;;S++){let T=S<p.overlay.length?p.overlay[S]:null,k=T?T.from+a:l,D=Math.max(n,x),M=Math.min(i,k);if(D<M&&O)for(;e.from<M&&(this.highlightRange(e,D,M,s,r),this.startSpan(Math.min(M,e.to),c),!(e.to>=k||!e.nextSibling())););if(!T||k>i)break;x=T.to+a,x>n&&(this.highlightRange(m.cursor(),Math.max(n,T.from+a),Math.min(i,x),"",y),this.startSpan(Math.min(i,x),c))}O&&e.parent()}else if(e.firstChild()){p&&(s="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,s,r),this.startSpan(Math.min(i,e.to),c)}while(e.nextSibling());e.parent()}}}function xwe(t){let e=t.type.prop($R);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const Re=Sr.define,Ag=Re(),ml=Re(),vP=Re(ml),wP=Re(ml),gl=Re(),xg=Re(gl),O2=Re(gl),xo=Re(),ac=Re(xo),wo=Re(),So=Re(),Fw=Re(),Qh=Re(Fw),kg=Re(),X={comment:Ag,lineComment:Re(Ag),blockComment:Re(Ag),docComment:Re(Ag),name:ml,variableName:Re(ml),typeName:vP,tagName:Re(vP),propertyName:wP,attributeName:Re(wP),className:Re(ml),labelName:Re(ml),namespace:Re(ml),macroName:Re(ml),literal:gl,string:xg,docString:Re(xg),character:Re(xg),attributeValue:Re(xg),number:O2,integer:Re(O2),float:Re(O2),bool:Re(gl),regexp:Re(gl),escape:Re(gl),color:Re(gl),url:Re(gl),keyword:wo,self:Re(wo),null:Re(wo),atom:Re(wo),unit:Re(wo),modifier:Re(wo),operatorKeyword:Re(wo),controlKeyword:Re(wo),definitionKeyword:Re(wo),moduleKeyword:Re(wo),operator:So,derefOperator:Re(So),arithmeticOperator:Re(So),logicOperator:Re(So),bitwiseOperator:Re(So),compareOperator:Re(So),updateOperator:Re(So),definitionOperator:Re(So),typeOperator:Re(So),controlOperator:Re(So),punctuation:Fw,separator:Re(Fw),bracket:Qh,angleBracket:Re(Qh),squareBracket:Re(Qh),paren:Re(Qh),brace:Re(Qh),content:xo,heading:ac,heading1:Re(ac),heading2:Re(ac),heading3:Re(ac),heading4:Re(ac),heading5:Re(ac),heading6:Re(ac),contentSeparator:Re(xo),list:Re(xo),quote:Re(xo),emphasis:Re(xo),strong:Re(xo),link:Re(xo),monospace:Re(xo),strikethrough:Re(xo),inserted:Re(),deleted:Re(),changed:Re(),invalid:Re(),meta:kg,documentMeta:Re(kg),annotation:Re(kg),processingInstruction:Re(kg),definition:Sr.defineModifier("definition"),constant:Sr.defineModifier("constant"),function:Sr.defineModifier("function"),standard:Sr.defineModifier("standard"),local:Sr.defineModifier("local"),special:Sr.defineModifier("special")};for(let t in X){let e=X[t];e instanceof Sr&&(e.name=t)}DR([{tag:X.link,class:"tok-link"},{tag:X.heading,class:"tok-heading"},{tag:X.emphasis,class:"tok-emphasis"},{tag:X.strong,class:"tok-strong"},{tag:X.keyword,class:"tok-keyword"},{tag:X.atom,class:"tok-atom"},{tag:X.bool,class:"tok-bool"},{tag:X.url,class:"tok-url"},{tag:X.labelName,class:"tok-labelName"},{tag:X.inserted,class:"tok-inserted"},{tag:X.deleted,class:"tok-deleted"},{tag:X.literal,class:"tok-literal"},{tag:X.string,class:"tok-string"},{tag:X.number,class:"tok-number"},{tag:[X.regexp,X.escape,X.special(X.string)],class:"tok-string2"},{tag:X.variableName,class:"tok-variableName"},{tag:X.local(X.variableName),class:"tok-variableName tok-local"},{tag:X.definition(X.variableName),class:"tok-variableName tok-definition"},{tag:X.special(X.variableName),class:"tok-variableName2"},{tag:X.definition(X.propertyName),class:"tok-propertyName tok-definition"},{tag:X.typeName,class:"tok-typeName"},{tag:X.namespace,class:"tok-namespace"},{tag:X.className,class:"tok-className"},{tag:X.macroName,class:"tok-macroName"},{tag:X.propertyName,class:"tok-propertyName"},{tag:X.operator,class:"tok-operator"},{tag:X.comment,class:"tok-comment"},{tag:X.meta,class:"tok-meta"},{tag:X.invalid,class:"tok-invalid"},{tag:X.punctuation,class:"tok-punctuation"}]);var b2;const Lu=new Ct;function MR(t){return Ve.define({combine:t?e=>e.concat(t):void 0})}const TA=new Ct;class Kr{constructor(e,n,i=[],s=""){this.data=e,this.name=s,Vt.prototype.hasOwnProperty("tree")||Object.defineProperty(Vt.prototype,"tree",{get(){return Dn(this)}}),this.parser=n,this.extension=[Ll.of(this),Vt.languageData.of((r,o,a)=>{let l=SP(r,o,a),c=l.type.prop(Lu);if(!c)return[];let u=r.facet(c),h=l.type.prop(TA);if(h){let p=l.resolve(o-l.from,a);for(let m of h)if(m.test(p,r)){let y=r.facet(m.facet);return m.type=="replace"?y:y.concat(u)}}return u})].concat(i)}isActiveAt(e,n,i=-1){return SP(e,n,i).type.prop(Lu)==this.data}findRegions(e){let n=e.facet(Ll);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],s=(r,o)=>{if(r.prop(Lu)==this.data){i.push({from:o,to:o+r.length});return}let a=r.prop(Ct.mounted);if(a){if(a.tree.prop(Lu)==this.data){if(a.overlay)for(let l of a.overlay)i.push({from:l.from+o,to:l.to+o});else i.push({from:o,to:o+r.length});return}else if(a.overlay){let l=i.length;if(s(a.tree,a.overlay[0].from+o),i.length>l)return}}for(let l=0;l<r.children.length;l++){let c=r.children[l];c instanceof xn&&s(c,r.positions[l]+o)}};return s(Dn(e),0),i}get allowsNesting(){return!0}}Kr.setState=ht.define();function SP(t,e,n){let i=t.facet(Ll),s=Dn(t).topNode;if(!i||i.allowsNesting)for(let r=s;r;r=r.enter(e,n,en.ExcludeBuffers|en.EnterBracketed))r.type.isTop&&(s=r);return s}class Zc extends Kr{constructor(e,n,i){super(e,n,[],i),this.parser=n}static define(e){let n=MR(e.languageData);return new Zc(n,e.parser.configure({props:[Lu.add(i=>i.isTop?n:void 0)]}),e.name)}configure(e,n){return new Zc(this.data,this.parser.configure(e),n||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Dn(t){let e=t.field(Kr.state,!1);return e?e.tree:xn.empty}class kwe{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let Nh=null;class b0{constructor(e,n,i=[],s,r,o,a,l){this.parser=e,this.state=n,this.fragments=i,this.tree=s,this.treeLen=r,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new b0(e,n,[],xn.empty,0,i,[],null)}startParse(){return this.parser.startParse(new kwe(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=xn.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(Ta.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(Ta.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Nh;Nh=this;try{return e()}finally{Nh=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=CP(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:s,treeLen:r,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,h,p)=>l.push({fromA:c,toA:u,fromB:h,toB:p})),i=Ta.applyChanges(i,l),s=xn.empty,r=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),h=e.mapPos(c.to,-1);u<h&&a.push({from:u,to:h})}}}return new b0(this.parser,n,i,s,r,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:s,to:r}=this.skipped[i];s<e.to&&r>e.from&&(this.fragments=CP(this.fragments,s,r),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends TR{createParse(n,i,s){let r=s[0].from,o=s[s.length-1].to;return{parsedPos:r,advance(){let l=Nh;if(l){for(let c of s)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new xn(ss.none,[],[],o-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Nh}}function CP(t,e,n){return Ta.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Nd{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new Nd(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=b0.create(e.facet(Ll).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new Nd(i)}}Kr.state=Pi.define({create:Nd.init,update(t,e){for(let n of e.effects)if(n.is(Kr.setState))return n.value;return e.startState.facet(Ll)!=e.state.facet(Ll)?Nd.init(e.state):t.apply(e)}});let IR=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(IR=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const v2=typeof navigator<"u"&&(!((b2=navigator.scheduling)===null||b2===void 0)&&b2.isInputPending)?()=>navigator.scheduling.isInputPending():null,Pwe=zn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Kr.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Kr.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=IR(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:s}}=this.view,r=i.field(Kr.state);if(r.tree==r.context.tree&&r.context.isDone(s+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!v2?Math.max(25,e.timeRemaining()-5):1e9),a=r.context.treeLen<s&&i.doc.length>s+1e3,l=r.context.work(()=>v2&&v2()||Date.now()>o,s+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:Kr.setState.of(new Nd(r.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>As(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ll=Ve.define({combine(t){return t.length?t[0]:null},enables:t=>[Kr.state,Pwe,Le.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class J1{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const Twe=Ve.define(),eO=Ve.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function v0(t){let e=t.facet(eO);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function rp(t,e){let n="",i=t.tabSize,s=t.facet(eO)[0];if(s=="	"){for(;e>=i;)n+="	",e-=i;s=" "}for(let r=0;r<e;r++)n+=s;return n}function $A(t,e){t instanceof Vt&&(t=new tO(t));for(let i of t.state.facet(Twe)){let s=i(t,e);if(s!==void 0)return s}let n=Dn(t.state);return n.length>=e?$we(t,n,e):null}class tO{constructor(e,n={}){this.state=e,this.options=n,this.unit=v0(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:r}=this.options;return s!=null&&s>=i.from&&s<=i.to?r&&s==e?{text:"",from:e}:(n<0?s<e:s<=e)?{text:i.text.slice(s-i.from),from:s}:{text:i.text.slice(0,s-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:s}=this.lineAt(e,n);return i.slice(e-s,Math.min(i.length,e+100-s))}column(e,n=1){let{text:i,from:s}=this.lineAt(e,n),r=this.countColumn(i,e-s),o=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return o>-1&&(r+=o-this.countColumn(i,i.search(/\S|$/))),r}countColumn(e,n=e.length){return ih(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:s}=this.lineAt(e,n),r=this.options.overrideIndentation;if(r){let o=r(s);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const nO=new Ct;function $we(t,e,n){let i=e.resolveStack(n),s=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(s!=i.node){let r=[];for(let o=s;o&&!(o.from<i.node.from||o.to>i.node.to||o.from==i.node.from&&o.type==i.node.type);o=o.parent)r.push(o);for(let o=r.length-1;o>=0;o--)i={node:r[o],next:i}}return RR(i,t,n)}function RR(t,e,n){for(let i=t;i;i=i.next){let s=Mwe(i.node);if(s)return s(DA.create(e,n,i))}return 0}function Dwe(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function Mwe(t){let e=t.type.prop(nO);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(Ct.closedBy))){let s=t.lastChild,r=s&&i.indexOf(s.name)>-1;return o=>_R(o,!0,1,void 0,r&&!Dwe(o)?s.from:void 0)}return t.parent==null?Iwe:null}function Iwe(){return 0}class DA extends tO{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.context=i}get node(){return this.context.node}static create(e,n,i){return new DA(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(Rwe(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){return RR(this.context.next,this.base,this.pos)}}function Rwe(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function _we(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let s=t.options.simulateBreak,r=t.state.doc.lineAt(n.from),o=s==null||s<=r.from?r.to:Math.min(r.to,s);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==i)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let c=/^ */.exec(r.text.slice(n.to-r.from))[0].length;return{from:n.from,to:n.to+c}}a=l.to}}function Ewe({closing:t,align:e=!0,units:n=1}){return i=>_R(i,e,n,t)}function _R(t,e,n,i,s){let r=t.textAfter,o=r.match(/^\s*/)[0].length,a=i&&r.slice(o,o+i.length)==i||s==t.pos+o,l=e?_we(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const Qwe=t=>t.baseIndent;function ay({except:t,units:e=1}={}){return n=>{let i=t&&t.test(n.textAfter);return n.baseIndent+(i?0:e*n.unit)}}const Nwe=200;function Lwe(){return Vt.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:i}=t.newSelection.main,s=n.lineAt(i);if(i>s.from+Nwe)return t;let r=n.sliceString(s.from,i);if(!e.some(c=>c.test(r)))return t;let{state:o}=t,a=-1,l=[];for(let{head:c}of o.selection.ranges){let u=o.doc.lineAt(c);if(u.from==a)continue;a=u.from;let h=$A(o,u.from);if(h==null)continue;let p=/^\s*/.exec(u.text)[0],m=rp(o,h);p!=m&&l.push({from:u.from,to:u.from+p.length,insert:m})}return l.length?[t,{changes:l,sequential:!0}]:t})}const Fwe=Ve.define(),iO=new Ct;function ER(t){let e=t.firstChild,n=t.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?t.to:n.from}:null}function Bwe(t,e,n){let i=Dn(t);if(i.length<n)return null;let s=i.resolveStack(n,1),r=null;for(let o=s;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(r&&a.from<e)break;let l=a.type.prop(iO);if(l&&(a.to<i.length-50||i.length==t.doc.length||!Vwe(a))){let c=l(a,t);c&&c.from<=n&&c.from>=e&&c.to>n&&(r=c)}}return r}function Vwe(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function w0(t,e,n){for(let i of t.facet(Fwe)){let s=i(t,e,n);if(s)return s}return Bwe(t,e,n)}function QR(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const sO=ht.define({map:QR}),Wp=ht.define({map:QR});function NR(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const qc=Pi.define({create(){return et.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,i)=>t=AP(t,n,i)),t=t.map(e.changes);for(let n of e.effects)if(n.is(sO)&&!jwe(t,n.value.from,n.value.to)){let{preparePlaceholder:i}=e.state.facet(BR),s=i?et.replace({widget:new Uwe(i(e.state,n.value))}):xP;t=t.update({add:[s.range(n.value.from,n.value.to)]})}else n.is(Wp)&&(t=t.update({filter:(i,s)=>n.value.from!=i||n.value.to!=s,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=AP(t,e.selection.main.head)),t},provide:t=>Le.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,s)=>{n.push(i,s)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],s=t[n++];if(typeof i!="number"||typeof s!="number")throw new RangeError("Invalid JSON for fold state");e.push(xP.range(i,s))}return et.set(e,!0)}});function AP(t,e,n=e){let i=!1;return t.between(e,n,(s,r)=>{s<n&&r>e&&(i=!0)}),i?t.update({filterFrom:e,filterTo:n,filter:(s,r)=>s>=n||r<=e}):t}function S0(t,e,n){var i;let s=null;return(i=t.field(qc,!1))===null||i===void 0||i.between(e,n,(r,o)=>{(!s||s.from>r)&&(s={from:r,to:o})}),s}function jwe(t,e,n){let i=!1;return t.between(e,e,(s,r)=>{s==e&&r==n&&(i=!0)}),i}function LR(t,e){return t.field(qc,!1)?e:e.concat(ht.appendConfig.of(VR()))}const zwe=t=>{for(let e of NR(t)){let n=w0(t.state,e.from,e.to);if(n)return t.dispatch({effects:LR(t.state,[sO.of(n),FR(t,n)])}),!0}return!1},Zwe=t=>{if(!t.state.field(qc,!1))return!1;let e=[];for(let n of NR(t)){let i=S0(t.state,n.from,n.to);i&&e.push(Wp.of(i),FR(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function FR(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,s=t.state.doc.lineAt(e.to).number;return Le.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${s}.`)}const qwe=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let s=t.lineBlockAt(i),r=w0(e,s.from,s.to);r&&n.push(sO.of(r)),i=(r?t.lineBlockAt(r.to):s).to+1}return n.length&&t.dispatch({effects:LR(t.state,n)}),!!n.length},Xwe=t=>{let e=t.state.field(qc,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,s)=>{n.push(Wp.of({from:i,to:s}))}),t.dispatch({effects:n}),!0},Wwe=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:zwe},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Zwe},{key:"Ctrl-Alt-[",run:qwe},{key:"Ctrl-Alt-]",run:Xwe}],Gwe={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},BR=Ve.define({combine(t){return Go(t,Gwe)}});function VR(t){return[qc,Kwe]}function jR(t,e){let{state:n}=t,i=n.facet(BR),s=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=S0(t.state,a.from,a.to);l&&t.dispatch({effects:Wp.of(l)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,s,e);let r=document.createElement("span");return r.textContent=i.placeholderText,r.setAttribute("aria-label",n.phrase("folded code")),r.title=n.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=s,r}const xP=et.replace({widget:new class extends Uo{toDOM(t){return jR(t,null)}}});class Uwe extends Uo{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return jR(e,this.value)}}const Hwe={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class w2 extends Ba{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function Ywe(t={}){let e={...Hwe,...t},n=new w2(e,!0),i=new w2(e,!1),s=zn.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Ll)!=o.state.facet(Ll)||o.startState.field(qc,!1)!=o.state.field(qc,!1)||Dn(o.startState)!=Dn(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new La;for(let l of o.viewportLineBlocks){let c=S0(o.state,l.from,l.to)?i:w0(o.state,l.from,l.to)?n:null;c&&a.add(l.from,l.from,c)}return a.finish()}}),{domEventHandlers:r}=e;return[s,Gve({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(s))===null||a===void 0?void 0:a.markers)||Mt.empty},initialSpacer(){return new w2(e,!1)},domEventHandlers:{...r,click:(o,a,l)=>{if(r.click&&r.click(o,a,l))return!0;let c=S0(o.state,a.from,a.to);if(c)return o.dispatch({effects:Wp.of(c)}),!0;let u=w0(o.state,a.from,a.to);return u?(o.dispatch({effects:sO.of(u)}),!0):!1}}}),VR()]}const Kwe=Le.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Gp{constructor(e,n){this.specs=e;let i;function s(a){let l=_l.newName();return(i||(i=Object.create(null)))["."+l]=a,l}const r=typeof n.all=="string"?n.all:n.all?s(n.all):void 0,o=n.scope;this.scope=o instanceof Kr?a=>a.prop(Lu)==o.data:o?a=>a==o:void 0,this.style=DR(e.map(a=>({tag:a.tag,class:a.class||s(Object.assign({},a,{tag:null}))})),{all:r}).style,this.module=i?new _l(i):null,this.themeType=n.themeType}static define(e,n){return new Gp(e,n||{})}}const Bw=Ve.define(),zR=Ve.define({combine(t){return t.length?[t[0]]:null}});function S2(t){let e=t.facet(Bw);return e.length?e:t.facet(zR)}function ZR(t,e){let n=[eSe],i;return t instanceof Gp&&(t.module&&n.push(Le.styleModule.of(t.module)),i=t.themeType),e!=null&&e.fallback?n.push(zR.of(t)):i?n.push(Bw.computeN([Le.darkTheme],s=>s.facet(Le.darkTheme)==(i=="dark")?[t]:[])):n.push(Bw.of(t)),n}class Jwe{constructor(e){this.markCache=Object.create(null),this.tree=Dn(e.state),this.decorations=this.buildDeco(e,S2(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=Dn(e.state),i=S2(e.state),s=i!=S2(e.startState),{viewport:r}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<r.to&&!s&&n.type==this.tree.type&&o>=r.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||s)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=r.to)}buildDeco(e,n){if(!n||!this.tree.length)return et.none;let i=new La;for(let{from:s,to:r}of e.visibleRanges)Cwe(this.tree,n,(o,a,l)=>{i.add(o,a,this.markCache[l]||(this.markCache[l]=et.mark({class:l})))},s,r);return i.finish()}}const eSe=Zl.high(zn.fromClass(Jwe,{decorations:t=>t.decorations})),tSe=Gp.define([{tag:X.meta,color:"#404740"},{tag:X.link,textDecoration:"underline"},{tag:X.heading,textDecoration:"underline",fontWeight:"bold"},{tag:X.emphasis,fontStyle:"italic"},{tag:X.strong,fontWeight:"bold"},{tag:X.strikethrough,textDecoration:"line-through"},{tag:X.keyword,color:"#708"},{tag:[X.atom,X.bool,X.url,X.contentSeparator,X.labelName],color:"#219"},{tag:[X.literal,X.inserted],color:"#164"},{tag:[X.string,X.deleted],color:"#a11"},{tag:[X.regexp,X.escape,X.special(X.string)],color:"#e40"},{tag:X.definition(X.variableName),color:"#00f"},{tag:X.local(X.variableName),color:"#30a"},{tag:[X.typeName,X.namespace],color:"#085"},{tag:X.className,color:"#167"},{tag:[X.special(X.variableName),X.macroName],color:"#256"},{tag:X.definition(X.propertyName),color:"#00c"},{tag:X.comment,color:"#940"},{tag:X.invalid,color:"#f00"}]),nSe=Le.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),qR=1e4,XR="()[]{}",WR=Ve.define({combine(t){return Go(t,{afterCursor:!0,brackets:XR,maxScanDistance:qR,renderMatch:rSe})}}),iSe=et.mark({class:"cm-matchingBracket"}),sSe=et.mark({class:"cm-nonmatchingBracket"});function rSe(t){let e=[],n=t.matched?iSe:sSe;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}function kP(t){let e=[],n=t.facet(WR);for(let i of t.selection.ranges){if(!i.empty)continue;let s=No(t,i.head,-1,n)||i.head>0&&No(t,i.head-1,1,n)||n.afterCursor&&(No(t,i.head,1,n)||i.head<t.doc.length&&No(t,i.head+1,-1,n));s&&(e=e.concat(n.renderMatch(s,t)))}return et.set(e,!0)}const oSe=zn.fromClass(class{constructor(t){this.paused=!1,this.decorations=kP(t.state)}update(t){(t.docChanged||t.selectionSet||this.paused)&&(t.view.composing?(this.decorations=this.decorations.map(t.changes),this.paused=!0):(this.decorations=kP(t.state),this.paused=!1))}},{decorations:t=>t.decorations}),aSe=[oSe,nSe];function lSe(t={}){return[WR.of(t),aSe]}const GR=new Ct;function Vw(t,e,n){let i=t.prop(e<0?Ct.openedBy:Ct.closedBy);if(i)return i;if(t.name.length==1){let s=n.indexOf(t.name);if(s>-1&&s%2==(e<0?1:0))return[n[s+e]]}return null}function jw(t){let e=t.type.prop(GR);return e?e(t.node):t}function No(t,e,n,i={}){let s=i.maxScanDistance||qR,r=i.brackets||XR,o=Dn(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let c=Vw(l.type,n,r);if(c&&l.from<l.to){let u=jw(l);if(u&&(n>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return cSe(t,e,n,l,u,c,r)}}return uSe(t,e,n,o,a.type,s,r)}function cSe(t,e,n,i,s,r,o){let a=i.parent,l={from:s.from,to:s.to},c=0,u=a==null?void 0:a.cursor();if(u&&(n<0?u.childBefore(i.from):u.childAfter(i.to)))do if(n<0?u.to<=i.from:u.from>=i.to){if(c==0&&r.indexOf(u.type.name)>-1&&u.from<u.to){let h=jw(u);return{start:l,end:h?{from:h.from,to:h.to}:void 0,matched:!0}}else if(Vw(u.type,n,o))c++;else if(Vw(u.type,-n,o)){if(c==0){let h=jw(u);return{start:l,end:h&&h.from<h.to?{from:h.from,to:h.to}:void 0,matched:!1}}c--}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function uSe(t,e,n,i,s,r,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),h=0;for(let p=0;!u.next().done&&p<=r;){let m=u.value;n<0&&(p+=m.length);let y=e+p*n;for(let O=n>0?0:m.length-1,S=n>0?m.length:-1;O!=S;O+=n){let x=o.indexOf(m[O]);if(!(x<0||i.resolveInner(y+O,1).type!=s))if(x%2==0==n>0)h++;else{if(h==1)return{start:c,end:{from:y+O,to:y+O+1},matched:x>>1==l>>1};h--}}n>0&&(p+=m.length)}return u.done?{start:c,matched:!1}:null}const dSe=Object.create(null),PP=[ss.none],TP=[],$P=Object.create(null),hSe=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])hSe[t]=fSe(dSe,e);function C2(t,e){TP.indexOf(t)>-1||(TP.push(t),console.warn(e))}function fSe(t,e){let n=[];for(let a of e.split(" ")){let l=[];for(let c of a.split(".")){let u=t[c]||X[c];u?typeof u=="function"?l.length?l=l.map(u):C2(c,`Modifier ${c} used at start of tag`):l.length?C2(c,`Tag ${c} used as modifier`):l=Array.isArray(u)?u:[u]:C2(c,`Unknown highlighting tag ${c}`)}for(let c of l)n.push(c)}if(!n.length)return 0;let i=e.replace(/ /g,"_"),s=i+" "+n.map(a=>a.id),r=$P[s];if(r)return r.id;let o=$P[s]=ss.define({id:PP.length,name:i,props:[Xp({[i]:n})]});return PP.push(o),o.id}un.RTL,un.LTR;const pSe=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=IA(t.state,n.from);return i.line?mSe(t):i.block?ySe(t):!1};function MA(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let s=t(e,n);return s?(i(n.update(s)),!0):!1}}const mSe=MA(vSe,0),gSe=MA(UR,0),ySe=MA((t,e)=>UR(t,e,bSe(e)),0);function IA(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const Lh=50;function OSe(t,{open:e,close:n},i,s){let r=t.sliceDoc(i-Lh,i),o=t.sliceDoc(s,s+Lh),a=/\s*$/.exec(r)[0].length,l=/^\s*/.exec(o)[0].length,c=r.length-a;if(r.slice(c-e.length,c)==e&&o.slice(l,l+n.length)==n)return{open:{pos:i-a,margin:a&&1},close:{pos:s+l,margin:l&&1}};let u,h;s-i<=2*Lh?u=h=t.sliceDoc(i,s):(u=t.sliceDoc(i,i+Lh),h=t.sliceDoc(s-Lh,s));let p=/^\s*/.exec(u)[0].length,m=/\s*$/.exec(h)[0].length,y=h.length-m-n.length;return u.slice(p,p+e.length)==e&&h.slice(y,y+n.length)==n?{open:{pos:i+p+e.length,margin:/\s/.test(u.charAt(p+e.length))?1:0},close:{pos:s-m-n.length,margin:/\s/.test(h.charAt(y-1))?1:0}}:null}function bSe(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),s=n.to<=i.to?i:t.doc.lineAt(n.to);s.from>i.from&&s.from==n.to&&(s=n.to==i.to+1?i:t.doc.lineAt(n.to-1));let r=e.length-1;r>=0&&e[r].to>i.from?e[r].to=s.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:s.to})}return e}function UR(t,e,n=e.selection.ranges){let i=n.map(r=>IA(e,r.from).block);if(!i.every(r=>r))return null;let s=n.map((r,o)=>OSe(e,i[o],r.from,r.to));if(t!=2&&!s.every(r=>r))return{changes:e.changes(n.map((r,o)=>s[o]?[]:[{from:r.from,insert:i[o].open+" "},{from:r.to,insert:" "+i[o].close}]))};if(t!=1&&s.some(r=>r)){let r=[];for(let o=0,a;o<s.length;o++)if(a=s[o]){let l=i[o],{open:c,close:u}=a;r.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:r}}return null}function vSe(t,e,n=e.selection.ranges){let i=[],s=-1;e:for(let{from:r,to:o}of n){let a=i.length,l=1e9,c;for(let u=r;u<=o;){let h=e.doc.lineAt(u);if(c==null&&(c=IA(e,h.from).line,!c))continue e;if(h.from>s&&(r==o||o>h.from)){s=h.from;let p=/^\s*/.exec(h.text)[0].length,m=p==h.length,y=h.text.slice(p,p+c.length)==c?p:-1;p<h.text.length&&p<l&&(l=p),i.push({line:h,comment:y,token:c,indent:p,empty:m,single:!1})}u=h.to+1}if(l<1e9)for(let u=a;u<i.length;u++)i[u].indent<i[u].line.text.length&&(i[u].indent=l);i.length==a+1&&(i[a].single=!0)}if(t!=2&&i.some(r=>r.comment<0&&(!r.empty||r.single))){let r=[];for(let{line:a,token:l,indent:c,empty:u,single:h}of i)(h||!u)&&r.push({from:a.from+c,insert:l+" "});let o=e.changes(r);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(r=>r.comment>=0)){let r=[];for(let{line:o,comment:a,token:l}of i)if(a>=0){let c=o.from+a,u=c+l.length;o.text[u-o.from]==" "&&u++,r.push({from:c,to:u})}return{changes:r}}return null}const zw=Xa.define(),wSe=Xa.define(),SSe=Ve.define(),HR=Ve.define({combine(t){return Go(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,s)=>e(i,s)||n(i,s)})}}),YR=Pi.define({create(){return Lo.empty},update(t,e){let n=e.state.facet(HR),i=e.annotation(zw);if(i){let l=xs.fromTransaction(e,i.selection),c=i.side,u=c==0?t.undone:t.done;return l?u=C0(u,u.length,n.minDepth,l):u=e_(u,e.startState.selection),new Lo(c==0?i.rest:u,c==0?u:i.rest)}let s=e.annotation(wSe);if((s=="full"||s=="before")&&(t=t.isolate()),e.annotation(Wn.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let r=xs.fromTransaction(e),o=e.annotation(Wn.time),a=e.annotation(Wn.userEvent);return r?t=t.addChanges(r,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(s=="full"||s=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Lo(t.done.map(xs.fromJSON),t.undone.map(xs.fromJSON))}});function CSe(t={}){return[YR,HR.of(t),Le.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?KR:e.inputType=="historyRedo"?Zw:null;return i?(e.preventDefault(),i(n)):!1}})]}function rO(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let s=n.field(YR,!1);if(!s)return!1;let r=s.pop(t,n,e);return r?(i(r),!0):!1}}const KR=rO(0,!1),Zw=rO(1,!1),ASe=rO(0,!0),xSe=rO(1,!0);class xs{constructor(e,n,i,s,r){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=s,this.selectionsAfter=r}setSelAfter(e){return new xs(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(e){return new xs(e.changes&&ti.fromJSON(e.changes),[],e.mapped&&Vo.fromJSON(e.mapped),e.startSelection&&fe.fromJSON(e.startSelection),e.selectionsAfter.map(fe.fromJSON))}static fromTransaction(e,n){let i=Pr;for(let s of e.startState.facet(SSe)){let r=s(e);r.length&&(i=i.concat(r))}return!i.length&&e.changes.empty?null:new xs(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,Pr)}static selection(e){return new xs(void 0,Pr,void 0,void 0,e)}}function C0(t,e,n,i){let s=e+1>n+20?e-n-1:0,r=t.slice(s,e);return r.push(i),r}function kSe(t,e){let n=[],i=!1;return t.iterChangedRanges((s,r)=>n.push(s,r)),e.iterChangedRanges((s,r,o,a)=>{for(let l=0;l<n.length;){let c=n[l++],u=n[l++];a>=c&&o<=u&&(i=!0)}}),i}function PSe(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function JR(t,e){return t.length?e.length?t.concat(e):t:e}const Pr=[],TSe=200;function e_(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-TSe));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),C0(t,t.length-1,1e9,n.setSelAfter(i)))}else return[xs.selection([e])]}function $Se(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function A2(t,e){if(!t.length)return t;let n=t.length,i=Pr;for(;n;){let s=DSe(t[n-1],e,i);if(s.changes&&!s.changes.empty||s.effects.length){let r=t.slice(0,n);return r[n-1]=s,r}else e=s.mapped,n--,i=s.selectionsAfter}return i.length?[xs.selection(i)]:Pr}function DSe(t,e,n){let i=JR(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):Pr,n);if(!t.changes)return xs.selection(i);let s=t.changes.map(e),r=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(r):r;return new xs(s,ht.mapEffects(t.effects,e),o,t.startSelection.map(r),i)}const MSe=/^(input\.type|delete)($|\.)/;class Lo{constructor(e,n,i=0,s=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=s}isolate(){return this.prevTime?new Lo(this.done,this.undone):this}addChanges(e,n,i,s,r){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||MSe.test(i))&&(!a.selectionsAfter.length&&n-this.prevTime<s.newGroupDelay&&s.joinToEvent(r,kSe(a.changes,e.changes))||i=="input.type.compose")?o=C0(o,o.length-1,s.minDepth,new xs(e.changes.compose(a.changes),JR(ht.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,Pr)):o=C0(o,o.length,s.minDepth,e),new Lo(o,Pr,n,i)}addSelection(e,n,i,s){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:Pr;return r.length>0&&n-this.prevTime<s&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&PSe(r[r.length-1],e)?this:new Lo(e_(this.done,e),this.undone,n,i)}addMapping(e){return new Lo(A2(this.done,e),A2(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let s=e==0?this.done:this.undone;if(s.length==0)return null;let r=s[s.length-1],o=r.selectionsAfter[0]||(r.startSelection?r.startSelection.map(r.changes.invertedDesc,1):n.selection);if(i&&r.selectionsAfter.length)return n.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:zw.of({side:e,rest:$Se(s),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){let a=s.length==1?Pr:s.slice(0,s.length-1);return r.mapped&&(a=A2(a,r.mapped)),n.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:zw.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Lo.empty=new Lo(Pr,Pr);const ISe=[{key:"Mod-z",run:KR,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Zw,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Zw,preventDefault:!0},{key:"Mod-u",run:ASe,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:xSe,preventDefault:!0}];function sh(t,e){return fe.create(t.ranges.map(e),t.mainIndex)}function fo(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function po({state:t,dispatch:e},n){let i=sh(t.selection,n);return i.eq(t.selection,!0)?!1:(e(fo(t,i)),!0)}function oO(t,e){return fe.cursor(e?t.to:t.from)}function t_(t,e){return po(t,n=>n.empty?t.moveByChar(n,e):oO(n,e))}function ji(t){return t.textDirectionAt(t.state.selection.main.head)==un.LTR}const n_=t=>t_(t,!ji(t)),i_=t=>t_(t,ji(t));function s_(t,e){return po(t,n=>n.empty?t.moveByGroup(n,e):oO(n,e))}const RSe=t=>s_(t,!ji(t)),_Se=t=>s_(t,ji(t));function ESe(t,e,n){if(e.type.prop(n))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function aO(t,e,n){let i=Dn(t).resolveInner(e.head),s=n?Ct.closedBy:Ct.openedBy;for(let l=e.head;;){let c=n?i.childAfter(l):i.childBefore(l);if(!c)break;ESe(t,c,s)?i=c:l=n?c.to:c.from}let r=i.type.prop(s),o,a;return r&&(o=n?No(t,i.from,1):No(t,i.to,-1))&&o.matched?a=n?o.end.to:o.end.from:a=n?i.to:i.from,fe.cursor(a,n?-1:1)}const QSe=t=>po(t,e=>aO(t.state,e,!ji(t))),NSe=t=>po(t,e=>aO(t.state,e,ji(t)));function r_(t,e){return po(t,n=>{if(!n.empty)return oO(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const o_=t=>r_(t,!1),a_=t=>r_(t,!0);function l_(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,s;if(e){for(let r of t.state.facet(Le.scrollMargins)){let o=r(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}s=t.scrollDOM.clientHeight-n-i}else s=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,s-5)}}function c_(t,e){let n=l_(t),{state:i}=t,s=sh(i.selection,o=>o.empty?t.moveVertically(o,e,n.height):oO(o,e));if(s.eq(i.selection))return!1;let r;if(n.selfScroll){let o=t.coordsAtPos(i.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,c=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<c&&(r=Le.scrollIntoView(s.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(fo(i,s),{effects:r}),!0}const DP=t=>c_(t,!1),qw=t=>c_(t,!0);function ql(t,e,n){let i=t.lineBlockAt(e.head),s=t.moveToLineBoundary(e,n);if(s.head==e.head&&s.head!=(n?i.to:i.from)&&(s=t.moveToLineBoundary(e,n,!1)),!n&&s.head==i.from&&i.length){let r=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;r&&e.head!=i.from+r&&(s=fe.cursor(i.from+r))}return s}const LSe=t=>po(t,e=>ql(t,e,!0)),FSe=t=>po(t,e=>ql(t,e,!1)),BSe=t=>po(t,e=>ql(t,e,!ji(t))),VSe=t=>po(t,e=>ql(t,e,ji(t))),jSe=t=>po(t,e=>fe.cursor(t.lineBlockAt(e.head).from,1)),zSe=t=>po(t,e=>fe.cursor(t.lineBlockAt(e.head).to,-1));function ZSe(t,e,n){let i=!1,s=sh(t.selection,r=>{let o=No(t,r.head,-1)||No(t,r.head,1)||r.head>0&&No(t,r.head-1,1)||r.head<t.doc.length&&No(t,r.head+1,-1);if(!o||!o.end)return r;i=!0;let a=o.start.from==r.head?o.end.to:o.end.from;return fe.cursor(a)});return i?(e(fo(t,s)),!0):!1}const qSe=({state:t,dispatch:e})=>ZSe(t,e);function Lr(t,e){let n=sh(t.state.selection,i=>{let s=e(i);return fe.range(i.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(fo(t.state,n)),!0)}function u_(t,e){return Lr(t,n=>t.moveByChar(n,e))}const d_=t=>u_(t,!ji(t)),h_=t=>u_(t,ji(t));function f_(t,e){return Lr(t,n=>t.moveByGroup(n,e))}const XSe=t=>f_(t,!ji(t)),WSe=t=>f_(t,ji(t)),GSe=t=>Lr(t,e=>aO(t.state,e,!ji(t))),USe=t=>Lr(t,e=>aO(t.state,e,ji(t)));function p_(t,e){return Lr(t,n=>t.moveVertically(n,e))}const m_=t=>p_(t,!1),g_=t=>p_(t,!0);function y_(t,e){return Lr(t,n=>t.moveVertically(n,e,l_(t).height))}const MP=t=>y_(t,!1),IP=t=>y_(t,!0),HSe=t=>Lr(t,e=>ql(t,e,!0)),YSe=t=>Lr(t,e=>ql(t,e,!1)),KSe=t=>Lr(t,e=>ql(t,e,!ji(t))),JSe=t=>Lr(t,e=>ql(t,e,ji(t))),eCe=t=>Lr(t,e=>fe.cursor(t.lineBlockAt(e.head).from)),tCe=t=>Lr(t,e=>fe.cursor(t.lineBlockAt(e.head).to)),RP=({state:t,dispatch:e})=>(e(fo(t,{anchor:0})),!0),_P=({state:t,dispatch:e})=>(e(fo(t,{anchor:t.doc.length})),!0),EP=({state:t,dispatch:e})=>(e(fo(t,{anchor:t.selection.main.anchor,head:0})),!0),QP=({state:t,dispatch:e})=>(e(fo(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),nCe=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),iCe=({state:t,dispatch:e})=>{let n=lO(t).map(({from:i,to:s})=>fe.range(i,Math.min(s+1,t.doc.length)));return e(t.update({selection:fe.create(n),userEvent:"select"})),!0},sCe=({state:t,dispatch:e})=>{let n=sh(t.selection,i=>{let s=Dn(t),r=s.resolveStack(i.from,1);if(i.empty){let o=s.resolveStack(i.from,-1);o.node.from>=r.node.from&&o.node.to<=r.node.to&&(r=o)}for(let o=r;o;o=o.next){let{node:a}=o;if((a.from<i.from&&a.to>=i.to||a.to>i.to&&a.from<=i.from)&&o.next)return fe.range(a.to,a.from)}return i});return n.eq(t.selection)?!1:(e(fo(t,n)),!0)};function O_(t,e){let{state:n}=t,i=n.selection,s=n.selection.ranges.slice();for(let r of n.selection.ranges){let o=n.doc.lineAt(r.head);if(e?o.to<t.state.doc.length:o.from>0)for(let a=r;;){let l=t.moveVertically(a,e);if(l.head<o.from||l.head>o.to){s.some(c=>c.head==l.head)||s.push(l);break}else{if(l.head==a.head)break;a=l}}}return s.length==i.ranges.length?!1:(t.dispatch(fo(n,fe.create(s,s.length-1))),!0)}const rCe=t=>O_(t,!1),oCe=t=>O_(t,!0),aCe=({state:t,dispatch:e})=>{let n=t.selection,i=null;return n.ranges.length>1?i=fe.create([n.main]):n.main.empty||(i=fe.create([fe.cursor(n.main.head)])),i?(e(fo(t,i)),!0):!1};function Up(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,s=i.changeByRange(r=>{let{from:o,to:a}=r;if(o==a){let l=e(r);l<o?(n="delete.backward",l=Pg(t,l,!1)):l>o&&(n="delete.forward",l=Pg(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=Pg(t,o,!1),a=Pg(t,a,!0);return o==a?{range:r}:{changes:{from:o,to:a},range:fe.cursor(o,o<r.head?-1:1)}});return s.changes.empty?!1:(t.dispatch(i.update(s,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Le.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Pg(t,e,n){if(t instanceof Le)for(let i of t.state.facet(Le.atomicRanges).map(s=>s(t)))i.between(e,e,(s,r)=>{s<e&&r>e&&(e=n?r:s)});return e}const b_=(t,e,n)=>Up(t,i=>{let s=i.from,{state:r}=t,o=r.doc.lineAt(s),a,l;if(n&&!e&&s>o.from&&s<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,s-o.from))){if(a[a.length-1]=="	")return s-1;let c=ih(a,r.tabSize),u=c%v0(r)||v0(r);for(let h=0;h<u&&a[a.length-1-h]==" ";h++)s--;l=s}else l=ci(o.text,s-o.from,e,e)+o.from,l==s&&o.number!=(e?r.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,s-o.from))&&(l=ci(o.text,l-o.from,!1,!1)+o.from);return l}),Xw=t=>b_(t,!1,!0),v_=t=>b_(t,!0,!1),w_=(t,e)=>Up(t,n=>{let i=n.head,{state:s}=t,r=s.doc.lineAt(i),o=s.charCategorizer(i);for(let a=null;;){if(i==(e?r.to:r.from)){i==n.head&&r.number!=(e?s.doc.lines:1)&&(i+=e?1:-1);break}let l=ci(r.text,i-r.from,e)+r.from,c=r.text.slice(Math.min(i,l)-r.from,Math.max(i,l)-r.from),u=o(c);if(a!=null&&u!=a)break;(c!=" "||i!=n.head)&&(a=u),i=l}return i}),S_=t=>w_(t,!1),lCe=t=>w_(t,!0),cCe=t=>Up(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),uCe=t=>Up(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),dCe=t=>Up(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),hCe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Zt.of(["",""])},range:fe.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},fCe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let s=i.from,r=t.doc.lineAt(s),o=s==r.from?s-1:ci(r.text,s-r.from,!1)+r.from,a=s==r.to?s+1:ci(r.text,s-r.from,!0)+r.from;return{changes:{from:o,to:a,insert:t.doc.slice(s,a).append(t.doc.slice(o,s))},range:fe.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function lO(t){let e=[],n=-1;for(let i of t.selection.ranges){let s=t.doc.lineAt(i.from),r=t.doc.lineAt(i.to);if(!i.empty&&i.to==r.from&&(r=t.doc.lineAt(i.to-1)),n>=s.number){let o=e[e.length-1];o.to=r.to,o.ranges.push(i)}else e.push({from:s.from,to:r.to,ranges:[i]});n=r.number+1}return e}function C_(t,e,n){if(t.readOnly)return!1;let i=[],s=[];for(let r of lO(t)){if(n?r.to==t.doc.length:r.from==0)continue;let o=t.doc.lineAt(n?r.to+1:r.from-1),a=o.length+1;if(n){i.push({from:r.to,to:o.to},{from:r.from,insert:o.text+t.lineBreak});for(let l of r.ranges)s.push(fe.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{i.push({from:o.from,to:r.from},{from:r.to,insert:t.lineBreak+o.text});for(let l of r.ranges)s.push(fe.range(l.anchor-a,l.head-a))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:fe.create(s,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const pCe=({state:t,dispatch:e})=>C_(t,e,!1),mCe=({state:t,dispatch:e})=>C_(t,e,!0);function A_(t,e,n){if(t.readOnly)return!1;let i=[];for(let r of lO(t))n?i.push({from:r.from,insert:t.doc.slice(r.from,r.to)+t.lineBreak}):i.push({from:r.to,insert:t.lineBreak+t.doc.slice(r.from,r.to)});let s=t.changes(i);return e(t.update({changes:s,selection:t.selection.map(s,n?1:-1),scrollIntoView:!0,userEvent:"input.copyline"})),!0}const gCe=({state:t,dispatch:e})=>A_(t,e,!1),yCe=({state:t,dispatch:e})=>A_(t,e,!0),OCe=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(lO(e).map(({from:s,to:r})=>(s>0?s--:r<e.doc.length&&r++,{from:s,to:r}))),i=sh(e.selection,s=>{let r;if(t.lineWrapping){let o=t.lineBlockAt(s.head),a=t.coordsAtPos(s.head,s.assoc||1);a&&(r=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(s,!0,r)}).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function bCe(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=Dn(t).resolveInner(e),i=n.childBefore(e),s=n.childAfter(e),r;return i&&s&&i.to<=e&&s.from>=e&&(r=i.type.prop(Ct.closedBy))&&r.indexOf(s.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(s.from).from&&!/\S/.test(t.sliceDoc(i.to,s.from))?{from:i.to,to:s.from}:null}const NP=x_(!1),vCe=x_(!0);function x_(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(s=>{let{from:r,to:o}=s,a=e.doc.lineAt(r),l=!t&&r==o&&bCe(e,r);t&&(r=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new tO(e,{simulateBreak:r,simulateDoubleBreak:!!l}),u=$A(c,r);for(u==null&&(u=ih(/^\s*/.exec(e.doc.lineAt(r).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:r,to:o}=l:r>a.from&&r<a.from+100&&!/\S/.test(a.text.slice(0,r))&&(r=a.from);let h=["",rp(e,u)];return l&&h.push(rp(e,c.lineIndent(a.from,-1))),{changes:{from:r,to:o,insert:Zt.of(h)},range:fe.cursor(r+1+h[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function RA(t,e){let n=-1;return t.changeByRange(i=>{let s=[];for(let o=i.from;o<=i.to;){let a=t.doc.lineAt(o);a.number>n&&(i.empty||i.to>a.from)&&(e(a,s,i),n=a.number),o=a.to+1}let r=t.changes(s);return{changes:s,range:fe.range(r.mapPos(i.anchor,1),r.mapPos(i.head,1))}})}const wCe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),i=new tO(t,{overrideIndentation:r=>{let o=n[r];return o??-1}}),s=RA(t,(r,o,a)=>{let l=$A(i,r.from);if(l==null)return;/\S/.test(r.text)||(l=0);let c=/^\s*/.exec(r.text)[0],u=rp(t,l);(c!=u||a.from<r.from+c.length)&&(n[r.from]=l,o.push({from:r.from,to:r.from+c.length,insert:u}))});return s.changes.empty||e(t.update(s,{userEvent:"indent"})),!0},SCe=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(RA(t,(n,i)=>{i.push({from:n.from,insert:t.facet(eO)})}),{userEvent:"input.indent"})),!0),CCe=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(RA(t,(n,i)=>{let s=/^\s*/.exec(n.text)[0];if(!s)return;let r=ih(s,t.tabSize),o=0,a=rp(t,Math.max(0,r-v0(t)));for(;o<s.length&&o<a.length&&s.charCodeAt(o)==a.charCodeAt(o);)o++;i.push({from:n.from+o,to:n.from+s.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),ACe=t=>(t.setTabFocusMode(),!0),xCe=[{key:"Ctrl-b",run:n_,shift:d_,preventDefault:!0},{key:"Ctrl-f",run:i_,shift:h_},{key:"Ctrl-p",run:o_,shift:m_},{key:"Ctrl-n",run:a_,shift:g_},{key:"Ctrl-a",run:jSe,shift:eCe},{key:"Ctrl-e",run:zSe,shift:tCe},{key:"Ctrl-d",run:v_},{key:"Ctrl-h",run:Xw},{key:"Ctrl-k",run:cCe},{key:"Ctrl-Alt-h",run:S_},{key:"Ctrl-o",run:hCe},{key:"Ctrl-t",run:fCe},{key:"Ctrl-v",run:qw}],kCe=[{key:"ArrowLeft",run:n_,shift:d_,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:RSe,shift:XSe,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:BSe,shift:KSe,preventDefault:!0},{key:"ArrowRight",run:i_,shift:h_,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:_Se,shift:WSe,preventDefault:!0},{mac:"Cmd-ArrowRight",run:VSe,shift:JSe,preventDefault:!0},{key:"ArrowUp",run:o_,shift:m_,preventDefault:!0},{mac:"Cmd-ArrowUp",run:RP,shift:EP},{mac:"Ctrl-ArrowUp",run:DP,shift:MP},{key:"ArrowDown",run:a_,shift:g_,preventDefault:!0},{mac:"Cmd-ArrowDown",run:_P,shift:QP},{mac:"Ctrl-ArrowDown",run:qw,shift:IP},{key:"PageUp",run:DP,shift:MP},{key:"PageDown",run:qw,shift:IP},{key:"Home",run:FSe,shift:YSe,preventDefault:!0},{key:"Mod-Home",run:RP,shift:EP},{key:"End",run:LSe,shift:HSe,preventDefault:!0},{key:"Mod-End",run:_P,shift:QP},{key:"Enter",run:NP,shift:NP},{key:"Mod-a",run:nCe},{key:"Backspace",run:Xw,shift:Xw,preventDefault:!0},{key:"Delete",run:v_,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:S_,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:lCe,preventDefault:!0},{mac:"Mod-Backspace",run:uCe,preventDefault:!0},{mac:"Mod-Delete",run:dCe,preventDefault:!0}].concat(xCe.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),PCe=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:QSe,shift:GSe},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:NSe,shift:USe},{key:"Alt-ArrowUp",run:pCe},{key:"Shift-Alt-ArrowUp",run:gCe},{key:"Alt-ArrowDown",run:mCe},{key:"Shift-Alt-ArrowDown",run:yCe},{key:"Mod-Alt-ArrowUp",run:rCe},{key:"Mod-Alt-ArrowDown",run:oCe},{key:"Escape",run:aCe},{key:"Mod-Enter",run:vCe},{key:"Alt-l",mac:"Ctrl-l",run:iCe},{key:"Mod-i",run:sCe,preventDefault:!0},{key:"Mod-[",run:CCe},{key:"Mod-]",run:SCe},{key:"Mod-Alt-\\",run:wCe},{key:"Shift-Mod-k",run:OCe},{key:"Shift-Mod-\\",run:qSe},{key:"Mod-/",run:pSe},{key:"Alt-A",run:gSe},{key:"Ctrl-m",mac:"Shift-Alt-m",run:ACe}].concat(kCe),LP=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Ld{constructor(e,n,i=0,s=e.length,r,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,s),this.bufferStart=i,this.normalize=r?a=>r(LP(a)):LP,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Os(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=rA(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Io(e);let s=this.normalize(n);if(s.length)for(let r=0,o=i;;r++){let a=s.charCodeAt(r),l=this.match(a,o,this.bufferPos+this.bufferStart);if(r==s.length-1){if(l)return this.value=l,this;break}o==i&&r<n.length&&n.charCodeAt(r)==a&&o++}}}match(e,n,i){let s=null;for(let r=0;r<this.matches.length;r+=2){let o=this.matches[r],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?s={from:this.matches[r+1],to:i}:(this.matches[r]++,a=!0)),a||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?s={from:n,to:i}:this.matches.push(1,n)),s&&this.test&&!this.test(s.from,s.to,this.buffer,this.bufferStart)&&(s=null),s}}typeof Symbol<"u"&&(Ld.prototype[Symbol.iterator]=function(){return this});const k_={from:-1,to:-1,match:/.*/.exec("")},_A="gm"+(/x/.unicode==null?"":"u");class P_{constructor(e,n,i,s=0,r=e.length){if(this.text=e,this.to=r,this.curLine="",this.done=!1,this.value=k_,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new T_(e,n,i,s,r);this.re=new RegExp(n,_A+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(s);this.curLineStart=o.from,this.matchPos=A0(e,s),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,s=i+n[0].length;if(this.matchPos=A0(this.text,s+(i==s?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<s||i>this.value.to)&&(!this.test||this.test(i,s,n)))return this.value={from:i,to:s,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const x2=new WeakMap;class nd{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let s=x2.get(e);if(!s||s.from>=i||s.to<=n){let a=new nd(n,e.sliceString(n,i));return x2.set(e,a),a}if(s.from==n&&s.to==i)return s;let{text:r,from:o}=s;return o>n&&(r=e.sliceString(n,o)+r,o=n),s.to<i&&(r+=e.sliceString(s.to,i)),x2.set(e,new nd(o,r)),new nd(n,r.slice(n-o,i-o))}}class T_{constructor(e,n,i,s,r){this.text=e,this.to=r,this.done=!1,this.value=k_,this.matchPos=A0(e,s),this.re=new RegExp(n,_A+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=nd.get(e,s,this.chunkEnd(s+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,s=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,s,n)))return this.value={from:i,to:s,match:n},this.matchPos=A0(this.text,s+(i==s?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=nd.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(P_.prototype[Symbol.iterator]=T_.prototype[Symbol.iterator]=function(){return this});function TCe(t){try{return new RegExp(t,_A),!0}catch{return!1}}function A0(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}const $Ce=t=>{let{state:e}=t,n=String(e.doc.lineAt(t.state.selection.main.head).number),{close:i,result:s}=Zve(t,{label:e.phrase("Go to line"),input:{type:"text",name:"line",value:n},focus:!0,submitLabel:e.phrase("go")});return s.then(r=>{let o=r&&/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(r.elements.line.value);if(!o){t.dispatch({effects:i});return}let a=e.doc.lineAt(e.selection.main.head),[,l,c,u,h]=o,p=u?+u.slice(1):0,m=c?+c:a.number;if(c&&h){let S=m/100;l&&(S=S*(l=="-"?-1:1)+a.number/e.doc.lines),m=Math.round(e.doc.lines*S)}else c&&l&&(m=m*(l=="-"?-1:1)+a.number);let y=e.doc.line(Math.max(1,Math.min(e.doc.lines,m))),O=fe.cursor(y.from+Math.max(0,Math.min(p,y.length)));t.dispatch({effects:[i,Le.scrollIntoView(O.from,{y:"center"})],selection:O})}),!0},DCe={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},MCe=Ve.define({combine(t){return Go(t,DCe,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function ICe(t){return[NCe,QCe]}const RCe=et.mark({class:"cm-selectionMatch"}),_Ce=et.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function FP(t,e,n,i){return(n==0||t(e.sliceDoc(n-1,n))!=An.Word)&&(i==e.doc.length||t(e.sliceDoc(i,i+1))!=An.Word)}function ECe(t,e,n,i){return t(e.sliceDoc(n,n+1))==An.Word&&t(e.sliceDoc(i-1,i))==An.Word}const QCe=zn.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(MCe),{state:n}=t,i=n.selection;if(i.ranges.length>1)return et.none;let s=i.main,r,o=null;if(s.empty){if(!e.highlightWordAroundCursor)return et.none;let l=n.wordAt(s.head);if(!l)return et.none;o=n.charCategorizer(s.head),r=n.sliceDoc(l.from,l.to)}else{let l=s.to-s.from;if(l<e.minSelectionLength||l>200)return et.none;if(e.wholeWords){if(r=n.sliceDoc(s.from,s.to),o=n.charCategorizer(s.head),!(FP(o,n,s.from,s.to)&&ECe(o,n,s.from,s.to)))return et.none}else if(r=n.sliceDoc(s.from,s.to),!r)return et.none}let a=[];for(let l of t.visibleRanges){let c=new Ld(n.doc,r,l.from,l.to);for(;!c.next().done;){let{from:u,to:h}=c.value;if((!o||FP(o,n,u,h))&&(s.empty&&u<=s.from&&h>=s.to?a.push(_Ce.range(u,h)):(u>=s.to||h<=s.from)&&a.push(RCe.range(u,h)),a.length>e.maxMatches))return et.none}}return et.set(a)}},{decorations:t=>t.decorations}),NCe=Le.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),LCe=({state:t,dispatch:e})=>{let{selection:n}=t,i=fe.create(n.ranges.map(s=>t.wordAt(s.head)||fe.cursor(s.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function FCe(t,e){let{main:n,ranges:i}=t.selection,s=t.wordAt(n.head),r=s&&s.from==n.from&&s.to==n.to;for(let o=!1,a=new Ld(t.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Ld(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(l=>l.from==a.value.from))continue;if(r){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const BCe=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(r=>r.from===r.to))return LCe({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(r=>t.sliceDoc(r.from,r.to)!=i))return!1;let s=FCe(t,i);return s?(e(t.update({selection:t.selection.addRange(fe.range(s.from,s.to),!1),effects:Le.scrollIntoView(s.to)})),!0):!1},rh=Ve.define({combine(t){return Go(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new eAe(e),scrollToMatch:e=>Le.scrollIntoView(e)})}});class $_{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||TCe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord,this.test=e.test}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord&&this.test==e.test}create(){return this.regexp?new XCe(this):new zCe(this)}getCursor(e,n=0,i){let s=e.doc?e:Vt.create({doc:e});return i==null&&(i=s.doc.length),this.regexp?Du(this,s,n,i):$u(this,s,n,i)}}class D_{constructor(e){this.spec=e}}function VCe(t,e,n){return(i,s,r,o)=>{if(n&&!n(i,s,r,o))return!1;let a=i>=o&&s<=o+r.length?r.slice(i-o,s-o):e.doc.sliceString(i,s);return t(a,e,i,s)}}function $u(t,e,n,i){let s;return t.wholeWord&&(s=jCe(e.doc,e.charCategorizer(e.selection.main.head))),t.test&&(s=VCe(t.test,e,s)),new Ld(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:r=>r.toLowerCase(),s)}function jCe(t,e){return(n,i,s,r)=>((r>n||r+s.length<i)&&(r=Math.max(0,n-2),s=t.sliceString(r,Math.min(t.length,i+2))),(e(x0(s,n-r))!=An.Word||e(k0(s,n-r))!=An.Word)&&(e(k0(s,i-r))!=An.Word||e(x0(s,i-r))!=An.Word))}class zCe extends D_{constructor(e){super(e)}nextMatch(e,n,i){let s=$u(this.spec,e,i,e.doc.length).nextOverlapping();if(s.done){let r=Math.min(e.doc.length,n+this.spec.unquoted.length);s=$u(this.spec,e,0,r).nextOverlapping()}return s.done||s.value.from==n&&s.value.to==i?null:s.value}prevMatchInRange(e,n,i){for(let s=i;;){let r=Math.max(n,s-1e4-this.spec.unquoted.length),o=$u(this.spec,e,r,s),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(r==n)return null;s-=1e4}}prevMatch(e,n,i){let s=this.prevMatchInRange(e,0,n);return s||(s=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),s&&(s.from!=n||s.to!=i)?s:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=$u(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=n)return null;s.push(i.value)}return s}highlight(e,n,i,s){let r=$u(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!r.next().done;)s(r.value.from,r.value.to)}}function ZCe(t,e,n){return(i,s,r)=>(!n||n(i,s,r))&&t(r[0],e,i,s)}function Du(t,e,n,i){let s;return t.wholeWord&&(s=qCe(e.charCategorizer(e.selection.main.head))),t.test&&(s=ZCe(t.test,e,s)),new P_(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:s},n,i)}function x0(t,e){return t.slice(ci(t,e,!1),e)}function k0(t,e){return t.slice(e,ci(t,e))}function qCe(t){return(e,n,i)=>!i[0].length||(t(x0(i.input,i.index))!=An.Word||t(k0(i.input,i.index))!=An.Word)&&(t(k0(i.input,i.index+i[0].length))!=An.Word||t(x0(i.input,i.index+i[0].length))!=An.Word)}class XCe extends D_{nextMatch(e,n,i){let s=Du(this.spec,e,i,e.doc.length).next();return s.done&&(s=Du(this.spec,e,0,n).next()),s.done?null:s.value}prevMatchInRange(e,n,i){for(let s=1;;s++){let r=Math.max(n,i-s*1e4),o=Du(this.spec,e,r,i),a=null;for(;!o.next().done;)a=o.value;if(a&&(r==n||a.from>r+10))return a;if(r==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let s=i.length;s>0;s--){let r=+i.slice(0,s);if(r>0&&r<e.match.length)return e.match[r]+i.slice(s)}return n})}matchAll(e,n){let i=Du(this.spec,e,0,e.doc.length),s=[];for(;!i.next().done;){if(s.length>=n)return null;s.push(i.value)}return s}highlight(e,n,i,s){let r=Du(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!r.next().done;)s(r.value.from,r.value.to)}}const op=ht.define(),EA=ht.define(),Dl=Pi.define({create(t){return new k2(Ww(t).create(),null)},update(t,e){for(let n of e.effects)n.is(op)?t=new k2(n.value.create(),t.panel):n.is(EA)&&(t=new k2(t.query,n.value?QA:null));return t},provide:t=>np.from(t,e=>e.panel)});class k2{constructor(e,n){this.query=e,this.panel=n}}const WCe=et.mark({class:"cm-searchMatch"}),GCe=et.mark({class:"cm-searchMatch cm-searchMatch-selected"}),UCe=zn.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Dl))}update(t){let e=t.state.field(Dl);(e!=t.startState.field(Dl)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return et.none;let{view:n}=this,i=new La;for(let s=0,r=n.visibleRanges,o=r.length;s<o;s++){let{from:a,to:l}=r[s];for(;s<o-1&&l>r[s+1].from-2*250;)l=r[++s].to;t.highlight(n.state,a,l,(c,u)=>{let h=n.state.selection.ranges.some(p=>p.from==c&&p.to==u);i.add(c,u,h?GCe:WCe)})}return i.finish()}},{decorations:t=>t.decorations});function Hp(t){return e=>{let n=e.state.field(Dl,!1);return n&&n.query.spec.valid?t(e,n):R_(e)}}const P0=Hp((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let s=fe.single(i.from,i.to),r=t.state.facet(rh);return t.dispatch({selection:s,effects:[NA(t,i),r.scrollToMatch(s.main,t)],userEvent:"select.search"}),I_(t),!0}),T0=Hp((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,s=e.prevMatch(n,i,i);if(!s)return!1;let r=fe.single(s.from,s.to),o=t.state.facet(rh);return t.dispatch({selection:r,effects:[NA(t,s),o.scrollToMatch(r.main,t)],userEvent:"select.search"}),I_(t),!0}),HCe=Hp((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:fe.create(n.map(i=>fe.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),YCe=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:s}=n.main,r=[],o=0;for(let a=new Ld(t.doc,t.sliceDoc(i,s));!a.next().done;){if(r.length>1e3)return!1;a.value.from==i&&(o=r.length),r.push(fe.range(a.value.from,a.value.to))}return e(t.update({selection:fe.create(r,o),userEvent:"select.search.matches"})),!0},BP=Hp((t,{query:e})=>{let{state:n}=t,{from:i,to:s}=n.selection.main;if(n.readOnly)return!1;let r=e.nextMatch(n,i,i);if(!r)return!1;let o=r,a=[],l,c,u=[];o.from==i&&o.to==s&&(c=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(n,o.from,o.to),u.push(Le.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+".")));let h=t.state.changes(a);return o&&(l=fe.single(o.from,o.to).map(h),u.push(NA(t,o)),u.push(n.facet(rh).scrollToMatch(l.main,t))),t.dispatch({changes:h,selection:l,effects:u,userEvent:"input.replace"}),!0}),KCe=Hp((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(s=>{let{from:r,to:o}=s;return{from:r,to:o,insert:e.getReplacement(s)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Le.announce.of(i),userEvent:"input.replace.all"}),!0});function QA(t){return t.state.facet(rh).createPanel(t)}function Ww(t,e){var n,i,s,r,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=t.facet(rh);return new $_({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:c.caseSensitive,literal:(s=e==null?void 0:e.literal)!==null&&s!==void 0?s:c.literal,regexp:(r=e==null?void 0:e.regexp)!==null&&r!==void 0?r:c.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function M_(t){let e=CA(t,QA);return e&&e.dom.querySelector("[main-field]")}function I_(t){let e=M_(t);e&&e==t.root.activeElement&&e.select()}const R_=t=>{let e=t.state.field(Dl,!1);if(e&&e.panel){let n=M_(t);if(n&&n!=t.root.activeElement){let i=Ww(t.state,e.query.spec);i.valid&&t.dispatch({effects:op.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[EA.of(!0),e?op.of(Ww(t.state,e.query.spec)):ht.appendConfig.of(nAe)]});return!0},__=t=>{let e=t.state.field(Dl,!1);if(!e||!e.panel)return!1;let n=CA(t,QA);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:EA.of(!1)}),!0},JCe=[{key:"Mod-f",run:R_,scope:"editor search-panel"},{key:"F3",run:P0,shift:T0,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:P0,shift:T0,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:__,scope:"editor search-panel"},{key:"Mod-Shift-l",run:YCe},{key:"Mod-Alt-g",run:$Ce},{key:"Mod-d",run:BCe,preventDefault:!0}];class eAe{constructor(e){this.view=e;let n=this.query=e.state.field(Dl).query.spec;this.commit=this.commit.bind(this),this.searchField=on("input",{value:n.search,placeholder:Fs(e,"Find"),"aria-label":Fs(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=on("input",{value:n.replace,placeholder:Fs(e,"Replace"),"aria-label":Fs(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=on("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=on("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=on("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(s,r,o){return on("button",{class:"cm-button",name:s,onclick:r,type:"button"},o)}this.dom=on("div",{onkeydown:s=>this.keydown(s),class:"cm-search"},[this.searchField,i("next",()=>P0(e),[Fs(e,"next")]),i("prev",()=>T0(e),[Fs(e,"previous")]),i("select",()=>HCe(e),[Fs(e,"all")]),on("label",null,[this.caseField,Fs(e,"match case")]),on("label",null,[this.reField,Fs(e,"regexp")]),on("label",null,[this.wordField,Fs(e,"by word")]),...e.state.readOnly?[]:[on("br"),this.replaceField,i("replace",()=>BP(e),[Fs(e,"replace")]),i("replaceAll",()=>KCe(e),[Fs(e,"replace all")])],on("button",{name:"close",onclick:()=>__(e),"aria-label":Fs(e,"close"),type:"button"},[""])])}commit(){let e=new $_({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:op.of(e)}))}keydown(e){nve(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?T0:P0)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),BP(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(op)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(rh).top}}function Fs(t,e){return t.state.phrase(e)}const Tg=30,$g=/[\s\.,:;?!]/;function NA(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),s=t.state.doc.lineAt(n).to,r=Math.max(i.from,e-Tg),o=Math.min(s,n+Tg),a=t.state.sliceDoc(r,o);if(r!=i.from){for(let l=0;l<Tg;l++)if(!$g.test(a[l+1])&&$g.test(a[l])){a=a.slice(l);break}}if(o!=s){for(let l=a.length-1;l>a.length-Tg;l--)if(!$g.test(a[l-1])&&$g.test(a[l])){a=a.slice(0,l);break}}return Le.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${i.number}.`)}const tAe=Le.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),nAe=[Dl,Zl.low(UCe),tAe];class E_{constructor(e,n,i,s){this.state=e,this.pos=n,this.explicit=i,this.view=s,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=Dn(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),s=n.text.slice(i-n.from,this.pos-n.from),r=s.search(N_(e,!1));return r<0?null:{from:i+r,to:this.pos,text:s.slice(r)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function VP(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function iAe(t){let e=Object.create(null),n=Object.create(null);for(let{label:s}of t){e[s[0]]=!0;for(let r=1;r<s.length;r++)n[s[r]]=!0}let i=VP(e)+VP(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function Q_(t){let e=t.map(s=>typeof s=="string"?{label:s}:s),[n,i]=e.every(s=>/^\w+$/.test(s.label))?[/\w*$/,/\w+$/]:iAe(e);return s=>{let r=s.matchBefore(i);return r||s.explicit?{from:r?r.from:s.pos,options:e,validFor:n}:null}}function sAe(t,e){return n=>{for(let i=Dn(n.state).resolveInner(n.pos,-1);i;i=i.parent){if(t.indexOf(i.name)>-1)return null;if(i.type.isTop)break}return e(n)}}class jP{constructor(e,n,i,s){this.completion=e,this.source=n,this.match=i,this.score=s}}function Ic(t){return t.selection.main.from}function N_(t,e){var n;let{source:i}=t,s=e&&i[0]!="^",r=i[i.length-1]!="$";return!s&&!r?t:new RegExp(`${s?"^":""}(?:${i})${r?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const LA=Xa.define();function rAe(t,e,n,i){let{main:s}=t.selection,r=n-s.from,o=i-s.from;return{...t.changeByRange(a=>{if(a!=s&&n!=i&&t.sliceDoc(a.from+r,a.from+o)!=t.sliceDoc(n,i))return{range:a};let l=t.toText(e);return{changes:{from:a.from+r,to:i==s.from?a.to:a.from+o,insert:l},range:fe.cursor(a.from+r+l.length)}}),scrollIntoView:!0,userEvent:"input.complete"}}const zP=new WeakMap;function oAe(t){if(!Array.isArray(t))return t;let e=zP.get(t);return e||zP.set(t,e=Q_(t)),e}const $0=ht.define(),ap=ht.define();class aAe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=Os(e,n),s=Io(i);this.chars.push(i);let r=e.slice(n,n+s),o=r.toUpperCase();this.folded.push(Os(o==r?r.toLowerCase():o,0)),n+=s}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:i,any:s,precise:r,byWord:o}=this;if(n.length==1){let T=Os(e,0),k=Io(T),D=k==e.length?0:-100;if(T!=n[0])if(T==i[0])D+=-200;else return null;return this.ret(D,[0,k])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,c=0;if(a<0){for(let T=0,k=Math.min(e.length,200);T<k&&c<l;){let D=Os(e,T);(D==n[c]||D==i[c])&&(s[c++]=T),T+=Io(D)}if(c<l)return null}let u=0,h=0,p=!1,m=0,y=-1,O=-1,S=/[a-z]/.test(e),x=!0;for(let T=0,k=Math.min(e.length,200),D=0;T<k&&h<l;){let M=Os(e,T);a<0&&(u<l&&M==n[u]&&(r[u++]=T),m<l&&(M==n[m]||M==i[m]?(m==0&&(y=T),O=T+1,m++):m=0));let L,j=M<255?M>=48&&M<=57||M>=97&&M<=122?2:M>=65&&M<=90?1:0:(L=rA(M))!=L.toLowerCase()?1:L!=L.toUpperCase()?2:0;(!T||j==1&&S||D==0&&j!=0)&&(n[h]==M||i[h]==M&&(p=!0)?o[h++]=T:o.length&&(x=!1)),D=j,T+=Io(M)}return h==l&&o[0]==0&&x?this.result(-100+(p?-200:0),o,e):m==l&&y==0?this.ret(-200-e.length+(O==e.length?0:-100),[0,O]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):m==l?this.ret(-900-e.length,[y,O]):h==l?this.result(-100+(p?-200:0)+-700+(x?0:-1100),o,e):n.length==2?null:this.result((s[0]?-700:0)+-200+-1100,s,e)}result(e,n,i){let s=[],r=0;for(let o of n){let a=o+(this.astral?Io(Os(i,o)):1);r&&s[r-1]==o?s[r-1]=a:(s[r++]=o,s[r++]=a)}return this.ret(e-i.length,s)}}class lAe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),i=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,n.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const li=Ve.define({combine(t){return Go(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:cAe,filterStrict:!1,compareCompletions:(e,n)=>(e.sortText||e.label).localeCompare(n.sortText||n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>ZP(e(i),n(i)),optionClass:(e,n)=>i=>ZP(e(i),n(i)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function ZP(t,e){return t?e?t+" "+e:t:e}function cAe(t,e,n,i,s,r){let o=t.textDirection==un.RTL,a=o,l=!1,c="top",u,h,p=e.left-s.left,m=s.right-e.right,y=i.right-i.left,O=i.bottom-i.top;if(a&&p<Math.min(y,m)?a=!1:!a&&m<Math.min(y,p)&&(a=!0),y<=(a?p:m))u=Math.max(s.top,Math.min(n.top,s.bottom-O))-e.top,h=Math.min(400,a?p:m);else{l=!0,h=Math.min(400,(o?e.right:s.right-e.left)-30);let T=s.bottom-e.bottom;T>=O||T>e.top?u=n.bottom-e.top:(c="bottom",u=e.bottom-n.top)}let S=(e.bottom-e.top)/r.offsetHeight,x=(e.right-e.left)/r.offsetWidth;return{style:`${c}: ${u/S}px; max-width: ${h/x}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function uAe(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(s=>"cm-completionIcon-"+s)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,s,r){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,l=0;for(let c=0;c<r.length;){let u=r[c++],h=r[c++];u>l&&o.appendChild(document.createTextNode(a.slice(l,u)));let p=o.appendChild(document.createElement("span"));p.appendChild(document.createTextNode(a.slice(u,h))),p.className="cm-completionMatchedText",l=h}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function P2(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let s=Math.floor(e/n);return{from:s*n,to:(s+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class dAe{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let s=e.state.field(n),{options:r,selected:o}=s.open,a=e.state.facet(li);this.optionContent=uAe(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=P2(r.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=e.state.field(n).open;for(let u=l.target,h;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(h=/-(\d+)$/.exec(u.id))&&+h[1]<c.length){this.applyCompletion(e,c[+h[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(li).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:ap.of(null)})}),this.showOptions(r,s.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let i=e.state.field(this.stateField),s=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=s){let{options:r,selected:o,disabled:a}=i.open;(!s.open||s.open.options!=r)&&(this.range=P2(r.length,o,e.state.facet(li).maxRenderedOptions),this.showOptions(r,i.id)),this.updateSel(),a!=((n=s.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;(n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=P2(n.options.length,n.selected,this.view.state.facet(li).maxRenderedOptions),this.showOptions(n.options,e.id));let i=this.updateSelectedOption(n.selected);if(i){this.destroyInfo();let{completion:s}=n.options[n.selected],{info:r}=s;if(!r)return;let o=typeof r=="string"?document.createTextNode(r):r(s);if(!o)return;"then"in o?o.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a,s)}).catch(a=>As(this.view.state,a,"completion info")):(this.addInfoPane(o,s),i.setAttribute("aria-describedby",this.info.id))}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",i.id="cm-completionInfo-"+Math.floor(Math.random()*65535).toString(16),e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:s,destroy:r}=e;i.appendChild(s),this.infoDestroy=r||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,s=this.range.from;i;i=i.nextSibling,s++)i.nodeName!="LI"||!i.id?s--:s==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&(i.removeAttribute("aria-selected"),i.removeAttribute("aria-describedby"));return n&&fAe(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),s=e.getBoundingClientRect(),r=this.space;if(!r){let o=this.dom.ownerDocument.documentElement;r={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return s.top>Math.min(r.bottom,n.bottom)-10||s.bottom<Math.max(r.top,n.top)+10?null:this.view.state.facet(li).positionInfo(this.view,n,s,i,r,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const s=document.createElement("ul");s.id=n,s.setAttribute("role","listbox"),s.setAttribute("aria-expanded","true"),s.setAttribute("aria-label",this.view.state.phrase("Completions")),s.addEventListener("mousedown",o=>{o.target==s&&o.preventDefault()});let r=null;for(let o=i.from;o<i.to;o++){let{completion:a,match:l}=e[o],{section:c}=a;if(c){let p=typeof c=="string"?c:c.name;if(p!=r&&(o>i.from||i.from==0))if(r=p,typeof c!="string"&&c.header)s.appendChild(c.header(c));else{let m=s.appendChild(document.createElement("completion-section"));m.textContent=p}}const u=s.appendChild(document.createElement("li"));u.id=n+"-"+o,u.setAttribute("role","option");let h=this.optionClass(a);h&&(u.className=h);for(let p of this.optionContent){let m=p(a,this.view.state,this.view,l);m&&u.appendChild(m)}}return i.from&&s.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&s.classList.add("cm-completionListIncompleteBottom"),s}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function hAe(t,e){return n=>new dAe(n,t,e)}function fAe(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),s=n.height/t.offsetHeight;i.top<n.top?t.scrollTop-=(n.top-i.top)/s:i.bottom>n.bottom&&(t.scrollTop+=(i.bottom-n.bottom)/s)}function qP(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function pAe(t,e){let n=[],i=null,s=null,r=u=>{n.push(u);let{section:h}=u.completion;if(h){i||(i=[]);let p=typeof h=="string"?h:h.name;i.some(m=>m.name==p)||i.push(typeof h=="string"?{name:p}:h)}},o=e.facet(li);for(let u of t)if(u.hasResult()){let h=u.result.getMatch;if(u.result.filter===!1)for(let p of u.result.options)r(new jP(p,u.source,h?h(p):[],1e9-n.length));else{let p=e.sliceDoc(u.from,u.to),m,y=o.filterStrict?new lAe(p):new aAe(p);for(let O of u.result.options)if(m=y.match(O.label)){let S=O.displayLabel?h?h(O,m.matched):[]:m.matched,x=m.score+(O.boost||0);if(r(new jP(O,u.source,S,x)),typeof O.section=="object"&&O.section.rank==="dynamic"){let{name:T}=O.section;s||(s=Object.create(null)),s[T]=Math.max(x,s[T]||-1e9)}}}}if(i){let u=Object.create(null),h=0,p=(m,y)=>(m.rank==="dynamic"&&y.rank==="dynamic"?s[y.name]-s[m.name]:0)||(typeof m.rank=="number"?m.rank:1e9)-(typeof y.rank=="number"?y.rank:1e9)||(m.name<y.name?-1:1);for(let m of i.sort(p))h-=1e5,u[m.name]=h;for(let m of n){let{section:y}=m.completion;y&&(m.score+=u[typeof y=="string"?y:y.name])}}let a=[],l=null,c=o.compareCompletions;for(let u of n.sort((h,p)=>p.score-h.score||c(h.completion,p.completion))){let h=u.completion;!l||l.label!=h.label||l.detail!=h.detail||l.type!=null&&h.type!=null&&l.type!=h.type||l.apply!=h.apply||l.boost!=h.boost?a.push(u):qP(u.completion)>qP(l)&&(a[a.length-1]=u),l=u.completion}return a}class Fu{constructor(e,n,i,s,r,o){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=s,this.selected=r,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Fu(this.options,XP(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,s,r,o){if(s&&!o&&e.some(c=>c.isPending))return s.setDisabled();let a=pAe(e,n);if(!a.length)return s&&e.some(c=>c.isPending)?s.setDisabled():null;let l=n.facet(li).selectOnOpen?0:-1;if(s&&s.selected!=l&&s.selected!=-1){let c=s.options[s.selected].completion;for(let u=0;u<a.length;u++)if(a[u].completion==c){l=u;break}}return new Fu(a,XP(i,l),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:vAe,above:r.aboveCursor},s?s.timestamp:Date.now(),l,!1)}map(e){return new Fu(this.options,this.attrs,{...this.tooltip,pos:e.mapPos(this.tooltip.pos)},this.timestamp,this.selected,this.disabled)}setDisabled(){return new Fu(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class D0{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new D0(OAe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(li),r=(i.override||n.languageDataAt("autocomplete",Ic(n)).map(oAe)).map(l=>(this.active.find(u=>u.source==l)||new Tr(l,this.active.some(u=>u.state!=0)?1:0)).update(e,i));r.length==this.active.length&&r.every((l,c)=>l==this.active[c])&&(r=this.active);let o=this.open,a=e.effects.some(l=>l.is(FA));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||r.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!mAe(r,this.active)||a?o=Fu.build(r,n,this.id,o,i,a):o&&o.disabled&&!r.some(l=>l.isPending)&&(o=null),!o&&r.every(l=>!l.isPending)&&r.some(l=>l.hasResult())&&(r=r.map(l=>l.hasResult()?new Tr(l.source,0):l));for(let l of e.effects)l.is(F_)&&(o=o&&o.setSelected(l.value,this.id));return r==this.active&&o==this.open?this:new D0(r,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?gAe:yAe}}function mAe(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;i<e.length&&!e[i].hasResult();)i++;let s=n==t.length,r=i==e.length;if(s||r)return s==r;if(t[n++].result!=e[i++].result)return!1}}const gAe={"aria-autocomplete":"list"},yAe={};function XP(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const OAe=[];function L_(t,e){if(t.isUserEvent("input.complete")){let i=t.annotation(LA);if(i&&e.activateOnCompletion(i))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class Tr{constructor(e,n,i=!1){this.source=e,this.state=n,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let i=L_(e,n),s=this;(i&8||i&16&&this.touches(e))&&(s=new Tr(s.source,0)),i&4&&s.state==0&&(s=new Tr(this.source,1)),s=s.updateFor(e,i);for(let r of e.effects)if(r.is($0))s=new Tr(s.source,1,r.value);else if(r.is(ap))s=new Tr(s.source,0);else if(r.is(FA))for(let o of r.value)o.source==s.source&&(s=o);return s}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Ic(e.state))}}class id extends Tr{constructor(e,n,i,s,r,o){super(e,3,n),this.limit=i,this.result=s,this.from=r,this.to=o}hasResult(){return!0}updateFor(e,n){var i;if(!(n&3))return this.map(e.changes);let s=this.result;s.map&&!e.changes.empty&&(s=s.map(s,e.changes));let r=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=Ic(e.state);if(a>o||!s||n&2&&(Ic(e.startState)==this.from||a<this.limit))return new Tr(this.source,n&4?1:0);let l=e.changes.mapPos(this.limit);return bAe(s.validFor,e.state,r,o)?new id(this.source,this.explicit,l,s,r,o):s.update&&(s=s.update(s,r,o,new E_(e.state,a,!1)))?new id(this.source,this.explicit,l,s,s.from,(i=s.to)!==null&&i!==void 0?i:Ic(e.state)):new Tr(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new id(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Tr(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function bAe(t,e,n,i){if(!t)return!1;let s=e.sliceDoc(n,i);return typeof t=="function"?t(s,n,i,e):N_(t,!0).test(s)}const FA=ht.define({map(t,e){return t.map(n=>n.map(e))}}),F_=ht.define(),bs=Pi.define({create(){return D0.start()},update(t,e){return t.update(e)},provide:t=>[SA.from(t,e=>e.tooltip),Le.contentAttributes.from(t,e=>e.attrs)]});function BA(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(bs).active.find(s=>s.source==e.source);return i instanceof id?(typeof n=="string"?t.dispatch({...rAe(t.state,n,i.from,i.to),annotations:LA.of(e.completion)}):n(t,e.completion,i.from,i.to),!0):!1}const vAe=hAe(bs,BA);function Dg(t,e="option"){return n=>{let i=n.state.field(bs,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(li).interactionDelay)return!1;let s=1,r;e=="page"&&(r=yR(n,i.open.tooltip))&&(s=Math.max(2,Math.floor(r.dom.offsetHeight/r.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,a=i.open.selected>-1?i.open.selected+s*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:F_.of(a)}),!0}}const wAe=t=>{let e=t.state.field(bs,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(li).interactionDelay?!1:BA(t,e.open.options[e.open.selected])},T2=t=>t.state.field(bs,!1)?(t.dispatch({effects:$0.of(!0)}),!0):!1,SAe=t=>{let e=t.state.field(bs,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:ap.of(null)}),!0)};class CAe{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const AAe=50,xAe=1e3,kAe=zn.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(bs).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(bs),n=t.state.facet(li);if(!t.selectionSet&&!t.docChanged&&t.startState.field(bs)==e)return;let i=t.transactions.some(r=>{let o=L_(r,n);return o&8||(r.selection||r.docChanged)&&!(o&3)});for(let r=0;r<this.running.length;r++){let o=this.running[r];if(i||o.context.abortOnDocChange&&t.docChanged||o.updates.length+t.transactions.length>AAe&&Date.now()-o.time>xAe){for(let a of o.context.abortListeners)try{a()}catch(l){As(this.view.state,l)}o.context.abortListeners=null,this.running.splice(r--,1)}else o.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(r=>r.effects.some(o=>o.is($0)))&&(this.pendingStart=!0);let s=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(r=>r.isPending&&!this.running.some(o=>o.active.source==r.source))?setTimeout(()=>this.startUpdate(),s):-1,this.composing!=0)for(let r of t.transactions)r.isUserEvent("input.type")?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(bs);for(let n of e.active)n.isPending&&!this.running.some(i=>i.active.source==n.source)&&this.startQuery(n);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(li).updateSyncTime))}startQuery(t){let{state:e}=this.view,n=Ic(e),i=new E_(e,n,t.explicit,this.view),s=new CAe(t,i);this.running.push(s),Promise.resolve(t.source(i)).then(r=>{s.context.aborted||(s.done=r||null,this.scheduleAccept())},r=>{this.view.dispatch({effects:ap.of(null)}),As(this.view.state,r)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(li).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(li),i=this.view.state.field(bs);for(let s=0;s<this.running.length;s++){let r=this.running[s];if(r.done===void 0)continue;if(this.running.splice(s--,1),r.done){let a=Ic(r.updates.length?r.updates[0].startState:this.view.state),l=Math.min(a,r.done.from+(r.active.explicit?0:1)),c=new id(r.active.source,r.active.explicit,l,r.done,r.done.from,(t=r.done.to)!==null&&t!==void 0?t:a);for(let u of r.updates)c=c.update(u,n);if(c.hasResult()){e.push(c);continue}}let o=i.active.find(a=>a.source==r.active.source);if(o&&o.isPending)if(r.done==null){let a=new Tr(r.active.source,0);for(let l of r.updates)a=a.update(l,n);a.isPending||e.push(a)}else this.startQuery(o)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:FA.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(bs,!1);if(e&&e.tooltip&&this.view.state.facet(li).closeOnBlur){let n=e.open&&yR(this.view,e.open.tooltip);(!n||!n.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:ap.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:$0.of(!1)}),20),this.composing=0}}}),PAe=typeof navigator=="object"&&/Win/.test(navigator.platform),TAe=Zl.highest(Le.domEventHandlers({keydown(t,e){let n=e.state.field(bs,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||t.key.length>1||t.ctrlKey&&!(PAe&&t.altKey)||t.metaKey)return!1;let i=n.open.options[n.open.selected],s=n.active.find(o=>o.source==i.source),r=i.completion.commitCharacters||s.result.commitCharacters;return r&&r.indexOf(t.key)>-1&&BA(e,i),!1}})),B_=Le.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class $Ae{constructor(e,n,i,s){this.field=e,this.line=n,this.from=i,this.to=s}}class VA{constructor(e,n,i){this.field=e,this.from=n,this.to=i}map(e){let n=e.mapPos(this.from,-1,vi.TrackDel),i=e.mapPos(this.to,1,vi.TrackDel);return n==null||i==null?null:new VA(this.field,n,i)}}class jA{constructor(e,n){this.lines=e,this.fieldPositions=n}instantiate(e,n){let i=[],s=[n],r=e.doc.lineAt(n),o=/^\s*/.exec(r.text)[0];for(let l of this.lines){if(i.length){let c=o,u=/^\t*/.exec(l)[0].length;for(let h=0;h<u;h++)c+=e.facet(eO);s.push(n+c.length-u),l=c+l.slice(u)}i.push(l),n+=l.length+1}let a=this.fieldPositions.map(l=>new VA(l.field,s[l.line]+l.from,s[l.line]+l.to));return{text:i,ranges:a}}static parse(e){let n=[],i=[],s=[],r;for(let o of e.split(/\r\n?|\n/)){for(;r=/[#$]\{(?:(\d+)(?::([^{}]*))?|((?:\\[{}]|[^{}])*))\}/.exec(o);){let a=r[1]?+r[1]:null,l=r[2]||r[3]||"",c=-1,u=l.replace(/\\[{}]/g,h=>h[1]);for(let h=0;h<n.length;h++)(a!=null?n[h].seq==a:u&&n[h].name==u)&&(c=h);if(c<0){let h=0;for(;h<n.length&&(a==null||n[h].seq!=null&&n[h].seq<a);)h++;n.splice(h,0,{seq:a,name:u}),c=h;for(let p of s)p.field>=c&&p.field++}for(let h of s)if(h.line==i.length&&h.from>r.index){let p=r[2]?3+(r[1]||"").length:2;h.from-=p,h.to-=p}s.push(new $Ae(c,i.length,r.index,r.index+u.length)),o=o.slice(0,r.index)+l+o.slice(r.index+r[0].length)}o=o.replace(/\\([{}])/g,(a,l,c)=>{for(let u of s)u.line==i.length&&u.from>c&&(u.from--,u.to--);return l}),i.push(o)}return new jA(i,s)}}let DAe=et.widget({widget:new class extends Uo{toDOM(){let t=document.createElement("span");return t.className="cm-snippetFieldPosition",t}ignoreEvent(){return!1}}}),MAe=et.mark({class:"cm-snippetField"});class oh{constructor(e,n){this.ranges=e,this.active=n,this.deco=et.set(e.map(i=>(i.from==i.to?DAe:MAe).range(i.from,i.to)),!0)}map(e){let n=[];for(let i of this.ranges){let s=i.map(e);if(!s)return null;n.push(s)}return new oh(n,this.active)}selectionInsideField(e){return e.ranges.every(n=>this.ranges.some(i=>i.field==this.active&&i.from<=n.from&&i.to>=n.to))}}const Yp=ht.define({map(t,e){return t&&t.map(e)}}),IAe=ht.define(),lp=Pi.define({create(){return null},update(t,e){for(let n of e.effects){if(n.is(Yp))return n.value;if(n.is(IAe)&&t)return new oh(t.ranges,n.value)}return t&&e.docChanged&&(t=t.map(e.changes)),t&&e.selection&&!t.selectionInsideField(e.selection)&&(t=null),t},provide:t=>Le.decorations.from(t,e=>e?e.deco:et.none)});function zA(t,e){return fe.create(t.filter(n=>n.field==e).map(n=>fe.range(n.from,n.to)))}function RAe(t){let e=jA.parse(t);return(n,i,s,r)=>{let{text:o,ranges:a}=e.instantiate(n.state,s),{main:l}=n.state.selection,c={changes:{from:s,to:r==l.from?l.to:r,insert:Zt.of(o)},scrollIntoView:!0,annotations:i?[LA.of(i),Wn.userEvent.of("input.complete")]:void 0};if(a.length&&(c.selection=zA(a,0)),a.some(u=>u.field>0)){let u=new oh(a,0),h=c.effects=[Yp.of(u)];n.state.field(lp,!1)===void 0&&h.push(ht.appendConfig.of([lp,LAe,FAe,B_]))}n.dispatch(n.state.update(c))}}function V_(t){return({state:e,dispatch:n})=>{let i=e.field(lp,!1);if(!i||t<0&&i.active==0)return!1;let s=i.active+t,r=t>0&&!i.ranges.some(o=>o.field==s+t);return n(e.update({selection:zA(i.ranges,s),effects:Yp.of(r?null:new oh(i.ranges,s)),scrollIntoView:!0})),!0}}const _Ae=({state:t,dispatch:e})=>t.field(lp,!1)?(e(t.update({effects:Yp.of(null)})),!0):!1,EAe=V_(1),QAe=V_(-1),NAe=[{key:"Tab",run:EAe,shift:QAe},{key:"Escape",run:_Ae}],WP=Ve.define({combine(t){return t.length?t[0]:NAe}}),LAe=Zl.highest(H1.compute([WP],t=>t.facet(WP)));function hs(t,e){return{...e,apply:RAe(t)}}const FAe=Le.domEventHandlers({mousedown(t,e){let n=e.state.field(lp,!1),i;if(!n||(i=e.posAtCoords({x:t.clientX,y:t.clientY}))==null)return!1;let s=n.ranges.find(r=>r.from<=i&&r.to>=i);return!s||s.field==n.active?!1:(e.dispatch({selection:zA(n.ranges,s.field),effects:Yp.of(n.ranges.some(r=>r.field>s.field)?new oh(n.ranges,s.field):null),scrollIntoView:!0}),!0)}}),cp={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},bc=ht.define({map(t,e){let n=e.mapPos(t,-1,vi.TrackAfter);return n??void 0}}),ZA=new class extends Rl{};ZA.startSide=1;ZA.endSide=-1;const j_=Pi.define({create(){return Mt.empty},update(t,e){if(t=t.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:i=>i>=n.from&&i<=n.to})}for(let n of e.effects)n.is(bc)&&(t=t.update({add:[ZA.range(n.value,n.value+1)]}));return t}});function BAe(){return[jAe,j_]}const $2="()[]{}<>";function z_(t){for(let e=0;e<$2.length;e+=2)if($2.charCodeAt(e)==t)return $2.charAt(e+1);return rA(t<128?t:t+1)}function Z_(t,e){return t.languageDataAt("closeBrackets",e)[0]||cp}const VAe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),jAe=Le.inputHandler.of((t,e,n,i)=>{if((VAe?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let s=t.state.selection.main;if(i.length>2||i.length==2&&Io(Os(i,0))==1||e!=s.from||n!=s.to)return!1;let r=qAe(t.state,i);return r?(t.dispatch(r),!0):!1}),zAe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=Z_(t,t.selection.main.head).brackets||cp.brackets,s=null,r=t.changeByRange(o=>{if(o.empty){let a=XAe(t.doc,o.head);for(let l of i)if(l==a&&cO(t.doc,o.head)==z_(Os(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:fe.cursor(o.head-l.length)}}return{range:s=o}});return s||e(t.update(r,{scrollIntoView:!0,userEvent:"delete.backward"})),!s},ZAe=[{key:"Backspace",run:zAe}];function qAe(t,e){let n=Z_(t,t.selection.main.head),i=n.brackets||cp.brackets;for(let s of i){let r=z_(Os(s,0));if(e==s)return r==s?UAe(t,s,i.indexOf(s+s+s)>-1,n):WAe(t,s,r,n.before||cp.before);if(e==r&&q_(t,t.selection.main.from))return GAe(t,s,r)}return null}function q_(t,e){let n=!1;return t.field(j_).between(0,t.doc.length,i=>{i==e&&(n=!0)}),n}function cO(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Io(Os(n,0)))}function XAe(t,e){let n=t.sliceString(e-2,e);return Io(Os(n,0))==n.length?n:n.slice(1)}function WAe(t,e,n,i){let s=null,r=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:n,from:o.to}],effects:bc.of(o.to+e.length),range:fe.range(o.anchor+e.length,o.head+e.length)};let a=cO(t.doc,o.head);return!a||/\s/.test(a)||i.indexOf(a)>-1?{changes:{insert:e+n,from:o.head},effects:bc.of(o.head+e.length),range:fe.cursor(o.head+e.length)}:{range:s=o}});return s?null:t.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function GAe(t,e,n){let i=null,s=t.changeByRange(r=>r.empty&&cO(t.doc,r.head)==n?{changes:{from:r.head,to:r.head+n.length,insert:n},range:fe.cursor(r.head+n.length)}:i={range:r});return i?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function UAe(t,e,n,i){let s=i.stringPrefixes||cp.stringPrefixes,r=null,o=t.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:bc.of(a.to+e.length),range:fe.range(a.anchor+e.length,a.head+e.length)};let l=a.head,c=cO(t.doc,l),u;if(c==e){if(GP(t,l))return{changes:{insert:e+e,from:l},effects:bc.of(l+e.length),range:fe.cursor(l+e.length)};if(q_(t,l)){let p=n&&t.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+p.length,insert:p},range:fe.cursor(l+p.length)}}}else{if(n&&t.sliceDoc(l-2*e.length,l)==e+e&&(u=UP(t,l-2*e.length,s))>-1&&GP(t,u))return{changes:{insert:e+e+e+e,from:l},effects:bc.of(l+e.length),range:fe.cursor(l+e.length)};if(t.charCategorizer(l)(c)!=An.Word&&UP(t,l,s)>-1&&!HAe(t,l,e,s))return{changes:{insert:e+e,from:l},effects:bc.of(l+e.length),range:fe.cursor(l+e.length)}}return{range:r=a}});return r?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function GP(t,e){let n=Dn(t).resolveInner(e+1);return n.parent&&n.from==e}function HAe(t,e,n,i){let s=Dn(t).resolveInner(e,-1),r=i.reduce((o,a)=>Math.max(o,a.length),0);for(let o=0;o<5;o++){let a=t.sliceDoc(s.from,Math.min(s.to,s.from+n.length+r)),l=a.indexOf(n);if(!l||l>-1&&i.indexOf(a.slice(0,l))>-1){let u=s.firstChild;for(;u&&u.from==s.from&&u.to-u.from>n.length+l;){if(t.sliceDoc(u.to-n.length,u.to)==n)return!1;u=u.firstChild}return!0}let c=s.to==e&&s.parent;if(!c)break;s=c}return!1}function UP(t,e,n){let i=t.charCategorizer(e);if(i(t.sliceDoc(e-1,e))!=An.Word)return e;for(let s of n){let r=e-s.length;if(t.sliceDoc(r,e)==s&&i(t.sliceDoc(r-1,r))!=An.Word)return r}return-1}function X_(t={}){return[TAe,bs,li.of(t),kAe,YAe,B_]}const W_=[{key:"Ctrl-Space",run:T2},{mac:"Alt-`",run:T2},{mac:"Alt-i",run:T2},{key:"Escape",run:SAe},{key:"ArrowDown",run:Dg(!0)},{key:"ArrowUp",run:Dg(!1)},{key:"PageDown",run:Dg(!0,"page")},{key:"PageUp",run:Dg(!1,"page")},{key:"Enter",run:wAe}],YAe=Zl.highest(H1.computeN([li],t=>t.facet(li).defaultKeymap?[W_]:[]));class HP{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class fc{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let s=i.facet(up).markerFilter;s&&(e=s(e,i));let r=e.slice().sort((m,y)=>m.from-y.from||m.to-y.to),o=new La,a=[],l=0,c=i.doc.iter(),u=0,h=i.doc.length;for(let m=0;;){let y=m==r.length?null:r[m];if(!y&&!a.length)break;let O,S;if(a.length)O=l,S=a.reduce((k,D)=>Math.min(k,D.to),y&&y.from>O?y.from:1e8);else{if(O=y.from,O>h)break;S=y.to,a.push(y),m++}for(;m<r.length;){let k=r[m];if(k.from==O&&(k.to>k.from||k.to==O))a.push(k),m++,S=Math.min(k.to,S);else{S=Math.min(k.from,S);break}}S=Math.min(S,h);let x=!1;if(a.some(k=>k.from==O&&(k.to==S||S==h))&&(x=O==S,!x&&S-O<10)){let k=O-(u+c.value.length);k>0&&(c.next(k),u=O);for(let D=O;;){if(D>=S){x=!0;break}if(!c.lineBreak&&u+c.value.length>D)break;D=u+c.value.length,u+=c.value.length,c.next()}}let T=uxe(a);if(x)o.add(O,O,et.widget({widget:new oxe(T),diagnostics:a.slice()}));else{let k=a.reduce((D,M)=>M.markClass?D+" "+M.markClass:D,"");o.add(O,S,et.mark({class:"cm-lintRange cm-lintRange-"+T+k,diagnostics:a.slice(),inclusiveEnd:a.some(D=>D.to>S)}))}if(l=S,l==h)break;for(let k=0;k<a.length;k++)a[k].to<=l&&a.splice(k--,1)}let p=o.finish();return new fc(p,n,Fl(p))}}function Fl(t,e=null,n=0){let i=null;return t.between(n,1e9,(s,r,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!i)i=new HP(s,r,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new HP(i.from,r,i.diagnostic)}}),i}function KAe(t,e){let n=e.pos,i=e.end||n,s=t.state.facet(up).hideOn(t,n,i);if(s!=null)return s;let r=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is(G_))||t.changes.touchesRange(r.from,Math.max(r.to,i)))}function JAe(t,e){return t.field(Us,!1)?e:e.concat(ht.appendConfig.of(dxe))}const G_=ht.define(),qA=ht.define(),U_=ht.define(),Us=Pi.define({create(){return new fc(et.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),i=null,s=t.panel;if(t.selected){let r=e.changes.mapPos(t.selected.from,1);i=Fl(n,t.selected.diagnostic,r)||Fl(n,null,r)}!n.size&&s&&e.state.facet(up).autoPanel&&(s=null),t=new fc(n,s,i)}for(let n of e.effects)if(n.is(G_)){let i=e.state.facet(up).autoPanel?n.value.length?dp.open:null:t.panel;t=fc.init(n.value,i,e.state)}else n.is(qA)?t=new fc(t.diagnostics,n.value?dp.open:null,t.selected):n.is(U_)&&(t=new fc(t.diagnostics,t.panel,n.value));return t},provide:t=>[np.from(t,e=>e.panel),Le.decorations.from(t,e=>e.diagnostics)]}),exe=et.mark({class:"cm-lintRange cm-lintRange-active"});function txe(t,e,n){let{diagnostics:i}=t.state.field(Us),s,r=-1,o=-1;i.between(e-(n<0?1:0),e+(n>0?1:0),(l,c,{spec:u})=>{if(e>=l&&e<=c&&(l==c||(e>l||n>0)&&(e<c||n<0)))return s=u.diagnostics,r=l,o=c,!1});let a=t.state.facet(up).tooltipFilter;return s&&a&&(s=a(s,t.state)),s?{pos:r,end:o,above:t.state.doc.lineAt(r).to<o,create(){return{dom:nxe(t,s)}}}:null}function nxe(t,e){return on("ul",{class:"cm-tooltip-lint"},e.map(n=>Y_(t,n,!1)))}const ixe=t=>{let e=t.state.field(Us,!1);(!e||!e.panel)&&t.dispatch({effects:JAe(t.state,[qA.of(!0)])});let n=CA(t,dp.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},YP=t=>{let e=t.state.field(Us,!1);return!e||!e.panel?!1:(t.dispatch({effects:qA.of(!1)}),!0)},sxe=t=>{let e=t.state.field(Us,!1);if(!e)return!1;let n=t.state.selection.main,i=Fl(e.diagnostics,null,n.to+1);return!i&&(i=Fl(e.diagnostics,null,0),!i||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},rxe=[{key:"Mod-Shift-m",run:ixe,preventDefault:!0},{key:"F8",run:sxe}],up=Ve.define({combine(t){return{sources:t.map(e=>e.source).filter(e=>e!=null),...Go(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{delay:Math.max,markerFilter:KP,tooltipFilter:KP,needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n,hideOn:(e,n)=>e?n?(i,s,r)=>e(i,s,r)||n(i,s,r):e:n,autoPanel:(e,n)=>e||n})}}});function KP(t,e){return t?e?(n,i)=>e(t(n,i),i):t:e}function H_(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let s=n[i];if(/[a-zA-Z]/.test(s)&&!e.some(r=>r.toLowerCase()==s.toLowerCase())){e.push(s);continue e}}e.push("")}return e}function Y_(t,e,n){var i;let s=n?H_(e.actions):[];return on("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},on("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((r,o)=>{let a=!1,l=m=>{if(m.preventDefault(),a)return;a=!0;let y=Fl(t.state.field(Us).diagnostics,e);y&&r.apply(t,y.from,y.to)},{name:c}=r,u=s[o]?c.indexOf(s[o]):-1,h=u<0?c:[c.slice(0,u),on("u",c.slice(u,u+1)),c.slice(u+1)],p=r.markClass?" "+r.markClass:"";return on("button",{type:"button",class:"cm-diagnosticAction"+p,onclick:l,onmousedown:l,"aria-label":` Action: ${c}${u<0?"":` (access key "${s[o]})"`}.`},h)}),e.source&&on("div",{class:"cm-diagnosticSource"},e.source))}class oxe extends Uo{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return on("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class JP{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Y_(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class dp{constructor(e){this.view=e,this.items=[];let n=s=>{if(!(s.ctrlKey||s.altKey||s.metaKey)){if(s.keyCode==27)YP(this.view),this.view.focus();else if(s.keyCode==38||s.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(s.keyCode==40||s.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(s.keyCode==36)this.moveSelection(0);else if(s.keyCode==35)this.moveSelection(this.items.length-1);else if(s.keyCode==13)this.view.focus();else if(s.keyCode>=65&&s.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:r}=this.items[this.selectedIndex],o=H_(r.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==s.keyCode){let l=Fl(this.view.state.field(Us).diagnostics,r);l&&r.actions[a].apply(e,l.from,l.to)}}else return;s.preventDefault()}},i=s=>{for(let r=0;r<this.items.length;r++)this.items[r].dom.contains(s.target)&&this.moveSelection(r)};this.list=on("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=on("div",{class:"cm-panel-lint"},this.list,on("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>YP(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Us).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(Us),i=0,s=!1,r=null,o=new Set;for(e.between(0,this.view.state.doc.length,(a,l,{spec:c})=>{for(let u of c.diagnostics){if(o.has(u))continue;o.add(u);let h=-1,p;for(let m=i;m<this.items.length;m++)if(this.items[m].diagnostic==u){h=m;break}h<0?(p=new JP(this.view,u),this.items.splice(i,0,p),s=!0):(p=this.items[h],h>i&&(this.items.splice(i,h-i),s=!0)),n&&p.diagnostic==n.diagnostic?p.dom.hasAttribute("aria-selected")||(p.dom.setAttribute("aria-selected","true"),r=p):p.dom.hasAttribute("aria-selected")&&p.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)s=!0,this.items.pop();this.items.length==0&&(this.items.push(new JP(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),s=!0),r?(this.list.setAttribute("aria-activedescendant",r.id),this.view.requestMeasure({key:this,read:()=>({sel:r.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{let c=l.height/this.list.offsetHeight;a.top<l.top?this.list.scrollTop-=(l.top-a.top)/c:a.bottom>l.bottom&&(this.list.scrollTop+=(a.bottom-l.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),s&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(Us),i=Fl(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:U_.of(i)})}static open(e){return new dp(e)}}function axe(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Mg(t){return axe(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const lxe=Le.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Mg("#d11")},".cm-lintRange-warning":{backgroundImage:Mg("orange")},".cm-lintRange-info":{backgroundImage:Mg("#999")},".cm-lintRange-hint":{backgroundImage:Mg("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function cxe(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function uxe(t){let e="hint",n=1;for(let i of t){let s=cxe(i.severity);s>n&&(n=s,e=i.severity)}return e}const dxe=[Us,Le.decorations.compute([Us],t=>{let{selected:e,panel:n}=t.field(Us);return!e||!n||e.from==e.to?et.none:et.set([exe.range(e.from,e.to)])}),jve(txe,{hideOn:KAe}),lxe],hxe=[twe(),swe(),bve(),CSe(),Ywe(),lve(),fve(),Vt.allowMultipleSelections.of(!0),Lwe(),ZR(tSe,{fallback:!0}),lSe(),BAe(),X_(),Mve(),_ve(),xve(),ICe(),H1.of([...ZAe,...PCe,...JCe,...ISe,...Wwe,...W_,...rxe])],fxe=ve({components:{MouseFollower:FM},props:{initialX:{type:Number,required:!0},minX:Number,maxX:Number},emits:["resize"],data(){return{x:0,delta:0,xOnMouseDown:0,resizing:!1,listener:null}},computed:{value(){let t=this.delta+this.xOnMouseDown;return typeof this.minX=="number"&&(t=Math.max(this.minX,t)),typeof this.maxX=="number"&&(t=Math.min(this.maxX,t)),t},minDelta(){return typeof this.minX!="number"?null:this.initialX-this.minX},maxDelta(){return typeof this.maxX!="number"?null:this.maxX-this.initialX}},methods:{onMouseDown(t){t.preventDefault(),this.x=t.clientX,this.xOnMouseDown=this.initialX,this.setResizing(!0),document.addEventListener("mousemove",this.mouseMoveListener),document.addEventListener("mouseup",this.mouseUpListener)},mouseUpListener(t){t.preventDefault(),this.x=t.clientX,this.setResizing(!1),this.$emit("resize",this.value),this.removeListeners()},mouseMoveListener(t){t.preventDefault(),this.delta=this.x-t.clientX,this.$emit("resize",this.value)},removeListeners(){document.removeEventListener("mousemove",this.mouseMoveListener),document.removeEventListener("mouseup",this.mouseUpListener)},setResizing(t){this.resizing=t,t?(this.delta=0,document.body.style.cursor="col-resize"):document.body.style.cursor=""}}});function pxe(t,e,n,i,s,r){const o=Q("MouseFollower");return w(),P("div",{ref:"hr",class:ee(["h-full bg-gray-300 dark:bg-gray-700 transition-opacity hover:opacity-100",t.resizing?"opacity-100":"opacity-0"]),style:{width:"3px",cursor:"col-resize","margin-left":"-3px"},onMousedown:e[0]||(e[0]=(...a)=>t.onMouseDown&&t.onMouseDown(...a))},[_(o,{show:t.resizing,placement:"left",class:"px-1 py-0.5 border dark:border-gray-800 rounded-md shadow text-sm text-center bg-gray-900 text-gray-100",style:{"min-width":"2rem"}},{default:U(()=>[He(R(t.value),1)]),_:1},8,["show"])],34)}const mxe=ne(fxe,[["render",pxe]]),gxe=ve({props:{keys:{type:Array,required:!0},simple:{type:Boolean,default:!1}},method(){},computed:{keyMap(){return wQ(this.platform)}}}),yxe={class:"flex-shrink-0 flex items-center gap-2",style:{width:"fit-content"}};function Oxe(t,e,n,i,s,r){return w(),P("div",yxe,[(w(!0),P(le,null,Pe(t.keys,o=>(w(),P("kbd",{key:o,class:ee(["key-common",{"key-styling":!t.simple}])},R(t.keyMap[o]??o),3))),128))])}const K_=ne(gxe,[["render",Oxe],["__scopeId","data-v-5077766f"]]),dx=class dx extends ze{constructor(){super(...arguments),this.readOnly={name:()=>!this.isCustom,type:()=>!this.isCustom,template:()=>!this.isCustom}}get canDelete(){return this.isCustom===!1?!1:super.canDelete}static getListViewSettings(e){return{formRoute:n=>`/template-builder/${n}`,columns:["name",{label:e.t`Type`,fieldtype:"AutoComplete",fieldname:"type",display(n){var i;return((i=e.schemaMap[n])==null?void 0:i.label)??""}},"isCustom"]}}duplicate(){const e=super.duplicate();return e.isCustom=!0,e}};dx.lists={type(e){let n={};return e&&(n=e.fyo.schemaMap),[A.SalesInvoice,A.SalesQuote,A.PurchaseInvoice,A.JournalEntry,A.Payment,A.Shipment,A.PurchaseReceipt,A.StockMovement].map(s=>{var r;return{value:s,label:((r=n[s])==null?void 0:r.label)??s}})}};let Fd=dx;const bxe=ve({components:{Float:nh,FormHeader:Za,Select:iu,Button:At},props:{doc:{type:Fd,required:!0}},emits:["done"],data(){return{size:"A4",width:21,height:29.7}},computed:{df(){return{label:"Page Size",fieldname:"size",fieldtype:"Select",options:sx.map(t=>({value:t,label:t})),default:"A4"}}},mounted(){this.width=this.doc.width??21,this.height=this.doc.height??29.7,this.size="",Object.entries(Q0).forEach(([t,{width:e,height:n}])=>{this.width===e&&this.height===n&&(this.size=t)}),this.size||(this.size="Custom")},methods:{sizeChange(t){const e=Q0[t];e&&(this.height=e.height,this.width=e.width)},valueChange(t,e){this[e]!==t&&(this.size="Custom",this[e]=t)},async done(){await this.doc.set("width",this.width),await this.doc.set("height",this.height),this.$emit("done")}}}),vxe={class:"w-form"},wxe={class:"p-4 w-full flex flex-col gap-4"},Sxe={class:"text-base text-gray-900 dark:text-gray-100"},Cxe={class:"flex gap-4 w-full"},Axe={class:"flex border-t dark:border-gray-800 p-4"};function xxe(t,e,n,i,s,r){const o=Q("FormHeader"),a=Q("Select"),l=Q("Float"),c=Q("Button");return w(),P("div",vxe,[_(o,{"form-title":t.t`Set Print Size`},null,8,["form-title"]),e[2]||(e[2]=v("hr",{class:"dark:border-gray-800"},null,-1)),v("div",wxe,[v("p",Sxe,R(t.t`Select a pre-defined page size, or set a custom page size for your Print Template.`),1),_(a,{df:t.df,value:t.size,border:!0,"show-label":!0,onChange:t.sizeChange},null,8,["df","value","onChange"]),v("div",Cxe,[_(l,{class:"w-full",df:t.fyo.getField("PrintTemplate","height"),border:!0,"show-label":!0,value:t.height,onChange:e[0]||(e[0]=u=>t.valueChange(u,"height"))},null,8,["df","value"]),_(l,{class:"w-full",df:t.fyo.getField("PrintTemplate","width"),border:!0,"show-label":!0,value:t.width,onChange:e[1]||(e[1]=u=>t.valueChange(u,"width"))},null,8,["df","value"])])]),v("div",Axe,[_(c,{class:"ml-auto",type:"primary",onClick:t.done},{default:U(()=>[He(R(t.t`Done`),1)]),_:1},8,["onClick"])])])}const kxe=ne(bxe,[["render",xxe]]),Pxe=ve({components:{FormHeader:Za,Select:iu,Button:At},props:{doc:{type:Fd,required:!0}},emits:["done"],data(){return{type:"SalesInvoice"}},computed:{df(){const t=Fd.lists.type(this.doc);return{...fyo.getField("PrintTemplate","type"),options:t,fieldtype:"Select",default:t[0].value}}},mounted(){this.type=this.doc.type??"SalesInvoice"},methods:{typeChange(t){this.type!==t&&(this.type=t)},async done(){await this.doc.set("type",this.type),this.$emit("done")}}}),Txe={class:"w-form"},$xe={class:"p-4 w-full flex flex-col gap-4"},Dxe={class:"text-base text-gray-900 dark:text-gray-100"},Mxe={class:"flex border-t dark:border-gray-800 p-4"};function Ixe(t,e,n,i,s,r){const o=Q("FormHeader"),a=Q("Select"),l=Q("Button");return w(),P("div",Txe,[_(o,{"form-title":t.t`Set Print Size`},null,8,["form-title"]),e[0]||(e[0]=v("hr",{class:"dark:border-gray-800"},null,-1)),v("div",$xe,[v("p",Dxe,R(t.t`Select the template type.`),1),_(a,{df:t.df,value:t.type,border:!0,"show-label":!0,onChange:t.typeChange},null,8,["df","value","onChange"])]),v("div",Mxe,[_(l,{class:"ml-auto",type:"primary",onClick:t.done},{default:U(()=>[He(R(t.t`Done`),1)]),_:1},8,["onClick"])])])}const Rxe=ne(Pxe,[["render",Ixe]]),_xe=ve({name:"TemplateBuilderHint",props:{prefix:{type:String,default:""},hints:{type:Object,required:!0},level:{type:Number,default:0}},data(){return{rows:[]}},mounted(){this.rows=Object.entries(this.hints).map(([t,e])=>({key:t,value:e,isCollapsible:typeof e=="object",collapsed:this.level>0})).sort((t,e)=>Number(t.isCollapsible)-Number(e.isCollapsible))},methods:{getKey(t){return Array.isArray(t.value)?`${this.prefix}.${t.key}[number]`:this.prefix.length?`${this.prefix}.${t.key}`:t.key}}}),Exe=["onClick"],Qxe={class:""},Nxe={key:0,class:"font-semibold text-gray-800 dark:text-gray-200"},Lxe={key:1,class:"text-blue-600 dark:text-blue-100 bg-blue-100 dark:bg-blue-600 border-white dark:border-blue-600 border tracking-tighter rounded text-xs px-1"},Fxe={key:2,class:"text-pink-600 dark:text-pink-100 bg-pink-100 dark:bg-pink-600 border-white dark:border-pink-600 border tracking-tighter rounded text-xs px-1"},Bxe={key:0};function Vxe(t,e,n,i,s,r){const o=Q("feather-icon"),a=Q("TemplateBuilderHint",!0);return w(),P("div",{class:ee(t.level>0?"ms-2 ps-2 border-l dark:border-gray-800":"")},[(w(!0),P(le,null,Pe(t.rows,l=>(w(),P(le,{key:l.key},[v("div",{class:ee(["flex gap-2 text-sm text-gray-600 dark:text-gray-400 whitespace-nowrap overflow-auto no-scrollbar",[typeof l.value=="object"?"cursor-pointer":""]]),onClick:c=>l.collapsed=!l.collapsed},[v("div",Qxe,R(t.getKey(l)),1),l.isCollapsible?Array.isArray(l.value)?(w(),P("div",Lxe," Array ")):(w(),P("div",Fxe," Object ")):(w(),P("div",Nxe,R(l.value),1)),l.isCollapsible?(w(),H(o,{key:3,name:l.collapsed?"chevron-up":"chevron-down",class:"w-4 h-4 ms-auto"},null,8,["name"])):B("",!0)],10,Exe),!l.collapsed&&typeof l.value=="object"?(w(),P("div",Bxe,[_(a,{prefix:t.getKey(l),hints:Array.isArray(l.value)?l.value[0]:l.value,level:t.level+1},null,8,["prefix","hints","level"])])):B("",!0)],64))),128))],2)}const jxe=ne(_xe,[["render",Vxe]]);var e6={};class M0{constructor(e,n,i,s,r,o,a,l,c,u=0,h){this.p=e,this.stack=n,this.state=i,this.reducePos=s,this.pos=r,this.score=o,this.buffer=a,this.bufferBase=l,this.curContext=c,this.lookAhead=u,this.parent=h}toString(){return`[${this.stack.filter((e,n)=>n%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,n,i=0){let s=e.parser.context;return new M0(e,[],n,i,i,0,[],0,s?new t6(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,n){this.stack.push(this.state,n,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var n;let i=e>>19,s=e&65535,{parser:r}=this.p,o=this.reducePos<this.pos-25&&this.setLookAhead(this.pos),a=r.dynamicPrecedence(s);if(a&&(this.score+=a),i==0){this.pushState(r.getGoto(this.state,s,!0),this.reducePos),s<r.minRepeatTerm&&this.storeNode(s,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(s,this.reducePos);return}let l=this.stack.length-(i-1)*3-(e&262144?6:0),c=l?this.stack[l-2]:this.p.ranges[0].from,u=this.reducePos-c;u>=2e3&&!(!((n=this.p.parser.nodeSet.types[s])===null||n===void 0)&&n.isAnonymous)&&(c==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=u):this.p.lastBigReductionSize<u&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=c,this.p.lastBigReductionSize=u));let h=l?this.stack[l-1]:0,p=this.bufferBase+this.buffer.length-h;if(s<r.minRepeatTerm||e&131072){let m=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(s,c,m,p+4,!0)}if(e&262144)this.state=this.stack[l];else{let m=this.stack[l-3];this.state=r.getGoto(m,s,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(s,c)}storeNode(e,n,i,s=4,r=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,a=this.buffer.length;if(a==0&&o.parent&&(a=o.bufferBase-o.parent.bufferBase,o=o.parent),a>0&&o.buffer[a-4]==0&&o.buffer[a-1]>-1){if(n==i)return;if(o.buffer[a-2]>=n){o.buffer[a-2]=i;return}}}if(!r||this.pos==i)this.buffer.push(e,n,i,s);else{let o=this.buffer.length;if(o>0&&(this.buffer[o-4]!=0||this.buffer[o-1]<0)){let a=!1;for(let l=o;l>0&&this.buffer[l-2]>i;l-=4)if(this.buffer[l-1]>=0){a=!0;break}if(a)for(;o>0&&this.buffer[o-2]>i;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,s>4&&(s-=4)}this.buffer[o]=e,this.buffer[o+1]=n,this.buffer[o+2]=i,this.buffer[o+3]=s}}shift(e,n,i,s){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=s,this.shiftContext(n,i),n<=this.p.parser.maxNode&&this.buffer.push(n,i,s,4);else{let r=e,{parser:o}=this.p;this.pos=s;let a=o.stateFlag(r,1);!a&&(s>i||n<=o.maxNode)&&(this.reducePos=s),this.pushState(r,a?i:Math.min(i,this.reducePos)),this.shiftContext(n,i),n<=o.maxNode&&this.buffer.push(n,i,s,4)}}apply(e,n,i,s){e&65536?this.reduce(e):this.shift(e,n,i,s)}useNode(e,n){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let s=this.pos;this.reducePos=this.pos=s+e.length,this.pushState(n,s),this.buffer.push(i,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,n=e.buffer.length;for(;n>0&&e.buffer[n-2]>e.reducePos;)n-=4;let i=e.buffer.slice(n),s=e.bufferBase+n;for(;e&&s==e.bufferBase;)e=e.parent;return new M0(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,s,this.curContext,this.lookAhead,e)}recoverByDelete(e,n){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,n,4),this.storeNode(0,this.pos,n,i?8:4),this.pos=this.reducePos=n,this.score-=190}canShift(e){for(let n=new zxe(this);;){let i=this.p.parser.stateSlot(n.state,4)||this.p.parser.hasAction(n.state,e);if(i==0)return!1;if(!(i&65536))return!0;n.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let n=this.p.parser.nextStates(this.state);if(n.length>8||this.stack.length>=120){let s=[];for(let r=0,o;r<n.length;r+=2)(o=n[r+1])!=this.state&&this.p.parser.hasAction(o,e)&&s.push(n[r],o);if(this.stack.length<120)for(let r=0;s.length<8&&r<n.length;r+=2){let o=n[r+1];s.some((a,l)=>l&1&&a==o)||s.push(n[r],o)}n=s}let i=[];for(let s=0;s<n.length&&i.length<4;s+=2){let r=n[s+1];if(r==this.state)continue;let o=this.split();o.pushState(r,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(n[s],this.pos),o.reducePos=this.pos,o.score-=200,i.push(o)}return i}forceReduce(){let{parser:e}=this.p,n=e.stateSlot(this.state,5);if(!(n&65536))return!1;if(!e.validAction(this.state,n)){let i=n>>19,s=n&65535,r=this.stack.length-i*3;if(r<0||e.getGoto(this.stack[r],s,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;n=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(n),!0}findForcedReduction(){let{parser:e}=this.p,n=[],i=(s,r)=>{if(!n.includes(s))return n.push(s),e.allActions(s,o=>{if(!(o&393216))if(o&65536){let a=(o>>19)-r;if(a>1){let l=o&65535,c=this.stack.length-a*3;if(c>=0&&e.getGoto(this.stack[c],l,!1)>=0)return a<<19|65536|l}}else{let a=i(o,r+1);if(a!=null)return a}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let n=0;n<this.stack.length;n+=3)if(this.stack[n]!=e.stack[n])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(n)))}reduceContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(n)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let n=new t6(this.curContext.tracker,e);n.hash!=this.curContext.hash&&this.emitContext(),this.curContext=n}}setLookAhead(e){return e<=this.lookAhead?!1:(this.emitLookAhead(),this.lookAhead=e,!0)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class t6{constructor(e,n){this.tracker=e,this.context=n,this.hash=e.strict?e.hash(n):0}}class zxe{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let n=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let s=this.start.p.parser.getGoto(this.stack[this.base-3],n,!0);this.state=s}}class I0{constructor(e,n,i){this.stack=e,this.pos=n,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,n=e.bufferBase+e.buffer.length){return new I0(e,n,n-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new I0(this.stack,this.pos,this.index)}}function Jh(t,e=Uint16Array){if(typeof t!="string")return t;let n=null;for(let i=0,s=0;i<t.length;){let r=0;for(;;){let o=t.charCodeAt(i++),a=!1;if(o==126){r=65535;break}o>=92&&o--,o>=34&&o--;let l=o-32;if(l>=46&&(l-=46,a=!0),r+=l,a)break;r*=46}n?n[s++]=r:n=new e(r)}return n}class ly{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const n6=new ly;class Zxe{constructor(e,n){this.input=e,this.ranges=n,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=n6,this.rangeIndex=0,this.pos=this.chunkPos=n[0].from,this.range=n[0],this.end=n[n.length-1].to,this.readNext()}resolveOffset(e,n){let i=this.range,s=this.rangeIndex,r=this.pos+e;for(;r<i.from;){if(!s)return null;let o=this.ranges[--s];r-=i.from-o.to,i=o}for(;n<0?r>i.to:r>=i.to;){if(s==this.ranges.length-1)return null;let o=this.ranges[++s];r+=o.from-i.to,i=o}return r}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let n of this.ranges)if(n.to>e)return Math.max(e,n.from);return this.end}peek(e){let n=this.chunkOff+e,i,s;if(n>=0&&n<this.chunk.length)i=this.pos+e,s=this.chunk.charCodeAt(n);else{let r=this.resolveOffset(e,1);if(r==null)return-1;if(i=r,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)s=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let o=this.rangeIndex,a=this.range;for(;a.to<=i;)a=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-i)),s=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),s}acceptToken(e,n=0){let i=n?this.resolveOffset(n,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,n){this.token.value=e,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:n}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=n,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),n=this.pos+e.length;this.chunk=n>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,n){if(n?(this.token=n,n.start=e,n.lookAhead=e+1,n.value=n.extended=-1):this.token=n6,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,n){if(e>=this.chunkPos&&n<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,n-this.chunkPos);if(e>=this.chunk2Pos&&n<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,n-this.chunk2Pos);if(e>=this.range.from&&n<=this.range.to)return this.input.read(e,n);let i="";for(let s of this.ranges){if(s.from>=n)break;s.to>e&&(i+=this.input.read(Math.max(s.from,e),Math.min(s.to,n)))}return i}}class sd{constructor(e,n){this.data=e,this.id=n}token(e,n){let{parser:i}=n.p;J_(this.data,e,n,this.id,i.data,i.tokenPrecTable)}}sd.prototype.contextual=sd.prototype.fallback=sd.prototype.extend=!1;class Do{constructor(e,n,i){this.precTable=n,this.elseToken=i,this.data=typeof e=="string"?Jh(e):e}token(e,n){let i=e.pos,s=0;for(;;){let r=e.next<0,o=e.resolveOffset(1,1);if(J_(this.data,e,n,0,this.data,this.precTable),e.token.value>-1)break;if(this.elseToken==null)return;if(r||s++,o==null)break;e.reset(o,e.token)}s&&(e.reset(i,e.token),e.acceptToken(this.elseToken,s))}}Do.prototype.contextual=sd.prototype.fallback=sd.prototype.extend=!1;class or{constructor(e,n={}){this.token=e,this.contextual=!!n.contextual,this.fallback=!!n.fallback,this.extend=!!n.extend}}function J_(t,e,n,i,s,r){let o=0,a=1<<i,{dialect:l}=n.p.parser;e:for(;a&t[o];){let c=t[o+1];for(let m=o+3;m<c;m+=2)if((t[m+1]&a)>0){let y=t[m];if(l.allows(y)&&(e.token.value==-1||e.token.value==y||qxe(y,e.token.value,s,r))){e.acceptToken(y);break}}let u=e.next,h=0,p=t[o+2];if(e.next<0&&p>h&&t[c+p*3-3]==65535){o=t[c+p*3-1];continue e}for(;h<p;){let m=h+p>>1,y=c+m+(m<<1),O=t[y],S=t[y+1]||65536;if(u<O)p=m;else if(u>=S)h=m+1;else{o=t[y+2],e.advance();continue e}}break}}function i6(t,e,n){for(let i=e,s;(s=t[i])!=65535;i++)if(s==n)return i-e;return-1}function qxe(t,e,n,i){let s=i6(n,i,e);return s<0||i6(n,i,t)<s}const Bs=typeof process<"u"&&e6&&/\bparse\b/.test(e6.LOG);let D2=null;function s6(t,e,n){let i=t.cursor(en.IncludeAnonymous);for(i.moveTo(e);;)if(!(n<0?i.childBefore(e):i.childAfter(e)))for(;;){if((n<0?i.to<e:i.from>e)&&!i.type.isError)return n<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(t.length,Math.max(i.from+1,e+25));if(n<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return n<0?0:t.length}}class Xxe{constructor(e,n){this.fragments=e,this.nodeSet=n,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?s6(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?s6(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let n=this.trees.length-1;if(n<0)return this.nextFragment(),null;let i=this.trees[n],s=this.index[n];if(s==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let r=i.children[s],o=this.start[n]+i.positions[s];if(o>e)return this.nextStart=o,null;if(r instanceof xn){if(o==e){if(o<this.safeFrom)return null;let a=o+r.length;if(a<=this.safeTo){let l=r.prop(Ct.lookAhead);if(!l||a+l<this.fragment.to)return r}}this.index[n]++,o+r.length>=Math.max(this.safeFrom,e)&&(this.trees.push(r),this.start.push(o),this.index.push(0))}else this.index[n]++,this.nextStart=o+r.length}}}class Wxe{constructor(e,n){this.stream=n,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new ly)}getActions(e){let n=0,i=null,{parser:s}=e.p,{tokenizers:r}=s,o=s.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,l=0;for(let c=0;c<r.length;c++){if(!(1<<c&o))continue;let u=r[c],h=this.tokens[c];if(!(i&&!u.fallback)&&((u.contextual||h.start!=e.pos||h.mask!=o||h.context!=a)&&(this.updateCachedToken(h,u,e),h.mask=o,h.context=a),h.lookAhead>h.end+25&&(l=Math.max(h.lookAhead,l)),h.value!=0)){let p=n;if(h.extended>-1&&(n=this.addActions(e,h.extended,h.end,n)),n=this.addActions(e,h.value,h.end,n),!u.extend&&(i=h,n>p))break}}for(;this.actions.length>n;)this.actions.pop();return l&&e.setLookAhead(l),!i&&e.pos==this.stream.end&&(i=new ly,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,n=this.addActions(e,i.value,i.end,n)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let n=new ly,{pos:i,p:s}=e;return n.start=i,n.end=Math.min(i+1,s.stream.end),n.value=i==s.stream.end?s.parser.eofTerm:0,n}updateCachedToken(e,n,i){let s=this.stream.clipPos(i.pos);if(n.token(this.stream.reset(s,e),i),e.value>-1){let{parser:r}=i.p;for(let o=0;o<r.specialized.length;o++)if(r.specialized[o]==e.value){let a=r.specializers[o](this.stream.read(e.start,e.end),i);if(a>=0&&i.p.parser.dialect.allows(a>>1)){a&1?e.extended=a>>1:e.value=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(s+1)}putAction(e,n,i,s){for(let r=0;r<s;r+=3)if(this.actions[r]==e)return s;return this.actions[s++]=e,this.actions[s++]=n,this.actions[s++]=i,s}addActions(e,n,i,s){let{state:r}=e,{parser:o}=e.p,{data:a}=o;for(let l=0;l<2;l++)for(let c=o.stateSlot(r,l?2:1);;c+=3){if(a[c]==65535)if(a[c+1]==1)c=fa(a,c+2);else{s==0&&a[c+1]==2&&(s=this.putAction(fa(a,c+2),n,i,s));break}a[c]==n&&(s=this.putAction(fa(a,c+1),n,i,s))}return s}}class Gxe{constructor(e,n,i,s){this.parser=e,this.input=n,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new Zxe(n,s),this.tokens=new Wxe(e,this.stream),this.topTerm=e.top[1];let{from:r}=s[0];this.stacks=[M0.start(this,e.top[0],r)],this.fragments=i.length&&this.stream.end-r>e.bufferLength*4?new Xxe(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,n=this.minStackPos,i=this.stacks=[],s,r;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let a=e[o];for(;;){if(this.tokens.mainToken=null,a.pos>n)i.push(a);else{if(this.advanceStack(a,i,e))continue;{s||(s=[],r=[]),s.push(a);let l=this.tokens.getMainToken(a);r.push(l.value,l.end)}}break}}if(!i.length){let o=s&&Hxe(s);if(o)return Bs&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw Bs&&s&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&s){let o=this.stoppedAt!=null&&s[0].pos>this.stoppedAt?s[0]:this.runRecovery(s,r,i);if(o)return Bs&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(i.length>o)for(i.sort((a,l)=>l.score-a.score);i.length>o;)i.pop();i.some(a=>a.reducePos>n)&&this.recovering--}else if(i.length>1){e:for(let o=0;o<i.length-1;o++){let a=i[o];for(let l=o+1;l<i.length;l++){let c=i[l];if(a.sameState(c)||a.buffer.length>500&&c.buffer.length>500)if((a.score-c.score||a.buffer.length-c.buffer.length)>0)i.splice(l--,1);else{i.splice(o--,1);continue e}}}i.length>12&&(i.sort((o,a)=>a.score-o.score),i.splice(12,i.length-12))}this.minStackPos=i[0].pos;for(let o=1;o<i.length;o++)i[o].pos<this.minStackPos&&(this.minStackPos=i[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,n,i){let s=e.pos,{parser:r}=this,o=Bs?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&s>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let c=e.curContext&&e.curContext.tracker.strict,u=c?e.curContext.hash:0;for(let h=this.fragments.nodeAt(s);h;){let p=this.parser.nodeSet.types[h.type.id]==h.type?r.getGoto(e.state,h.type.id):-1;if(p>-1&&h.length&&(!c||(h.prop(Ct.contextHash)||0)==u))return e.useNode(h,p),Bs&&console.log(o+this.stackID(e)+` (via reuse of ${r.getName(h.type.id)})`),!0;if(!(h instanceof xn)||h.children.length==0||h.positions[0]>0)break;let m=h.children[0];if(m instanceof xn&&h.positions[0]==0)h=m;else break}}let a=r.stateSlot(e.state,4);if(a>0)return e.reduce(a),Bs&&console.log(o+this.stackID(e)+` (via always-reduce ${r.getName(a&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let c=0;c<l.length;){let u=l[c++],h=l[c++],p=l[c++],m=c==l.length||!i,y=m?e:e.split(),O=this.tokens.mainToken;if(y.apply(u,h,O?O.start:y.pos,p),Bs&&console.log(o+this.stackID(y)+` (via ${u&65536?`reduce of ${r.getName(u&65535)}`:"shift"} for ${r.getName(h)} @ ${s}${y==e?"":", split"})`),m)return!0;y.pos>s?n.push(y):i.push(y)}return!1}advanceFully(e,n){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return r6(e,n),!0}}runRecovery(e,n,i){let s=null,r=!1;for(let o=0;o<e.length;o++){let a=e[o],l=n[o<<1],c=n[(o<<1)+1],u=Bs?this.stackID(a)+" -> ":"";if(a.deadEnd&&(r||(r=!0,a.restart(),Bs&&console.log(u+this.stackID(a)+" (restarted)"),this.advanceFully(a,i))))continue;let h=a.split(),p=u;for(let m=0;m<10&&h.forceReduce()&&(Bs&&console.log(p+this.stackID(h)+" (via force-reduce)"),!this.advanceFully(h,i));m++)Bs&&(p=this.stackID(h)+" -> ");for(let m of a.recoverByInsert(l))Bs&&console.log(u+this.stackID(m)+" (via recover-insert)"),this.advanceFully(m,i);this.stream.end>a.pos?(c==a.pos&&(c++,l=0),a.recoverByDelete(l,c),Bs&&console.log(u+this.stackID(a)+` (via recover-delete ${this.parser.getName(l)})`),r6(a,i)):(!s||s.score<h.score)&&(s=h)}return s}stackToTree(e){return e.close(),xn.build({buffer:I0.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let n=(D2||(D2=new WeakMap)).get(e);return n||D2.set(e,n=String.fromCodePoint(this.nextStackID++)),n+e}}function r6(t,e){for(let n=0;n<e.length;n++){let i=e[n];if(i.pos==t.pos&&i.sameState(t)){e[n].score<t.score&&(e[n]=t);return}}e.push(t)}class Uxe{constructor(e,n,i){this.source=e,this.flags=n,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}const M2=t=>t;class eE{constructor(e){this.start=e.start,this.shift=e.shift||M2,this.reduce=e.reduce||M2,this.reuse=e.reuse||M2,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class Xc extends TR{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let n=e.nodeNames.split(" ");this.minRepeatTerm=n.length;for(let a=0;a<e.repeatNodeCount;a++)n.push("");let i=Object.keys(e.topRules).map(a=>e.topRules[a][1]),s=[];for(let a=0;a<n.length;a++)s.push([]);function r(a,l,c){s[a].push([l,l.deserialize(String(c))])}if(e.nodeProps)for(let a of e.nodeProps){let l=a[0];typeof l=="string"&&(l=Ct[l]);for(let c=1;c<a.length;){let u=a[c++];if(u>=0)r(u,l,a[c++]);else{let h=a[c+-u];for(let p=-u;p>0;p--)r(a[c++],l,h);c++}}}this.nodeSet=new AA(n.map((a,l)=>ss.define({name:l>=this.minRepeatTerm?void 0:a,id:l,props:s[l],top:i.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=CR;let o=Jh(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(o6),this.states=Jh(e.states,Uint32Array),this.data=Jh(e.stateData),this.goto=Jh(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new sd(o,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,n,i){let s=new Gxe(this,e,n,i);for(let r of this.wrappers)s=r(s,e,n,i);return s}getGoto(e,n,i=!1){let s=this.goto;if(n>=s[0])return-1;for(let r=s[n+1];;){let o=s[r++],a=o&1,l=s[r++];if(a&&i)return l;for(let c=r+(o>>1);r<c;r++)if(s[r]==e)return l;if(a)return-1}}hasAction(e,n){let i=this.data;for(let s=0;s<2;s++)for(let r=this.stateSlot(e,s?2:1),o;;r+=3){if((o=i[r])==65535)if(i[r+1]==1)o=i[r=fa(i,r+2)];else{if(i[r+1]==2)return fa(i,r+2);break}if(o==n||o==0)return fa(i,r+1)}return 0}stateSlot(e,n){return this.states[e*6+n]}stateFlag(e,n){return(this.stateSlot(e,0)&n)>0}validAction(e,n){return!!this.allActions(e,i=>i==n?!0:null)}allActions(e,n){let i=this.stateSlot(e,4),s=i?n(i):void 0;for(let r=this.stateSlot(e,1);s==null;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=fa(this.data,r+2);else break;s=n(fa(this.data,r+1))}return s}nextStates(e){let n=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=fa(this.data,i+2);else break;if(!(this.data[i+2]&1)){let s=this.data[i+1];n.some((r,o)=>o&1&&r==s)||n.push(this.data[i],s)}}return n}configure(e){let n=Object.assign(Object.create(Xc.prototype),this);if(e.props&&(n.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);n.top=i}return e.tokenizers&&(n.tokenizers=this.tokenizers.map(i=>{let s=e.tokenizers.find(r=>r.from==i);return s?s.to:i})),e.specializers&&(n.specializers=this.specializers.slice(),n.specializerSpecs=this.specializerSpecs.map((i,s)=>{let r=e.specializers.find(a=>a.from==i.external);if(!r)return i;let o=Object.assign(Object.assign({},i),{external:r.to});return n.specializers[s]=o6(o),o})),e.contextTracker&&(n.context=e.contextTracker),e.dialect&&(n.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(n.strict=e.strict),e.wrap&&(n.wrappers=n.wrappers.concat(e.wrap)),e.bufferLength!=null&&(n.bufferLength=e.bufferLength),n}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let n=this.dynamicPrecedences;return n==null?0:n[e]||0}parseDialect(e){let n=Object.keys(this.dialects),i=n.map(()=>!1);if(e)for(let r of e.split(" ")){let o=n.indexOf(r);o>=0&&(i[o]=!0)}let s=null;for(let r=0;r<n.length;r++)if(!i[r])for(let o=this.dialects[n[r]],a;(a=this.data[o++])!=65535;)(s||(s=new Uint8Array(this.maxTerm+1)))[a]=1;return new Uxe(e,i,s)}static deserialize(e){return new Xc(e)}}function fa(t,e){return t[e]|t[e+1]<<16}function Hxe(t){let e=null;for(let n of t){let i=n.p.stoppedAt;(n.pos==n.p.stream.end||i!=null&&n.pos>i)&&n.p.parser.stateFlag(n.state,2)&&(!e||e.score<n.score)&&(e=n)}return e}function o6(t){if(t.external){let e=t.extend?1:0;return(n,i)=>t.external(n,i)<<1|e}return t.get}const Yxe=55,Kxe=1,Jxe=56,eke=2,tke=57,nke=3,a6=4,ike=5,XA=6,tE=7,nE=8,iE=9,sE=10,ske=11,rke=12,oke=13,I2=58,ake=14,lke=15,l6=59,rE=21,cke=23,oE=24,uke=25,Gw=27,aE=28,dke=29,hke=32,fke=35,pke=37,mke=38,gke=0,yke=1,Oke={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},bke={dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},c6={dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}};function vke(t){return t==45||t==46||t==58||t>=65&&t<=90||t==95||t>=97&&t<=122||t>=161}let u6=null,d6=null,h6=0;function Uw(t,e){let n=t.pos+e;if(h6==n&&d6==t)return u6;let i=t.peek(e),s="";for(;vke(i);)s+=String.fromCharCode(i),i=t.peek(++e);return d6=t,h6=n,u6=s?s.toLowerCase():i==wke||i==Ske?void 0:null}const lE=60,R0=62,WA=47,wke=63,Ske=33,Cke=45;function f6(t,e){this.name=t,this.parent=e}const Ake=[XA,sE,tE,nE,iE],xke=new eE({start:null,shift(t,e,n,i){return Ake.indexOf(e)>-1?new f6(Uw(i,1)||"",t):t},reduce(t,e){return e==rE&&t?t.parent:t},reuse(t,e,n,i){let s=e.type.id;return s==XA||s==pke?new f6(Uw(i,1)||"",t):t},strict:!1}),kke=new or((t,e)=>{if(t.next!=lE){t.next<0&&e.context&&t.acceptToken(I2);return}t.advance();let n=t.next==WA;n&&t.advance();let i=Uw(t,0);if(i===void 0)return;if(!i)return t.acceptToken(n?lke:ake);let s=e.context?e.context.name:null;if(n){if(i==s)return t.acceptToken(ske);if(s&&bke[s])return t.acceptToken(I2,-2);if(e.dialectEnabled(gke))return t.acceptToken(rke);for(let r=e.context;r;r=r.parent)if(r.name==i)return;t.acceptToken(oke)}else{if(i=="script")return t.acceptToken(tE);if(i=="style")return t.acceptToken(nE);if(i=="textarea")return t.acceptToken(iE);if(Oke.hasOwnProperty(i))return t.acceptToken(sE);s&&c6[s]&&c6[s][i]?t.acceptToken(I2,-1):t.acceptToken(XA)}},{contextual:!0}),Pke=new or(t=>{for(let e=0,n=0;;n++){if(t.next<0){n&&t.acceptToken(l6);break}if(t.next==Cke)e++;else if(t.next==R0&&e>=2){n>=3&&t.acceptToken(l6,-2);break}else e=0;t.advance()}});function Tke(t){for(;t;t=t.parent)if(t.name=="svg"||t.name=="math")return!0;return!1}const $ke=new or((t,e)=>{if(t.next==WA&&t.peek(1)==R0){let n=e.dialectEnabled(yke)||Tke(e.context);t.acceptToken(n?ike:a6,2)}else t.next==R0&&t.acceptToken(a6,1)});function GA(t,e,n){let i=2+t.length;return new or(s=>{for(let r=0,o=0,a=0;;a++){if(s.next<0){a&&s.acceptToken(e);break}if(r==0&&s.next==lE||r==1&&s.next==WA||r>=2&&r<i&&s.next==t.charCodeAt(r-2))r++,o++;else if(r==i&&s.next==R0){a>o?s.acceptToken(e,-o):s.acceptToken(n,-(o-2));break}else if((s.next==10||s.next==13)&&a){s.acceptToken(e,1);break}else r=o=0;s.advance()}})}const Dke=GA("script",Yxe,Kxe),Mke=GA("style",Jxe,eke),Ike=GA("textarea",tke,nke),Rke=Xp({"Text RawText IncompleteTag IncompleteCloseTag":X.content,"StartTag StartCloseTag SelfClosingEndTag EndTag":X.angleBracket,TagName:X.tagName,"MismatchedCloseTag/TagName":[X.tagName,X.invalid],AttributeName:X.attributeName,"AttributeValue UnquotedAttributeValue":X.attributeValue,Is:X.definitionOperator,"EntityReference CharacterReference":X.character,Comment:X.blockComment,ProcessingInst:X.processingInstruction,DoctypeDecl:X.documentMeta}),_ke=Xc.deserialize({version:14,states:",xOVO!rOOO!ZQ#tO'#CrO!`Q#tO'#C{O!eQ#tO'#DOO!jQ#tO'#DRO!oQ#tO'#DTO!tOaO'#CqO#PObO'#CqO#[OdO'#CqO$kO!rO'#CqOOO`'#Cq'#CqO$rO$fO'#DUO$zQ#tO'#DWO%PQ#tO'#DXOOO`'#Dl'#DlOOO`'#DZ'#DZQVO!rOOO%UQ&rO,59^O%aQ&rO,59gO%lQ&rO,59jO%wQ&rO,59mO&SQ&rO,59oOOOa'#D_'#D_O&_OaO'#CyO&jOaO,59]OOOb'#D`'#D`O&rObO'#C|O&}ObO,59]OOOd'#Da'#DaO'VOdO'#DPO'bOdO,59]OOO`'#Db'#DbO'jO!rO,59]O'qQ#tO'#DSOOO`,59],59]OOOp'#Dc'#DcO'vO$fO,59pOOO`,59p,59pO(OQ#|O,59rO(TQ#|O,59sOOO`-E7X-E7XO(YQ&rO'#CtOOQW'#D['#D[O(hQ&rO1G.xOOOa1G.x1G.xOOO`1G/Z1G/ZO(sQ&rO1G/ROOOb1G/R1G/RO)OQ&rO1G/UOOOd1G/U1G/UO)ZQ&rO1G/XOOO`1G/X1G/XO)fQ&rO1G/ZOOOa-E7]-E7]O)qQ#tO'#CzOOO`1G.w1G.wOOOb-E7^-E7^O)vQ#tO'#C}OOOd-E7_-E7_O){Q#tO'#DQOOO`-E7`-E7`O*QQ#|O,59nOOOp-E7a-E7aOOO`1G/[1G/[OOO`1G/^1G/^OOO`1G/_1G/_O*VQ,UO,59`OOQW-E7Y-E7YOOOa7+$d7+$dOOO`7+$u7+$uOOOb7+$m7+$mOOOd7+$p7+$pOOO`7+$s7+$sO*bQ#|O,59fO*gQ#|O,59iO*lQ#|O,59lOOO`1G/Y1G/YO*qO7[O'#CwO+SOMhO'#CwOOQW1G.z1G.zOOO`1G/Q1G/QOOO`1G/T1G/TOOO`1G/W1G/WOOOO'#D]'#D]O+eO7[O,59cOOQW,59c,59cOOOO'#D^'#D^O+vOMhO,59cOOOO-E7Z-E7ZOOQW1G.}1G.}OOOO-E7[-E7[",stateData:",c~O!_OS~OUSOVPOWQOXROYTO[]O][O^^O_^Oa^Ob^Oc^Od^Oy^O|_O!eZO~OgaO~OgbO~OgcO~OgdO~OgeO~O!XfOPmP![mP~O!YiOQpP![pP~O!ZlORsP![sP~OUSOVPOWQOXROYTOZqO[]O][O^^O_^Oa^Ob^Oc^Od^Oy^O!eZO~O![rO~P#gO!]sO!fuO~OgvO~OgwO~OS|OT}OiyO~OS!POT}OiyO~OS!ROT}OiyO~OS!TOT}OiyO~OS}OT}OiyO~O!XfOPmX![mX~OP!WO![!XO~O!YiOQpX![pX~OQ!ZO![!XO~O!ZlORsX![sX~OR!]O![!XO~O![!XO~P#gOg!_O~O!]sO!f!aO~OS!bO~OS!cO~Oj!dOShXThXihX~OS!fOT!gOiyO~OS!hOT!gOiyO~OS!iOT!gOiyO~OS!jOT!gOiyO~OS!gOT!gOiyO~Og!kO~Og!lO~Og!mO~OS!nO~Ol!qO!a!oO!c!pO~OS!rO~OS!sO~OS!tO~Ob!uOc!uOd!uO!a!wO!b!uO~Ob!xOc!xOd!xO!c!wO!d!xO~Ob!uOc!uOd!uO!a!{O!b!uO~Ob!xOc!xOd!xO!c!{O!d!xO~OT~cbd!ey|!e~",goto:"%q!aPPPPPPPPPPPPPPPPPPPPP!b!hP!nPP!zP!}#Q#T#Z#^#a#g#j#m#s#y!bP!b!bP$P$V$m$s$y%P%V%]%cPPPPPPPP%iX^OX`pXUOX`pezabcde{!O!Q!S!UR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ!ObQ!QcQ!SdQ!UeZ!e{!O!Q!S!UQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",nodeNames:" StartCloseTag StartCloseTag StartCloseTag EndTag SelfClosingEndTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",maxTerm:68,context:xke,nodeProps:[["closedBy",-10,1,2,3,7,8,9,10,11,12,13,"EndTag",6,"EndTag SelfClosingEndTag",-4,22,31,34,37,"CloseTag"],["openedBy",4,"StartTag StartCloseTag",5,"StartTag",-4,30,33,36,38,"OpenTag"],["group",-10,14,15,18,19,20,21,40,41,42,43,"Entity",17,"Entity TextContent",-3,29,32,35,"TextContent Entity"],["isolate",-11,22,30,31,33,34,36,37,38,39,42,43,"ltr",-3,27,28,40,""]],propSources:[Rke],skippedNodes:[0],repeatNodeCount:9,tokenData:"!<p!aR!YOX$qXY,QYZ,QZ[$q[]&X]^,Q^p$qpq,Qqr-_rs3_sv-_vw3}wxHYx}-_}!OH{!O!P-_!P!Q$q!Q![-_![!]Mz!]!^-_!^!_!$S!_!`!;x!`!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4U-_4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!Z$|caPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr$qrs&}sv$qvw+Pwx(tx!^$q!^!_*V!_!a&X!a#S$q#S#T&X#T;'S$q;'S;=`+z<%lO$q!R&bXaP!b`!dpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&Xq'UVaP!dpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}P'pTaPOv'kw!^'k!_;'S'k;'S;=`(P<%lO'kP(SP;=`<%l'kp([S!dpOv(Vx;'S(V;'S;=`(h<%lO(Vp(kP;=`<%l(Vq(qP;=`<%l&}a({WaP!b`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t`)jT!b`Or)esv)ew;'S)e;'S;=`)y<%lO)e`)|P;=`<%l)ea*SP;=`<%l(t!Q*^V!b`!dpOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!Q*vP;=`<%l*V!R*|P;=`<%l&XW+UYlWOX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+PW+wP;=`<%l+P!Z+}P;=`<%l$q!a,]`aP!b`!dp!_^OX&XXY,QYZ,QZ]&X]^,Q^p&Xpq,Qqr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!_-ljiSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q[/ebiSlWOX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+PS0rXiSqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0mS1bP;=`<%l0m[1hP;=`<%l/^!V1vciSaP!b`!dpOq&Xqr1krs&}sv1kvw0mwx(tx!P1k!P!Q&X!Q!^1k!^!_*V!_!a&X!a#s1k#s$f&X$f;'S1k;'S;=`3R<%l?Ah1k?Ah?BY&X?BY?Mn1k?MnO&X!V3UP;=`<%l1k!_3[P;=`<%l-_!Z3hV!ahaP!dpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}!_4WiiSlWd!ROX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst>]tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^/^!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!Z5zblWOX5uXZ7SZ[5u[^7S^p5uqr5urs7Sst+Ptw5uwx7Sx!]5u!]!^7w!^!a7S!a#S5u#S#T7S#T;'S5u;'S;=`8n<%lO5u!R7VVOp7Sqs7St!]7S!]!^7l!^;'S7S;'S;=`7q<%lO7S!R7qOb!R!R7tP;=`<%l7S!Z8OYlWb!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!Z8qP;=`<%l5u!_8{iiSlWOX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst/^tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^:j!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!_:sbiSlWb!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!V<QciSOp7Sqr;{rs7Sst0mtw;{wx7Sx!P;{!P!Q7S!Q!];{!]!^=]!^!a7S!a#s;{#s$f7S$f;'S;{;'S;=`>P<%l?Ah;{?Ah?BY7S?BY?Mn;{?MnO7S!V=dXiSb!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!V>SP;=`<%l;{!_>YP;=`<%l8t!_>dhiSlWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^/^!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!Z@TalWOX@OXZAYZ[@O[^AY^p@Oqr@OrsAYsw@OwxAYx!]@O!]!^Az!^!aAY!a#S@O#S#TAY#T;'S@O;'S;=`Bq<%lO@O!RA]UOpAYq!]AY!]!^Ao!^;'SAY;'S;=`At<%lOAY!RAtOc!R!RAwP;=`<%lAY!ZBRYlWc!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!ZBtP;=`<%l@O!_COhiSlWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^Dj!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!_DsbiSlWc!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!VFQbiSOpAYqrE{rsAYswE{wxAYx!PE{!P!QAY!Q!]E{!]!^GY!^!aAY!a#sE{#s$fAY$f;'SE{;'S;=`G|<%l?AhE{?Ah?BYAY?BY?MnE{?MnOAY!VGaXiSc!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!VHPP;=`<%lE{!_HVP;=`<%lBw!ZHcW!cxaP!b`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t!aIYliSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OKQ!O!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!aK_kiSaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!`&X!`!aMS!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!TM_XaP!b`!dp!fQOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!aNZ!ZiSgQaPlW!b`!dpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OMz!O!PMz!P!Q$q!Q![Mz![!]Mz!]!^-_!^!_*V!_!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f$}-_$}%OMz%O%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4UMz4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Je-_$Je$JgMz$Jg$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!a!$PP;=`<%lMz!R!$ZY!b`!dpOq*Vqr!$yrs(Vsv*Vwx)ex!a*V!a!b!4t!b;'S*V;'S;=`*s<%lO*V!R!%Q]!b`!dpOr*Vrs(Vsv*Vwx)ex}*V}!O!%y!O!f*V!f!g!']!g#W*V#W#X!0`#X;'S*V;'S;=`*s<%lO*V!R!&QX!b`!dpOr*Vrs(Vsv*Vwx)ex}*V}!O!&m!O;'S*V;'S;=`*s<%lO*V!R!&vV!b`!dp!ePOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!'dX!b`!dpOr*Vrs(Vsv*Vwx)ex!q*V!q!r!(P!r;'S*V;'S;=`*s<%lO*V!R!(WX!b`!dpOr*Vrs(Vsv*Vwx)ex!e*V!e!f!(s!f;'S*V;'S;=`*s<%lO*V!R!(zX!b`!dpOr*Vrs(Vsv*Vwx)ex!v*V!v!w!)g!w;'S*V;'S;=`*s<%lO*V!R!)nX!b`!dpOr*Vrs(Vsv*Vwx)ex!{*V!{!|!*Z!|;'S*V;'S;=`*s<%lO*V!R!*bX!b`!dpOr*Vrs(Vsv*Vwx)ex!r*V!r!s!*}!s;'S*V;'S;=`*s<%lO*V!R!+UX!b`!dpOr*Vrs(Vsv*Vwx)ex!g*V!g!h!+q!h;'S*V;'S;=`*s<%lO*V!R!+xY!b`!dpOr!+qrs!,hsv!+qvw!-Swx!.[x!`!+q!`!a!/j!a;'S!+q;'S;=`!0Y<%lO!+qq!,mV!dpOv!,hvx!-Sx!`!,h!`!a!-q!a;'S!,h;'S;=`!.U<%lO!,hP!-VTO!`!-S!`!a!-f!a;'S!-S;'S;=`!-k<%lO!-SP!-kO|PP!-nP;=`<%l!-Sq!-xS!dp|POv(Vx;'S(V;'S;=`(h<%lO(Vq!.XP;=`<%l!,ha!.aX!b`Or!.[rs!-Ssv!.[vw!-Sw!`!.[!`!a!.|!a;'S!.[;'S;=`!/d<%lO!.[a!/TT!b`|POr)esv)ew;'S)e;'S;=`)y<%lO)ea!/gP;=`<%l!.[!R!/sV!b`!dp|POr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!0]P;=`<%l!+q!R!0gX!b`!dpOr*Vrs(Vsv*Vwx)ex#c*V#c#d!1S#d;'S*V;'S;=`*s<%lO*V!R!1ZX!b`!dpOr*Vrs(Vsv*Vwx)ex#V*V#V#W!1v#W;'S*V;'S;=`*s<%lO*V!R!1}X!b`!dpOr*Vrs(Vsv*Vwx)ex#h*V#h#i!2j#i;'S*V;'S;=`*s<%lO*V!R!2qX!b`!dpOr*Vrs(Vsv*Vwx)ex#m*V#m#n!3^#n;'S*V;'S;=`*s<%lO*V!R!3eX!b`!dpOr*Vrs(Vsv*Vwx)ex#d*V#d#e!4Q#e;'S*V;'S;=`*s<%lO*V!R!4XX!b`!dpOr*Vrs(Vsv*Vwx)ex#X*V#X#Y!+q#Y;'S*V;'S;=`*s<%lO*V!R!4{Y!b`!dpOr!4trs!5ksv!4tvw!6Vwx!8]x!a!4t!a!b!:]!b;'S!4t;'S;=`!;r<%lO!4tq!5pV!dpOv!5kvx!6Vx!a!5k!a!b!7W!b;'S!5k;'S;=`!8V<%lO!5kP!6YTO!a!6V!a!b!6i!b;'S!6V;'S;=`!7Q<%lO!6VP!6lTO!`!6V!`!a!6{!a;'S!6V;'S;=`!7Q<%lO!6VP!7QOyPP!7TP;=`<%l!6Vq!7]V!dpOv!5kvx!6Vx!`!5k!`!a!7r!a;'S!5k;'S;=`!8V<%lO!5kq!7yS!dpyPOv(Vx;'S(V;'S;=`(h<%lO(Vq!8YP;=`<%l!5ka!8bX!b`Or!8]rs!6Vsv!8]vw!6Vw!a!8]!a!b!8}!b;'S!8];'S;=`!:V<%lO!8]a!9SX!b`Or!8]rs!6Vsv!8]vw!6Vw!`!8]!`!a!9o!a;'S!8];'S;=`!:V<%lO!8]a!9vT!b`yPOr)esv)ew;'S)e;'S;=`)y<%lO)ea!:YP;=`<%l!8]!R!:dY!b`!dpOr!4trs!5ksv!4tvw!6Vwx!8]x!`!4t!`!a!;S!a;'S!4t;'S;=`!;r<%lO!4t!R!;]V!b`!dpyPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!;uP;=`<%l!4t!V!<TXjSaP!b`!dpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X",tokenizers:[Dke,Mke,Ike,$ke,kke,Pke,0,1,2,3,4,5],topRules:{Document:[0,16]},dialects:{noMatch:0,selfClosing:515},tokenPrec:517});function cE(t,e){let n=Object.create(null);for(let i of t.getChildren(oE)){let s=i.getChild(uke),r=i.getChild(Gw)||i.getChild(aE);s&&(n[e.read(s.from,s.to)]=r?r.type.id==Gw?e.read(r.from+1,r.to-1):e.read(r.from,r.to):"")}return n}function p6(t,e){let n=t.getChild(cke);return n?e.read(n.from,n.to):" "}function R2(t,e,n){let i;for(let s of n)if(!s.attrs||s.attrs(i||(i=cE(t.node.parent.firstChild,e))))return{parser:s.parser,bracketed:!0};return null}function uE(t=[],e=[]){let n=[],i=[],s=[],r=[];for(let a of t)(a.tag=="script"?n:a.tag=="style"?i:a.tag=="textarea"?s:r).push(a);let o=e.length?Object.create(null):null;for(let a of e)(o[a.name]||(o[a.name]=[])).push(a);return K1((a,l)=>{let c=a.type.id;if(c==dke)return R2(a,l,n);if(c==hke)return R2(a,l,i);if(c==fke)return R2(a,l,s);if(c==rE&&r.length){let u=a.node,h=u.firstChild,p=h&&p6(h,l),m;if(p){for(let y of r)if(y.tag==p&&(!y.attrs||y.attrs(m||(m=cE(h,l))))){let O=u.lastChild,S=O.type.id==mke?O.from:u.to;if(S>h.to)return{parser:y.parser,overlay:[{from:h.to,to:S}]}}}}if(o&&c==oE){let u=a.node,h;if(h=u.firstChild){let p=o[l.read(h.from,h.to)];if(p)for(let m of p){if(m.tagName&&m.tagName!=p6(u.parent,l))continue;let y=u.lastChild;if(y.type.id==Gw){let O=y.from+1,S=y.lastChild,x=y.to-(S&&S.isError?0:1);if(x>O)return{parser:m.parser,overlay:[{from:O,to:x}],bracketed:!0}}else if(y.type.id==aE)return{parser:m.parser,overlay:[{from:y.from,to:y.to}]}}}}return null})}const Eke=122,m6=1,Qke=123,Nke=124,dE=2,Lke=125,Fke=3,Bke=4,hE=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],Vke=58,jke=40,fE=95,zke=91,cy=45,Zke=46,qke=35,Xke=37,Wke=38,Gke=92,Uke=10,Hke=42;function hp(t){return t>=65&&t<=90||t>=97&&t<=122||t>=161}function UA(t){return t>=48&&t<=57}function g6(t){return UA(t)||t>=97&&t<=102||t>=65&&t<=70}const pE=(t,e,n)=>(i,s)=>{for(let r=!1,o=0,a=0;;a++){let{next:l}=i;if(hp(l)||l==cy||l==fE||r&&UA(l))!r&&(l!=cy||a>0)&&(r=!0),o===a&&l==cy&&o++,i.advance();else if(l==Gke&&i.peek(1)!=Uke){if(i.advance(),g6(i.next)){do i.advance();while(g6(i.next));i.next==32&&i.advance()}else i.next>-1&&i.advance();r=!0}else{r&&i.acceptToken(o==2&&s.canShift(dE)?e:l==jke?n:t);break}}},Yke=new or(pE(Qke,dE,Nke)),Kke=new or(pE(Lke,Fke,Bke)),Jke=new or(t=>{if(hE.includes(t.peek(-1))){let{next:e}=t;(hp(e)||e==fE||e==qke||e==Zke||e==Hke||e==zke||e==Vke&&hp(t.peek(1))||e==cy||e==Wke)&&t.acceptToken(Eke)}}),e5e=new or(t=>{if(!hE.includes(t.peek(-1))){let{next:e}=t;if(e==Xke&&(t.advance(),t.acceptToken(m6)),hp(e)){do t.advance();while(hp(t.next)||UA(t.next));t.acceptToken(m6)}}}),t5e=Xp({"AtKeyword import charset namespace keyframes media supports":X.definitionKeyword,"from to selector":X.keyword,NamespaceName:X.namespace,KeyframeName:X.labelName,KeyframeRangeName:X.operatorKeyword,TagName:X.tagName,ClassName:X.className,PseudoClassName:X.constant(X.className),IdName:X.labelName,"FeatureName PropertyName":X.propertyName,AttributeName:X.attributeName,NumberLiteral:X.number,KeywordQuery:X.keyword,UnaryQueryOp:X.operatorKeyword,"CallTag ValueName":X.atom,VariableName:X.variableName,Callee:X.operatorKeyword,Unit:X.unit,"UniversalSelector NestingSelector":X.definitionOperator,"MatchOp CompareOp":X.compareOperator,"ChildOp SiblingOp, LogicOp":X.logicOperator,BinOp:X.arithmeticOperator,Important:X.modifier,Comment:X.blockComment,ColorLiteral:X.color,"ParenthesizedContent StringLiteral":X.string,":":X.punctuation,"PseudoOp #":X.derefOperator,"; ,":X.separator,"( )":X.paren,"[ ]":X.squareBracket,"{ }":X.brace}),n5e={__proto__:null,lang:38,"nth-child":38,"nth-last-child":38,"nth-of-type":38,"nth-last-of-type":38,dir:38,"host-context":38,if:84,url:124,"url-prefix":124,domain:124,regexp:124},i5e={__proto__:null,or:98,and:98,not:106,only:106,layer:170},s5e={__proto__:null,selector:112,layer:166},r5e={__proto__:null,"@import":162,"@media":174,"@charset":178,"@namespace":182,"@keyframes":188,"@supports":200,"@scope":204},o5e={__proto__:null,to:207},a5e=Xc.deserialize({version:14,states:"EbQYQdOOO#qQdOOP#xO`OOOOQP'#Cf'#CfOOQP'#Ce'#CeO#}QdO'#ChO$nQaO'#CcO$xQdO'#CkO%TQdO'#DpO%YQdO'#DrO%_QdO'#DuO%_QdO'#DxOOQP'#FV'#FVO&eQhO'#EhOOQS'#FU'#FUOOQS'#Ek'#EkQYQdOOO&lQdO'#EOO&PQhO'#EUO&lQdO'#EWO'aQdO'#EYO'lQdO'#E]O'tQhO'#EcO(VQdO'#EeO(bQaO'#CfO)VQ`O'#D{O)[Q`O'#F`O)gQdO'#F`QOQ`OOP)qO&jO'#CaPOOO)C@t)C@tOOQP'#Cj'#CjOOQP,59S,59SO#}QdO,59SO)|QdO,59VO%TQdO,5:[O%YQdO,5:^O%_QdO,5:aO%_QdO,5:cO%_QdO,5:dO%_QdO'#ErO*XQ`O,58}O*aQdO'#DzOOQS,58},58}OOQP'#Cn'#CnOOQO'#Dn'#DnOOQP,59V,59VO*hQ`O,59VO*mQ`O,59VOOQP'#Dq'#DqOOQP,5:[,5:[OOQO'#Ds'#DsO*rQpO,5:^O+]QaO,5:aO+sQaO,5:dOOQW'#DZ'#DZO,ZQhO'#DdO,xQhO'#FaO'tQhO'#DbO-WQ`O'#DhOOQW'#F['#F[O-]Q`O,5;SO-eQ`O'#DeOOQS-E8i-E8iOOQ['#Cs'#CsO-jQdO'#CtO.QQdO'#CzO.hQdO'#C}O/OQ!pO'#DPO1RQ!jO,5:jOOQO'#DU'#DUO*mQ`O'#DTO1cQ!nO'#FXO3`Q`O'#DVO3eQ`O'#DkOOQ['#FX'#FXO-`Q`O,5:pO3jQ!bO,5:rOOQS'#E['#E[O3rQ`O,5:tO3wQdO,5:tOOQO'#E_'#E_O4PQ`O,5:wO4UQhO,5:}O%_QdO'#DgOOQS,5;P,5;PO-eQ`O,5;PO4^QdO,5;PO4fQdO,5:gO4vQdO'#EtO5TQ`O,5;zO5TQ`O,5;zPOOO'#Ej'#EjP5`O&jO,58{POOO,58{,58{OOQP1G.n1G.nOOQP1G.q1G.qO*hQ`O1G.qO*mQ`O1G.qOOQP1G/v1G/vO5kQpO1G/xO5sQaO1G/{O6ZQaO1G/}O6qQaO1G0OO7XQaO,5;^OOQO-E8p-E8pOOQS1G.i1G.iO7cQ`O,5:fO7hQdO'#DoO7oQdO'#CrOOQP1G/x1G/xO&lQdO1G/xO7vQ!jO'#DZO8UQ!bO,59vO8^QhO,5:OOOQO'#F]'#F]O8XQ!bO,59zO'tQhO,59xO8fQhO'#EvO8sQ`O,5;{O9OQhO,59|O9uQhO'#DiOOQW,5:S,5:SOOQS1G0n1G0nOOQW,5:P,5:PO9|Q!fO'#FYOOQS'#FY'#FYOOQS'#Em'#EmO;^QdO,59`OOQ[,59`,59`O;tQdO,59fOOQ[,59f,59fO<[QdO,59iOOQ[,59i,59iOOQ[,59k,59kO&lQdO,59mO<rQhO'#EQOOQW'#EQ'#EQO=WQ`O1G0UO1[QhO1G0UOOQ[,59o,59oO'tQhO'#DXOOQ[,59q,59qO=]Q#tO,5:VOOQS1G0[1G0[OOQS1G0^1G0^OOQS1G0`1G0`O=hQ`O1G0`O=mQdO'#E`OOQS1G0c1G0cOOQS1G0i1G0iO=xQaO,5:RO-`Q`O1G0kOOQS1G0k1G0kO-eQ`O1G0kO>PQ!fO1G0ROOQO1G0R1G0ROOQO,5;`,5;`O>gQdO,5;`OOQO-E8r-E8rO>tQ`O1G1fPOOO-E8h-E8hPOOO1G.g1G.gOOQP7+$]7+$]OOQP7+%d7+%dO&lQdO7+%dOOQS1G0Q1G0QO?PQaO'#F_O?ZQ`O,5:ZO?`Q!fO'#ElO@^QdO'#FWO@hQ`O,59^O@mQ!bO7+%dO&lQdO1G/bO@uQhO1G/fOOQW1G/j1G/jOOQW1G/d1G/dOAWQhO,5;bOOQO-E8t-E8tOAfQhO'#DZOAtQhO'#F^OBPQ`O'#F^OBUQ`O,5:TOOQS-E8k-E8kOOQ[1G.z1G.zOOQ[1G/Q1G/QOOQ[1G/T1G/TOOQ[1G/X1G/XOBZQdO,5:lOOQS7+%p7+%pOB`Q`O7+%pOBeQhO'#DYOBmQ`O,59sO'tQhO,59sOOQ[1G/q1G/qOBuQ`O1G/qOOQS7+%z7+%zOBzQbO'#DPOOQO'#Eb'#EbOCYQ`O'#EaOOQO'#Ea'#EaOCeQ`O'#EwOCmQdO,5:zOOQS,5:z,5:zOOQ[1G/m1G/mOOQS7+&V7+&VO-`Q`O7+&VOCxQ!fO'#EsO&lQdO'#EsOEPQdO7+%mOOQO7+%m7+%mOOQO1G0z1G0zOEdQ!bO<<IOOElQdO'#EqOEvQ`O,5;yOOQP1G/u1G/uOOQS-E8j-E8jOFOQdO'#EpOFYQ`O,5;rOOQ]1G.x1G.xOOQP<<IO<<IOOFbQdO7+$|OOQO'#D]'#D]OFiQ!bO7+%QOFqQhO'#EoOF{Q`O,5;xO&lQdO,5;xOOQW1G/o1G/oOOQO'#ES'#ESOGTQ`O1G0WOOQS<<I[<<I[O&lQdO,59tOGnQhO1G/_OOQ[1G/_1G/_OGuQ`O1G/_OOQW-E8l-E8lOOQ[7+%]7+%]OOQO,5:{,5:{O=pQdO'#ExOCeQ`O,5;cOOQS,5;c,5;cOOQS-E8u-E8uOOQS1G0f1G0fOOQS<<Iq<<IqOG}Q!fO,5;_OOQS-E8q-E8qOOQO<<IX<<IXOOQPAN>jAN>jOIUQaO,5;]OOQO-E8o-E8oOI`QdO,5;[OOQO-E8n-E8nOOQW<<Hh<<HhOOQW<<Hl<<HlOIjQhO<<HlOI{QhO,5;ZOJWQ`O,5;ZOOQO-E8m-E8mOJ]QdO1G1dOBZQdO'#EuOJgQ`O7+%rOOQW7+%r7+%rOJoQ!bO1G/`OOQ[7+$y7+$yOJzQhO7+$yPKRQ`O'#EnOOQO,5;d,5;dOOQO-E8v-E8vOOQS1G0}1G0}OKWQ`OAN>WO&lQdO1G0uOK]Q`O7+'OOOQO,5;a,5;aOOQO-E8s-E8sOOQW<<I^<<I^OOQ[<<He<<HePOQW,5;Y,5;YOOQWG23rG23rOKeQdO7+&a",stateData:"Kx~O#sOS#tQQ~OW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#oRO~OQiOW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#ohO~O#m$SP~P!dO#tmO~O#ooO~O]qO`rOarOjsOmtO!juO!mwO#nvO~OpzO!^xO~P$SOc!QO#o|O#p}O~O#o!RO~O#o!TO~OW[OZ[O]TO`VOaVOjWOmXO!jYO!mZO#oRO~OS!]Oe!YO!V![O!Y!`O#q!XOp$TP~Ok$TP~P&POQ!jOe!cOm!dOp!eOr!mOt!mOz!kO!`!lO#o!bO#p!hO#}!fO~Ot!qO!`!lO#o!pO~Ot!sO#o!sO~OS!]Oe!YO!V![O!Y!`O#q!XO~Oe!vOpzO#Z!xO~O]YX`YX`!pXaYXjYXmYXpYX!^YX!jYX!mYX#nYX~O`!zO~Ok!{O#m$SXo$SX~O#m$SXo$SX~P!dO#u#OO#v#OO#w#QO~Oc#UO#o|O#p}O~OpzO!^xO~Oo$SP~P!dOe#`O~Oe#aO~Ol#bO!h#cO~O]qO`rOarOjsOmtO~Op!ia!^!ia!j!ia!m!ia#n!iad!ia~P*zOp!la!^!la!j!la!m!la#n!lad!la~P*zOR#gOS!]Oe!YOr#gOt#gO!V![O!Y!`O#q#dO#}!fO~O!R#iO!^#jOk$TXp$TX~Oe#mO~Ok#oOpzO~Oe!vO~O]#rO`#rOd#uOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl#wO~P&lO]#rO`#rOi#rOj#rOk#rOo#yO~P&lOP#zOSsXesXksXvsX!VsX!YsX!usX!wsX#qsX!TsXQsX]sX`sXdsXisXjsXmsXpsXrsXtsXzsX!`sX#osX#psX#}sXlsXosX!^sX!qsX#msX~Ov#{O!u#|O!w#}Ok$TP~P'tOe#aOS#{Xk#{Xv#{X!V#{X!Y#{X!u#{X!w#{X#q#{XQ#{X]#{X`#{Xd#{Xi#{Xj#{Xm#{Xp#{Xr#{Xt#{Xz#{X!`#{X#o#{X#p#{X#}#{Xl#{Xo#{X!^#{X!q#{X#m#{X~Oe$RO~Oe$TO~Ok$VOv#{O~Ok$WO~Ot$XO!`!lO~Op$YO~OpzO!R#iO~OpzO#Z$`O~O!q$bOk!oa#m!oao!oa~P&lOk#hX#m#hXo#hX~P!dOk!{O#m$Sao$Sa~O#u#OO#v#OO#w$hO~Ol$jO!h$kO~Op!ii!^!ii!j!ii!m!ii#n!iid!ii~P*zOp!ki!^!ki!j!ki!m!ki#n!kid!ki~P*zOp!li!^!li!j!li!m!li#n!lid!li~P*zOp#fa!^#fa~P$SOo$lO~Od$RP~P%_Od#zP~P&lO`!PXd}X!R}X!T!PX~O`$sO!T$tO~Od$uO!R#iO~Ok#jXp#jX!^#jX~P'tO!^#jOk$Tap$Ta~O!R#iOk!Uap!Ua!^!Uad!Ua`!Ua~OS!]Oe!YO!V![O!Y!`O#q$yO~Od$QP~P9dOv#{OQ#|X]#|X`#|Xd#|Xe#|Xi#|Xj#|Xk#|Xm#|Xp#|Xr#|Xt#|Xz#|X!`#|X#o#|X#p#|X#}#|Xl#|Xo#|X~O]#rO`#rOd%OOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl%PO~P&lO]#rO`#rOi#rOj#rOk#rOo%QO~P&lOe%SOS!tXk!tX!V!tX!Y!tX#q!tX~Ok%TO~Od%YOt%ZO!a%ZO~Ok%[O~Oo%cO#o%^O#}%]O~Od%dO~P$SOv#{O!^%hO!q%jOk!oi#m!oio!oi~P&lOk#ha#m#hao#ha~P!dOk!{O#m$Sio$Si~O!^%mOd$RX~P$SOd%oO~Ov#{OQ#`Xd#`Xe#`Xm#`Xp#`Xr#`Xt#`Xz#`X!^#`X!`#`X#o#`X#p#`X#}#`X~O!^%qOd#zX~P&lOd%sO~Ol%tOv#{O~OR#gOr#gOt#gO#q%vO#}!fO~O!R#iOk#jap#ja!^#ja~O`!PXd}X!R}X!^}X~O!R#iO!^%xOd$QX~O`%zO~Od%{O~O#o%|O~Ok&OO~O`&PO!R#iO~Od&ROk&QO~Od&UO~OP#zOpsX!^sXdsX~O#}%]Op#TX!^#TX~OpzO!^&WO~Oo&[O#o%^O#}%]O~Ov#{OQ#gXe#gXk#gXm#gXp#gXr#gXt#gXz#gX!^#gX!`#gX!q#gX#m#gX#o#gX#p#gX#}#gXo#gX~O!^%hO!q&`Ok!oq#m!oqo!oq~P&lOl&aOv#{O~Od#eX!^#eX~P%_O!^%mOd$Ra~Od#dX!^#dX~P&lO!^%qOd#za~Od&fO~P&lOd&gO!T&hO~Od#cX!^#cX~P9dO!^%xOd$Qa~O]&mOd&oO~OS#bae#ba!V#ba!Y#ba#q#ba~Od&qO~PG]Od&qOk&rO~Ov#{OQ#gae#gak#gam#gap#gar#gat#gaz#ga!^#ga!`#ga!q#ga#m#ga#o#ga#p#ga#}#gao#ga~Od#ea!^#ea~P$SOd#da!^#da~P&lOR#gOr#gOt#gO#q%vO#}%]O~O!R#iOd#ca!^#ca~O`&xO~O!^%xOd$Qi~P&lO]&mOd&|O~Ov#{Od|ik|i~Od&}O~PG]Ok'OO~Od'PO~O!^%xOd$Qq~Od#cq!^#cq~P&lO#s!a#t#}]#}v!m~",goto:"2h$UPPPPP$VP$YP$c$uP$cP%X$cPP%_PPP%e%o%oPPPPP%oPP%oP&]P%oP%o'W%oP't'w'}'}(^'}P'}P'}P'}'}P(m'}(yP(|PP)p)v$c)|$c*SP$cP$c$cP*Y*{+YP$YP+aP+dP$YP$YP$YP+j$YP+m+p+s+z$YP$YPP$YP,P,V,f,|-[-b-l-r-x.O.U.`.f.l.rPPPPPPPPPPP.x/R/w/z0|P1U1u2O2R2U2[RnQ_^OP`kz!{$dq[OPYZ`kuvwxz!v!{#`$d%mqSOPYZ`kuvwxz!v!{#`$d%mQpTR#RqQ!OVR#SrQ#S!QS$Q!i!jR$i#U!V!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'Q!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QU#g!Y$t&hU%`$Y%b&WR&V%_!V!iac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QR$S!kQ%W$RR&S%Xk!^]bf!Y![!g#i#j#m$P$R%X%xQ#e!YQ${#mQ%w$tQ&j%xR&w&hQ!ygQ#p!`Q$^!xR%f$`R#n!]!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QQ!qdR$X!rQ!PVR#TrQ#S!PR$i#TQ!SWR#VsQ!UXR#WtQ{UQ!wgQ#^yQ#o!_Q$U!nQ$[!uQ$_!yQ%e$^Q&Y%aQ&]%fR&v&XSjPzQ!}kQ$c!{R%k$dZiPkz!{$dR$P!gQ%}%SR&z&mR!rdR!teR$Z!tS%a$Y%bR&t&WV%_$Y%b&WQ#PmR$g#PQ`OSkPzU!a`k$dR$d!{Q$p#aY%p$p%u&d&l'QQ%u$sQ&d%qQ&l%zR'Q&xQ#t!cQ#v!dQ#x!eV$}#t#v#xQ%X$RR&T%XQ%y$zS&k%y&yR&y&lQ%r$pR&e%rQ%n$mR&c%nQyUR#]yQ%i$aR&_%iQ!|jS$e!|$fR$f!}Q&n%}R&{&nQ#k!ZR$x#kQ%b$YR&Z%bQ&X%aR&u&X__OP`kz!{$d^UOP`kz!{$dQ!VYQ!WZQ#XuQ#YvQ#ZwQ#[xQ$]!vQ$m#`R&b%mR$q#aQ!gaQ!oc[#q!c!d!e#t#v#xQ$a!zd$o#a$p$s%q%u%z&d&l&x'QQ$r#cQ%R#{S%g$a%iQ%l$kQ&^%hR&p&P]#s!c!d!e#t#v#xW!Z]b!g$PQ!ufQ#f!YQ#l![Q$v#iQ$w#jQ$z#mS%V$R%XR&i%xQ#h!YQ%w$tR&w&hR$|#mR$n#`QlPR#_zQ!_]Q!nbQ$O!gR%U$P",nodeNames:" Unit VariableName VariableName QueryCallee Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector . ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue AtKeyword # ; ] [ BracketedValue } { BracedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee IfExpression if ArgList IfBranch KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp ComparisonQuery CompareOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector ParenthesizedSelector CallQuery ArgList , CallLiteral CallTag ParenthesizedContent PseudoClassName ArgList IdSelector IdName AttributeSelector AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp Block Declaration PropertyName Important ImportStatement import Layer layer LayerName layer MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList KeyframeSelector KeyframeRangeName SupportsStatement supports ScopeStatement scope to AtRule Styles",maxTerm:143,nodeProps:[["isolate",-2,5,36,""],["openedBy",20,"(",28,"[",31,"{"],["closedBy",21,")",29,"]",32,"}"]],propSources:[t5e],skippedNodes:[0,5,106],repeatNodeCount:15,tokenData:"JQ~R!YOX$qX^%i^p$qpq%iqr({rs-ust/itu6Wuv$qvw7Qwx7cxy9Qyz9cz{9h{|:R|}>t}!O?V!O!P?t!P!Q@]!Q![AU![!]BP!]!^B{!^!_C^!_!`DY!`!aDm!a!b$q!b!cEn!c!}$q!}#OG{#O#P$q#P#QH^#Q#R6W#R#o$q#o#pHo#p#q6W#q#rIQ#r#sIc#s#y$q#y#z%i#z$f$q$f$g%i$g#BY$q#BY#BZ%i#BZ$IS$q$IS$I_%i$I_$I|$q$I|$JO%i$JO$JT$q$JT$JU%i$JU$KV$q$KV$KW%i$KW&FU$q&FU&FV%i&FV;'S$q;'S;=`Iz<%lO$q`$tSOy%Qz;'S%Q;'S;=`%c<%lO%Q`%VS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q`%fP;=`<%l%Q~%nh#s~OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Q~'ah#s~!a`OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Qj)OUOy%Qz#]%Q#]#^)b#^;'S%Q;'S;=`%c<%lO%Qj)gU!a`Oy%Qz#a%Q#a#b)y#b;'S%Q;'S;=`%c<%lO%Qj*OU!a`Oy%Qz#d%Q#d#e*b#e;'S%Q;'S;=`%c<%lO%Qj*gU!a`Oy%Qz#c%Q#c#d*y#d;'S%Q;'S;=`%c<%lO%Qj+OU!a`Oy%Qz#f%Q#f#g+b#g;'S%Q;'S;=`%c<%lO%Qj+gU!a`Oy%Qz#h%Q#h#i+y#i;'S%Q;'S;=`%c<%lO%Qj,OU!a`Oy%Qz#T%Q#T#U,b#U;'S%Q;'S;=`%c<%lO%Qj,gU!a`Oy%Qz#b%Q#b#c,y#c;'S%Q;'S;=`%c<%lO%Qj-OU!a`Oy%Qz#h%Q#h#i-b#i;'S%Q;'S;=`%c<%lO%Qj-iS!qY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q~-xWOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c<%lO-u~.gOt~~.jRO;'S-u;'S;=`.s;=`O-u~.vXOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c;=`<%l-u<%lO-u~/fP;=`<%l-uj/nYjYOy%Qz!Q%Q!Q![0^![!c%Q!c!i0^!i#T%Q#T#Z0^#Z;'S%Q;'S;=`%c<%lO%Qj0cY!a`Oy%Qz!Q%Q!Q![1R![!c%Q!c!i1R!i#T%Q#T#Z1R#Z;'S%Q;'S;=`%c<%lO%Qj1WY!a`Oy%Qz!Q%Q!Q![1v![!c%Q!c!i1v!i#T%Q#T#Z1v#Z;'S%Q;'S;=`%c<%lO%Qj1}YrY!a`Oy%Qz!Q%Q!Q![2m![!c%Q!c!i2m!i#T%Q#T#Z2m#Z;'S%Q;'S;=`%c<%lO%Qj2tYrY!a`Oy%Qz!Q%Q!Q![3d![!c%Q!c!i3d!i#T%Q#T#Z3d#Z;'S%Q;'S;=`%c<%lO%Qj3iY!a`Oy%Qz!Q%Q!Q![4X![!c%Q!c!i4X!i#T%Q#T#Z4X#Z;'S%Q;'S;=`%c<%lO%Qj4`YrY!a`Oy%Qz!Q%Q!Q![5O![!c%Q!c!i5O!i#T%Q#T#Z5O#Z;'S%Q;'S;=`%c<%lO%Qj5TY!a`Oy%Qz!Q%Q!Q![5s![!c%Q!c!i5s!i#T%Q#T#Z5s#Z;'S%Q;'S;=`%c<%lO%Qj5zSrY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qd6ZUOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qd6tS!hS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qb7VSZQOy%Qz;'S%Q;'S;=`%c<%lO%Q~7fWOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z<%lO7c~8RRO;'S7c;'S;=`8[;=`O7c~8_XOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z;=`<%l7c<%lO7c~8}P;=`<%l7cj9VSeYOy%Qz;'S%Q;'S;=`%c<%lO%Q~9hOd~n9oUWQvWOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qj:YWvW!mQOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj:wU!a`Oy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Qj;bY!a`#}YOy%Qz!Q%Q!Q![;Z![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj<VY!a`Oy%Qz{%Q{|<u|}%Q}!O<u!O!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj<zU!a`Oy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj=eU!a`#}YOy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj>O[!a`#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj>yS!^YOy%Qz;'S%Q;'S;=`%c<%lO%Qj?[WvWOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj?yU]YOy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Q~@bTvWOy%Qz{@q{;'S%Q;'S;=`%c<%lO%Q~@xS!a`#t~Oy%Qz;'S%Q;'S;=`%c<%lO%QjAZ[#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%QjBUU`YOy%Qz![%Q![!]Bh!];'S%Q;'S;=`%c<%lO%QbBoSaQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjCQSkYOy%Qz;'S%Q;'S;=`%c<%lO%QhCcU!TWOy%Qz!_%Q!_!`Cu!`;'S%Q;'S;=`%c<%lO%QhC|S!TW!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QlDaS!TW!hSOy%Qz;'S%Q;'S;=`%c<%lO%QjDtV!jQ!TWOy%Qz!_%Q!_!`Cu!`!aEZ!a;'S%Q;'S;=`%c<%lO%QbEbS!jQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjEqYOy%Qz}%Q}!OFa!O!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjFfW!a`Oy%Qz!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjGV[iY!a`Oy%Qz}%Q}!OGO!O!Q%Q!Q![GO![!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjHQSmYOy%Qz;'S%Q;'S;=`%c<%lO%QnHcSl^Oy%Qz;'S%Q;'S;=`%c<%lO%QjHtSpYOy%Qz;'S%Q;'S;=`%c<%lO%QjIVSoYOy%Qz;'S%Q;'S;=`%c<%lO%QfIhU!mQOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Q`I}P;=`<%l$q",tokenizers:[Jke,e5e,Yke,Kke,1,2,3,4,new Do("m~RRYZ[z{a~~g~aO#v~~dP!P!Qg~lO#w~~",28,129)],topRules:{StyleSheet:[0,6],Styles:[1,105]},dynamicPrecedences:{76:1},specialized:[{term:124,get:t=>n5e[t]||-1},{term:125,get:t=>i5e[t]||-1},{term:4,get:t=>s5e[t]||-1},{term:25,get:t=>r5e[t]||-1},{term:123,get:t=>o5e[t]||-1}],tokenPrec:1963});let _2=null;function E2(){if(!_2&&typeof document=="object"&&document.body){let{style:t}=document.body,e=[],n=new Set;for(let i in t)i!="cssText"&&i!="cssFloat"&&typeof t[i]=="string"&&(/[A-Z]/.test(i)&&(i=i.replace(/[A-Z]/g,s=>"-"+s.toLowerCase())),n.has(i)||(e.push(i),n.add(i)));_2=e.sort().map(i=>({type:"property",label:i,apply:i+": "}))}return _2||[]}const y6=["active","after","any-link","autofill","backdrop","before","checked","cue","default","defined","disabled","empty","enabled","file-selector-button","first","first-child","first-letter","first-line","first-of-type","focus","focus-visible","focus-within","fullscreen","has","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","marker","modal","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","part","placeholder","placeholder-shown","read-only","read-write","required","right","root","scope","selection","slotted","target","target-text","valid","visited","where"].map(t=>({type:"class",label:t})),O6=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(t=>({type:"keyword",label:t})).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(t=>({type:"constant",label:t}))),l5e=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(t=>({type:"type",label:t})),c5e=["@charset","@color-profile","@container","@counter-style","@font-face","@font-feature-values","@font-palette-values","@import","@keyframes","@layer","@media","@namespace","@page","@position-try","@property","@scope","@starting-style","@supports","@view-transition"].map(t=>({type:"keyword",label:t})),la=/^(\w[\w-]*|-\w[\w-]*|)$/,u5e=/^-(-[\w-]*)?$/;function d5e(t,e){var n;if((t.name=="("||t.type.isError)&&(t=t.parent||t),t.name!="ArgList")return!1;let i=(n=t.parent)===null||n===void 0?void 0:n.firstChild;return(i==null?void 0:i.name)!="Callee"?!1:e.sliceString(i.from,i.to)=="var"}const b6=new PR,h5e=["Declaration"];function f5e(t){for(let e=t;;){if(e.type.isTop)return e;if(!(e=e.parent))return t}}function mE(t,e,n){if(e.to-e.from>4096){let i=b6.get(e);if(i)return i;let s=[],r=new Set,o=e.cursor(en.IncludeAnonymous);if(o.firstChild())do for(let a of mE(t,o.node,n))r.has(a.label)||(r.add(a.label),s.push(a));while(o.nextSibling());return b6.set(e,s),s}else{let i=[],s=new Set;return e.cursor().iterate(r=>{var o;if(n(r)&&r.matchContext(h5e)&&((o=r.node.nextSibling)===null||o===void 0?void 0:o.name)==":"){let a=t.sliceString(r.from,r.to);s.has(a)||(s.add(a),i.push({label:a,type:"variable"}))}}),i}}const p5e=t=>e=>{let{state:n,pos:i}=e,s=Dn(n).resolveInner(i,-1),r=s.type.isError&&s.from==s.to-1&&n.doc.sliceString(s.from,s.to)=="-";if(s.name=="PropertyName"||(r||s.name=="TagName")&&/^(Block|Styles)$/.test(s.resolve(s.to).name))return{from:s.from,options:E2(),validFor:la};if(s.name=="ValueName")return{from:s.from,options:O6,validFor:la};if(s.name=="PseudoClassName")return{from:s.from,options:y6,validFor:la};if(t(s)||(e.explicit||r)&&d5e(s,n.doc))return{from:t(s)||r?s.from:i,options:mE(n.doc,f5e(s),t),validFor:u5e};if(s.name=="TagName"){for(let{parent:l}=s;l;l=l.parent)if(l.name=="Block")return{from:s.from,options:E2(),validFor:la};return{from:s.from,options:l5e,validFor:la}}if(s.name=="AtKeyword")return{from:s.from,options:c5e,validFor:la};if(!e.explicit)return null;let o=s.resolve(i),a=o.childBefore(i);return a&&a.name==":"&&o.name=="PseudoClassSelector"?{from:i,options:y6,validFor:la}:a&&a.name==":"&&o.name=="Declaration"||o.name=="ArgList"?{from:i,options:O6,validFor:la}:o.name=="Block"||o.name=="Styles"?{from:i,options:E2(),validFor:la}:null},m5e=p5e(t=>t.name=="VariableName"),_0=Zc.define({name:"css",parser:a5e.configure({props:[nO.add({Declaration:ay()}),iO.add({"Block KeyframeList":ER})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function g5e(){return new J1(_0,_0.data.of({autocomplete:m5e}))}const y5e=316,O5e=317,v6=1,b5e=2,v5e=3,w5e=4,S5e=318,C5e=320,A5e=321,x5e=5,k5e=6,P5e=0,Hw=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],gE=125,T5e=59,Yw=47,$5e=42,D5e=43,M5e=45,I5e=60,R5e=44,_5e=63,E5e=46,Q5e=91,N5e=new eE({start:!1,shift(t,e){return e==x5e||e==k5e||e==C5e?t:e==A5e},strict:!1}),L5e=new or((t,e)=>{let{next:n}=t;(n==gE||n==-1||e.context)&&t.acceptToken(S5e)},{contextual:!0,fallback:!0}),F5e=new or((t,e)=>{let{next:n}=t,i;Hw.indexOf(n)>-1||n==Yw&&((i=t.peek(1))==Yw||i==$5e)||n!=gE&&n!=T5e&&n!=-1&&!e.context&&t.acceptToken(y5e)},{contextual:!0}),B5e=new or((t,e)=>{t.next==Q5e&&!e.context&&t.acceptToken(O5e)},{contextual:!0}),V5e=new or((t,e)=>{let{next:n}=t;if(n==D5e||n==M5e){if(t.advance(),n==t.next){t.advance();let i=!e.context&&e.canShift(v6);t.acceptToken(i?v6:b5e)}}else n==_5e&&t.peek(1)==E5e&&(t.advance(),t.advance(),(t.next<48||t.next>57)&&t.acceptToken(v5e))},{contextual:!0});function Q2(t,e){return t>=65&&t<=90||t>=97&&t<=122||t==95||t>=192||!e&&t>=48&&t<=57}const j5e=new or((t,e)=>{if(t.next!=I5e||!e.dialectEnabled(P5e)||(t.advance(),t.next==Yw))return;let n=0;for(;Hw.indexOf(t.next)>-1;)t.advance(),n++;if(Q2(t.next,!0)){for(t.advance(),n++;Q2(t.next,!1);)t.advance(),n++;for(;Hw.indexOf(t.next)>-1;)t.advance(),n++;if(t.next==R5e)return;for(let i=0;;i++){if(i==7){if(!Q2(t.next,!0))return;break}if(t.next!="extends".charCodeAt(i))break;t.advance(),n++}}t.acceptToken(w5e,-n)}),z5e=Xp({"get set async static":X.modifier,"for while do if else switch try catch finally return throw break continue default case defer":X.controlKeyword,"in of await yield void typeof delete instanceof as satisfies":X.operatorKeyword,"let var const using function class extends":X.definitionKeyword,"import export from":X.moduleKeyword,"with debugger new":X.keyword,TemplateString:X.special(X.string),super:X.atom,BooleanLiteral:X.bool,this:X.self,null:X.null,Star:X.modifier,VariableName:X.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":X.function(X.variableName),VariableDefinition:X.definition(X.variableName),Label:X.labelName,PropertyName:X.propertyName,PrivatePropertyName:X.special(X.propertyName),"CallExpression/MemberExpression/PropertyName":X.function(X.propertyName),"FunctionDeclaration/VariableDefinition":X.function(X.definition(X.variableName)),"ClassDeclaration/VariableDefinition":X.definition(X.className),"NewExpression/VariableName":X.className,PropertyDefinition:X.definition(X.propertyName),PrivatePropertyDefinition:X.definition(X.special(X.propertyName)),UpdateOp:X.updateOperator,"LineComment Hashbang":X.lineComment,BlockComment:X.blockComment,Number:X.number,String:X.string,Escape:X.escape,ArithOp:X.arithmeticOperator,LogicOp:X.logicOperator,BitOp:X.bitwiseOperator,CompareOp:X.compareOperator,RegExp:X.regexp,Equals:X.definitionOperator,Arrow:X.function(X.punctuation),": Spread":X.punctuation,"( )":X.paren,"[ ]":X.squareBracket,"{ }":X.brace,"InterpolationStart InterpolationEnd":X.special(X.brace),".":X.derefOperator,", ;":X.separator,"@":X.meta,TypeName:X.typeName,TypeDefinition:X.definition(X.typeName),"type enum interface implements namespace module declare":X.definitionKeyword,"abstract global Privacy readonly override":X.modifier,"is keyof unique infer asserts":X.operatorKeyword,JSXAttributeValue:X.attributeValue,JSXText:X.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":X.angleBracket,"JSXIdentifier JSXNameSpacedName":X.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":X.attributeName,"JSXBuiltin/JSXIdentifier":X.standard(X.tagName)}),Z5e={__proto__:null,export:20,as:25,from:33,default:36,async:41,function:42,in:52,out:55,const:56,extends:60,this:64,true:72,false:72,null:84,void:88,typeof:92,super:108,new:142,delete:154,yield:163,await:167,class:172,public:235,private:235,protected:235,readonly:237,instanceof:256,satisfies:259,import:292,keyof:349,unique:353,infer:359,asserts:395,is:397,abstract:417,implements:419,type:421,let:424,var:426,using:429,interface:435,enum:439,namespace:445,module:447,declare:451,global:455,defer:471,for:476,of:485,while:488,with:492,do:496,if:500,else:502,switch:506,case:512,try:518,catch:522,finally:526,return:530,throw:534,break:538,continue:542,debugger:546},q5e={__proto__:null,async:129,get:131,set:133,declare:195,public:197,private:197,protected:197,static:199,abstract:201,override:203,readonly:209,accessor:211,new:401},X5e={__proto__:null,"<":193},W5e=Xc.deserialize({version:14,states:"$F|Q%TQlOOO%[QlOOO'_QpOOP(lO`OOO*zQ!0MxO'#CiO+RO#tO'#CjO+aO&jO'#CjO+oO#@ItO'#DaO.QQlO'#DgO.bQlO'#DrO%[QlO'#DzO0fQlO'#ESOOQ!0Lf'#E['#E[O1PQ`O'#EXOOQO'#Ep'#EpOOQO'#Il'#IlO1XQ`O'#GsO1dQ`O'#EoO1iQ`O'#EoO3hQ!0MxO'#JrO6[Q!0MxO'#JsO6uQ`O'#F]O6zQ,UO'#FtOOQ!0Lf'#Ff'#FfO7VO7dO'#FfO9XQMhO'#F|O9`Q`O'#F{OOQ!0Lf'#Js'#JsOOQ!0Lb'#Jr'#JrO9eQ`O'#GwOOQ['#K_'#K_O9pQ`O'#IYO9uQ!0LrO'#IZOOQ['#J`'#J`OOQ['#I_'#I_Q`QlOOQ`QlOOO9}Q!L^O'#DvO:UQlO'#EOO:]QlO'#EQO9kQ`O'#GsO:dQMhO'#CoO:rQ`O'#EnO:}Q`O'#EyO;hQMhO'#FeO;xQ`O'#GsOOQO'#K`'#K`O;}Q`O'#K`O<]Q`O'#G{O<]Q`O'#G|O<]Q`O'#HOO9kQ`O'#HRO=SQ`O'#HUO>kQ`O'#CeO>{Q`O'#HcO?TQ`O'#HiO?TQ`O'#HkO`QlO'#HmO?TQ`O'#HoO?TQ`O'#HrO?YQ`O'#HxO?_Q!0LsO'#IOO%[QlO'#IQO?jQ!0LsO'#ISO?uQ!0LsO'#IUO9uQ!0LrO'#IWO@QQ!0MxO'#CiOASQpO'#DlQOQ`OOO%[QlO'#EQOAjQ`O'#ETO:dQMhO'#EnOAuQ`O'#EnOBQQ!bO'#FeOOQ['#Cg'#CgOOQ!0Lb'#Dq'#DqOOQ!0Lb'#Jv'#JvO%[QlO'#JvOOQO'#Jy'#JyOOQO'#Ih'#IhOCQQpO'#EgOOQ!0Lb'#Ef'#EfOOQ!0Lb'#J}'#J}OC|Q!0MSO'#EgODWQpO'#EWOOQO'#Jx'#JxODlQpO'#JyOEyQpO'#EWODWQpO'#EgPFWO&2DjO'#CbPOOO)CD})CD}OOOO'#I`'#I`OFcO#tO,59UOOQ!0Lh,59U,59UOOOO'#Ia'#IaOFqO&jO,59UOGPQ!L^O'#DcOOOO'#Ic'#IcOGWO#@ItO,59{OOQ!0Lf,59{,59{OGfQlO'#IdOGyQ`O'#JtOIxQ!fO'#JtO+}QlO'#JtOJPQ`O,5:ROJgQ`O'#EpOJtQ`O'#KTOKPQ`O'#KSOKPQ`O'#KSOKXQ`O,5;^OK^Q`O'#KROOQ!0Ln,5:^,5:^OKeQlO,5:^OMcQ!0MxO,5:fONSQ`O,5:nONmQ!0LrO'#KQONtQ`O'#KPO9eQ`O'#KPO! YQ`O'#KPO! bQ`O,5;]O! gQ`O'#KPO!#lQ!fO'#JsOOQ!0Lh'#Ci'#CiO%[QlO'#ESO!$[Q!fO,5:sOOQS'#Jz'#JzOOQO-E<j-E<jO9kQ`O,5=_O!$rQ`O,5=_O!$wQlO,5;ZO!&zQMhO'#EkO!(eQ`O,5;ZO!(jQlO'#DyO!(tQpO,5;dO!(|QpO,5;dO%[QlO,5;dOOQ['#FT'#FTOOQ['#FV'#FVO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eO%[QlO,5;eOOQ['#FZ'#FZO!)[QlO,5;tOOQ!0Lf,5;y,5;yOOQ!0Lf,5;z,5;zOOQ!0Lf,5;|,5;|O%[QlO'#IpO!+_Q!0LrO,5<iO%[QlO,5;eO!&zQMhO,5;eO!+|QMhO,5;eO!-nQMhO'#E^O%[QlO,5;wOOQ!0Lf,5;{,5;{O!-uQ,UO'#FjO!.rQ,UO'#KXO!.^Q,UO'#KXO!.yQ,UO'#KXOOQO'#KX'#KXO!/_Q,UO,5<SOOOW,5<`,5<`O!/pQlO'#FvOOOW'#Io'#IoO7VO7dO,5<QO!/wQ,UO'#FxOOQ!0Lf,5<Q,5<QO!0hQ$IUO'#CyOOQ!0Lh'#C}'#C}O!0{O#@ItO'#DRO!1iQMjO,5<eO!1pQ`O,5<hO!3YQ(CWO'#GXO!3jQ`O'#GYO!3oQ`O'#GYO!5_Q(CWO'#G^O!6dQpO'#GbOOQO'#Gn'#GnO!,TQMhO'#GmOOQO'#Gp'#GpO!,TQMhO'#GoO!7VQ$IUO'#JlOOQ!0Lh'#Jl'#JlO!7aQ`O'#JkO!7oQ`O'#JjO!7wQ`O'#CuOOQ!0Lh'#C{'#C{O!8YQ`O'#C}OOQ!0Lh'#DV'#DVOOQ!0Lh'#DX'#DXO!8_Q`O,5<eO1SQ`O'#DZO!,TQMhO'#GPO!,TQMhO'#GRO!8gQ`O'#GTO!8lQ`O'#GUO!3oQ`O'#G[O!,TQMhO'#GaO<]Q`O'#JkO!8qQ`O'#EqO!9`Q`O,5<gOOQ!0Lb'#Cr'#CrO!9hQ`O'#ErO!:bQpO'#EsOOQ!0Lb'#KR'#KRO!:iQ!0LrO'#KaO9uQ!0LrO,5=cO`QlO,5>tOOQ['#Jh'#JhOOQ[,5>u,5>uOOQ[-E<]-E<]O!<hQ!0MxO,5:bO!:]QpO,5:`O!?RQ!0MxO,5:jO%[QlO,5:jO!AiQ!0MxO,5:lOOQO,5@z,5@zO!BYQMhO,5=_O!BhQ!0LrO'#JiO9`Q`O'#JiO!ByQ!0LrO,59ZO!CUQpO,59ZO!C^QMhO,59ZO:dQMhO,59ZO!CiQ`O,5;ZO!CqQ`O'#HbO!DVQ`O'#KdO%[QlO,5;}O!:]QpO,5<PO!D_Q`O,5=zO!DdQ`O,5=zO!DiQ`O,5=zO!DwQ`O,5=zO9uQ!0LrO,5=zO<]Q`O,5=jOOQO'#Cy'#CyO!EOQpO,5=gO!EWQMhO,5=hO!EcQ`O,5=jO!EhQ!bO,5=mO!EpQ`O'#K`O?YQ`O'#HWO9kQ`O'#HYO!EuQ`O'#HYO:dQMhO'#H[O!EzQ`O'#H[OOQ[,5=p,5=pO!FPQ`O'#H]O!FbQ`O'#CoO!FgQ`O,59PO!FqQ`O,59PO!HvQlO,59POOQ[,59P,59PO!IWQ!0LrO,59PO%[QlO,59PO!KcQlO'#HeOOQ['#Hf'#HfOOQ['#Hg'#HgO`QlO,5=}O!KyQ`O,5=}O`QlO,5>TO`QlO,5>VO!LOQ`O,5>XO`QlO,5>ZO!LTQ`O,5>^O!LYQlO,5>dOOQ[,5>j,5>jO%[QlO,5>jO9uQ!0LrO,5>lOOQ[,5>n,5>nO#!dQ`O,5>nOOQ[,5>p,5>pO#!dQ`O,5>pOOQ[,5>r,5>rO##QQpO'#D_O%[QlO'#JvO##sQpO'#JvO##}QpO'#DmO#$`QpO'#DmO#&qQlO'#DmO#&xQ`O'#JuO#'QQ`O,5:WO#'VQ`O'#EtO#'eQ`O'#KUO#'mQ`O,5;_O#'rQpO'#DmO#(PQpO'#EVOOQ!0Lf,5:o,5:oO%[QlO,5:oO#(WQ`O,5:oO?YQ`O,5;YO!CUQpO,5;YO!C^QMhO,5;YO:dQMhO,5;YO#(`Q`O,5@bO#(eQ07dO,5:sOOQO-E<f-E<fO#)kQ!0MSO,5;RODWQpO,5:rO#)uQpO,5:rODWQpO,5;RO!ByQ!0LrO,5:rOOQ!0Lb'#Ej'#EjOOQO,5;R,5;RO%[QlO,5;RO#*SQ!0LrO,5;RO#*_Q!0LrO,5;RO!CUQpO,5:rOOQO,5;X,5;XO#*mQ!0LrO,5;RPOOO'#I^'#I^P#+RO&2DjO,58|POOO,58|,58|OOOO-E<^-E<^OOQ!0Lh1G.p1G.pOOOO-E<_-E<_OOOO,59},59}O#+^Q!bO,59}OOOO-E<a-E<aOOQ!0Lf1G/g1G/gO#+cQ!fO,5?OO+}QlO,5?OOOQO,5?U,5?UO#+mQlO'#IdOOQO-E<b-E<bO#+zQ`O,5@`O#,SQ!fO,5@`O#,ZQ`O,5@nOOQ!0Lf1G/m1G/mO%[QlO,5@oO#,cQ`O'#IjOOQO-E<h-E<hO#,ZQ`O,5@nOOQ!0Lb1G0x1G0xOOQ!0Ln1G/x1G/xOOQ!0Ln1G0Y1G0YO%[QlO,5@lO#,wQ!0LrO,5@lO#-YQ!0LrO,5@lO#-aQ`O,5@kO9eQ`O,5@kO#-iQ`O,5@kO#-wQ`O'#ImO#-aQ`O,5@kOOQ!0Lb1G0w1G0wO!(tQpO,5:uO!)PQpO,5:uOOQS,5:w,5:wO#.iQdO,5:wO#.qQMhO1G2yO9kQ`O1G2yOOQ!0Lf1G0u1G0uO#/PQ!0MxO1G0uO#0UQ!0MvO,5;VOOQ!0Lh'#GW'#GWO#0rQ!0MzO'#JlO!$wQlO1G0uO#2}Q!fO'#JwO%[QlO'#JwO#3XQ`O,5:eOOQ!0Lh'#D_'#D_OOQ!0Lf1G1O1G1OO%[QlO1G1OOOQ!0Lf1G1f1G1fO#3^Q`O1G1OO#5rQ!0MxO1G1PO#5yQ!0MxO1G1PO#8aQ!0MxO1G1PO#8hQ!0MxO1G1PO#;OQ!0MxO1G1PO#=fQ!0MxO1G1PO#=mQ!0MxO1G1PO#=tQ!0MxO1G1PO#@[Q!0MxO1G1PO#@cQ!0MxO1G1PO#BpQ?MtO'#CiO#DkQ?MtO1G1`O#DrQ?MtO'#JsO#EVQ!0MxO,5?[OOQ!0Lb-E<n-E<nO#GdQ!0MxO1G1PO#HaQ!0MzO1G1POOQ!0Lf1G1P1G1PO#IdQMjO'#J|O#InQ`O,5:xO#IsQ!0MxO1G1cO#JgQ,UO,5<WO#JoQ,UO,5<XO#JwQ,UO'#FoO#K`Q`O'#FnOOQO'#KY'#KYOOQO'#In'#InO#KeQ,UO1G1nOOQ!0Lf1G1n1G1nOOOW1G1y1G1yO#KvQ?MtO'#JrO#LQQ`O,5<bO!)[QlO,5<bOOOW-E<m-E<mOOQ!0Lf1G1l1G1lO#LVQpO'#KXOOQ!0Lf,5<d,5<dO#L_QpO,5<dO#LdQMhO'#DTOOOO'#Ib'#IbO#LkO#@ItO,59mOOQ!0Lh,59m,59mO%[QlO1G2PO!8lQ`O'#IrO#LvQ`O,5<zOOQ!0Lh,5<w,5<wO!,TQMhO'#IuO#MdQMjO,5=XO!,TQMhO'#IwO#NVQMjO,5=ZO!&zQMhO,5=]OOQO1G2S1G2SO#NaQ!dO'#CrO#NtQ(CWO'#ErO$ |QpO'#GbO$!dQ!dO,5<sO$!kQ`O'#K[O9eQ`O'#K[O$!yQ`O,5<uO$#aQ!dO'#C{O!,TQMhO,5<tO$#kQ`O'#GZO$$PQ`O,5<tO$$UQ!dO'#GWO$$cQ!dO'#K]O$$mQ`O'#K]O!&zQMhO'#K]O$$rQ`O,5<xO$$wQlO'#JvO$%RQpO'#GcO#$`QpO'#GcO$%dQ`O'#GgO!3oQ`O'#GkO$%iQ!0LrO'#ItO$%tQpO,5<|OOQ!0Lp,5<|,5<|O$%{QpO'#GcO$&YQpO'#GdO$&kQpO'#GdO$&pQMjO,5=XO$'QQMjO,5=ZOOQ!0Lh,5=^,5=^O!,TQMhO,5@VO!,TQMhO,5@VO$'bQ`O'#IyO$'vQ`O,5@UO$(OQ`O,59aOOQ!0Lh,59i,59iO$(TQ`O,5@VO$)TQ$IYO,59uOOQ!0Lh'#Jp'#JpO$)vQMjO,5<kO$*iQMjO,5<mO@zQ`O,5<oOOQ!0Lh,5<p,5<pO$*sQ`O,5<vO$*xQMjO,5<{O$+YQ`O'#KPO!$wQlO1G2RO$+_Q`O1G2RO9eQ`O'#KSO9eQ`O'#EtO%[QlO'#EtO9eQ`O'#I{O$+dQ!0LrO,5@{OOQ[1G2}1G2}OOQ[1G4`1G4`OOQ!0Lf1G/|1G/|OOQ!0Lf1G/z1G/zO$-fQ!0MxO1G0UOOQ[1G2y1G2yO!&zQMhO1G2yO%[QlO1G2yO#.tQ`O1G2yO$/jQMhO'#EkOOQ!0Lb,5@T,5@TO$/wQ!0LrO,5@TOOQ[1G.u1G.uO!ByQ!0LrO1G.uO!CUQpO1G.uO!C^QMhO1G.uO$0YQ`O1G0uO$0_Q`O'#CiO$0jQ`O'#KeO$0rQ`O,5=|O$0wQ`O'#KeO$0|Q`O'#KeO$1[Q`O'#JRO$1jQ`O,5AOO$1rQ!fO1G1iOOQ!0Lf1G1k1G1kO9kQ`O1G3fO@zQ`O1G3fO$1yQ`O1G3fO$2OQ`O1G3fO!DiQ`O1G3fO9uQ!0LrO1G3fOOQ[1G3f1G3fO!EcQ`O1G3UO!&zQMhO1G3RO$2TQ`O1G3ROOQ[1G3S1G3SO!&zQMhO1G3SO$2YQ`O1G3SO$2bQpO'#HQOOQ[1G3U1G3UO!6_QpO'#I}O!EhQ!bO1G3XOOQ[1G3X1G3XOOQ[,5=r,5=rO$2jQMhO,5=tO9kQ`O,5=tO$%dQ`O,5=vO9`Q`O,5=vO!CUQpO,5=vO!C^QMhO,5=vO:dQMhO,5=vO$2xQ`O'#KcO$3TQ`O,5=wOOQ[1G.k1G.kO$3YQ!0LrO1G.kO@zQ`O1G.kO$3eQ`O1G.kO9uQ!0LrO1G.kO$5mQ!fO,5AQO$5zQ`O,5AQO9eQ`O,5AQO$6VQlO,5>PO$6^Q`O,5>POOQ[1G3i1G3iO`QlO1G3iOOQ[1G3o1G3oOOQ[1G3q1G3qO?TQ`O1G3sO$6cQlO1G3uO$:gQlO'#HtOOQ[1G3x1G3xO$:tQ`O'#HzO?YQ`O'#H|OOQ[1G4O1G4OO$:|QlO1G4OO9uQ!0LrO1G4UOOQ[1G4W1G4WOOQ!0Lb'#G_'#G_O9uQ!0LrO1G4YO9uQ!0LrO1G4[O$?TQ`O,5@bO!)[QlO,5;`O9eQ`O,5;`O?YQ`O,5:XO!)[QlO,5:XO!CUQpO,5:XO$?YQ?MtO,5:XOOQO,5;`,5;`O$?dQpO'#IeO$?zQ`O,5@aOOQ!0Lf1G/r1G/rO$@SQpO'#IkO$@^Q`O,5@pOOQ!0Lb1G0y1G0yO#$`QpO,5:XOOQO'#Ig'#IgO$@fQpO,5:qOOQ!0Ln,5:q,5:qO#(ZQ`O1G0ZOOQ!0Lf1G0Z1G0ZO%[QlO1G0ZOOQ!0Lf1G0t1G0tO?YQ`O1G0tO!CUQpO1G0tO!C^QMhO1G0tOOQ!0Lb1G5|1G5|O!ByQ!0LrO1G0^OOQO1G0m1G0mO%[QlO1G0mO$@mQ!0LrO1G0mO$@xQ!0LrO1G0mO!CUQpO1G0^ODWQpO1G0^O$AWQ!0LrO1G0mOOQO1G0^1G0^O$AlQ!0MxO1G0mPOOO-E<[-E<[POOO1G.h1G.hOOOO1G/i1G/iO$AvQ!bO,5<iO$BOQ!fO1G4jOOQO1G4p1G4pO%[QlO,5?OO$BYQ`O1G5zO$BbQ`O1G6YO$BjQ!fO1G6ZO9eQ`O,5?UO$BtQ!0MxO1G6WO%[QlO1G6WO$CUQ!0LrO1G6WO$CgQ`O1G6VO$CgQ`O1G6VO9eQ`O1G6VO$CoQ`O,5?XO9eQ`O,5?XOOQO,5?X,5?XO$DTQ`O,5?XO$+YQ`O,5?XOOQO-E<k-E<kOOQS1G0a1G0aOOQS1G0c1G0cO#.lQ`O1G0cOOQ[7+(e7+(eO!&zQMhO7+(eO%[QlO7+(eO$DcQ`O7+(eO$DnQMhO7+(eO$D|Q!0MzO,5=XO$GXQ!0MzO,5=ZO$IdQ!0MzO,5=XO$KuQ!0MzO,5=ZO$NWQ!0MzO,59uO%!]Q!0MzO,5<kO%$hQ!0MzO,5<mO%&sQ!0MzO,5<{OOQ!0Lf7+&a7+&aO%)UQ!0MxO7+&aO%)xQlO'#IfO%*VQ`O,5@cO%*_Q!fO,5@cOOQ!0Lf1G0P1G0PO%*iQ`O7+&jOOQ!0Lf7+&j7+&jO%*nQ?MtO,5:fO%[QlO7+&zO%*xQ?MtO,5:bO%+VQ?MtO,5:jO%+aQ?MtO,5:lO%+kQMhO'#IiO%+uQ`O,5@hOOQ!0Lh1G0d1G0dOOQO1G1r1G1rOOQO1G1s1G1sO%+}Q!jO,5<ZO!)[QlO,5<YOOQO-E<l-E<lOOQ!0Lf7+'Y7+'YOOOW7+'e7+'eOOOW1G1|1G1|O%,YQ`O1G1|OOQ!0Lf1G2O1G2OOOOO,59o,59oO%,_Q!dO,59oOOOO-E<`-E<`OOQ!0Lh1G/X1G/XO%,fQ!0MxO7+'kOOQ!0Lh,5?^,5?^O%-YQMhO1G2fP%-aQ`O'#IrPOQ!0Lh-E<p-E<pO%-}QMjO,5?aOOQ!0Lh-E<s-E<sO%.pQMjO,5?cOOQ!0Lh-E<u-E<uO%.zQ!dO1G2wO%/RQ!dO'#CrO%/iQMhO'#KSO$$wQlO'#JvOOQ!0Lh1G2_1G2_O%/sQ`O'#IqO%0[Q`O,5@vO%0[Q`O,5@vO%0dQ`O,5@vO%0oQ`O,5@vOOQO1G2a1G2aO%0}QMjO1G2`O$+YQ`O'#K[O!,TQMhO1G2`O%1_Q(CWO'#IsO%1lQ`O,5@wO!&zQMhO,5@wO%1tQ!dO,5@wOOQ!0Lh1G2d1G2dO%4UQ!fO'#CiO%4`Q`O,5=POOQ!0Lb,5<},5<}O%4hQpO,5<}OOQ!0Lb,5=O,5=OOCwQ`O,5<}O%4sQpO,5<}OOQ!0Lb,5=R,5=RO$+YQ`O,5=VOOQO,5?`,5?`OOQO-E<r-E<rOOQ!0Lp1G2h1G2hO#$`QpO,5<}O$$wQlO,5=PO%5RQ`O,5=OO%5^QpO,5=OO!,TQMhO'#IuO%6WQMjO1G2sO!,TQMhO'#IwO%6yQMjO1G2uO%7TQMjO1G5qO%7_QMjO1G5qOOQO,5?e,5?eOOQO-E<w-E<wOOQO1G.{1G.{O!,TQMhO1G5qO!,TQMhO1G5qO!:]QpO,59wO%[QlO,59wOOQ!0Lh,5<j,5<jO%7lQ`O1G2ZO!,TQMhO1G2bO%7qQ!0MxO7+'mOOQ!0Lf7+'m7+'mO!$wQlO7+'mO%8eQ`O,5;`OOQ!0Lb,5?g,5?gOOQ!0Lb-E<y-E<yO%8jQ!dO'#K^O#(ZQ`O7+(eO4UQ!fO7+(eO$DfQ`O7+(eO%8tQ!0MvO'#CiO%9XQ!0MvO,5=SO%9lQ`O,5=SO%9tQ`O,5=SOOQ!0Lb1G5o1G5oOOQ[7+$a7+$aO!ByQ!0LrO7+$aO!CUQpO7+$aO!$wQlO7+&aO%9yQ`O'#JQO%:bQ`O,5APOOQO1G3h1G3hO9kQ`O,5APO%:bQ`O,5APO%:jQ`O,5APOOQO,5?m,5?mOOQO-E=P-E=POOQ!0Lf7+'T7+'TO%:oQ`O7+)QO9uQ!0LrO7+)QO9kQ`O7+)QO@zQ`O7+)QO%:tQ`O7+)QOOQ[7+)Q7+)QOOQ[7+(p7+(pO%:yQ!0MvO7+(mO!&zQMhO7+(mO!E^Q`O7+(nOOQ[7+(n7+(nO!&zQMhO7+(nO%;TQ`O'#KbO%;`Q`O,5=lOOQO,5?i,5?iOOQO-E<{-E<{OOQ[7+(s7+(sO%<rQpO'#HZOOQ[1G3`1G3`O!&zQMhO1G3`O%[QlO1G3`O%<yQ`O1G3`O%=UQMhO1G3`O9uQ!0LrO1G3bO$%dQ`O1G3bO9`Q`O1G3bO!CUQpO1G3bO!C^QMhO1G3bO%=dQ`O'#JPO%=xQ`O,5@}O%>QQpO,5@}OOQ!0Lb1G3c1G3cOOQ[7+$V7+$VO@zQ`O7+$VO9uQ!0LrO7+$VO%>]Q`O7+$VO%[QlO1G6lO%[QlO1G6mO%>bQ!0LrO1G6lO%>lQlO1G3kO%>sQ`O1G3kO%>xQlO1G3kOOQ[7+)T7+)TO9uQ!0LrO7+)_O`QlO7+)aOOQ['#Kh'#KhOOQ['#JS'#JSO%?PQlO,5>`OOQ[,5>`,5>`O%[QlO'#HuO%?^Q`O'#HwOOQ[,5>f,5>fO9eQ`O,5>fOOQ[,5>h,5>hOOQ[7+)j7+)jOOQ[7+)p7+)pOOQ[7+)t7+)tOOQ[7+)v7+)vO%?cQpO1G5|O%?}Q?MtO1G0zO%@XQ`O1G0zOOQO1G/s1G/sO%@dQ?MtO1G/sO?YQ`O1G/sO!)[QlO'#DmOOQO,5?P,5?POOQO-E<c-E<cOOQO,5?V,5?VOOQO-E<i-E<iO!CUQpO1G/sOOQO-E<e-E<eOOQ!0Ln1G0]1G0]OOQ!0Lf7+%u7+%uO#(ZQ`O7+%uOOQ!0Lf7+&`7+&`O?YQ`O7+&`O!CUQpO7+&`OOQO7+%x7+%xO$AlQ!0MxO7+&XOOQO7+&X7+&XO%[QlO7+&XO%@nQ!0LrO7+&XO!ByQ!0LrO7+%xO!CUQpO7+%xO%@yQ!0LrO7+&XO%AXQ!0MxO7++rO%[QlO7++rO%AiQ`O7++qO%AiQ`O7++qOOQO1G4s1G4sO9eQ`O1G4sO%AqQ`O1G4sOOQS7+%}7+%}O#(ZQ`O<<LPO4UQ!fO<<LPO%BPQ`O<<LPOOQ[<<LP<<LPO!&zQMhO<<LPO%[QlO<<LPO%BXQ`O<<LPO%BdQ!0MzO,5?aO%DoQ!0MzO,5?cO%FzQ!0MzO1G2`O%I]Q!0MzO1G2sO%KhQ!0MzO1G2uO%MsQ!fO,5?QO%[QlO,5?QOOQO-E<d-E<dO%M}Q`O1G5}OOQ!0Lf<<JU<<JUO%NVQ?MtO1G0uO&!^Q?MtO1G1PO&!eQ?MtO1G1PO&$fQ?MtO1G1PO&$mQ?MtO1G1PO&&nQ?MtO1G1PO&(oQ?MtO1G1PO&(vQ?MtO1G1PO&(}Q?MtO1G1PO&+OQ?MtO1G1PO&+VQ?MtO1G1PO&+^Q!0MxO<<JfO&-UQ?MtO1G1PO&.RQ?MvO1G1PO&/UQ?MvO'#JlO&1[Q?MtO1G1cO&1iQ?MtO1G0UO&1sQMjO,5?TOOQO-E<g-E<gO!)[QlO'#FqOOQO'#KZ'#KZOOQO1G1u1G1uO&1}Q`O1G1tO&2SQ?MtO,5?[OOOW7+'h7+'hOOOO1G/Z1G/ZO&2^Q!dO1G4xOOQ!0Lh7+(Q7+(QP!&zQMhO,5?^O!,TQMhO7+(cO&2eQ`O,5?]O9eQ`O,5?]O$+YQ`O,5?]OOQO-E<o-E<oO&2sQ`O1G6bO&2sQ`O1G6bO&2{Q`O1G6bO&3WQMjO7+'zO&3hQ!dO,5?_O&3rQ`O,5?_O!&zQMhO,5?_OOQO-E<q-E<qO&3wQ!dO1G6cO&4RQ`O1G6cO&4ZQ`O1G2kO!&zQMhO1G2kOOQ!0Lb1G2i1G2iOOQ!0Lb1G2j1G2jO%4hQpO1G2iO!CUQpO1G2iOCwQ`O1G2iOOQ!0Lb1G2q1G2qO&4`QpO1G2iO&4nQ`O1G2kO$+YQ`O1G2jOCwQ`O1G2jO$$wQlO1G2kO&4vQ`O1G2jO&5jQMjO,5?aOOQ!0Lh-E<t-E<tO&6]QMjO,5?cOOQ!0Lh-E<v-E<vO!,TQMhO7++]O&6gQMjO7++]O&6qQMjO7++]OOQ!0Lh1G/c1G/cO&7OQ`O1G/cOOQ!0Lh7+'u7+'uO&7TQMjO7+'|O&7eQ!0MxO<<KXOOQ!0Lf<<KX<<KXO&8XQ`O1G0zO!&zQMhO'#IzO&8^Q`O,5@xO&:`Q!fO<<LPO!&zQMhO1G2nO&:gQ!0LrO1G2nOOQ[<<G{<<G{O!ByQ!0LrO<<G{O&:xQ!0MxO<<I{OOQ!0Lf<<I{<<I{OOQO,5?l,5?lO&;lQ`O,5?lO&;qQ`O,5?lOOQO-E=O-E=OO&<PQ`O1G6kO&<PQ`O1G6kO9kQ`O1G6kO@zQ`O<<LlOOQ[<<Ll<<LlO&<XQ`O<<LlO9uQ!0LrO<<LlO9kQ`O<<LlOOQ[<<LX<<LXO%:yQ!0MvO<<LXOOQ[<<LY<<LYO!E^Q`O<<LYO&<^QpO'#I|O&<iQ`O,5@|O!)[QlO,5@|OOQ[1G3W1G3WOOQO'#JO'#JOO9uQ!0LrO'#JOO&<qQpO,5=uOOQ[,5=u,5=uO&<xQpO'#EgO&=PQpO'#GeO&=UQ`O7+(zO&=ZQ`O7+(zOOQ[7+(z7+(zO!&zQMhO7+(zO%[QlO7+(zO&=cQ`O7+(zOOQ[7+(|7+(|O9uQ!0LrO7+(|O$%dQ`O7+(|O9`Q`O7+(|O!CUQpO7+(|O&=nQ`O,5?kOOQO-E<}-E<}OOQO'#H^'#H^O&=yQ`O1G6iO9uQ!0LrO<<GqOOQ[<<Gq<<GqO@zQ`O<<GqO&>RQ`O7+,WO&>WQ`O7+,XO%[QlO7+,WO%[QlO7+,XOOQ[7+)V7+)VO&>]Q`O7+)VO&>bQlO7+)VO&>iQ`O7+)VOOQ[<<Ly<<LyOOQ[<<L{<<L{OOQ[-E=Q-E=QOOQ[1G3z1G3zO&>nQ`O,5>aOOQ[,5>c,5>cO&>sQ`O1G4QO9eQ`O7+&fO!)[QlO7+&fOOQO7+%_7+%_O&>xQ?MtO1G6ZO?YQ`O7+%_OOQ!0Lf<<Ia<<IaOOQ!0Lf<<Iz<<IzO?YQ`O<<IzOOQO<<Is<<IsO$AlQ!0MxO<<IsO%[QlO<<IsOOQO<<Id<<IdO!ByQ!0LrO<<IdO&?SQ!0LrO<<IsO&?_Q!0MxO<= ^O&?oQ`O<= ]OOQO7+*_7+*_O9eQ`O7+*_OOQ[ANAkANAkO&?wQ!fOANAkO!&zQMhOANAkO#(ZQ`OANAkO4UQ!fOANAkO&@OQ`OANAkO%[QlOANAkO&@WQ!0MzO7+'zO&BiQ!0MzO,5?aO&DtQ!0MzO,5?cO&GPQ!0MzO7+'|O&IbQ!fO1G4lO&IlQ?MtO7+&aO&KpQ?MvO,5=XO&MwQ?MvO,5=ZO&NXQ?MvO,5=XO&NiQ?MvO,5=ZO&NyQ?MvO,59uO'#PQ?MvO,5<kO'%SQ?MvO,5<mO''hQ?MvO,5<{O')^Q?MtO7+'kO')kQ?MtO7+'mO')xQ`O,5<]OOQO7+'`7+'`OOQ!0Lh7+*d7+*dO')}QMjO<<K}OOQO1G4w1G4wO'*UQ`O1G4wO'*aQ`O1G4wO'*oQ`O7++|O'*oQ`O7++|O!&zQMhO1G4yO'*wQ!dO1G4yO'+RQ`O7++}O'+ZQ`O7+(VO'+fQ!dO7+(VOOQ!0Lb7+(T7+(TOOQ!0Lb7+(U7+(UO!CUQpO7+(TOCwQ`O7+(TO'+pQ`O7+(VO!&zQMhO7+(VO$+YQ`O7+(UO'+uQ`O7+(VOCwQ`O7+(UO'+}QMjO<<NwO!,TQMhO<<NwOOQ!0Lh7+$}7+$}O',XQ!dO,5?fOOQO-E<x-E<xO',cQ!0MvO7+(YO!&zQMhO7+(YOOQ[AN=gAN=gO9kQ`O1G5WOOQO1G5W1G5WO',sQ`O1G5WO',xQ`O7+,VO',xQ`O7+,VO9uQ!0LrOANBWO@zQ`OANBWOOQ[ANBWANBWO'-QQ`OANBWOOQ[ANAsANAsOOQ[ANAtANAtO'-VQ`O,5?hOOQO-E<z-E<zO'-bQ?MtO1G6hOOQO,5?j,5?jOOQO-E<|-E<|OOQ[1G3a1G3aO'-lQ`O,5=POOQ[<<Lf<<LfO!&zQMhO<<LfO&=UQ`O<<LfO'-qQ`O<<LfO%[QlO<<LfOOQ[<<Lh<<LhO9uQ!0LrO<<LhO$%dQ`O<<LhO9`Q`O<<LhO'-yQpO1G5VO'.UQ`O7+,TOOQ[AN=]AN=]O9uQ!0LrOAN=]OOQ[<= r<= rOOQ[<= s<= sO'.^Q`O<= rO'.cQ`O<= sOOQ[<<Lq<<LqO'.hQ`O<<LqO'.mQlO<<LqOOQ[1G3{1G3{O?YQ`O7+)lO'.tQ`O<<JQO'/PQ?MtO<<JQOOQO<<Hy<<HyOOQ!0LfAN?fAN?fOOQOAN?_AN?_O$AlQ!0MxOAN?_OOQOAN?OAN?OO%[QlOAN?_OOQO<<My<<MyOOQ[G27VG27VO!&zQMhOG27VO#(ZQ`OG27VO'/ZQ!fOG27VO4UQ!fOG27VO'/bQ`OG27VO'/jQ?MtO<<JfO'/wQ?MvO1G2`O'1mQ?MvO,5?aO'3pQ?MvO,5?cO'5sQ?MvO1G2sO'7vQ?MvO1G2uO'9yQ?MtO<<KXO':WQ?MtO<<I{OOQO1G1w1G1wO!,TQMhOANAiOOQO7+*c7+*cO':eQ`O7+*cO':pQ`O<= hO':xQ!dO7+*eOOQ!0Lb<<Kq<<KqO$+YQ`O<<KqOCwQ`O<<KqO';SQ`O<<KqO!&zQMhO<<KqOOQ!0Lb<<Ko<<KoO!CUQpO<<KoO';_Q!dO<<KqOOQ!0Lb<<Kp<<KpO';iQ`O<<KqO!&zQMhO<<KqO$+YQ`O<<KpO';nQMjOANDcO';xQ!0MvO<<KtOOQO7+*r7+*rO9kQ`O7+*rO'<YQ`O<= qOOQ[G27rG27rO9uQ!0LrOG27rO@zQ`OG27rO!)[QlO1G5SO'<bQ`O7+,SO'<jQ`O1G2kO&=UQ`OANBQOOQ[ANBQANBQO!&zQMhOANBQO'<oQ`OANBQOOQ[ANBSANBSO9uQ!0LrOANBSO$%dQ`OANBSOOQO'#H_'#H_OOQO7+*q7+*qOOQ[G22wG22wOOQ[ANE^ANE^OOQ[ANE_ANE_OOQ[ANB]ANB]O'<wQ`OANB]OOQ[<<MW<<MWO!)[QlOAN?lOOQOG24yG24yO$AlQ!0MxOG24yO#(ZQ`OLD,qOOQ[LD,qLD,qO!&zQMhOLD,qO'<|Q!fOLD,qO'=TQ?MvO7+'zO'>yQ?MvO,5?aO'@|Q?MvO,5?cO'CPQ?MvO7+'|O'DuQMjOG27TOOQO<<M}<<M}OOQ!0LbANA]ANA]O$+YQ`OANA]OCwQ`OANA]O'EVQ!dOANA]OOQ!0LbANAZANAZO'E^Q`OANA]O!&zQMhOANA]O'EiQ!dOANA]OOQ!0LbANA[ANA[OOQO<<N^<<N^OOQ[LD-^LD-^O9uQ!0LrOLD-^O'EsQ?MtO7+*nOOQO'#Gf'#GfOOQ[G27lG27lO&=UQ`OG27lO!&zQMhOG27lOOQ[G27nG27nO9uQ!0LrOG27nOOQ[G27wG27wO'E}Q?MtOG25WOOQOLD*eLD*eOOQ[!$(!]!$(!]O#(ZQ`O!$(!]O!&zQMhO!$(!]O'FXQ!0MzOG27TOOQ!0LbG26wG26wO$+YQ`OG26wO'HjQ`OG26wOCwQ`OG26wO'HuQ!dOG26wO!&zQMhOG26wOOQ[!$(!x!$(!xOOQ[LD-WLD-WO&=UQ`OLD-WOOQ[LD-YLD-YOOQ[!)9Ew!)9EwO#(ZQ`O!)9EwOOQ!0LbLD,cLD,cO$+YQ`OLD,cOCwQ`OLD,cO'H|Q`OLD,cO'IXQ!dOLD,cOOQ[!$(!r!$(!rOOQ[!.K;c!.K;cO'I`Q?MvOG27TOOQ!0Lb!$( }!$( }O$+YQ`O!$( }OCwQ`O!$( }O'KUQ`O!$( }OOQ!0Lb!)9Ei!)9EiO$+YQ`O!)9EiOCwQ`O!)9EiOOQ!0Lb!.K;T!.K;TO$+YQ`O!.K;TOOQ!0Lb!4/0o!4/0oO!)[QlO'#DzO1PQ`O'#EXO'KaQ!fO'#JrO'KhQ!L^O'#DvO'KoQlO'#EOO'KvQ!fO'#CiO'N^Q!fO'#CiO!)[QlO'#EQO'NnQlO,5;ZO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO,5;eO!)[QlO'#IpO(!qQ`O,5<iO!)[QlO,5;eO(!yQMhO,5;eO($dQMhO,5;eO!)[QlO,5;wO!&zQMhO'#GmO(!yQMhO'#GmO!&zQMhO'#GoO(!yQMhO'#GoO1SQ`O'#DZO1SQ`O'#DZO!&zQMhO'#GPO(!yQMhO'#GPO!&zQMhO'#GRO(!yQMhO'#GRO!&zQMhO'#GaO(!yQMhO'#GaO!)[QlO,5:jO($kQpO'#D_O($uQpO'#JvO!)[QlO,5@oO'NnQlO1G0uO(%PQ?MtO'#CiO!)[QlO1G2PO!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO(%ZQ!dO'#CrO!&zQMhO,5<tO(!yQMhO,5<tO'NnQlO1G2RO!)[QlO7+&zO!&zQMhO1G2`O(!yQMhO1G2`O!&zQMhO'#IuO(!yQMhO'#IuO!&zQMhO'#IwO(!yQMhO'#IwO!&zQMhO1G2bO(!yQMhO1G2bO'NnQlO7+'mO'NnQlO7+&aO!&zQMhOANAiO(!yQMhOANAiO(%nQ`O'#EoO(%sQ`O'#EoO(%{Q`O'#F]O(&QQ`O'#EyO(&VQ`O'#KTO(&bQ`O'#KRO(&mQ`O,5;ZO(&rQMjO,5<eO(&yQ`O'#GYO('OQ`O'#GYO('TQ`O,5<eO(']Q`O,5<gO('eQ`O,5;ZO('mQ?MtO1G1`O('tQ`O,5<tO('yQ`O,5<tO((OQ`O,5<vO((TQ`O,5<vO((YQ`O1G2RO((_Q`O1G0uO((dQMjO<<K}O((kQMjO<<K}O((rQMhO'#F|O9`Q`O'#F{OAuQ`O'#EnO!)[QlO,5;tO!3oQ`O'#GYO!3oQ`O'#GYO!3oQ`O'#G[O!3oQ`O'#G[O!,TQMhO7+(cO!,TQMhO7+(cO%.zQ!dO1G2wO%.zQ!dO1G2wO!&zQMhO,5=]O!&zQMhO,5=]",stateData:"()x~O'|OS'}OSTOS(ORQ~OPYOQYOSfOY!VOaqOdzOeyOl!POpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!uwO!xxO!|]O$W|O$niO%h}O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO&W!WO&^!XO&`!YO&b!ZO&d![O&g!]O&m!^O&s!_O&u!`O&w!aO&y!bO&{!cO(TSO(VTO(YUO(aVO(o[O~OWtO~P`OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa!wOs!nO!S!oO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!xO#W!pO#X!pO#[!zO#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O(O!{O~OP]XR]X[]Xa]Xj]Xr]X!Q]X!S]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X'z]X(a]X(r]X(y]X(z]X~O!g%RX~P(qO_!}O(V#PO(W!}O(X#PO~O_#QO(X#PO(Y#PO(Z#QO~Ox#SO!U#TO(b#TO(c#VO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T<ZO(VTO(YUO(aVO(o[O~O![#ZO!]#WO!Y(hP!Y(vP~P+}O!^#cO~P`OPYOQYOSfOd!jOe!iOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(VTO(YUO(aVO(o[O~Op#mO![#iO!|]O#i#lO#j#iO(T<[O!k(sP~P.iO!l#oO(T#nO~O!x#sO!|]O%h#tO~O#k#uO~O!g#vO#k#uO~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!]$_O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa(fX'z(fX'w(fX!k(fX!Y(fX!_(fX%i(fX!g(fX~P1qO#S$dO#`$eO$Q$eOP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX!_(gX%i(gX~Oa(gX'z(gX'w(gX!Y(gX!k(gXv(gX!g(gX~P4UO#`$eO~O$]$hO$_$gO$f$mO~OSfO!_$nO$i$oO$k$qO~Oh%VOj%dOk%dOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T$sO(VTO(YUO(a$uO(y$}O(z%POg(^P~Ol%[O~P7eO!l%eO~O!S%hO!_%iO(T%gO~O!g%mO~Oa%nO'z%nO~O!Q%rO~P%[O(U!lO~P%[O%n%vO~P%[Oh%VO!l%eO(T%gO(U!lO~Oe%}O!l%eO(T%gO~Oj$RO~O!_&PO(T%gO(U!lO(VTO(YUO`)WP~O!Q&SO!l&RO%j&VO&T&WO~P;SO!x#sO~O%s&YO!S)SX!_)SX(T)SX~O(T&ZO~Ol!PO!u&`O%j!QO%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO~Od&eOe&dO!x&bO%h&cO%{&aO~P<bOd&hOeyOl!PO!_&gO!u&`O!xxO!|]O%h}O%l!OO%m!OO%n!OO%q!RO%s!SO%v!TO%w!TO%y!UO~Ob&kO#`&nO%j&iO(U!lO~P=gO!l&oO!u&sO~O!l#oO~O!_XO~Oa%nO'x&{O'z%nO~Oa%nO'x'OO'z%nO~Oa%nO'x'QO'z%nO~O'w]X!Y]Xv]X!k]X&[]X!_]X%i]X!g]X~P(qO!b'_O!c'WO!d'WO(U!lO(VTO(YUO~Os'UO!S'TO!['XO(e'SO!^(iP!^(xP~P@nOn'bO!_'`O(T%gO~Oe'gO!l%eO(T%gO~O!Q&SO!l&RO~Os!nO!S!oO!|<VO#T!pO#U!pO#W!pO#X!pO(U!lO(VTO(YUO(e!mO(o!sO~O!b'mO!c'lO!d'lO#V!pO#['nO#]'nO~PBYOa%nOh%VO!g#vO!l%eO'z%nO(r'pO~O!p'tO#`'rO~PChOs!nO!S!oO(VTO(YUO(e!mO(o!sO~O!_XOs(mX!S(mX!b(mX!c(mX!d(mX!|(mX#T(mX#U(mX#V(mX#W(mX#X(mX#[(mX#](mX(U(mX(V(mX(Y(mX(e(mX(o(mX~O!c'lO!d'lO(U!lO~PDWO(P'xO(Q'xO(R'zO~O_!}O(V'|O(W!}O(X'|O~O_#QO(X'|O(Y'|O(Z#QO~Ov(OO~P%[Ox#SO!U#TO(b#TO(c(RO~O![(TO!Y'WX!Y'^X!]'WX!]'^X~P+}O!](VO!Y(hX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!](VO!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~O!Y(hX~PHRO!Y([O~O!Y(uX!](uX!g(uX!k(uX(r(uX~O#`(uX#k#dX!^(uX~PJUO#`(]O!Y(wX!](wX~O!](^O!Y(vX~O!Y(aO~O#`$eO~PJUO!^(bO~P`OR#zO!Q#yO!S#{O!l#xO(aVOP!na[!naj!nar!na!]!na!p!na#R!na#n!na#o!na#p!na#q!na#r!na#s!na#t!na#u!na#v!na#x!na#z!na#{!na(r!na(y!na(z!na~Oa!na'z!na'w!na!Y!na!k!nav!na!_!na%i!na!g!na~PKlO!k(cO~O!g#vO#`(dO(r'pO!](tXa(tX'z(tX~O!k(tX~PNXO!S%hO!_%iO!|]O#i(iO#j(hO(T%gO~O!](jO!k(sX~O!k(lO~O!S%hO!_%iO#j(hO(T%gO~OP(gXR(gX[(gXj(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~O!g#vO!k(gX~P! uOR(nO!Q(mO!l#xO#S$dO!|!{a!S!{a~O!x!{a%h!{a!_!{a#i!{a#j!{a(T!{a~P!#vO!x(rO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_XO!iuO!lZO!oYO!pYO!qYO!svO!u!gO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~O#k(xO~O![(zO!k(kP~P%[O(e(|O(o[O~O!S)OO!l#xO(e(|O(o[O~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]$_Oa$qa'z$qa'w$qa!k$qa!Y$qa!_$qa%i$qa!g$qa~Ol)dO~P!&zOh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O%]O!S${O!_$|O!i%bO!l$xO#j%cO$W%`O$t%^O$v%_O$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Og(pP~P!,TO!Q)iO!g)hO!_$^X$Z$^X$]$^X$_$^X$f$^X~O!g)hO!_({X$Z({X$]({X$_({X$f({X~O!Q)iO~P!.^O!Q)iO!_({X$Z({X$]({X$_({X$f({X~O!_)kO$Z)oO$])jO$_)jO$f)pO~O![)sO~P!)[O$]$hO$_$gO$f)wO~On$zX!Q$zX#S$zX'y$zX(y$zX(z$zX~OgmXg$zXnmX!]mX#`mX~P!0SOx)yO(b)zO(c)|O~On*VO!Q*OO'y*PO(y$}O(z%PO~Og)}O~P!1WOg*WO~Oh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S*YO!_*ZO!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op*`O![*^O(T*XO!k)OP~P!1uO#k*aO~O!l*bO~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(T*dO(VTO(YUO(a$uO(y$}O(z%PO~O![*gO!Y)PP~P!3tOr*sOs!nO!S*iO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO(e!mO~O!^*pO~P!5iO#S$dOn(`X!Q(`X'y(`X(y(`X(z(`X!](`X#`(`X~Og(`X$O(`X~P!6kOn*xO#`*wOg(_X!](_X~O!]*yOg(^X~Oj%dOk%dOl%dO(T&ZOg(^P~Os*|O~Og)}O(T&ZO~O!l+SO~O(T(vO~Op+WO!S%hO![#iO!_%iO!|]O#i#lO#j#iO(T%gO!k(sP~O!g#vO#k+XO~O!S%hO![+ZO!](^O!_%iO(T%gO!Y(vP~Os'[O!S+]O![+[O(VTO(YUO(e(|O~O!^(xP~P!9|O!]+^Oa)TX'z)TX~OP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO#z$WO#{$XO(aVO(r$YO(y#|O(z#}O~Oa!ja!]!ja'z!ja'w!ja!Y!ja!k!jav!ja!_!ja%i!ja!g!ja~P!:tOR#zO!Q#yO!S#{O!l#xO(aVOP!ra[!raj!rar!ra!]!ra!p!ra#R!ra#n!ra#o!ra#p!ra#q!ra#r!ra#s!ra#t!ra#u!ra#v!ra#x!ra#z!ra#{!ra(r!ra(y!ra(z!ra~Oa!ra'z!ra'w!ra!Y!ra!k!rav!ra!_!ra%i!ra!g!ra~P!=[OR#zO!Q#yO!S#{O!l#xO(aVOP!ta[!taj!tar!ta!]!ta!p!ta#R!ta#n!ta#o!ta#p!ta#q!ta#r!ta#s!ta#t!ta#u!ta#v!ta#x!ta#z!ta#{!ta(r!ta(y!ta(z!ta~Oa!ta'z!ta'w!ta!Y!ta!k!tav!ta!_!ta%i!ta!g!ta~P!?rOh%VOn+gO!_'`O%i+fO~O!g+iOa(]X!_(]X'z(]X!](]X~Oa%nO!_XO'z%nO~Oh%VO!l%eO~Oh%VO!l%eO(T%gO~O!g#vO#k(xO~Ob+tO%j+uO(T+qO(VTO(YUO!^)XP~O!]+vO`)WX~O[+zO~O`+{O~O!_&PO(T%gO(U!lO`)WP~O%j,OO~P;SOh%VO#`,SO~Oh%VOn,VO!_$|O~O!_,XO~O!Q,ZO!_XO~O%n%vO~O!x,`O~Oe,eO~Ob,fO(T#nO(VTO(YUO!^)VP~Oe%}O~O%j!QO(T&ZO~P=gO[,kO`,jO~OPYOQYOSfOdzOeyOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!iuO!lZO!oYO!pYO!qYO!svO!xxO!|]O$niO%h}O(VTO(YUO(aVO(o[O~O!_!eO!u!gO$W!kO(T!dO~P!FyO`,jOa%nO'z%nO~OPYOQYOSfOd!jOe!iOpkOrYOskOtkOzkO|YO!OYO!SWO!WkO!XkO!_!eO!iuO!lZO!oYO!pYO!qYO!svO!x!hO$W!kO$niO(T!dO(VTO(YUO(aVO(o[O~Oa,pOl!OO!uwO%l!OO%m!OO%n!OO~P!IcO!l&oO~O&^,vO~O!_,xO~O&o,zO&q,{OP&laQ&laS&laY&laa&lad&lae&lal&lap&lar&las&lat&laz&la|&la!O&la!S&la!W&la!X&la!_&la!i&la!l&la!o&la!p&la!q&la!s&la!u&la!x&la!|&la$W&la$n&la%h&la%j&la%l&la%m&la%n&la%q&la%s&la%v&la%w&la%y&la&W&la&^&la&`&la&b&la&d&la&g&la&m&la&s&la&u&la&w&la&y&la&{&la'w&la(T&la(V&la(Y&la(a&la(o&la!^&la&e&lab&la&j&la~O(T-QO~Oh!eX!]!RX!^!RX!g!RX!g!eX!l!eX#`!RX~O!]!eX!^!eX~P#!iO!g-VO#`-UOh(jX!]#hX!^#hX!g(jX!l(jX~O!](jX!^(jX~P##[Oh%VO!g-XO!l%eO!]!aX!^!aX~Os!nO!S!oO(VTO(YUO(e!mO~OP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_!eO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(VTO(YUO(aVO(o[O~O(T=QO~P#$qO!]-]O!^(iX~O!^-_O~O!g-VO#`-UO!]#hX!^#hX~O!]-`O!^(xX~O!^-bO~O!c-cO!d-cO(U!lO~P#$`O!^-fO~P'_On-iO!_'`O~O!Y-nO~Os!{a!b!{a!c!{a!d!{a#T!{a#U!{a#V!{a#W!{a#X!{a#[!{a#]!{a(U!{a(V!{a(Y!{a(e!{a(o!{a~P!#vO!p-sO#`-qO~PChO!c-uO!d-uO(U!lO~PDWOa%nO#`-qO'z%nO~Oa%nO!g#vO#`-qO'z%nO~Oa%nO!g#vO!p-sO#`-qO'z%nO(r'pO~O(P'xO(Q'xO(R-zO~Ov-{O~O!Y'Wa!]'Wa~P!:tO![.PO!Y'WX!]'WX~P%[O!](VO!Y(ha~O!Y(ha~PHRO!](^O!Y(va~O!S%hO![.TO!_%iO(T%gO!Y'^X!]'^X~O#`.VO!](ta!k(taa(ta'z(ta~O!g#vO~P#,wO!](jO!k(sa~O!S%hO!_%iO#j.ZO(T%gO~Op.`O!S%hO![.]O!_%iO!|]O#i._O#j.]O(T%gO!]'aX!k'aX~OR.dO!l#xO~Oh%VOn.gO!_'`O%i.fO~Oa#ci!]#ci'z#ci'w#ci!Y#ci!k#civ#ci!_#ci%i#ci!g#ci~P!:tOn>]O!Q*OO'y*PO(y$}O(z%PO~O#k#_aa#_a#`#_a'z#_a!]#_a!k#_a!_#_a!Y#_a~P#/sO#k(`XP(`XR(`X[(`Xa(`Xj(`Xr(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X'z(`X(a(`X(r(`X!k(`X!Y(`X'w(`Xv(`X!_(`X%i(`X!g(`X~P!6kO!].tO!k(kX~P!:tO!k.wO~O!Y.yO~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mia#mij#mir#mi!]#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#n#mi~P#3cO#n$OO~P#3cOP$[OR#zOr$aO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO[#mia#mij#mi!]#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#r#mi~P#6QO#r$QO~P#6QOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO(aVOa#mi!]#mi#x#mi#z#mi#{#mi'z#mi(r#mi(y#mi(z#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#v#mi~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO(aVO(z#}Oa#mi!]#mi#z#mi#{#mi'z#mi(r#mi(y#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#x$UO~P#;VO#x#mi~P#;VO#v$SO~P#8oOP$[OR#zO[$cOj$ROr$aO!Q#yO!S#{O!l#xO!p$[O#R$RO#n$OO#o$PO#p$PO#q$PO#r$QO#s$RO#t$RO#u$bO#v$SO#x$UO(aVO(y#|O(z#}Oa#mi!]#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~O#z#mi~P#={O#z$WO~P#={OP]XR]X[]Xj]Xr]X!Q]X!S]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X!]]X!^]X~O$O]X~P#@jOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO#z<gO#{<hO(aVO(r$YO(y#|O(z#}O~O$O.{O~P#BwO#S$dO#`<nO$Q<nO$O(gX!^(gX~P! uOa'da!]'da'z'da'w'da!k'da!Y'dav'da!_'da%i'da!g'da~P!:tO[#mia#mij#mir#mi!]#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi'z#mi(r#mi'w#mi!Y#mi!k#miv#mi!_#mi%i#mi!g#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n$OO#o$PO#p$PO#q$PO(aVO(y#mi(z#mi~P#EyOn>]O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P#EyO!]/POg(pX~P!1WOg/RO~Oa$Pi!]$Pi'z$Pi'w$Pi!Y$Pi!k$Piv$Pi!_$Pi%i$Pi!g$Pi~P!:tO$]/SO$_/SO~O$]/TO$_/TO~O!g)hO#`/UO!_$cX$Z$cX$]$cX$_$cX$f$cX~O![/VO~O!_)kO$Z/XO$])jO$_)jO$f/YO~O!]<iO!^(fX~P#BwO!^/ZO~O!g)hO$f({X~O$f/]O~Ov/^O~P!&zOx)yO(b)zO(c/aO~O!S/dO~O(y$}On%aa!Q%aa'y%aa(z%aa!]%aa#`%aa~Og%aa$O%aa~P#L{O(z%POn%ca!Q%ca'y%ca(y%ca!]%ca#`%ca~Og%ca$O%ca~P#MnO!]fX!gfX!kfX!k$zX(rfX~P!0SOp%WO![/mO!](^O(T/lO!Y(vP!Y)PP~P!1uOr*sO!b*qO!c*kO!d*kO!l*bO#[*rO%`*mO(U!lO(VTO(YUO~Os<}O!S/nO![+[O!^*pO(e<|O!^(xP~P$ [O!k/oO~P#/sO!]/pO!g#vO(r'pO!k)OX~O!k/uO~OnoX!QoX'yoX(yoX(zoX~O!g#vO!koX~P$#OOp/wO!S%hO![*^O!_%iO(T%gO!k)OP~O#k/xO~O!Y$zX!]$zX!g%RX~P!0SO!]/yO!Y)PX~P#/sO!g/{O~O!Y/}O~OpkO(T0OO~P.iOh%VOr0TO!g#vO!l%eO(r'pO~O!g+iO~Oa%nO!]0XO'z%nO~O!^0ZO~P!5iO!c0[O!d0[O(U!lO~P#$`Os!nO!S0]O(VTO(YUO(e!mO~O#[0_O~Og%aa!]%aa#`%aa$O%aa~P!1WOg%ca!]%ca#`%ca$O%ca~P!1WOj%dOk%dOl%dO(T&ZOg'mX!]'mX~O!]*yOg(^a~Og0hO~On0jO#`0iOg(_a!](_a~OR0kO!Q0kO!S0lO#S$dOn}a'y}a(y}a(z}a!]}a#`}a~Og}a$O}a~P$(cO!Q*OO'y*POn$sa(y$sa(z$sa!]$sa#`$sa~Og$sa$O$sa~P$)_O!Q*OO'y*POn$ua(y$ua(z$ua!]$ua#`$ua~Og$ua$O$ua~P$*QO#k0oO~Og%Ta!]%Ta#`%Ta$O%Ta~P!1WO!g#vO~O#k0rO~O!]+^Oa)Ta'z)Ta~OR#zO!Q#yO!S#{O!l#xO(aVOP!ri[!rij!rir!ri!]!ri!p!ri#R!ri#n!ri#o!ri#p!ri#q!ri#r!ri#s!ri#t!ri#u!ri#v!ri#x!ri#z!ri#{!ri(r!ri(y!ri(z!ri~Oa!ri'z!ri'w!ri!Y!ri!k!riv!ri!_!ri%i!ri!g!ri~P$+oOh%VOr%XOs$tOt$tOz%YO|%ZO!O<sO!S${O!_$|O!i>VO!l$xO#j<yO$W%`O$t<uO$v<wO$y%aO(VTO(YUO(a$uO(y$}O(z%PO~Op0{O%]0|O(T0zO~P$.VO!g+iOa(]a!_(]a'z(]a!](]a~O#k1SO~O[]X!]fX!^fX~O!]1TO!^)XX~O!^1VO~O[1WO~Ob1YO(T+qO(VTO(YUO~O!_&PO(T%gO`'uX!]'uX~O!]+vO`)Wa~O!k1]O~P!:tO[1`O~O`1aO~O#`1fO~On1iO!_$|O~O(e(|O!^)UP~Oh%VOn1rO!_1oO%i1qO~O[1|O!]1zO!^)VX~O!^1}O~O`2POa%nO'z%nO~O(T#nO(VTO(YUO~O#S$dO#`$eO$Q$eOP(gXR(gX[(gXr(gX!Q(gX!S(gX!](gX!l(gX!p(gX#R(gX#n(gX#o(gX#p(gX#q(gX#r(gX#s(gX#t(gX#u(gX#v(gX#x(gX#z(gX#{(gX(a(gX(r(gX(y(gX(z(gX~Oj2SO&[2TOa(gX~P$3pOj2SO#`$eO&[2TO~Oa2VO~P%[Oa2XO~O&e2[OP&ciQ&ciS&ciY&cia&cid&cie&cil&cip&cir&cis&cit&ciz&ci|&ci!O&ci!S&ci!W&ci!X&ci!_&ci!i&ci!l&ci!o&ci!p&ci!q&ci!s&ci!u&ci!x&ci!|&ci$W&ci$n&ci%h&ci%j&ci%l&ci%m&ci%n&ci%q&ci%s&ci%v&ci%w&ci%y&ci&W&ci&^&ci&`&ci&b&ci&d&ci&g&ci&m&ci&s&ci&u&ci&w&ci&y&ci&{&ci'w&ci(T&ci(V&ci(Y&ci(a&ci(o&ci!^&cib&ci&j&ci~Ob2bO!^2`O&j2aO~P`O!_XO!l2dO~O&q,{OP&liQ&liS&liY&lia&lid&lie&lil&lip&lir&lis&lit&liz&li|&li!O&li!S&li!W&li!X&li!_&li!i&li!l&li!o&li!p&li!q&li!s&li!u&li!x&li!|&li$W&li$n&li%h&li%j&li%l&li%m&li%n&li%q&li%s&li%v&li%w&li%y&li&W&li&^&li&`&li&b&li&d&li&g&li&m&li&s&li&u&li&w&li&y&li&{&li'w&li(T&li(V&li(Y&li(a&li(o&li!^&li&e&lib&li&j&li~O!Y2jO~O!]!aa!^!aa~P#BwOs!nO!S!oO![2pO(e!mO!]'XX!^'XX~P@nO!]-]O!^(ia~O!]'_X!^'_X~P!9|O!]-`O!^(xa~O!^2wO~P'_Oa%nO#`3QO'z%nO~Oa%nO!g#vO#`3QO'z%nO~Oa%nO!g#vO!p3UO#`3QO'z%nO(r'pO~Oa%nO'z%nO~P!:tO!]$_Ov$qa~O!Y'Wi!]'Wi~P!:tO!](VO!Y(hi~O!](^O!Y(vi~O!Y(wi!](wi~P!:tO!](ti!k(tia(ti'z(ti~P!:tO#`3WO!](ti!k(tia(ti'z(ti~O!](jO!k(si~O!S%hO!_%iO!|]O#i3]O#j3[O(T%gO~O!S%hO!_%iO#j3[O(T%gO~On3dO!_'`O%i3cO~Oh%VOn3dO!_'`O%i3cO~O#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aav%aa!_%aa%i%aa!g%aa~P#L{O#k%caP%caR%ca[%caa%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%cav%ca!_%ca%i%ca!g%ca~P#MnO#k%aaP%aaR%aa[%aaa%aaj%aar%aa!S%aa!]%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa'z%aa(a%aa(r%aa!k%aa!Y%aa'w%aa#`%aav%aa!_%aa%i%aa!g%aa~P#/sO#k%caP%caR%ca[%caa%caj%car%ca!S%ca!]%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca'z%ca(a%ca(r%ca!k%ca!Y%ca'w%ca#`%cav%ca!_%ca%i%ca!g%ca~P#/sO#k}aP}a[}aa}aj}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a'z}a(a}a(r}a!k}a!Y}a'w}av}a!_}a%i}a!g}a~P$(cO#k$saP$saR$sa[$saa$saj$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa'z$sa(a$sa(r$sa!k$sa!Y$sa'w$sav$sa!_$sa%i$sa!g$sa~P$)_O#k$uaP$uaR$ua[$uaa$uaj$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua'z$ua(a$ua(r$ua!k$ua!Y$ua'w$uav$ua!_$ua%i$ua!g$ua~P$*QO#k%TaP%TaR%Ta[%Taa%Taj%Tar%Ta!S%Ta!]%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta'z%Ta(a%Ta(r%Ta!k%Ta!Y%Ta'w%Ta#`%Tav%Ta!_%Ta%i%Ta!g%Ta~P#/sOa#cq!]#cq'z#cq'w#cq!Y#cq!k#cqv#cq!_#cq%i#cq!g#cq~P!:tO![3lO!]'YX!k'YX~P%[O!].tO!k(ka~O!].tO!k(ka~P!:tO!Y3oO~O$O!na!^!na~PKlO$O!ja!]!ja!^!ja~P#BwO$O!ra!^!ra~P!=[O$O!ta!^!ta~P!?rOg']X!]']X~P!,TO!]/POg(pa~OSfO!_4TO$d4UO~O!^4YO~Ov4ZO~P#/sOa$mq!]$mq'z$mq'w$mq!Y$mq!k$mqv$mq!_$mq%i$mq!g$mq~P!:tO!Y4]O~P!&zO!S4^O~O!Q*OO'y*PO(z%POn'ia(y'ia!]'ia#`'ia~Og'ia$O'ia~P%-fO!Q*OO'y*POn'ka(y'ka(z'ka!]'ka#`'ka~Og'ka$O'ka~P%.XO(r$YO~P#/sO!YfX!Y$zX!]fX!]$zX!g%RX#`fX~P!0SOp%WO(T=WO~P!1uOp4bO!S%hO![4aO!_%iO(T%gO!]'eX!k'eX~O!]/pO!k)Oa~O!]/pO!g#vO!k)Oa~O!]/pO!g#vO(r'pO!k)Oa~Og$|i!]$|i#`$|i$O$|i~P!1WO![4jO!Y'gX!]'gX~P!3tO!]/yO!Y)Pa~O!]/yO!Y)Pa~P#/sOP]XR]X[]Xj]Xr]X!Q]X!S]X!Y]X!]]X!l]X!p]X#R]X#S]X#`]X#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~Oj%YX!g%YX~P%2OOj4oO!g#vO~Oh%VO!g#vO!l%eO~Oh%VOr4tO!l%eO(r'pO~Or4yO!g#vO(r'pO~Os!nO!S4zO(VTO(YUO(e!mO~O(y$}On%ai!Q%ai'y%ai(z%ai!]%ai#`%ai~Og%ai$O%ai~P%5oO(z%POn%ci!Q%ci'y%ci(y%ci!]%ci#`%ci~Og%ci$O%ci~P%6bOg(_i!](_i~P!1WO#`5QOg(_i!](_i~P!1WO!k5VO~Oa$oq!]$oq'z$oq'w$oq!Y$oq!k$oqv$oq!_$oq%i$oq!g$oq~P!:tO!Y5ZO~O!]5[O!_)QX~P#/sOa$zX!_$zX%^]X'z$zX!]$zX~P!0SO%^5_OaoX!_oX'zoX!]oX~P$#OOp5`O(T#nO~O%^5_O~Ob5fO%j5gO(T+qO(VTO(YUO!]'tX!^'tX~O!]1TO!^)Xa~O[5kO~O`5lO~O[5pO~Oa%nO'z%nO~P#/sO!]5uO#`5wO!^)UX~O!^5xO~Or6OOs!nO!S*iO!b!yO!c!vO!d!vO!|<VO#T!pO#U!pO#V!pO#W!pO#X!pO#[5}O#]!zO(U!lO(VTO(YUO(e!mO(o!sO~O!^5|O~P%;eOn6TO!_1oO%i6SO~Oh%VOn6TO!_1oO%i6SO~Ob6[O(T#nO(VTO(YUO!]'sX!^'sX~O!]1zO!^)Va~O(VTO(YUO(e6^O~O`6bO~Oj6eO&[6fO~PNXO!k6gO~P%[Oa6iO~Oa6iO~P%[Ob2bO!^6nO&j2aO~P`O!g6pO~O!g6rOh(ji!](ji!^(ji!g(ji!l(jir(ji(r(ji~O!]#hi!^#hi~P#BwO#`6sO!]#hi!^#hi~O!]!ai!^!ai~P#BwOa%nO#`6|O'z%nO~Oa%nO!g#vO#`6|O'z%nO~O!](tq!k(tqa(tq'z(tq~P!:tO!](jO!k(sq~O!S%hO!_%iO#j7TO(T%gO~O!_'`O%i7WO~On7[O!_'`O%i7WO~O#k'iaP'iaR'ia['iaa'iaj'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia'z'ia(a'ia(r'ia!k'ia!Y'ia'w'iav'ia!_'ia%i'ia!g'ia~P%-fO#k'kaP'kaR'ka['kaa'kaj'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka'z'ka(a'ka(r'ka!k'ka!Y'ka'w'kav'ka!_'ka%i'ka!g'ka~P%.XO#k$|iP$|iR$|i[$|ia$|ij$|ir$|i!S$|i!]$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i'z$|i(a$|i(r$|i!k$|i!Y$|i'w$|i#`$|iv$|i!_$|i%i$|i!g$|i~P#/sO#k%aiP%aiR%ai[%aia%aij%air%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai'z%ai(a%ai(r%ai!k%ai!Y%ai'w%aiv%ai!_%ai%i%ai!g%ai~P%5oO#k%ciP%ciR%ci[%cia%cij%cir%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci'z%ci(a%ci(r%ci!k%ci!Y%ci'w%civ%ci!_%ci%i%ci!g%ci~P%6bO!]'Ya!k'Ya~P!:tO!].tO!k(ki~O$O#ci!]#ci!^#ci~P#BwOP$[OR#zO!Q#yO!S#{O!l#xO!p$[O(aVO[#mij#mir#mi#R#mi#o#mi#p#mi#q#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#n#mi~P%NdO#n<_O~P%NdOP$[OR#zOr<kO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO[#mij#mi#R#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#r#mi~P&!lO#r<aO~P&!lOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO(aVO#x#mi#z#mi#{#mi$O#mi(r#mi(y#mi(z#mi!]#mi!^#mi~O#v#mi~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO(aVO(z#}O#z#mi#{#mi$O#mi(r#mi(y#mi!]#mi!^#mi~O#x<eO~P&&uO#x#mi~P&&uO#v<cO~P&$tOP$[OR#zO[<mOj<bOr<kO!Q#yO!S#{O!l#xO!p$[O#R<bO#n<_O#o<`O#p<`O#q<`O#r<aO#s<bO#t<bO#u<lO#v<cO#x<eO(aVO(y#|O(z#}O#{#mi$O#mi(r#mi!]#mi!^#mi~O#z#mi~P&)UO#z<gO~P&)UOa#|y!]#|y'z#|y'w#|y!Y#|y!k#|yv#|y!_#|y%i#|y!g#|y~P!:tO[#mij#mir#mi#R#mi#r#mi#s#mi#t#mi#u#mi#v#mi#x#mi#z#mi#{#mi$O#mi(r#mi!]#mi!^#mi~OP$[OR#zO!Q#yO!S#{O!l#xO!p$[O#n<_O#o<`O#p<`O#q<`O(aVO(y#mi(z#mi~P&,QOn>^O!Q*OO'y*PO(y$}O(z%POP#miR#mi!S#mi!l#mi!p#mi#n#mi#o#mi#p#mi#q#mi(a#mi~P&,QO#S$dOP(`XR(`X[(`Xj(`Xn(`Xr(`X!Q(`X!S(`X!l(`X!p(`X#R(`X#n(`X#o(`X#p(`X#q(`X#r(`X#s(`X#t(`X#u(`X#v(`X#x(`X#z(`X#{(`X$O(`X'y(`X(a(`X(r(`X(y(`X(z(`X!](`X!^(`X~O$O$Pi!]$Pi!^$Pi~P#BwO$O!ri!^!ri~P$+oOg']a!]']a~P!1WO!^7nO~O!]'da!^'da~P#BwO!Y7oO~P#/sO!g#vO(r'pO!]'ea!k'ea~O!]/pO!k)Oi~O!]/pO!g#vO!k)Oi~Og$|q!]$|q#`$|q$O$|q~P!1WO!Y'ga!]'ga~P#/sO!g7vO~O!]/yO!Y)Pi~P#/sO!]/yO!Y)Pi~O!Y7yO~Oh%VOr8OO!l%eO(r'pO~Oj8QO!g#vO~Or8TO!g#vO(r'pO~O!Q*OO'y*PO(z%POn'ja(y'ja!]'ja#`'ja~Og'ja$O'ja~P&5RO!Q*OO'y*POn'la(y'la(z'la!]'la#`'la~Og'la$O'la~P&5tOg(_q!](_q~P!1WO#`8VOg(_q!](_q~P!1WO!Y8WO~Og%Oq!]%Oq#`%Oq$O%Oq~P!1WOa$oy!]$oy'z$oy'w$oy!Y$oy!k$oyv$oy!_$oy%i$oy!g$oy~P!:tO!g6rO~O!]5[O!_)Qa~O!_'`OP$TaR$Ta[$Taj$Tar$Ta!Q$Ta!S$Ta!]$Ta!l$Ta!p$Ta#R$Ta#n$Ta#o$Ta#p$Ta#q$Ta#r$Ta#s$Ta#t$Ta#u$Ta#v$Ta#x$Ta#z$Ta#{$Ta(a$Ta(r$Ta(y$Ta(z$Ta~O%i7WO~P&8fO%^8[Oa%[i!_%[i'z%[i!]%[i~Oa#cy!]#cy'z#cy'w#cy!Y#cy!k#cyv#cy!_#cy%i#cy!g#cy~P!:tO[8^O~Ob8`O(T+qO(VTO(YUO~O!]1TO!^)Xi~O`8dO~O(e(|O!]'pX!^'pX~O!]5uO!^)Ua~O!^8nO~P%;eO(o!sO~P$&YO#[8oO~O!_1oO~O!_1oO%i8qO~On8tO!_1oO%i8qO~O[8yO!]'sa!^'sa~O!]1zO!^)Vi~O!k8}O~O!k9OO~O!k9RO~O!k9RO~P%[Oa9TO~O!g9UO~O!k9VO~O!](wi!^(wi~P#BwOa%nO#`9_O'z%nO~O!](ty!k(tya(ty'z(ty~P!:tO!](jO!k(sy~O%i9bO~P&8fO!_'`O%i9bO~O#k$|qP$|qR$|q[$|qa$|qj$|qr$|q!S$|q!]$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q'z$|q(a$|q(r$|q!k$|q!Y$|q'w$|q#`$|qv$|q!_$|q%i$|q!g$|q~P#/sO#k'jaP'jaR'ja['jaa'jaj'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja'z'ja(a'ja(r'ja!k'ja!Y'ja'w'jav'ja!_'ja%i'ja!g'ja~P&5RO#k'laP'laR'la['laa'laj'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la'z'la(a'la(r'la!k'la!Y'la'w'lav'la!_'la%i'la!g'la~P&5tO#k%OqP%OqR%Oq[%Oqa%Oqj%Oqr%Oq!S%Oq!]%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq'z%Oq(a%Oq(r%Oq!k%Oq!Y%Oq'w%Oq#`%Oqv%Oq!_%Oq%i%Oq!g%Oq~P#/sO!]'Yi!k'Yi~P!:tO$O#cq!]#cq!^#cq~P#BwO(y$}OP%aaR%aa[%aaj%aar%aa!S%aa!l%aa!p%aa#R%aa#n%aa#o%aa#p%aa#q%aa#r%aa#s%aa#t%aa#u%aa#v%aa#x%aa#z%aa#{%aa$O%aa(a%aa(r%aa!]%aa!^%aa~On%aa!Q%aa'y%aa(z%aa~P&IyO(z%POP%caR%ca[%caj%car%ca!S%ca!l%ca!p%ca#R%ca#n%ca#o%ca#p%ca#q%ca#r%ca#s%ca#t%ca#u%ca#v%ca#x%ca#z%ca#{%ca$O%ca(a%ca(r%ca!]%ca!^%ca~On%ca!Q%ca'y%ca(y%ca~P&LQOn>^O!Q*OO'y*PO(z%PO~P&IyOn>^O!Q*OO'y*PO(y$}O~P&LQOR0kO!Q0kO!S0lO#S$dOP}a[}aj}an}ar}a!l}a!p}a#R}a#n}a#o}a#p}a#q}a#r}a#s}a#t}a#u}a#v}a#x}a#z}a#{}a$O}a'y}a(a}a(r}a(y}a(z}a!]}a!^}a~O!Q*OO'y*POP$saR$sa[$saj$san$sar$sa!S$sa!l$sa!p$sa#R$sa#n$sa#o$sa#p$sa#q$sa#r$sa#s$sa#t$sa#u$sa#v$sa#x$sa#z$sa#{$sa$O$sa(a$sa(r$sa(y$sa(z$sa!]$sa!^$sa~O!Q*OO'y*POP$uaR$ua[$uaj$uan$uar$ua!S$ua!l$ua!p$ua#R$ua#n$ua#o$ua#p$ua#q$ua#r$ua#s$ua#t$ua#u$ua#v$ua#x$ua#z$ua#{$ua$O$ua(a$ua(r$ua(y$ua(z$ua!]$ua!^$ua~On>^O!Q*OO'y*PO(y$}O(z%PO~OP%TaR%Ta[%Taj%Tar%Ta!S%Ta!l%Ta!p%Ta#R%Ta#n%Ta#o%Ta#p%Ta#q%Ta#r%Ta#s%Ta#t%Ta#u%Ta#v%Ta#x%Ta#z%Ta#{%Ta$O%Ta(a%Ta(r%Ta!]%Ta!^%Ta~P''VO$O$mq!]$mq!^$mq~P#BwO$O$oq!]$oq!^$oq~P#BwO!^9oO~O$O9pO~P!1WO!g#vO!]'ei!k'ei~O!g#vO(r'pO!]'ei!k'ei~O!]/pO!k)Oq~O!Y'gi!]'gi~P#/sO!]/yO!Y)Pq~Or9wO!g#vO(r'pO~O[9yO!Y9xO~P#/sO!Y9xO~Oj:PO!g#vO~Og(_y!](_y~P!1WO!]'na!_'na~P#/sOa%[q!_%[q'z%[q!]%[q~P#/sO[:UO~O!]1TO!^)Xq~O`:YO~O#`:ZO!]'pa!^'pa~O!]5uO!^)Ui~P#BwO!S:]O~O!_1oO%i:`O~O(VTO(YUO(e:eO~O!]1zO!^)Vq~O!k:hO~O!k:iO~O!k:jO~O!k:jO~P%[O#`:mO!]#hy!^#hy~O!]#hy!^#hy~P#BwO%i:rO~P&8fO!_'`O%i:rO~O$O#|y!]#|y!^#|y~P#BwOP$|iR$|i[$|ij$|ir$|i!S$|i!l$|i!p$|i#R$|i#n$|i#o$|i#p$|i#q$|i#r$|i#s$|i#t$|i#u$|i#v$|i#x$|i#z$|i#{$|i$O$|i(a$|i(r$|i!]$|i!^$|i~P''VO!Q*OO'y*PO(z%POP'iaR'ia['iaj'ian'iar'ia!S'ia!l'ia!p'ia#R'ia#n'ia#o'ia#p'ia#q'ia#r'ia#s'ia#t'ia#u'ia#v'ia#x'ia#z'ia#{'ia$O'ia(a'ia(r'ia(y'ia!]'ia!^'ia~O!Q*OO'y*POP'kaR'ka['kaj'kan'kar'ka!S'ka!l'ka!p'ka#R'ka#n'ka#o'ka#p'ka#q'ka#r'ka#s'ka#t'ka#u'ka#v'ka#x'ka#z'ka#{'ka$O'ka(a'ka(r'ka(y'ka(z'ka!]'ka!^'ka~O(y$}OP%aiR%ai[%aij%ain%air%ai!Q%ai!S%ai!l%ai!p%ai#R%ai#n%ai#o%ai#p%ai#q%ai#r%ai#s%ai#t%ai#u%ai#v%ai#x%ai#z%ai#{%ai$O%ai'y%ai(a%ai(r%ai(z%ai!]%ai!^%ai~O(z%POP%ciR%ci[%cij%cin%cir%ci!Q%ci!S%ci!l%ci!p%ci#R%ci#n%ci#o%ci#p%ci#q%ci#r%ci#s%ci#t%ci#u%ci#v%ci#x%ci#z%ci#{%ci$O%ci'y%ci(a%ci(r%ci(y%ci!]%ci!^%ci~O$O$oy!]$oy!^$oy~P#BwO$O#cy!]#cy!^#cy~P#BwO!g#vO!]'eq!k'eq~O!]/pO!k)Oy~O!Y'gq!]'gq~P#/sOr:|O!g#vO(r'pO~O[;QO!Y;PO~P#/sO!Y;PO~Og(_!R!](_!R~P!1WOa%[y!_%[y'z%[y!]%[y~P#/sO!]1TO!^)Xy~O!]5uO!^)Uq~O(T;XO~O!_1oO%i;[O~O!k;_O~O%i;dO~P&8fOP$|qR$|q[$|qj$|qr$|q!S$|q!l$|q!p$|q#R$|q#n$|q#o$|q#p$|q#q$|q#r$|q#s$|q#t$|q#u$|q#v$|q#x$|q#z$|q#{$|q$O$|q(a$|q(r$|q!]$|q!^$|q~P''VO!Q*OO'y*PO(z%POP'jaR'ja['jaj'jan'jar'ja!S'ja!l'ja!p'ja#R'ja#n'ja#o'ja#p'ja#q'ja#r'ja#s'ja#t'ja#u'ja#v'ja#x'ja#z'ja#{'ja$O'ja(a'ja(r'ja(y'ja!]'ja!^'ja~O!Q*OO'y*POP'laR'la['laj'lan'lar'la!S'la!l'la!p'la#R'la#n'la#o'la#p'la#q'la#r'la#s'la#t'la#u'la#v'la#x'la#z'la#{'la$O'la(a'la(r'la(y'la(z'la!]'la!^'la~OP%OqR%Oq[%Oqj%Oqr%Oq!S%Oq!l%Oq!p%Oq#R%Oq#n%Oq#o%Oq#p%Oq#q%Oq#r%Oq#s%Oq#t%Oq#u%Oq#v%Oq#x%Oq#z%Oq#{%Oq$O%Oq(a%Oq(r%Oq!]%Oq!^%Oq~P''VOg%e!Z!]%e!Z#`%e!Z$O%e!Z~P!1WO!Y;hO~P#/sOr;iO!g#vO(r'pO~O[;kO!Y;hO~P#/sO!]'pq!^'pq~P#BwO!]#h!Z!^#h!Z~P#BwO#k%e!ZP%e!ZR%e!Z[%e!Za%e!Zj%e!Zr%e!Z!S%e!Z!]%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z'z%e!Z(a%e!Z(r%e!Z!k%e!Z!Y%e!Z'w%e!Z#`%e!Zv%e!Z!_%e!Z%i%e!Z!g%e!Z~P#/sOr;tO!g#vO(r'pO~O!Y;uO~P#/sOr;|O!g#vO(r'pO~O!Y;}O~P#/sOP%e!ZR%e!Z[%e!Zj%e!Zr%e!Z!S%e!Z!l%e!Z!p%e!Z#R%e!Z#n%e!Z#o%e!Z#p%e!Z#q%e!Z#r%e!Z#s%e!Z#t%e!Z#u%e!Z#v%e!Z#x%e!Z#z%e!Z#{%e!Z$O%e!Z(a%e!Z(r%e!Z!]%e!Z!^%e!Z~P''VOr<QO!g#vO(r'pO~Ov(fX~P1qO!Q%rO~P!)[O(U!lO~P!)[O!YfX!]fX#`fX~P%2OOP]XR]X[]Xj]Xr]X!Q]X!S]X!]]X!]fX!l]X!p]X#R]X#S]X#`]X#`fX#kfX#n]X#o]X#p]X#q]X#r]X#s]X#t]X#u]X#v]X#x]X#z]X#{]X$Q]X(a]X(r]X(y]X(z]X~O!gfX!k]X!kfX(rfX~P'LTOP<UOQ<UOSfOd>ROe!iOpkOr<UOskOtkOzkO|<UO!O<UO!SWO!WkO!XkO!_XO!i<XO!lZO!o<UO!p<UO!q<UO!s<YO!u<]O!x!hO$W!kO$n>PO(T)]O(VTO(YUO(aVO(o[O~O!]<iO!^$qa~Oh%VOp%WOr%XOs$tOt$tOz%YO|%ZO!O<tO!S${O!_$|O!i>WO!l$xO#j<zO$W%`O$t<vO$v<xO$y%aO(T(vO(VTO(YUO(a$uO(y$}O(z%PO~Ol)dO~P(!yOr!eX(r!eX~P#!iOr(jX(r(jX~P##[O!^]X!^fX~P'LTO!YfX!Y$zX!]fX!]$zX#`fX~P!0SO#k<^O~O!g#vO#k<^O~O#`<nO~Oj<bO~O#`=OO!](wX!^(wX~O#`<nO!](uX!^(uX~O#k=PO~Og=RO~P!1WO#k=XO~O#k=YO~Og=RO(T&ZO~O!g#vO#k=ZO~O!g#vO#k=PO~O$O=[O~P#BwO#k=]O~O#k=^O~O#k=cO~O#k=dO~O#k=eO~O#k=fO~O$O=gO~P!1WO$O=hO~P!1WOl=sO~P7eOk#S#T#U#W#X#[#i#j#u$n$t$v$y%]%^%h%i%j%q%s%v%w%y%{~(OT#o!X'|(U#ps#n#qr!Q'}$]'}(T$_(e~",goto:"$9Y)]PPPPPP)^PP)aP)rP+W/]PPPP6mPP7TPP=QPPP@tPA^PA^PPPA^PCfPA^PA^PA^PCjPCoPD^PIWPPPI[PPPPI[L_PPPLeMVPI[PI[PP! eI[PPPI[PI[P!#lI[P!'S!(X!(bP!)U!)Y!)U!,gPPPPPPP!-W!(XPP!-h!/YP!2iI[I[!2n!5z!:h!:h!>gPPP!>oI[PPPPPPPPP!BOP!C]PPI[!DnPI[PI[I[I[I[I[PI[!FQP!I[P!LbP!Lf!Lp!Lt!LtP!IXP!Lx!LxP#!OP#!SI[PI[#!Y#%_CjA^PA^PA^A^P#&lA^A^#)OA^#+vA^#.SA^A^#.r#1W#1W#1]#1f#1W#1qPP#1WPA^#2ZA^#6YA^A^6mPPP#:_PPP#:x#:xP#:xP#;`#:xPP#;fP#;]P#;]#;y#;]#<e#<k#<n)aP#<q)aP#<z#<z#<zP)aP)aP)aP)aPP)aP#=Q#=TP#=T)aP#=XP#=[P)aP)aP)aP)aP)aP)a)aPP#=b#=h#=s#=y#>P#>V#>]#>k#>q#>{#?R#?]#?c#?s#?y#@k#@}#AT#AZ#Ai#BO#Cs#DR#DY#Et#FS#Gt#HS#HY#H`#Hf#Hp#Hv#H|#IW#Ij#IpPPPPPPPPPPP#IvPPPPPPP#Jk#Mx$ b$ i$ qPPP$']P$'f$*_$0x$0{$1O$1}$2Q$2X$2aP$2g$2jP$3W$3[$4S$5b$5g$5}PP$6S$6Y$6^$6a$6e$6i$7e$7|$8e$8i$8l$8o$8y$8|$9Q$9UR!|RoqOXst!Z#d%m&r&t&u&w,s,x2[2_Y!vQ'`-e1o5{Q%tvQ%|yQ&T|Q&j!VS'W!e-]Q'f!iS'l!r!yU*k$|*Z*oQ+o%}S+|&V&WQ,d&dQ-c'_Q-m'gQ-u'mQ0[*qQ1b,OQ1y,eR<{<Y%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_S#q]<V!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU+P%]<s<tQ+t&PQ,f&gQ,m&oQ0x+gQ0}+iQ1Y+uQ2R,kQ3`.gQ5`0|Q5f1TQ6[1zQ7Y3dQ8`5gR9e7['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S!S!nQ!r!v!y!z$|'W'_'`'l'm'n*k*o*q*r-]-c-e-u0[0_1o5{5}%[$ti#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q&X|Q'U!eS'[%i-`Q+t&PQ,P&WQ,f&gQ0n+SQ1Y+uQ1_+{Q2Q,jQ2R,kQ5f1TQ5o1aQ6[1zQ6_1|Q6`2PQ8`5gQ8c5lQ8|6bQ:X8dQ:f8yQ;V:YR<}*ZrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R,h&k&z^OPXYstuvwz!Z!`!g!j!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'b'r(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>R>S[#]WZ#W#Z'X(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ%wxQ%{yW&Q|&V&W,OQ&_!TQ'c!hQ'e!iQ(q#sS+n%|%}Q+r&PQ,_&bQ,c&dS-l'f'gQ.i(rQ1R+oQ1X+uQ1Z+vQ1^+zQ1t,`S1x,d,eQ2|-mQ5e1TQ5i1WQ5n1`Q6Z1yQ8_5gQ8b5kQ8f5pQ:T8^R;T:U!U$zi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y!^%yy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{Q+h%wQ,T&[Q,W&]Q,b&dQ.h(qQ1s,_U1w,c,d,eQ3e.iQ6U1tS6Y1x1yQ8x6Z#f>T#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o>U<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hW%Ti%V*y>PS&[!Q&iQ&]!RQ&^!SU*}%[%d=sR,R&Y%]%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^T)z$u){V+P%]<s<tW'[!e%i*Z-`S(}#y#zQ+c%rQ+y&SS.b(m(nQ1j,XQ5T0kR8i5u'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S$i$^c#Y#e%q%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.|.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vT#TV#U'RkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ'Y!eR2q-]!W!nQ!e!r!v!y!z$|'W'_'`'l'm'n*Z*k*o*q*r-]-c-e-u0[0_1o5{5}R1l,ZnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&y!^Q'v!xS(s#u<^Q+l%zQ,]&_Q,^&aQ-j'dQ-w'oS.r(x=PS0q+X=ZQ1P+mQ1n,[Q2c,zQ2e,{Q2m-WQ2z-kQ2}-oS5Y0r=eQ5a1QS5d1S=fQ6t2oQ6x2{Q6}3SQ8]5bQ9Y6vQ9Z6yQ9^7OR:l9V$d$]c#Y#e%s%u(S(Y(t(y)R)S)T)U)V)W)X)Y)Z)[)^)`)b)g)q+d+x-Z-x-}.S.U.s.v.z.}/O/b0p2k2n3O3V3k3p3q3r3s3t3u3v3w3x3y3z3{3|4P4Q4X5X5c6u6{7Q7a7b7k7l8k9X9]9g9m9n:o;W;`<W=vS(o#p'iQ)P#zS+b%q.|S.c(n(pR3^.d'QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS#q]<VQ&t!XQ&u!YQ&w![Q&x!]R2Z,vQ'a!hQ+e%wQ-h'cS.e(q+hQ2x-gW3b.h.i0w0yQ6w2yW7U3_3a3e5^U9a7V7X7ZU:q9c9d9fS;b:p:sQ;p;cR;x;qU!wQ'`-eT5y1o5{!Q_OXZ`st!V!Z#d#h%e%m&i&k&r&t&u&w(j,s,x.[2[2_]!pQ!r'`-e1o5{T#q]<V%^{OPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S(}#y#zS.b(m(n!s=l$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SU$fd)_,mS(p#p'iU*v%R(w4OU0m+O.n7gQ5^0xQ7V3`Q9d7YR:s9em!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}Q't!uS(f#g2US-s'k'wQ/s*]Q0R*jQ3U-vQ4f/tQ4r0TQ4s0UQ4x0^Q7r4`S7}4t4vS8R4y4{Q9r7sQ9v7yQ9{8OQ:Q8TS:{9w9xS;g:|;PS;s;h;iS;{;t;uS<P;|;}R<S<QQ#wbQ's!uS(e#g2US(g#m+WQ+Y%fQ+j%xQ+p&OU-r'k't'wQ.W(fU/r*]*`/wQ0S*jQ0V*lQ1O+kQ1u,aS3R-s-vQ3Z.`S4e/s/tQ4n0PS4q0R0^Q4u0WQ6W1vQ7P3US7q4`4bQ7u4fU7|4r4x4{Q8P4wQ8v6XS9q7r7sQ9u7yQ9}8RQ:O8SQ:c8wQ:y9rS:z9v9xQ;S:QQ;^:dS;f:{;PS;r;g;hS;z;s;uS<O;{;}Q<R<PQ<T<SQ=o=jQ={=tR=|=uV!wQ'`-e%^aOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_S#wz!j!r=i$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=o>R%^bOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Q%fj!^%xy!i!u%{%|%}'V'e'f'g'k'u*j+n+o-Y-l-m-t0R0U1R2u2|3T4r4s4v7}9{S&Oz!jQ+k%yQ,a&dW1v,b,c,d,eU6X1w1x1yS8w6Y6ZQ:d8x!r=j$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ=t>QR=u>R%QeOPXYstuvw!Z!`!g!o#S#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_Y#bWZ#W#Z(T!b%jm#h#i#l$x%e%h(^(h(i(j*Y*^*b+Z+[+^,o-V.T.Z.[.]._/m/p2d3[3]4a6r7TQ,n&o!p=k$Z$n)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SR=n'XU']!e%i*ZR2s-`%SdOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+],p,s,x-i-q.P.V.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3l4z6T6e6f6i6|8t9T9_!r)_$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SQ,m&oQ0x+gQ3`.gQ7Y3dR9e7[!b$Tc#Y%q(S(Y(t(y)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!P<d)^)q-Z.|2k2n3p3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!f$Vc#Y%q(S(Y(t(y)W)X)Z)[)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<W!T<f)^)q-Z.|2k2n3p3v3w3y3z4P4X6u7b7k7l8k9X9g9m9n;W;`=v!^$Zc#Y%q(S(Y(t(y)`)g+x-x-}.S.U.s.v/b0p3O3V3k3{5X5c6{7Q7a9]:o<WQ4_/kz>S)^)q-Z.|2k2n3p4P4X6u7b7k7l8k9X9g9m9n;W;`=vQ>X>ZR>Y>['QkOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>SS$oh$pR4U/U'XgOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$kf$qQ$ifS)j$l)nR)v$qT$jf$qT)l$l)n'XhOPWXYZhstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$Z$_$a$e$n$p%m%t&R&k&n&o&r&t&u&w&{'T'X'b'r(T(V(](d(x(z)O)s)}*i+X+]+g,p,s,x-U-X-i-q.P.V.g.t.{/U/V/n0]0l0r1S1r2S2T2V2X2[2_2a2p3Q3W3d3l4T4z5w6T6e6f6i6s6|7[8t9T9_:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>ST$oh$pQ$rhR)u$p%^jOPWXYZstuvw!Z!`!g!o#S#W#Z#d#o#u#x#{$O$P$Q$R$S$T$U$V$W$X$_$a$e%m%t&R&k&n&o&r&t&u&w&{'T'b'r(T(V(](d(x(z)O)}*i+X+]+g,p,s,x-i-q.P.V.g.t.{/n0]0l0r1S1r2S2T2V2X2[2_2a3Q3W3d3l4z6T6e6f6i6|7[8t9T9_!s>Q$Z$n'X)s-U-X/V2p4T5w6s:Z:m<U<X<Y<]<^<_<`<a<b<c<d<e<f<g<h<i<k<n<{=O=P=R=Z=[=e=f>S#glOPXZst!Z!`!o#S#d#o#{$n%m&k&n&o&r&t&u&w&{'T'b)O)s*i+]+g,p,s,x-i.g/V/n0]0l1r2S2T2V2X2[2_2a3d4T4z6T6e6f6i7[8t9T!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^Q+T%aQ/c*Oo4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!U$yi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>YQ*c$zU*l$|*Z*oQ+U%bQ0W*m#f=q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n=r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hQ=w>TQ=x>UQ=y>VR=z>W!U%Ri$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y#f(w#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^o4O<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=hnoOXst!Z#d%m&r&t&u&w,s,x2[2_S*f${*YQ-R'OQ-S'QR4i/y%[%Si#v$b$c$d$x${%O%Q%^%_%c)y*R*T*V*Y*a*g*w*x+f+i,S,V.f/P/d/m/x/y/{0`0b0i0j0o1f1i1q3c4^4_4j4o5Q5[5_6S7W7v8Q8V8[8q9b9p9y:P:`:r;Q;[;d;k<l<m<o<p<q<r<u<v<w<x<y<z=S=T=U=V=X=Y=]=^=_=`=a=b=c=d=g=h>P>X>Y>]>^Q,U&]Q1h,WQ5s1gR8h5tV*n$|*Z*oU*n$|*Z*oT5z1o5{S0P*i/nQ4w0]T8S4z:]Q+j%xQ0V*lQ1O+kQ1u,aQ6W1vQ8v6XQ:c8wR;^:d!U%Oi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Yx*R$v)e*S*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>OS0`*t0a#f<o#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<p<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!d=S(u)c*[*e.j.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[`=T3}7c7f7j9h:t:w;yS=_.l3iT=`7e9k!U%Qi$d%O%Q%^%_%c*R*T*a*w*x/P/x0`0b0i0j0o4_5Q8V9p>P>X>Y|*T$v)e*U*t+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>OS0b*u0c#f<q#v$b$c$x${)y*V*Y*g+f+i,S,V.f/d/m/y/{1f1i1q3c4^4j4o5[5_6S7W7v8Q8[8q9b9y:P:`:r;Q;[;d;k<o<q<u<w<y=S=U=X=]=_=a=c=g>]>^n<r<l<m<p<r<v<x<z=T=V=Y=^=`=b=d=h!h=U(u)c*[*e.k.l.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[d=V3}7d7e7j9h9i:t:u:w;yS=a.m3jT=b7f9lrnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q&f!UR,p&ornOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_R&f!UQ,Y&^R1d,RsnOXst!V!Z#d%m&i&r&t&u&w,s,x2[2_Q1p,_S6R1s1tU8p6P6Q6US:_8r8sS;Y:^:aQ;m;ZR;w;nQ&m!VR,i&iR6_1|R:f8yW&Q|&V&W,OR1Z+vQ&r!WR,s&sR,y&xT2],x2_R,}&yQ,|&yR2f,}Q'y!{R-y'ySsOtQ#dXT%ps#dQ#OTR'{#OQ#RUR'}#RQ){$uR/`){Q#UVR(Q#UQ#XWU(W#X(X.QQ(X#YR.Q(YQ-^'YR2r-^Q.u(yS3m.u3nR3n.vQ-e'`R2v-eY!rQ'`-e1o5{R'j!rQ/Q)eR4S/QU#_W%h*YU(_#_(`.RQ(`#`R.R(ZQ-a']R2t-at`OXst!V!Z#d%m&i&k&r&t&u&w,s,x2[2_S#hZ%eU#r`#h.[R.[(jQ(k#jQ.X(gW.a(k.X3X7RQ3X.YR7R3YQ)n$lR/W)nQ$phR)t$pQ$`cU)a$`-|<jQ-|<WR<j)qQ/q*]W4c/q4d7t9sU4d/r/s/tS7t4e4fR9s7u$e*Q$v(u)c)e*[*e*t*u+Q+R+V.l.m.o.p.q/_/g/i/k/v/|0d0e0v1e3f3g3h3}4R4[4g4h4l4|5O5R5S5W5r7]7^7_7`7e7f7h7i7j7p7w7z8U8X8Z9h9i9j9t9|:R:S:t:u:v:w:x:};R;e;j;v;y=p=}>O>Z>[Q/z*eU4k/z4m7xQ4m/|R7x4lS*o$|*ZR0Y*ox*S$v)e*t*u+V/v0d0e4R4g5R5S5W7p8U:R:x=p=}>O!d.j(u)c*[*e.l.m.q/_/k/|0v1e3h4[4h4l5r7]7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/h*S.j7ca7c3}7e7f7j9h:t:w;yQ0a*tQ3i.lU4}0a3i9kR9k7e|*U$v)e*t*u+V/g/v0d0e4R4g4|5R5S5W7p8U:R:x=p=}>O!h.k(u)c*[*e.l.m.q/_/k/|0v1e3f3h4[4h4l5r7]7^7`7w7z8X8Z9t9|:S:};R;e;j;v>Z>[U/j*U.k7de7d3}7e7f7j9h9i:t:u:w;yQ0c*uQ3j.mU5P0c3j9lR9l7fQ*z%UR0g*zQ5]0vR8Y5]Q+_%kR0u+_Q5v1jS8j5v:[R:[8kQ,[&_R1m,[Q5{1oR8m5{Q1{,fS6]1{8zR8z6_Q1U+rW5h1U5j8a:VQ5j1XQ8a5iR:V8bQ+w&QR1[+wQ2_,xR6m2_YrOXst#dQ&v!ZQ+a%mQ,r&rQ,t&tQ,u&uQ,w&wQ2Y,sS2],x2_R6l2[Q%opQ&z!_Q&}!aQ'P!bQ'R!cQ'q!uQ+`%lQ+l%zQ,Q&XQ,h&mQ-P&|W-p'k's't'wQ-w'oQ0X*nQ1P+mQ1c,PS2O,i,lQ2g-OQ2h-RQ2i-SQ2}-oW3P-r-s-v-xQ5a1QQ5m1_Q5q1eQ6V1uQ6a2QQ6k2ZU6z3O3R3UQ6}3SQ8]5bQ8e5oQ8g5rQ8l5zQ8u6WQ8{6`S9[6{7PQ9^7OQ:W8cQ:b8vQ:g8|Q:n9]Q;U:XQ;]:cQ;a:oQ;l;VR;o;^Q%zyQ'd!iQ'o!uU+m%{%|%}Q-W'VU-k'e'f'gS-o'k'uQ0Q*jS1Q+n+oQ2o-YS2{-l-mQ3S-tS4p0R0UQ5b1RQ6v2uQ6y2|Q7O3TU7{4r4s4vQ9z7}R;O9{S$wi>PR*{%VU%Ui%V>PR0f*yQ$viS(u#v+iS)c$b$cQ)e$dQ*[$xS*e${*YQ*t%OQ*u%QQ+Q%^Q+R%_Q+V%cQ.l<oQ.m<qQ.o<uQ.p<wQ.q<yQ/_)yQ/g*RQ/i*TQ/k*VQ/v*aS/|*g/mQ0d*wQ0e*xl0v+f,V.f1i1q3c6S7W8q9b:`:r;[;dQ1e,SQ3f=SQ3g=UQ3h=XS3}<l<mQ4R/PS4[/d4^Q4g/xQ4h/yQ4l/{Q4|0`Q5O0bQ5R0iQ5S0jQ5W0oQ5r1fQ7]=]Q7^=_Q7_=aQ7`=cQ7e<pQ7f<rQ7h<vQ7i<xQ7j<zQ7p4_Q7w4jQ7z4oQ8U5QQ8X5[Q8Z5_Q9h=YQ9i=TQ9j=VQ9t7vQ9|8QQ:R8VQ:S8[Q:t=^Q:u=`Q:v=bQ:w=dQ:x9pQ:}9yQ;R:PQ;e=gQ;j;QQ;v;kQ;y=hQ=p>PQ=}>XQ>O>YQ>Z>]R>[>^Q+O%]Q.n<sR7g<tnpOXst!Z#d%m&r&t&u&w,s,x2[2_Q!fPS#fZ#oQ&|!`W'h!o*i0]4zQ(P#SQ)Q#{Q)r$nS,l&k&nQ,q&oQ-O&{S-T'T/nQ-g'bQ.x)OQ/[)sQ0s+]Q0y+gQ2W,pQ2y-iQ3a.gQ4W/VQ5U0lQ6Q1rQ6c2SQ6d2TQ6h2VQ6j2XQ6o2aQ7Z3dQ7m4TQ8s6TQ9P6eQ9Q6fQ9S6iQ9f7[Q:a8tR:k9T#[cOPXZst!Z!`!o#d#o#{%m&k&n&o&r&t&u&w&{'T'b)O*i+]+g,p,s,x-i.g/n0]0l1r2S2T2V2X2[2_2a3d4z6T6e6f6i7[8t9TQ#YWQ#eYQ%quQ%svS%uw!gS(S#W(VQ(Y#ZQ(t#uQ(y#xQ)R$OQ)S$PQ)T$QQ)U$RQ)V$SQ)W$TQ)X$UQ)Y$VQ)Z$WQ)[$XQ)^$ZQ)`$_Q)b$aQ)g$eW)q$n)s/V4TQ+d%tQ+x&RS-Z'X2pQ-x'rS-}(T.PQ.S(]Q.U(dQ.s(xQ.v(zQ.z<UQ.|<XQ.}<YQ/O<]Q/b)}Q0p+XQ2k-UQ2n-XQ3O-qQ3V.VQ3k.tQ3p<^Q3q<_Q3r<`Q3s<aQ3t<bQ3u<cQ3v<dQ3w<eQ3x<fQ3y<gQ3z<hQ3{.{Q3|<kQ4P<nQ4Q<{Q4X<iQ5X0rQ5c1SQ6u=OQ6{3QQ7Q3WQ7a3lQ7b=PQ7k=RQ7l=ZQ8k5wQ9X6sQ9]6|Q9g=[Q9m=eQ9n=fQ:o9_Q;W:ZQ;`:mQ<W#SR=v>SR#[WR'Z!el!tQ!r!v!y!z'`'l'm'n-e-u1o5{5}S'V!e-]U*j$|*Z*oS-Y'W'_S0U*k*qQ0^*rQ2u-cQ4v0[R4{0_R({#xQ!fQT-d'`-e]!qQ!r'`-e1o5{Q#p]R'i<VR)f$dY!uQ'`-e1o5{Q'k!rS'u!v!yS'w!z5}S-t'l'mQ-v'nR3T-uT#kZ%eS#jZ%eS%km,oU(g#h#i#lS.Y(h(iQ.^(jQ0t+^Q3Y.ZU3Z.[.]._S7S3[3]R9`7Td#^W#W#Z%h(T(^*Y+Z.T/mr#gZm#h#i#l%e(h(i(j+^.Z.[.]._3[3]7TS*]$x*bQ/t*^Q2U,oQ2l-VQ4`/pQ6q2dQ7s4aQ9W6rT=m'X+[V#aW%h*YU#`W%h*YS(U#W(^U(Z#Z+Z/mS-['X+[T.O(T.TV'^!e%i*ZQ$lfR)x$qT)m$l)nR4V/UT*_$x*bT*h${*YQ0w+fQ1g,VQ3_.fQ5t1iQ6P1qQ7X3cQ8r6SQ9c7WQ:^8qQ:p9bQ;Z:`Q;c:rQ;n;[R;q;dnqOXst!Z#d%m&r&t&u&w,s,x2[2_Q&l!VR,h&itmOXst!U!V!Z#d%m&i&r&t&u&w,s,x2[2_R,o&oT%lm,oR1k,XR,g&gQ&U|S+}&V&WR1^,OR+s&PT&p!W&sT&q!W&sT2^,x2_",nodeNames:" ArithOp ArithOp ?. JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList in out const TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewTarget new NewExpression ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression TypeArgList CompareOp < declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression InstantiationExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast < ArrowFunction TypeParamList SequenceExpression InstantiationExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate asserts is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration defer ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:380,context:N5e,nodeProps:[["isolate",-8,5,6,14,37,39,51,53,55,""],["group",-26,9,17,19,68,207,211,215,216,218,221,224,234,237,243,245,247,249,252,258,264,266,268,270,272,274,275,"Statement",-34,13,14,32,35,36,42,51,54,55,57,62,70,72,76,80,82,84,85,110,111,120,121,136,139,141,142,143,144,145,147,148,167,169,171,"Expression",-23,31,33,37,41,43,45,173,175,177,178,180,181,182,184,185,186,188,189,190,201,203,205,206,"Type",-3,88,103,109,"ClassItem"],["openedBy",23,"<",38,"InterpolationStart",56,"[",60,"{",73,"(",160,"JSXStartCloseTag"],["closedBy",-2,24,168,">",40,"InterpolationEnd",50,"]",61,"}",74,")",165,"JSXEndTag"]],propSources:[z5e],skippedNodes:[0,5,6,278],repeatNodeCount:37,tokenData:"$Fq07[R!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#:O!R![#<_![!]#I_!]!^#Jk!^!_#Ku!_!`$![!`!a$$v!a!b$*T!b!c$,r!c!}Er!}#O$-|#O#P$/W#P#Q$4o#Q#R$5y#R#SEr#S#T$7W#T#o$8b#o#p$<r#p#q$=h#q#r$>x#r#s$@U#s$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$I|Er$I|$I}$Dk$I}$JO$Dk$JO$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr(n%d_$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z07[+rq$i&j(Wp(Z!b'|0/lOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z07[.ST(X#S$i&j'}0/lO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c07[.n_$i&j(Wp(Z!b'}0/lOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)3p/x`$i&j!p),Q(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW1V`#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW2d_#v(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At3l_(V':f$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$i&j(Z!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$i&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$d`$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$d``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$d`$i&j(Z!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(Z!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$d`(Z!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k%9[:hh$i&j(Wp(Z!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__WS$i&j(Wp(Z!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]WS$i&j(Z!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXWS$i&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSWSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWWS(Z!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]WS$i&j(WpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWWS(WpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYWS(Wp(Z!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S%9[C}i$i&j(o%1l(Wp(Z!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr%9[EoP;=`<%lCr07[FRk$i&j(Wp(Z!b$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$i&j(Wp(Z!b$]#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv07[JPP;=`<%lEr(KWJ_`$i&j(Wp(Z!b#p(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWKl_$i&j$Q(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,#xLva(z+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KWNW`$i&j#z(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'At! c_(Y';W$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$i&j(WpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$i&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$d`$i&j(WpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(WpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$d`(WpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b/5|!'t_!l/.^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&U!)O_!k!Lf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z-!n!*[b$i&j(Wp(Z!b(U%&f#q(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW!+o`$i&j(Wp(Z!b#n(ChOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;x!,|`$i&j(Wp(Z!br+4YOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z,$U!.Z_!]+Jf$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!/ec$i&j(Wp(Z!b!Q.2^OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!0ya$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#%|!2Z_![!L^$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!3eg$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!5Vg$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!6wc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad!8_c$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[!9uf$i&j(Wp(Z!b#o(ChOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcxz!;Zz{#-}{!P!;Z!P!Q#/d!Q!^!;Z!^!_#(i!_!`#7S!`!a#8i!a!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z?O!;fb$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z>^!<w`$i&j(Z!b!X7`OY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eq!Q!^!<n!^!_!Gr!_!}!<n!}#O!KS#O#P!Dy#P#o!<n#o#p!Gr#p;'S!<n;'S;=`!L]<%lO!<n<z!>Q^$i&j!X7`OY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@c!_!}!=y!}#O!CW#O#P!Dy#P#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!?Td$i&j!X7`O!^&c!_#W&c#W#X!>|#X#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#k!>|#k#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&c7`!@hX!X7`OY!@cZ!P!@c!P!Q!AT!Q!}!@c!}#O!Ar#O#P!Bq#P;'S!@c;'S;=`!CQ<%lO!@c7`!AYW!X7`#W#X!AT#Z#[!AT#]#^!AT#a#b!AT#g#h!AT#i#j!AT#j#k!AT#m#n!AT7`!AuVOY!ArZ#O!Ar#O#P!B[#P#Q!@c#Q;'S!Ar;'S;=`!Bk<%lO!Ar7`!B_SOY!ArZ;'S!Ar;'S;=`!Bk<%lO!Ar7`!BnP;=`<%l!Ar7`!BtSOY!@cZ;'S!@c;'S;=`!CQ<%lO!@c7`!CTP;=`<%l!@c<z!C][$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#O!CW#O#P!DR#P#Q!=y#Q#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DWX$i&jOY!CWYZ&cZ!^!CW!^!_!Ar!_#o!CW#o#p!Ar#p;'S!CW;'S;=`!Ds<%lO!CW<z!DvP;=`<%l!CW<z!EOX$i&jOY!=yYZ&cZ!^!=y!^!_!@c!_#o!=y#o#p!@c#p;'S!=y;'S;=`!Ek<%lO!=y<z!EnP;=`<%l!=y>^!Ezl$i&j(Z!b!X7`OY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#W&}#W#X!Eq#X#Z&}#Z#[!Eq#[#]&}#]#^!Eq#^#a&}#a#b!Eq#b#g&}#g#h!Eq#h#i&}#i#j!Eq#j#k!Eq#k#m&}#m#n!Eq#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}8r!GyZ(Z!b!X7`OY!GrZw!Grwx!@cx!P!Gr!P!Q!Hl!Q!}!Gr!}#O!JU#O#P!Bq#P;'S!Gr;'S;=`!J|<%lO!Gr8r!Hse(Z!b!X7`OY'}Zw'}x#O'}#P#W'}#W#X!Hl#X#Z'}#Z#[!Hl#[#]'}#]#^!Hl#^#a'}#a#b!Hl#b#g'}#g#h!Hl#h#i'}#i#j!Hl#j#k!Hl#k#m'}#m#n!Hl#n;'S'};'S;=`(f<%lO'}8r!JZX(Z!bOY!JUZw!JUwx!Arx#O!JU#O#P!B[#P#Q!Gr#Q;'S!JU;'S;=`!Jv<%lO!JU8r!JyP;=`<%l!JU8r!KPP;=`<%l!Gr>^!KZ^$i&j(Z!bOY!KSYZ&cZw!KSwx!CWx!^!KS!^!_!JU!_#O!KS#O#P!DR#P#Q!<n#Q#o!KS#o#p!JU#p;'S!KS;'S;=`!LV<%lO!KS>^!LYP;=`<%l!KS>^!L`P;=`<%l!<n=l!Ll`$i&j(Wp!X7`OY!LcYZ&cZr!Lcrs!=ys!P!Lc!P!Q!Mn!Q!^!Lc!^!_# o!_!}!Lc!}#O#%P#O#P!Dy#P#o!Lc#o#p# o#p;'S!Lc;'S;=`#&Y<%lO!Lc=l!Mwl$i&j(Wp!X7`OY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#W(r#W#X!Mn#X#Z(r#Z#[!Mn#[#](r#]#^!Mn#^#a(r#a#b!Mn#b#g(r#g#h!Mn#h#i(r#i#j!Mn#j#k!Mn#k#m(r#m#n!Mn#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r8Q# vZ(Wp!X7`OY# oZr# ors!@cs!P# o!P!Q#!i!Q!}# o!}#O#$R#O#P!Bq#P;'S# o;'S;=`#$y<%lO# o8Q#!pe(Wp!X7`OY)rZr)rs#O)r#P#W)r#W#X#!i#X#Z)r#Z#[#!i#[#])r#]#^#!i#^#a)r#a#b#!i#b#g)r#g#h#!i#h#i)r#i#j#!i#j#k#!i#k#m)r#m#n#!i#n;'S)r;'S;=`*Z<%lO)r8Q#$WX(WpOY#$RZr#$Rrs!Ars#O#$R#O#P!B[#P#Q# o#Q;'S#$R;'S;=`#$s<%lO#$R8Q#$vP;=`<%l#$R8Q#$|P;=`<%l# o=l#%W^$i&j(WpOY#%PYZ&cZr#%Prs!CWs!^#%P!^!_#$R!_#O#%P#O#P!DR#P#Q!Lc#Q#o#%P#o#p#$R#p;'S#%P;'S;=`#&S<%lO#%P=l#&VP;=`<%l#%P=l#&]P;=`<%l!Lc?O#&kn$i&j(Wp(Z!b!X7`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#W%Z#W#X#&`#X#Z%Z#Z#[#&`#[#]%Z#]#^#&`#^#a%Z#a#b#&`#b#g%Z#g#h#&`#h#i%Z#i#j#&`#j#k#&`#k#m%Z#m#n#&`#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z9d#(r](Wp(Z!b!X7`OY#(iZr#(irs!Grsw#(iwx# ox!P#(i!P!Q#)k!Q!}#(i!}#O#+`#O#P!Bq#P;'S#(i;'S;=`#,`<%lO#(i9d#)th(Wp(Z!b!X7`OY*gZr*grs'}sw*gwx)rx#O*g#P#W*g#W#X#)k#X#Z*g#Z#[#)k#[#]*g#]#^#)k#^#a*g#a#b#)k#b#g*g#g#h#)k#h#i*g#i#j#)k#j#k#)k#k#m*g#m#n#)k#n;'S*g;'S;=`+Z<%lO*g9d#+gZ(Wp(Z!bOY#+`Zr#+`rs!JUsw#+`wx#$Rx#O#+`#O#P!B[#P#Q#(i#Q;'S#+`;'S;=`#,Y<%lO#+`9d#,]P;=`<%l#+`9d#,cP;=`<%l#(i?O#,o`$i&j(Wp(Z!bOY#,fYZ&cZr#,frs!KSsw#,fwx#%Px!^#,f!^!_#+`!_#O#,f#O#P!DR#P#Q!;Z#Q#o#,f#o#p#+`#p;'S#,f;'S;=`#-q<%lO#,f?O#-tP;=`<%l#,f?O#-zP;=`<%l!;Z07[#.[b$i&j(Wp(Z!b(O0/l!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z07[#/o_$i&j(Wp(Z!bT0/lOY#/dYZ&cZr#/drs#0nsw#/dwx#4Ox!^#/d!^!_#5}!_#O#/d#O#P#1p#P#o#/d#o#p#5}#p;'S#/d;'S;=`#6|<%lO#/d06j#0w]$i&j(Z!bT0/lOY#0nYZ&cZw#0nwx#1px!^#0n!^!_#3R!_#O#0n#O#P#1p#P#o#0n#o#p#3R#p;'S#0n;'S;=`#3x<%lO#0n05W#1wX$i&jT0/lOY#1pYZ&cZ!^#1p!^!_#2d!_#o#1p#o#p#2d#p;'S#1p;'S;=`#2{<%lO#1p0/l#2iST0/lOY#2dZ;'S#2d;'S;=`#2u<%lO#2d0/l#2xP;=`<%l#2d05W#3OP;=`<%l#1p01O#3YW(Z!bT0/lOY#3RZw#3Rwx#2dx#O#3R#O#P#2d#P;'S#3R;'S;=`#3r<%lO#3R01O#3uP;=`<%l#3R06j#3{P;=`<%l#0n05x#4X]$i&j(WpT0/lOY#4OYZ&cZr#4Ors#1ps!^#4O!^!_#5Q!_#O#4O#O#P#1p#P#o#4O#o#p#5Q#p;'S#4O;'S;=`#5w<%lO#4O00^#5XW(WpT0/lOY#5QZr#5Qrs#2ds#O#5Q#O#P#2d#P;'S#5Q;'S;=`#5q<%lO#5Q00^#5tP;=`<%l#5Q05x#5zP;=`<%l#4O01p#6WY(Wp(Z!bT0/lOY#5}Zr#5}rs#3Rsw#5}wx#5Qx#O#5}#O#P#2d#P;'S#5};'S;=`#6v<%lO#5}01p#6yP;=`<%l#5}07[#7PP;=`<%l#/d)3h#7ab$i&j$Q(Ch(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;ZAt#8vb$Z#t$i&j(Wp(Z!b!X7`OY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Lcx!P!;Z!P!Q#&`!Q!^!;Z!^!_#(i!_!}!;Z!}#O#,f#O#P!Dy#P#o!;Z#o#p#(i#p;'S!;Z;'S;=`#-w<%lO!;Z'Ad#:Zp$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#U%Z#U#V#?i#V#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#d#Bq#d#l%Z#l#m#Es#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#<jk$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#<_![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#<_#S#X%Z#X#Y!4|#Y#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#>j_$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#?rd$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#A]f$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#AQ!R!S#AQ!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#AQ#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Bzc$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Dbe$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#DV!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#DV#S#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#E|g$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'Ad#Gpi$i&j(Wp(Z!bs'9tOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#Ge![!^%Z!^!_*g!_!c%Z!c!i#Ge!i#O%Z#O#P&c#P#R%Z#R#S#Ge#S#T%Z#T#Z#Ge#Z#b%Z#b#c#>_#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x#Il_!g$b$i&j$O)Lv(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#Jv_al$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f#LS^h#)`#R-<U(Wp(Z!b$n7`OY*gZr*grs'}sw*gwx)rx!P*g!P!Q#MO!Q!^*g!^!_#Mt!_!`$ f!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#MXX$k&j(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El#M}Z#r(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#Np!`#O*g#P;'S*g;'S;=`+Z<%lO*g(El#NyX$Q(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g(El$ oX#s(Ch(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g*)x$!ga#`*!Y$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$#l!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(K[$#w_#k(Cl$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z*)x$%Vag!*r#s(Ch$f#|$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$&[!`!a$'f!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$&g_#s(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$'qa#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$(v!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$)R`#r(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(Kd$*`a(r(Ct$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!a%Z!a!b$+e!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$+p`$i&j#{(Ch(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`$,}_!|$Ip$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z04f$.X_!S0,v$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/]Z$i&jO!^$0O!^!_$0f!_#i$0O#i#j$0k#j#l$0O#l#m$2^#m#o$0O#o#p$0f#p;'S$0O;'S;=`$4i<%lO$0O(n$0VT_#S$i&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0kO_#S(n$0p[$i&jO!Q&c!Q![$1f![!^&c!_!c&c!c!i$1f!i#T&c#T#Z$1f#Z#o&c#o#p$3|#p;'S&c;'S;=`&w<%lO&c(n$1kZ$i&jO!Q&c!Q![$2^![!^&c!_!c&c!c!i$2^!i#T&c#T#Z$2^#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2cZ$i&jO!Q&c!Q![$3U![!^&c!_!c&c!c!i$3U!i#T&c#T#Z$3U#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3ZZ$i&jO!Q&c!Q![$0O![!^&c!_!c&c!c!i$0O!i#T&c#T#Z$0O#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$4PR!Q![$4Y!c!i$4Y#T#Z$4Y#S$4]S!Q![$4Y!c!i$4Y#T#Z$4Y#q#r$0f(n$4lP;=`<%l$0O#1[$4z_!Y#)l$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(KW$6U`#x(Ch$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z+;p$7c_$i&j(Wp(Z!b(a+4QOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$8qk$i&j(Wp(Z!b(T,2j$_#t(e$I[OY%ZYZ&cZr%Zrs&}st%Ztu$8buw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$8b![!^%Z!^!_*g!_!c%Z!c!}$8b!}#O%Z#O#P&c#P#R%Z#R#S$8b#S#T%Z#T#o$8b#o#p*g#p$g%Z$g;'S$8b;'S;=`$<l<%lO$8b+d$:qk$i&j(Wp(Z!b$_#tOY%ZYZ&cZr%Zrs&}st%Ztu$:fuw%Zwx(rx}%Z}!O$:f!O!Q%Z!Q![$:f![!^%Z!^!_*g!_!c%Z!c!}$:f!}#O%Z#O#P&c#P#R%Z#R#S$:f#S#T%Z#T#o$:f#o#p*g#p$g%Z$g;'S$:f;'S;=`$<f<%lO$:f+d$<iP;=`<%l$:f07[$<oP;=`<%l$8b#Jf$<{X!_#Hb(Wp(Z!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g,#x$=sa(y+JY$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+e#q;'S%Z;'S;=`+a<%lO%Z)>v$?V_!^(CdvBr$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z?O$@a_!q7`$i&j(Wp(Z!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z07[$Aq|$i&j(Wp(Z!b'|0/l$]#t(T,2j(e$I[OX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$A`#BZ$ISEr$IS$I_$A`$I_$JTEr$JT$JU$A`$JU$KVEr$KV$KW$A`$KW&FUEr&FU&FV$A`&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$A`?HUOEr07[$D|k$i&j(Wp(Z!b'}0/l$]#t(T,2j(e$I[OY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[F5e,B5e,V5e,j5e,2,3,4,5,6,7,8,9,10,11,12,13,14,L5e,new Do("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOx~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!U~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(c~~",141,340),new Do("j~RQYZXz{^~^O(Q~~aP!P!Qd~iO(R~~",25,323)],topRules:{Script:[0,7],SingleExpression:[1,276],SingleClassItem:[2,277]},dialects:{jsx:0,ts:15175},dynamicPrecedences:{80:1,82:1,94:1,169:1,199:1},specialized:[{term:327,get:t=>Z5e[t]||-1},{term:343,get:t=>q5e[t]||-1},{term:95,get:t=>X5e[t]||-1}],tokenPrec:15201}),yE=[hs("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),hs("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),hs("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),hs("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),hs("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),hs(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),hs("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),hs(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),hs(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),hs('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),hs('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],G5e=yE.concat([hs("interface ${name} {\n	${}\n}",{label:"interface",detail:"definition",type:"keyword"}),hs("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),hs("enum ${name} {\n	${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),w6=new PR,OE=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function Fh(t){return(e,n)=>{let i=e.node.getChild("VariableDefinition");return i&&n(i,t),!0}}const U5e=["FunctionDeclaration"],H5e={FunctionDeclaration:Fh("function"),ClassDeclaration:Fh("class"),ClassExpression:()=>!0,EnumDeclaration:Fh("constant"),TypeAliasDeclaration:Fh("type"),NamespaceDeclaration:Fh("namespace"),VariableDefinition(t,e){t.matchContext(U5e)||e(t,"variable")},TypeDefinition(t,e){e(t,"type")},__proto__:null};function bE(t,e){let n=w6.get(e);if(n)return n;let i=[],s=!0;function r(o,a){let l=t.sliceString(o.from,o.to);i.push({label:l,type:a})}return e.cursor(en.IncludeAnonymous).iterate(o=>{if(s)s=!1;else if(o.name){let a=H5e[o.name];if(a&&a(o,r)||OE.has(o.name))return!1}else if(o.to-o.from>8192){for(let a of bE(t,o.node))i.push(a);return!1}}),w6.set(e,i),i}const S6=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,vE=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName","JSXText","JSXAttributeValue","JSXOpenTag","JSXCloseTag","JSXSelfClosingTag",".","?."];function Y5e(t){let e=Dn(t.state).resolveInner(t.pos,-1);if(vE.indexOf(e.name)>-1)return null;let n=e.name=="VariableName"||e.to-e.from<20&&S6.test(t.state.sliceDoc(e.from,e.to));if(!n&&!t.explicit)return null;let i=[];for(let s=e;s;s=s.parent)OE.has(s.name)&&(i=i.concat(bE(t.state.doc,s)));return{options:i,from:n?e.from:t.pos,validFor:S6}}const no=Zc.define({name:"javascript",parser:W5e.configure({props:[nO.add({IfStatement:ay({except:/^\s*({|else\b)/}),TryStatement:ay({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:Qwe,SwitchBody:t=>{let e=t.textAfter,n=/^\s*\}/.test(e),i=/^\s*(case|default)\b/.test(e);return t.baseIndent+(n?0:i?1:2)*t.unit},Block:Ewe({closing:"}"}),ArrowFunction:t=>t.baseIndent+t.unit,"TemplateString BlockComment":()=>null,"Statement Property":ay({except:/^\s*{/}),JSXElement(t){let e=/^\s*<\//.test(t.textAfter);return t.lineIndent(t.node.from)+(e?0:t.unit)},JSXEscape(t){let e=/\s*\}/.test(t.textAfter);return t.lineIndent(t.node.from)+(e?0:t.unit)},"JSXOpenTag JSXSelfClosingTag"(t){return t.column(t.node.from)+t.unit}}),iO.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":ER,BlockComment(t){return{from:t.from+2,to:t.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),wE={test:t=>/^JSX/.test(t.name),facet:MR({commentTokens:{block:{open:"{/*",close:"*/}"}}})},SE=no.configure({dialect:"ts"},"typescript"),CE=no.configure({dialect:"jsx",props:[TA.add(t=>t.isTop?[wE]:void 0)]}),AE=no.configure({dialect:"jsx ts",props:[TA.add(t=>t.isTop?[wE]:void 0)]},"typescript");let xE=t=>({label:t,type:"keyword"});const kE="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(xE),K5e=kE.concat(["declare","implements","private","protected","public"].map(xE));function J5e(t={}){let e=t.jsx?t.typescript?AE:CE:t.typescript?SE:no,n=t.typescript?G5e.concat(K5e):yE.concat(kE);return new J1(e,[no.data.of({autocomplete:sAe(vE,Q_(n))}),no.data.of({autocomplete:Y5e}),t.jsx?n3e:[]])}function e3e(t){for(;;){if(t.name=="JSXOpenTag"||t.name=="JSXSelfClosingTag"||t.name=="JSXFragmentTag")return t;if(t.name=="JSXEscape"||!t.parent)return null;t=t.parent}}function C6(t,e,n=t.length){for(let i=e==null?void 0:e.firstChild;i;i=i.nextSibling)if(i.name=="JSXIdentifier"||i.name=="JSXBuiltin"||i.name=="JSXNamespacedName"||i.name=="JSXMemberExpression")return t.sliceString(i.from,Math.min(i.to,n));return""}const t3e=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),n3e=Le.inputHandler.of((t,e,n,i,s)=>{if((t3e?t.composing:t.compositionStarted)||t.state.readOnly||e!=n||i!=">"&&i!="/"||!no.isActiveAt(t.state,e,-1))return!1;let r=s(),{state:o}=r,a=o.changeByRange(l=>{var c;let{head:u}=l,h=Dn(o).resolveInner(u-1,-1),p;if(h.name=="JSXStartTag"&&(h=h.parent),!(o.doc.sliceString(u-1,u)!=i||h.name=="JSXAttributeValue"&&h.to>u)){if(i==">"&&h.name=="JSXFragmentTag")return{range:l,changes:{from:u,insert:"</>"}};if(i=="/"&&h.name=="JSXStartCloseTag"){let m=h.parent,y=m.parent;if(y&&m.from==u-2&&((p=C6(o.doc,y.firstChild,u))||((c=y.firstChild)===null||c===void 0?void 0:c.name)=="JSXFragmentTag")){let O=`${p}>`;return{range:fe.cursor(u+O.length,-1),changes:{from:u,insert:O}}}}else if(i==">"){let m=e3e(h);if(m&&m.name=="JSXOpenTag"&&!/^\/?>|^<\//.test(o.doc.sliceString(u,u+2))&&(p=C6(o.doc,m,u)))return{range:l,changes:{from:u,insert:`</${p}>`}}}}return{range:l}});return a.changes.empty?!1:(t.dispatch([r,o.update(a,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),Bh=["_blank","_self","_top","_parent"],N2=["ascii","utf-8","utf-16","latin1","latin1"],L2=["get","post","put","delete"],F2=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],Vs=["true","false"],Ue={},i3e={a:{attrs:{href:null,ping:null,type:null,media:null,target:Bh,hreflang:null}},abbr:Ue,address:Ue,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:Ue,aside:Ue,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:Ue,base:{attrs:{href:null,target:Bh}},bdi:Ue,bdo:Ue,blockquote:{attrs:{cite:null}},body:Ue,br:Ue,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:F2,formmethod:L2,formnovalidate:["novalidate"],formtarget:Bh,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:Ue,center:Ue,cite:Ue,code:Ue,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:Ue,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:Ue,div:Ue,dl:Ue,dt:Ue,em:Ue,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:Ue,figure:Ue,footer:Ue,form:{attrs:{action:null,name:null,"accept-charset":N2,autocomplete:["on","off"],enctype:F2,method:L2,novalidate:["novalidate"],target:Bh}},h1:Ue,h2:Ue,h3:Ue,h4:Ue,h5:Ue,h6:Ue,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:Ue,hgroup:Ue,hr:Ue,html:{attrs:{manifest:null}},i:Ue,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:F2,formmethod:L2,formnovalidate:["novalidate"],formtarget:Bh,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:Ue,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:Ue,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:Ue,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:N2,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:Ue,noscript:Ue,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:Ue,param:{attrs:{name:null,value:null}},pre:Ue,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:Ue,rt:Ue,ruby:Ue,samp:Ue,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:N2}},section:Ue,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:Ue,source:{attrs:{src:null,type:null,media:null}},span:Ue,strong:Ue,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:Ue,summary:Ue,sup:Ue,table:Ue,tbody:Ue,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:Ue,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:Ue,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:Ue,time:{attrs:{datetime:null}},title:Ue,tr:Ue,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},ul:{children:["li","script","template","ul","ol"]},var:Ue,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:Ue},PE={accesskey:null,class:null,contenteditable:Vs,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:Vs,autocorrect:Vs,autocapitalize:Vs,style:null,tabindex:null,title:null,translate:["yes","no"],rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":Vs,"aria-autocomplete":["inline","list","both","none"],"aria-busy":Vs,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":Vs,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":Vs,"aria-hidden":Vs,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":Vs,"aria-multiselectable":Vs,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":Vs,"aria-relevant":null,"aria-required":Vs,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null},TE="beforeunload copy cut dragstart dragover dragleave dragenter dragend drag paste focus blur change click load mousedown mouseenter mouseleave mouseup keydown keyup resize scroll unload".split(" ").map(t=>"on"+t);for(let t of TE)PE[t]=null;class E0{constructor(e,n){this.tags={...i3e,...e},this.globalAttrs={...PE,...n},this.allTags=Object.keys(this.tags),this.globalAttrNames=Object.keys(this.globalAttrs)}}E0.default=new E0;function Bd(t,e,n=t.length){if(!e)return"";let i=e.firstChild,s=i&&i.getChild("TagName");return s?t.sliceString(s.from,Math.min(s.to,n)):""}function Vd(t,e=!1){for(;t;t=t.parent)if(t.name=="Element")if(e)e=!1;else return t;return null}function $E(t,e,n){let i=n.tags[Bd(t,Vd(e))];return(i==null?void 0:i.children)||n.allTags}function HA(t,e){let n=[];for(let i=Vd(e);i&&!i.type.isTop;i=Vd(i.parent)){let s=Bd(t,i);if(s&&i.lastChild.name=="CloseTag")break;s&&n.indexOf(s)<0&&(e.name=="EndTag"||e.from>=i.firstChild.to)&&n.push(s)}return n}const DE=/^[:\-\.\w\u00b7-\uffff]*$/;function A6(t,e,n,i,s){let r=/\s*>/.test(t.sliceDoc(s,s+5))?"":">",o=Vd(n,n.name=="StartTag"||n.name=="TagName");return{from:i,to:s,options:$E(t.doc,o,e).map(a=>({label:a,type:"type"})).concat(HA(t.doc,n).map((a,l)=>({label:"/"+a,apply:"/"+a+r,type:"type",boost:99-l}))),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function x6(t,e,n,i){let s=/\s*>/.test(t.sliceDoc(i,i+5))?"":">";return{from:n,to:i,options:HA(t.doc,e).map((r,o)=>({label:r,apply:r+s,type:"type",boost:99-o})),validFor:DE}}function s3e(t,e,n,i){let s=[],r=0;for(let o of $E(t.doc,n,e))s.push({label:"<"+o,type:"type"});for(let o of HA(t.doc,n))s.push({label:"</"+o+">",type:"type",boost:99-r++});return{from:i,to:i,options:s,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}function r3e(t,e,n,i,s){let r=Vd(n),o=r?e.tags[Bd(t.doc,r)]:null,a=o&&o.attrs?Object.keys(o.attrs):[],l=o&&o.globalAttrs===!1?a:a.length?a.concat(e.globalAttrNames):e.globalAttrNames;return{from:i,to:s,options:l.map(c=>({label:c,type:"property"})),validFor:DE}}function o3e(t,e,n,i,s){var r;let o=(r=n.parent)===null||r===void 0?void 0:r.getChild("AttributeName"),a=[],l;if(o){let c=t.sliceDoc(o.from,o.to),u=e.globalAttrs[c];if(!u){let h=Vd(n),p=h?e.tags[Bd(t.doc,h)]:null;u=(p==null?void 0:p.attrs)&&p.attrs[c]}if(u){let h=t.sliceDoc(i,s).toLowerCase(),p='"',m='"';/^['"]/.test(h)?(l=h[0]=='"'?/^[^"]*$/:/^[^']*$/,p="",m=t.sliceDoc(s,s+1)==h[0]?"":h[0],h=h.slice(1),i++):l=/^[^\s<>='"]*$/;for(let y of u)a.push({label:y,apply:p+y+m,type:"constant"})}}return{from:i,to:s,options:a,validFor:l}}function a3e(t,e){let{state:n,pos:i}=e,s=Dn(n).resolveInner(i,-1),r=s.resolve(i);for(let o=i,a;r==s&&(a=s.childBefore(o));){let l=a.lastChild;if(!l||!l.type.isError||l.from<l.to)break;r=s=a,o=l.from}return s.name=="TagName"?s.parent&&/CloseTag$/.test(s.parent.name)?x6(n,s,s.from,i):A6(n,t,s,s.from,i):s.name=="StartTag"||s.name=="IncompleteTag"?A6(n,t,s,i,i):s.name=="StartCloseTag"||s.name=="IncompleteCloseTag"?x6(n,s,i,i):s.name=="OpenTag"||s.name=="SelfClosingTag"||s.name=="AttributeName"?r3e(n,t,s,s.name=="AttributeName"?s.from:i,i):s.name=="Is"||s.name=="AttributeValue"||s.name=="UnquotedAttributeValue"?o3e(n,t,s,s.name=="Is"?i:s.from,i):e.explicit&&(r.name=="Element"||r.name=="Text"||r.name=="Document")?s3e(n,t,s,i):null}function l3e(t){let{extraTags:e,extraGlobalAttributes:n}=t,i=n||e?new E0(e,n):E0.default;return s=>a3e(i,s)}const c3e=no.parser.configure({top:"SingleExpression"}),ME=[{tag:"script",attrs:t=>t.type=="text/typescript"||t.lang=="ts",parser:SE.parser},{tag:"script",attrs:t=>t.type=="text/babel"||t.type=="text/jsx",parser:CE.parser},{tag:"script",attrs:t=>t.type=="text/typescript-jsx",parser:AE.parser},{tag:"script",attrs(t){return/^(importmap|speculationrules|application\/(.+\+)?json)$/i.test(t.type)},parser:c3e},{tag:"script",attrs(t){return!t.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(t.type)},parser:no.parser},{tag:"style",attrs(t){return(!t.lang||t.lang=="css")&&(!t.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(t.type))},parser:_0.parser}],IE=[{name:"style",parser:_0.parser.configure({top:"Styles"})}].concat(TE.map(t=>({name:t,parser:no.parser}))),RE=Zc.define({name:"html",parser:_ke.configure({props:[nO.add({Element(t){let e=/^(\s*)(<\/)?/.exec(t.textAfter);return t.node.to<=t.pos+e[0].length?t.continue():t.lineIndent(t.node.from)+(e[2]?0:t.unit)},"OpenTag CloseTag SelfClosingTag"(t){return t.column(t.node.from)+t.unit},Document(t){if(t.pos+/\s*/.exec(t.textAfter)[0].length<t.node.to)return t.continue();let e=null,n;for(let i=t.node;;){let s=i.lastChild;if(!s||s.name!="Element"||s.to!=i.to)break;e=i=s}return e&&!((n=e.lastChild)&&(n.name=="CloseTag"||n.name=="SelfClosingTag"))?t.lineIndent(e.from)+t.unit:null}}),iO.add({Element(t){let e=t.firstChild,n=t.lastChild;return!e||e.name!="OpenTag"?null:{from:e.to,to:n.name=="CloseTag"?n.from:t.to}}}),GR.add({"OpenTag CloseTag":t=>t.getChild("TagName")})]}),languageData:{commentTokens:{block:{open:"<!--",close:"-->"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-_"}}),uy=RE.configure({wrap:uE(ME,IE)});function u3e(t={}){let e="",n;t.matchClosingTags===!1&&(e="noMatch"),t.selfClosingTags===!0&&(e=(e?e+" ":"")+"selfClosing"),(t.nestedLanguages&&t.nestedLanguages.length||t.nestedAttributes&&t.nestedAttributes.length)&&(n=uE((t.nestedLanguages||[]).concat(ME),(t.nestedAttributes||[]).concat(IE)));let i=n?RE.configure({wrap:n,dialect:e}):e?uy.configure({dialect:e}):uy;return new J1(i,[uy.data.of({autocomplete:l3e(t)}),t.autoCloseTags!==!1?d3e:[],J5e().support,g5e().support])}const k6=new Set("area base br col command embed frame hr img input keygen link meta param source track wbr menuitem".split(" ")),d3e=Le.inputHandler.of((t,e,n,i,s)=>{if(t.composing||t.state.readOnly||e!=n||i!=">"&&i!="/"||!uy.isActiveAt(t.state,e,-1))return!1;let r=s(),{state:o}=r,a=o.changeByRange(l=>{var c,u,h;let p=o.doc.sliceString(l.from-1,l.to)==i,{head:m}=l,y=Dn(o).resolveInner(m,-1),O;if(p&&i==">"&&y.name=="EndTag"){let S=y.parent;if(((u=(c=S.parent)===null||c===void 0?void 0:c.lastChild)===null||u===void 0?void 0:u.name)!="CloseTag"&&(O=Bd(o.doc,S.parent,m))&&!k6.has(O)){let x=m+(o.doc.sliceString(m,m+1)===">"?1:0),T=`</${O}>`;return{range:l,changes:{from:m,to:x,insert:T}}}}else if(p&&i=="/"&&y.name=="IncompleteCloseTag"){let S=y.parent;if(y.from==m-2&&((h=S.lastChild)===null||h===void 0?void 0:h.name)!="CloseTag"&&(O=Bd(o.doc,S,m))&&!k6.has(O)){let x=m+(o.doc.sliceString(m,m+1)===">"?1:0),T=`${O}>`;return{range:fe.cursor(m+T.length,-1),changes:{from:m,to:x,insert:T}}}}return{range:l}});return a.changes.empty?!1:(t.dispatch([r,o.update(a,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),h3e=Xc.deserialize({version:14,states:"%pOVOWOOObQPOOOpOSO'#C_OOOO'#Cp'#CpQVOWOOQxQPOOO!TQQOOQ!YQPOOOOOO,58y,58yO!_OSO,58yOOOO-E6n-E6nO!dQQO'#CqQ{QPOOO!iQPOOQ{QPOOO!qQPOOOOOO1G.e1G.eOOQO,59],59]OOQO-E6o-E6oO!yOpO'#CiO#RO`O'#CiQOQPOOO#ZO#tO'#CmO#fO!bO'#CmOOQO,59T,59TO#qOpO,59TO#vO`O,59TOOOO'#Cr'#CrO#{O#tO,59XOOQO,59X,59XOOOO'#Cs'#CsO$WO!bO,59XOOQO1G.o1G.oOOOO-E6p-E6pOOQO1G.s1G.sOOOO-E6q-E6q",stateData:"$g~OjOS~OQROUROkQO~OWTOXUOZUO`VO~OSXOTWO~OXUO[]OlZO~OY^O~O[_O~OT`O~OYaO~OmcOodO~OmfOogO~O^iOnhO~O_jOphO~ObkOqkOrmO~OcnOsnOtmO~OnpO~OppO~ObkOqkOrrO~OcnOsnOtrO~OWX`~",goto:"!^hPPPiPPPPPPPPPmPPPpPPsy!Q!WTROSRe]Re_QSORYSS[T^Rb[QlfRqlQogRso",nodeNames:" Content Text Interpolation InterpolationContent }} Entity Attribute VueAttributeName : Identifier @ Is ScriptAttributeValue AttributeScript AttributeScript AttributeName AttributeValue Entity Entity",maxTerm:36,nodeProps:[["isolate",-3,3,13,17,""]],skippedNodes:[0],repeatNodeCount:4,tokenData:"'y~RdXY!aYZ!a]^!apq!ars!rwx!w}!O!|!O!P#t!Q![#y![!]$s!_!`%g!b!c%l!c!}#y#R#S#y#T#j#y#j#k%q#k#o#y%W;'S#y;'S;:j$m<%lO#y~!fSj~XY!aYZ!a]^!apq!a~!wOm~~!|Oo~!b#RX`!b}!O!|!Q![!|![!]!|!c!}!|#R#S!|#T#o!|%W;'S!|;'S;:j#n<%lO!|!b#qP;=`<%l!|~#yOl~%W$QXY#t`!b}!O!|!Q![#y![!]!|!c!}#y#R#S#y#T#o#y%W;'S#y;'S;:j$m<%lO#y%W$pP;=`<%l#y~$zXX~`!b}!O!|!Q![!|![!]!|!c!}!|#R#S!|#T#o!|%W;'S!|;'S;:j#n<%lO!|~%lO[~~%qOZ~%W%xXY#t`!b}!O&e!Q![#y![!]!|!c!}#y#R#S#y#T#o#y%W;'S#y;'S;:j$m<%lO#y!b&jX`!b}!O!|!Q![!|![!]!|!c!}'V#R#S!|#T#o'V%W;'S!|;'S;:j#n<%lO!|!b'^XW!b`!b}!O!|!Q![!|![!]!|!c!}'V#R#S!|#T#o'V%W;'S!|;'S;:j#n<%lO!|",tokenizers:[6,7,new Do("b~RP#q#rU~XP#q#r[~aOT~~",17,4),new Do("!k~RQvwX#o#p!_~^TU~Opmq!]m!^;'Sm;'S;=`!X<%lOm~pUOpmq!]m!]!^!S!^;'Sm;'S;=`!X<%lOm~!XOU~~![P;=`<%lm~!bP#o#p!e~!jOk~~",72,2),new Do("[~RPwxU~ZOp~~",11,15),new Do("[~RPrsU~ZOn~~",11,14),new Do("!e~RQvwXwx!_~^Tc~Opmq!]m!^;'Sm;'S;=`!X<%lOm~pUOpmq!]m!]!^!S!^;'Sm;'S;=`!X<%lOm~!XOc~~![P;=`<%lm~!dOt~~",66,35),new Do("!e~RQrsXvw^~^Or~~cTb~Oprq!]r!^;'Sr;'S;=`!^<%lOr~uUOprq!]r!]!^!X!^;'Sr;'S;=`!^<%lOr~!^Ob~~!aP;=`<%lr~",66,33)],topRules:{Content:[0,1],Attribute:[1,7]},tokenPrec:157}),f3e=no.parser.configure({top:"SingleExpression"}),_E=h3e.configure({props:[Xp({Text:X.content,Is:X.definitionOperator,AttributeName:X.attributeName,VueAttributeName:X.keyword,Identifier:X.variableName,"AttributeValue ScriptAttributeValue":X.attributeValue,Entity:X.character,"{{ }}":X.brace,"@ :":X.punctuation})]}),EE={parser:f3e},p3e=_E.configure({wrap:K1((t,e)=>t.name=="InterpolationContent"?EE:null)}),m3e=_E.configure({wrap:K1((t,e)=>t.name=="AttributeScript"?EE:null),top:"Attribute"}),g3e={parser:p3e},y3e={parser:m3e},Kw=u3e();function QE(t){return t.configure({dialect:"selfClosing",wrap:K1(b3e)},"vue")}const O3e=QE(Kw.language);function b3e(t,e){switch(t.name){case"Attribute":return/^(@|:|v-)/.test(e.read(t.from,t.from+2))?y3e:null;case"Text":return g3e}return null}function v3e(t={}){let e=Kw;if(t.base){if(t.base.language.name!="html"||!(t.base.language instanceof Zc))throw new RangeError("The base option must be the result of calling html(...)");e=t.base}return new J1(e.language==Kw.language?O3e:QE(e.language),[e.support,e.language.data.of({closeBrackets:{brackets:["{",'"']}})])}const w3e=ve({props:{initialValue:{type:String,required:!0},disabled:{type:Boolean,default:!1},hints:{type:Object,default:void 0}},emits:["input","blur"],data(){return{state:null,view:null,compartments:{}}},computed:{container(){const{container:t}=this.$refs;if(t instanceof HTMLDivElement)return t;throw new Error("ref container is not a div element")}},watch:{disabled(t){this.setDisabled(t)}},mounted(){this.view||this.init(),this.fyo.store.isDevelopment&&(window.te=this)},methods:{init(){const t=new Rd,e=new Rd,n=Gp.define([{tag:X.typeName,color:pt.pink[600]},{tag:X.angleBracket,color:pt.pink[600]},{tag:X.attributeName,color:pt.gray[500]},{tag:X.attributeValue,color:pt.blue[500]},{tag:X.comment,color:pt.gray[500],fontStyle:"italic"},{tag:X.keyword,color:pt.orange[600]},{tag:X.variableName,color:pt.teal[600]},{tag:X.string,color:pt.blue[700]}]),i=S3e(this.hints??{}),s=new Le({doc:this.initialValue,extensions:[Le.updateListener.of(this.updateListener.bind(this)),t.of(Vt.readOnly.of(this.disabled)),e.of(Le.editable.of(!this.disabled)),hxe,v3e(),ZR(n),X_({override:[i]})],parent:this.container});this.view=Hs(s);const r={readOnly:t,editable:e};this.compartments=Hs(r)},updateListener(t){var e,n,i;t.docChanged&&this.$emit("input",((e=this.view)==null?void 0:e.state.doc.toString())??""),t.focusChanged&&!((n=this.view)!=null&&n.hasFocus)&&this.$emit("blur",((i=this.view)==null?void 0:i.state.doc.toString())??"")},setDisabled(t){var i;const{readOnly:e,editable:n}=this.compartments;(i=this.view)==null||i.dispatch({effects:[e.reconfigure(Vt.readOnly.of(t)),n.reconfigure(Le.editable.of(!t))]})}}});function S3e(t){const e=NE(t);return function(i){let s=i.matchBefore(/\w*/);if(s==null)return null;const r=Dn(i.state).resolveInner(i.pos);return!["ScriptAttributeValue","SingleExpression"].includes(r.name)||s.from===s.to&&!i.explicit?null:{from:s.from,options:e}}}function NE(t,e){e??(e="");const n=[];for(const[i,s]of Object.entries(t)){const r=C3e(i,s,e);if(r!==null){if(Array.isArray(r)){n.push(...r);continue}n.push(r)}}return n}function C3e(t,e,n){let i=t;return n.length&&(i=n+"."+t),Array.isArray(e)?{label:i,type:"variable",detail:"Child Table"}:typeof e=="string"?{label:i,type:"variable",detail:e}:typeof e=="object"&&e!==null?NE(e,i):null}const A3e={ref:"container",class:"bg-white dark:bg-gray-875 text-gray-900 dark:text-gray-100"};function x3e(t,e,n,i,s,r){return w(),P("div",A3e,null,512)}const k3e=ne(w3e,[["render",x3e]]),P3e=ve({components:{PageHeader:Nr,Button:At,DropdownWithActions:th,PrintContainer:JM,HorizontalResizer:mxe,TemplateEditor:k3e,FormControl:is,TemplateBuilderHint:jxe,ShortcutKeys:K_,Link:rr,Modal:di,SetPrintSize:kxe,SetType:Rxe},provide(){return{doc:Dt(()=>this.doc)}},props:{name:{type:String,required:!0}},setup(){const t=Cn(null),e=st(Is);let n="TemplateBuilder";return e&&(n=UC(e,t,n,!1)),{doc:t,context:n,shortcuts:e}},data(){return{editMode:!1,showHints:!1,hints:void 0,values:null,displayDoc:null,scale:.6,panelWidth:22*16,templateChanged:!1,showTypeModal:!1,showSizeModal:!1,preEditMode:{scale:.6,showSidebar:!0,panelWidth:22*16}}},computed:{canDisplayPreview(){var t;return!(!this.displayDoc||!this.values||!((t=this.doc)!=null&&t.template))},applyChangesShortcut(){return[vt.ctrl,vt.enter]},view(){const{view:t}=this.$refs.templateEditor??{};return t instanceof Le?t:null},maxWidth(){return window.innerWidth-12*16-100},actions(){if(!this.doc)return[];const t=JA(this.doc);return t.push({label:this.t`Print Settings`,group:this.t`View`,action:async()=>{await rd(A.PrintSettings)}}),this.doc.isCustom&&!this.showTypeModal&&t.push({label:this.t`Set Template Type`,group:this.t`Action`,action:()=>this.showTypeModal=!0}),this.doc.isCustom&&!this.showSizeModal&&t.push({label:this.t`Set Print Size`,group:this.t`Action`,action:()=>this.showSizeModal=!0}),this.doc.isCustom&&t.push({label:this.t`Select Template File`,group:this.t`Action`,action:this.selectFile.bind(this)}),t.push({label:this.t`Save Template File`,group:this.t`Action`,action:this.saveFile.bind(this)}),t},fields(){var t;return er(((t=this.fyo.schemaMap.PrintTemplate)==null?void 0:t.fields)??[],"fieldname")},displayDocField(){var e;const t=((e=this.doc)==null?void 0:e.type)??A.SalesInvoice;return{fieldname:"displayDoc",label:this.t`Display Doc`,fieldtype:"Link",target:t}},helperMessage(){return this.doc?this.doc.type?this.displayDoc?this.doc.template?"":this.t`Set a Template value to see the Print Template`:this.t`Select a Display Doc to view the Template`:this.t`Select a Template type`:""},templateBuilderBodyStyles(){const t={};return t["grid-template-columns"]=`auto 0px ${this.panelWidth}px`,t.height="calc(100vh - var(--h-row-largest) - 1px)",t},templateDisplayStyles(){const t={};return t.height=`calc(100vh - var(--h-row-largest) - 1px - ${this.platform=="Windows"?"var(--h-row-smallest)":"0px"}`,t}},async mounted(){await this.initialize(),this.fyo.store.isDevelopment&&(window.tb=this)},async activated(){await this.initialize(),Ai.value=Xo.PrintTemplate??"",this.setShortcuts()},deactivated(){var t;Ai.value="",this.editMode&&this.disableEditMode(),!((t=this.doc)!=null&&t.dirty)&&this.reset()},methods:{setShortcuts(){this.shortcuts&&(this.shortcuts.ctrl.set(this.context,["Enter"],this.setTemplate.bind(this)),this.shortcuts.ctrl.set(this.context,["KeyE"],this.toggleEditMode.bind(this)),this.shortcuts.ctrl.set(this.context,["KeyH"],this.toggleShowHints.bind(this)),this.shortcuts.ctrl.set(this.context,["Equal"],()=>this.setScale(this.scale+.1)),this.shortcuts.ctrl.set(this.context,["Minus"],()=>this.setScale(this.scale-.1)))},async initialize(){var t,e,n;await this.setDoc(),(t=this.doc)!=null&&t.type&&(this.hints=tw(this.doc.type,this.fyo)),dO(this.doc,this.$refs.nameField,!1),(e=this.doc)!=null&&e.template||await((n=this.doc)==null?void 0:n.set("template",YM)),await this.setDisplayInitialDoc()},reset(){this.doc=null,this.displayDoc=null},getTemplateEditorState(){var e;const t=((e=this.doc)==null?void 0:e.template)??"";return this.view?this.view.state.doc.toString():t},async setTemplate(t){var e,n;this.templateChanged=!1,(e=this.doc)!=null&&e.isCustom&&(t??(t=this.getTemplateEditorState()),await((n=this.doc)==null?void 0:n.set("template",t)))},setScale(t){let e=this.scale;typeof t=="number"?e=Number(t.toFixed(2)):t instanceof Event&&t.target instanceof HTMLInputElement&&(e=Number(t.target.value)),this.scale=Math.max(Math.min(e,10),.15)},toggleShowHints(){this.showHints=!this.showHints},toggleEditMode(){var e;if(!((e=this.doc)!=null&&e.isCustom))return;let t=this.t`Please set a Display Doc`;if(!this.displayDoc)return it({type:"warning",message:t,duration:"short"});if(this.editMode=!this.editMode,this.editMode)return this.enableEditMode();this.disableEditMode()},enableEditMode(){var t;this.preEditMode.showSidebar=Fo.value,this.preEditMode.panelWidth=this.panelWidth,this.preEditMode.scale=this.scale,this.panelWidth=Math.max(window.innerWidth/2,this.panelWidth),Fo.value=!1,this.scale=this.getEditModeScale(),(t=this.view)==null||t.focus()},disableEditMode(){Fo.value=this.preEditMode.showSidebar,this.panelWidth=this.preEditMode.panelWidth,this.scale=this.preEditMode.scale},getEditModeScale(){const t=this.$refs.printContainer.$el;if(!(t instanceof HTMLDivElement))return this.scale;const e=16*2+16*.6,n=window.innerWidth/2-e,i=t.getBoundingClientRect().width,s=n*this.scale/i;return Number(s.toFixed(2))},savePDF(t){var n;const e=this.$refs.printContainer;e!=null&&e.savePDF&&e.savePDF((n=this.doc)==null?void 0:n.name,t)},async setDisplayInitialDoc(){var i,s,r,o;const t=(i=this.doc)==null?void 0:i.type;if(!t||((s=this.displayDoc)==null?void 0:s.schemaName)===t)return;const n=(r=(await this.fyo.db.getAll(t,{limit:1,order:"desc",orderBy:"created",filters:{cancelled:!1}}))[0])==null?void 0:r.name;if(!n){const a=((o=this.fyo.schemaMap[t])==null?void 0:o.label)??t;await Qn({title:this.t`No Display Entries Found`,detail:this.t`Please create a ${a} entry to view Template Preview.`,type:"warning"});return}await this.setDisplayDoc(n)},async sync(){const t=this.doc;if(t)try{await t.sync()}catch(e){await mo(e,t)}},async setDoc(){this.doc||(this.doc=await pp(A.PrintTemplate,this.name))},async setType(t){var e;typeof t=="string"&&(await((e=this.doc)==null?void 0:e.set("type",t)),await this.setDisplayInitialDoc())},async setDisplayDoc(t){var i;if(!t){delete this.hints,this.values=null,this.displayDoc=null;return}const e=(i=this.doc)==null?void 0:i.type;if(!e)return;const n=await pp(e,t);this.hints=tw(e,this.fyo),this.values=await iA(n),this.displayDoc=n},async selectFile(){var i,s,r,o;const{name:t,text:e}=await tx([{name:"Template",extensions:["template.html","html"]}]);if(!e||(await((i=this.doc)==null?void 0:i.set("template",e)),(s=this.view)==null||s.dispatch({changes:{from:0,to:this.view.state.doc.length,insert:e}}),(r=this.doc)!=null&&r.inserted))return;let n=null;t.endsWith(".template.html")&&(n=t.split(".template.html")[0]),!n&&t.endsWith(".html")&&(n=t.split(".html")[0]),n&&await((o=this.doc)==null?void 0:o.set("name",n))},async saveFile(){var s;const t=(s=this.doc)==null?void 0:s.name,e=this.getTemplateEditorState();if(!t)return it({type:"warning",message:this.t`Print Template Name not set`});if(!e)return it({type:"warning",message:this.t`Print Template is empty`});const{canceled:n,filePath:i}=await Wl(t,"template.html");n||!i||await LC(e,i,this.t`Template file saved`)}}}),T3e={key:0,class:"p-4 overflow-auto custom-scroll custom-scroll-thumb1"},$3e={key:1,class:"text-sm text-gray-700 dark:text-gray-300 p-4"},D3e={class:"w-full sticky bottom-0 flex bg-white dark:bg-gray-890 border-t dark:border-gray-800 mt-auto flex-shrink-0"},M3e={key:1,class:"flex ml-auto gap-2 px-2 w-36 justify-between flex-shrink-0"},I3e={class:"text-sm text-gray-600 dark:text-gray-400 my-auto"},R3e=["value"],_3e={class:"min-h-0"},E3e={key:0,class:"flex gap-2 p-2 text-sm text-gray-600 dark:text-gray-400 items-center mt-auto border-t dark:border-gray-800"},Q3e={class:"text-base text-gray-900 dark:text-gray-200 font-semibold"},N3e={key:0,class:"overflow-auto custom-scroll custom-scroll-thumb1 p-2 border-t dark:border-gray-800",style:{"max-height":"30vh"}};function L3e(t,e,n,i,s,r){var D;const o=Q("FormControl"),a=Q("Button"),l=Q("feather-icon"),c=Q("DropdownWithActions"),u=Q("PageHeader"),h=Q("PrintContainer"),p=Q("Link"),m=Q("HorizontalResizer"),y=Q("TemplateEditor"),O=Q("ShortcutKeys"),S=Q("TemplateBuilderHint"),x=Q("SetPrintSize"),T=Q("Modal"),k=Q("SetType");return w(),P("div",null,[_(u,{title:t.doc&&t.doc.inserted?t.doc.name:""},jS({default:U(()=>{var M,L,j;return[t.displayDoc&&((M=t.doc)!=null&&M.template)?(w(),H(a,{key:0,onClick:e[1]||(e[1]=G=>t.savePDF())},{default:U(()=>[He(R(t.t`Save as PDF`),1)]),_:1})):B("",!0),t.displayDoc&&((L=t.doc)!=null&&L.template)?(w(),H(a,{key:1,onClick:e[2]||(e[2]=G=>t.savePDF(!0))},{default:U(()=>[He(R(t.t`Print`),1)]),_:1})):B("",!0),t.doc&&t.doc.isCustom&&t.displayDoc?(w(),H(a,{key:2,title:t.t`Toggle Edit Mode`,icon:!0,onClick:t.toggleEditMode},{default:U(()=>[_(l,{name:"edit",class:"w-4 h-4"})]),_:1},8,["title","onClick"])):B("",!0),t.actions.length?(w(),H(c,{key:3,actions:t.actions},null,8,["actions"])):B("",!0),(j=t.doc)!=null&&j.canSave?(w(),H(a,{key:4,type:"primary",onClick:e[3]||(e[3]=G=>t.sync())},{default:U(()=>[He(R(t.t`Save`),1)]),_:1})):B("",!0)]}),_:2},[t.doc&&!t.doc.inserted?{name:"left",fn:U(()=>[_(o,{ref:"nameField",class:"w-60 flex-shrink-0",size:"small","input-class":["font-semibold text-xl"],df:t.fields.name,border:!0,value:t.doc.name,onChange:e[0]||(e[0]=async M=>{var L;return await((L=t.doc)==null?void 0:L.set("name",M))})},null,8,["df","value"])]),key:"0"}:void 0]),1032,["title"]),t.doc?(w(),P("div",{key:0,class:"w-full bg-gray-50 dark:bg-gray-875 grid",style:qe(t.templateBuilderBodyStyles)},[v("div",{class:"overflow-auto no-scrollbar flex flex-col",style:qe(t.templateDisplayStyles)},[t.canDisplayPreview?(w(),P("div",T3e,[_(h,{ref:"printContainer","print-schema-name":t.displayDoc.schemaName,template:t.doc.template,values:t.values,scale:t.scale,height:t.doc.height,width:t.doc.width},null,8,["print-schema-name","template","values","scale","height","width"])])):t.helperMessage?(w(),P("p",$3e,R(t.helperMessage),1)):B("",!0),v("div",D3e,[_(o,{title:t.fields.type.label,class:"w-40 border-r dark:border-gray-800 flex-shrink-0",df:t.fields.type,border:!1,value:t.doc.get("type"),"container-styles":{"border-radius":"0px"},onChange:e[4]||(e[4]=async M=>await t.setType(M))},null,8,["title","df","value"]),t.doc.type?(w(),H(p,{key:0,title:t.displayDocField.label,class:"w-40 border-r dark:border-gray-800 flex-shrink-0",df:t.displayDocField,border:!1,value:(D=t.displayDoc)==null?void 0:D.name,"container-styles":{"border-radius":"0px"},onChange:e[5]||(e[5]=M=>t.setDisplayDoc(M))},null,8,["title","df","value"])):B("",!0),t.canDisplayPreview?(w(),P("div",M3e,[v("p",I3e,R(t.t`Display Scale`),1),v("input",{type:"number",class:"my-auto w-10 text-base text-end bg-transparent text-gray-800 focus:text-gray-900",value:t.scale,min:"0.1",max:"10",step:"0.1",onChange:e[6]||(e[6]=(...M)=>t.setScale&&t.setScale(...M)),onInput:e[7]||(e[7]=(...M)=>t.setScale&&t.setScale(...M))},null,40,R3e)])):B("",!0)])],4),_(m,{"initial-x":t.panelWidth,"min-x":22*16,"max-x":t.maxWidth,style:{"z-index":"5"},onResize:e[8]||(e[8]=M=>t.panelWidth=M)},null,8,["initial-x","max-x"]),v("div",{class:"border-l dark:border-gray-800 bg-white dark:bg-gray-890 flex flex-col",style:qe(t.templateDisplayStyles)},[v("div",_3e,[typeof t.doc.template=="string"&&t.hints?(w(),H(y,{key:0,ref:"templateEditor",class:"overflow-auto custom-scroll custom-scroll-thumb1 h-full","initial-value":t.doc.template,disabled:!t.doc.isCustom,hints:t.hints,onInput:e[9]||(e[9]=()=>t.templateChanged=!0),onBlur:e[10]||(e[10]=M=>t.setTemplate(M))},null,8,["initial-value","disabled","hints"])):B("",!0)]),t.templateChanged?(w(),P("div",E3e,[_(O,{keys:t.applyChangesShortcut,simple:!0},null,8,["keys"]),He(" "+R(t.t` to apply changes`),1)])):B("",!0),t.hints?(w(),P("div",{key:1,class:ee(["border-t dark:border-gray-800 flex-shrink-0",t.templateChanged?"":"mt-auto"])},[v("div",{class:"flex justify-between items-center cursor-pointer select-none p-2",onClick:e[11]||(e[11]=(...M)=>t.toggleShowHints&&t.toggleShowHints(...M))},[v("h2",Q3e,R(t.t`Key Hints`),1),_(l,{name:t.showHints?"chevron-up":"chevron-down",class:"w-4 h-4 text-gray-600 dark:text-gray-400 resize-none"},null,8,["name"])]),_(Ir,{name:"hints"},{default:U(()=>[t.showHints?(w(),P("div",N3e,[_(S,{hints:t.hints},null,8,["hints"])])):B("",!0)]),_:1})],2)):B("",!0)],4)],4)):B("",!0),t.doc?(w(),H(T,{key:1,"open-modal":t.showSizeModal,onClosemodal:e[13]||(e[13]=M=>t.showSizeModal=!t.showSizeModal)},{default:U(()=>[_(x,{doc:t.doc,onDone:e[12]||(e[12]=M=>t.showSizeModal=!t.showSizeModal)},null,8,["doc"])]),_:1},8,["open-modal"])):B("",!0),t.doc?(w(),H(T,{key:2,"open-modal":t.showTypeModal,onClosemodal:e[15]||(e[15]=M=>t.showTypeModal=!t.showTypeModal)},{default:U(()=>[_(k,{doc:t.doc,onDone:e[14]||(e[14]=M=>t.showTypeModal=!t.showTypeModal)},null,8,["doc"])]),_:1},8,["open-modal"])):B("",!0)])}const F3e=ne(P3e,[["render",L3e],["__scopeId","data-v-9b450334"]]),B3e=ve({components:{PageHeader:Nr,Button:At,DropdownWithActions:th,AutoComplete:zl},data(){return{errorMessage:"",formType:""}},computed:{customizableSchemas(){return Object.keys(this.fyo.schemaMap).filter(e=>{const n=this.fyo.schemaMap[e];return!n||n!=null&&n.isSingle?!1:![A.NumberSeries,A.SingleValue,A.SetupWizard,A.PatchRun].includes(e)}).map(e=>{var n;return{value:e,label:((n=this.fyo.schemaMap[e])==null?void 0:n.label)??e}})},helpMessage(){return this.formType?"":this.t`Select a form type to customize`}},methods:{setEntryType(t){this.formType=t}}}),V3e={class:"flex text-base w-full flex-col"},j3e={class:"h-row-largest flex flex-row justify-start items-center w-full gap-2 border-b dark:border-gray-800 p-4"},z3e={key:0,class:"text-base ms-2 text-red-500"},Z3e={key:1,class:"text-base ms-2 text-gray-700 dark:text-gray-300"};function q3e(t,e,n,i,s,r){const o=Q("DropdownWithActions"),a=Q("Button"),l=Q("PageHeader"),c=Q("AutoComplete");return w(),P("div",null,[_(l,{title:t.t`Customize Form`},{default:U(()=>[_(o,{actions:[],disabled:!1,title:t.t`More`},null,8,["title"]),_(a,{title:t.t`Save Customizations`,type:"primary"},{default:U(()=>[He(R(t.t`Save`),1)]),_:1},8,["title"])]),_:1},8,["title"]),v("div",V3e,[v("div",j3e,[_(c,{df:{fieldname:"formType",label:t.t`Form Type`,fieldtype:"AutoComplete",options:t.customizableSchemas},"input-class":"bg-transparent text-gray-900 dark:text-gray-100 text-base",class:"w-40",border:!0,value:t.formType,size:"small",onChange:t.setEntryType},null,8,["df","value","onChange"]),t.errorMessage?(w(),P("p",z3e,R(t.errorMessage),1)):t.helpMessage?(w(),P("p",Z3e,R(t.helpMessage),1)):B("",!0)])])])}const X3e=ne(B3e,[["render",q3e]]);async function Jw(t){var n;const e=await t.db.getAll(A.POSOpeningShift,{limit:1,orderBy:"created",fields:["name"]});return!((n=t.singles.POSSettings)!=null&&n.isShiftOpen)||!e?t.doc.getNewDoc(A.POSOpeningShift):await t.doc.getDoc(A.POSOpeningShift,e[0].name)}function W3e(t){let e=kn(0);if(!t.length)return e;for(const n of t){const i=n.quantity??0;e=kn(e+i)}return e}function G3e(t){var n;let e=N.pesa(0);if(!t.length)return e;for(const i of t)i.setItemDiscountAmount?(n=i.itemDiscountAmount)!=null&&n.isZero()||(e=e.add(i.itemDiscountAmount.mul(i.quantity))):i.amount&&i.itemDiscountPercent>1&&(e=e.add(i.amount.percent(i.itemDiscountPercent)));return e}async function LE(t){const e=await N.doc.getDoc(A.Item,t);if(e)return e}async function U3e(t,e){t&&await H3e(t.items,e,t.returnAgainst)}async function H3e(t,e,n){for(const i of t){if(!await N.getValue(A.Item,i.item,"trackItem"))return;if(!i.quantity||i.quantity<1&&!n)throw new ie(b`Invalid Quantity for Item ${i.item}`);if(!e[i.item])throw new ie(b`Item ${i.item} not in Stock`);if(i.quantity>e[i.item].availableQty)throw new ie(b`Insufficient Quantity. Item ${i.item} has only ${e[i.item].availableQty} quantities available. you selected ${i.quantity}`)}}async function Y3e(t){if(t)for(const e in t){const n=t[e].split(`
`);for(const i of n)if(await N.getValue(A.SerialNumber,i,"status")!=="Active")throw new ie(b`Serial Number ${i} status is not Active.`)}}function K3e(t){var e,n,i;try{if(!((e=t.singles.POSSettings)==null?void 0:e.inventory))throw new ie(b`POS Inventory is not set. Please set it on POS Settings`);if(!((n=t.singles.POSSettings)==null?void 0:n.cashAccount))throw new ie(b`POS Counter Cash Account is not set. Please set it on POS Settings`);if(!((i=t.singles.POSSettings)==null?void 0:i.writeOffAccount))throw new ie(b`POS Write Off Account is not set. Please set it on POS Settings`)}catch(s){it({type:"error",message:b`${s}`,duration:"long"})}}function J3e(t){var n,i;let e=N.pesa(0);if(!((n=t.items)!=null&&n.length)||!((i=t.taxes)!=null&&i.length))return e;for(const s of t.taxes)e=e.add(s.amount);return e}function e4e(t){var e;try{if(!t)throw new ie("POS Shift Document not loaded. Please reload.");(e=t.closingAmounts)==null||e.map(n=>{var i;if((i=n.closingAmount)!=null&&i.isNegative())throw new ie(b`Closing ${n.paymentMethod} Amount can not be negative.`)})}catch{}}async function t4e(t,e){var o,a,l,c,u,h,p,m,y;if(((a=(o=e.closingAmounts)==null?void 0:o.find(O=>O.paymentMethod==="Cash"))==null?void 0:a.expectedAmount).isZero())return;const i=(c=(l=e.closingAmounts)==null?void 0:l.find(O=>O.paymentMethod==="Cash"))==null?void 0:c.closingAmount,s=t.doc.getNewDoc(A.JournalEntry,{entryType:"Journal Entry"});await s.append("accounts",{account:ln.Cash,debit:i}),await s.append("accounts",{account:(u=t.singles.POSSettings)==null?void 0:u.cashAccount,credit:i});const r=(p=(h=e==null?void 0:e.closingAmounts)==null?void 0:h.find(O=>O.paymentMethod==="Cash"))==null?void 0:p.differenceAmount;r.isNegative()&&(await s.append("accounts",{account:ln.Cash,debit:r.abs(),credit:t.pesa(0)}),await s.append("accounts",{account:(m=t.singles.POSSettings)==null?void 0:m.writeOffAccount,debit:t.pesa(0),credit:r.abs()})),!r.isZero()&&r.isPositive()&&(await s.append("accounts",{account:(y=t.singles.POSSettings)==null?void 0:y.writeOffAccount,debit:r,credit:t.pesa(0)}),await s.append("accounts",{account:ln.Cash,debit:t.pesa(0),credit:r})),await(await s.sync()).submit()}function FE(t,e,n){let i=0;if(t&&(i=t.split(`
`).length),Math.abs(e)!==i){const s=b`Need ${e} Serial Numbers for Item ${n}. You have provided ${i}`;throw it({type:"error",message:s,duration:"long"}),new ie(s)}}const n4e=ve({name:"AlertModal",components:{Modal:di,Button:At},emits:["toggleModal","saveAndContinue"],methods:{routeTo:St}}),i4e={class:"text-center font-semibold py-3"},s4e={class:"py-6"},r4e={class:"row-start-6 grid grid-cols-2 gap-4 mt-auto pb-6"},o4e={class:"flex col-span-2 gap-5"},a4e={class:"uppercase text-lg text-white font-semibold"},l4e={class:"uppercase text-lg text-white font-semibold"},c4e={class:"col-span-2 flex justify-center mt-3"},u4e={class:"uppercase text-lg text-white font-semibold"};function d4e(t,e,n,i,s,r){const o=Q("Button"),a=Q("Modal");return w(),H(a,{class:"h-auto px-6 select-none","set-close-listener":!1},{default:U(()=>[v("p",i4e,R(t.t`Alert`),1),e[3]||(e[3]=v("hr",{class:"dark:border-gray-800"},null,-1)),v("p",s4e,R(t.t`Clicking continue will remove all the selected items.`),1),v("div",r4e,[v("div",o4e,[_(o,{class:"py-5 w-full bg-red-500 dark:bg-red-700",onClick:e[0]||(e[0]=l=>t.$emit("toggleModal","Alert"))},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",a4e,R(t.t`Cancel`),1)])]),_:3}),_(o,{class:"w-full py-5 bg-green-500 dark:bg-green-700",onClick:e[1]||(e[1]=l=>{t.routeTo("/list/SalesInvoice"),t.$emit("toggleModal","Alert")})},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",l4e,R(t.t`Continue`),1)])]),_:3})]),v("div",c4e,[_(o,{class:"w-full py-5 bg-blue-500 dark:bg-blue-700",onClick:e[2]||(e[2]=l=>t.$emit("saveAndContinue"))},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",u4e,R(t.t`Save and Continue`),1)])]),_:3})])])]),_:3})}const BE=ne(n4e,[["render",d4e]]),h4e=ve({name:"PaymentModal",components:{Modal:di,Currency:Bp,Button:At,Data:qa,Date:HC},emits:["createTransaction","setPaidAmount","setPaymentMethod","setTransferClearanceDate","setTransferRefNo","toggleModal"],setup(){return{paidAmount:st("paidAmount"),paymentMethod:st("paymentMethod"),isDiscountingEnabled:st("isDiscountingEnabled"),itemDiscounts:st("itemDiscounts"),transferAmount:st("transferAmount"),sinvDoc:st("sinvDoc"),transferRefNo:st("transferRefNo"),transferClearanceDate:st("transferClearanceDate"),totalTaxedAmount:st("totalTaxedAmount")}},data(){return{paymentMethods:[]}},computed:{isPaymentMethodIsCash(){return this.paymentMethod==="Cash"},balanceAmount(){var e;const t=((e=this.sinvDoc)==null?void 0:e.grandTotal)??N.pesa(0);return ui(this.paidAmount)&&this.paidAmount.isZero()?t.sub(this.transferAmount):t.sub(this.paidAmount)},paidChange(){var e;const t=((e=this.sinvDoc)==null?void 0:e.grandTotal)??N.pesa(0);return this.fyo.pesa(this.paidAmount.float).isZero()?this.transferAmount.sub(t):this.fyo.pesa(this.paidAmount.float).sub(t)},showBalanceAmount(){var t,e;return!(this.paidAmount.float===0||this.fyo.pesa(this.paidAmount.float).gte(((t=this.sinvDoc)==null?void 0:t.grandTotal)??N.pesa(0))||this.transferAmount.gte(((e=this.sinvDoc)==null?void 0:e.grandTotal)??N.pesa(0)))},showPaidChange(){var t,e;return this.sinvDoc.isReturn||this.fyo.pesa(this.paidAmount.float).eq(N.pesa(0))&&this.transferAmount.eq(N.pesa(0))?!1:!!(this.fyo.pesa(this.paidAmount.float).gt(((t=this.sinvDoc)==null?void 0:t.grandTotal)??N.pesa(0))||this.transferAmount.gt(((e=this.sinvDoc)==null?void 0:e.grandTotal)??N.pesa(0)))}},async mounted(){await this.setPaymentMethods()},methods:{setPaymentMethodAndAmount(t){t&&(this.$emit("setPaymentMethod",t),this.$emit("setPaidAmount",this.sinvDoc.outstandingAmount.float))},async setPaymentMethods(){this.paymentMethods=(await this.fyo.db.getAll(A.PaymentMethod,{fields:["name"]})).map(t=>t.name)},submitTransaction(){if(!this.paymentMethod)return it({type:"error",message:this.fyo.t`Please select a payment method before submitting.`});this.$emit("createTransaction")},payTransaction(){if(!this.paymentMethod)return it({type:"error",message:this.fyo.t`Please select a payment method before proceeding with payment.`});this.$emit("createTransaction",!1,!0)},payAndPrintTransaction(){if(!this.paymentMethod)return it({type:"error",message:this.fyo.t`Please select a payment method before proceeding with payment.`});this.$emit("createTransaction",!0,!0)},cancelTransaction(){this.$emit("setPaidAmount",N.pesa(0)),this.$emit("toggleModal","Payment")}}}),f4e={key:0,class:"px-4 py-6 grid",style:{height:"95vh"}},p4e={class:"grid grid-cols-2 gap-6"},m4e={class:"uppercase text-lg text-white font-semibold"},g4e={class:"mt-8 grid grid-cols-2 gap-6"},y4e={class:"mt-14 grid grid-cols-2 gap-6"},O4e={class:"mb-14 row-start-4 row-span-2 grid grid-cols-2 gap-x-6 gap-y-11"},b4e={class:"grid grid-cols-2 gap-4 bottom-8"},v4e={class:"col-span-1"},w4e={class:"uppercase text-lg text-white font-semibold"},S4e={class:"col-span-1"},C4e={class:"uppercase text-lg text-white font-semibold"},A4e={class:"col-span-1"},x4e={class:"uppercase text-lg text-white font-semibold"},k4e={class:"col-span-1"},P4e={class:"uppercase text-lg text-white font-semibold"};function T4e(t,e,n,i,s,r){const o=Q("Currency"),a=Q("Button"),l=Q("Data"),c=Q("Date"),u=Q("Modal");return w(),H(u,{class:"w-2/6 ml-auto mr-3.5","set-close-listener":!1},{default:U(()=>{var h,p,m,y,O,S,x,T;return[t.sinvDoc.fieldMap?(w(),P("div",f4e,[_(o,{df:t.fyo.fieldMap.PaymentFor.amount,"read-only":!t.transferAmount.isZero(),border:!0,"text-right":!0,value:t.paidAmount,onChange:e[0]||(e[0]=k=>t.$emit("setPaidAmount",k.float))},null,8,["df","read-only","value"]),v("div",p4e,[(w(!0),P(le,null,Pe(t.paymentMethods,k=>(w(),H(a,{key:k,class:"w-full py-5 bg-teal-500",onClick:D=>t.setPaymentMethodAndAmount(k)},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",m4e,R(t.t`${k}`),1)])]),_:2},1032,["onClick"]))),128))]),v("div",g4e,[mn(_(l,{df:t.fyo.fieldMap.Payment.referenceId,"show-label":!0,border:!0,required:!t.transferAmount.isZero(),"read-only":!1,value:t.transferRefNo,onChange:e[1]||(e[1]=k=>t.$emit("setTransferRefNo",k))},null,8,["df","required","value"]),[[ii,!t.isPaymentMethodIsCash]]),mn(_(c,{df:t.fyo.fieldMap.Payment.clearanceDate,"show-label":!0,border:!0,required:!t.transferAmount.isZero(),"read-only":!1,value:t.transferClearanceDate,onChange:e[2]||(e[2]=k=>t.$emit("setTransferClearanceDate",k))},null,8,["df","required","value"]),[[ii,!t.isPaymentMethodIsCash]])]),v("div",y4e,[mn(_(o,{df:{label:t.t`Paid Change`,fieldtype:"Currency",fieldname:"paidChange"},"read-only":!0,"show-label":!0,border:!0,"text-right":!0,value:t.paidChange},null,8,["df","value"]),[[ii,t.showPaidChange]]),mn(_(o,{df:{label:t.t`Balance Amount`,fieldtype:"Currency",fieldname:"balanceAmount"},"read-only":!0,"show-label":!0,border:!0,"text-right":!0,value:t.balanceAmount},null,8,["df","value"]),[[ii,t.showBalanceAmount]])]),v("div",O4e,[_(o,{df:t.sinvDoc.fieldMap.netTotal,"read-only":!0,"show-label":!0,border:!0,"text-right":!0,value:(h=t.sinvDoc)==null?void 0:h.netTotal},null,8,["df","value"]),_(o,{df:{label:t.t`Taxes and Charges`,fieldtype:"Currency",fieldname:"taxesAndCharges"},"read-only":!0,"show-label":!0,border:!0,"text-right":!0,value:t.totalTaxedAmount},null,8,["df","value"]),_(o,{df:t.sinvDoc.fieldMap.baseGrandTotal,"read-only":!0,"show-label":!0,border:!0,"text-right":!0,value:(p=t.sinvDoc)==null?void 0:p.baseGrandTotal},null,8,["df","value"]),t.isDiscountingEnabled?(w(),H(o,{key:0,df:t.sinvDoc.fieldMap.discountAmount,"read-only":!0,"show-label":!0,border:!0,"text-right":!0,value:t.itemDiscounts},null,8,["df","value"])):B("",!0),_(o,{df:t.sinvDoc.fieldMap.grandTotal,"read-only":!0,"show-label":!0,border:!0,"text-right":!0,value:(m=t.sinvDoc)==null?void 0:m.grandTotal},null,8,["df","value"]),_(o,{df:t.sinvDoc.fieldMap.outstandingAmount,"read-only":!0,"show-label":!0,border:!0,"text-right":!0,value:(y=t.sinvDoc)==null?void 0:y.outstandingAmount},null,8,["df","value"])]),v("div",b4e,[v("div",v4e,[_(a,{class:"w-full",style:qe([{backgroundColor:(O=t.fyo.singles.Defaults)==null?void 0:O.submitButtonColour},{padding:"1.35rem"}]),onClick:t.submitTransaction},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",w4e,R(t.t`Submit`),1)])]),_:3},8,["style","onClick"])]),v("div",S4e,[_(a,{class:"w-full",style:qe([{backgroundColor:(S=t.fyo.singles.Defaults)==null?void 0:S.cancelButtonColour},{padding:"1.35rem"}]),onClick:t.cancelTransaction},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",C4e,R(t.t`Cancel`),1)])]),_:3},8,["style","onClick"])]),v("div",A4e,[_(a,{class:"w-full",style:qe([{backgroundColor:(x=t.fyo.singles.Defaults)==null?void 0:x.payButtonColour},{padding:"1.35rem"}]),onClick:t.payTransaction},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",x4e,R(t.t`Pay`),1)])]),_:3},8,["style","onClick"])]),v("div",k4e,[_(a,{class:"w-full",style:qe([{backgroundColor:(T=t.fyo.singles.Defaults)==null?void 0:T.payAndPrintButtonColour},{padding:"1.35rem"}]),onClick:t.payAndPrintTransaction},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",P4e,R(t.t`Pay & Print`),1)])]),_:3},8,["style","onClick"])])])])):B("",!0)]}),_:3})}const VE=ne(h4e,[["render",T4e]]),$4e=ve({name:"KeyboardModal",components:{Modal:di,Float:nh,Button:At,Currency:Bp},props:{modalStatus:Boolean,selectedItemRow:Rp,selectedItemField:{type:String,default:""}},emits:["toggleModal","applyPricingRule"],setup(){return{sinvDoc:st("sinvDoc")}},data(){return{selectedValue:""}},watch:{async modalStatus(t){t&&(await this.$nextTick(),await this.focusInput()),this.updateSelectedValue()}},async mounted(){this.updateSelectedValue(),await this.focusInput()},methods:{async appendValue(t){t==="-"?this.selectedValue=this.selectedValue.startsWith("-")?this.selectedValue:`-${this.selectedValue}`:t==="+"?this.selectedValue=this.selectedValue.startsWith("-")?this.selectedValue.slice(1):this.selectedValue:this.selectedValue=this.selectedValue==="0"?t:this.selectedValue+t,await this.focusInput()},updateSelectedValue(){var t;this.selectedValue="",((t=this.selectedItemRow)==null?void 0:t.fieldMap[this.selectedItemField].fieldtype)!==A.Currency&&(this.selectedValue=this.selectedItemRow[this.selectedItemField])},handleInput(t){this.selectedValue=t},async saveSelectedItem(){var t,e,n,i,s,r;try{if(((t=this.selectedItemRow)==null?void 0:t.fieldMap[this.selectedItemField].fieldtype)===A.Currency){if(this.selectedItemRow[this.selectedItemField]=this.fyo.pesa(Number(this.selectedValue)),this.selectedItemField==="rate"){this.selectedItemRow.setRate=this.fyo.pesa(Number(this.selectedValue)),await this.sinvDoc.runFormulas(),this.$emit("toggleModal","Keyboard");return}if(this.selectedItemField==="itemDiscountAmount"){if((e=this.sinvDoc.grandTotal)!=null&&e.lte(this.selectedValue))throw this.selectedItemRow.itemDiscountAmount=this.fyo.pesa(0),new ie(this.fyo.t`Discount Amount (${this.fyo.format(this.selectedValue,"Currency")}) cannot be greated than Amount (${this.fyo.format(this.sinvDoc.grandTotal,"Currency")}).`);await this.selectedItemRow.set("setItemDiscountAmount",!0),await this.selectedItemRow.set("itemDiscountAmount",this.fyo.pesa(Number(this.selectedValue)))}}else{if(this.selectedItemRow[this.selectedItemField]=Number(this.selectedValue),this.selectedItemField==="itemDiscountPercent"){if(Number(this.selectedValue)>100)throw await((n=this.selectedItemRow)==null?void 0:n.set("itemDiscountPercent",0)),new ie(this.fyo.t`Discount Percent (${this.selectedValue}) cannot be greater than 100.`);await((i=this.selectedItemRow)==null?void 0:i.set("setItemDiscountAmount",!1)),await((s=this.selectedItemRow)==null?void 0:s.set("itemDiscountPercent",this.selectedValue))}if(this.selectedItemField==="quantity"){const o=((r=this.sinvDoc.items)==null?void 0:r.filter(a=>{var l;return a.item===((l=this.selectedItemRow)==null?void 0:l.item)&&!a.isFreeItem}))??[];await Eu(this.sinvDoc,this.selectedItemRow,o),this.$emit("applyPricingRule")}}await this.sinvDoc.runFormulas(),this.$emit("toggleModal","Keyboard")}catch(o){it({type:"error",message:this.t`${o}`}),this.selectedItemField==="quantity"&&this.$emit("applyPricingRule")}},async deleteLast(){var t;this.selectedValue=(t=this.selectedValue)==null?void 0:t.slice(0,-1),await this.focusInput()},async reset(){this.selectedValue="",await this.focusInput()},async focusInput(){var t;await this.$nextTick(),(t=this.$refs.dynamicInput)==null||t.focus()},async closeKeyboardModal(){await this.reset(),this.$emit("toggleModal","Keyboard")}}}),D4e={class:"px-5",style:{width:"30vw"}},M4e={class:"mx-6 my-3"},I4e={id:"keypad",class:"text-4xl grid grid-cols-4 gap-3 rounded font-bold py-4 dark:text-gray-400"},R4e={class:"grid col-span-2"},_4e={class:"px-5"},E4e={class:"grid row-start-6 grid-cols-2 gap-4 mt-auto mb-3"},Q4e={class:"col-span-2"},N4e={class:"uppercase text-lg text-white font-semibold"},L4e={class:"grid row-start-6 grid-cols-2 gap-4 mt-auto mb-8"},F4e={class:"col-span-2"},B4e={class:"uppercase text-lg text-white font-semibold"};function V4e(t,e,n,i,s,r){const o=Q("Button"),a=Q("Modal");return w(),H(a,{class:"h-auto","set-close-listener":!1},{default:U(()=>{var l,c,u,h;return[v("div",D4e,[e[18]||(e[18]=v("p",{class:"text-center dark:text-gray-400 font-semibold py-3"},"Keyboard",-1)),e[19]||(e[19]=v("hr",{class:"dark:border-gray-800"},null,-1)),v("div",M4e,[(w(),H(ro((l=t.selectedItemRow)==null?void 0:l.fieldMap[t.selectedItemField].fieldtype),{ref:"dynamicInput",df:{fieldname:(c=t.selectedItemRow)==null?void 0:c.fieldMap[t.selectedItemField].fieldname,fieldtype:(u=t.selectedItemRow)==null?void 0:u.fieldMap[t.selectedItemField].fieldtype,label:(h=t.selectedItemRow)==null?void 0:h.fieldMap[t.selectedItemField].label},class:"mb-3",border:!0,"show-label":!0,value:t.selectedValue,"focus-input":!0,onChange:e[0]||(e[0]=p=>t.handleInput(p.toString()))},null,40,["df","value"])),v("div",I4e,[v("button",{class:"py-2.5 bg-gray-100 text-2xl border-transparent rounded-lg transition-colors duration-200 hover:bg-gray-200 dark:bg-gray-875 dark:hover:bg-gray-900",onClick:e[1]||(e[1]=p=>t.appendValue("7"))}," 7 "),v("button",{class:"py-2.5 bg-gray-100 text-2xl border-transparent rounded-lg transition-colors duration-200 hover:bg-gray-200 dark:bg-gray-875 dark:hover:bg-gray-900",onClick:e[2]||(e[2]=p=>t.appendValue("8"))}," 8 "),v("button",{class:"py-2.5 bg-gray-100 text-2xl border-transparent rounded-lg transition-colors duration-200 hover:bg-gray-200 dark:bg-gray-875 dark:hover:bg-gray-900",onClick:e[3]||(e[3]=p=>t.appendValue("9"))}," 9 "),v("button",{class:"py-2.5 bg-gray-100 text-2xl border-transparent rounded-lg transition-colors duration-200 hover:bg-gray-200 dark:bg-gray-875 dark:hover:bg-gray-900",onClick:e[4]||(e[4]=p=>t.deleteLast())}," Del "),v("button",{class:"py-2.5 bg-gray-100 text-2xl border-transparent rounded-lg transition-colors duration-200 hover:bg-gray-200 dark:bg-gray-875 dark:hover:bg-gray-900",onClick:e[5]||(e[5]=p=>t.appendValue("4"))}," 4 "),v("button",{class:"py-2.5 bg-gray-100 text-2xl border-transparent rounded-lg transition-colors duration-200 hover:bg-gray-200 dark:bg-gray-875 dark:hover:bg-gray-900",onClick:e[6]||(e[6]=p=>t.appendValue("5"))}," 5 "),v("button",{class:"py-2.5 bg-gray-100 text-2xl border-transparent rounded-lg transition-colors duration-200 hover:bg-gray-200 dark:bg-gray-875 dark:hover:bg-gray-900",onClick:e[7]||(e[7]=p=>t.appendValue("6"))}," 6 "),v("button",{class:"py-2.5 bg-gray-100 text-2xl border-transparent rounded-lg transition-colors duration-200 hover:bg-gray-200 dark:bg-gray-875 dark:hover:bg-gray-900",onClick:e[8]||(e[8]=p=>t.appendValue("-"))}," - "),v("button",{class:"py-2.5 bg-gray-100 text-2xl border-transparent rounded-lg transition-colors duration-200 hover:bg-gray-200 dark:bg-gray-875 dark:hover:bg-gray-900",onClick:e[9]||(e[9]=p=>t.appendValue("1"))}," 1 "),v("button",{class:"py-2.5 bg-gray-100 text-2xl border-transparent rounded-lg transition-colors duration-200 hover:bg-gray-200 dark:bg-gray-875 dark:hover:bg-gray-900",onClick:e[10]||(e[10]=p=>t.appendValue("2"))}," 2 "),v("button",{class:"py-2.5 bg-gray-100 text-2xl border-transparent rounded-lg transition-colors duration-200 hover:bg-gray-200 dark:bg-gray-875 dark:hover:bg-gray-900",onClick:e[11]||(e[11]=p=>t.appendValue("3"))}," 3 "),v("button",{class:"py-2.5 bg-gray-100 text-2xl border-transparent rounded-lg transition-colors duration-200 hover:bg-gray-200 dark:bg-gray-875 dark:hover:bg-gray-900",onClick:e[12]||(e[12]=p=>t.appendValue("+"))}," + "),v("button",{class:"py-2.5 bg-gray-100 text-2xl border-transparent rounded-lg transition-colors duration-200 hover:bg-gray-200 dark:bg-gray-875 dark:hover:bg-gray-900",onClick:e[13]||(e[13]=p=>t.appendValue("."))},"  "),v("button",{class:"py-2.5 bg-gray-100 text-2xl border-transparent rounded-lg transition-colors duration-200 hover:bg-gray-200 dark:bg-gray-875 dark:hover:bg-gray-900",onClick:e[14]||(e[14]=p=>t.appendValue("0"))}," 0 "),v("div",R4e,[v("button",{class:"py-2.5 bg-gray-100 text-2xl border-transparent rounded-lg transition-colors duration-200 hover:bg-gray-200 dark:bg-gray-875 dark:hover:bg-gray-900",onClick:e[15]||(e[15]=p=>t.reset())}," Clear ")])])]),v("div",_4e,[v("div",E4e,[v("div",Q4e,[_(o,{class:"w-full bg-green-500 dark:bg-green-700",style:{padding:"1.35rem"},onClick:e[16]||(e[16]=p=>t.saveSelectedItem())},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",N4e,R(t.t`Save`),1)])]),_:3})])]),v("div",L4e,[v("div",F4e,[_(o,{class:"w-full bg-red-500 dark:bg-red-700",style:{padding:"1.35rem"},onClick:e[17]||(e[17]=p=>t.closeKeyboardModal())},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",B4e,R(t.t`Cancel`),1)])]),_:3})])])])])]}),_:3})}const j4e=ne($4e,[["render",V4e]]),z4e=ve({name:"PriceListModal",components:{Link:rr,Modal:di,Button:At},emits:["toggleModal"],setup(){return{sinvDoc:st("sinvDoc")}},methods:{async removePriceList(){await this.sinvDoc.set("priceList","")},async applyPriceList(t){try{if(!t||t==this.sinvDoc.priceList)return;await this.sinvDoc.set("priceList",t),this.$emit("toggleModal","PriceList")}catch(e){it({type:"error",message:b`${e}`})}},cancelPriceList(){this.$emit("toggleModal","PriceList")},setPriceList(){this.$emit("toggleModal","PriceList")}}}),Z4e={class:"text-center font-semibold py-3"},q4e={class:"px-10"},X4e={class:"flex justify-center pt-10"},W4e={class:"flex justify-between w-full mb-20"},G4e={class:"w-full"},U4e={class:"w-10 flex justify-end items-center"},H4e={class:"row-start-6 grid grid-cols-2 gap-4 mt-auto mb-2"},Y4e={class:"col-span-2"},K4e={class:"uppercase text-lg text-white font-semibold"},J4e={class:"row-start-6 grid grid-cols-2 gap-4 mt-auto mb-8"},e8e={class:"col-span-2"},t8e={class:"uppercase text-lg text-white font-semibold"};function n8e(t,e,n,i,s,r){const o=Q("Link"),a=Q("feather-icon"),l=Q("Button"),c=Q("Modal");return w(),H(c,{class:"h-auto w-96","set-close-listener":!1},{default:U(()=>{var u;return[v("p",Z4e,R(t.t`Apply Price List`),1),v("div",q4e,[e[1]||(e[1]=v("hr",{class:"dark:border-gray-800"},null,-1)),v("div",X4e,[v("div",W4e,[v("div",G4e,[t.sinvDoc.fieldMap?(w(),H(o,{key:0,class:"flex-shrink-0 w-full",border:!0,value:(u=t.sinvDoc)==null?void 0:u.priceList,"focus-input":!0,df:t.sinvDoc.fieldMap.priceList,onChange:e[0]||(e[0]=h=>t.applyPriceList(h))},null,8,["value","df"])):B("",!0)]),v("div",U4e,[_(a,{name:"trash",class:"w-5 text-xl text-red-500",onClick:t.removePriceList},null,8,["onClick"])])])]),v("div",H4e,[v("div",Y4e,[_(l,{class:"w-full bg-green-500 dark:bg-green-700",style:{padding:"1.35rem"},onClick:t.setPriceList},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",K4e,R(t.t`Save`),1)])]),_:3},8,["onClick"])])]),v("div",J4e,[v("div",e8e,[_(l,{class:"w-full bg-red-500 dark:bg-red-700",style:{padding:"1.35rem"},onClick:t.cancelPriceList},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",t8e,R(t.t`Cancel`),1)])]),_:3},8,["onClick"])])])])]}),_:3})}const jE=ne(z4e,[["render",n8e]]),i8e=ve({name:"ItemEnquiryModal",components:{Modal:di,Button:At,Link:rr,Text:j1,Data:qa},emits:["toggleModal"],data(){return{ItemEnquiry:{}}},methods:{async updateCustomerContact(t){this.ItemEnquiry.contact=await this.fyo.getValue("Party",t,"phone")||""},async submitForm(){try{await this.fyo.doc.getNewDoc(A.ItemEnquiry,this.ItemEnquiry).sync(),it({type:"success",message:b`Item enquiry submitted`}),this.clearValues(),this.$emit("toggleModal","ItemEnquiry")}catch(t){it({type:"error",message:b`${t}`})}},clearValues(){this.ItemEnquiry={}},closeModal(){this.clearValues(),this.$emit("toggleModal","ItemEnquiry")}}}),s8e={class:"text-center font-semibold py-3"},r8e={class:"px-10"},o8e={class:"flex flex-col gap-5 pt-8"},a8e={class:"grid grid-cols-2 gap-4 mt-10 mb-4"},l8e={class:"col-span-2"},c8e={class:"uppercase text-lg text-white font-semibold"},u8e={class:"grid grid-cols-2 gap-4 mb-6"},d8e={class:"col-span-2"},h8e={class:"uppercase text-lg text-white font-semibold"};function f8e(t,e,n,i,s,r){const o=Q("Link"),a=Q("Text"),l=Q("Data"),c=Q("Button"),u=Q("Modal");return w(),H(u,{class:"h-auto w-96","set-close-listener":!1},{default:U(()=>[v("p",s8e,R(t.t`Item Enquiry`),1),v("div",r8e,[e[5]||(e[5]=v("hr",{class:"dark:border-gray-800"},null,-1)),v("div",o8e,[_(o,{df:{fieldname:"item",fieldtype:"Link",target:"Item",label:t.t`Item`,required:!0},value:t.ItemEnquiry.item,border:!0,"show-label":!0,onChange:e[0]||(e[0]=h=>t.ItemEnquiry.item=h)},null,8,["df","value"]),_(a,{df:{fieldname:"description",fieldtype:"Text",label:t.t`Description`},value:t.ItemEnquiry.description,border:!0,"show-label":!0,onChange:e[1]||(e[1]=h=>t.ItemEnquiry.description=h)},null,8,["df","value"]),_(o,{df:{fieldname:"customer",fieldtype:"Link",target:"Party",label:t.t`Customer`},value:t.ItemEnquiry.customer,border:!0,"show-label":!0,onChange:e[2]||(e[2]=h=>{t.ItemEnquiry.customer=h,t.updateCustomerContact(h)})},null,8,["df","value"]),_(l,{df:{fieldname:"contact",fieldtype:"Data",label:t.t`Contact`},value:t.ItemEnquiry.contact,border:!0,"show-label":!0,onChange:e[3]||(e[3]=h=>t.ItemEnquiry.contact=h)},null,8,["df","value"]),_(o,{df:{fieldname:"similarProduct",fieldtype:"Link",target:"Item",label:t.t`Similar Product`},value:t.ItemEnquiry.similarProduct,border:!0,"show-label":!0,onChange:e[4]||(e[4]=h=>t.ItemEnquiry.similarProduct=h)},null,8,["df","value"])]),v("div",a8e,[v("div",l8e,[_(c,{class:"w-full bg-green-500 dark:bg-green-700",style:{padding:"1.35rem"},onClick:t.submitForm},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",c8e,R(t.t`Submit`),1)])]),_:3},8,["onClick"])])]),v("div",u8e,[v("div",d8e,[_(c,{class:"w-full bg-red-500 dark:bg-red-700",style:{padding:"1.35rem"},onClick:t.closeModal},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",h8e,R(t.t`Cancel`),1)])]),_:3},8,["onClick"])])])])]),_:3})}const zE=ne(i8e,[["render",f8e]]),p8e=ve({name:"CouponCodeModal",components:{Modal:di,Button:At,Link:rr,FormControl:is,Row:ho},emits:["setCouponsCount","toggleModal","applyPricingRule"],setup(){return{sinvDoc:st("sinvDoc"),coupons:st("coupons"),appliedCoupons:st("appliedCoupons")}},data(){return{validationError:!1,couponCode:""}},computed:{ratio(){return[1,.1,1,.7]},tableFields(){return[{fieldname:"coupons",fieldtype:"Link",required:!0,readOnly:!0}]}},methods:{async updateCouponCode(t){try{if(!t)return;this.validationError=!1,t.type==="keydown"&&(t=t.target.value),this.couponCode=t;const e=this.fyo.doc.getNewDoc(A.AppliedCouponCodes);await eM(e,this.couponCode,this.sinvDoc),await this.sinvDoc.append("coupons",{coupons:this.couponCode}),this.$emit("applyPricingRule"),this.couponCode="",this.validationError=!1}catch(e){this.validationError=!0,it({type:"error",message:b`${e}`})}},setCouponCode(){this.$emit("toggleModal","CouponCode")},async removeAppliedCoupon(t){var e,n,i,s;(n=(e=this.sinvDoc)==null?void 0:e.items)==null||n.map(r=>{r.itemDiscountAmount=this.fyo.pesa(0),r.itemDiscountPercent=0,r.setItemDiscountAmount=!1}),await((i=t==null?void 0:t.parentdoc)==null?void 0:i.remove("coupons",t.idx)),this.$emit("applyPricingRule"),this.$emit("setCouponsCount",(s=this.coupons)==null?void 0:s.length)},cancelApplyCouponCode(){this.couponCode="",this.$emit("toggleModal","CouponCode")}}}),m8e={class:"px-10"},g8e={key:0,class:"text-xs m-2 text-gray-500"},y8e={class:"flex flex-row w-full items-center"},O8e={class:"flex flex-row"},b8e={class:"absolute right-3"},v8e={class:"row-start-6 grid grid-cols-2 gap-4 mt-auto mb-2"},w8e={class:"col-span-2"},S8e={class:"uppercase text-lg text-white font-semibold"},C8e={class:"row-start-6 grid grid-cols-2 gap-4 mt-auto mb-8"},A8e={class:"col-span-2"},x8e={class:"uppercase text-lg text-white font-semibold"};function k8e(t,e,n,i,s,r){const o=Q("FormControl"),a=Q("feather-icon"),l=Q("Row"),c=Q("Link"),u=Q("Button"),h=Q("Modal");return w(),H(h,{class:"h-auto w-96","set-close-listener":!1},{default:U(()=>[e[3]||(e[3]=v("p",{class:"text-center font-semibold py-3"},"Apply Coupon Code",-1)),v("div",m8e,[e[2]||(e[2]=v("hr",{class:"dark:border-gray-800"},null,-1)),t.appliedCoupons.length?(w(),P("p",g8e,R(t.t`Applied Coupon Codes`),1)):B("",!0),t.appliedCoupons.length?(w(),P("div",{key:1,class:"overflow-y-auto mt-2 custom-scroll custom-scroll-thumb2",style:qe({height:t.appliedCoupons.length>=2?"11vh":"8vh"})},[(w(!0),P(le,null,Pe(t.appliedCoupons,(p,m)=>(w(),H(l,{key:m,ratio:t.ratio,border:!0,class:"border-b border-l border-r dark:border-gray-800 relative group h-coupon-mid hover:bg-gray-25 dark:bg-gray-890 items-center justify-center"},{default:U(()=>[v("div",y8e,[v("div",O8e,[(w(!0),P(le,null,Pe(t.tableFields,y=>(w(),H(o,{key:y.fieldname,size:"large",class:"w-full",df:y,value:p[y.fieldname],"read-only":!0},null,8,["df","value"]))),128))])]),v("div",b8e,[_(a,{name:"trash",class:"w-4 text-xl text-red-500 cursor-pointer",onClick:y=>t.removeAppliedCoupon(p)},null,8,["onClick"])])]),_:2},1032,["ratio"]))),128))],4)):B("",!0),t.coupons.fieldMap?(w(),P("div",{key:2,class:ee(["flex justify-center",t.appliedCoupons.length?"pb-0 pt-4":"pt-10"])},[v("div",{class:ee(["w-80",t.appliedCoupons.length?"pb-4":"pb-10"])},[t.coupons.fieldMap?(w(),H(c,{key:0,class:"flex-shrink-0","show-label":!0,border:!0,value:t.couponCode,"focus-input":!0,df:t.coupons.fieldMap.coupons,onChange:t.updateCouponCode},null,8,["value","df","onChange"])):B("",!0)],2)],2)):B("",!0),v("div",v8e,[v("div",w8e,[_(u,{class:"w-full bg-green-500 dark:bg-green-700",style:{padding:"1.35rem"},disabled:t.validationError,onClick:e[0]||(e[0]=p=>t.setCouponCode())},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",S8e,R(t.t`Save`),1)])]),_:3},8,["disabled"])])]),v("div",C8e,[v("div",A8e,[_(u,{class:"w-full bg-red-500 dark:bg-red-700",style:{padding:"1.35rem"},onClick:e[1]||(e[1]=p=>t.cancelApplyCouponCode())},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",x8e,R(t.t`Cancel`),1)])]),_:3})])])])]),_:3})}const ZE=ne(p8e,[["render",k8e]]),P8e=ve({name:"POSQuickActions",props:{openAlertModal:Boolean,loyaltyPoints:{type:Number,default:0},loyaltyProgram:{type:String,default:""},appliedCouponsCount:{type:Number,default:0},sinvDoc:{type:Object,default:void 0}},emits:["toggleView","toggleModal","emitRouteToSinvList"],data(){return{tableView:!0,totalQuantity:0,totalTaxedAmount:N.pesa(0),additionalDiscounts:N.pesa(0),paymentDoc:{},itemSerialNumbers:{},transferRefNo:void 0,transferClearanceDate:void 0}},computed:{isPosShiftOpen:()=>{var t;return!!((t=N.singles.POSShift)!=null&&t.isShiftOpen)}},methods:{setTransferRefNo(t){this.transferRefNo=t},toggleItemsView(){this.tableView=!this.tableView,this.$emit("toggleView")},showValidationToast(t,e=!1){var i,s,r;let n="";(s=(i=this.sinvDoc)==null?void 0:i.items)!=null&&s.length?(r=this.sinvDoc)!=null&&r.party?e&&!this.loyaltyPoints&&(n=b`Customer has no loyalty points to redeem`):n=b`Please select a customer`:n=b`Please add items`,it({type:"error",message:b`${n} before ${t}`})},openCouponModal(){var t,e,n;if(!((e=(t=this.sinvDoc)==null?void 0:t.items)!=null&&e.length)||!((n=this.sinvDoc)!=null&&n.party)){this.showValidationToast("applying coupon");return}this.$emit("toggleModal","CouponCode")},openLoyaltyModal(){var t,e,n;if(!((e=(t=this.sinvDoc)==null?void 0:t.items)!=null&&e.length)||!((n=this.sinvDoc)!=null&&n.party)||!this.loyaltyPoints){this.showValidationToast("applying loyalty points",!0);return}this.$emit("toggleModal","LoyaltyProgram")}}}),T8e={class:"relative group"},$8e={class:"p-2 mb-2 w-20 absolute bottom-full left-1/2 transform -translate-x-1/2 text-center opacity-0 bg-gray-100 text-black text-xs rounded-md transition-opacity duration-300 group-hover:opacity-100 dark:bg-gray-800 dark:text-white"},D8e={class:"relative group"},M8e={class:"mb-2 p-2 w-28 absolute bottom-full left-1/2 transform -translate-x-1/2 rounded-md opacity-0 bg-gray-100 text-black text-xs text-center transition-opacity duration-300 group-hover:opacity-100 dark:bg-gray-800 dark:text-white"},I8e={class:"mb-2 p-2 w-28 absolute bottom-full left-1/2 transform -translate-x-1/2 bg-gray-100 text-black text-xs rounded-md text-center opacity-0 transition-opacity duration-300 group-hover:opacity-100 dark:bg-gray-800 dark:text-white"},R8e={key:0,class:"h-4 w-4 p-2 absolute top-0 right-0 transform translate-x-1/2 -translate-y-1/2 bg-green-400 text-green-900 border-red-500 rounded-full flex items-center justify-center text-xs cursor-pointer"};function _8e(t,e,n,i,s,r){var a,l,c,u,h,p,m,y,O,S;const o=Q("FeatherIcon");return w(),P(le,null,[v("div",T8e,[v("div",{class:"bg-gray-100 p-1.5 rounded-md",onClick:e[0]||(e[0]=(...x)=>t.toggleItemsView&&t.toggleItemsView(...x))},[_(o,{name:t.tableView?"grid":"list",class:"w-5 h-5 text-black"},null,8,["name"])]),v("span",$8e,R(t.tableView?t.t`Grid View`:t.t`List View`),1)]),v("div",D8e,[v("div",{class:"px-1.5 py-1 rounded-md bg-gray-100",onClick:e[1]||(e[1]=()=>t.$emit("emitRouteToSinvList"))},[...e[6]||(e[6]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 -960 960 960",width:"21",fill:"#000"},[v("path",{d:"M240-100q-41.92 0-70.96-29.04Q140-158.08 140-199.82V-300h120v-552.31l55.39 47.7 56.15-47.7 56.15 47.7 56.16-47.7 56.15 47.7 56.15-47.7 56.16 47.7 56.15-47.7 56.15 47.7 55.39-47.7V-200q0 41.92-29.04 70.96Q761.92-100 720-100H240Zm480-60q17 0 28.5-11.5T760-200v-560H320v460h360v100q0 17 11.5 28.5T720-160ZM367.69-610v-60h226.92v60H367.69Zm0 120v-60h226.92v60H367.69Zm310-114.62q-14.69 0-25.04-10.34-10.34-10.35-10.34-25.04t10.34-25.04q10.35-10.34 25.04-10.34t25.04 10.34q10.35 10.35 10.35 25.04t-10.35 25.04q-10.35 10.34-25.04 10.34Zm0 120q-14.69 0-25.04-10.34-10.34-10.35-10.34-25.04t10.34-25.04q10.35-10.34 25.04-10.34t25.04 10.34q10.35 10.35 10.35 25.04t-10.35 25.04q-10.35 10.34-25.04 10.34ZM240-160h380v-80H200v40q0 17 11.5 28.5T240-160Zm-40 0v-80 80Z"})],-1)])]),v("span",M8e,R(t.t`Sales Invoice List`),1)]),v("div",{class:ee(["relative group",{hidden:!((a=t.fyo.singles.AccountingSettings)!=null&&a.enableLoyaltyProgram)||!t.loyaltyProgram}])},[v("div",{class:ee(["p-1 rounded-md bg-gray-100",{"bg-gray-100":t.loyaltyPoints,"dark:bg-gray-600 cursor-not-allowed":!t.loyaltyPoints||!((l=t.sinvDoc)!=null&&l.party)||!((u=(c=t.sinvDoc)==null?void 0:c.items)!=null&&u.length)}]),onClick:e[2]||(e[2]=(...x)=>t.openLoyaltyModal&&t.openLoyaltyModal(...x))},[...e[7]||(e[7]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",height:"23px",viewBox:"0 -960 960 960",width:"25px",fill:"#000"},[v("path",{d:"M100-180v-600h760v600H100Zm50.26-50.26h659.48v-499.48H150.26v499.48Zm0 0v-499.48 499.48Zm181.64-56.77h50.25v-42.56h48.67q14.37 0 23.6-10.38 9.22-10.38 9.22-24.25v-106.93q0-14.71-9.22-24.88-9.23-10.17-23.6-10.17H298.77v-73.95h164.87v-50.26h-81.49v-42.56H331.9v42.56h-48.41q-14.63 0-24.8 10.38-10.18 10.38-10.18 25v106.27q0 14.62 10.18 23.71 10.17 9.1 24.8 9.1h129.9v76.1H248.51v50.26h83.39v42.56Zm312.97-27.94L705.9-376H583.85l61.02 61.03ZM583.85-574H705.9l-61.03-61.03L583.85-574Z"})],-1)])],2),v("span",I8e,R(t.t`Loyalty Program`),1)],2),v("div",{class:ee(["relative group",{hidden:!((h=t.fyo.singles.AccountingSettings)!=null&&h.enableCouponCode)}])},[v("div",{class:ee(["p-0.5 rounded-md bg-gray-100",{"dark:bg-gray-600 cursor-not-allowed":!((p=t.sinvDoc)!=null&&p.party)||!((y=(m=t.sinvDoc)==null?void 0:m.items)!=null&&y.length)}]),onClick:e[3]||(e[3]=(...x)=>t.openCouponModal&&t.openCouponModal(...x))},[...e[8]||(e[8]=[b$('<svg fill="#000000" width="28px" height="28px" viewBox="0 0 512.00 512.00" enable-background="new 0 0 512 512" version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" stroke="#000000" stroke-width="3.312000000000001" transform="matrix(1, 0, 0, 1, 0, 0)rotate(0)"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" stroke="#CCCCCC" stroke-width="19.456"></g><g id="SVGRepo_iconCarrier"><g id="Layer_1"></g><g id="Layer_2"><g><path d="M412.7,134.4H229.6c-2,0-3.9,0.8-5.3,2.2l-27.8,27.8L169.1,137c-1.4-1.4-3.3-2.2-5.3-2.2H99.3c-4.1,0-7.5,3.4-7.5,7.5 v227.4c0,4.1,3.4,7.5,7.5,7.5h64.5c2,0,3.9-0.8,5.3-2.2l27.4-27.4l27.8,27.8c1.4,1.4,3.3,2.2,5.3,2.2h183.1c4.1,0,7.5-3.4,7.5-7.5 V141.9C420.2,137.7,416.8,134.4,412.7,134.4z M405.2,362.6H232.7l-30.9-30.9c-2.9-2.9-7.7-2.9-10.6,0l-30.5,30.5h-53.9V149.8h53.9 l30.5,30.5c2.9,2.9,7.7,2.9,10.6,0l30.9-30.9h172.5V362.6z"></path><path d="M276.9,235.2c15.4,0,28-12.6,28-28s-12.6-28-28-28s-28,12.6-28,28S261.4,235.2,276.9,235.2z M276.9,194.2 c7.2,0,13,5.8,13,13s-5.8,13-13,13s-13-5.8-13-13S269.7,194.2,276.9,194.2z"></path><path d="M360,262.4c-15.4,0-28,12.6-28,28s12.6,28,28,28s28-12.6,28-28S375.4,262.4,360,262.4z M360,303.4c-7.2,0-13-5.8-13-13 s5.8-13,13-13s13,5.8,13,13S367.2,303.4,360,303.4z"></path><path d="M256.6,310.7c1.5,1.5,3.4,2.2,5.3,2.2s3.8-0.7,5.3-2.2l113.1-113.1c2.9-2.9,2.9-7.7,0-10.6c-2.9-2.9-7.7-2.9-10.6,0 L256.6,300.1C253.6,303,253.6,307.7,256.6,310.7z"></path><path d="M196.5,202.5c-2,0-3.9,0.8-5.3,2.2c-1.4,1.4-2.2,3.3-2.2,5.3c0,2,0.8,3.9,2.2,5.3c1.4,1.4,3.3,2.2,5.3,2.2 c2,0,3.9-0.8,5.3-2.2c1.4-1.4,2.2-3.3,2.2-5.3c0-2-0.8-3.9-2.2-5.3C200.4,203.3,198.4,202.5,196.5,202.5z"></path><path d="M196.5,233.2c-2,0-3.9,0.8-5.3,2.2c-1.4,1.4-2.2,3.3-2.2,5.3c0,2,0.8,3.9,2.2,5.3c1.4,1.4,3.3,2.2,5.3,2.2 c2,0,3.9-0.8,5.3-2.2c1.4-1.4,2.2-3.3,2.2-5.3c0-2-0.8-3.9-2.2-5.3C200.4,234,198.4,233.2,196.5,233.2z"></path><path d="M196.5,263.8c-2,0-3.9,0.8-5.3,2.2c-1.4,1.4-2.2,3.3-2.2,5.3c0,2,0.8,3.9,2.2,5.3c1.4,1.4,3.3,2.2,5.3,2.2 c2,0,3.9-0.8,5.3-2.2c1.4-1.4,2.2-3.3,2.2-5.3c0-2-0.8-3.9-2.2-5.3C200.4,264.6,198.4,263.8,196.5,263.8z"></path><path d="M196.5,294.5c-2,0-3.9,0.8-5.3,2.2c-1.4,1.4-2.2,3.3-2.2,5.3c0,2,0.8,3.9,2.2,5.3c1.4,1.4,3.3,2.2,5.3,2.2 c2,0,3.9-0.8,5.3-2.2c1.4-1.4,2.2-3.3,2.2-5.3c0-2-0.8-3.9-2.2-5.3C200.4,295.3,198.4,294.5,196.5,294.5z"></path></g></g></g></svg>',1)])],2),e[9]||(e[9]=v("span",{class:"mb-2 p-2 w-28 absolute bottom-full left-1/2 transform -translate-x-1/2 bg-gray-100 text-black text-xs rounded-md text-center opacity-0 transition-opacity duration-300 group-hover:opacity-100 dark:bg-gray-800 dark:text-white"}," Coupon Code ",-1)),t.appliedCouponsCount!==0?(w(),P("div",R8e,R(t.appliedCouponsCount),1)):B("",!0)],2),v("div",{class:ee(["relative group",{hidden:!((O=t.fyo.singles.AccountingSettings)!=null&&O.enablePriceList)}])},[v("div",{class:"p-1 rounded-md bg-gray-100",onClick:e[4]||(e[4]=x=>t.$emit("toggleModal","PriceList"))},[...e[10]||(e[10]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",height:"23px",viewBox:"0 -960 960 960",width:"24px",fill:"#000"},[v("path",{d:"M180.31-164q-27.01 0-45.66-18.65Q116-201.3 116-228.31v-503.38q0-27.01 18.65-45.66Q153.3-796 180.31-796h599.38q27.01 0 45.66 18.65Q844-758.7 844-731.69v503.38q0 27.01-18.65 45.66Q806.7-164 779.69-164H180.31Zm0-52h599.38q4.62 0 8.46-3.85 3.85-3.84 3.85-8.46v-503.38q0-4.62-3.85-8.46-3.84-3.85-8.46-3.85H180.31q-4.62 0-8.46 3.85-3.85 3.84-3.85 8.46v503.38q0 4.62 3.85 8.46 3.84 3.85 8.46 3.85ZM221-297h172v-52H221v52Zm361-77.23L737.77-530 701-566.77l-119 119-51-51L494.23-462 582-374.23ZM221-454h172v-52H221v52Zm0-156h172v-52H221v52Zm-53 394v-528 528Z"})],-1)])]),e[11]||(e[11]=v("span",{class:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 bg-gray-100 dark:bg-gray-800 dark:text-white text-black text-xs rounded-md p-2 w-28 text-center opacity-0 group-hover:opacity-100 transition-opacity duration-300"}," Price List ",-1))],2),v("div",{class:ee(["relative group",{hidden:!((S=t.fyo.singles.AccountingSettings)!=null&&S.enableItemEnquiry)}])},[v("div",{class:"p-1 rounded-md bg-gray-100",onClick:e[5]||(e[5]=x=>t.$emit("toggleModal","ItemEnquiry"))},[...e[12]||(e[12]=[v("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5",class:"w-6 h-6 text-black"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.686 1.686a1.25 1.25 0 010 1.768L10.06 16.43a.75.75 0 01-.49.219l-2.563.128a.75.75 0 01-.791-.79l.128-2.564a.75.75 0 01.218-.49l8.488-8.489a1.25 1.25 0 011.768 0zM19.5 13.25v4.75a2 2 0 01-2 2h-11a2 2 0 01-2-2v-11a2 2 0 012-2h4.75"})],-1)])]),e[13]||(e[13]=v("span",{class:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 bg-gray-100 dark:bg-gray-800 dark:text-white text-black text-xs rounded-md p-2 w-28 text-center opacity-0 group-hover:opacity-100 transition-opacity duration-300"}," Item Enquiry ",-1))],2)],64)}const qE=ne(P8e,[["render",_8e]]),E8e=ve({name:"OpenPOSShift",components:{Button:At,Modal:di,Table:z1},provide(){return{doc:Dt(()=>this.posShiftDoc)}},emits:["toggleModal"],data(){return{posShiftDoc:void 0,isValuesSeeded:!1}},computed:{getDefaultCashDenominations(){var t;return(t=this.fyo.singles.Defaults)==null?void 0:t.posCashDenominations},posCashAccount(){var t;return(t=N.singles.POSSettings)==null?void 0:t.cashAccount},posOpeningCashAmount(){var t;return(t=this.posShiftDoc)==null?void 0:t.openingCashAmount}},async mounted(){this.isValuesSeeded=!1,this.posShiftDoc=await Jw(N),await this.seedDefaults(),this.isValuesSeeded=!0},methods:{async seedDefaultCashDenomiations(){if(!this.posShiftDoc)return;this.posShiftDoc.openingCash=[];const t=this.getDefaultCashDenominations;if(t)for(const e of t)await this.posShiftDoc.append("openingCash",{denomination:e.denomination,count:0})},async seedPaymentMethods(){if(!this.posShiftDoc)return;this.posShiftDoc.openingAmounts=[];const t=(await this.fyo.db.getAll(A.PaymentMethod,{fields:["name"]})).map(e=>({paymentMethod:e.name,amount:N.pesa(0)}));await this.posShiftDoc.set("openingAmounts",t)},async seedDefaults(){var t;(t=this.posShiftDoc)!=null&&t.isShiftOpen||(await this.seedDefaultCashDenomiations(),await this.seedPaymentMethods())},getField(t){return this.fyo.getField(A.POSOpeningShift,t)},setOpeningCashAmount(){var t;(t=this.posShiftDoc)!=null&&t.openingAmounts&&this.posShiftDoc.openingAmounts.map(e=>{var n;e.paymentMethod==="Cash"&&(e.amount=(n=this.posShiftDoc)==null?void 0:n.openingCashAmount)})},handleChange(){this.setOpeningCashAmount()},async handleSubmit(){var t,e,n,i,s,r,o;try{if((t=this.posShiftDoc)!=null&&t.openingCashAmount.isNegative())throw new ie(b`Opening Cash Amount can not be negative.`);if(await((e=this.posShiftDoc)==null?void 0:e.setMultiple({isShiftOpen:!0,openingDate:new Date})),await((n=this.posShiftDoc)==null?void 0:n.sync()),await((i=this.fyo.singles.POSSettings)==null?void 0:i.setAndSync("isShiftOpen",!0)),!((s=this.posShiftDoc)!=null&&s.openingCashAmount.isZero())){const a=N.doc.getNewDoc(A.JournalEntry,{entryType:"Journal Entry"});await a.append("accounts",{account:this.posCashAccount,debit:(r=this.posShiftDoc)==null?void 0:r.openingCashAmount,credit:this.fyo.pesa(0)}),await a.append("accounts",{account:ln.Cash,debit:this.fyo.pesa(0),credit:(o=this.posShiftDoc)==null?void 0:o.openingCashAmount}),await(await a.sync()).submit()}this.$emit("toggleModal","ShiftOpen")}catch(a){it({type:"error",message:b`${a}`,duration:"short"});return}}}}),Q8e={class:"text-xl font-semibold text-center dark:text-gray-100 pb-4"},N8e={class:"grid grid-cols-12 gap-6"},L8e={class:"col-span-6"},F8e={class:"text-lg font-medium dark:text-gray-100"},B8e={class:"col-span-6"},V8e={class:"text-lg font-medium dark:text-gray-100"},j8e={class:"mt-4 grid grid-cols-2 gap-4 items-end"},z8e={class:"uppercase text-lg text-white font-semibold"},Z8e={class:"uppercase text-lg text-white font-semibold"};function q8e(t,e,n,i,s,r){const o=Q("Table"),a=Q("Button"),l=Q("Modal");return w(),H(l,{class:"w-3/6 p-4"},{default:U(()=>{var c,u;return[v("h1",Q8e,R(t.t`Open POS Shift`),1),v("div",N8e,[v("div",L8e,[v("h2",F8e,R(t.t`Cash In Denominations`),1),t.isValuesSeeded?(w(),H(o,{key:0,class:"mt-4 text-base",df:t.getField("openingCash"),"show-header":!0,border:!0,value:(c=t.posShiftDoc)==null?void 0:c.openingCash,onRowChange:t.handleChange},null,8,["df","value","onRowChange"])):B("",!0)]),v("div",B8e,[v("h2",V8e,R(t.t`Opening Amount`),1),t.isValuesSeeded?(w(),H(o,{key:0,class:"mt-4 text-base",df:t.getField("openingAmounts"),"show-header":!0,border:!0,"max-rows-before-overflow":4,value:(u=t.posShiftDoc)==null?void 0:u.openingAmounts,"read-only":!0,onRowChange:t.handleChange},null,8,["df","value","onRowChange"])):B("",!0),v("div",j8e,[_(a,{class:"w-full py-5 bg-red-500 dark:bg-red-700",onClick:e[0]||(e[0]=h=>t.$router.back())},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",z8e,R(t.t`Back`),1)])]),_:3}),_(a,{class:"w-full py-5 bg-green-500 dark:bg-green-700",onClick:t.handleSubmit},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",Z8e,R(t.t`Submit`),1)])]),_:3},8,["onClick"])])])])]}),_:3})}const XE=ne(E8e,[["render",q8e]]),X8e=ve({name:"SavedInvoiceModal",components:{Modal:di,Button:At,FormControl:is,Row:ho},props:{modalStatus:Boolean},emits:["toggleModal","selectedInvoiceName"],setup(){return{sinvDoc:st("sinvDoc")}},data(){return{savedInvoiceList:!0,savedInvoices:[],submittedInvoices:[],invoiceSearchTerm:""}},computed:{ratio(){return[1,1,1,.8]},tableFields(){return[{fieldname:"name",label:"Name",fieldtype:"Link",target:"SalesInvoice",readOnly:!0},{fieldname:"party",fieldtype:"Link",label:"Customer",target:"Party",placeholder:"Customer",readOnly:!0},{fieldname:"date",label:"Date",fieldtype:"Date",readOnly:!0},{fieldname:"grandTotal",label:"Grand Total",fieldtype:"Currency",readOnly:!0}]},filteredInvoices(){return(this.savedInvoiceList?this.savedInvoices:this.submittedInvoices).filter(e=>e.name.toLowerCase().includes(this.invoiceSearchTerm.toLowerCase()))}},watch:{async modalStatus(t){t&&(await this.setSavedInvoices(),await this.setSubmittedInvoices())}},async mounted(){await this.setSavedInvoices(),await this.setSubmittedInvoices()},async activated(){await this.setSavedInvoices(),await this.setSubmittedInvoices()},methods:{async setSavedInvoices(){this.savedInvoices=await this.fyo.db.getAll(A.SalesInvoice,{fields:[],filters:{isPOS:!0,submitted:!1}})},async setSubmittedInvoices(){const t=await this.fyo.db.getAll(A.SalesInvoice,{fields:[],filters:{isPOS:!0,submitted:!0,returnAgainst:null}});this.submittedInvoices=t.filter(e=>!e.outstandingAmount.isZero())},async selectedInvoice(t){let e=await this.fyo.doc.getDoc(A.SalesInvoice,t.name);this.sinvDoc=e,this.$emit("toggleModal","SavedInvoice")},handleEnterKey(){this.filteredInvoices.length===1&&this.$emit("selectedInvoiceName",this.filteredInvoices[0])}}}),W8e={class:"text-center font-semibold dark:text-gray-400"},G8e={class:"mt-4"},U8e={class:"flex justify-around items-center"},H8e={key:0,class:"overflow-y-auto custom-scroll custom-scroll-thumb2",style:{height:"65vh",width:"60vh"}},Y8e={class:"row-start-6 grid grid-cols-2 gap-4 mt-4"},K8e={class:"col-span-2"},J8e={class:"uppercase text-lg text-white font-semibold"};function ePe(t,e,n,i,s,r){const o=Q("Button"),a=Q("Row"),l=Q("FormControl"),c=Q("Modal");return w(),H(c,{class:"h-auto w-auto p-5","set-close-listener":!1},{default:U(()=>[v("p",W8e,R(t.t`Invoices`),1),e[7]||(e[7]=v("hr",{class:"mt-2 dark:border-gray-800"},null,-1)),v("div",G8e,[mn(v("input",{"onUpdate:modelValue":e[0]||(e[0]=u=>t.invoiceSearchTerm=u),type:"text",placeholder:"Search by Invoice Name",class:"w-full p-2 border rounded-md dark:bg-gray-800 dark:text-white focus:outline-none focus:ring-0",onKeyup:e[1]||(e[1]=pn((...u)=>t.handleEnterKey&&t.handleEnterKey(...u),["enter"]))},null,544),[[qo,t.invoiceSearchTerm]])]),v("div",U8e,[_(o,{background:!1,class:ee(["w-full h-full p-2 mt-2",{"dark:bg-gray-890 underline":t.savedInvoiceList}]),onClick:e[2]||(e[2]=u=>t.savedInvoiceList=!0)},{default:U(()=>[...e[5]||(e[5]=[He("Saved",-1)])]),_:1},8,["class"]),_(o,{background:!1,class:ee(["w-full h-full p-2 mt-2",{"dark:bg-gray-890 underline":!t.savedInvoiceList}]),onClick:e[3]||(e[3]=u=>t.savedInvoiceList=!1)},{default:U(()=>[...e[6]||(e[6]=[He("Submitted",-1)])]),_:1},8,["class"])]),_(a,{ratio:t.ratio,class:"border flex items-center mt-2 px-2 w-full rounded-t-md text-gray-600 dark:border-gray-800 dark:text-gray-400"},{default:U(()=>[(w(!0),P(le,null,Pe(t.tableFields,u=>(w(),P("div",{key:u.fieldname,class:"flex items-center px-2 py-2 text-lg"},R(u.label),1))),128))]),_:1},8,["ratio"]),t.filteredInvoices.length?(w(),P("div",H8e,[(w(!0),P(le,null,Pe(t.filteredInvoices,u=>(w(),H(a,{key:u.name,ratio:t.ratio,border:!0,class:"border-b border-l border-r dark:border-gray-800 dark:bg-gray-890 flex group h-row-mid hover:bg-gray-25 items-center justify-center px-2 w-full",onClick:h=>t.$emit("selectedInvoiceName",u)},{default:U(()=>[(w(!0),P(le,null,Pe(t.tableFields,h=>(w(),H(l,{key:h.fieldname,size:"large",df:h,value:u[h.fieldname],"read-only":!0},null,8,["df","value"]))),128))]),_:2},1032,["ratio","onClick"]))),128))])):B("",!0),v("div",Y8e,[v("div",K8e,[_(o,{class:"w-full p-5 bg-red-500 dark:bg-red-700",onClick:e[4]||(e[4]=u=>t.$emit("toggleModal","SavedInvoice"))},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",J8e,R(t.t`Cancel`),1)])]),_:3})])])]),_:3})}const WE=ne(X8e,[["render",ePe]]),tPe=ve({name:"ClosePOSShiftModal",components:{Button:At,Modal:di,Table:z1},provide(){return{doc:Dt(()=>this.posClosingShiftDoc)}},props:{openModal:{default:!1,type:Boolean}},emits:["toggleModal"],data(){return{isValuesSeeded:!1,posOpeningShiftDoc:void 0,posClosingShiftDoc:void 0,transactedAmount:{}}},computed:{isOnline(){return!!navigator.onLine}},watch:{openModal:{async handler(){await this.setTransactedAmount(),await this.seedClosingAmounts()}}},async activated(){this.posClosingShiftDoc=N.doc.getNewDoc(A.POSClosingShift),await this.seedValues(),await this.setTransactedAmount()},async updated(){this.posOpeningShiftDoc=await Jw(N),await this.seedValues()},methods:{async setTransactedAmount(){var e;this.posOpeningShiftDoc=await Jw(N);const t=(e=this.posOpeningShiftDoc)==null?void 0:e.openingDate;t&&(this.transactedAmount=await N.db.getPOSTransactedAmount(t,new Date))},seedClosingCash(){var t,e;this.posClosingShiftDoc&&(this.posClosingShiftDoc.closingCash=[],(e=(t=this.posOpeningShiftDoc)==null?void 0:t.openingCash)==null||e.map(async n=>{var i;await((i=this.posClosingShiftDoc)==null?void 0:i.append("closingCash",{count:n.count,denomination:n.denomination}))}))},setClosingCashAmount(){var t;(t=this.posClosingShiftDoc)!=null&&t.closingAmounts&&this.posClosingShiftDoc.closingAmounts.map(e=>{var n;e.paymentMethod==="Cash"&&(e.closingAmount=(n=this.posClosingShiftDoc)==null?void 0:n.closingCashAmount,e.differenceAmount=e.closingAmount.sub(e.expectedAmount))})},async seedClosingAmounts(){var e;if(!this.posClosingShiftDoc||!this.posOpeningShiftDoc)return;this.posClosingShiftDoc.closingAmounts=[];const t=(e=this.posOpeningShiftDoc)==null?void 0:e.openingAmounts;for(const n of t){if(!n.paymentMethod)return;let i=n.amount??N.pesa(0);this.transactedAmount&&(i=i.add(this.transactedAmount[n.paymentMethod])),await this.posClosingShiftDoc.append("closingAmounts",{paymentMethod:n.paymentMethod,openingAmount:n.amount,closingAmount:N.pesa(0),expectedAmount:i,differenceAmount:N.pesa(0)})}},async seedValues(){this.isValuesSeeded=!1,this.seedClosingCash(),await this.seedClosingAmounts(),this.isValuesSeeded=!0},getField(t){return N.getField(A.POSClosingShift,t)},async handleSubmit(){var t,e,n,i,s;try{if(!this.isOnline)throw new JD(b`Device is offline. Please connect to a network to continue.`);e4e(this.posClosingShiftDoc),await((t=this.posClosingShiftDoc)==null?void 0:t.set("closingDate",new Date)),await((n=this.posClosingShiftDoc)==null?void 0:n.set("openingShift",(e=this.posOpeningShiftDoc)==null?void 0:e.name)),await((i=this.posClosingShiftDoc)==null?void 0:i.sync()),await t4e(N,this.posClosingShiftDoc),await((s=this.fyo.singles.POSSettings)==null?void 0:s.setAndSync("isShiftOpen",!1)),this.$emit("toggleModal","ShiftClose"),ipc.reloadWindow()}catch(r){return it({type:"error",message:b`${r}`,duration:"short"})}}}}),nPe={class:"text-xl font-semibold text-center dark:text-gray-100 pb-4"},iPe={class:"mt-4 mb-2 text-lg font-medium dark:text-gray-100"},sPe={class:"mt-4 grid grid-cols-2 gap-4 items-end"},rPe={class:"uppercase text-lg text-white font-semibold"},oPe={class:"uppercase text-lg text-white font-semibold"};function aPe(t,e,n,i,s,r){const o=Q("Table"),a=Q("Button"),l=Q("Modal");return w(),H(l,{"open-modal":t.openModal,class:"w-3/6 p-4"},{default:U(()=>{var c,u;return[v("h1",nPe,R(t.t`Close POS Shift`),1),v("h2",iPe,R(t.t`Closing Cash`),1),t.isValuesSeeded?(w(),H(o,{key:0,class:"text-base",df:t.getField("closingCash"),"show-header":!0,border:!0,value:((c=t.posClosingShiftDoc)==null?void 0:c.closingCash)??[],"read-only":!1,onRowChange:t.setClosingCashAmount},null,8,["df","value","onRowChange"])):B("",!0),e[1]||(e[1]=v("h2",{class:"mt-6 mb-2 text-lg dark:text-gray-100 font-medium"}," Closing Amounts ",-1)),t.isValuesSeeded?(w(),H(o,{key:1,class:"text-base",df:t.getField("closingAmounts"),"show-header":!0,border:!0,value:(u=t.posClosingShiftDoc)==null?void 0:u.closingAmounts,"read-only":!0,onRowChange:t.setClosingCashAmount},null,8,["df","value","onRowChange"])):B("",!0),v("div",sPe,[_(a,{class:"w-full py-5 bg-red-500 dark:bg-red-700",onClick:e[0]||(e[0]=h=>t.$emit("toggleModal","ShiftClose",!1))},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",rPe,R(t.t`Cancel`),1)])]),_:3}),_(a,{class:"w-full py-5 bg-green-500 dark:bg-green-700",onClick:t.handleSubmit},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",oPe,R(t.t`Submit`),1)])]),_:3},8,["onClick"])])]}),_:3},8,["open-modal"])}const GE=ne(tPe,[["render",aPe]]),lPe=ve({name:"LoyaltyProgramModal",components:{Modal:di,Button:At,Int:nu},props:{loyaltyPoints:{type:Number,default:0},loyaltyProgram:{type:String,default:""}},emits:["setLoyaltyPoints","toggleModal"],setup(){return{sinvDoc:st("sinvDoc")}},data(){return{validationError:!1}},methods:{async keydownEnter(t){await this.updateLoyaltyPoints(t),this.setLoyaltyPoints()},cancelLoyaltyProgram(){this.$emit("setLoyaltyPoints",0),this.$emit("toggleModal","LoyaltyProgram")},async updateLoyaltyPoints(t){var e,n,i;try{const s=await this.fyo.db.get(A.Party,this.sinvDoc.party);if(!s.loyaltyProgram)return;const r=await this.fyo.db.getAll(A.LoyaltyProgram,{fields:["conversionFactor","toDate"],filters:{name:s.loyaltyProgram}}),o=(e=r[0])==null?void 0:e.toDate,a=new Date;if(a.setHours(0,0,0,0),o&&new Date(o).getTime()<a.getTime())throw new Error(b`Loyalty program has expired and cannot be applied`);if(this.loyaltyPoints>=t)this.sinvDoc.loyaltyPoints=t;else throw new Error(`${this.sinvDoc.party} only has ${this.loyaltyPoints} points`);const l=t*(((n=r[0])==null?void 0:n.conversionFactor)||0);if((i=this.sinvDoc.baseGrandTotal)!=null&&i.lt(l))throw new Error(b`no need ${t} points to purchase this item`);if(t<0)throw new Error(b`Points must be greater than 0`);this.$emit("setLoyaltyPoints",this.sinvDoc.loyaltyPoints),this.validationError=!1}catch(s){this.validationError=!0,it({type:"error",message:b`${s}`});return}},setLoyaltyPoints(){this.$emit("toggleModal","LoyaltyProgram")}}}),cPe={class:"flex gap-2 p-3 justify-end pt-10"},uPe={class:"dark:text-gray-100 pr-6"},dPe={class:"row-start-6 grid grid-cols-2 gap-4 mt-auto mb-2 px-10"},hPe={class:"col-span-2"},fPe={class:"uppercase text-lg text-white font-semibold"},pPe={class:"row-start-6 grid grid-cols-2 gap-4 mt-auto px-10"},mPe={class:"col-span-2"},gPe={class:"uppercase text-lg text-white font-semibold"};function yPe(t,e,n,i,s,r){const o=Q("Int"),a=Q("Button"),l=Q("Modal");return w(),H(l,{class:"h-96 w-96","set-close-listener":!1},{default:U(()=>[e[2]||(e[2]=v("p",{class:"text-center py-4 dark:text-gray-100"},"Redeem Loyalty Points",-1)),e[3]||(e[3]=v("hr",{class:"dark:border-gray-800"},null,-1)),v("div",cPe,[e[1]||(e[1]=v("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20px",viewBox:"0 -960 960 960",width:"20px",fill:"#F19E39"},[v("path",{d:"M480-60q-117 0-217.22-65.23T108.33-287.77v133.92H58.08v-220h220v50.26H146.05q44.87 89.95 137.44 151.64 92.56 61.69 196.51 61.69 74.95 0 141.19-27.89 66.25-27.9 116.04-76.35 49.8-48.45 79.81-114.31 30.01-65.86 32.32-141.19h50.25q-1.92 85.23-35.65 159.85-33.73 74.61-90.46 130.38Q716.77-124 641.19-92 565.61-60 480-60Zm-24.92-144.31v-51.54q-42.85-10.64-72.5-35.38-29.66-24.74-48.58-68.21l43.44-16.41q14.3 37.85 43.39 58.77 29.09 20.93 65.58 20.93 37.8 0 66.31-18.94 28.51-18.94 28.51-56.14 0-33.21-23.55-53.89t-89.22-46.62q-62.36-24.06-90.82-51.52-28.46-27.46-28.46-73.61 0-40.18 28.54-71.05 28.54-30.87 79.36-38.49v-48.87h47.43v48.87q34.51 3.03 62.12 22.91 27.6 19.88 43.11 51.81l-41.53 18.36q-13.7-24.54-34.75-38.53-21.05-13.99-51.46-13.99-39.21 0-62.42 19.18-23.22 19.18-23.22 49.8 0 31.28 22.18 48.95 22.18 17.66 84.43 41.1 70.52 27.49 97.72 58.31 27.21 30.82 27.21 77.28 0 26.97-10.17 47.92-10.17 20.95-27.12 35.48-16.94 14.52-39.7 23.06t-48.4 10.92v49.54h-47.43ZM60.39-490q2.69-87.15 36.8-161.96 34.12-74.81 91.23-130.19 57.12-55.39 132.12-86.62Q395.54-900 480-900q115.85 0 217.22 65.43 101.37 65.42 154.45 163.88v-135.46h50.25v220h-220v-50.26h132.03q-43.72-88.15-136.14-150.74-92.42-62.59-197.81-62.59-73.41 0-139.59 27.51t-116.23 75.58q-50.05 48.06-80.64 113.92-30.59 65.86-32.9 142.73H60.39Z"})],-1)),v("p",uPe,R(t.loyaltyPoints)+" - ("+R(t.loyaltyProgram)+") ",1)]),t.sinvDoc.fieldMap?(w(),H(o,{key:0,class:"flex-shrink-0 px-10 pb-10","show-label":!0,border:!0,"focus-input":!0,value:t.sinvDoc.loyaltyPoints,df:t.sinvDoc.fieldMap.loyaltyPoints,onKeydown:pn(t.setLoyaltyPoints,["enter"]),onChange:t.updateLoyaltyPoints},null,8,["value","df","onKeydown","onChange"])):B("",!0),v("div",dPe,[v("div",hPe,[_(a,{class:"w-full bg-green-500 dark:bg-green-700",style:{padding:"1.35rem"},disabled:t.validationError,onClick:e[0]||(e[0]=c=>t.setLoyaltyPoints())},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",fPe,R(t.t`Save`),1)])]),_:3},8,["disabled"])])]),v("div",pPe,[v("div",mPe,[_(a,{class:"w-full bg-red-500 dark:bg-red-700",style:{padding:"1.35rem"},onClick:t.cancelLoyaltyProgram},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",gPe,R(t.t`Cancel`),1)])]),_:3},8,["onClick"])])])]),_:3})}const UE=ne(lPe,[["render",yPe]]),OPe=ve({name:"ReturnSalesInvoice",components:{Modal:di,Button:At,FormControl:is,Row:ho,Paginator:nA},props:{modalStatus:Boolean},emits:["toggleModal","selectedReturnInvoice"],setup(){return{sinvDoc:st("sinvDoc")}},data(){return{returnedInvoices:[],invoiceSearchTerm:"",pageStart:0,pageEnd:20}},computed:{ratio(){return[1,1,1,.8]},tableFields(){return[{fieldname:"name",label:"Name",fieldtype:"Link",target:"SalesInvoice",readOnly:!0},{fieldname:"party",fieldtype:"Link",label:"Customer",target:"Party",placeholder:"Customer",readOnly:!0},{fieldname:"date",label:"Date",fieldtype:"Date",readOnly:!0},{fieldname:"grandTotal",label:"Grand Total",fieldtype:"Currency",readOnly:!0}]},filteredInvoices(){return this.returnedInvoices.filter(t=>t.name.toLowerCase().includes(this.invoiceSearchTerm.toLowerCase()))},paginatedInvoices(){return this.filteredInvoices.slice(this.pageStart,this.pageEnd)}},watch:{async modalStatus(t){t&&await this.setReturnedInvoices()},invoiceSearchTerm(){this.pageStart=0,this.pageEnd=this.pageEnd-this.pageStart||20}},async mounted(){await this.setReturnedInvoices()},async activated(){await this.setReturnedInvoices()},methods:{returnInvoice(t){this.$emit("selectedReturnInvoice",t.name),this.$emit("toggleModal","ReturnSalesInvoice")},handleSearchEnter(){this.filteredInvoices.length===1&&this.returnInvoice(this.filteredInvoices[0])},setPageIndices({start:t,end:e}){this.pageStart=t,this.pageEnd=e},async setReturnedInvoices(){const t=await this.fyo.db.getAll(A.SalesInvoice,{fields:[],filters:{isPOS:!0,submitted:!0,cancelled:!1}}),e=t.filter(n=>n.isFullyReturned||n.returnAgainst?!1:!!(n.isReturned&&!n.isFullyReturned||!n.isReturned&&!n.returnAgainst||!n.isReturned&&!n.outstandingAmount.isZero())).map(n=>n.name);this.returnedInvoices=t.filter(n=>e.includes(n.name))}}}),bPe={class:"text-center font-semibold dark:text-gray-400"},vPe={class:"mt-4"},wPe={class:"overflow-y-auto custom-scroll custom-scroll-thumb2",style:{height:"65vh",width:"60vh"}},SPe={class:"mt-1 mb-1"},CPe={class:"row-start-6 grid grid-cols-2 gap-4 mt-1"},APe={class:"col-span-2"},xPe={class:"uppercase text-lg text-white font-semibold"};function kPe(t,e,n,i,s,r){const o=Q("Row"),a=Q("FormControl"),l=Q("Paginator"),c=Q("Button"),u=Q("Modal");return w(),H(u,{class:"h-auto w-auto p-5","set-close-listener":!1},{default:U(()=>[v("p",bPe,R(t.t`Invoices`),1),e[3]||(e[3]=v("hr",{class:"mt-2 dark:border-gray-800"},null,-1)),v("div",vPe,[mn(v("input",{"onUpdate:modelValue":e[0]||(e[0]=h=>t.invoiceSearchTerm=h),type:"text",placeholder:"Search by Invoice Name",class:"w-full p-2 border rounded-md dark:bg-gray-800 dark:text-white focus:outline-none focus:ring-0",onKeydown:e[1]||(e[1]=pn((...h)=>t.handleSearchEnter&&t.handleSearchEnter(...h),["enter"]))},null,544),[[qo,t.invoiceSearchTerm]])]),e[4]||(e[4]=v("hr",{class:"mt-2 dark:border-gray-800"},null,-1)),_(o,{ratio:t.ratio,class:"border flex items-center mt-2 px-2 w-full rounded-t-md text-gray-600 dark:border-gray-800 dark:text-gray-400"},{default:U(()=>[(w(!0),P(le,null,Pe(t.tableFields,h=>(w(),P("div",{key:h.fieldname,class:"flex items-center px-2 py-2 text-lg"},R(h.label),1))),128))]),_:1},8,["ratio"]),v("div",wPe,[(w(!0),P(le,null,Pe(t.paginatedInvoices,h=>(w(),H(o,{key:h.name,ratio:t.ratio,border:!0,class:"border-b border-l border-r dark:border-gray-800 dark:bg-gray-890 flex group h-row-mid hover:bg-gray-25 items-center justify-center px-2 w-full",onClick:p=>t.returnInvoice(h)},{default:U(()=>[(w(!0),P(le,null,Pe(t.tableFields,p=>(w(),H(a,{key:p.fieldname,size:"large",df:p,value:h[p.fieldname],"read-only":!0},null,8,["df","value"]))),128))]),_:2},1032,["ratio","onClick"]))),128))]),v("div",SPe,[_(l,{"item-count":t.filteredInvoices.length,"allowed-counts":[20,40,-1],onIndexChange:t.setPageIndices},null,8,["item-count","onIndexChange"])]),v("div",CPe,[v("div",APe,[_(c,{class:"w-full p-5 bg-red-500 dark:bg-red-700",onClick:e[2]||(e[2]=h=>t.$emit("toggleModal","SavedInvoice"))},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",xPe,R(t.t`Cancel`),1)])]),_:3})])])]),_:3})}const HE=ne(OPe,[["render",kPe]]),YE={name:"MultiLabelLink",extends:zl,data(){return{results:[]}},watch:{value:{immediate:!0,handler(t){this.setLinkValue(t)}}},props:{thirdLink:String,showSecondaryLink:{type:Boolean,default:!1},secondaryLink:String,showClearButton:{type:Boolean,default:!1}},mounted(){this.value&&this.setLinkValue()},methods:{async setLinkValue(t,e){var a,l;if(e)return this.linkValue=t||"";const n=t??this.value,{fieldname:i,target:s}=this.df??{},r=(a=N.schemaMap[s??""])==null?void 0:a.linkDisplayField;if(!r)return this.linkValue=n;const o=await((l=this.doc)==null?void 0:l.loadAndGetLink(i));this.linkValue=(o==null?void 0:o.get(r))??""},getTargetSchemaName(){return this.df.target},async getOptions(){var r;const t=this.getTargetSchemaName();if(!t)return[];if((r=this.results)!=null&&r.length)return this.results;const e=N.schemaMap[t],n=await this.getFilters(),i=[...new Set(["name",this.secondaryLink,e.titleField,this.df.groupBy])].filter(Boolean),s=await N.db.getAll(t,{filters:n,fields:i});return this.results=s.map(o=>{const a={label:o[this.secondaryLink]&&this.showSecondaryLink?`${o[e.titleField]}    ${o[this.secondaryLink]}`:o[e.titleField],value:o.name,value2:o[this.secondaryLink]};return this.df.groupBy&&(a.group=o[this.df.groupBy]),a}).filter(Boolean)},async getSuggestions(t=""){let e=await this.getOptions();return t&&(e=e.map(n=>({...L1(t,n.label),item:n})).filter(({isMatch:n})=>n).sort((n,i)=>n.distance-i.distance).map(({item:n})=>n)),this.doc&&this.df.create&&(e=e.concat(this.getCreateNewOption())),e.length===0&&!this.df.emptyMessage?[{component:Hs({template:'<span class="text-gray-600 dark:text-gray-400">{{ t`No results found` }}</span>'}),action:()=>{},actionOnly:!0}]:e},getCreateNewOption(){return{label:b`Create`,action:()=>this.openNewDoc(),actionOnly:!0,component:Hs({template:'<div class="flex items-center font-semibold">{{ t`Create` }}<Badge color="blue" class="ms-2" v-if="isNewValue">{{ linkValue }}</Badge></div>',computed:{value:()=>this.value,linkValue:()=>this.linkValue,isNewValue:()=>{const t=this.suggestions.map(e=>e.label);return this.linkValue&&!t.includes(this.linkValue)}},components:{Badge:YC}})}},async openNewDoc(){const t=this.df.target,e=this.linkValue||N.doc.getTemporaryName(N.schemaMap[t]),n=await this.getCreateFilters(),{openQuickEdit:i}=await rn(async()=>{const{openQuickEdit:r}=await Promise.resolve().then(()=>su);return{openQuickEdit:r}},void 0),s=N.doc.getNewDoc(t,{name:e,...n});i({doc:s}),s.once("afterSync",()=>{this.$router.back(),this.results=[],this.triggerChange(s.name)})},async getCreateFilters(){var r,o;const{schemaName:t,fieldname:e}=this.df,n=(o=(r=N.models[t])==null?void 0:r.createFilters)==null?void 0:o[e];let i=await(n==null?void 0:n(this.doc));if(i!==void 0)return i;const s=await this.getFilters();return BC(s)},async getFilters(){var i,s;const{schemaName:t,fieldname:e}=this.df,n=(s=(i=N.models[t])==null?void 0:i.filters)==null?void 0:s[e];if(n===void 0)return{};if(this.doc)return await n(this.doc)??{};try{return await n()??{}}catch{return{}}}}},PPe=ve({name:"ModernPOSItemsGrid",emits:["addItem","updateValues"],props:{items:{type:Array},itemQtyMap:{type:Object},itemVisibility:{type:String,default:"Inventory Items"}},methods:{getExtractedWords(t){return t.split(" ").map(n=>n[0].toUpperCase()).join("")},handleChange(t){this.$emit("addItem",t),this.$emit("updateValues")}}}),TPe={class:"flex flex-col items-center gap-4 my-3 px-4 py-2 rounded-t-md text-black w-full overflow-y-auto custom-scroll custom-scroll-thumb2",style:{height:"80vh"}},$Pe={class:"gap-2 w-full grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-7'"},DPe=["onClick"],MPe={class:"self-center w-full h-32 lg:h-28 p-1 rounded-lg"},IPe={class:"relative w-auto h-full"},RPe=["src"],_Pe={key:1,class:"rounded-lg bg-gray-100 w-full h-full flex justify-center items-center dark:bg-gray-850"},EPe={class:"text-4xl font-semibold text-gray-400 select-none"},QPe={class:"text-lg font-medium dark:text-white"},NPe={class:"text-lg font-medium dark:text-white"};function LPe(t,e,n,i,s,r){return w(),P("div",TPe,[v("div",$Pe,[(w(!0),P(le,null,Pe(t.items,o=>(w(),P("div",{class:"pb-3 border border-gray-300 dark:border-gray-800 flex flex-col text-sm text-center",onClick:a=>t.handleChange(o),key:o.name},[v("div",MPe,[v("div",IPe,[o.image?(w(),P("img",{key:0,src:o.image,alt:"",class:"rounded-lg w-full h-full object-cover"},null,8,RPe)):(w(),P("div",_Pe,[v("p",EPe,R(t.getExtractedWords(o.name)),1)])),t.itemVisibility!=="ERP Sync Items"?(w(),P("p",{key:2,class:ee(["w-6 h-6 top-1 right-1 absolute rounded-full flex justify-center items-center",o.availableQty>0?"bg-green-100 text-green-900":"bg-red-100 text-red-900"])},R(o.availableQty),3)):B("",!0)])]),v("h3",QPe,R(o.name),1),v("p",NPe,R(o.rate?t.fyo.currencySymbols[o.rate.getCurrency()]:void 0)+" "+R(o.rate),1)],8,DPe))),128))])])}const FPe=ne(PPe,[["render",LPe]]),BPe=ve({name:"ModernPOSItemsTable",components:{FormControl:is,Row:ho},emits:["addItem","updateValues"],props:{items:Array,itemQtyMap:Object,itemVisibility:{type:String,default:"Inventory Items"}},computed:{ratio(){return this.itemVisibility==="ERP Sync Items"?[1,1.5,.8]:[1,1,1,.7]},tableFields(){const t=[{fieldname:"name",fieldtype:"Data",label:b`Item`,placeholder:"Item",readOnly:!0},{fieldname:"rate",label:b`Rate`,placeholder:"Rate",fieldtype:"Currency",readOnly:!0},{fieldname:"unit",label:b`Unit`,placeholder:"Unit",fieldtype:"Data",target:"UOM",readOnly:!0}];return this.itemVisibility!=="ERP Sync Items"&&t.splice(2,0,{fieldname:"availableQty",label:b`Qty`,placeholder:"Available Qty",fieldtype:"Float",readOnly:!0}),t},firstColumnItems(){var t;return(t=this.items)==null?void 0:t.slice(0,Math.ceil(this.items.length/2))},secondColumnItems(){var t;return(t=this.items)==null?void 0:t.slice(Math.ceil(this.items.length/2))}},methods:{handleChange(t){this.$emit("addItem",t),this.$emit("updateValues")},isNumeric:lo}}),VPe={class:"flex gap-2"},jPe={class:"w-1/2 overflow-y-auto custom-scroll custom-scroll-thumb2",style:{height:"81vh"}},zPe={class:"w-1/2 overflow-y-auto custom-scroll custom-scroll-thumb2",style:{height:"calc(80vh - 20rem)"}};function ZPe(t,e,n,i,s,r){const o=Q("Row"),a=Q("FormControl");return w(),P("div",VPe,[v("div",jPe,[_(o,{ratio:t.ratio,class:"mt-2 px-2 w-full flex items-center border rounded-t-md text-gray-600 dark:border-gray-800 dark:text-gray-400"},{default:U(()=>[(w(!0),P(le,null,Pe(t.tableFields,l=>(w(),P("div",{key:l.fieldname,class:ee(["flex items-center p-2 text-lg",{"ms-auto":t.isNumeric(l)}])},R(l.label),3))),128))]),_:1},8,["ratio"]),(w(!0),P(le,null,Pe(t.firstColumnItems,l=>(w(),H(o,{key:l.id,ratio:t.ratio,border:!0,class:"px-2 w-full border flex items-center justify-center group h-row-mid hover:bg-gray-25 dark:border-gray-800 dark:bg-gray-890",onClick:c=>t.handleChange(l)},{default:U(()=>[(w(!0),P(le,null,Pe(t.tableFields,c=>(w(),H(a,{key:c.fieldname,size:"large",df:c,value:l[c.fieldname],readOnly:!0},null,8,["df","value"]))),128))]),_:2},1032,["ratio","onClick"]))),128))]),v("div",zPe,[_(o,{ratio:t.ratio,class:"mt-2 px-2 w-full flex items-center border rounded-t-md text-gray-600 dark:border-gray-800 dark:text-gray-400"},{default:U(()=>[(w(!0),P(le,null,Pe(t.tableFields,l=>(w(),P("div",{key:l.fieldname,class:ee(["flex items-center p-2 text-lg",{"ms-auto":t.isNumeric(l)}])},R(l.label),3))),128))]),_:1},8,["ratio"]),(w(!0),P(le,null,Pe(t.secondColumnItems,l=>(w(),H(o,{key:l.id,ratio:t.ratio,border:!0,class:"px-2 w-full border flex items-center justify-center group h-row-mid hover:bg-gray-25 dark:bg-gray-890 dark:border-gray-800",onClick:c=>t.handleChange(l)},{default:U(()=>[(w(!0),P(le,null,Pe(t.tableFields,c=>(w(),H(a,{key:c.fieldname,size:"large",df:c,value:l[c.fieldname],readOnly:!0},null,8,["df","value"]))),128))]),_:2},1032,["ratio","onClick"]))),128))])])}const qPe=ne(BPe,[["render",ZPe]]),XPe=ve({name:"FloatingLabelInputBase",extends:sr}),WPe={class:"relative"},GPe=["type","value","max","min","readonly","tabindex"];function UPe(t,e,n,i,s,r){return w(),P("div",WPe,[v("input",{type:t.inputType,class:ee([[t.inputClasses,t.size==="large"?"text-lg":"text-sm"],"block px-2.5 pb-2.5 pt-4 w-full font-medium text-gray-900 dark:text-gray-100 bg-gray-25 dark:bg-gray-850 rounded-lg border border-gray-200 dark:border-gray-800 appearance-none focus:outline-none focus:ring-0 peer"]),value:t.value,max:t.isNumeric(t.df)?t.df.maxvalue:void 0,min:t.isNumeric(t.df)?t.df.minvalue:void 0,readonly:t.isReadOnly,tabindex:t.isReadOnly?"-1":"0",onBlur:e[0]||(e[0]=(...o)=>t.onBlur&&t.onBlur(...o))},null,42,GPe),v("label",{for:"floating_outlined",class:ee([t.size==="large"?"text-xl":"text-md","absolute font-medium text-gray-500 duration-300 transform -translate-y-4 scale-75 top-1 z-10 origin-[0] bg-white2 px-2 peer-focus:px-2 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 left-1"])},R(t.df.label),3)])}const KE=ne(XPe,[["render",UPe]]),JE=ve({name:"FloatingLabelFloatInput",extends:KE,computed:{inputType(){return"number"}}}),HPe=ve({name:"FloatingLabelCurrencyInput",extends:KE,computed:{currency(){if(this.value)return this.value.getCurrency()}},methods:{round(t){return ui(t)||(t=this.parse(t)),ui(t)?t.round():N.pesa(0).round()},parse(t){return KD(t,this.fyo)}}}),YPe={class:"relative"},KPe=["type","value","max","min","readonly","tabindex"];function JPe(t,e,n,i,s,r){return w(),P("div",YPe,[v("input",{type:t.inputType,class:ee([[t.inputClasses,t.size==="large"?"text-lg":"text-sm"],"block px-2.5 pb-2.5 pt-4 w-full font-medium text-gray-900 dark:text-gray-100 bg-gray-25 dark:bg-gray-850 rounded-lg border border-gray-200 dark:border-gray-800 appearance-none focus:outline-none focus:ring-0 peer"]),value:t.round(t.value),max:t.isNumeric(t.df)?t.df.maxvalue:void 0,min:t.isNumeric(t.df)?t.df.minvalue:void 0,readonly:t.isReadOnly,tabindex:t.isReadOnly?"-1":"0",onBlur:e[0]||(e[0]=(...o)=>t.onBlur&&t.onBlur(...o))},null,42,KPe),v("label",{for:"floating_outlined",class:ee([t.size==="large"?"text-xl":"text-md","absolute font-medium text-gray-500 duration-300 transform -translate-y-4 scale-75 top-8 z-10 origin-[0] bg-white2 px-2 peer-focus:px-2 peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 left-1"])},R(t.currency?t.fyo.currencySymbols[t.currency]:void 0),3),v("label",{for:"floating_outlined",class:ee([t.size==="large"?"text-xl":"text-md","absolute font-medium text-gray-500 duration-300 transform -translate-y-4 scale-75 top-1 z-10 origin-[0] bg-white2 px-2 peer-focus:px-2 peer-focus:text-blue-600 peer-placeholder-shown:scale-100 peer-placeholder-shown:-translate-y-1/2 peer-placeholder-shown:top-1/2 peer-focus:top-2 peer-focus:scale-75 peer-focus:-translate-y-4 left-1"])},R(t.df.label),3)])}const eQ=ne(HPe,[["render",JPe]]),e6e=ve({name:"ModernPOSSelectedItemRow",components:{Currency:Bp,Data:qa,Float:nh,Int:nu,Link:rr,Text:j1},props:{row:{type:Rp,required:!0},batchAdded:{type:Boolean,default:!1},expandedBatchId:{type:String,default:void 0}},emits:["toggleModal","runSinvFormulas","selectedRow","applyPricingRule","setExpandedBatchId"],setup(){return{isDiscountingEnabled:st("isDiscountingEnabled"),itemSerialNumbers:st("itemSerialNumbers")}},data(){return{isExapanded:!1,batches:[],availableQtyInBatch:0,itemVisibility:"",defaultRate:this.row.rate}},watch:{expandedBatchId(t){t!==this.row.name&&(this.isExapanded=!1)},"row.batch":{async handler(t){t&&(this.availableQtyInBatch=await this.getAvailableQtyInBatch(),this.isExapanded=!0,this.$emit("setExpandedBatchId",this.row.name))},immediate:!0}},computed:{isUOMConversionEnabled(){var t;return!!((t=N.singles.InventorySettings)!=null&&t.enableUomConversions)},hasSerialNumber(){var t,e;return!!((t=this.row.links)!=null&&t.item&&((e=this.row.links)!=null&&e.item.hasSerialNumber))},isReadOnly(){return this.row.isFreeItem}},methods:{toggleExpand(){this.isExapanded?(this.isExapanded=!1,this.$emit("setExpandedBatchId",void 0)):(this.isExapanded=!0,this.$emit("setExpandedBatchId",this.row.name))},handleOpenKeyboard(t,e){this.isReadOnly||(this.$emit("selectedRow",t,e),this.$emit("toggleModal","Keyboard"))},async getAvailableQtyInBatch(){return this.row.batch?await N.db.getStockQuantity(this.row.item,void 0,void 0,void 0,this.row.batch)??0:0},async setBatch(t){this.row.set("batch",t),this.availableQtyInBatch=await this.getAvailableQtyInBatch()},setSerialNumber(t){t&&(this.itemSerialNumbers[this.row.item]=t,FE(t,this.row.quantity??0,this.row.item))},async removeAddedItem(t){var e;(e=this.row.parentdoc)==null||e.remove("items",t==null?void 0:t.idx),t.isFreeItem||this.$emit("applyPricingRule")}}}),t6e={key:0,class:"absolute flex top-0 font-medium text-xs ml-2 text-green-800",style:{"font-size":"0.6rem"}},n6e={class:"flex justify-center"},i6e={key:0,class:"rounded-md grid grid-cols-4 my-3",style:{width:"27vw"}},s6e={class:"px-4 col-span-2"},r6e={class:"px-4 col-span-2"},o6e={class:"px-4 pt-6 col-span-2"},a6e={class:"px-4 pt-6 col-span-2"},l6e={class:"px-4 col-span-2 mt-5"},c6e={class:"px-4 col-span-2 mt-5"},u6e={key:0,class:"px-4 pt-6 col-span-2"},d6e={key:1,class:"px-4 pt-6 col-span-2"},h6e={key:2,class:"px-4 pt-6 col-span-4"};function f6e(t,e,n,i,s,r){var p,m,y,O,S;const o=Q("feather-icon"),a=Q("Link"),l=Q("Int"),c=Q("Currency"),u=Q("Float"),h=Q("Text");return w(),P(le,null,[v("div",null,[_(o,{name:t.isExapanded?"chevron-up":"chevron-down",class:"w-4 h-4 inline-flex dark:text-white",onClick:t.toggleExpand},null,8,["name","onClick"])]),v("div",{class:"relative",onClick:e[0]||(e[0]=(...x)=>t.toggleExpand&&t.toggleExpand(...x))},[_(a,{df:{fieldname:"item",fieldtype:"Data",label:t.t`Item`},class:ee(t.row.isFreeItem?"mt-2":""),size:"small",border:!1,value:t.row.item,"read-only":!0},null,8,["df","class","value"]),t.row.isFreeItem?(w(),P("p",t6e,R(t.row.pricingRule),1)):B("",!0)]),_(l,{df:{fieldname:"quantity",fieldtype:"Int",label:t.t`Quantity`},size:"small",border:!1,value:t.row.quantity,"read-only":!0},null,8,["df","value"]),_(c,{df:{fieldtype:"Currency",fieldname:"rate",label:t.t`Rate`},size:"small",border:!1,value:t.row.rate,"read-only":!0},null,8,["df","value"]),_(c,{df:{fieldtype:"Currency",fieldname:"amount",label:t.t`Amount`},size:"small",border:!1,value:t.row.amount,"read-only":!0},null,8,["df","value"]),v("div",n6e,[_(o,{name:"trash",class:"w-4 text-xl text-red-500",onClick:e[1]||(e[1]=x=>t.removeAddedItem(t.row))})]),e[9]||(e[9]=v("div",null,null,-1)),t.isExapanded?(w(),P("div",i6e,[v("div",s6e,[_(u,{df:{fieldname:"quantity",fieldtype:"Float",label:t.t`Quantity`},onClick:e[2]||(e[2]=x=>t.handleOpenKeyboard(t.row,"quantity")),size:"medium",min:0,border:!0,"show-label":!0,value:t.row.quantity,"read-only":t.isReadOnly},null,8,["df","value","read-only"])]),v("div",r6e,[t.isUOMConversionEnabled?(w(),H(a,{key:0,df:{fieldname:"transferUnit",fieldtype:"Link",target:"UOM",label:t.t`Transfer Unit`},size:"medium","show-label":!0,border:!0,value:t.row.transferUnit,"read-only":t.isReadOnly},null,8,["df","value","read-only"])):B("",!0)]),v("div",o6e,[t.isUOMConversionEnabled?(w(),H(l,{key:0,df:{fieldtype:"Int",fieldname:"transferQuantity",label:t.t`Transfer Quantity`},onClick:e[3]||(e[3]=x=>!t.isReadOnly&&t.handleOpenKeyboard(t.row,"transferQuantity")),size:"medium",border:!0,"show-label":!0,value:t.row.transferQuantity,"read-only":t.isReadOnly},null,8,["df","value","read-only"])):B("",!0)]),v("div",a6e,[_(c,{df:{fieldtype:"Currency",fieldname:"rate",label:t.t`Rate`},onClick:e[4]||(e[4]=x=>!t.isReadOnly&&t.handleOpenKeyboard(t.row,"rate")),size:"medium","show-label":!0,border:!0,value:t.row.rate,"read-only":t.isReadOnly},null,8,["df","value","read-only"])]),v("div",l6e,[t.isDiscountingEnabled?(w(),H(c,{key:0,df:{fieldtype:"Currency",fieldname:"discountAmount",label:"Discount Amount"},onClick:e[5]||(e[5]=x=>t.handleOpenKeyboard(t.row,"itemDiscountAmount")),class:"col-span-2",size:"medium","show-label":!0,border:!0,value:t.row.itemDiscountAmount,"read-only":t.row.itemDiscountPercent>0||t.isReadOnly},null,8,["value","read-only"])):B("",!0)]),v("div",c6e,[t.isDiscountingEnabled?(w(),H(u,{key:0,df:{fieldtype:"Float",fieldname:"itemDiscountPercent",label:t.t`Discount Percent`},onClick:e[6]||(e[6]=x=>t.handleOpenKeyboard(t.row,"itemDiscountPercent")),size:"medium","show-label":!0,border:!0,value:t.row.itemDiscountPercent,"read-only":!((p=t.row.itemDiscountAmount)!=null&&p.isZero())||t.isReadOnly},null,8,["df","value","read-only"])):B("",!0)]),(m=t.row.links)!=null&&m.item&&((y=t.row.links)!=null&&y.item.hasBatch)?(w(),P("div",u6e,[_(a,{df:{fieldname:"batch",fieldtype:"Link",target:"Batch",label:t.t`Batch`,filters:{item:t.row.item}},size:"medium",value:t.row.batch,border:!0,"show-label":!0,"read-only":!1,onChange:e[7]||(e[7]=x=>t.setBatch(x))},null,8,["df","value"])])):B("",!0),(O=t.row.links)!=null&&O.item&&((S=t.row.links)!=null&&S.item.hasBatch)?(w(),P("div",d6e,[_(u,{df:{fieldname:"availableQtyInBatch",fieldtype:"Float",label:t.t`Qty in Batch`},size:"medium",min:0,value:t.availableQtyInBatch,"show-label":!0,border:!0,"read-only":!0,"text-right":!0},null,8,["df","value"])])):B("",!0),t.hasSerialNumber?(w(),P("div",h6e,[_(h,{df:{label:t.t`Serial Number`,fieldtype:"Text",fieldname:"serialNumber"},value:t.row.serialNumber,"show-label":!0,border:!0,required:t.hasSerialNumber,onChange:e[8]||(e[8]=x=>t.setSerialNumber(x))},null,8,["df","value","required"])])):B("",!0)])):B("",!0)],64)}const p6e=ne(e6e,[["render",f6e]]),m6e=ve({name:"ModernPOSSelectedItemTable",components:{FormContainer:Lp,FormControl:is,Link:rr,Row:ho,RowEditForm:JC,ModernPOSSelectedItemRow:p6e},setup(){return{sinvDoc:st("sinvDoc")}},props:{expandedBatchId:{type:String,default:void 0}},emits:["toggleModal","selectedRow","applyPricingRule","setExpandedBatchId"],computed:{ratio(){return[.1,.8,.4,.8,.8,.3]},tableFields(){return[{fieldname:"toggler",fieldtype:"Link",label:" "},{fieldname:"item",fieldtype:"Link",label:b`Item`,placeholder:"Item",required:!0,schemaName:"Item"},{fieldname:"quantity",label:b`Quantity`,placeholder:"Quantity",fieldtype:"Int",required:!0,schemaName:""},{fieldname:"rate",label:b`Rate`,placeholder:"Rate",fieldtype:"Currency",required:!0,schemaName:""},{fieldname:"amount",label:b`Amount`,placeholder:"Amount",fieldtype:"Currency",required:!0,schemaName:""},{fieldname:"removeItem",fieldtype:"Link",label:" "}]}},methods:{async runSinvFormulas(){await this.sinvDoc.runFormulas()},selectedItemRow(t,e){this.$emit("selectedRow",t,e)},isNumeric:lo}}),g6e={class:"overflow-auto custom-scroll custom-scroll-thumb1",style:{height:"calc(90vh - 25rem)"}};function y6e(t,e,n,i,s,r){const o=Q("Row"),a=Q("ModernPOSSelectedItemRow");return w(),P(le,null,[_(o,{ratio:t.ratio,class:"w-full px-2 mt-2 border rounded-t text-gray-600 dark:border-gray-800 dark:text-gray-400"},{default:U(()=>[t.tableFields?(w(!0),P(le,{key:0},Pe(t.tableFields,l=>(w(),P("div",{key:l.fieldname,class:ee(["text-lg flex m-2",{"ms-auto":t.isNumeric(l)}])},R(l.label),3))),128)):B("",!0)]),_:1},8,["ratio"]),v("div",g6e,[(w(!0),P(le,null,Pe(t.sinvDoc.items,l=>(w(),H(o,{ratio:t.ratio,class:"p-2 border w-full hover:bg-gray-25 dark:border-gray-800 dark:bg-gray-890"},{default:U(()=>[_(a,{row:l,"expanded-batch-id":t.expandedBatchId,onSetExpandedBatchId:e[0]||(e[0]=c=>t.$emit("setExpandedBatchId",c)),onSelectedRow:t.selectedItemRow,onRunSinvFormulas:t.runSinvFormulas,onApplyPricingRule:e[1]||(e[1]=c=>t.$emit("applyPricingRule")),onToggleModal:e[2]||(e[2]=c=>t.$emit("toggleModal"))},null,8,["row","expanded-batch-id","onSelectedRow","onRunSinvFormulas"])]),_:2},1032,["ratio"]))),256))])],64)}const O6e=ne(m6e,[["render",y6e]]),b6e=ve({name:"BatchSelectionModal",components:{Modal:di,Button:At,Link:rr},props:{itemCode:{type:String,required:!0}},emits:["toggleModal","batchSelected"],data(){return{selectedBatch:""}},methods:{async getBatchOptions(){if(!this.itemCode)return[];try{return(await N.db.getAll(A.Batch,{filters:{item:this.itemCode},fields:["name"]})).map(e=>({label:e.name,value:e.name}))}catch{return it({type:"error",message:b`Failed to load batches`}),[]}},submitSelection(){this.$emit("batchSelected",this.selectedBatch),this.$emit("toggleModal","BatchSelection"),this.selectedBatch=""},closeModal(){this.$emit("toggleModal","BatchSelection"),this.selectedBatch=""}}}),v6e={class:"text-center font-semibold py-3 text-gray-800 dark:text-gray-200"},w6e={class:"px-10 pt-6"},S6e={class:"mt-8 mb-6 grid grid-cols-2 gap-4"},C6e={class:"uppercase text-lg text-white font-semibold"},A6e={class:"uppercase text-lg text-white font-semibold"};function x6e(t,e,n,i,s,r){const o=Q("Link"),a=Q("Button"),l=Q("Modal");return w(),H(l,{class:"h-auto w-96","set-close-listener":!1},{default:U(()=>[v("p",v6e,R(t.t`Select the Batch`),1),v("div",w6e,[_(o,{df:{fieldname:"batch",fieldtype:"Link",target:"Batch",label:t.t`Batch`,required:!0,getOptions:t.getBatchOptions,filters:{item:t.itemCode}},value:t.selectedBatch,border:!0,"show-label":!0,onChange:e[0]||(e[0]=c=>t.selectedBatch=c)},null,8,["df","value"]),v("div",S6e,[_(a,{class:"w-full bg-green-500 dark:bg-green-700",style:{padding:"1.35rem"},disabled:!t.selectedBatch,onClick:t.submitSelection},{default:U(()=>[v("p",C6e,R(t.t`Select`),1)]),_:1},8,["disabled","onClick"]),_(a,{class:"w-full bg-red-500 dark:bg-red-700",style:{padding:"1.35rem"},onClick:t.closeModal},{default:U(()=>[v("p",A6e,R(t.t`Cancel`),1)]),_:1},8,["onClick"])])])]),_:1})}const tQ=ne(b6e,[["render",x6e]]),k6e=ve({name:"ModernPos",components:{Link:rr,Button:At,AlertModal:BE,PaymentModal:VE,KeyboardModal:j4e,MultiLabelLink:YE,PriceListModal:jE,ItemEnquiryModal:zE,POSQuickActions:qE,CouponCodeModal:ZE,OpenPOSShiftModal:XE,SavedInvoiceModal:WE,ModernPOSItemsGrid:FPe,ClosePOSShiftModal:GE,LoyaltyProgramModal:UE,ModernPOSItemsTable:qPe,FloatingLabelFloatInput:JE,ReturnSalesInvoiceModal:HE,FloatingLabelCurrencyInput:eQ,ModernPOSSelectedItemTable:O6e,BatchSelectionModal:tQ},props:{paidAmount:Il,tableView:Boolean,itemDiscounts:Il,openAlertModal:Boolean,isPosShiftOpen:Boolean,disablePayButton:Boolean,openPaymentModal:Boolean,openKeyboardModal:Boolean,openPriceListModal:Boolean,openItemEnquiryModal:Boolean,openCouponCodeModal:Boolean,openShiftCloseModal:Boolean,openSavedInvoiceModal:Boolean,openLoyaltyProgramModal:Boolean,openAppliedCouponsModal:Boolean,openReturnSalesInvoiceModal:Boolean,openBatchSelectionModal:Boolean,totalQuantity:{type:Number,default:0},loyaltyPoints:{type:Number,default:0},itemSearchTerm:{type:String,default:""},selectedItemGroup:{type:String,default:""},loyaltyProgram:{type:String,default:""},appliedCouponsCount:{type:Number,default:0},coupons:{type:Object,default:()=>({})},sinvDoc:{type:Object,default:void 0},itemQuantityMap:{type:Object,default:()=>({})},items:{type:Array,default:()=>[]},itemVisibility:{type:String,default:"Inventory Items"},profile:{type:Object,required:!1,default:null},batchAddedItems:{type:Array,default:()=>[]},selectedItemForBatch:{type:String,default:""},expandedBatchId:{type:String,default:void 0}},emits:["setExpandedBatchId","addItem","toggleView","toggleModal","setCustomer","clearValues","setItemGroup","setPaidAmount","setCouponsCount","routeToSinvList","handleItemSearch","setLoyaltyPoints","setPaymentMethod","setTransferRefNo","applyPricingRule","saveInvoiceAction","createTransaction","setTransferAmount","selectedInvoiceName","selectedReturnInvoice","setTransferClearanceDate","saveAndContinue","handlePaymentAction","selectedRow","batchSelected"],data(){return{additionalDiscounts:N.pesa(0),selectedItemField:"",selectedItemRow:{},itemGroupFilter:""}},computed:{isReturnInvoiceEnabledReturn:()=>{var t;return((t=N.singles.AccountingSettings)==null?void 0:t.enableInvoiceReturns)??void 0}},methods:{emitEvent(t,...e){this.$emit(t,...e)},selectedRow(t,e){this.selectedItemRow=t,this.selectedItemField=e,this.$emit("selectedRow",t)},getItem:LE}}),P6e={class:"bg-gray-25 dark:bg-gray-875 grid grid-cols-9 gap-3 p-4"},T6e={class:"col-span-3 flex h-auto w-full"},$6e={class:"grid grid-rows-5 w-full gap-3"},D6e={class:"p-4 grow h-full row-span-5 bg-white border rounded-md dark:bg-gray-850 dark:border-gray-800"},M6e={class:"h-full p-2 bg-white border rounded-md dark:bg-gray-850 dark:border-gray-800"},I6e={class:"grid grid-cols-2 gap-2"},R6e={class:"mt-2 grid grid-cols-2 gap-2"},_6e={class:"flex w-full gap-2"},E6e={class:"w-full"},Q6e={class:"uppercase text-lg text-white font-semibold"},N6e={class:"uppercase text-lg text-white font-semibold"},L6e={class:"w-full"},F6e={class:"uppercase text-lg text-white font-semibold"},B6e={class:"uppercase text-lg text-white font-semibold"},V6e={class:"uppercase text-lg text-white font-semibold"},j6e={class:"uppercase text-lg text-white font-semibold"},z6e={class:"bg-white border rounded-md col-span-6 flex flex-col dark:bg-gray-850 dark:border-gray-800",style:{height:"calc(100vh - 6rem)"}},Z6e={class:"rounded-md p-4 col-span-5"},q6e={class:"flex gap-x-2"},X6e={class:"flex fixed bottom-0 p-1 ml-3 mb-7 gap-x-3"};function W6e(t,e,n,i,s,r){var te,W,oe,ye,ke,ge,Se,Oe,Fe,dt,Je,ut,Qt,Pt,xt,Ft,ue,De,re;const o=Q("OpenPOSShiftModal"),a=Q("ClosePOSShiftModal"),l=Q("LoyaltyProgramModal"),c=Q("BatchSelectionModal"),u=Q("SavedInvoiceModal"),h=Q("CouponCodeModal"),p=Q("PriceListModal"),m=Q("ItemEnquiryModal"),y=Q("PaymentModal"),O=Q("ReturnSalesInvoiceModal"),S=Q("AlertModal"),x=Q("KeyboardModal"),T=Q("MultiLabelLink"),k=Q("ModernPOSSelectedItemTable"),D=Q("FloatingLabelFloatInput"),M=Q("FloatingLabelCurrencyInput"),L=Q("Button"),j=Q("Link"),G=Q("ModernPOSItemsTable"),Z=Q("ModernPOSItemsGrid"),K=Q("POSQuickActions");return w(),P("div",null,[t.isPosShiftOpen?B("",!0):(w(),H(o,{key:0,"open-modal":!t.isPosShiftOpen,onToggleModal:e[0]||(e[0]=he=>t.emitEvent("toggleModal","ShiftOpen"))},null,8,["open-modal"])),_(a,{"open-modal":t.openShiftCloseModal,onToggleModal:e[1]||(e[1]=he=>t.emitEvent("toggleModal","ShiftClose"))},null,8,["open-modal"]),_(l,{"open-modal":t.openLoyaltyProgramModal,"loyalty-points":t.loyaltyPoints,"loyalty-program":t.loyaltyProgram,onToggleModal:e[2]||(e[2]=he=>t.emitEvent("toggleModal","LoyaltyProgram")),onSetLoyaltyPoints:e[3]||(e[3]=he=>t.emitEvent("setLoyaltyPoints",he))},null,8,["open-modal","loyalty-points","loyalty-program"]),_(c,{"open-modal":t.openBatchSelectionModal,"item-code":t.selectedItemForBatch,onToggleModal:e[4]||(e[4]=he=>t.emitEvent("toggleModal","BatchSelection")),onBatchSelected:e[5]||(e[5]=he=>t.emitEvent("batchSelected",he))},null,8,["open-modal","item-code"]),_(u,{"open-modal":t.openSavedInvoiceModal,"modal-status":t.openSavedInvoiceModal,onToggleModal:e[6]||(e[6]=he=>t.emitEvent("toggleModal","SavedInvoice")),onSelectedInvoiceName:e[7]||(e[7]=he=>t.emitEvent("selectedInvoiceName",he))},null,8,["open-modal","modal-status"]),_(h,{"open-modal":t.openCouponCodeModal,onApplyPricingRule:e[8]||(e[8]=he=>t.emitEvent("applyPricingRule")),onToggleModal:e[9]||(e[9]=he=>t.emitEvent("toggleModal","CouponCode")),onSetCouponsCount:e[10]||(e[10]=he=>t.emitEvent("setCouponsCount",he))},null,8,["open-modal"]),_(p,{"open-modal":t.openPriceListModal,onToggleModal:e[11]||(e[11]=he=>t.emitEvent("toggleModal","PriceList"))},null,8,["open-modal"]),_(m,{"open-modal":t.openItemEnquiryModal,onToggleModal:e[12]||(e[12]=he=>t.emitEvent("toggleModal","ItemEnquiry"))},null,8,["open-modal"]),_(y,{"open-modal":t.openPaymentModal,onToggleModal:e[13]||(e[13]=he=>t.emitEvent("toggleModal","Payment")),onSetPaidAmount:e[14]||(e[14]=he=>t.emitEvent("setPaidAmount",he)),onSetPaymentMethod:e[15]||(e[15]=he=>t.emitEvent("setPaymentMethod",he)),onSetTransferRefNo:e[16]||(e[16]=he=>t.emitEvent("setTransferRefNo",he)),onSetTransferClearanceDate:e[17]||(e[17]=he=>t.emitEvent("setTransferClearanceDate",he)),onCreateTransaction:e[18]||(e[18]=(he,ct)=>t.emitEvent("createTransaction",he,ct))},null,8,["open-modal"]),_(O,{"open-modal":t.openReturnSalesInvoiceModal,"modal-status":t.openReturnSalesInvoiceModal,onSelectedReturnInvoice:e[19]||(e[19]=he=>t.emitEvent("selectedReturnInvoice",he)),onToggleModal:e[20]||(e[20]=he=>t.emitEvent("toggleModal","ReturnSalesInvoice"))},null,8,["open-modal","modal-status"]),_(S,{"open-modal":t.openAlertModal,onToggleModal:e[21]||(e[21]=he=>t.emitEvent("toggleModal","Alert")),onSaveAndContinue:e[22]||(e[22]=he=>t.emitEvent("saveAndContinue",he))},null,8,["open-modal"]),t.selectedItemField&&t.selectedItemRow?(w(),H(x,{key:1,"open-modal":t.openKeyboardModal,"modal-status":t.openKeyboardModal,"selected-item-field":t.selectedItemField,"selected-item-row":t.selectedItemRow,onToggleModal:e[23]||(e[23]=he=>t.emitEvent("toggleModal","Keyboard")),onApplyPricingRule:e[24]||(e[24]=he=>t.emitEvent("applyPricingRule"))},null,8,["open-modal","modal-status","selected-item-field","selected-item-row"])):B("",!0),v("div",P6e,[v("div",T6e,[v("div",$6e,[v("div",D6e,[(te=t.sinvDoc)!=null&&te.fieldMap?(w(),H(T,{key:0,class:"flex-shrink-0","secondary-link":"phone",border:!0,value:(W=t.sinvDoc)==null?void 0:W.party,df:(oe=t.sinvDoc)==null?void 0:oe.fieldMap.party,"show-clear-button":!0,onChange:e[25]||(e[25]=he=>t.$emit("setCustomer",he))},null,8,["value","df"])):B("",!0),_(k,{"expanded-batch-id":t.expandedBatchId,onSetExpandedBatchId:e[26]||(e[26]=he=>t.$emit("setExpandedBatchId",he)),onSelectedRow:t.selectedRow,onApplyPricingRule:e[27]||(e[27]=he=>t.emitEvent("applyPricingRule")),onToggleModal:e[28]||(e[28]=he=>t.emitEvent("toggleModal","Keyboard"))},null,8,["expanded-batch-id","onSelectedRow"])]),v("div",M6e,[v("div",I6e,[_(D,{df:{label:t.t`Total Quantity`,fieldtype:"Int",fieldname:"totalQuantity",minvalue:0,maxvalue:1e3},size:"large",value:t.totalQuantity,"read-only":!0,"text-right":!0},null,8,["df","value"]),_(M,{df:{label:t.t`Add'l Discounts`,fieldtype:"Int",fieldname:"additionalDiscount",minvalue:0},size:"large",value:t.additionalDiscounts,"read-only":!0,"text-right":!0,onChange:e[29]||(e[29]=he=>t.additionalDiscounts=he)},null,8,["df","value"])]),v("div",R6e,[_(M,{df:{label:t.t`Item Discounts`,fieldtype:"Currency",fieldname:"itemDiscounts"},size:"large",value:t.itemDiscounts,"read-only":!0,"text-right":!0},null,8,["df","value"]),(ye=t.sinvDoc)!=null&&ye.fieldMap?(w(),H(M,{key:0,df:(ke=t.sinvDoc)==null?void 0:ke.fieldMap.grandTotal,size:"large",value:(ge=t.sinvDoc)==null?void 0:ge.grandTotal,"read-only":!0,"text-right":!0},null,8,["df","value"])):B("",!0)]),v("div",_6e,[v("div",E6e,[_(L,{class:ee(["mt-2 w-full py-5",`${t.isReturnInvoiceEnabledReturn?"py-5":"py-6"}`]),style:qe({backgroundColor:((Se=t.profile)==null?void 0:Se.saveButtonColour)||((Oe=t.fyo.singles.Defaults)==null?void 0:Oe.saveButtonColour)}),onClick:e[30]||(e[30]=he=>t.$emit("saveInvoiceAction"))},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",Q6e,R(t.t`Save`),1)])]),_:3},8,["style","class"]),_(L,{class:ee(["w-full mt-2 py-5",`${t.isReturnInvoiceEnabledReturn?"py-5":"py-6"}`]),style:qe({backgroundColor:((Fe=t.profile)==null?void 0:Fe.heldButtonColour)||((dt=t.fyo.singles.Defaults)==null?void 0:dt.heldButtonColour)}),onClick:e[31]||(e[31]=he=>t.emitEvent("toggleModal","SavedInvoice",!0))},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",N6e,R(t.t`Held`),1)])]),_:3},8,["style","class"])]),v("div",L6e,[_(L,{class:ee(["mt-2 w-full py-5",`${t.isReturnInvoiceEnabledReturn?"py-5":"py-6"}`]),style:qe({backgroundColor:((Je=t.profile)==null?void 0:Je.cancelButtonColour)||((ut=t.fyo.singles.Defaults)==null?void 0:ut.cancelButtonColour)}),onClick:e[32]||(e[32]=()=>t.$emit("clearValues"))},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",F6e,R(t.t`Cancel`),1)])]),_:3},8,["style","class"]),t.isReturnInvoiceEnabledReturn?(w(),H(L,{key:0,class:"mt-2 w-full py-5",style:qe({backgroundColor:((Qt=t.profile)==null?void 0:Qt.returnButtonColour)||((Pt=t.fyo.singles.Defaults)==null?void 0:Pt.returnButtonColour)}),onClick:e[33]||(e[33]=he=>t.emitEvent("toggleModal","ReturnSalesInvoice",!0))},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",B6e,R(t.t`Return`),1)])]),_:3},8,["style"])):(w(),H(L,{key:1,class:"mt-2 w-full py-5",style:qe({backgroundColor:((xt=t.profile)==null?void 0:xt.payButtonColour)||((Ft=t.fyo.singles.Defaults)==null?void 0:Ft.payButtonColour)}),onClick:e[34]||(e[34]=he=>t.emitEvent("handlePaymentAction"))},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",V6e,R(t.t`Pay`),1)])]),_:3},8,["style"]))])]),t.isReturnInvoiceEnabledReturn?(w(),H(L,{key:0,class:"mt-2 w-full py-5",style:qe({backgroundColor:((ue=t.profile)==null?void 0:ue.payButtonColour)||((De=t.fyo.singles.Defaults)==null?void 0:De.payButtonColour)}),onClick:e[35]||(e[35]=he=>t.emitEvent("handlePaymentAction"))},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",j6e,R(t.t`Pay`),1)])]),_:3},8,["style"])):B("",!0)])])]),v("div",z6e,[v("div",Z6e,[v("div",q6e,[_(T,{class:"w-full","secondary-link":"barcode","third-link":"itemCode",df:{label:t.t`Search Item (Name or
            Barcode)`,fieldtype:"Link",fieldname:"item",target:"Item"},border:!0,value:t.itemSearchTerm,"show-clear-button":!0,onKeyup:e[36]||(e[36]=pn(he=>t.emitEvent("handleItemSearch",he.target.value,!0),["enter"])),onChange:e[37]||(e[37]=he=>t.emitEvent("handleItemSearch",he))},null,8,["df","value"]),(re=t.fyo.singles.AccountingSettings)!=null&&re.enableitemGroup?(w(),H(j,{key:0,df:{label:t.t`Filter by Group`,fieldtype:"Link",fieldname:"itemGroup",target:"ItemGroup"},border:!0,"show-clear-button":!0,value:t.selectedItemGroup,onChange:e[38]||(e[38]=he=>t.emitEvent("setItemGroup",he))},null,8,["df","value"])):B("",!0)]),t.tableView?(w(),H(G,{key:0,items:t.items,"item-qty-map":t.itemQuantityMap,"item-visibility":t.itemVisibility,onAddItem:e[39]||(e[39]=he=>t.emitEvent("addItem",he))},null,8,["items","item-qty-map","item-visibility"])):(w(),H(Z,{key:1,items:t.items,"item-qty-map":t.itemQuantityMap,"item-visibility":t.itemVisibility,onAddItem:e[40]||(e[40]=he=>t.emitEvent("addItem",he))},null,8,["items","item-qty-map","item-visibility"])),v("div",X6e,[_(K,{"sinv-doc":t.sinvDoc,"loyalty-points":t.loyaltyPoints,"loyalty-program":t.loyaltyProgram,"applied-coupons-count":t.appliedCouponsCount,onToggleView:e[41]||(e[41]=he=>t.emitEvent("toggleView")),onEmitRouteToSinvList:e[42]||(e[42]=he=>t.emitEvent("routeToSinvList")),onToggleModal:e[43]||(e[43]=he=>t.emitEvent("toggleModal",he))},null,8,["sinv-doc","loyalty-points","loyalty-program","applied-coupons-count"])])])])])])}const G6e=ne(k6e,[["render",W6e]]),U6e=ve({name:"ItemsGrid",emits:["addItem","updateValues"],props:{items:{type:Array},itemQtyMap:{type:Object},itemVisibility:{type:String,default:"Inventory Items"}},methods:{getExtractedWords(t){return t.split(" ").map(n=>n[0].toUpperCase()).join("")},handleChange(t){this.$emit("addItem",t),this.$emit("updateValues")}}}),H6e={class:"gap-4 py-2 w-full flex flex-col items-center rounded-t-md text-black overflow-y-auto custom-scroll custom-scroll-thumb2",style:{height:"83vh"}},Y6e={class:"gap-2 w-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},K6e=["onClick"],J6e={class:"self-center w-32 h-32 p-1 rounded-lg"},eTe={class:"relative w-full h-full p-2"},tTe=["src"],nTe={key:1,class:"rounded-lg w-full h-full bg-gray-100 flex justify-center items-center dark:bg-gray-850"},iTe={class:"text-4xl font-semibold text-gray-400 select-none"},sTe={class:"text-lg font-medium dark:text-white"},rTe={class:"text-lg font-medium dark:text-white"};function oTe(t,e,n,i,s,r){return w(),P("div",H6e,[v("div",Y6e,[(w(!0),P(le,null,Pe(t.items,o=>(w(),P("div",{class:"p-1 border border-gray-300 flex flex-col text-sm text-center dark:border-gray-800",onClick:a=>t.handleChange(o),key:o.name},[v("div",J6e,[v("div",eTe,[o.image?(w(),P("img",{key:0,src:o.image,alt:"",class:"rounded-lg w-full h-full object-cover"},null,8,tTe)):(w(),P("div",nTe,[v("p",iTe,R(t.getExtractedWords(o.name)),1)])),t.itemVisibility!=="ERP Sync Items"?(w(),P("p",{key:2,class:ee(["absolute top-1 right-1 rounded-full w-6 h-6 flex justify-center items-center",o.availableQty>0?"bg-green-100 text-green-900":"bg-red-100 text-red-900"])},R(o.availableQty),3)):B("",!0)])]),v("h3",sTe,R(o.name),1),v("p",rTe,R(o.rate?t.fyo.currencySymbols[o.rate.getCurrency()]:void 0)+" "+R(o.rate),1)],8,K6e))),128))])])}const aTe=ne(U6e,[["render",oTe]]),lTe=ve({name:"ItemsTable",components:{FormControl:is,Row:ho},emits:["addItem","updateValues"],props:{items:Array,itemQtyMap:Object,itemVisibility:{type:String,default:"Inventory Items"}},computed:{ratio(){return this.itemVisibility==="ERP Sync Items"?[1,1.5,.8]:[1,1,1,.7]},tableFields(){const t=[{fieldname:"name",fieldtype:"Data",label:"Item",placeholder:"Item",readOnly:!0},{fieldname:"rate",label:"Rate",placeholder:"Rate",fieldtype:"Currency",readOnly:!0},{fieldname:"unit",label:"Unit",placeholder:"Unit",fieldtype:"Data",target:"UOM",readOnly:!0}];return this.itemVisibility!=="ERP Sync Items"&&t.splice(2,0,{fieldname:"availableQty",label:"Qty",placeholder:"Available Qty",fieldtype:"Float",readOnly:!0}),t}},methods:{handleChange(t){this.$emit("addItem",t),this.$emit("updateValues")},isNumeric:lo}}),cTe={class:"overflow-y-auto custom-scroll custom-scroll-thumb2",style:{height:"70vh"}};function uTe(t,e,n,i,s,r){const o=Q("Row"),a=Q("FormControl");return w(),P(le,null,[_(o,{ratio:t.ratio,class:"border dark:border-gray-800 flex items-center mt-4 px-2 rounded-t-md text-gray-600 dark:text-gray-400 w-full"},{default:U(()=>[(w(!0),P(le,null,Pe(t.tableFields,l=>(w(),P("div",{key:l.fieldname,class:ee(["flex items-center px-2 py-2 text-lg",{"ms-auto":t.isNumeric(l)}]),style:{height:""}},R(l.label),3))),128))]),_:1},8,["ratio"]),v("div",cTe,[t.items?(w(!0),P(le,{key:0},Pe(t.items,l=>(w(),H(o,{ratio:t.ratio,border:!0,class:"border-b border-l border-r dark:border-gray-800 flex group h-row-mid hover:bg-gray-25 dark:bg-gray-890 items-center justify-center px-2 w-full",onClick:c=>t.handleChange(l)},{default:U(()=>[(w(!0),P(le,null,Pe(t.tableFields,c=>(w(),H(a,{key:c.fieldname,size:"large",class:"",df:c,value:l[c.fieldname],readOnly:!0},null,8,["df","value"]))),128))]),_:2},1032,["ratio","onClick"]))),256)):B("",!0)])],64)}const dTe=ne(lTe,[["render",uTe]]),hTe=ve({name:"SelectedItemRow",components:{Currency:Bp,Data:qa,Float:nh,Int:nu,Link:rr,Text:j1,AutoComplete:zl},props:{row:{type:Rp,required:!0},batchAdded:{type:Boolean,default:!1},expandedBatchId:{type:String,default:void 0}},emits:["runSinvFormulas","applyPricingRule","selectedRow","setExpandedBatchId"],setup(){return{isDiscountingEnabled:st("isDiscountingEnabled"),itemSerialNumbers:st("itemSerialNumbers")}},data(){return{isExapanded:!1,batches:[],availableQtyInBatch:0,itemVisibility:"",defaultRate:this.row.rate,profileDiscountSetting:null,profileRateSetting:null,transferUnitOptions:[],isMounted:!1,pendingTransferUnitChange:!1,transferUnitChangeOldQty:0}},watch:{expandedBatchId(t){t!==this.row.name&&(this.isExapanded=!1)},"row.batch":{async handler(t){t&&(this.availableQtyInBatch=await this.getAvailableQtyInBatch(),this.isExapanded=!0,this.$emit("setExpandedBatchId",this.row.name))},immediate:!0},"row.item":{async handler(t){t?await this.updateTransferUnitOptions():this.transferUnitOptions=[]},immediate:!0},"row.quantity":{async handler(t,e){this.hasSerialNumber&&t&&t>0&&this.isMounted&&t!==e&&await this.fetchSerialNumbers(!1,!0)},immediate:!1},"row.transferQuantity":{async handler(t,e){if(this.pendingTransferUnitChange&&t!==this.transferUnitChangeOldQty){this.pendingTransferUnitChange=!1,this.transferUnitChangeOldQty=0,await this.fetchSerialNumbers(!0,!1);return}this.isUOMConversionEnabled&&this.hasSerialNumber&&t&&t>0&&this.isMounted&&t!==e&&!this.pendingTransferUnitChange&&await this.fetchSerialNumbers(!1,!1)},immediate:!1},"row.transferUnit":{async handler(t,e){this.isUOMConversionEnabled&&this.hasSerialNumber&&t&&e&&t!==e&&this.isMounted&&(delete this.itemSerialNumbers[this.row.item],await this.row.set("serialNumber",""),this.pendingTransferUnitChange=!0,this.transferUnitChangeOldQty=this.row.transferQuantity??0)},immediate:!1}},computed:{isUOMConversionEnabled(){var t;return!!((t=N.singles.InventorySettings)!=null&&t.enableUomConversions)},hasSerialNumber(){var t,e;return!!((t=this.row.links)!=null&&t.item&&((e=this.row.links)!=null&&e.item.hasSerialNumber))},isReadOnly(){return this.row.isFreeItem},showAvlQuantityInBatch(){var t,e;return((t=this.row.links)==null?void 0:t.item)&&((e=this.row.links)==null?void 0:e.item.hasBatch)&&this.itemVisibility}},async mounted(){var e,n,i,s,r;const t=(e=this.fyo.singles.POSSettings)==null?void 0:e.posProfile;if(t){const o=await this.fyo.doc.getDoc(A.POSProfile,t);this.profileDiscountSetting=!!(o!=null&&o.canEditDiscount)||!!((n=this.fyo.singles.POSSettings)!=null&&n.canEditDiscount),this.profileRateSetting=!!(o!=null&&o.canChangeRate)||!!((i=this.fyo.singles.POSSettings)!=null&&i.canChangeRate),this.itemVisibility=await $l(this.fyo)}else this.profileDiscountSetting=!!((s=this.fyo.singles.POSSettings)!=null&&s.canEditDiscount),this.profileRateSetting=!!((r=this.fyo.singles.POSSettings)!=null&&r.canChangeRate),this.itemVisibility=await $l(this.fyo);await this.$nextTick(),this.isMounted=!0,this.hasSerialNumber&&await this.fetchSerialNumbers()},methods:{toggleExpand(){this.isExapanded?(this.isExapanded=!1,this.$emit("setExpandedBatchId",void 0)):(this.isExapanded=!0,this.$emit("setExpandedBatchId",this.row.name))},toggleExpandAndEmit(){this.toggleExpand(),this.$emit("selectedRow",this.row)},emitSelectedRow(){this.$emit("selectedRow",this.row)},adjustQuantity(t){let n=(this.row.quantity??1)+t;n!==0&&this.setQuantity(n)},async updateTransferUnitOptions(){if(!this.row.item){this.transferUnitOptions=[];return}const t=await N.doc.getDoc("Item",this.row.item),e=(t==null?void 0:t.uomConversions)??[],n=new Set;typeof(t==null?void 0:t.unit)=="string"&&n.add(t.unit);for(const i of e)typeof i.uom=="string"&&n.add(i.uom);this.transferUnitOptions=[...n].map(i=>({label:i,value:i}))},async getAvailableQtyInBatch(){return this.row.batch?await N.db.getStockQuantity(this.row.item,void 0,void 0,void 0,this.row.batch)??0:0},getDisplayTransferQuantity(){const t=this.row.transferQuantity;if(!this.isUOMConversionEnabled)return t;const e=t&&t;return this.row.isReturn&&e?-Math.abs(t):t},isDiscountsReadOnly(t){const e=this.profileDiscountSetting;return this.row.isFreeItem||!e||t},async setBatch(t){this.row.set("batch",t),await this.getAvailableQtyInBatch()},setSerialNumber(t){t&&(this.row.set("serialNumber",t),this.itemSerialNumbers[this.row.item]=t,FE(t,Math.abs(this.row.quantity??0),this.row.item))},async fetchSerialNumbers(t=!1,e=!1){if(!this.hasSerialNumber)return;let n=0;if(e?n=Math.abs(this.row.quantity??0):this.isUOMConversionEnabled&&this.row.transferQuantity?n=Math.abs(this.row.transferQuantity):this.row.quantity&&(n=Math.abs(this.row.quantity)),n<=0)return;const i=this.itemSerialNumbers[this.row.item];if(!(i&&!t&&i.split(`
`).filter(r=>r.trim()).length===n))try{const s=await _u(this.fyo,this.row.item,n);s&&(await this.row.set("serialNumber",s),this.itemSerialNumbers[this.row.item]=s)}catch{}},isRateReadOnly(){const t=this.profileRateSetting;return this.row.isFreeItem||!t},setItemDiscount(t,e){if(t==="percent"){this.row.set("setItemDiscountAmount",!1),this.row.set("itemDiscountPercent",e);return}this.row.set("setItemDiscountAmount",!0),this.row.set("itemDiscountAmount",e)},setRate(t){this.row.setRate=t,this.$emit("runSinvFormulas")},async setQuantity(t){var o;const e=this.row.setItemDiscountAmount,n=!e&&this.row.itemDiscountPercent!==0,i=this.row.itemDiscountAmount,s=this.row.itemDiscountPercent;!this.row.isReturn&&t<=0&&(it({type:"error",message:"Quantity must be greater than zero.",duration:"short"}),t=this.row.quantity??1),this.row.set("quantity",t);const r=((o=this.row.parentdoc.items)==null?void 0:o.filter(a=>a.item===this.row.item&&!a.isFreeItem))??[];t=this.row.quantity??1;try{await Eu(this.row.parentdoc,this.row,r)}catch(a){return this.row.set("quantity",t),it({type:"error",message:this.t`${a}`,duration:"short"})}this.row.isFreeItem||(this.$emit("applyPricingRule"),this.$emit("runSinvFormulas"),!e&&!n&&(this.row.set("setItemDiscountAmount",!1),this.row.set("itemDiscountPercent",0)),e?(this.row.set("setItemDiscountAmount",!0),this.row.set("itemDiscountAmount",i)):n&&(this.row.set("setItemDiscountAmount",!1),this.row.set("itemDiscountPercent",s)))},async removeAddedItem(t){var e;(e=this.row.parentdoc)==null||e.remove("items",t==null?void 0:t.idx),this.row.runFormulas(),t.isFreeItem||this.$emit("applyPricingRule")}}}),fTe={key:0,class:"absolute flex top-0 font-medium text-xs ml-2 text-green-800",style:{"font-size":"0.6rem"}},pTe={class:"flex items-center"},mTe={class:"flex flex-col ml-1"},gTe={class:"px-4"},yTe={class:"px-4 pt-6 col-span-1"},OTe={class:"px-4 pt-6 col-span-2"},bTe={class:"px-4 pt-6 col-span-2"},vTe={class:"px-4 pt-6"},wTe={class:"px-6 pt-6 col-span-2"},STe={class:"px-4 pt-6 col-span-2"},CTe={key:0,class:"pl-6 px-4 pt-6 col-span-2"},ATe={key:1,class:"px-5 pt-6 col-span-2"},xTe={key:2,class:"px-6 pt-6 col-span-3"};function kTe(t,e,n,i,s,r){var m,y,O;const o=Q("feather-icon"),a=Q("Link"),l=Q("Int"),c=Q("Currency"),u=Q("AutoComplete"),h=Q("Float"),p=Q("Text");return w(),P(le,null,[_(o,{name:t.isExapanded?"chevron-up":"chevron-down",class:"w-4 h-4 inline-flex cursor-pointer text-gray-700 dark:text-gray-200",onClick:t.toggleExpand},null,8,["name","onClick"]),v("div",{class:"relative",onClick:e[0]||(e[0]=(...S)=>t.toggleExpandAndEmit&&t.toggleExpandAndEmit(...S))},[_(a,{class:"pt-2",df:{fieldname:"item",fieldtype:"Data",label:"item"},size:"small",border:!1,value:t.row.item,"read-only":!0},null,8,["value"]),t.row.isFreeItem?(w(),P("p",fTe,R(t.row.pricingRule),1)):B("",!0)]),v("div",pTe,[_(l,{df:{fieldname:"quantity",fieldtype:"Int",label:"Quantity"},size:"small",border:!1,value:t.getDisplayTransferQuantity(),"read-only":!0},null,8,["value"]),v("div",mTe,[_(o,{name:"chevron-up",class:"w-3 h-3 cursor-pointer hover:text-blue-500 text-gray-700 dark:text-gray-200",onClick:e[1]||(e[1]=S=>t.adjustQuantity(1))}),_(o,{name:"chevron-down",class:"w-3 h-3 cursor-pointer hover:text-blue-500 text-gray-700 dark:text-gray-200",onClick:e[2]||(e[2]=S=>t.adjustQuantity(-1))})])]),_(a,{class:"ml-5",df:{fieldname:"transferUnit",fieldtype:"Data",label:"Unit"},size:"small",border:!1,value:t.row.transferUnit||t.row.unit,"read-only":!0},null,8,["value"]),_(c,{df:{fieldtype:"Currency",fieldname:"rate",label:"rate"},size:"small",border:!1,value:t.row.rate,"read-only":!0},null,8,["value"]),_(c,{df:{fieldtype:"Currency",fieldname:"amount",label:t.t`Amount`},size:"small",border:!1,value:t.row.amount,"read-only":!0},null,8,["df","value"]),v("div",gTe,[_(o,{name:"trash",class:"w-4 text-xl text-red-500",onClick:e[3]||(e[3]=S=>t.removeAddedItem(t.row))})]),e[15]||(e[15]=v("div",null,null,-1)),t.isExapanded?(w(),P(le,{key:0},[v("div",yTe,[t.isUOMConversionEnabled?(w(),H(l,{key:0,df:{fieldtype:"Int",fieldname:"transferQuantity",label:"Transfer Quantity"},size:"medium",border:!0,"show-label":!0,value:t.getDisplayTransferQuantity(),onChange:e[4]||(e[4]=S=>t.row.set("transferQuantity",S)),"read-only":t.isReadOnly},null,8,["value","read-only"])):B("",!0)]),v("div",OTe,[t.isUOMConversionEnabled&&t.transferUnitOptions.length?(w(),H(u,{key:t.row.item,df:{fieldtype:"AutoComplete",fieldname:"transferUnit",label:t.t`Transfer Unit`,options:t.transferUnitOptions},class:"flex-1","show-label":!0,border:!0,value:t.row.transferUnit??"",onChange:e[5]||(e[5]=S=>t.row.set("transferUnit",S)),"read-only":t.isReadOnly},null,8,["df","value","read-only"])):B("",!0)]),v("div",bTe,[_(h,{df:{fieldname:"quantity",fieldtype:"Float",label:"Quantity"},size:"medium",min:0,border:!0,"show-label":!0,value:t.row.quantity,onChange:e[6]||(e[6]=S=>t.setQuantity(S)),"read-only":t.isUOMConversionEnabled},null,8,["value","read-only"])]),e[12]||(e[12]=v("div",null,null,-1)),e[13]||(e[13]=v("div",null,null,-1)),v("div",vTe,[_(c,{df:{fieldtype:"Currency",fieldname:"rate",label:"Rate"},size:"medium","show-label":!0,border:!0,value:t.row.rate,"read-only":t.isRateReadOnly(),onChange:e[7]||(e[7]=S=>t.setRate(t.row.rate=S))},null,8,["value","read-only"])]),v("div",wTe,[t.isDiscountingEnabled?(w(),H(c,{key:0,df:{fieldtype:"Currency",fieldname:"discountAmount",label:"Discount Amount"},class:"col-span-2",size:"medium","show-label":!0,border:!0,value:t.row.itemDiscountAmount,"read-only":t.isDiscountsReadOnly(t.row.itemDiscountPercent>0),onChange:e[8]||(e[8]=S=>t.setItemDiscount("amount",S))},null,8,["value","read-only"])):B("",!0)]),v("div",STe,[t.isDiscountingEnabled?(w(),H(h,{key:0,df:{fieldtype:"Float",fieldname:"itemDiscountPercent",label:"Discount Percent"},size:"medium","show-label":!0,border:!0,value:t.row.itemDiscountPercent,"read-only":t.isDiscountsReadOnly(!((m=t.row.itemDiscountAmount)!=null&&m.isZero())),onChange:e[9]||(e[9]=S=>t.setItemDiscount("percent",S))},null,8,["value","read-only"])):B("",!0)]),e[14]||(e[14]=v("div",{class:""},null,-1)),(y=t.row.links)!=null&&y.item&&((O=t.row.links)!=null&&O.item.hasBatch)?(w(),P("div",CTe,[_(a,{df:{fieldname:"batch",fieldtype:"Link",target:"Batch",label:t.t`Batch`,filters:{item:t.row.item}},value:t.row.batch,border:!0,"show-label":!0,"read-only":!1,onChange:e[10]||(e[10]=S=>t.setBatch(S))},null,8,["df","value"])])):B("",!0),t.showAvlQuantityInBatch?(w(),P("div",ATe,[_(h,{df:{fieldname:"availableQtyInBatch",fieldtype:"Float",label:t.t`Qty in Batch`},size:"medium",min:0,value:t.availableQtyInBatch,"show-label":!0,border:!0,"read-only":!0,"text-right":!0},null,8,["df","value"])])):B("",!0),t.hasSerialNumber?(w(),P("div",xTe,[_(p,{df:{label:t.t`Serial Number`,fieldtype:"Text",fieldname:"serialNumber"},value:t.itemSerialNumbers[t.row.item]||t.row.serialNumber,"show-label":!0,border:!0,required:t.hasSerialNumber,onChange:e[11]||(e[11]=S=>t.setSerialNumber(S))},null,8,["df","value","required"])])):B("",!0)],64)):B("",!0)],64)}const PTe=ne(hTe,[["render",kTe]]),TTe=ve({name:"SelectedItemTable",components:{FormContainer:Lp,FormControl:is,Link:rr,Row:ho,RowEditForm:JC,SelectedItemRow:PTe},setup(){return{sinvDoc:st("sinvDoc")}},props:{expandedBatchId:{type:String,default:void 0}},emits:["applyPricingRule","selectedRow","setExpandedBatchId"],computed:{ratio(){return[.1,.9,.8,.8,.8,.8,.2]},tableFields(){return[{fieldname:"toggler",fieldtype:"Link",label:" "},{fieldname:"item",fieldtype:"Link",label:"Item",placeholder:"Item",required:!0,schemaName:"Item"},{fieldname:"quantity",label:"Quantity",placeholder:"Quantity",fieldtype:"Int",required:!0,schemaName:""},{fieldname:"unit",label:"Unit Type",placeholder:"Unit",fieldtype:"Link",required:!0,schemaName:"UOM"},{fieldname:"rate",label:"Rate",placeholder:"Rate",fieldtype:"Currency",required:!0,schemaName:""},{fieldname:"amount",label:"Amount",placeholder:"Amount",fieldtype:"Currency",required:!0,schemaName:""},{fieldname:"removeItem",fieldtype:"Link",label:" "}]}},methods:{async runSinvFormulas(){await this.sinvDoc.runFormulas()},selectedItemRow(t){this.$emit("selectedRow",t)},isNumeric:lo}}),$Te={class:"overflow-y-auto overflow-x-auto custom-scroll custom-scroll-thumb1",style:{height:"50vh"}};function DTe(t,e,n,i,s,r){const o=Q("Row"),a=Q("SelectedItemRow");return w(),P(le,null,[_(o,{ratio:t.ratio,class:"border dark:border-gray-800 rounded-t px-2 text-gray-600 dark:text-gray-400 w-full flex items-center mt-2"},{default:U(()=>[t.tableFields?(w(!0),P(le,{key:0},Pe(t.tableFields,l=>(w(),P("div",{key:l.fieldname,class:ee(["items-center text-lg flex px-2 py-2",{"ms-auto":t.isNumeric(l)}]),style:{height:""}},R(l.label),3))),128)):B("",!0)]),_:1},8,["ratio"]),v("div",$Te,[(w(!0),P(le,null,Pe(t.sinvDoc.items,l=>(w(),H(o,{ratio:t.ratio,class:"border dark:border-gray-800 w-full px-2 py-2 group flex items-center justify-center hover:bg-gray-25 dark:bg-gray-890"},{default:U(()=>[_(a,{row:l,"expanded-batch-id":t.expandedBatchId,onSetExpandedBatchId:e[0]||(e[0]=c=>t.$emit("setExpandedBatchId",c)),onRunSinvFormulas:t.runSinvFormulas,onApplyPricingRule:e[1]||(e[1]=c=>t.$emit("applyPricingRule")),onSelectedRow:t.selectedItemRow},null,8,["row","expanded-batch-id","onRunSinvFormulas","onSelectedRow"])]),_:2},1032,["ratio"]))),256))])],64)}const MTe=ne(TTe,[["render",DTe]]),ITe=ve({name:"ClassicPOS",components:{Link:rr,Button:At,ItemsGrid:aTe,AlertModal:BE,ItemsTable:dTe,PaymentModal:VE,MultiLabelLink:YE,PriceListModal:jE,ItemEnquiryModal:zE,CouponCodeModal:ZE,POSQuickActions:qE,OpenPOSShiftModal:XE,SelectedItemTable:MTe,SavedInvoiceModal:WE,ClosePOSShiftModal:GE,LoyaltyProgramModal:UE,FloatingLabelFloatInput:JE,ReturnSalesInvoiceModal:HE,FloatingLabelCurrencyInput:eQ,BatchSelectionModal:tQ},props:{paidAmount:Il,tableView:Boolean,itemDiscounts:Il,openAlertModal:Boolean,isPosShiftOpen:Boolean,disablePayButton:Boolean,openPaymentModal:Boolean,openPriceListModal:Boolean,openItemEnquiryModal:Boolean,openCouponCodeModal:Boolean,openShiftCloseModal:Boolean,openSavedInvoiceModal:Boolean,openLoyaltyProgramModal:Boolean,openAppliedCouponsModal:Boolean,openReturnSalesInvoiceModal:Boolean,openBatchSelectionModal:Boolean,totalQuantity:{type:Number,default:0},loyaltyPoints:{type:Number,default:0},itemSearchTerm:{type:String,default:""},selectedItemGroup:{type:String,default:""},loyaltyProgram:{type:String,default:""},appliedCouponsCount:{type:Number,default:0},sinvDoc:{type:Object,default:void 0},itemQuantityMap:{type:Object,default:()=>({})},coupons:{type:Object,default:()=>({})},items:{type:Array,default:()=>[]},itemVisibility:{type:String,default:"Inventory Items"},profile:{type:Object,required:!1,default:null},batchAddedItems:{type:Array,default:()=>[]},selectedItemForBatch:{type:String,default:""},expandedBatchId:{type:String,default:void 0}},emits:["setExpandedBatchId","addItem","toggleView","toggleModal","setCustomer","clearValues","setItemGroup","setPaidAmount","setCouponsCount","routeToSinvList","handleItemSearch","setPaymentMethod","setTransferRefNo","setLoyaltyPoints","applyPricingRule","saveInvoiceAction","createTransaction","setTransferAmount","selectedInvoiceName","selectedReturnInvoice","setTransferClearanceDate","saveAndContinue","handlePaymentAction","selectedRow","batchSelected"],data(){return{itemGroupFilter:"",additionalDiscounts:N.pesa(0)}},computed:{isReturnInvoiceEnabledReturn:()=>{var t;return((t=N.singles.AccountingSettings)==null?void 0:t.enableInvoiceReturns)??void 0}},methods:{emitEvent(t,...e){this.$emit(t,...e)},getItem:LE}}),RTe={class:"bg-gray-25 dark:bg-gray-875 grid grid-cols-12 gap-2 p-4",style:{height:"calc(100vh - var(--h-row-largest))"}},_Te={class:"col-span-5 bg-white border rounded-md dark:border-gray-800 dark:bg-gray-850"},ETe={class:"rounded-md p-4 col-span-5"},QTe={class:"flex gap-x-2"},NTe={class:"flex fixed bottom-0 p-1 mb-7 gap-x-3"},LTe={class:"col-span-7"},FTe={class:"flex flex-col gap-3",style:{height:"calc(100vh - 6rem)"}},BTe={class:"p-4 bg-white border rounded-md grow h-full dark:border-gray-800 dark:bg-gray-850"},VTe={class:"p-3 bg-white border rounded-md dark:border-gray-800 dark:bg-gray-850"},jTe={class:"w-full grid grid-cols-2 gap-y-2 gap-x-3"},zTe={class:"flex flex-col justify-end"},ZTe={class:"grid grid-cols-2 gap-2"},qTe={class:"mt-4 grid grid-cols-2 gap-2"},XTe={class:"w-full"},WTe={class:"w-full flex gap-2"},GTe={class:"uppercase text-lg text-white font-semibold"},UTe={class:"uppercase text-lg text-white font-semibold"},HTe={class:"uppercase text-lg text-white font-semibold"},YTe={class:"uppercase text-lg text-white font-semibold"},KTe={class:"uppercase text-lg text-white font-semibold"},JTe={class:"uppercase text-lg text-white font-semibold"};function e$e(t,e,n,i,s,r){var K,te,W,oe,ye,ke,ge,Se,Oe,Fe,dt,Je,ut,Qt,Pt,xt,Ft,ue,De;const o=Q("OpenPOSShiftModal"),a=Q("ClosePOSShiftModal"),l=Q("LoyaltyProgramModal"),c=Q("BatchSelectionModal"),u=Q("SavedInvoiceModal"),h=Q("CouponCodeModal"),p=Q("PriceListModal"),m=Q("ItemEnquiryModal"),y=Q("PaymentModal"),O=Q("ReturnSalesInvoiceModal"),S=Q("AlertModal"),x=Q("MultiLabelLink"),T=Q("Link"),k=Q("ItemsTable"),D=Q("ItemsGrid"),M=Q("POSQuickActions"),L=Q("SelectedItemTable"),j=Q("FloatingLabelFloatInput"),G=Q("FloatingLabelCurrencyInput"),Z=Q("Button");return w(),P("div",null,[t.isPosShiftOpen?B("",!0):(w(),H(o,{key:0,"open-modal":!t.isPosShiftOpen,onToggleModal:e[0]||(e[0]=re=>t.emitEvent("toggleModal","ShiftOpen"))},null,8,["open-modal"])),_(a,{"open-modal":t.openShiftCloseModal,onToggleModal:e[1]||(e[1]=re=>t.emitEvent("toggleModal","ShiftClose"))},null,8,["open-modal"]),_(l,{"open-modal":t.openLoyaltyProgramModal,"loyalty-points":t.loyaltyPoints,"loyalty-program":t.loyaltyProgram,onToggleModal:e[2]||(e[2]=re=>t.emitEvent("toggleModal","LoyaltyProgram")),onSetLoyaltyPoints:e[3]||(e[3]=re=>t.emitEvent("setLoyaltyPoints",re))},null,8,["open-modal","loyalty-points","loyalty-program"]),_(c,{"open-modal":t.openBatchSelectionModal,"item-code":t.selectedItemForBatch,onToggleModal:e[4]||(e[4]=re=>t.emitEvent("toggleModal","BatchSelection")),onBatchSelected:e[5]||(e[5]=re=>t.emitEvent("batchSelected",re))},null,8,["open-modal","item-code"]),_(u,{"open-modal":t.openSavedInvoiceModal,"modal-status":t.openSavedInvoiceModal,onToggleModal:e[6]||(e[6]=re=>t.emitEvent("toggleModal","SavedInvoice")),onSelectedInvoiceName:e[7]||(e[7]=re=>t.emitEvent("selectedInvoiceName",re))},null,8,["open-modal","modal-status"]),_(h,{"open-modal":t.openCouponCodeModal,onApplyPricingRule:e[8]||(e[8]=re=>t.emitEvent("applyPricingRule")),onToggleModal:e[9]||(e[9]=re=>t.emitEvent("toggleModal","CouponCode")),onSetCouponsCount:e[10]||(e[10]=re=>t.emitEvent("setCouponsCount",re))},null,8,["open-modal"]),_(p,{"open-modal":t.openPriceListModal,onToggleModal:e[11]||(e[11]=re=>t.emitEvent("toggleModal","PriceList"))},null,8,["open-modal"]),_(m,{"open-modal":t.openItemEnquiryModal,onToggleModal:e[12]||(e[12]=re=>t.emitEvent("toggleModal","ItemEnquiry"))},null,8,["open-modal"]),_(y,{"open-modal":t.openPaymentModal,onToggleModal:e[13]||(e[13]=re=>t.emitEvent("toggleModal","Payment")),onSetPaidAmount:e[14]||(e[14]=re=>t.emitEvent("setPaidAmount",re)),onSetPaymentMethod:e[15]||(e[15]=re=>t.emitEvent("setPaymentMethod",re)),onSetTransferRefNo:e[16]||(e[16]=re=>t.emitEvent("setTransferRefNo",re)),onSetTransferClearanceDate:e[17]||(e[17]=re=>t.emitEvent("setTransferClearanceDate",re)),onCreateTransaction:e[18]||(e[18]=(re,he)=>t.emitEvent("createTransaction",re,he))},null,8,["open-modal"]),_(O,{"open-modal":t.openReturnSalesInvoiceModal,"modal-status":t.openReturnSalesInvoiceModal,onSelectedReturnInvoice:e[19]||(e[19]=re=>t.emitEvent("selectedReturnInvoice",re)),onToggleModal:e[20]||(e[20]=re=>t.emitEvent("toggleModal","ReturnSalesInvoice"))},null,8,["open-modal","modal-status"]),_(S,{"open-modal":t.openAlertModal,onToggleModal:e[21]||(e[21]=re=>t.emitEvent("toggleModal","Alert")),onSaveAndContinue:e[22]||(e[22]=re=>t.emitEvent("saveAndContinue",re))},null,8,["open-modal"]),v("div",RTe,[v("div",_Te,[v("div",ETe,[v("div",QTe,[_(x,{class:"w-full","secondary-link":"barcode","third-link":"itemCode",df:{label:t.t`Search Item (Name or
            Barcode)`,fieldtype:"Link",fieldname:"item",target:"Item"},border:!0,value:t.itemSearchTerm,"show-clear-button":!0,onKeyup:e[23]||(e[23]=pn(re=>t.emitEvent("handleItemSearch",re.target.value,!0),["enter"])),onChange:e[24]||(e[24]=re=>t.emitEvent("handleItemSearch",re))},null,8,["df","value"]),(K=t.fyo.singles.AccountingSettings)!=null&&K.enableitemGroup?(w(),H(T,{key:0,df:{label:t.t`Filter by Group`,fieldtype:"Link",fieldname:"itemGroup",target:"ItemGroup"},border:!0,"show-clear-button":!0,value:t.selectedItemGroup,onChange:e[25]||(e[25]=re=>t.emitEvent("setItemGroup",re))},null,8,["df","value"])):B("",!0)]),t.tableView?(w(),H(k,{key:0,items:t.items,"item-qty-map":t.itemQuantityMap,"item-visibility":t.itemVisibility,onAddItem:e[26]||(e[26]=re=>t.emitEvent("addItem",re))},null,8,["items","item-qty-map","item-visibility"])):(w(),H(D,{key:1,items:t.items,"item-qty-map":t.itemQuantityMap,"item-visibility":t.itemVisibility,onAddItem:e[27]||(e[27]=re=>t.emitEvent("addItem",re))},null,8,["items","item-qty-map","item-visibility"])),v("div",NTe,[_(M,{"sinv-doc":t.sinvDoc,"loyalty-points":t.loyaltyPoints,"loyalty-program":t.loyaltyProgram,"applied-coupons-count":t.appliedCouponsCount,onToggleView:e[28]||(e[28]=re=>t.emitEvent("toggleView")),onEmitRouteToSinvList:e[29]||(e[29]=re=>t.emitEvent("routeToSinvList")),onToggleModal:e[30]||(e[30]=re=>t.emitEvent("toggleModal",re))},null,8,["sinv-doc","loyalty-points","loyalty-program","applied-coupons-count"])])])]),v("div",LTe,[v("div",FTe,[v("div",BTe,[(te=t.sinvDoc)!=null&&te.fieldMap?(w(),H(x,{key:0,class:"flex-shrink-0","secondary-link":"phone",border:!0,value:(W=t.sinvDoc)==null?void 0:W.party,df:(oe=t.sinvDoc)==null?void 0:oe.fieldMap.party,"show-clear-button":!0,onChange:e[31]||(e[31]=re=>t.$emit("setCustomer",re))},null,8,["value","df"])):B("",!0),_(L,{"expanded-batch-id":t.expandedBatchId,onSetExpandedBatchId:e[32]||(e[32]=re=>t.$emit("setExpandedBatchId",re)),onApplyPricingRule:e[33]||(e[33]=re=>t.emitEvent("applyPricingRule")),onSelectedRow:e[34]||(e[34]=re=>t.$emit("selectedRow",re))},null,8,["expanded-batch-id"])]),v("div",VTe,[v("div",jTe,[v("div",zTe,[v("div",ZTe,[_(j,{df:{label:t.t`Total Quantity`,fieldtype:"Int",fieldname:"totalQuantity",minvalue:0,maxvalue:1e3},size:"large",value:t.totalQuantity,"read-only":!0,"text-right":!0},null,8,["df","value"]),_(G,{df:{label:t.t`Add'l Discounts`,fieldtype:"Int",fieldname:"additionalDiscount",minvalue:0},size:"large",value:t.additionalDiscounts,"read-only":!0,"text-right":!0,onChange:e[35]||(e[35]=re=>t.additionalDiscounts=re)},null,8,["df","value"])]),v("div",qTe,[_(G,{df:{label:t.t`Item Discounts`,fieldtype:"Currency",fieldname:"itemDiscounts"},size:"large",value:t.itemDiscounts,"read-only":!0,"text-right":!0},null,8,["df","value"]),(ye=t.sinvDoc)!=null&&ye.fieldMap?(w(),H(G,{key:0,df:(ke=t.sinvDoc)==null?void 0:ke.fieldMap.grandTotal,size:"large",value:(ge=t.sinvDoc)==null?void 0:ge.grandTotal,"read-only":!0,"text-right":!0},null,8,["df","value"])):B("",!0)])]),v("div",XTe,[v("div",WTe,[_(Z,{class:ee(["w-full",`${t.isReturnInvoiceEnabledReturn?"py-5":"py-6"}`]),style:qe({backgroundColor:((Se=t.profile)==null?void 0:Se.saveButtonColour)||((Oe=t.fyo.singles.Defaults)==null?void 0:Oe.saveButtonColour)}),onClick:e[36]||(e[36]=re=>t.$emit("saveInvoiceAction"))},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",GTe,R(t.t`Save`),1)])]),_:3},8,["style","class"]),_(Z,{class:ee(["w-full",`${t.isReturnInvoiceEnabledReturn?"py-5":"py-6"}`]),style:qe({backgroundColor:((Fe=t.profile)==null?void 0:Fe.cancelButtonColour)||((dt=t.fyo.singles.Defaults)==null?void 0:dt.cancelButtonColour)}),onClick:e[37]||(e[37]=()=>t.$emit("clearValues"))},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",UTe,R(t.t`Cancel`),1)])]),_:3},8,["style","class"])]),v("div",{class:ee(["w-full flex gap-2",`${t.isReturnInvoiceEnabledReturn?"mt-2":"mt-4"}`])},[_(Z,{class:ee(["w-full",`${t.isReturnInvoiceEnabledReturn?"py-5":"py-6"}`]),style:qe({backgroundColor:((Je=t.profile)==null?void 0:Je.heldButtonColour)||((ut=t.fyo.singles.Defaults)==null?void 0:ut.heldButtonColour)}),onClick:e[38]||(e[38]=re=>t.emitEvent("toggleModal","SavedInvoice",!0))},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",HTe,R(t.t`held`),1)])]),_:3},8,["style","class"]),t.isReturnInvoiceEnabledReturn?(w(),H(Z,{key:0,class:"w-full py-5",style:qe({backgroundColor:((Qt=t.profile)==null?void 0:Qt.returnButtonColour)||((Pt=t.fyo.singles.Defaults)==null?void 0:Pt.returnButtonColour)}),onClick:e[39]||(e[39]=re=>t.emitEvent("toggleModal","ReturnSalesInvoice",!0))},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",YTe,R(t.t`Return`),1)])]),_:3},8,["style"])):(w(),H(Z,{key:1,class:ee(["w-full",`${t.isReturnInvoiceEnabledReturn?"py-5":"py-6"}`]),style:qe({backgroundColor:((xt=t.profile)==null?void 0:xt.payButton)||((Ft=t.fyo.singles.Defaults)==null?void 0:Ft.payButtonColour)}),onClick:e[40]||(e[40]=re=>t.emitEvent("handlePaymentAction"))},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",KTe,R(t.t`Pay`),1)])]),_:3},8,["style","class"]))],2),t.isReturnInvoiceEnabledReturn?(w(),H(Z,{key:0,class:"w-full mt-2 py-5",style:qe({backgroundColor:((ue=t.profile)==null?void 0:ue.payButtonColour)||((De=t.fyo.singles.Defaults)==null?void 0:De.payButtonColour)}),onClick:e[41]||(e[41]=re=>t.emitEvent("handlePaymentAction"))},{default:U(()=>[Ge(t.$slots,"default",{},()=>[v("p",JTe,R(t.t`Pay`),1)])]),_:3},8,["style"])):B("",!0)])])])])])])])}const t$e=ne(ITe,[["render",e$e]]),n$e=["Keyboard","Payment","ShiftClose","LoyaltyProgram","SavedInvoice","Alert","CouponCode","PriceList","ItemEnquiry","ReturnSalesInvoice","BatchSelection"],Co="POS",i$e=ve({name:"POS",components:{Button:At,ModernPOS:G6e,PageHeader:Nr,ClassicPOS:t$e},provide(){return{doc:Dt(()=>this.sinvDoc),sinvDoc:Dt(()=>this.sinvDoc),coupons:Dt(()=>this.coupons),itemQtyMap:Dt(()=>this.itemQtyMap),paidAmount:Dt(()=>this.paidAmount),paymentMethod:Dt(()=>this.paymentMethod),transferRefNo:Dt(()=>this.transferRefNo),itemDiscounts:Dt(()=>this.itemDiscounts),transferAmount:Dt(()=>this.transferAmount),appliedCoupons:Dt(()=>this.sinvDoc.coupons),totalTaxedAmount:Dt(()=>this.totalTaxedAmount),itemSerialNumbers:Dt(()=>this.itemSerialNumbers),isDiscountingEnabled:Dt(()=>this.isDiscountingEnabled),transferClearanceDate:Dt(()=>this.transferClearanceDate),posSettings:Dt(()=>N.singles.POSSettings)}},setup(){return{shortcuts:st(Is)}},data(){return{tableView:!0,items:[],openAlertModal:!1,openPaymentModal:!1,openKeyboardModal:!1,openPriceListModal:!1,openItemEnquiryModal:!1,openCouponCodeModal:!1,openShiftCloseModal:!1,openSavedInvoiceModal:!1,openLoyaltyProgramModal:!1,openAppliedCouponsModal:!1,openReturnSalesInvoiceModal:!1,openBatchSelectionModal:!1,totalQuantity:0,paidAmount:N.pesa(0),itemDiscounts:N.pesa(0),transferAmount:N.pesa(0),totalTaxedAmount:N.pesa(0),additionalDiscounts:N.pesa(0),loyaltyPoints:0,appliedLoyaltyPoints:0,loyaltyProgram:"",appliedCouponsCount:0,appliedCoupons:[],itemSearchTerm:"",selectedItemGroup:"",paymentMethod:void 0,transferRefNo:void 0,defaultCustomer:void 0,transferClearanceDate:void 0,paymentDoc:{},sinvDoc:{},posProfile:{},itemQtyMap:{},coupons:{},itemSerialNumbers:{},quickQtyActive:!1,quickQtyBuffer:"",quickQtyRow:null,quickQtyKeyDownHandler:null,quickQtyKeyUpHandler:null,selectedItemForBatch:"",pendingBatchItem:null,expandedBatchId:void 0,itemVisibilityValue:"Inventory Items"}},computed:{defaultPOSCashAccount:()=>{var t;return((t=N.singles.POSSettings)==null?void 0:t.cashAccount)??void 0},isDiscountingEnabled(){var t;return!!((t=N.singles.AccountingSettings)!=null&&t.enableDiscounting)},isPosShiftOpen:()=>{var t;return!!((t=N.singles.POSSettings)!=null&&t.isShiftOpen)},itemVisibility(){return this.itemVisibilityValue},disablePayButton(){var t;return!((t=this.sinvDoc.items)!=null&&t.length)||!this.sinvDoc.party}},watch:{sinvDoc:{handler(){var t,e;(t=this.sinvDoc.coupons)!=null&&t.length&&this.setCouponsCount((e=this.sinvDoc.coupons)==null?void 0:e.length),this.updateValues()},deep:!0}},async mounted(){await this.setItems(),await this.loadPOSProfile(),this.itemVisibilityValue=await $l(this.fyo)},async activated(){mp(!1),K3e(N),this.setCouponCodeDoc(),this.setSinvDoc(),this.setDefaultCustomer(),this.setShortcuts(),this.addQuickQtyListeners(),await this.setItemQtyMap(),await this.setItems()},deactivated(){var t;(t=this.shortcuts)==null||t.delete(Co),mp(!0),this.removeQuickQtyListeners()},methods:{setQuickQtySelectedRow(t){this.quickQtyRow=t},setExpandedBatchId(t){this.expandedBatchId=t},addQuickQtyListeners(){this.quickQtyKeyDownHandler=t=>this.onQuickQtyKeyDown(t),this.quickQtyKeyUpHandler=t=>this.onQuickQtyKeyUp(t),window.addEventListener("keydown",this.quickQtyKeyDownHandler),window.addEventListener("keyup",this.quickQtyKeyUpHandler)},removeQuickQtyListeners(){this.quickQtyKeyDownHandler&&(window.removeEventListener("keydown",this.quickQtyKeyDownHandler),this.quickQtyKeyDownHandler=null),this.quickQtyKeyUpHandler&&(window.removeEventListener("keyup",this.quickQtyKeyUpHandler),this.quickQtyKeyUpHandler=null)},hasAnyOpenModal(){return this.openAlertModal||this.openPaymentModal||this.openKeyboardModal||this.openPriceListModal||this.openItemEnquiryModal||this.openCouponCodeModal||this.openShiftCloseModal||this.openSavedInvoiceModal||this.openLoyaltyProgramModal||this.openAppliedCouponsModal||this.openReturnSalesInvoiceModal},onQuickQtyKeyDown(t){const e=!(t.altKey||t.metaKey||t.ctrlKey),n=t.target;if(!(n&&e&&(n instanceof HTMLInputElement&&n.type!=="button"||n instanceof HTMLTextAreaElement||n.isContentEditable))&&!this.hasAnyOpenModal()){if(t.code==="KeyQ"&&!this.quickQtyActive){this.quickQtyActive=!0,this.quickQtyBuffer="";return}if(this.quickQtyActive){if(/^Digit[0-9]$/.test(t.code)){this.quickQtyBuffer+=t.code.replace("Digit",""),t.preventDefault();return}if(/^Numpad[0-9]$/.test(t.code)){this.quickQtyBuffer+=t.code.replace("Numpad",""),t.preventDefault();return}if(t.code==="Backspace"){this.quickQtyBuffer=this.quickQtyBuffer.slice(0,-1),t.preventDefault();return}}}},async onQuickQtyKeyUp(t){if(t.code!=="KeyQ"||!this.quickQtyActive)return;this.quickQtyActive=!1;const e=this.quickQtyBuffer;if(this.quickQtyBuffer="",!e||!e.length)return;const n=Number(e);if(!Number.isFinite(n))return;let i=this.quickQtyRow;if(!i||!(this.sinvDoc.items||[]).includes(i)){const r=(this.sinvDoc.items||[]).filter(o=>!o.isFreeItem);i=r.length?r[r.length-1]:null}if(!i)return;const s=i.quantity??1;if(!i.isReturn&&n<=0){it({type:"error",message:b`Quantity must be greater than zero.`,duration:"short"});return}try{await i.set("quantity",n);const r=(this.sinvDoc.items||[]).filter(o=>o.item===i.item&&!o.isFreeItem);await Eu(this.sinvDoc,i,r)}catch(r){await i.set("quantity",s),it({type:"error",message:b`${r}`,duration:"short"});return}i.isFreeItem||(await this.applyPricingRule(),await this.sinvDoc.runFormulas())},async setCustomer(t){var i,s;if(!t){this.sinvDoc.party="";return}this.sinvDoc.party=t;const e=await this.fyo.db.getAll(A.Party,{fields:["loyaltyProgram","loyaltyPoints"],filters:{name:t}}),n=(i=e[0])==null?void 0:i.loyaltyProgram;if(n&&await Ky(this.fyo,n)){this.loyaltyProgram=n,this.loyaltyPoints=0;return}this.loyaltyProgram=n,this.loyaltyPoints=(s=e[0])==null?void 0:s.loyaltyPoints},async loadPOSProfile(){var e;const t=(e=N.singles.POSSettings)==null?void 0:e.posProfile;t&&(this.posProfile=await N.doc.getDoc(A.POSProfile,t))},async handleItemSearch(t,e){var O;if(this.itemSearchTerm=t,!e)return;let n=1;const i=N.singles.POSSettings,s=i==null?void 0:i.weightEnabledBarcode,r=(i==null?void 0:i.checkDigits)||"",o=(i==null?void 0:i.itemCodeDigits)||0,a=(i==null?void 0:i.itemWeightDigits)||0,l=String(r).length+Number(o)+Number(a);let c=!1,u=t,h="";if(s&&t.length===l){const S=t.slice(r.toString().length,r.toString().length+o),x=t.slice(r.toString().length+o);isNaN(Number(x))||(c=!0,u=S,h=x)}const p=await this.fyo.db.getAll(A.Item,{fields:["name","barcode","itemCode","unit"]});let m=null;if(c?m=p.find(S=>S.itemCode===u||S.barcode===u):t.length===12&&(m=p.find(S=>S.barcode===t)),m||(m=p.find(S=>S.name===t)),!m)return;if(c&&h){const S=parseInt(h,10);((O=m.unit)==null?void 0:O.toLowerCase())==="kg"?n=S/1e3:n=S}const y=this.getItem(m.name);y&&e&&(await this.addItem(y,n),this.itemSearchTerm="")},getItem(t){return this.items.find(e=>e.name===t)},isModalOpen(){for(const t of n$e)if(t&&this[`open${t}Modal`])return this[`open${t}Modal`]=!1,`open${t}Modal`},setShortcuts(){var t,e,n,i,s,r,o,a,l;(t=this.shortcuts)==null||t.shift.set(Co,["KeyS"],async()=>{await this.routeToSinvList()}),(e=this.shortcuts)==null||e.shift.set(Co,["KeyV"],()=>{this.toggleView()}),(n=this.shortcuts)==null||n.shift.set(Co,["KeyP"],()=>{this.toggleModal("PriceList")}),(i=this.shortcuts)==null||i.pmodShift.set(Co,["KeyH"],()=>{this.toggleModal("SavedInvoice")}),(s=this.shortcuts)==null||s.pmodShift.set(Co,["Backspace"],async()=>{this.isModalOpen()||await this.clearValues()}),(r=this.shortcuts)==null||r.pmodShift.set(Co,["KeyP"],()=>{this.disablePayButton||this.toggleModal("Payment")}),(o=this.shortcuts)==null||o.pmodShift.set(Co,["KeyS"],async()=>{var u;!this.isModalOpen()&&this.sinvDoc.party&&((u=this.sinvDoc.items)!=null&&u.length)&&await this.saveOrder()}),(a=this.shortcuts)==null||a.shift.set(Co,["KeyL"],()=>{var c,u;(c=this.fyo.singles.AccountingSettings)!=null&&c.enablePriceList&&this.loyaltyPoints&&this.sinvDoc.party&&((u=this.sinvDoc.items)!=null&&u.length)&&this.loyaltyProgram&&this.toggleModal("LoyaltyProgram",!0)}),(l=this.shortcuts)==null||l.shift.set(Co,["KeyC"],()=>{var c,u,h,p;(c=this.fyo.singles.AccountingSettings)!=null&&c.enableCouponCode&&((u=this.sinvDoc)!=null&&u.party)&&((p=(h=this.sinvDoc)==null?void 0:h.items)!=null&&p.length)&&this.toggleModal("CouponCode")})},async saveOrder(){try{await this.validate(),await this.sinvDoc.runFormulas(),await this.sinvDoc.sync()}catch(t){return it({type:"error",message:b`${t}`})}it({type:"success",message:b`Sales Invoice ${this.sinvDoc.name} is Saved`,duration:"short"}),await this.afterSync()},async setItemGroup(t){this.selectedItemGroup=t,await this.setItems()},async setItems(){var s,r;const t={},e=await $l(this.fyo),n=((s=this.posProfile)==null?void 0:s.hideUnavailableItems)??((r=this.fyo.singles.POSSettings)==null?void 0:r.hideUnavailableItems);e==="Inventory Items"?t.trackItem=!0:e==="ERP Sync Items"?t.datafromErp=!0:e==="Non-Inventory Items"&&(t.trackItem=!1,t.datafromErp=!1),this.selectedItemGroup&&(t.itemGroup=this.selectedItemGroup);const i=await N.db.getAll(A.Item,{fields:[],filters:t});this.items=[];for(const o of i){let a=0;if(this.itemQtyMap[o.name]&&(a=this.itemQtyMap[o.name].availableQty),!o.name)return;n&&t.trackItem&&a<=0||this.items.push({availableQty:a,name:o.name,image:o==null?void 0:o.image,rate:o.rate,unit:o.unit,hasBatch:!!o.hasBatch,hasSerialNumber:!!o.hasSerialNumber})}},async selectedReturnInvoice(t){let n=await(await this.fyo.doc.getDoc(A.SalesInvoice,t)).getReturnDoc();!n||!n.name||(this.sinvDoc=n)},toggleView(){this.tableView=!this.tableView},setPaidAmount(t){this.paidAmount=this.fyo.pesa(t.toString())},setPaymentMethod(t){this.paymentMethod=t},setDefaultCustomer(){var t,e;this.defaultCustomer=((t=this.posProfile)==null?void 0:t.posCustomer)??((e=this.fyo.singles.Defaults)==null?void 0:e.posCustomer)??"",this.sinvDoc.party=this.defaultCustomer},setItemDiscounts(){this.itemDiscounts=G3e(this.sinvDoc.items)},async setItemQtyMap(){this.itemQtyMap=await Yy(this.sinvDoc)},setSinvDoc(){var t;this.sinvDoc=this.fyo.doc.getNewDoc(A.SalesInvoice,{account:(t=this.fyo.singles.POSSettings)==null?void 0:t.defaultAccount,party:this.sinvDoc.party??this.defaultCustomer,isPOS:!0})},setCouponCodeDoc(){this.coupons=this.fyo.doc.getNewDoc(A.AppliedCouponCodes)},setAppliedCoupons(){this.appliedCoupons=this.sinvDoc.coupons},setTotalQuantity(){this.totalQuantity=W3e(this.sinvDoc.items)},ignorePricingRules(){var t;return this.posProfile?this.posProfile.ignorePricingRule:!!((t=this.fyo.singles.POSSettings)!=null&&t.ignorePricingRule)},setTotalTaxedAmount(){this.totalTaxedAmount=J3e(this.sinvDoc)},setCouponsCount(t){this.appliedCouponsCount=t},async setLoyaltyPoints(t){this.appliedLoyaltyPoints=t,await this.sinvDoc.set("redeemLoyaltyPoints",!0),await this.sinvDoc.runFormulas()},async selectedInvoiceName(t){const e=await this.fyo.doc.getDoc(A.SalesInvoice,t.name);this.sinvDoc=e,this.toggleModal("SavedInvoice",!1),t.submitted&&this.toggleModal("Payment")},setTransferAmount(t=N.pesa(0)){this.transferAmount=t},setTransferClearanceDate(t){this.transferClearanceDate=t},setTransferRefNo(t){this.transferRefNo=t},validateInvoice(){if(this.sinvDoc.isSubmitted)throw new ie(b`Cannot add an item to a submitted invoice.`);if(this.sinvDoc.returnAgainst)throw new ie(b`Unable to add an item to the return invoice.`)},async addItem(t,e){var n,i,s,r,o,a;try{if(await this.sinvDoc.runFormulas(),this.validateInvoice(),!t)return;const l=t.name;if(t.hasBatch){this.selectedItemForBatch=l,this.pendingBatchItem={item:t,quantity:e??1},this.toggleModal("BatchSelection",!0);return}const c=await this.fyo.getValue(A.Item,l,"trackItem");if(c&&(((n=this.itemQtyMap[l])==null?void 0:n.availableQty)??0)<=0)throw new ie(b`Item ${l} is out of stock (quantity is zero)`);const u=((i=this.sinvDoc.items)==null?void 0:i.filter(p=>p.item===l&&!p.isFreeItem))??[];await Eu(this.sinvDoc,t,u);const h=await this.fyo.getValue("Item",l,"hsnCode");if(t.hasBatch){const p=e??1;if(u.length>0)for(let m of u){const y=await this.fyo.db.getStockQuantity(m.item,void 0,void 0,void 0,m.batch);if(m.batch!=null&&y!=null&&y>m.quantity){const O=m.quantity??0;if(await m.set("quantity",O+p),t.hasSerialNumber){const S=O+p,x=await _u(this.fyo,l,S);x&&(this.itemSerialNumbers[l]=x,await m.set("serialNumber",x))}await this.applyPricingRule(),await this.sinvDoc.runFormulas();return}}if(await this.sinvDoc.append("items",{rate:t.rate,item:l,quantity:p,hsnCode:h}),t.hasSerialNumber){const m=await _u(this.fyo,l,p);if(m){this.itemSerialNumbers[l]=m;const y=(s=this.sinvDoc.items)==null?void 0:s.filter(O=>O.item===l&&!O.isFreeItem);y&&y.length>0&&await y[y.length-1].set("serialNumber",m)}}await this.applyPricingRule(),await this.sinvDoc.runFormulas();return}if(u.length){this.sinvDoc.priceList||(u[0].rate=t.rate);const p=u[0].quantity??0,m=e??1;if(c){const y=((r=this.itemQtyMap[l])==null?void 0:r.availableQty)??0;if(p+m>y)throw new ie(`Cannot add more than the available quantity for ${l}`)}if(await u[0].set("quantity",p+m),t.hasSerialNumber){const y=p+m,O=await _u(this.fyo,l,y);O&&(this.itemSerialNumbers[l]=O,await u[0].set("serialNumber",O))}await this.applyPricingRule(),await this.sinvDoc.runFormulas(),c&&await Eu(this.sinvDoc,t,u);return}if(await this.sinvDoc.append("items",{rate:t.rate,item:l,quantity:e||1,hsnCode:h}),this.sinvDoc.priceList){const p=(o=this.sinvDoc.items)==null?void 0:o.filter(m=>m.item==l);p.length>0&&(p[0].rate=await H9(p[0],this.sinvDoc.priceList))}if(t.hasSerialNumber){const p=e??1,m=await _u(this.fyo,l,p);if(m){this.itemSerialNumbers[l]=m;const y=(a=this.sinvDoc.items)==null?void 0:a.filter(O=>O.item===l&&!O.isFreeItem);y&&y.length>0&&await y[y.length-1].set("serialNumber",m)}}await this.applyPricingRule(),await this.sinvDoc.runFormulas()}catch(l){return it({type:"error",message:b`${l}`})}},async handleBatchSelected(t){var i;if(!this.pendingBatchItem)return;const{item:e,quantity:n}=this.pendingBatchItem;this.pendingBatchItem=null;try{const s=await this.fyo.doc.getDoc(A.Item,e.name);let r=0;if(s.trackItem){r=await N.db.getStockQuantity(e.name,void 0,void 0,void 0,t)??0;const a=this.items.findIndex(l=>l.name===e.name);a!==-1&&(this.items[a].availableQty=r??0)}const o=((i=this.sinvDoc.items)==null?void 0:i.filter(a=>a.item===e.name&&a.batch===t&&!a.isFreeItem))??[];if(await Eu(this.sinvDoc,s,o),o.length){const a=o[0].quantity??0,l=n??1;await o[0].set("quantity",a+l)}else await this.sinvDoc.append("items",{rate:e.rate,item:e.name,quantity:n??1,hsnCode:s.hsnCode,batch:t});await this.applyPricingRule(),await this.sinvDoc.runFormulas(),await this.setItemQtyMap()}catch(s){it({type:"error",message:b`${s}`})}},async createTransaction(t=!1,e=!1){try{this.sinvDoc.date=new Date,await this.validate(),await this.submitSinvDoc();const n=await $l(this.fyo);this.sinvDoc.stockNotTransferred&&n==="Inventory Items"&&await this.makeStockTransfer(),e&&await this.makePayment(t),t&&await St(`/print/${this.sinvDoc.schemaName}/${this.sinvDoc.name}`),await this.afterTransaction(),await this.setItems()}catch(n){it({type:"error",message:b`${n}`})}},async makePayment(t){var i,s;if(this.paymentDoc=this.sinvDoc.getPayment(),!this.paymentDoc)return null;const e=this.paymentMethod;await this.paymentDoc.set("paymentMethod",e),await this.paymentDoc.set("amount",this.fyo.pesa(this.paidAmount.float)),await this.paymentDoc.set("referenceType",A.SalesInvoice);const n=await this.paymentDoc.loadAndGetLink("paymentMethod");(n==null?void 0:n.type)!=="Cash"&&await this.paymentDoc.setMultiple({referenceId:this.transferRefNo,clearanceDate:this.transferClearanceDate}),(n==null?void 0:n.type)==="Cash"&&await this.paymentDoc.setMultiple({paymentAccount:this.defaultPOSCashAccount}),this.paymentDoc.once("afterSubmit",()=>{it({type:"success",message:b`Payment ${this.paymentDoc.name} is Saved`,duration:"short"})});try{await((i=this.paymentDoc)==null?void 0:i.sync()),await((s=this.paymentDoc)==null?void 0:s.submit()),t&&await St(`/print/${this.sinvDoc.schemaName}/${this.sinvDoc.name}`)}catch(r){return it({type:"error",message:b`${r}`})}},async makeStockTransfer(){var e;const t=await this.sinvDoc.getStockTransfer();if(t.items){for(const n of t.items)await N.getValue(A.Item,n.item,"trackItem")&&(this.posProfile?n.location=this.posProfile.inventory:n.location=(e=N.singles.POSSettings)==null?void 0:e.inventory,n.serialNumber=this.itemSerialNumbers[n.item]??void 0);t.once("afterSubmit",()=>{it({type:"success",message:b`Shipment ${t.name} is Submitted`,duration:"short"})});try{await t.sync(),await t.submit()}catch(n){return it({type:"error",message:b`${n}`})}}},async submitSinvDoc(){this.sinvDoc.once("afterSubmit",()=>{it({type:"success",message:b`Sales Invoice ${this.sinvDoc.name} is Submitted`,duration:"short"})});try{await this.validate(),await this.sinvDoc.runFormulas(),await this.sinvDoc.sync(),await this.sinvDoc.submit()}catch(t){return it({type:"error",message:b`${t}`})}},async afterSync(){await this.clearValues(),this.setSinvDoc()},async afterTransaction(){await this.setItemQtyMap(),this.sinvDoc.isSubmitted&&(await this.clearValues(),this.setSinvDoc()),this.toggleModal("Payment",!1)},async clearValues(){this.setSinvDoc(),this.itemSerialNumbers={},this.paidAmount=N.pesa(0),this.transferAmount=N.pesa(0),await this.setItems(),this.defaultCustomer||(this.sinvDoc.party="")},toggleModal(t,e){return e?this[`open${t}Modal`]=e:this[`open${t}Modal`]=!this[`open${t}Modal`]},updateValues(){this.setTotalQuantity(),this.setItemDiscounts(),this.setTotalTaxedAmount()},async validate(){await U3e(this.sinvDoc,this.itemQtyMap),this.sinvDoc.isReturn||await Y3e(this.itemSerialNumbers)},async applyPricingRule(){if(this.ignorePricingRules())return;const t=await IC(this.sinvDoc);if(!t||!t.length){this.sinvDoc.pricingRuleDetail=void 0,this.sinvDoc.isPricingRuleApplied=!1,Pse(this.sinvDoc),await this.sinvDoc.applyProductDiscount();return}await this.sinvDoc.appendPricingRuleDetail(t),await this.sinvDoc.applyProductDiscount();const e=[],n=await Yy(this.sinvDoc);t.map(i=>{var r,o;((r=n[i.pricingRule.freeItem])==null?void 0:r.availableQty)<=0&&(this.sinvDoc.items=(o=this.sinvDoc.items)==null?void 0:o.filter(a=>!(a.isFreeItem&&a.item==i.pricingRule.freeItem)),e.push(i.pricingRule.freeItem))}),e.length&&it({type:"error",message:b`Free items out of stock: ${e.join(", ")}`})},async routeToSinvList(){var t;if(!((t=this.sinvDoc.items)!=null&&t.length))return await St("/list/SalesInvoice");this.openAlertModal=!0},async handleSaveAndContinue(){try{if(!this.sinvDoc.party)return it({type:"error",message:b`Please add a customer before saving`});await this.saveInvoiceAction(),this.toggleModal("Alert",!1),await this.routeTo("/list/SalesInvoice")}catch(t){it({type:"error",message:b`${t}`})}},showValidationToast(t){var e;it({type:"error",message:b`${(e=this.sinvDoc.items)!=null&&e.length?"Please select a customer":"Please add items"} before ${t}`})},async saveInvoiceAction(){var t;if(!((t=this.sinvDoc.items)!=null&&t.length)||!this.sinvDoc.party){this.showValidationToast("saving");return}await this.saveOrder()},handlePaymentAction(){var t;if(!((t=this.sinvDoc.items)!=null&&t.length)||!this.sinvDoc.party){this.showValidationToast("payment");return}this.toggleModal("Payment",!0)},routeTo:St}}),s$e={class:"flex-col"},r$e={class:"font-medium text-white"};function o$e(t,e,n,i,s,r){var u,h,p;const o=Q("Button"),a=Q("PageHeader"),l=Q("ClassicPOS"),c=Q("ModernPOS");return w(),P("div",s$e,[_(a,{title:t.t`Point of Sale`},{default:U(()=>[Ge(t.$slots,"default",{},()=>[_(o,{class:"bg-red-500 dark:bg-red-700",onClick:e[0]||(e[0]=m=>t.toggleModal("ShiftClose"))},{default:U(()=>[v("span",r$e,R(t.t`Close POS Shift `),1)]),_:1})])]),_:3},8,["title"]),((u=t.posProfile)==null?void 0:u.posUI)==="Classic"||!((h=t.posProfile)!=null&&h.posUI)&&((p=t.fyo.singles.POSSettings)==null?void 0:p.posUI)==="Classic"?(w(),H(l,{key:0,"table-view":t.tableView,profile:t.posProfile,"total-quantity":t.totalQuantity,"item-quantity-qap":t.itemQtyMap,"loyalty-points":t.loyaltyPoints,"loyalty-program":t.loyaltyProgram,"open-alert-modal":t.openAlertModal,"default-customer":t.defaultCustomer,"item-search-term":t.itemSearchTerm,"selected-item-group":t.selectedItemGroup,"is-pos-shift-open":t.isPosShiftOpen,items:t.items,"item-visibility":t.itemVisibility,"sinv-doc":t.sinvDoc,"disable-pay-button":t.disablePayButton,"open-payment-modal":t.openPaymentModal,"item-discounts":t.itemDiscounts,coupons:t.coupons,"open-price-list-modal":t.openPriceListModal,"open-item-enquiry-modal":t.openItemEnquiryModal,"applied-coupons-count":t.appliedCouponsCount,"open-shift-close-modal":t.openShiftCloseModal,"open-coupon-code-modal":t.openCouponCodeModal,"open-saved-invoice-modal":t.openSavedInvoiceModal,"open-loyalty-program-modal":t.openLoyaltyProgramModal,"open-applied-coupons-modal":t.openAppliedCouponsModal,"open-return-sales-invoice-modal":t.openReturnSalesInvoiceModal,"open-batch-selection-modal":t.openBatchSelectionModal,"selected-item-for-batch":t.selectedItemForBatch,"expanded-batch-id":t.expandedBatchId,onSetExpandedBatchId:t.setExpandedBatchId,onAddItem:t.addItem,onToggleView:t.toggleView,onSetSinvDoc:t.setSinvDoc,onClearValues:t.clearValues,onSetCustomer:t.setCustomer,onToggleModal:t.toggleModal,onSetItemGroup:t.setItemGroup,onHandleItemSearch:t.handleItemSearch,onSetPaidAmount:t.setPaidAmount,onSetPaymentMethod:t.setPaymentMethod,onSetCouponsCount:t.setCouponsCount,onRouteToSinvList:t.routeToSinvList,onSetLoyaltyPoints:t.setLoyaltyPoints,onSetTransferRefNo:t.setTransferRefNo,onApplyPricingRule:t.applyPricingRule,onCreateTransaction:t.createTransaction,onSaveInvoiceAction:t.saveInvoiceAction,onSetTransferAmount:t.setTransferAmount,onSelectedInvoiceName:t.selectedInvoiceName,onSelectedReturnInvoice:t.selectedReturnInvoice,onSetTransferClearanceDate:t.setTransferClearanceDate,onSaveAndContinue:t.handleSaveAndContinue,onHandlePaymentAction:t.handlePaymentAction,onSelectedRow:t.setQuickQtySelectedRow,onBatchSelected:t.handleBatchSelected},null,8,["table-view","profile","total-quantity","item-quantity-qap","loyalty-points","loyalty-program","open-alert-modal","default-customer","item-search-term","selected-item-group","is-pos-shift-open","items","item-visibility","sinv-doc","disable-pay-button","open-payment-modal","item-discounts","coupons","open-price-list-modal","open-item-enquiry-modal","applied-coupons-count","open-shift-close-modal","open-coupon-code-modal","open-saved-invoice-modal","open-loyalty-program-modal","open-applied-coupons-modal","open-return-sales-invoice-modal","open-batch-selection-modal","selected-item-for-batch","expanded-batch-id","onSetExpandedBatchId","onAddItem","onToggleView","onSetSinvDoc","onClearValues","onSetCustomer","onToggleModal","onSetItemGroup","onHandleItemSearch","onSetPaidAmount","onSetPaymentMethod","onSetCouponsCount","onRouteToSinvList","onSetLoyaltyPoints","onSetTransferRefNo","onApplyPricingRule","onCreateTransaction","onSaveInvoiceAction","onSetTransferAmount","onSelectedInvoiceName","onSelectedReturnInvoice","onSetTransferClearanceDate","onSaveAndContinue","onHandlePaymentAction","onSelectedRow","onBatchSelected"])):(w(),H(c,{key:1,"table-view":t.tableView,profile:t.posProfile,"total-quantity":t.totalQuantity,"item-quantity-qap":t.itemQtyMap,"loyalty-points":t.loyaltyPoints,"loyalty-program":t.loyaltyProgram,"open-alert-modal":t.openAlertModal,"default-customer":t.defaultCustomer,"item-search-term":t.itemSearchTerm,"selected-item-group":t.selectedItemGroup,"is-pos-shift-open":t.isPosShiftOpen,items:t.items,"item-visibility":t.itemVisibility,"sinv-doc":t.sinvDoc,"disable-pay-button":t.disablePayButton,"open-payment-modal":t.openPaymentModal,"open-keyboard-modal":t.openKeyboardModal,"item-discounts":t.itemDiscounts,coupons:t.coupons,"open-price-list-modal":t.openPriceListModal,"open-item-enquiry-modal":t.openItemEnquiryModal,"applied-coupons-count":t.appliedCouponsCount,"open-shift-close-modal":t.openShiftCloseModal,"open-coupon-code-modal":t.openCouponCodeModal,"open-saved-invoice-modal":t.openSavedInvoiceModal,"open-loyalty-program-modal":t.openLoyaltyProgramModal,"open-applied-coupons-modal":t.openAppliedCouponsModal,"open-return-sales-invoice-modal":t.openReturnSalesInvoiceModal,"open-batch-selection-modal":t.openBatchSelectionModal,"selected-item-for-batch":t.selectedItemForBatch,"expanded-batch-id":t.expandedBatchId,onSetExpandedBatchId:t.setExpandedBatchId,onAddItem:t.addItem,onToggleView:t.toggleView,onSetSinvDoc:t.setSinvDoc,onClearValues:t.clearValues,onSetCustomer:t.setCustomer,onToggleModal:t.toggleModal,onSetItemGroup:t.setItemGroup,onHandleItemSearch:t.handleItemSearch,onSetPaidAmount:t.setPaidAmount,onSetPaymentMethod:t.setPaymentMethod,onSetCouponsCount:t.setCouponsCount,onRouteToSinvList:t.routeToSinvList,onApplyPricingRule:t.applyPricingRule,onSetLoyaltyPoints:t.setLoyaltyPoints,onSetTransferRefNo:t.setTransferRefNo,onCreateTransaction:t.createTransaction,onSaveInvoiceAction:t.saveInvoiceAction,onSetTransferAmount:t.setTransferAmount,onSelectedInvoiceName:t.selectedInvoiceName,onSelectedReturnInvoice:t.selectedReturnInvoice,onSaveAndContinue:t.handleSaveAndContinue,onSetTransferClearanceDate:t.setTransferClearanceDate,onSelectedRow:t.setQuickQtySelectedRow,onHandlePaymentAction:t.handlePaymentAction,onBatchSelected:t.handleBatchSelected},null,8,["table-view","profile","total-quantity","item-quantity-qap","loyalty-points","loyalty-program","open-alert-modal","default-customer","item-search-term","selected-item-group","is-pos-shift-open","items","item-visibility","sinv-doc","disable-pay-button","open-payment-modal","open-keyboard-modal","item-discounts","coupons","open-price-list-modal","open-item-enquiry-modal","applied-coupons-count","open-shift-close-modal","open-coupon-code-modal","open-saved-invoice-modal","open-loyalty-program-modal","open-applied-coupons-modal","open-return-sales-invoice-modal","open-batch-selection-modal","selected-item-for-batch","expanded-batch-id","onSetExpandedBatchId","onAddItem","onToggleView","onSetSinvDoc","onClearValues","onSetCustomer","onToggleModal","onSetItemGroup","onHandleItemSearch","onSetPaidAmount","onSetPaymentMethod","onSetCouponsCount","onRouteToSinvList","onApplyPricingRule","onSetLoyaltyPoints","onSetTransferRefNo","onCreateTransaction","onSaveInvoiceAction","onSetTransferAmount","onSelectedInvoiceName","onSelectedReturnInvoice","onSaveAndContinue","onSetTransferClearanceDate","onSelectedRow","onHandlePaymentAction","onBatchSelected"]))])}const a$e=ne(i$e,[["render",o$e]]);/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Mu=typeof document<"u";function nQ(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function l$e(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&nQ(t.default)}const Jt=Object.assign;function B2(t,e){const n={};for(const i in e){const s=e[i];n[i]=uo(s)?s.map(t):t(s)}return n}const wf=()=>{},uo=Array.isArray;function P6(t,e){const n={};for(const i in t)n[i]=i in e?e[i]:t[i];return n}const iQ=/#/g,c$e=/&/g,u$e=/\//g,d$e=/=/g,h$e=/\?/g,sQ=/\+/g,f$e=/%5B/g,p$e=/%5D/g,rQ=/%5E/g,m$e=/%60/g,oQ=/%7B/g,g$e=/%7C/g,aQ=/%7D/g,y$e=/%20/g;function YA(t){return t==null?"":encodeURI(""+t).replace(g$e,"|").replace(f$e,"[").replace(p$e,"]")}function O$e(t){return YA(t).replace(oQ,"{").replace(aQ,"}").replace(rQ,"^")}function eS(t){return YA(t).replace(sQ,"%2B").replace(y$e,"+").replace(iQ,"%23").replace(c$e,"%26").replace(m$e,"`").replace(oQ,"{").replace(aQ,"}").replace(rQ,"^")}function b$e(t){return eS(t).replace(d$e,"%3D")}function v$e(t){return YA(t).replace(iQ,"%23").replace(h$e,"%3F")}function w$e(t){return v$e(t).replace(u$e,"%2F")}function fp(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const S$e=/\/$/,C$e=t=>t.replace(S$e,"");function V2(t,e,n="/"){let i,s={},r="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(i=e.slice(0,l),r=e.slice(l,a>0?a:e.length),s=t(r.slice(1))),a>=0&&(i=i||e.slice(0,a),o=e.slice(a,e.length)),i=P$e(i??e,n),{fullPath:i+r+o,path:i,query:s,hash:fp(o)}}function A$e(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function T6(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function x$e(t,e,n){const i=e.matched.length-1,s=n.matched.length-1;return i>-1&&i===s&&jd(e.matched[i],n.matched[s])&&lQ(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function jd(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function lQ(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!k$e(t[n],e[n]))return!1;return!0}function k$e(t,e){return uo(t)?$6(t,e):uo(e)?$6(e,t):(t==null?void 0:t.valueOf())===(e==null?void 0:e.valueOf())}function $6(t,e){return uo(e)?t.length===e.length&&t.every((n,i)=>n===e[i]):t.length===1&&t[0]===e}function P$e(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),i=t.split("/"),s=i[i.length-1];(s===".."||s===".")&&i.push("");let r=n.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+i.slice(o).join("/")}const al={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let tS=function(t){return t.pop="pop",t.push="push",t}({}),j2=function(t){return t.back="back",t.forward="forward",t.unknown="",t}({});function T$e(t){if(!t)if(Mu){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),C$e(t)}const $$e=/^[^#]+#/;function D$e(t,e){return t.replace($$e,"#")+e}function M$e(t,e){const n=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:e.behavior,left:i.left-n.left-(e.left||0),top:i.top-n.top-(e.top||0)}}const uO=()=>({left:window.scrollX,top:window.scrollY});function I$e(t){let e;if("el"in t){const n=t.el,i=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=M$e(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function D6(t,e){return(history.state?history.state.position-e:-1)+t}const nS=new Map;function R$e(t,e){nS.set(t,e)}function _$e(t){const e=nS.get(t);return nS.delete(t),e}function E$e(t){return typeof t=="string"||t&&typeof t=="object"}function cQ(t){return typeof t=="string"||typeof t=="symbol"}let _n=function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t}({});const uQ=Symbol("");_n.MATCHER_NOT_FOUND+"",_n.NAVIGATION_GUARD_REDIRECT+"",_n.NAVIGATION_ABORTED+"",_n.NAVIGATION_CANCELLED+"",_n.NAVIGATION_DUPLICATED+"";function zd(t,e){return Jt(new Error,{type:t,[uQ]:!0},e)}function ca(t,e){return t instanceof Error&&uQ in t&&(e==null||!!(t.type&e))}const Q$e=["params","query","hash"];function N$e(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of Q$e)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function L$e(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<n.length;++i){const s=n[i].replace(sQ," "),r=s.indexOf("="),o=fp(r<0?s:s.slice(0,r)),a=r<0?null:fp(s.slice(r+1));if(o in e){let l=e[o];uo(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function M6(t){let e="";for(let n in t){const i=t[n];if(n=b$e(n),i==null){i!==void 0&&(e+=(e.length?"&":"")+n);continue}(uo(i)?i.map(s=>s&&eS(s)):[i&&eS(i)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function F$e(t){const e={};for(const n in t){const i=t[n];i!==void 0&&(e[n]=uo(i)?i.map(s=>s==null?null:""+s):i==null?i:""+i)}return e}const B$e=Symbol(""),I6=Symbol(""),KA=Symbol(""),dQ=Symbol(""),iS=Symbol("");function Vh(){let t=[];function e(i){return t.push(i),()=>{const s=t.indexOf(i);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function yl(t,e,n,i,s,r=o=>o()){const o=i&&(i.enterCallbacks[s]=i.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const c=p=>{p===!1?l(zd(_n.NAVIGATION_ABORTED,{from:n,to:e})):p instanceof Error?l(p):E$e(p)?l(zd(_n.NAVIGATION_GUARD_REDIRECT,{from:e,to:p})):(o&&i.enterCallbacks[s]===o&&typeof p=="function"&&o.push(p),a())},u=r(()=>t.call(i&&i.instances[s],e,n,c));let h=Promise.resolve(u);t.length<3&&(h=h.then(c)),h.catch(p=>l(p))})}function z2(t,e,n,i,s=r=>r()){const r=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(nQ(l)){const c=(l.__vccOpts||l)[e];c&&r.push(yl(c,n,i,o,a,s))}else{let c=l();r.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const h=l$e(u)?u.default:u;o.mods[a]=u,o.components[a]=h;const p=(h.__vccOpts||h)[e];return p&&yl(p,n,i,o,a,s)()}))}}return r}function V$e(t,e){const n=[],i=[],s=[],r=Math.max(e.matched.length,t.matched.length);for(let o=0;o<r;o++){const a=e.matched[o];a&&(t.matched.find(c=>jd(c,a))?i.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>jd(c,l))||s.push(l))}return[n,i,s]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let j$e=()=>location.protocol+"//"+location.host;function hQ(t,e){const{pathname:n,search:i,hash:s}=e,r=t.indexOf("#");if(r>-1){let o=s.includes(t.slice(r))?t.slice(r).length:1,a=s.slice(o);return a[0]!=="/"&&(a="/"+a),T6(a,"")}return T6(n,t)+i+s}function z$e(t,e,n,i){let s=[],r=[],o=null;const a=({state:p})=>{const m=hQ(t,location),y=n.value,O=e.value;let S=0;if(p){if(n.value=m,e.value=p,o&&o===y){o=null;return}S=O?p.position-O.position:0}else i(m);s.forEach(x=>{x(n.value,y,{delta:S,type:tS.pop,direction:S?S>0?j2.forward:j2.back:j2.unknown})})};function l(){o=n.value}function c(p){s.push(p);const m=()=>{const y=s.indexOf(p);y>-1&&s.splice(y,1)};return r.push(m),m}function u(){if(document.visibilityState==="hidden"){const{history:p}=window;if(!p.state)return;p.replaceState(Jt({},p.state,{scroll:uO()}),"")}}function h(){for(const p of r)p();r=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",u),document.removeEventListener("visibilitychange",u)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",u),document.addEventListener("visibilitychange",u),{pauseListeners:l,listen:c,destroy:h}}function R6(t,e,n,i=!1,s=!1){return{back:t,current:e,forward:n,replaced:i,position:window.history.length,scroll:s?uO():null}}function Z$e(t){const{history:e,location:n}=window,i={value:hQ(t,n)},s={value:e.state};s.value||r(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(l,c,u){const h=t.indexOf("#"),p=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+l:j$e()+t+l;try{e[u?"replaceState":"pushState"](c,"",p),s.value=c}catch(m){console.error(m),n[u?"replace":"assign"](p)}}function o(l,c){r(l,Jt({},e.state,R6(s.value.back,l,s.value.forward,!0),c,{position:s.value.position}),!0),i.value=l}function a(l,c){const u=Jt({},s.value,e.state,{forward:l,scroll:uO()});r(u.current,u,!0),r(l,Jt({},R6(i.value,l,null),{position:u.position+1},c),!1),i.value=l}return{location:i,state:s,push:a,replace:o}}function q$e(t){t=T$e(t);const e=Z$e(t),n=z$e(t,e.state,e.location,e.replace);function i(r,o=!0){o||n.pauseListeners(),history.go(r)}const s=Jt({location:"",base:t,go:i,createHref:D$e.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}let vc=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t}({});var Jn=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t}(Jn||{});const X$e={type:vc.Static,value:""},W$e=/[a-zA-Z0-9_]/;function G$e(t){if(!t)return[[]];if(t==="/")return[[X$e]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${c}": ${m}`)}let n=Jn.Static,i=n;const s=[];let r;function o(){r&&s.push(r),r=[]}let a=0,l,c="",u="";function h(){c&&(n===Jn.Static?r.push({type:vc.Static,value:c}):n===Jn.Param||n===Jn.ParamRegExp||n===Jn.ParamRegExpEnd?(r.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:vc.Param,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function p(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==Jn.ParamRegExp){i=n,n=Jn.EscapeNext;continue}switch(n){case Jn.Static:l==="/"?(c&&h(),o()):l===":"?(h(),n=Jn.Param):p();break;case Jn.EscapeNext:p(),n=i;break;case Jn.Param:l==="("?n=Jn.ParamRegExp:W$e.test(l)?p():(h(),n=Jn.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case Jn.ParamRegExp:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=Jn.ParamRegExpEnd:u+=l;break;case Jn.ParamRegExpEnd:h(),n=Jn.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===Jn.ParamRegExp&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),s}const _6="[^/]+?",U$e={sensitive:!1,strict:!1,start:!0,end:!0};var Gi=function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t}(Gi||{});const H$e=/[.+*?^${}()[\]/\\]/g;function Y$e(t,e){const n=Jt({},U$e,e),i=[];let s=n.start?"^":"";const r=[];for(const c of t){const u=c.length?[]:[Gi.Root];n.strict&&!c.length&&(s+="/");for(let h=0;h<c.length;h++){const p=c[h];let m=Gi.Segment+(n.sensitive?Gi.BonusCaseSensitive:0);if(p.type===vc.Static)h||(s+="/"),s+=p.value.replace(H$e,"\\$&"),m+=Gi.Static;else if(p.type===vc.Param){const{value:y,repeatable:O,optional:S,regexp:x}=p;r.push({name:y,repeatable:O,optional:S});const T=x||_6;if(T!==_6){m+=Gi.BonusCustomRegExp;try{`${T}`}catch(D){throw new Error(`Invalid custom RegExp for param "${y}" (${T}): `+D.message)}}let k=O?`((?:${T})(?:/(?:${T}))*)`:`(${T})`;h||(k=S&&c.length<2?`(?:/${k})`:"/"+k),S&&(k+="?"),s+=k,m+=Gi.Dynamic,S&&(m+=Gi.BonusOptional),O&&(m+=Gi.BonusRepeatable),T===".*"&&(m+=Gi.BonusWildcard)}u.push(m)}i.push(u)}if(n.strict&&n.end){const c=i.length-1;i[c][i[c].length-1]+=Gi.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let p=1;p<u.length;p++){const m=u[p]||"",y=r[p-1];h[y.name]=m&&y.repeatable?m.split("/"):m}return h}function l(c){let u="",h=!1;for(const p of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const m of p)if(m.type===vc.Static)u+=m.value;else if(m.type===vc.Param){const{value:y,repeatable:O,optional:S}=m,x=y in c?c[y]:"";if(uo(x)&&!O)throw new Error(`Provided param "${y}" is an array but it is not repeatable (* or + modifiers)`);const T=uo(x)?x.join("/"):x;if(!T)if(S)p.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${y}"`);u+=T}}return u||"/"}return{re:o,score:i,keys:r,parse:a,stringify:l}}function K$e(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=e[n]-t[n];if(i)return i;n++}return t.length<e.length?t.length===1&&t[0]===Gi.Static+Gi.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Gi.Static+Gi.Segment?1:-1:0}function fQ(t,e){let n=0;const i=t.score,s=e.score;for(;n<i.length&&n<s.length;){const r=K$e(i[n],s[n]);if(r)return r;n++}if(Math.abs(s.length-i.length)===1){if(E6(i))return 1;if(E6(s))return-1}return s.length-i.length}function E6(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const J$e={strict:!1,end:!0,sensitive:!1};function eDe(t,e,n){const i=Y$e(G$e(t.path),n),s=Jt(i,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function tDe(t,e){const n=[],i=new Map;e=P6(J$e,e);function s(h){return i.get(h)}function r(h,p,m){const y=!m,O=N6(h);O.aliasOf=m&&m.record;const S=P6(e,h),x=[O];if("alias"in h){const D=typeof h.alias=="string"?[h.alias]:h.alias;for(const M of D)x.push(N6(Jt({},O,{components:m?m.record.components:O.components,path:M,aliasOf:m?m.record:O})))}let T,k;for(const D of x){const{path:M}=D;if(p&&M[0]!=="/"){const L=p.record.path,j=L[L.length-1]==="/"?"":"/";D.path=p.record.path+(M&&j+M)}if(T=eDe(D,p,S),m?m.alias.push(T):(k=k||T,k!==T&&k.alias.push(T),y&&h.name&&!L6(T)&&o(h.name)),pQ(T)&&l(T),O.children){const L=O.children;for(let j=0;j<L.length;j++)r(L[j],T,m&&m.children[j])}m=m||T}return k?()=>{o(k)}:wf}function o(h){if(cQ(h)){const p=i.get(h);p&&(i.delete(h),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(h);p>-1&&(n.splice(p,1),h.record.name&&i.delete(h.record.name),h.children.forEach(o),h.alias.forEach(o))}}function a(){return n}function l(h){const p=sDe(h,n);n.splice(p,0,h),h.record.name&&!L6(h)&&i.set(h.record.name,h)}function c(h,p){let m,y={},O,S;if("name"in h&&h.name){if(m=i.get(h.name),!m)throw zd(_n.MATCHER_NOT_FOUND,{location:h});S=m.record.name,y=Jt(Q6(p.params,m.keys.filter(k=>!k.optional).concat(m.parent?m.parent.keys.filter(k=>k.optional):[]).map(k=>k.name)),h.params&&Q6(h.params,m.keys.map(k=>k.name))),O=m.stringify(y)}else if(h.path!=null)O=h.path,m=n.find(k=>k.re.test(O)),m&&(y=m.parse(O),S=m.record.name);else{if(m=p.name?i.get(p.name):n.find(k=>k.re.test(p.path)),!m)throw zd(_n.MATCHER_NOT_FOUND,{location:h,currentLocation:p});S=m.record.name,y=Jt({},p.params,h.params),O=m.stringify(y)}const x=[];let T=m;for(;T;)x.unshift(T.record),T=T.parent;return{name:S,path:O,params:y,matched:x,meta:iDe(x)}}t.forEach(h=>r(h));function u(){n.length=0,i.clear()}return{addRoute:r,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:s}}function Q6(t,e){const n={};for(const i of e)i in t&&(n[i]=t[i]);return n}function N6(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:nDe(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function nDe(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const i in t.components)e[i]=typeof n=="object"?n[i]:n;return e}function L6(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function iDe(t){return t.reduce((e,n)=>Jt(e,n.meta),{})}function sDe(t,e){let n=0,i=e.length;for(;n!==i;){const r=n+i>>1;fQ(t,e[r])<0?i=r:n=r+1}const s=rDe(t);return s&&(i=e.lastIndexOf(s,i-1)),i}function rDe(t){let e=t;for(;e=e.parent;)if(pQ(e)&&fQ(t,e)===0)return e}function pQ({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function F6(t){const e=st(KA),n=st(dQ),i=Dt(()=>{const l=Ys(t.to);return e.resolve(l)}),s=Dt(()=>{const{matched:l}=i.value,{length:c}=l,u=l[c-1],h=n.matched;if(!u||!h.length)return-1;const p=h.findIndex(jd.bind(null,u));if(p>-1)return p;const m=B6(l[c-2]);return c>1&&B6(u)===m&&h[h.length-1].path!==m?h.findIndex(jd.bind(null,l[c-2])):p}),r=Dt(()=>s.value>-1&&uDe(n.params,i.value.params)),o=Dt(()=>s.value>-1&&s.value===n.matched.length-1&&lQ(n.params,i.value.params));function a(l={}){if(cDe(l)){const c=e[Ys(t.replace)?"replace":"push"](Ys(t.to)).catch(wf);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:i,href:Dt(()=>i.value.href),isActive:r,isExactActive:o,navigate:a}}function oDe(t){return t.length===1?t[0]:t}const aDe=ve({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:F6,setup(t,{slots:e}){const n=Bl(F6(t)),{options:i}=st(KA),s=Dt(()=>({[V6(t.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[V6(t.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=e.default&&oDe(e.default(n));return t.custom?r:ja("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},r)}}}),lDe=aDe;function cDe(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function uDe(t,e){for(const n in e){const i=e[n],s=t[n];if(typeof i=="string"){if(i!==s)return!1}else if(!uo(s)||s.length!==i.length||i.some((r,o)=>r.valueOf()!==s[o].valueOf()))return!1}return!0}function B6(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const V6=(t,e,n)=>t??e??n,dDe=ve({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const i=st(iS),s=Dt(()=>t.route||i.value),r=st(I6,0),o=Dt(()=>{let c=Ys(r);const{matched:u}=s.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=Dt(()=>s.value.matched[o.value]);wa(I6,Dt(()=>o.value+1)),wa(B$e,a),wa(iS,s);const l=Cn();return xl(()=>[l.value,a.value,t.name],([c,u,h],[p,m,y])=>{u&&(u.instances[h]=c,m&&m!==u&&c&&c===p&&(u.leaveGuards.size||(u.leaveGuards=m.leaveGuards),u.updateGuards.size||(u.updateGuards=m.updateGuards))),c&&u&&(!m||!jd(u,m)||!p)&&(u.enterCallbacks[h]||[]).forEach(O=>O(c))},{flush:"post"}),()=>{const c=s.value,u=t.name,h=a.value,p=h&&h.components[u];if(!p)return j6(n.default,{Component:p,route:c});const m=h.props[u],y=m?m===!0?c.params:typeof m=="function"?m(c):m:null,S=ja(p,Jt({},y,e,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return j6(n.default,{Component:S,route:c})||S}}});function j6(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const hDe=dDe;function fDe(t){const e=tDe(t.routes,t),n=t.parseQuery||L$e,i=t.stringifyQuery||M6,s=t.history,r=Vh(),o=Vh(),a=Vh(),l=$S(al);let c=al;Mu&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=B2.bind(null,ue=>""+ue),h=B2.bind(null,w$e),p=B2.bind(null,fp);function m(ue,De){let re,he;return cQ(ue)?(re=e.getRecordMatcher(ue),he=De):he=ue,e.addRoute(he,re)}function y(ue){const De=e.getRecordMatcher(ue);De&&e.removeRoute(De)}function O(){return e.getRoutes().map(ue=>ue.record)}function S(ue){return!!e.getRecordMatcher(ue)}function x(ue,De){if(De=Jt({},De||l.value),typeof ue=="string"){const z=V2(n,ue,De.path),se=e.resolve({path:z.path},De),we=s.createHref(z.fullPath);return Jt(z,se,{params:p(se.params),hash:fp(z.hash),redirectedFrom:void 0,href:we})}let re;if(ue.path!=null)re=Jt({},ue,{path:V2(n,ue.path,De.path).path});else{const z=Jt({},ue.params);for(const se in z)z[se]==null&&delete z[se];re=Jt({},ue,{params:h(z)}),De.params=h(De.params)}const he=e.resolve(re,De),ct=ue.hash||"";he.params=u(p(he.params));const Xt=A$e(i,Jt({},ue,{hash:O$e(ct),path:he.path})),F=s.createHref(Xt);return Jt({fullPath:Xt,hash:ct,query:i===M6?F$e(ue.query):ue.query||{}},he,{redirectedFrom:void 0,href:F})}function T(ue){return typeof ue=="string"?V2(n,ue,l.value.path):Jt({},ue)}function k(ue,De){if(c!==ue)return zd(_n.NAVIGATION_CANCELLED,{from:De,to:ue})}function D(ue){return j(ue)}function M(ue){return D(Jt(T(ue),{replace:!0}))}function L(ue,De){const re=ue.matched[ue.matched.length-1];if(re&&re.redirect){const{redirect:he}=re;let ct=typeof he=="function"?he(ue,De):he;return typeof ct=="string"&&(ct=ct.includes("?")||ct.includes("#")?ct=T(ct):{path:ct},ct.params={}),Jt({query:ue.query,hash:ue.hash,params:ct.path!=null?{}:ue.params},ct)}}function j(ue,De){const re=c=x(ue),he=l.value,ct=ue.state,Xt=ue.force,F=ue.replace===!0,z=L(re,he);if(z)return j(Jt(T(z),{state:typeof z=="object"?Jt({},ct,z.state):ct,force:Xt,replace:F}),De||re);const se=re;se.redirectedFrom=De;let we;return!Xt&&x$e(i,he,re)&&(we=zd(_n.NAVIGATION_DUPLICATED,{to:se,from:he}),Je(he,he,!0,!1)),(we?Promise.resolve(we):K(se,he)).catch(ce=>ca(ce)?ca(ce,_n.NAVIGATION_GUARD_REDIRECT)?ce:dt(ce):Oe(ce,se,he)).then(ce=>{if(ce){if(ca(ce,_n.NAVIGATION_GUARD_REDIRECT))return j(Jt({replace:F},T(ce.to),{state:typeof ce.to=="object"?Jt({},ct,ce.to.state):ct,force:Xt}),De||se)}else ce=W(se,he,!0,F,ct);return te(se,he,ce),ce})}function G(ue,De){const re=k(ue,De);return re?Promise.reject(re):Promise.resolve()}function Z(ue){const De=Pt.values().next().value;return De&&typeof De.runWithContext=="function"?De.runWithContext(ue):ue()}function K(ue,De){let re;const[he,ct,Xt]=V$e(ue,De);re=z2(he.reverse(),"beforeRouteLeave",ue,De);for(const z of he)z.leaveGuards.forEach(se=>{re.push(yl(se,ue,De))});const F=G.bind(null,ue,De);return re.push(F),Ft(re).then(()=>{re=[];for(const z of r.list())re.push(yl(z,ue,De));return re.push(F),Ft(re)}).then(()=>{re=z2(ct,"beforeRouteUpdate",ue,De);for(const z of ct)z.updateGuards.forEach(se=>{re.push(yl(se,ue,De))});return re.push(F),Ft(re)}).then(()=>{re=[];for(const z of Xt)if(z.beforeEnter)if(uo(z.beforeEnter))for(const se of z.beforeEnter)re.push(yl(se,ue,De));else re.push(yl(z.beforeEnter,ue,De));return re.push(F),Ft(re)}).then(()=>(ue.matched.forEach(z=>z.enterCallbacks={}),re=z2(Xt,"beforeRouteEnter",ue,De,Z),re.push(F),Ft(re))).then(()=>{re=[];for(const z of o.list())re.push(yl(z,ue,De));return re.push(F),Ft(re)}).catch(z=>ca(z,_n.NAVIGATION_CANCELLED)?z:Promise.reject(z))}function te(ue,De,re){a.list().forEach(he=>Z(()=>he(ue,De,re)))}function W(ue,De,re,he,ct){const Xt=k(ue,De);if(Xt)return Xt;const F=De===al,z=Mu?history.state:{};re&&(he||F?s.replace(ue.fullPath,Jt({scroll:F&&z&&z.scroll},ct)):s.push(ue.fullPath,ct)),l.value=ue,Je(ue,De,re,F),dt()}let oe;function ye(){oe||(oe=s.listen((ue,De,re)=>{if(!xt.listening)return;const he=x(ue),ct=L(he,xt.currentRoute.value);if(ct){j(Jt(ct,{replace:!0,force:!0}),he).catch(wf);return}c=he;const Xt=l.value;Mu&&R$e(D6(Xt.fullPath,re.delta),uO()),K(he,Xt).catch(F=>ca(F,_n.NAVIGATION_ABORTED|_n.NAVIGATION_CANCELLED)?F:ca(F,_n.NAVIGATION_GUARD_REDIRECT)?(j(Jt(T(F.to),{force:!0}),he).then(z=>{ca(z,_n.NAVIGATION_ABORTED|_n.NAVIGATION_DUPLICATED)&&!re.delta&&re.type===tS.pop&&s.go(-1,!1)}).catch(wf),Promise.reject()):(re.delta&&s.go(-re.delta,!1),Oe(F,he,Xt))).then(F=>{F=F||W(he,Xt,!1),F&&(re.delta&&!ca(F,_n.NAVIGATION_CANCELLED)?s.go(-re.delta,!1):re.type===tS.pop&&ca(F,_n.NAVIGATION_ABORTED|_n.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),te(he,Xt,F)}).catch(wf)}))}let ke=Vh(),ge=Vh(),Se;function Oe(ue,De,re){dt(ue);const he=ge.list();return he.length?he.forEach(ct=>ct(ue,De,re)):console.error(ue),Promise.reject(ue)}function Fe(){return Se&&l.value!==al?Promise.resolve():new Promise((ue,De)=>{ke.add([ue,De])})}function dt(ue){return Se||(Se=!ue,ye(),ke.list().forEach(([De,re])=>ue?re(ue):De()),ke.reset()),ue}function Je(ue,De,re,he){const{scrollBehavior:ct}=t;if(!Mu||!ct)return Promise.resolve();const Xt=!re&&_$e(D6(ue.fullPath,0))||(he||!re)&&history.state&&history.state.scroll||null;return Bi().then(()=>ct(ue,De,Xt)).then(F=>F&&I$e(F)).catch(F=>Oe(F,ue,De))}const ut=ue=>s.go(ue);let Qt;const Pt=new Set,xt={currentRoute:l,listening:!0,addRoute:m,removeRoute:y,clearRoutes:e.clearRoutes,hasRoute:S,getRoutes:O,resolve:x,options:t,push:D,replace:M,go:ut,back:()=>ut(-1),forward:()=>ut(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:ge.add,isReady:Fe,install(ue){ue.component("RouterLink",lDe),ue.component("RouterView",hDe),ue.config.globalProperties.$router=xt,Object.defineProperty(ue.config.globalProperties,"$route",{enumerable:!0,get:()=>Ys(l)}),Mu&&!Qt&&l.value===al&&(Qt=!0,D(s.location).catch(he=>{}));const De={};for(const he in al)Object.defineProperty(De,he,{get:()=>l.value[he],enumerable:!0});ue.provide(KA,xt),ue.provide(dQ,TS(De)),ue.provide(iS,l);const re=ue.unmount;Pt.add(ue),ue.unmount=function(){Pt.delete(ue),Pt.size<1&&(c=al,oe&&oe(),oe=null,l.value=al,Qt=!1,Se=!1),re()}}};function Ft(ue){return ue.reduce((De,re)=>De.then(()=>Z(re)),Promise.resolve())}return xt}const pDe=[{path:"/",component:Lhe},{path:"/get-started",component:dye},{path:"/edit/:schemaName/:name",name:"CommonForm",components:{default:Bue,edit:Rh},props:{default:t=>({schemaName:t.params.schemaName,name:t.params.name}),edit:t=>t.query}},{path:"/list/:schemaName/:pageTitle?",name:"ListView",components:{default:P1e,edit:Rh},props:{default:t=>{const{schemaName:e}=t.params,n=t.params.pageTitle??"",i={},s=t.query.filters;return typeof s=="string"&&Object.assign(i,JSON.parse(s)),{schemaName:e,filters:i,pageTitle:n}},edit:t=>t.query}},{path:"/print/:schemaName/:name",name:"PrintView",component:tOe,props:!0},{path:"/report-print/:reportName",name:"ReportPrintView",component:vOe,props:!0},{path:"/report/:reportClassName",name:"Report",component:jOe,props:!0},{path:"/chart-of-accounts",name:"Chart Of Accounts",components:{default:Ooe,edit:Rh},props:{default:!0,edit:t=>t.query}},{path:"/import-wizard",name:"Import Wizard",component:r0e},{path:"/template-builder/:name",name:"Template Builder",component:F3e,props:!0},{path:"/customize-form",name:"Customize Form",component:X3e},{path:"/settings",name:"Settings",components:{default:GOe,edit:Rh},props:{default:!0,edit:t=>t.query}},{path:"/pos",name:"Point of Sale",components:{default:a$e,edit:Rh},props:{default:!0,edit:t=>t.query}}],Qr=fDe({routes:pDe,history:q$e()});Qr.afterEach(({fullPath:t})=>{const e=history.state;wv.forward=!!e.forward,wv.back=!!e.back,!t.includes("index.html")&&localStorage.setItem("lastRoute",t)});const mQ={short:2500,long:5e3,very_long:1/0};async function sS({doc:t,hideFields:e=[],showFields:n=[]}){const{schemaName:i,name:s}=t;if(!s)throw new oo(b`Quick edit error: ${i} entry has no name.`);if(Qr.currentRoute.value.query.name===s)return;const r={edit:1,name:s,schemaName:i,showFields:n,hideFields:e};await Qr.push({query:r})}async function rd(t){await St({path:"/settings",query:{tab:t}})}async function St(t){if(!(typeof t=="string"&&t===Qr.currentRoute.value.fullPath))return await Qr.push(t)}async function gQ(t){const e=N.schemaMap[t.schemaName].label;let n=b`This action is permanent.`;return t.isTransactional&&t.isSubmitted&&(n=b`This action is permanent and will delete associated ledger entries.`),await Qn({title:b`Delete ${Xl(t)}?`,detail:n,type:"warning",buttons:[{label:b`Yes`,async action(){try{await t.delete()}catch(i){return i7(i)===x1?await Qn({title:b`Delete Failed`,detail:b`Cannot delete ${e} "${t.name}" because of linked entries.`,type:"error"}):await mo(i,t),!1}return!0},isPrimary:!0},{label:b`No`,action(){return!1},isEscape:!0}]})}async function yQ(t){let e=b`This action is permanent`;if(["SalesInvoice","PurchaseInvoice"].includes(t.schemaName)){const n=(await N.db.getAll("Payment",{fields:["name"],filters:{cancelled:!1}})).map(({name:r})=>r),i=(await N.db.getAll("PaymentFor",{fields:["parent"],filters:{referenceName:t.name}})).filter(({parent:r})=>n.includes(r)),s=[...new Set(i.map(({parent:r})=>r))];s.length===1?e=b`This action is permanent and will cancel the following payment: ${s[0]}`:s.length>1&&(e=b`This action is permanent and will cancel the following payments: ${s.join(", ")}`)}return await Qn({title:b`Cancel ${Xl(t)}?`,detail:e,type:"warning",buttons:[{label:b`Yes`,async action(){try{await t.cancel()}catch(n){return await mo(n,t),!1}return!0},isPrimary:!0},{label:b`No`,action(){return!1},isEscape:!0}]})}function JA(t){if(!t)return[];const e=[...XH(t),ODe(t),bDe(t),yDe(t),gDe(t)];if((t==null?void 0:t.schemaName)==="Party"){const n=mDe(t);e.push(...n)}return e.filter(n=>{var i;return((i=n.condition)==null?void 0:i.call(n,t))??!0}).map(n=>({group:n.group,label:n.label,component:n.component,action:n.action}))}function OQ(t){const n=JA(t).reduce((s,r)=>{var o;return r.group||(r.group=""),s[o=r.group]??(s[o]={group:r.group,label:r.label??"",type:r.type??"secondary",actions:[]}),s[r.group].actions.push(r),s},{});return[Object.keys(n).filter(Boolean).sort().map(s=>n[s]),n[""]].flat().filter(Boolean)}function mDe(t){return[{label:b`General Ledger`,group:b`View`,condition:n=>n.schemaName==="Party",action:async()=>{await Qr.push({path:"/report/GeneralLedger",query:{defaultFilters:JSON.stringify({party:t.name})}})}}]}function gDe(t){return{label:b`Cancel`,component:{template:'<span class="text-red-700">{{ t`Cancel` }}</span>'},condition:e=>e.canCancel,async action(){await nx(t)}}}function yDe(t){return{label:b`Delete`,component:{template:'<span class="text-red-700">{{ t`Delete` }}</span>'},condition:e=>e.canDelete,async action(){await hO(t)}}}async function bQ({name:t,schemaName:e}){if(!t)return;const n=$s(e,t);return await St(n)}function ODe(t){const e=!!t.schema.isSubmittable;return{label:b`Duplicate`,group:b`Create`,condition:n=>!!((e&&n.submitted||!e)&&!n.notInserted),async action(){try{const n=t.duplicate();await bQ(n)}catch(n){await mo(n,t)}}}}function bDe(t){return{label:b`New Entry`,group:b`Create`,async action(){try{const e=N.doc.getNewDoc(t.schemaName);await bQ(e)}catch(e){await mo(e,t)}}}}function ex(t,e){const n=new Map;for(const i of(t==null?void 0:t.fields)??[]){const s=i.tab??"Main",r=i.section??"Default";n.has(s)||n.set(s,new Map);const o=n.get(s);o.has(r)||o.set(r,[]),!i.meta&&(RC(i,e)||o.get(r).push(i))}for(const i of n.keys()){const s=n.get(i);if(!s){n.delete(i);continue}for(const r of s.keys()){const o=s.get(r);(!o||!o.length)&&s.delete(r)}s!=null&&s.size||n.delete(i)}return n}function $s(t,e){var i,s,r;const n=(r=(s=(i=N.models[t])==null?void 0:i.getListViewSettings(N))==null?void 0:s.formRoute)==null?void 0:r.call(s,e);return typeof n=="string"?n:`/edit/${t}/${e.replaceAll("/","%2F")}`}async function pp(t,e){if(!e)return N.doc.getNewDoc(t);try{return await N.doc.getDoc(t,e)}catch{return N.doc.getNewDoc(t)}}async function vQ(t){return await N.db.count(A.PrintTemplate,{filters:{type:t}})>0}function mp(t){typeof t!="boolean"&&(t=!Fo.value),Fo.value=t}function dO(t,e,n=!0){var s;if(!(!(t!=null&&t.fyo)||((s=t.fyo.schemaMap[t.schemaName])==null?void 0:s.naming)!=="manual"||t.inserted)&&t.fyo.doc.isTemporaryName(t.name??"",t.schema)&&(Array.isArray(e)&&e.length>0&&(e=e[0]),!(!e||typeof e!="object"))){if(!n&&typeof(e==null?void 0:e.select)=="function"){e.select();return}typeof(e==null?void 0:e.clear)=="function"&&e.clear(),typeof(e==null?void 0:e.focus)=="function"&&e.focus(),t.name=""}}async function tx(t){const e={title:b`Select File`,filters:t},{success:n,canceled:i,filePath:s,data:r,name:o}=await ipc.selectFile(e);if(i||!n)return it({type:"error",message:b`File selection failed`}),{};const a=new TextDecoder().decode(r);return a?{text:a,filePath:s,name:o}:(it({type:"error",message:b`Empty file selected`}),{})}var vt=(t=>(t.enter="enter",t.ctrl="ctrl",t.pmod="pmod",t.shift="shift",t.alt="alt",t.delete="delete",t.esc="esc",t))(vt||{});function wQ(t){return t==="Mac"?{alt:"",ctrl:"",pmod:"",shift:"shift",delete:"delete",esc:"esc",enter:"return"}:{alt:"Alt",ctrl:"Ctrl",pmod:"Ctrl",shift:"",delete:"Backspace",esc:"Esc",enter:"Enter"}}async function hO(t,e=!0){return await gQ(t)?(ix(t,"delete"),e&&Qr.back(),!0):!1}async function nx(t){return await yQ(t)?(ix(t,"cancel"),!0):!1}async function fO(t,e=!1){let n;return e?n=!!await SQ(t,"sync"):n=await vDe(t),n?(ix(t,"sync"),!0):!1}async function vDe(t){try{await t.sync()}catch(e){return await mo(e,t),!1}return!0}async function pO(t){var n;let e=!0;return t instanceof EC&&((n=N.singles.AccountingSettings)!=null&&n.enableInventory)&&(e=await wDe(t)),!e||(e=await SQ(t,"submit"),!e)?!1:(ADe(t),!0)}async function wDe(t){const e=[];for(const{item:n,quantity:i,batch:s}of t.items??[]){if(!n||typeof i!="number"||!await N.getValue(A.Item,n,"trackItem"))continue;const o=await N.db.getStockQuantity(n,void 0,void 0,t.date.toISOString(),s)??0;o>i||e.push({item:n,quantity:i-o})}if(e.length){const n=[{label:b`Yes`,action:()=>!0,isPrimary:!0},{label:b`No`,action:()=>!1,isEscape:!0}],i=e.map(({item:r,quantity:o})=>`${r} (${o})`).join(", "),s=[b`The following items have insufficient quantity for Shipment: ${i}`,b`Continue submitting Sales Invoice?`];return await Qn({title:b`Insufficient Quantity`,type:"warning",detail:s,buttons:n})}return!0}async function SQ(t,e){const n=Xl(t);let i=b`Save ${n}?`;e==="submit"&&(i=b`Submit ${n}?`);let s;e==="submit"?s=CDe(t):s=SDe(t);const r=async()=>{try{await t[e]()}catch(l){return await mo(l,t),!1}return!0},o=[{label:b`Yes`,action:r,isPrimary:!0},{label:b`No`,action:()=>!1,isEscape:!0}];return await Qn({title:i,detail:s,buttons:o})}function SDe(t){var i;const e=Xl(t),n=b`Create new ${t.schema.label} entry?`;if(t.inserted)return b`Save changes made to ${e}?`;if(t instanceof za&&((i=t.grandTotal)!=null&&i.isZero())){const s=t.fyo.format(t.grandTotal??t.fyo.pesa(0),"Currency");return[n,b`Entry has Grand Total ${s}. Please verify amounts.`].join(" ")}return n}function CDe(t){const e=[b`Mark ${t.schema.label} as submitted?`];if(t instanceof EC&&t.makeAutoPayment){const n=t.autoPaymentAccount,i=t.account,s=N.format(t.outstandingAmount,"Currency");e.push(b`Payment of ${s} will be made from account "${i}" to account "${n}" on Submit.`)}else if(t instanceof iM&&t.makeAutoPayment){const n=t.autoPaymentAccount,i=t.account,s=N.format(t.outstandingAmount,"Currency");e.push(b`Payment of ${s} will be made from account "${n}" to account "${i}" on Submit.`)}return e.join(" ")}function ix(t,e){const n=Xl(t),i={sync:b`${n} saved`,cancel:b`${n} cancelled`,delete:b`${n} deleted`}[e];it({type:"success",message:i,duration:"short"})}function ADe(t){const e=Xl(t),i={type:"success",message:b`${e} submitted`,duration:"long",...xDe(t)};it(i)}function xDe(t){const e=t instanceof DC,n=t instanceof Mp;return e?{async action(){const i=jv(t,"StockLedger");await St(i)},actionText:b`View Stock Entries`}:n?{async action(){const i=jv(t,"GeneralLedger");await St(i)},actionText:b`View Accounting Entries`}:{}}function CQ(t){const e=Xl(t);let n=b`${e} already saved`;t.schema.isSubmittable&&t.isSubmitted&&(n=b`${e} already submitted`),it({type:"warning",message:n,duration:"short"})}function AQ(t){const e=Xl(t);let n=b`${e} cannot be deleted`;t.schema.isSubmittable&&!t.isCancelled&&(n=b`${e} cannot be cancelled`),it({type:"warning",message:n,duration:"short"})}function Xl(t){const e=t.schema.label||t.schemaName;return t.schema.naming==="random"?e:t.name||e}const sx=["A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","POS","Letter","Legal","Executive","C5E","Comm10","DLE","Folio","Ledger","Tabloid","Custom"],Q0={A0:{width:84.1,height:118.9},A1:{width:59.4,height:84.1},A2:{width:42,height:59.4},A3:{width:29.7,height:42},A4:{width:21,height:29.7},A5:{width:14.8,height:21},A6:{width:10.5,height:14.8},A7:{width:7.4,height:10.5},A8:{width:5.2,height:7.4},A9:{width:3.7,height:5.2},B0:{width:100,height:141.4},B1:{width:70.7,height:100},B2:{width:50,height:70.7},B3:{width:35.3,height:50},B4:{width:25,height:35.3},B5:{width:17.6,height:25},B6:{width:12.5,height:17.6},B7:{width:8.8,height:12.5},B8:{width:6.2,height:8.8},B9:{width:4.4,height:6.2},POS:{width:8,height:22},Letter:{width:21.59,height:27.94},Legal:{width:21.59,height:35.56},Executive:{width:19.05,height:25.4},C5E:{width:16.3,height:22.9},Comm10:{width:10.5,height:24.1},DLE:{width:11,height:22},Folio:{width:21,height:33},Ledger:{width:43.2,height:27.9},Tabloid:{width:27.9,height:43.2},Custom:{width:-1,height:-1}};function mO(t,e){it({message:t,actionText:b`Open Folder`,type:"success",action:()=>{ipc.showItemInFolder(e)}})}async function xQ(t){const{error:e}=await ipc.deleteFile(t);if((e==null?void 0:e.code)==="EBUSY")await Qn({title:b`Delete Failed`,detail:b`Please restart and try again.`,type:"error"});else if((e==null?void 0:e.code)==="ENOENT")await Qn({title:b`Delete Failed`,detail:b`File ${t} does not exist.`,type:"error"});else if((e==null?void 0:e.code)==="EPERM")await Qn({title:b`Cannot Delete`,detail:b`Close Frappe Books and try manually.`,type:"error"});else if(e){const n=new eu(500,e.message);throw n.name=e.name,n.stack=e.stack,n}}async function kQ(){return ipc.getOpenFilePath({title:b`Select file`,properties:["openFile"],filters:[{name:"SQLite DB File",extensions:["db"]}]})}async function Wl(t,e){const n=await ipc.getSaveFilePath({title:b`Select folder`,defaultPath:`${t}.${e}`}),i=n.canceled;let s=n.filePath;return s&&!s.endsWith(e)&&s!==":memory:"&&(s=`${s}.${e}`),{canceled:i,filePath:s}}const su=Object.freeze(Object.defineProperty({__proto__:null,ShortcutKey:vt,cancelDocWithPrompt:yQ,commonDocCancel:nx,commonDocSubmit:pO,commonDocSync:fO,commongDocDelete:hO,deleteDb:xQ,deleteDocWithPrompt:gQ,focusOrSelectFormControl:dO,getActionsForDoc:JA,getDocFromNameIfExistsElseNew:pp,getFieldsGroupedByTabAndSection:ex,getFormRoute:$s,getGroupedActionsForDoc:OQ,getSavePath:Wl,getSelectedFilePath:kQ,getShortcutKeyMap:wQ,isPrintable:vQ,openQuickEdit:sS,openSettings:rd,paperSizeMap:Q0,printSizes:sx,routeTo:St,selectTextFile:tx,showCannotCancelOrDeleteToast:AQ,showCannotSaveOrSubmitToast:CQ,showExportInFolder:mO,toastDurationMap:mQ,toggleSidebar:mp},Symbol.toStringTag,{value:"Module"})),kDe=ve({components:{FeatherIcon:Kd},props:{message:{type:String,required:!0},action:{type:Function,default:()=>{}},actionText:{type:String,default:""},type:{type:String,default:"info"},duration:{type:String,default:"long"}},data(){return{open:!1}},computed:{config(){return rx(this.type)},isPersistent(){return this.duration==="very_long"}},async mounted(){const t=mQ[this.duration];await Bi(()=>this.open=!0),t!==1/0&&setTimeout(this.closeToast,t)},methods:{actionClicked(){this.action(),this.closeToast()},closeToast(){this.open=!1}}}),PDe={class:"text-base"},TDe={key:0,class:"text-sm text-gray-700 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-200"},$De={class:"ms-auto flex items-center"},DDe={key:0,class:"animate-spin h-4 w-4 text-gray-600 dark:text-gray-400",viewBox:"0 0 24 24"};function MDe(t,e,n,i,s,r){const o=Q("feather-icon");return w(),H(IS,{to:"#toast-container"},[_(Ir,null,{default:U(()=>[t.open?(w(),P("div",{key:0,class:ee(["inner text-gray-900 dark:text-gray-25 shadow-lg px-3 py-2 flex items-center mb-3 w-toast z-30 bg-white dark:bg-gray-850 rounded-lg border",[t.config.containerBorder]]),style:{"pointer-events":"auto"}},[_(o,{name:t.config.iconName,class:ee(["w-6 h-6 me-3",t.config.iconColor])},null,8,["name","class"]),v("div",{class:ee(t.actionText?"cursor-pointer":""),onClick:e[0]||(e[0]=(...a)=>t.actionClicked&&t.actionClicked(...a))},[v("p",PDe,R(t.message),1),t.actionText?(w(),P("button",TDe,R(t.actionText),1)):B("",!0)],2),v("div",$De,[t.isPersistent?(w(),P("svg",DDe,[...e[1]||(e[1]=[v("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none"},null,-1),v("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"},null,-1)])])):(w(),H(o,{key:1,name:"x",class:"w-4 h-4 ms-auto text-gray-600 dark:text-gray-400 cursor-pointer hover:text-gray-800 dark:hover:text-gray-200",onClick:t.closeToast},null,8,["onClick"]))])],2)):B("",!0)]),_:1})])}const IDe=ne(kDe,[["render",MDe],["__scopeId","data-v-4042190e"]]);async function Qn(t){const e=t.buttons??[{label:b`Okay`,action:()=>null,isEscape:!0}];return await new Promise((i,s)=>{const r=e.map(a=>({...a,action:async()=>{try{i(await a.action())}catch(l){s(l)}}})),o=bd({render(){return ja(_ie,{...t,buttons:r})}});PQ(o)})}function it(t){const e=bd({render(){return ja(IDe,{...t})}});PQ(e)}function PQ(t){const e=document.createDocumentFragment();t.mount(e),document.body.append(e)}function rx(t){let e="alert-circle";t==="warning"?e="alert-triangle":t==="success"&&(e="check-circle");const n={info:"blue",warning:"orange",error:"red",success:"green"}[t],i=zb(n??"gray","text",400),s=zb(n??"gray","bg",100),r=zb(n??"gray","border",300);return{iconName:e,color:n,iconColor:i,containerBorder:r,containerBackground:s}}const Kp=Object.freeze(Object.defineProperty({__proto__:null,getIconConfig:rx,showDialog:Qn,showToast:it},Symbol.toStringTag,{value:"Module"}));function RDe(t){return!(t.shouldStore??!0)}async function TQ(t){var n,i;if(!t.stack)return;t.more??(t.more={}),(n=t.more).path??(n.path=Qr.currentRoute.value.fullPath);const e={error_name:t.name,message:t.message,stack:t.stack,platform:N.store.platform,version:N.store.appVersion,language:N.store.language,instance_id:N.store.instanceId,device_id:N.store.deviceId,open_count:N.store.openCount,country_code:(i=N.singles.SystemSettings)==null?void 0:i.countryCode,more:Wv(t.more)};N.store.isDevelopment&&console.log("sendError",e),await ipc.sendError(JSON.stringify(e))}function _De(t){return{message:t.name??b`Error`,type:"error",actionText:b`Report Error`,action:()=>ox(t)}}function $Q(t,e){const{name:n,stack:i,message:s,cause:r}=t;r&&(e.cause=r);const o={name:n,stack:i,message:s,more:e};return N.errorLog.push(o),o}async function Sf(t,e,n={},i=!0){if(t&&console.error(e),RDe(e))return;const s=$Q(e,n);if(await TQ(s),i){const r=_De(s),{showToast:o}=await rn(async()=>{const{showToast:a}=await Promise.resolve().then(()=>Kp);return{showToast:a}},void 0);o(r)}}async function mo(t,e,n,i){if(!(t instanceof Error))return;const s=eh(t,e);await Sf(!1,t,{errorMessage:s,doc:e});const o={title:NDe(t),detail:s,type:"error"};if(n&&(o.detail=Vi.truncate(String(o.detail),{length:128}),o.buttons=[{label:b`Report`,action(){ox($Q(t,{errorMessage:s}))},isPrimary:!0},{label:b`Cancel`,action(){return null},isEscape:!0}]),await Qn(o),i){N.store.isDevelopment&&console.error(t);return}throw t}function EDe(){const t=n=>{const i=N.singles[n];return Object.entries(i).reduce((s,[r,o])=>{var u;const a=((u=N.schemaMap[n])==null?void 0:u.fields)??[],c=new Map(a.map(h=>[h.fieldname,h])).get(r);return typeof o=="boolean"&&!(c!=null&&c.hidden)&&!r.startsWith("_")&&(s[r]=o),s},{})},e=[{name:"Accounting",flags:t(A.AccountingSettings)},{name:"POS",flags:t(A.POSSettings)},{name:"Inventory",flags:t(A.InventorySettings)}].filter(({flags:n})=>Object.keys(n).length>0).flatMap(({name:n,flags:i})=>[`**${n} Settings**:`,"```json",JSON.stringify(i,null,2),"```",""]);return e.length?["<details>","<summary><strong>Feature Flags</strong></summary>","",...e,"</details>"]:[]}function QDe(t){var s;const e="https://github.com/frappe/books/issues/new?labels=bug",n=["<h2>Description</h2>","Add some description...","","<h2>Steps to Reproduce</h2>","Add steps to reproduce the error...","","<h2>Info</h2>",""];t&&n.push(`**Error**: _${t.name}: ${t.message}_`,""),t!=null&&t.stack&&n.push("**Stack**:","```",t.stack,"```",""),n.push(`**Version**: \`${N.store.appVersion}\``),n.push(`**Platform**: \`${N.store.platform}\``),n.push(`**Path**: \`${Qr.currentRoute.value.fullPath}\``),n.push(`**Language**: \`${N.config.get("language")??"-"}\``),(s=N.singles.SystemSettings)!=null&&s.countryCode&&n.push(`**Country**: \`${N.singles.SystemSettings.countryCode}\``),n.push("",...EDe());const i=encodeURIComponent(n.join(`
`));return`${e}&body=${i}`}function ox(t){const e=QDe(t);ipc.openExternalUrl(e)}function NDe(t){const e=t.name;return e?e==="BaseError"?b`Error`:e==="ValidationError"?b`Validation Error`:e==="NotFoundError"?b`Not Found`:e==="ForbiddenError"?b`Forbidden Error`:e==="DuplicateEntryError"?b`Duplicate Entry`:e==="LinkValidationError"?b`Link Validation Error`:e==="MandatoryError"?b`Mandatory Error`:e==="DatabaseError"?b`Database Error`:e==="CannotCommitError"?b`Cannot Commit Error`:e==="NotImplemented"?b`Error`:e==="ToDebugError"?b`Error`:b`Error`:b`Error`}async function LDe(t){await FDe(t)}async function FDe(t){const e={GST:[28,18,12,6,5,3,.25,0],IGST:[28,18,12,6,5,3,.25,0],"Exempt-GST":[0],"Exempt-IGST":[0]};for(const n of Object.keys(e))for(const i of e[n]){const s=`${n}-${i}`,r=BDe(n,i);await t.doc.getNewDoc("Tax",{name:s,details:r}).sync()}}function BDe(t,e){return t==="GST"?[{account:"CGST",rate:e/2},{account:"SGST",rate:e/2}]:[{account:t.toString().split("-")[0],rate:e}]}async function VDe(t,e){t==="India"&&await LDe(e)}const G0=class G0 extends ze{constructor(){super(...arguments),this.required={parentAccount:()=>{var e,n;return!!((n=(e=this.fyo.singles)==null?void 0:e.AccountingSettings)!=null&&n.setupComplete)}},this.formulas={rootType:{formula:async()=>{if(this.parentAccount)return await this.fyo.getValue(A.Account,this.parentAccount,"rootType")}}},this.readOnly={rootType:()=>this.inserted,parentAccount:()=>this.inserted,accountType:()=>!!this.accountType&&this.inserted,isGroup:()=>this.inserted}}get isDebit(){return this.rootType===nn.Asset||this.rootType===nn.Expense}get isCredit(){return!this.isDebit}async beforeSync(){if(this.accountType||!this.parentAccount)return;const e=await this.fyo.db.get("Account",this.parentAccount);this.accountType=e.accountType}static getListViewSettings(){return{columns:["name","rootType","isGroup","parentAccount"]}}static getTreeSettings(e){return{parentField:"parentAccount",async getRootLabel(){return(await e.doc.getDoc("AccountingSettings")).companyName}}}};G0.defaults={lft:()=>0,rgt:()=>0},G0.filters={parentAccount:e=>{const n={isGroup:!0};return e!=null&&e.rootType&&(n.rootType=e.rootType),n}};let rS=G0;class jDe extends ze{async revert(){if(this.reverted)return;await this.set("reverted",!0);const e=this.fyo.doc.getNewDoc(A.AccountingLedgerEntry,{account:this.account,party:this.party,date:new Date,referenceType:this.referenceType,referenceName:this.referenceName,debit:this.credit,credit:this.debit,reverted:!0,reverts:this.name});await this.sync(),await e.sync()}static getListViewSettings(){return{columns:["date","account","party","debit","credit","referenceName"]}}}const U0=class U0 extends ze{constructor(){super(...arguments),this.validations={email:P1},this.readOnly={enableDiscounting:()=>!!this.enableDiscounting,enableInventory:()=>!!this.enableInventory,enableLead:()=>!!this.enableLead,enableERPNextSync:()=>!!this.enableERPNextSync,enableInvoiceReturns:()=>!!this.enableInvoiceReturns,enableLoyaltyProgram:()=>!!this.enableLoyaltyProgram,enablePointOfSaleWithOutInventory:()=>!!this.enablePointOfSaleWithOutInventory,enableitemGroup:()=>!!this.enableitemGroup},this.hidden={discountAccount:()=>!this.enableDiscounting,gstin:()=>{var e;return((e=this.fyo.singles.SystemSettings)==null?void 0:e.countryCode)!=="in"},enablePricingRule:()=>{var e;return!((e=this.fyo.singles.AccountingSettings)!=null&&e.enableDiscounting)},enableCouponCode:()=>{var e;return!((e=this.fyo.singles.AccountingSettings)!=null&&e.enablePricingRule)}}}async change(e){const n=e.changed==="enableDiscounting"&&this.enableDiscounting,i=!this.discountAccount;if(n&&i&&await QQ(this.fyo),e.changed=="enablePointOfSaleWithOutInventory"&&this.enablePointOfSaleWithOutInventory){const s=await this.fyo.doc.getDoc(A.InventorySettings);await s.set("enableBatches",!0),await s.set("enableUomConversions",!0),await s.set("enableSerialNumber",!0),await s.set("enableBarcodes",!0),await s.set("enablePointOfSale",!0),await s.sync()}}};U0.filters={writeOffAccount:()=>({isGroup:!1,rootType:"Expense"}),roundOffAccount:()=>({isGroup:!1,rootType:"Expense"}),discountAccount:()=>({isGroup:!1,rootType:"Income"})},U0.lists={country:()=>Object.keys(Ws())};let oS=U0;var _c;let zDe=(_c=class extends ze{constructor(){super(...arguments),this.formulas={addressDisplay:{formula:()=>[this.addressLine1,this.addressLine2,this.city,this.state,this.country,this.postalCode].filter(Boolean).join(", "),dependsOn:["addressLine1","addressLine2","city","state","country","postalCode"]}}}static getListViewSettings(){return{columns:["name","addressLine1","city","state","country"]}}},_c.lists={state(e){switch(e==null?void 0:e.country){case"India":return Object.values(vl).sort();default:return[]}},country(){return Object.keys(Ws()).sort()}},_c.emptyMessages={state:e=>e.country?b`Enter State`:b`Enter Country to load States`},_c);const hx=class hx extends ze{constructor(){super(...arguments),this.uomConversions=[],this.formulas={incomeAccount:{formula:async()=>{let e="Service";return this.itemType==="Product"&&(e="Sales"),await this.fyo.db.exists("Account",e)?e:""},dependsOn:["itemType"]},expenseAccount:{formula:async()=>{var n;if(this.trackItem)return(n=this.fyo.singles.InventorySettings)==null?void 0:n.stockReceivedButNotBilled;const e=await this.fyo.db.getAllRaw("Account",{filters:{accountType:ln["Cost of Goods Sold"]}});return e.length===0?"":e[0].name},dependsOn:["itemType","trackItem"]},hsnCode:{formula:async()=>{if(!this.itemGroup)return"";const e=await this.fyo.doc.getDoc("ItemGroup",this.itemGroup);return e==null?void 0:e.hsnCode},dependsOn:["itemGroup"]}},this.validations={barcode:e=>{if(e&&!e.match(/^\d{12}$/))throw new ie(this.fyo.t`Barcode must be exactly 12 digits.`)},rate:e=>{if(e.isNegative())throw new ie(this.fyo.t`Rate can't be negative.`)},hsnCode:e=>{if(e&&!e.match(/^\d{4,8}$/))throw new ie(this.fyo.t`Invalid HSN Code.`)},serialNumberSeries:e=>{if(!e)return;const n=e.trim();if(/[/\=\?\&\%]/.test(n))throw new ie(this.fyo.t`Serial Number Series cannot contain the following characters: /, ?, &, =, %`)},batchSeries:e=>{if(!e)return;const n=e.trim();if(/[/\=\?\&\%]/.test(n))throw new ie(this.fyo.t`Batch Series cannot contain the following characters: /, ?, &, =, %`)}},this.hidden={trackItem:()=>{var e;return!((e=this.fyo.singles.AccountingSettings)!=null&&e.enableInventory)||this.itemType!=="Product"||this.inserted&&!this.trackItem},barcode:()=>{var e;return!((e=this.fyo.singles.InventorySettings)!=null&&e.enableBarcodes)},hasBatch:()=>{var e;return!((e=this.fyo.singles.InventorySettings)!=null&&e.enableBatches)},hasSerialNumber:()=>{var e;return!((e=this.fyo.singles.InventorySettings)!=null&&e.enableSerialNumber&&this.trackItem)},serialNumberSeries:()=>!this.hasSerialNumber,batchSeries:()=>!this.hasBatch,uomConversions:()=>{var e;return!((e=this.fyo.singles.InventorySettings)!=null&&e.enableUomConversions)},itemGroup:()=>{var e;return!((e=this.fyo.singles.AccountingSettings)!=null&&e.enableitemGroup)}},this.readOnly={unit:()=>this.inserted,itemType:()=>this.inserted,trackItem:()=>this.inserted,hasBatch:()=>this.inserted,hasSerialNumber:()=>this.inserted}}async beforeSync(){await super.beforeSync();const e=new Map;if(this.uomConversions.forEach(n=>{n.conversionFactor>0&&e.set(n.uom,n)}),this.uomConversions=Array.from(e.values()),this.serialNumberSeries&&this.hasSerialNumber){const n=this.serialNumberSeries.trim();n&&!n.endsWith("-")&&(this.serialNumberSeries=n+"-")}if(this.batchSeries&&this.hasBatch){const n=this.batchSeries.trim();n&&!n.endsWith("-")&&(this.batchSeries=n+"-")}}async afterSync(){var e,n;if(await super.afterSync(),this.hasSerialNumber&&this.serialNumberSeries){const i=(e=this.serialNumberSeries)==null?void 0:e.trim();if(!i)return;await this.fyo.db.exists("SerialNumberSeries",i)||await this.fyo.doc.getNewDoc("SerialNumberSeries",{name:i,start:1001,padZeros:4,current:1001}).sync()}if(this.hasBatch&&this.batchSeries){const i=(n=this.batchSeries)==null?void 0:n.trim();if(!i)return;await this.fyo.db.exists("BatchSeries",i)||await this.fyo.doc.getNewDoc("BatchSeries",{name:i,start:1001,padZeros:4,current:1001}).sync()}}static getActions(e){return[{group:e.t`Create`,label:e.t`Sales Invoice`,condition:n=>!n.notInserted&&n.for!=="Purchases",action:async(n,i)=>{const s=e.doc.getNewDoc("SalesInvoice");await s.append("items",{item:n.name,rate:n.rate,tax:n.tax}),await i.push(`/edit/SalesInvoice/${s.name}`)}},{group:e.t`Create`,label:e.t`Purchase Invoice`,condition:n=>!n.notInserted&&n.for!=="Sales",action:async(n,i)=>{const s=e.doc.getNewDoc("PurchaseInvoice");await s.append("items",{item:n.name,rate:n.rate,tax:n.tax}),await i.push(`/edit/PurchaseInvoice/${s.name}`)}}]}static getListViewSettings(){return{columns:["name","unit","tax","rate"]}}};hx.filters={incomeAccount:()=>({isGroup:!1,rootType:nn.Income}),expenseAccount:e=>({isGroup:!1,rootType:e.trackItem?nn.Liability:nn.Expense})};let aS=hx;const H0=class H0 extends Mp{constructor(){super(...arguments),this.hidden={referenceNumber:()=>!(this.referenceNumber||!(this.isSubmitted||this.isCancelled)),referenceDate:()=>!(this.referenceDate||!(this.isSubmitted||this.isCancelled)),userRemark:()=>!(this.userRemark||!(this.isSubmitted||this.isCancelled)),attachment:()=>!(this.attachment||!(this.isSubmitted||this.isCancelled))}}async getPosting(){const e=new Ip(this,this.fyo);for(const n of this.accounts??[]){const i=n.debit,s=n.credit,r=n.account;i.isZero()?s.isZero()||await e.credit(r,s):await e.debit(r,i)}return e}static getActions(e){return[Pd(e)]}static getListViewSettings(){return{columns:["name",{label:b`Status`,fieldname:"status",fieldtype:"Select",render(e){const n=E1(e),i=_1[n]??"gray",s=MC(n);return{template:`<Badge class="text-xs" color="${i}">${s}</Badge>`}}},"date","entryType","referenceNumber"]}}};H0.defaults={numberSeries:e=>Q1(e.schemaName,e.fyo),date:()=>new Date},H0.filters={numberSeries:()=>({referenceType:"JournalEntry"})};let lS=H0;const fx=class fx extends ze{constructor(){super(...arguments),this.formulas={debit:{formula:()=>this.getAutoDebitCredit("debit")},credit:{formula:()=>this.getAutoDebitCredit("credit")}}}getAutoDebitCredit(e){if(!this.get(e).isZero())return;const i=e==="debit"?"credit":"debit";if(!this.get(i).isZero())return this.fyo.pesa(0);const r=this.parentdoc.getSum("accounts",e,!1),o=this.parentdoc.getSum("accounts",i,!1);if(r.lt(o))return o.sub(r)}};fx.filters={account:()=>({isGroup:!1})};let cS=fx;class ZDe extends ze{constructor(){super(...arguments),this.hidden={}}}class qDe extends ze{static getListViewSettings(){return{columns:["loyaltyProgram","customer","purchaseAmount","loyaltyPoints"]}}}class XDe extends ze{}class WDe extends ze{constructor(){super(...arguments),this.validations={email:P1,mobile:h7}}createCustomer(){return this.fyo.doc.getNewDoc(A.Party,{...this.getValidDict(),fromLead:this.name,phone:this.mobile,role:"Customer"})}createSalesQuote(){const e={party:this.name,referenceType:A.Lead};return this.fyo.doc.getNewDoc(A.SalesQuote,e)}static getActions(e){return nse(e)}static getListViewSettings(){return{columns:["name",ase(),"email","mobile"]}}}class GDe extends kd{constructor(){super(...arguments),this.validations={coupons:async e=>{e&&await eM(this,e)}}}}const px=class px extends ze{constructor(){super(...arguments),this.formulas={name:{formula:()=>{var e;return(e=this.couponName)==null?void 0:e.replace(/\s+/g,"").toUpperCase().slice(0,8)},dependsOn:["couponName"]}},this.validations={minAmount:async e=>{if(!e||!this.maxAmount||!this.pricingRule)return;const[n]=await this.pricingRuleData();if((n==null?void 0:n.minAmount).isZero()&&n.maxAmount.isZero())return;const{minAmount:i}=n;if(!(e.isZero()&&this.maxAmount.isZero())){if(e.lt(i))throw new ie(b`Minimum Amount should be greather than the Pricing Rule's Minimum Amount.`);if(e.gte(this.maxAmount))throw new ie(b`Minimum Amount should be less than the Maximum Amount.`)}},maxAmount:async e=>{if(!this.minAmount||!e||!this.pricingRule)return;const[n]=await this.pricingRuleData();if((n==null?void 0:n.minAmount).isZero()&&n.maxAmount.isZero())return;const{maxAmount:i}=n;if(!(this.minAmount.isZero()&&e.isZero())){if(e.gt(i))throw new ie(b`Maximum Amount should be lesser than Pricing Rule's Maximum Amount`);if(e.lte(this.minAmount))throw new ie(b`Maximum Amount should be greater than the Minimum Amount.`)}},validFrom:async e=>{if(!e||!this.validTo||!this.pricingRule)return;const[n]=await this.pricingRuleData();if(!(n!=null&&n.validFrom)&&!n.validTo)return;const{validFrom:i}=n;if(i&&e.toISOString()<i.toISOString())throw new ie(b`Valid From Date should be greather than Pricing Rule's Valid From Date.`);if(e.toISOString()>=this.validTo.toISOString())throw new ie(b`Valid From Date should be less than Valid To Date.`)},validTo:async e=>{if(!this.validFrom||!e||!this.pricingRule)return;const[n]=await this.pricingRuleData();if(!(n!=null&&n.validFrom)&&!n.validTo)return;const{validTo:i}=n;if(i&&e.toISOString()>i.toISOString())throw new ie(b`Valid To Date should be lesser than Pricing Rule's Valid To Date.`);if(e.toISOString()<=this.validFrom.toISOString())throw new ie(b`Valid To Date should be greater than Valid From Date.`)}}}removeUnusedCoupons(e,n){if(!e.length){n.coupons=[];return}n.coupons=n.coupons.filter(i=>e.find(s=>{var r;return(r=i==null?void 0:i.coupons)==null?void 0:r.includes(s==null?void 0:s.coupon)}))}async pricingRuleData(){return await this.fyo.db.getAll(A.PricingRule,{fields:["minAmount","maxAmount","validFrom","validTo"],filters:{name:this.pricingRule}})}static getListViewSettings(){return{columns:["name","couponName","pricingRule","maximumUse","used"]}}};px.filters={pricingRule:()=>({isCouponCodeBased:!0})};let uS=px;const Y0=class Y0 extends Mp{constructor(){super(...arguments),this.formulas={account:{formula:async()=>{var i,s,r;const e=await this._getAccountsMap();return this.paymentType==="Receive"?await this._getReferenceAccount()??((i=e[ln.Receivable])==null?void 0:i[0])??null:(await this.paymentMethodDoc()).type==="Cash"?((s=e[ln.Cash])==null?void 0:s[0])??null:((r=e[ln.Bank])==null?void 0:r[0])??null},dependsOn:["paymentMethod","paymentType","party"]},paymentAccount:{formula:async()=>{var i,s,r;const e=await this._getAccountsMap();if(this.paymentType==="Pay")return await this._getReferenceAccount()??((i=e[ln.Payable])==null?void 0:i[0])??null;const n=await this.paymentMethodDoc();return n.account?n.get("account"):n.type==="Cash"?((s=e[ln.Cash])==null?void 0:s[0])??null:((r=e[ln.Bank])==null?void 0:r[0])??null},dependsOn:["paymentMethod","paymentType","party"]},paymentType:{formula:async()=>{var r;if(!this.party)return;const e=(r=this==null?void 0:this.for)==null?void 0:r[0],n=await(e==null?void 0:e.loadAndGetLink("referenceName")),i=await this.loadAndGetLink("party"),s=i.outstandingAmount;return i.role===Gu.Supplier?n!=null&&n.isReturn?Zs.Receive:Zs.Pay:i.role===Gu.Customer||i.role===Gu.Both?n!=null&&n.isSales&&n.isReturn?Zs.Pay:Zs.Receive:(s==null?void 0:s.isZero())??!0?this.paymentType:s!=null&&s.isPositive()?Zs.Receive:Zs.Pay}},amount:{formula:()=>this.getSum("for","amount",!1),dependsOn:["for"]},amountPaid:{formula:()=>this.amount.sub(this.writeoff),dependsOn:["amount","writeoff","for"]},referenceType:{formula:()=>this.referenceType||void 0,dependsOn:["for"]},taxes:{formula:async()=>await this.getTaxSummary()}},this.validations={amount:async e=>{var n;if(e.isNegative())throw new ie(this.fyo.t`Payment amount cannot be less than zero.`);if((this.for??[]).length!==0){if(!this.totalAmount)for(const i of this.for??[]){const s=await this.fyo.doc.getDoc(i.referenceType,i.referenceName);this.totalAmount=(n=s.outstandingAmount)==null?void 0:n.abs()}if(e.gt(this.totalAmount))throw this.amount=this.initialAmount,new ie(this.fyo.t`Payment amount cannot exceed ${this.fyo.format(this.totalAmount,"Currency")}.`);if(e.isZero())throw new ie(this.fyo.t`Payment amount cannot be ${this.fyo.format(e,"Currency")}.`)}}},this.hidden={amountPaid:()=>{var e;return((e=this.writeoff)==null?void 0:e.isZero())??!0},attachment:()=>!(this.attachment||!(this.isSubmitted||this.isCancelled)),for:()=>{var e;return!!((this.isSubmitted||this.isCancelled)&&!((e=this.for)!=null&&e.length))},taxes:()=>{var e;return!((e=this.taxes)!=null&&e.length)}}}async paymentMethodDoc(){return await this.loadAndGetLink("paymentMethod")}async change({changed:e}){e==="for"&&(this.updateAmountOnReferenceUpdate(),await this.updateDetailsOnReferenceUpdate()),e==="amount"&&this.updateReferenceOnAmountUpdate()}async updateDetailsOnReferenceUpdate(){const e=this.for??[],{referenceType:n,referenceName:i}=e[0]??{};if(e.length!==1||this.party||this.paymentType||!i||!n)return;const s=n,r=await this.fyo.doc.getDoc(s,i);let o;r.isSales?o="Receive":o="Pay",this.party=r.party,this.paymentType=o}updateAmountOnReferenceUpdate(){this.amount=this.fyo.pesa(0);for(const e of this.for??[])this.amount=this.amount.add(e.amount)}updateReferenceOnAmountUpdate(){const e=this.for??[];e.length===1&&(e[0].amount=this.amount)}async validate(){await super.validate(),!this.submitted&&(await this.validateFor(),this.validateAccounts(),this.validateTotalReferenceAmount(),await this.validateReferences(),await this.validateReferencesAreSet())}async validateFor(){var e,n;for(const i of this.for??[]){const s=i.referenceName,r=i.referenceType,o=await this.fyo.doc.getDoc(i.referenceType,i.referenceName);if(s&&r&&!o)throw new ie(b`${r} of type ${((n=(e=this.fyo.schemaMap)==null?void 0:e[r])==null?void 0:n.label)??r} does not exist`);if(o&&(o==null?void 0:o.party)!==this.party)throw new ie(b`${o.name} party ${o.party} is different from ${this.party}`)}}validateAccounts(){if(!(this.paymentAccount!==this.account||!this.account))throw new this.fyo.errors.ValidationError(b`To Account and From Account can't be the same: ${this.account}`)}validateTotalReferenceAmount(){const e=this.for??[];if(e.length===0)return;const n=e.map(({amount:o})=>o).reduce((o,a)=>o.add(a),this.fyo.pesa(0));if(this.amount.add(this.writeoff??0).gte(n))return;const i=this.fyo.format(this.writeoff,"Currency"),s=this.fyo.format(this.amount,"Currency"),r=this.fyo.format(n,"Currency");throw this.writeoff.gt(0)?new ie(this.fyo.t`Amount: ${s} and writeoff: ${i} 
          is less than the total amount allocated to 
          references: ${r}.`):new ie(this.fyo.t`Amount: ${s} is less than the total
        amount allocated to references: ${r}.`)}async validateWriteOffAccount(){if(this.writeoff.isZero())return;const e=this.fyo.singles.AccountingSettings.writeOffAccount;if(!e)throw new Ea(b`Write Off Account not set.
          Please set Write Off Account in General Settings`,!1);if(!await this.fyo.db.exists(A.Account,e))throw new Ea(b`Write Off Account ${e} does not exist.
          Please set Write Off Account in General Settings`,!1)}async validateReferencesAreSet(){if((await this.paymentMethodDoc()).type==="Bank"){if(!this.clearanceDate)throw new ie(b`Clearance Date not set.`);if(!this.referenceId)throw new ie(b`Reference Id not set.`)}}async getTaxSummary(){var s,r,o;const e={};for(const a of this.for??[]){const l=a.referenceName,c=a.referenceType,u=await this.fyo.doc.getDoc(a.referenceType,a.referenceName);if(l&&c&&!u)throw new ie(b`${c} of type ${((r=(s=this.fyo.schemaMap)==null?void 0:s[c])==null?void 0:r.label)??c} does not exist`);if(u)for(const{details:h,taxAmount:p,exchangeRate:m}of await u.getTaxItems()){const{account:y,payment_account:O}=h;O&&(e[O]??(e[O]={}),(o=e[O])[y]??(o[y]={account:O,from_account:y,rate:h.rate,amount:this.fyo.pesa(0)}),e[O][y].amount=e[O][y].amount.add(p.mul(m??1)))}}const n=[];let i=0;for(const a in e)for(const l in e[a]){const c=e[a][l];c.amount.isZero()||(n.push({...c,idx:i}),i+=1)}return n}async getPosting(){await this.validateWriteOffAccount();const e=new Ip(this,this.fyo),n=this.paymentAccount,i=this.account,s=this.amount;if(await e.debit(n,s),await e.credit(i,s),this.taxes){if(this.paymentType==="Receive")for(const r of this.taxes)await e.debit(r.from_account,r.amount),await e.credit(r.account,r.amount);else if(this.paymentType==="Pay")for(const r of this.taxes)await e.credit(r.from_account,r.amount),await e.debit(r.account,r.amount)}return await this.applyWriteOffPosting(e),e}async applyWriteOffPosting(e){const n=this.writeoff;if(n.isZero())return e;const i=this.account,s=this.paymentAccount,r=this.fyo.singles.AccountingSettings.writeOffAccount;this.paymentType==="Pay"?(await e.credit(s,n),await e.debit(r,n)):(await e.debit(i,n),await e.credit(r,n))}async validateReferences(){const e=this.for??[];if(e.length!==0){for(const n of e)this.validateReferenceType(n);await this.validateReferenceOutstanding()}}validateReferenceType(e){const n=e.referenceType;if(![A.SalesInvoice,A.PurchaseInvoice].includes(n))throw new ie(b`Please select a valid reference type.`)}async validateReferenceOutstanding(){var s;let e=this.fyo.pesa(0);for(const r of this.for??[]){const o=await this.fyo.doc.getDoc(r.referenceType,r.referenceName);e=e.add(((s=o.outstandingAmount)==null?void 0:s.abs())??0)}const n=this.amount;if(n.gt(0)&&n.lte(e))return;let i=this.fyo.t`Payment amount: ${this.fyo.format(this.amount,"Currency")} should be less than Outstanding amount: ${this.fyo.format(e,"Currency")}.`;if(n.lte(0)){const r=this.fyo.format(this.amount,"Currency");i=this.fyo.t`Payment amount: ${r} should be greater than 0.`}throw new ie(i)}async afterSubmit(){await super.afterSubmit(),await this.updateReferenceDocOutstanding(),await this.updatePartyOutstanding()}async updateReferenceDocOutstanding(){for(const e of this.for??[]){const n=await this.fyo.doc.getDoc(e.referenceType,e.referenceName),i=n.outstandingAmount,r=n.isReturn?i.add(e.amount):i.sub(e.amount);await n.setAndSync({outstandingAmount:r})}}async beforeSync(){var e,n;await super.beforeSync();for(const i of this.for??[])if(!((e=this.fyo.singles.AccountingSettings)!=null&&e.enablePartialPayment)){const s=this.writeoff.isZero()?this.amount:this.amountPaid,r=this.totalAmount;if(s.lt(r)&&(n=this.writeoff)!=null&&n.isZero())throw this.amount=r,i.amountPaid=this.fyo.pesa(0),new ie(this.fyo.t`Enable Partial payment to pay partial amount`)}}async afterCancel(){await super.afterCancel(),await this.revertOutstandingAmount()}async revertOutstandingAmount(){await this._revertReferenceOutstanding(),await this.updatePartyOutstanding()}async _revertReferenceOutstanding(){for(const e of this.for??[]){const n=await this.fyo.doc.getDoc(e.referenceType,e.referenceName),s=n.isReturn?n.outstandingAmount.sub(e.amount):n.outstandingAmount.add(e.amount);await n.setAndSync({outstandingAmount:s})}}async updatePartyOutstanding(){await(await this.fyo.doc.getDoc(A.Party,this.party)).updateOutstandingAmount()}async getTotalTax(){return(await this.getTaxSummary()).map(({amount:n})=>n).reduce((n,i)=>n.add(i),this.fyo.pesa(0))}async _getAccountsMap(){if(this._accountsMap)return this._accountsMap;const e=await this.fyo.db.getAll(A.Account,{fields:["name","accountType"],filters:{accountType:["in",[ln.Bank,ln.Cash,ln.Payable,ln.Receivable]]}});return this._accountsMap=e.reduce((n,i)=>{var s;return n[s=i.accountType]??(n[s]=[]),n[i.accountType].push(i.name),n},{})}async _getReferenceAccount(){const e=await this._getAccountFromParty();return e||await this._getAccountFromFor()}async _getAccountFromParty(){const e=await this.loadAndGetLink("party");return!e||e.role==="Both"?null:e.defaultAccount??null}async _getAccountFromFor(){var i,s;const e=(i=this==null?void 0:this.for)==null?void 0:i[0];if(!e)return null;const n=await e.loadAndGetLink("referenceName");return n&&n.schema.name===A.SalesInvoice&&n.isReturned?(s=(await this._getAccountsMap())[ln.Cash])==null?void 0:s[0]:(n==null?void 0:n.account)??null}static getActions(e){return[Pd(e)]}static getListViewSettings(){return{columns:["name",q9(),"party","date","amount"]}}};Y0.defaults={numberSeries:e=>Q1(e.schemaName,e.fyo),date:()=>new Date},Y0.filters={party:e=>{const n=e.paymentType;return n==="Pay"?{role:["in",["Supplier","Both"]]}:n==="Receive"?{role:["in",["Customer","Both"]]}:{}},numberSeries:()=>({referenceType:"Payment"}),account:e=>{const n=e.paymentType,i=e.paymentMethod;return n==="Receive"?{accountType:"Receivable",isGroup:!1}:i.name==="Cash"?{accountType:"Cash",isGroup:!1}:{accountType:["in",["Bank","Cash"]],isGroup:!1}},paymentAccount:e=>{const n=e.paymentType,i=e.paymentMethod;return n==="Pay"?{accountType:"Payable",isGroup:!1}:i.name==="Cash"?{accountType:"Cash",isGroup:!1}:{accountType:["in",["Bank","Cash"]],isGroup:!1}}};let dS=Y0;class UDe extends ze{static getListViewSettings(){return{columns:["name","type"]}}}const mx=class mx extends ze{constructor(){super(...arguments),this.formulas={referenceType:{formula:async()=>{var n;if(this.referenceType)return;const e=await((n=this.parentdoc)==null?void 0:n.loadAndGetLink("party"));return e&&e.role===Gu.Supplier?A.PurchaseInvoice:A.SalesInvoice}},referenceName:{formula:async()=>!this.referenceName||!this.referenceType?this.referenceName:await this.fyo.db.exists(this.referenceType,this.referenceName)?this.referenceName:null,dependsOn:["referenceType"]},amount:{formula:async()=>{if(!this.referenceName)return this.fyo.pesa(0);const e=await this.fyo.getValue(this.referenceType,this.referenceName,"outstandingAmount");return e||this.fyo.pesa(0)},dependsOn:["referenceName"]}},this.validations={referenceName:async e=>{var r;if(await this.fyo.db.exists(this.referenceType,e))return;const i=this.referenceType??A.SalesInvoice,s=((r=this.fyo.schemaMap[i])==null?void 0:r.label)??i;throw new Ea(b`${s} ${e} does not exist`,!1)}}}};mx.filters={referenceName:e=>{var r,o;const i={outstandingAmount:["!=","0."+"0".repeat(((r=e.fyo.singles.SystemSettings)==null?void 0:r.internalPrecision)??11)],submitted:!0,cancelled:!1},s=(o=e==null?void 0:e.parentdoc)==null?void 0:o.party;return s?{...i,party:s}:i}};let hS=mx;class HDe extends ze{constructor(){super(...arguments),this.formulas={unit:{formula:async()=>{if(this.item)return await this.fyo.getValue(A.Item,this.item,"unit")},dependsOn:["item"]}}}}class YDe extends ze{constructor(){super(...arguments),this.validations={minQuantity:e=>{if(!(!e||!this.maxQuantity)&&e>this.maxQuantity)throw new ie(b`Minimum Quantity should be less than the Maximum Quantity.`)},maxQuantity:e=>{if(!(!this.minQuantity||!e)&&e<this.minQuantity)throw new ie(b`Maximum Quantity should be greater than the Minimum Quantity.`)},minAmount:e=>{if(!(!e||!this.maxAmount)&&!(e.isZero()||this.maxAmount.isZero())&&e.gte(this.maxAmount))throw new ie(b`Minimum Amount should be less than the Maximum Amount.`)},maxAmount:e=>{if(!(!this.minAmount||!e)&&!(this.minAmount.isZero()||e.isZero())&&e.lte(this.minAmount))throw new ie(b`Maximum Amount should be greater than the Minimum Amount.`)},validFrom:e=>{if(!(!e||!this.validTo)&&e.toISOString()>this.validTo.toISOString())throw new ie(b`Valid From Date should be less than Valid To Date.`)},validTo:e=>{if(!(!this.validFrom||!e)&&e.toISOString()<this.validFrom.toISOString())throw new ie(b`Valid To Date should be greater than Valid From Date.`)}},this.required={priceDiscountType:()=>this.isDiscountTypeIsPriceDiscount},this.hidden={location:()=>{var e;return!((e=this.fyo.singles.AccountingSettings)!=null&&e.enableInventory)},isCouponCodeBased:()=>{var e;return!((e=this.fyo.singles.AccountingSettings)!=null&&e.enableCouponCode)},priceDiscountType:()=>!this.isDiscountTypeIsPriceDiscount,discountRate:()=>!this.isDiscountTypeIsPriceDiscount||this.priceDiscountType!=="rate",discountPercentage:()=>!this.isDiscountTypeIsPriceDiscount||this.priceDiscountType!=="percentage",discountAmount:()=>!this.isDiscountTypeIsPriceDiscount||this.priceDiscountType!=="amount",forPriceList:()=>!this.isDiscountTypeIsPriceDiscount||this.priceDiscountType==="rate",freeItem:()=>this.isDiscountTypeIsPriceDiscount,freeItemQuantity:()=>this.isDiscountTypeIsPriceDiscount,freeItemUnit:()=>this.isDiscountTypeIsPriceDiscount,roundFreeItemQty:()=>this.isDiscountTypeIsPriceDiscount,roundingMethod:()=>this.isDiscountTypeIsPriceDiscount||!this.roundFreeItemQty,isRecursive:()=>this.isDiscountTypeIsPriceDiscount,recurseEvery:()=>this.isDiscountTypeIsPriceDiscount||!this.isRecursive,recurseOver:()=>this.isDiscountTypeIsPriceDiscount||!this.isRecursive}}get isDiscountTypeIsPriceDiscount(){return this.discountType==="Price Discount"}static getListViewSettings(){return{columns:["name","title",Z9(),"discountType"]}}}class KDe extends ze{constructor(){super(...arguments),this.formulas={unit:{formula:()=>{if(this.item)return this.fyo.getValue(A.Item,this.item,"unit")}}}}}class JDe extends ze{constructor(){super(...arguments),this.hidden={termsAndConditions:()=>!this.displaytermsandconditions}}}class e7e extends kd{}const gx=class gx extends za{async getPosting(){return null}async getInvoice(){var a;if(!this.isSubmitted)return null;const e=A.SalesInvoice,n=this.fyo.singles.Defaults??{},i=n.salesInvoiceTerms??"",s=n.salesInvoiceNumberSeries??void 0,r={...this.getValidDict(!1,!0),date:new Date().toISOString(),terms:i,numberSeries:s,quote:this.name,items:[],submitted:!1},o=this.fyo.doc.getNewDoc(e,r);for(const l of this.items??[])await o.append("items",l.getValidDict(!1,!0));return(a=o.items)!=null&&a.length?o:null}async afterSubmit(){await super.afterSubmit(),this.referenceType==A.Lead&&await(await this.loadAndGetLink("party")).setAndSync("status","Quotation")}static getListViewSettings(){return{columns:["name",_p(),"party","date","baseGrandTotal","outstandingAmount"]}}static getActions(e){return tse(e,A.SalesQuote)}};gx.filters={numberSeries:e=>({referenceType:e.schemaName})};let fS=gx;class t7e extends kd{}class n7e extends ze{static getListViewSettings(){return{columns:["name","tax","hsnCode"]}}}class i7e extends ze{static getListViewSettings(){return{columns:["name"]}}}class s7e extends ze{constructor(e,n,i){super(e,n,i),this.getCurrencies={},this._setGetCurrencies()}get exchangeRate(){var e;return((e=this.parentdoc)==null?void 0:e.exchangeRate)??1}get currency(){var e;return((e=this.parentdoc)==null?void 0:e.currency)??Ks}_getCurrency(){var e;return this.exchangeRate===1?((e=this.fyo.singles.SystemSettings)==null?void 0:e.currency)??Ks:this.currency}_setGetCurrencies(){var i;const e=this.schema.fields.filter(({fieldtype:s})=>s===Ie.Currency),n=this._getCurrency.bind(this);for(const{fieldname:s}of e)(i=this.getCurrencies)[s]??(i[s]=n)}}class r7e extends ze{static getListViewSettings(){return{columns:["name","expiryDate","manufactureDate"]}}}const yx=class yx extends ze{constructor(){super(...arguments),this.readOnly={enableBarcodes:()=>!!this.enableBarcodes,enableBatches:()=>!!this.enableBatches,enableSerialNumber:()=>!!this.enableSerialNumber,enableUomConversions:()=>!!this.enableUomConversions,enableStockReturns:()=>!!this.enableStockReturns,enablePointOfSale:()=>{var e;return!!((e=this.fyo.singles.POSSettings)!=null&&e.isShiftOpen)}}}};yx.filters={stockInHand:()=>({isGroup:!1,accountType:ln.Stock}),stockReceivedButNotBilled:()=>({isGroup:!1,accountType:ln["Stock Received But Not Billed"]}),costOfGoodsSold:()=>({isGroup:!1,accountType:ln["Cost of Goods Sold"]})};let pS=yx;class o7e extends ze{}class a7e extends xd{static getListViewSettings(){return{columns:["name",_p(),"party","date","grandTotal"]}}static getActions(e){return V9(e,A.PurchaseReceipt)}}class DQ extends ze{}const Ox=class Ox extends DQ{constructor(){super(...arguments),this.formulas={description:{formula:async()=>await this.fyo.getValue("Item",this.item,"description"),dependsOn:["item"]},unit:{formula:async()=>await this.fyo.getValue("Item",this.item,"unit"),dependsOn:["item"]},transferUnit:{formula:async e=>e==="quantity"||e==="unit"?this.unit:await this.fyo.getValue("Item",this.item,"unit"),dependsOn:["item","unit"]},transferQuantity:{formula:e=>e==="quantity"||this.unit===this.transferUnit?this.quantity:this.transferQuantity,dependsOn:["item","quantity"]},quantity:{formula:async e=>{if(!this.item)return this.quantity;const i=(await this.fyo.doc.getDoc(A.Item,this.item)).getLink("uom");let s=this.quantity??1;return this.isReturn&&s>0&&(s*=-1),!this.isReturn&&s<0&&(s*=-1),e==="transferQuantity"&&(s=this.transferQuantity*this.unitConversionFactor),i!=null&&i.isWhole?Math.round(s):kn(s)},dependsOn:["quantity","transferQuantity","transferUnit","unitConversionFactor","isReturn"]},unitConversionFactor:{formula:async()=>{var n;if(this.unit===this.transferUnit)return 1;const e=await this.fyo.db.getAll(A.UOMConversionItem,{fields:["conversionFactor"],filters:{parent:this.item}});return kn(((n=e[0])==null?void 0:n.conversionFactor)??1)},dependsOn:["transferUnit"]},hsnCode:{formula:async()=>await this.fyo.getValue("Item",this.item,"hsnCode"),dependsOn:["item"]},amount:{formula:()=>{var e;return((e=this.rate)==null?void 0:e.mul(this.quantity??0))??this.fyo.pesa(0)},dependsOn:["rate","quantity"]},itemDiscountAmount:{formula:async()=>await this.getItemDiscountAmount(),dependsOn:["items"]},itemDiscountPercent:{formula:()=>this.getItemDiscountPercent(),dependsOn:["items"]},rate:{formula:async()=>{var n;const e=await this.fyo.getValue("Item",this.item,"rate");return!(e!=null&&e.float)&&((n=this.rate)!=null&&n.float)?this.rate:e??this.fyo.pesa(0)},dependsOn:["item"]},account:{formula:()=>{let e="expenseAccount";return this.isSales&&(e="incomeAccount"),this.fyo.getValue("Item",this.item,e)},dependsOn:["item"]},location:{formula:()=>{var n;if(this.location)return;const e=(n=this.fyo.singles.InventorySettings)==null?void 0:n.defaultLocation;if(e&&!this.location)return e}},serialNumber:{formula:async()=>{var i,s,r,o;if(this.serialNumber)return this.serialNumber;if(!this.item||!((i=this.parentdoc)!=null&&i.backReference)||!await this.fyo.getValue(A.Item,this.item,"hasSerialNumber"))return;const n=Math.abs(this.quantity??0);if(!(n<=0))try{if(!this.isSales&&((s=this.parentdoc)==null?void 0:s.schemaName)===A.PurchaseReceipt){const a=await I1(this.fyo,this.item,n);if(a)return a}if(this.isSales&&((r=this.parentdoc)==null?void 0:r.schemaName)===A.Shipment){const a=await this.fyo.doc.getDoc(A.SalesInvoice,this.parentdoc.backReference),l=(o=a==null?void 0:a.items)==null?void 0:o.find(u=>u.item===this.item);if(l!=null&&l.serialNumber)return l.serialNumber;const c=await _u(this.fyo,this.item,n);if(c)return c}}catch{}},dependsOn:["item","quantity"]}},this.validations={transferUnit:async e=>{if(!this.item)return;if((await this.fyo.db.getAll(A.UOMConversionItem,{fields:["parent"],filters:{uom:e,parent:this.item}})).length<1)throw new ie(this.fyo.t`Transfer Unit ${e} is not applicable for Item ${this.item}`)}},this.hidden={itemDiscountAmount:()=>{var e;return!(this.itemDiscountAmount&&!((e=this.itemDiscountAmount)!=null&&e.isZero()))},itemDiscountPercent:()=>!this.itemDiscountPercent,batch:()=>{var e;return!((e=this.fyo.singles.InventorySettings)!=null&&e.enableBatches)},serialNumber:()=>{var e;return!((e=this.fyo.singles.InventorySettings)!=null&&e.enableSerialNumber)},transferUnit:()=>{var e;return!((e=this.fyo.singles.InventorySettings)!=null&&e.enableUomConversions)},transferQuantity:()=>{var e;return!((e=this.fyo.singles.InventorySettings)!=null&&e.enableUomConversions)},unitConversionFactor:()=>{var e;return!((e=this.fyo.singles.InventorySettings)!=null&&e.enableUomConversions)}}}get isSales(){return this.schemaName===A.ShipmentItem}get isReturn(){var e;return!!((e=this.parentdoc)!=null&&e.isReturn)}async getItemDiscountAmount(){var i,s,r;const e=await this.fyo.doc.getDoc(this.parentSchemaName==A.Shipment?A.SalesInvoice:A.PurchaseInvoice,(i=this.parentdoc)==null?void 0:i.backReference);return(r=(s=e==null?void 0:e.items)==null?void 0:s.find(o=>o.item===this.item))==null?void 0:r.itemDiscountAmount}async getItemDiscountPercent(){var i,s,r;const e=await this.fyo.doc.getDoc(this.parentSchemaName==A.Shipment?A.SalesInvoice:A.PurchaseInvoice,(i=this.parentdoc)==null?void 0:i.backReference);return(r=(s=e==null?void 0:e.items)==null?void 0:s.find(o=>o.item===this.item))==null?void 0:r.itemDiscountPercent}};Ox.filters={item:e=>{let n="Sales";return e.isSales&&(n="Purchases"),{for:["not in",[n]],trackItem:!0}}};let N0=Ox;class l7e extends N0{}class c7e extends xd{static getListViewSettings(){return{columns:["name",_p(),"party","date","grandTotal"]}}static getActions(e){return V9(e,A.Shipment)}}class u7e extends N0{}class d7e extends ze{static getListViewSettings(){return{columns:["date","item","location","rate","quantity","referenceName"]}}}const K0=class K0 extends DC{constructor(){super(...arguments),this.formulas={amount:{formula:()=>{var e;return(e=this.items)==null?void 0:e.reduce((n,i)=>n.add(i.amount??0),this.fyo.pesa(0))},dependsOn:["items"]}}}get isTransactional(){return!1}async getPosting(){return null}async validate(){await super.validate(),this.validateManufacture(),await TC(this),await S9(this),await h7e(this)}async afterSubmit(){await super.afterSubmit(),await Gy(this,!1)}async beforeSubmit(){await super.beforeSubmit();const e=[];for(const n of this.items??[]){if(!n.item||!n.batch)continue;await this.fyo.getValue(A.Item,n.item,"hasBatch")&&(await this.fyo.db.exists(A.Batch,n.batch)||e.push({item:n.item,batch:n.batch}))}for(const{item:n,batch:i}of e)await R1(this.fyo,n,i)}async afterCancel(){await super.afterCancel(),await Gy(this,!0)}validateManufacture(){var i,s;if(this.movementType!==gs.Manufacture)return;const e=((i=this.items)==null?void 0:i.findIndex(r=>r.fromLocation))!==-1,n=((s=this.items)==null?void 0:s.findIndex(r=>r.toLocation))!==-1;if(!e)throw new ie(this.fyo.t`Item with From location not found`);if(!n)throw new ie(this.fyo.t`Item with To location not found`)}static getListViewSettings(e){const n={[gs.MaterialIssue]:e.t`Material Issue`,[gs.MaterialReceipt]:e.t`Material Receipt`,[gs.MaterialTransfer]:e.t`Material Transfer`,[gs.Manufacture]:e.t`Manufacture`};return{columns:["name",q9(),"date",{label:e.t`Movement Type`,fieldname:"movementType",fieldtype:"Select",display(i){return n[i]??""}}]}}_getTransferDetails(){return(this.items??[]).map(e=>({item:e.item,rate:e.rate,quantity:e.quantity,batch:e.batch??void 0,serialNumber:e.serialNumber??void 0,fromLocation:e.fromLocation??void 0,toLocation:e.toLocation??void 0}))}static getActions(e){return[Pd(e,!0)]}async addItem(e){const n=await this.fyo.doc.getDoc(A.Item,e);if(!n)throw new ie(b`Item ${e} not found`);let i=n.defaultBatch??null;this.movementType===gs.MaterialReceipt&&n.hasBatch&&!i&&(i=await x9(this.fyo,e));const s={name:n.name,batch:i};if(s.batch){const r=await this.fyo.doc.getDoc(A.Batch,s.batch);if(r&&r.item!==e)throw new ie(b`Batch ${s.batch} does not belong to Item ${e}`)}return s}};K0.filters={numberSeries:()=>({referenceType:A.StockMovement})},K0.defaults={date:()=>new Date};let mS=K0;async function h7e(t){if(!t.isCancelled)for(const{serialNumber:e,item:n}of C9(t)){if(!await A9(n,e))continue;const s=await t.fyo.doc.getDoc(A.SerialNumber,e);if(!(s instanceof M1))continue;const r=s.status??"Inactive";if(t.movementType==="MaterialReceipt"&&r!=="Inactive")throw new ie(b`Non Inactive Serial Number ${e} cannot be used for Material Receipt`);if(t.movementType==="MaterialIssue"&&r!=="Active")throw new ie(b`Non Active Serial Number ${e} cannot be used for Material Issue`);if(t.movementType==="MaterialTransfer"&&r!=="Active")throw new ie(b`Non Active Serial Number ${e} cannot be used for Material Transfer`);if(n.fromLocation&&r!=="Active")throw new ie(b`Non Active Serial Number ${e} cannot be used as Manufacture raw material`)}}const J0=class J0 extends DQ{constructor(){super(...arguments),this.formulas={rate:{formula:async()=>this.item?await this.fyo.getValue(A.Item,this.item,"rate"):this.rate,dependsOn:["item"]},amount:{formula:()=>this.rate.mul(this.quantity),dependsOn:["item","rate","quantity"]},fromLocation:{formula:()=>{var n;if(this.isReceipt||this.isTransfer||this.isManufacture)return null;const e=(n=this.fyo.singles.InventorySettings)==null?void 0:n.defaultLocation;return e&&!this.fromLocation&&this.isIssue?e:this.toLocation},dependsOn:["movementType"]},toLocation:{formula:()=>{var n;if(this.isIssue||this.isTransfer||this.isManufacture)return null;const e=(n=this.fyo.singles.InventorySettings)==null?void 0:n.defaultLocation;return e&&!this.toLocation&&this.isReceipt?e:this.toLocation},dependsOn:["movementType"]},unit:{formula:async()=>await this.fyo.getValue("Item",this.item,"unit"),dependsOn:["item"]},transferUnit:{formula:async e=>e==="quantity"||e==="unit"?this.unit:await this.fyo.getValue("Item",this.item,"unit"),dependsOn:["item","unit"]},transferQuantity:{formula:e=>e==="quantity"||this.unit===this.transferUnit?this.quantity:this.transferQuantity,dependsOn:["item","quantity"]},quantity:{formula:async e=>{if(!this.item)return this.quantity;const i=(await this.fyo.doc.getDoc(A.Item,this.item)).getLink("uom");let s=this.quantity??1;return e==="transferQuantity"&&(s=this.transferQuantity*this.unitConversionFactor),i!=null&&i.isWhole?Math.round(s):kn(s)},dependsOn:["quantity","transferQuantity","transferUnit","unitConversionFactor"]},unitConversionFactor:{formula:async()=>{var n;if(this.unit===this.transferUnit)return 1;const e=await this.fyo.db.getAll(A.UOMConversionItem,{fields:["conversionFactor"],filters:{parent:this.item}});return kn(((n=e[0])==null?void 0:n.conversionFactor)??1)},dependsOn:["transferUnit"]}},this.validations={fromLocation:e=>{if(this.isManufacture&&e&&this.toLocation)throw new ie(this.fyo.t`Only From or To can be set for Manufacture`)},toLocation:e=>{if(this.isManufacture&&e&&this.fromLocation)throw new ie(this.fyo.t`Only From or To can be set for Manufacture`)},batch:async()=>{if(!this.item||!this.batch)return;const e=await this.fyo.doc.getDoc(A.Batch,this.batch);if(e&&e.item!==this.item)throw new ie(b`Batch ${this.batch} does not belong to Item ${this.item}`)},transferUnit:async e=>{if(!this.item)return;if((await this.fyo.db.getAll(A.UOMConversionItem,{fields:["parent"],filters:{uom:e,parent:this.item}})).length<1)throw new ie(b`Transfer Unit ${e} is not applicable for Item ${this.item}`)}},this.required={fromLocation:()=>this.isIssue||this.isTransfer,toLocation:()=>this.isReceipt||this.isTransfer},this.readOnly={fromLocation:()=>this.isReceipt,toLocation:()=>this.isIssue},this.hidden={batch:()=>{var e;return!((e=this.fyo.singles.InventorySettings)!=null&&e.enableBatches)},serialNumber:()=>{var e;return!((e=this.fyo.singles.InventorySettings)!=null&&e.enableSerialNumber)},transferUnit:()=>{var e;return!((e=this.fyo.singles.InventorySettings)!=null&&e.enableUomConversions)},transferQuantity:()=>{var e;return!((e=this.fyo.singles.InventorySettings)!=null&&e.enableUomConversions)},unitConversionFactor:()=>{var e;return!((e=this.fyo.singles.InventorySettings)!=null&&e.enableUomConversions)}}}get isIssue(){var e;return((e=this.parentdoc)==null?void 0:e.movementType)===gs.MaterialIssue}get isReceipt(){var e;return((e=this.parentdoc)==null?void 0:e.movementType)===gs.MaterialReceipt}get isTransfer(){var e;return((e=this.parentdoc)==null?void 0:e.movementType)===gs.MaterialTransfer}get isManufacture(){var e;return((e=this.parentdoc)==null?void 0:e.movementType)===gs.Manufacture}async validate(){await super.validate(),await this.validateBatchAndItemConsistency()}async validateBatchAndItemConsistency(){if(!this.batch||!this.item)return;const e=await this.fyo.doc.getDoc(A.Batch,this.batch);if(e&&e.item!==this.item)throw new ie(b`Batch ${this.batch} does not belong to Item ${this.item}`)}async change(e){var i,s;await super.change(e);const n=((i=this.parentdoc)==null?void 0:i.movementType)===gs.MaterialReceipt&&this.item&&this.quantity&&this.quantity>0;if(e.changed==="item"){if(await this.set("serialNumber",""),((s=this.parentdoc)==null?void 0:s.movementType)===gs.MaterialReceipt&&this.item&&await this.fyo.getValue(A.Item,this.item,"hasBatch")){const o=await qf(this.fyo,this.item);o&&await this.set("batch",o)}n&&await this.generateAndSetSerialNumbers()}e.changed==="quantity"&&(!this.quantity||this.quantity<=0?await this.set("serialNumber",""):n&&await this.generateAndSetSerialNumbers())}async generateAndSetSerialNumbers(){if(!this.item||!this.quantity)return;const e=await I1(this.fyo,this.item,Math.abs(this.quantity));e&&await this.set("serialNumber",e)}};J0.filters={item:()=>({trackItem:!0}),transferUnit:async e=>{const i=(await e.fyo.db.getAll(A.UOMConversionItem,{fields:["uom"],filters:{parent:e.item}})).map(o=>o.uom),s=await e.fyo.getValue(A.Item,e.item,"unit");return{name:["in",[...i,s].filter(Boolean)]}},batch:async e=>{var l;let n,i=!1;((l=e.parentdoc)==null?void 0:l.movementType)===gs.MaterialReceipt&&(i=!!await e.fyo.getValue(A.Item,e.item,"hasBatch"),i&&(n=await qf(e.fyo,e.item),n&&await e.set("batch",n)));const r=(await e.fyo.db.getAll(A.Batch,{fields:["name"],filters:{item:e.item}})).map(c=>c.name),o=new Set(r);return n&&o.add(n),{name:["in",Array.from(o)]}}},J0.createFilters={item:()=>({trackItem:!0,itemType:"Product"})};let gS=J0;class f7e extends ze{constructor(){super(...arguments),this.formulas={differenceAmount:{formula:()=>this.closingAmount?this.expectedAmount?this.closingAmount.sub(this.expectedAmount):this.fyo.pesa(0):this.fyo.pesa(0)}}}}class MQ extends ze{}class p7e extends MQ{}class m7e extends ze{get openingCashAmount(){var e;return(e=this.parentdoc)==null?void 0:e.openingCashAmount}}class g7e extends MQ{}const bx=class bx extends ze{constructor(){super(...arguments),this.hidden={weightEnabledBarcode:()=>{var e;return!((e=this.fyo.singles.InventorySettings)!=null&&e.enableBarcodes)},checkDigits:()=>{var e;return!((e=this.fyo.singles.InventorySettings)!=null&&e.enableBarcodes)||!this.weightEnabledBarcode},itemCodeDigits:()=>{var e;return!((e=this.fyo.singles.InventorySettings)!=null&&e.enableBarcodes)||!this.weightEnabledBarcode},itemWeightDigits:()=>{var e;return!((e=this.fyo.singles.InventorySettings)!=null&&e.enableBarcodes)||!this.weightEnabledBarcode},itemVisibility:()=>{var e,n;return!((e=this.fyo.singles.AccountingSettings)!=null&&e.enablePointOfSaleWithOutInventory)||!!((n=this.fyo.singles.AccountingSettings)!=null&&n.enableERPNextSync)},itemVisibilityERP:()=>{var e;return!((e=this.fyo.singles.AccountingSettings)!=null&&e.enableERPNextSync)}}}};bx.filters={cashAccount:()=>({rootType:nn.Asset,accountType:ln.Cash,isGroup:!1}),defaultAccount:()=>({isGroup:!1,accountType:ln.Receivable})};let yS=bx;const vx=class vx extends ze{};vx.filters={posPrintTemplate:()=>({type:A.SalesInvoice})};let OS=vx;class y7e extends ze{get openingCashAmount(){if(!this.openingCash)return this.fyo.pesa(0);let e=this.fyo.pesa(0);return this.openingCash.map(n=>{const i=n.denomination??this.fyo.pesa(0),s=n.count??0,r=i.mul(s);e=e.add(r)}),e}get openingTransferAmount(){return this.openingAmounts?this.openingAmounts.filter(n=>n.paymentMethod==="Transfer")[0].amount??this.fyo.pesa(0):this.fyo.pesa(0)}static getListViewSettings(){return{columns:["name","openingDate"]}}}class O7e extends ze{get closingCashAmount(){if(!this.closingCash)return this.fyo.pesa(0);let e=this.fyo.pesa(0);return this.closingCash.map(n=>{const i=n.denomination??this.fyo.pesa(0),s=n.count??0,r=i.mul(s);e=e.add(r)}),e}static getListViewSettings(){return{columns:["name","closingDate"]}}}class b7e extends ze{constructor(){super(...arguments),this.hidden={syncPriceList:()=>{var e;return!((e=this.fyo.singles.AccountingSettings)!=null&&e.enablePriceList)},priceListSyncType:()=>{var e;return!((e=this.fyo.singles.AccountingSettings)!=null&&e.enablePriceList)},syncSerialNumber:()=>{var e;return!((e=this.fyo.singles.InventorySettings)!=null&&e.enableSerialNumber)},serialNumberSyncType:()=>{var e;return!((e=this.fyo.singles.InventorySettings)!=null&&e.enableSerialNumber)},syncBatch:()=>{var e;return!((e=this.fyo.singles.InventorySettings)!=null&&e.enableBatches)},batchSyncType:()=>{var e;return!((e=this.fyo.singles.InventorySettings)!=null&&e.enableBatches)}}}async change(e){if(e.changed==="syncDataFromServer")try{const{showToast:n}=await rn(async()=>{const{showToast:i}=await Promise.resolve().then(()=>Kp);return{showToast:i}},void 0);n({type:"warning",message:"Fetching data from server.",duration:"very_long"}),await yY(this.fyo),ipc.reloadWindow()}catch(n){const i=n instanceof Error?n.message:String(n);try{await this.fyo.doc.getNewDoc(Av.IntegrationErrorLog,{error:i,data:JSON.stringify({instance:this.deviceID,operation:"sync_data_from_server",trigger:"change_event"})}).sync()}catch(s){throw s}}else if(e.changed==="syncDataToServer")try{await f7(this.fyo),ipc.reloadWindow()}catch(n){const i=n instanceof Error?n.message:String(n);try{await this.fyo.doc.getNewDoc(Av.IntegrationErrorLog,{error:i,data:JSON.stringify({instance:this.deviceID,operation:"sync_data_to_server",trigger:"change_event"})}).sync()}catch(s){throw s}}}}class v7e extends ze{constructor(){super(...arguments),this.hidden={name:()=>!0}}static getListViewSettings(){return{columns:["referenceType","documentName"]}}}class w7e extends ze{constructor(){super(...arguments),this.hidden={name:()=>!0}}static getListViewSettings(){return{columns:["referenceType","documentName"]}}}class S7e extends ze{}class C7e extends ze{static getListViewSettings(){return{columns:["item","customer","contact","description","similarProduct"]}}}const A7e={Account:rS,AccountingLedgerEntry:jDe,AccountingSettings:oS,Address:zDe,Batch:r7e,Defaults:Vv,Item:aS,ItemGroup:n7e,ItemEnquiry:C7e,JournalEntry:lS,JournalEntryAccount:cS,Misc:ZDe,Lead:WDe,Party:EM,LoyaltyProgram:QM,LoyaltyPointEntry:qDe,CollectionRulesItems:XDe,CouponCode:uS,Payment:dS,PaymentMethod:UDe,PaymentFor:hS,PrintSettings:JDe,PriceList:N9,PriceListItem:HDe,PricingRule:YDe,PricingRuleItem:KDe,PurchaseInvoice:iM,PurchaseInvoiceItem:e7e,SalesInvoice:EC,SalesInvoiceItem:Rp,AppliedCouponCodes:GDe,SalesQuote:fS,SalesQuoteItem:t7e,SerialNumber:M1,SetupWizard:rM,PrintTemplate:Fd,Tax:i7e,TaxSummary:s7e,InventorySettings:pS,StockMovement:mS,StockMovementItem:gS,StockLedgerEntry:d7e,Location:o7e,Shipment:c7e,ShipmentItem:u7e,PurchaseReceipt:a7e,PurchaseReceiptItem:l7e,ClosingAmounts:f7e,ClosingCash:p7e,OpeningAmounts:m7e,OpeningCash:g7e,POSSettings:yS,POSProfile:OS,POSOpeningShift:y7e,POSClosingShift:O7e,ERPNextSyncSettings:b7e,ERPNextSyncQueue:v7e,FetchFromERPNextQueue:w7e,IntegrationErrorLog:S7e};async function x7e(t){if(t!=="in")return{};const{Address:e}=await rn(async()=>{const{Address:i}=await import("./Address-C3eRXtF2.js");return{Address:i}},[]),{Party:n}=await rn(async()=>{const{Party:i}=await import("./Party-Bjj5Y-wQ.js");return{Party:i}},[]);return{Address:e,Party:n}}async function IQ(t,e,n,i){e?(await k7e(i),n=await i.db.createNewDatabase(t,n)):i.db.isConnected||(n=await i.db.connectToDatabase(t));const s=await x7e(n);await i.initializeAndRegister(A7e,s),await T7e(i),await P7e(i),await $7e(i),await D7e(i),M7e(i),await I7e(i),await R7e(i),await RQ(i)}async function k7e(t){t.db.isConnected&&await t.db.purgeCache()}async function P7e(t){for(const e of Object.values(t.schemaMap))!(e!=null&&e.isSingle)||e.name===A.SetupWizard||await t.doc.getDoc(e.name)}async function T7e(t){const e=Object.values(t.db.schemaMap).filter(r=>r==null?void 0:r.isSingle).map(r=>r.fields).flat().filter(r=>r.fieldtype==="Link"&&r.target).map(r=>({fieldKey:`${r.schemaName}.${r.fieldname}`,target:r.target})),n=er(e,"fieldKey"),i=await t.db.getAllRaw("SingleValue",{fields:["name","parent","fieldname","value"]}),s={};for(const{name:r,fieldname:o,parent:a,value:l}of i){const c=`${a}.${o}`;if(!n[c])continue;const{target:u}=n[c];typeof l!="string"||!l||!u||(s[u]??(s[u]={}),s[u][l]===void 0&&(s[u][l]=await t.db.exists(u,l)),!s[u][l]&&await t.db.delete("SingleValue",r))}}async function $7e(t){const e=await t.getValue(A.AccountingSettings,"email"),n=t.auth.user;t.auth.user=e??n}async function D7e(t){const e=await t.getValue(A.SystemSettings,"version"),{appVersion:n}=t.store;if(e!==n){const i=await t.doc.getDoc(A.SystemSettings);await(i==null?void 0:i.setAndSync("version",n))}}function M7e(t){let e=t.config.get("deviceId");e===void 0&&(e=Vl(),t.config.set("deviceId",e)),t.store.deviceId=e}async function I7e(t){const e=await t.doc.getDoc(A.SystemSettings);e.instanceId||await e.setAndSync("instanceId",Vl()),t.store.instanceId=await t.getValue(A.SystemSettings,"instanceId")}async function RQ(t){const e=await t.db.getAll(A.Currency,{fields:["name","symbol"]});t.currencySymbols=zf(e,"name","symbol")}async function R7e(t){const e=await t.doc.getDoc(A.Misc);let n=e.openCount;typeof n!="number"&&(n=_7e(t)),typeof n!="number"&&(n=0),n+=1,await e.setAndSync("openCount",n)}function _7e(t){var n;const e=t.config.get("files",[]);for(const i of e)if(i.id===((n=t.singles.SystemSettings)==null?void 0:n.instanceId))return i.openCount??0;return null}function E7e(t){return[{name:t.t`Unit`,isWhole:!0},{name:t.t`Kg`,isWhole:!1},{name:t.t`Gram`,isWhole:!1},{name:t.t`Meter`,isWhole:!1},{name:t.t`Hour`,isWhole:!1},{name:t.t`Day`,isWhole:!1}]}function Q7e(t){return[{name:t.t`Stores`}]}const N7e=(t,e,n)=>{const i=t[e];return i?typeof i=="function"?i():Promise.resolve(i):new Promise((s,r)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(r.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})};function z6(){return{[b`Application of Funds (Assets)`]:{[b`Current Assets`]:{[b`Accounts Receivable`]:{[b`Debtors`]:{accountType:"Receivable"}},[b`Bank Accounts`]:{accountType:"Bank",isGroup:!0},[b`Cash In Hand`]:{[b`Cash`]:{accountType:"Cash"},accountType:"Cash"},[b`Loans and Advances (Assets)`]:{isGroup:!0},[b`Securities and Deposits`]:{[b`Earnest Money`]:{}},[b`Stock Assets`]:{[b`Stock In Hand`]:{accountType:"Stock"},accountType:"Stock"},[b`Tax Assets`]:{isGroup:!0}},[b`Fixed Assets`]:{[b`Capital Equipments`]:{accountType:"Fixed Asset"},[b`Electronic Equipments`]:{accountType:"Fixed Asset"},[b`Furnitures and Fixtures`]:{accountType:"Fixed Asset"},[b`Office Equipments`]:{accountType:"Fixed Asset"},[b`Plants and Machineries`]:{accountType:"Fixed Asset"},[b`Buildings`]:{accountType:"Fixed Asset"},[b`Softwares`]:{accountType:"Fixed Asset"},[b`Accumulated Depreciation`]:{accountType:"Accumulated Depreciation"}},[b`Investments`]:{isGroup:!0},[b`Temporary Accounts`]:{[b`Temporary Opening`]:{accountType:"Temporary"}},rootType:"Asset"},[b`Expenses`]:{[b`Direct Expenses`]:{[b`Stock Expenses`]:{[b`Cost of Goods Sold`]:{accountType:"Cost of Goods Sold"},[b`Expenses Included In Valuation`]:{accountType:"Expenses Included In Valuation"},[b`Stock Adjustment`]:{accountType:"Stock Adjustment"}}},[b`Indirect Expenses`]:{[b`Administrative Expenses`]:{},[b`Commission on Sales`]:{},[b`Depreciation`]:{accountType:"Depreciation"},[b`Entertainment Expenses`]:{},[b`Freight and Forwarding Charges`]:{accountType:"Chargeable"},[b`Legal Expenses`]:{},[b`Marketing Expenses`]:{accountType:"Chargeable"},[b`Miscellaneous Expenses`]:{accountType:"Chargeable"},[b`Office Maintenance Expenses`]:{},[b`Office Rent`]:{},[b`Postal Expenses`]:{},[b`Print and Stationery`]:{},[b`Round Off`]:{accountType:"Round Off"},[b`Salary`]:{},[b`Sales Expenses`]:{},[b`Telephone Expenses`]:{},[b`Travel Expenses`]:{},[b`Utility Expenses`]:{},[b`Write Off`]:{},[b`Exchange Gain/Loss`]:{},[b`Gain/Loss on Asset Disposal`]:{}},rootType:"Expense"},[b`Income`]:{[b`Direct Income`]:{[b`Sales`]:{},[b`Service`]:{}},[b`Indirect Income`]:{isGroup:!0},rootType:"Income"},[b`Source of Funds (Liabilities)`]:{[b`Current Liabilities`]:{[b`Accounts Payable`]:{[b`Creditors`]:{accountType:"Payable"},[b`Payroll Payable`]:{}},[b`Stock Liabilities`]:{[b`Stock Received But Not Billed`]:{accountType:"Stock Received But Not Billed"}},[b`Duties and Taxes`]:{accountType:"Tax",isGroup:!0},[b`Loans (Liabilities)`]:{[b`Secured Loans`]:{},[b`Unsecured Loans`]:{},[b`Bank Overdraft Account`]:{}}},rootType:"Liability"},[b`Equity`]:{[b`Capital Stock`]:{accountType:"Equity"},[b`Dividends Paid`]:{accountType:"Equity"},[b`Opening Balance Equity`]:{accountType:"Equity"},[b`Retained Earnings`]:{accountType:"Equity"},rootType:"Equity"}}}const _Q=["accountType","accountNumber","rootType","isGroup"];class L7e{constructor(e,n){this.chartOfAccounts=e,this.fyo=n}async run(){const e=await B7e(this.chartOfAccounts);await this.createCOAAccounts(e,null,"",!0)}async createCOAAccounts(e,n,i,s){for(const r in e){if(_Q.includes(r))continue;const o=e[r];s&&(i=o.rootType);const a=o.accountType??"",l=o.accountNumber,c=V7e(r,l),u=F7e(o);await this.fyo.doc.getNewDoc("Account",{name:c,parentAccount:n,isGroup:u,rootType:i,accountType:a}).sync(),await this.createCOAAccounts(o,c,i,!1)}}}function F7e(t){return t.isGroup!==void 0?t.isGroup:!!Object.keys(t).filter(i=>!_Q.includes(i)).length}async function B7e(t){const n=Zv().find(({name:s})=>s===t),i=n==null?void 0:n.countryCode;if(!i)return z6();try{return(await N7e(Object.assign({"../../fixtures/verified/ae.json":()=>rn(()=>import("./ae-Dyu3TWf_.js"),[]),"../../fixtures/verified/ca.json":()=>rn(()=>import("./ca-BZVYThX9.js"),[]),"../../fixtures/verified/ch.json":()=>rn(()=>import("./ch-BliaRJT3.js"),[]),"../../fixtures/verified/fr.json":()=>rn(()=>import("./fr-CL6dNE2k.js"),[]),"../../fixtures/verified/gt.json":()=>rn(()=>import("./gt-CKsVrInx.js"),[]),"../../fixtures/verified/hu.json":()=>rn(()=>import("./hu-DpVa87an.js"),[]),"../../fixtures/verified/id.json":()=>rn(()=>import("./id-CkYWHkEL.js"),[]),"../../fixtures/verified/in.json":()=>rn(()=>import("./in-CSaQEsmd.js"),[]),"../../fixtures/verified/mx.json":()=>rn(()=>import("./mx-BVJZZT8a.js"),[]),"../../fixtures/verified/ni.json":()=>rn(()=>import("./ni-DtpXFqRq.js"),[]),"../../fixtures/verified/nl.json":()=>rn(()=>import("./nl-Cuf_H_LO.js"),[]),"../../fixtures/verified/sg.json":()=>rn(()=>import("./sg-CZ7HhLjM.js"),[]),"../../fixtures/verified/standardCOA.json":()=>rn(()=>import("./standardCOA-Cn1-MZDX.js"),[])}),`../../fixtures/verified/${i}.json`,5)).default.tree}catch{return z6()}}function V7e(t,e){return e?`${t} - ${e}`:t}async function EQ(t,e,n){const{companyName:i,country:s,bankName:r,chartOfAccounts:o}=e;if(n.store.skipTelemetryLogging=!0,await z7e(t,s,n),await X7e(e,n),await Z7e(e,n),await q7e(e,n),await W7e(n),await G7e(r,s,o,n),await VDe(s,n),await j7e(n),await J7e(n),await e9e(n),n.isElectron){const{updatePrintTemplates:a}=await rn(async()=>{const{updatePrintTemplates:l}=await Promise.resolve().then(()=>N1e);return{updatePrintTemplates:l}},void 0);await a(n)}await H7e(i,n),Object.keys(n.currencySymbols).length||await RQ(n),n.store.skipTelemetryLogging=!1}async function j7e(t){for(const e of E7e(t))await gp(A.UOM,e,t);for(const e of Q7e(t))await gp(A.Location,e,t)}async function z7e(t,e,n){const i=f9(e);await IQ(t,!0,i,n)}async function Z7e({companyName:t,country:e,fullname:n,email:i,bankName:s,fiscalYearStart:r,fiscalYearEnd:o},a){const l=await a.doc.getDoc("AccountingSettings");return await l.setAndSync({companyName:t,country:e,fullname:n,email:i,bankName:s,fiscalYearStart:r,fiscalYearEnd:o}),l}async function q7e({logo:t,companyName:e,email:n},i){await(await i.doc.getDoc("PrintSettings")).setAndSync({logo:t,companyName:e,email:n,displayLogo:!!t})}async function X7e({country:t,currency:e},n){const s=Ws()[t],r=e??s.currency??Ks,o=s.locale??zD,a=f9(t),l=await n.doc.getDoc("SystemSettings"),c=Vl();await l.setAndSync({locale:o,currency:r,instanceId:c,countryCode:a})}async function W7e(t){const e=[],n=[],i=Object.values(Ws());for(const s of i){const{currency:r,currency_fraction:o,currency_fraction_units:a,smallest_currency_fraction_value:l,currency_symbol:c}=s;if(!r||n.includes(r))continue;const h=gp("Currency",{name:r,fraction:o??"",fractionUnits:a??100,smallestValue:l??.01,symbol:c??""},t);e.push(h),n.push(r)}return Promise.all(e)}async function G7e(t,e,n,i){await new L7e(n,i).run();const r=await K7e(e,i),o={name:t,rootType:nn.Asset,parentAccount:r,accountType:"Bank",isGroup:!1};await gp("Account",o,i),await QQ(i),await U7e(i)}async function QQ(t){const e=t.t`Indirect Income`;if(!await t.db.exists(A.Account,e))return;const i=t.t`Discounts`,s={name:i,rootType:nn.Income,parentAccount:e,accountType:"Income Account",isGroup:!1};await gp(A.Account,s,t),await t.singles.AccountingSettings.setAndSync("discountAccount",i)}async function U7e(t){await Z2("writeOffAccount",t.t`Write Off`,t),await Z2("roundOffAccount",t.t`Rounded Off`,t)||await Z2("roundOffAccount",t.t`Round Off`,t)}async function Z2(t,e,n){return await n.db.exists(A.Account,e)?(await n.singles.AccountingSettings.setAndSync(t,e),!0):!1}async function H7e(t,e){await e.singles.AccountingSettings.setAndSync("setupComplete",!0)}async function gp(t,e,n){return await Y7e(t,e,n)?n.doc.getNewDoc(t,e).sync():void 0}async function Y7e(t,e,n){const i=e.name,s=Object.assign({},e),r=await n.db.getAllRaw(t,{fields:["*"],filters:{name:i}});if(r.length===0)return!0;const o=r[0];return Object.keys(s).map(l=>{const c=s[l],u=o[l];return c==u}).every(Boolean)?!1:(await n.db.delete(t,i),!0)}async function K7e(t,e){const n=await e.db.getAllRaw("Account",{fields:["*"],filters:{isGroup:!0,accountType:"Bank"}});if(n.length===0)return"Bank Accounts";if(n.length>1)switch(t){case"Indonesia":return"Bank Rupiah - 1121.000"}return n[0].name}async function J7e(t){var n,i;const e=Object.values(t.schemaMap).map(s=>s==null?void 0:s.fields).flat().filter(s=>(s==null?void 0:s.fieldname)==="numberSeries");for(const s of e){const r=s==null?void 0:s.default,o=s==null?void 0:s.schemaName;if(!r||!o)continue;await d7(r,o,ZD,t);const a=Q9[o];!a||(n=t.singles.Defaults)!=null&&n[a]||await((i=t.singles.Defaults)==null?void 0:i.setAndSync(a,r))}}async function e9e(t){const e=await t.doc.getDoc(A.InventorySettings);e.valuationMethod||await e.set("valuationMethod",Fc.FIFO);const n={[ln.Stock]:"stockInHand",[ln["Stock Received But Not Billed"]]:"stockReceivedButNotBilled",[ln["Cost of Goods Sold"]]:"costOfGoodsSold"};for(const s in n){const r=await t.db.getAllRaw("Account",{filters:{accountType:s,isGroup:!1}});if(!r.length)continue;const o=n[s];await e.set(o,r[0].name)}const i=t.t`Stores`;await t.db.exists(A.Location,i)&&await e.set("defaultLocation",i),await e.sync()}const Z6={"Janky Office Spaces":["Office Rent","Office Cleaning"],"Josfa's 611s":["611 Jeans - PCH","611 Jeans - SHR"],"Lankness Feet Fomenters":["Bominga Shoes","Jade Slippers"],"The Overclothes Company":["Jacket - RAW","Cryo Gloves","Cool Cloth"],"Adani Electricity Mumbai Limited":["Electricity"],"Only Fulls":["Full Sleeve - BLK","Full Sleeve - COL"],"Just Epaulettes":["Epaulettes - 4POR"],"Le Socials":["Social Ads"],Maxwell:["Marketing - Video"]},NQ=Object.keys(Z6).reduce((t,e)=>{for(const n of Z6[e])t[n]=e;return t},{}),LQ=[.35,.25,.15,.15,.25,.05,.05,.15,.25,.35,.45,.55];function t9e(t){const e=Te.now().minus({months:t});return LQ[e.month-1]}function n9e(t,e){let n=Te.now();if(e!==0){const s=n.minus({months:e});n=Te.local(s.year,s.month,s.daysInMonth)}const i=[];for(let s=0;s<t;s++){const r=Math.ceil(n.day*Math.random()),o=Te.local(n.year,n.month,r);i.push(o.toJSDate())}return i}const ax=[{name:"Dry-Cleaning",description:null,unit:"Unit",itemType:"Service",incomeAccount:"Service",expenseAccount:"Cost of Goods Sold",tax:"GST-18",rate:69,hsnCode:"999712",for:"Sales"},{name:"Electricity",description:"Bzz Bzz",unit:"Day",itemType:"Service",incomeAccount:"Service",expenseAccount:"Utility Expenses",tax:"GST-0",rate:6e3,hsnCode:"271600",for:"Purchases"},{name:"Marketing - Video",description:"One single video",unit:"Unit",itemType:"Product",incomeAccount:"Sales",expenseAccount:"Marketing Expenses",tax:"GST-18",rate:15e3,hsnCode:"998371",for:"Purchases"},{name:"Office Rent",description:"Rent per day",unit:"Day",itemType:"Product",incomeAccount:"Sales",expenseAccount:"Office Rent",tax:"GST-18",rate:5e4,hsnCode:"997212",for:"Purchases"},{name:"Office Cleaning",description:"Cleaning cost per day",unit:"Day",itemType:"Service",incomeAccount:"Service",expenseAccount:"Office Maintenance Expenses",tax:"GST-18",rate:7500,hsnCode:"998533",for:"Purchases"},{name:"Social Ads",description:"Cost per click",unit:"Unit",itemType:"Service",incomeAccount:"Service",expenseAccount:"Marketing Expenses",tax:"GST-18",rate:50,hsnCode:"99836",for:"Purchases"},{name:"Cool Cloth",description:"Some real  cloth",unit:"Meter",itemType:"Product",incomeAccount:"Sales",expenseAccount:"Cost of Goods Sold",tax:"GST-18",rate:4e3,hsnCode:"59111000",for:"Both"},{name:"611 Jeans - PCH",description:"Peach coloured 611s",unit:"Unit",itemType:"Product",incomeAccount:"Sales",expenseAccount:"Cost of Goods Sold",tax:"GST-12",rate:4499,hsnCode:"62034990",for:"Both"},{name:"611 Jeans - SHR",description:"Shark skin 611s",unit:"Unit",itemType:"Product",incomeAccount:"Sales",expenseAccount:"Cost of Goods Sold",tax:"GST-12",rate:6499,hsnCode:"62034990",for:"Both"},{name:"Bominga Shoes",description:null,unit:"Unit",itemType:"Product",incomeAccount:"Sales",expenseAccount:"Cost of Goods Sold",tax:"GST-18",rate:4999,hsnCode:"640291",for:"Both"},{name:"Cryo Gloves",description:"Keeps hands cool",unit:"Unit",itemType:"Product",incomeAccount:"Sales",expenseAccount:"Cost of Goods Sold",tax:"GST-18",rate:3499,hsnCode:"611693",for:"Both"},{name:"Epaulettes - 4POR",description:"Porcelain epaulettes",unit:"Unit",itemType:"Product",incomeAccount:"Sales",expenseAccount:"Cost of Goods Sold",tax:"GST-18",rate:2499,hsnCode:"62179090",for:"Both"},{name:"Full Sleeve - BLK",description:"Black sleeved",unit:"Unit",itemType:"Product",incomeAccount:"Sales",expenseAccount:"Cost of Goods Sold",tax:"GST-12",rate:599,hsnCode:"100820",for:"Both"},{name:"Full Sleeve - COL",description:"All color sleeved",unit:"Unit",itemType:"Product",incomeAccount:"Sales",expenseAccount:"Cost of Goods Sold",tax:"GST-12",rate:499,hsnCode:"100820",for:"Both"},{name:"Jacket - RAW",description:"Raw baby skinned jackets",unit:"Unit",itemType:"Product",incomeAccount:"Sales",expenseAccount:"Cost of Goods Sold",tax:"GST-12",rate:8999,hsnCode:"100820",for:"Both"},{name:"Jade Slippers",description:null,unit:"Unit",itemType:"Product",incomeAccount:"Sales",expenseAccount:"Cost of Goods Sold",tax:"GST-18",rate:2999,hsnCode:"640520",for:"Both"}],i9e="data:image/jpeg;base64,/9j/4AAQSkZJRgABAgEASABIAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAEsASwDAREAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD+S6v38/CAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgD6K+Av7JH7Sv7T97dWfwF+DPjf4kpYTx22o6to2mra+GNLupQrRWureLtYm03wtpVzIjCSO31HWLaZ4Q0yoYkd14sXmOBwKTxeJpULq8Yylecl3jTipVJLzUWj3Mm4Zz7iGco5NlWLx6g1GpVpU+XD05PaNTE1XTw9OTWqjOrFtapWTZ9i6p/wRY/4KRaZYXt8nwAtNYl0tFfVNJ8P/ABY+Det67p6urvGJdIsPH0t7cSyhG8m2sI7y6mwWihdUdl86PE2SyaX1xx5vhlPD4mMH/wBvOjZersl3PqanhRx3ThOf9ixqumk6lKhmWV1q0L7XpQxrnJu2kYKcn0TSdvzl+IXw2+IXwm8U3/gj4oeCPFfw98YaXsN/4Z8Z6DqfhzW7aOUt5Fw+natbWty1pcqjSWl4kb2t3Fia2mliZXPs0a9HEU1VoVadanLadKcZxfdc0W1ddVutmj4XG4DHZbiJ4TMMJicDiqfx4fFUalCrFPaXJUjGXLK14yScZLWLa1OKrU5AoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoA+vP2aP28f2rv2PdK8VaJ+zn8Vf+Fd6Z421DTdV8T23/AAg/w38W/wBp3+kW1zaafP53jrwf4nuLL7Pb3dxH5Wny2kMvmb545HRGXzsdlOX5lKnLG4f20qSlGm/a16fKpNNq1KpTTu0t7vsfT5BxjxJwvTxNHIsx+o08XOnUxEfqeAxPtJ0oyjB3xmFxEocsZSVoOKd7tNpH9H3/AARH/wCCgv7Xn7Xnx++LHgn9oj4uf8LC8MeGfg9J4p0TTP8AhAvhj4T+xa8vjTwtpIvvtvgfwX4a1C5xp+pXtv8AZbu7ns/33mm38+OKSP4vijJ8uy7B4erg8P7GpPE+zlL21epeHsqkrWq1ZpaxTuknpvY/dfCXjbifibOsywmeZn9ew+Hyt4ijT+pZfhuSt9bw1Ln58JhMPOXuVJx5ZSlDW/LdJr+mSvhz99P56/8Agud+3H+1J+x1qv7NFt+zj8UP+FdQfEHT/i1P4vT/AIQr4d+Lv7Xl8MXPw5j0Nt3jvwl4new+wpr2rDbpjWS3P2vN4LgwWxh+w4VyrAZlHHPG0PbOjLDqn+9rU+X2irc/8KpTvfkj8V7W0td3/EvF/i/iLhepkEcizD6isbDMnil9UwOJ9q8PLAqi/wDbMNiHDkVap/D5Obm97mtG34J23/Bb3/gp1BPHLL+0jBeRoSWtrn4NfARYJhgjbI1p8L7W5ABIYeVcRNkDLFcqfrXwtkTX+5NeaxOLv+Ndr8D8bj4t+ICabz5TS+zLKsmSfry5fGX3SR+iH7Jf/BxT8SdM8TaR4Y/bD8DeHPFHgm/uLayu/id8NdJuNA8YeGhK3lya1rfhIXl5oXizT4nMb3dn4dh8K6laWn2q6sbfXruO10e48bMODaEqcqmW1Z06qTaoV5KdOf8AdjUsp02+jm6kW7JuCvJfccNeOOPp4ilh+KMHQxGEnKMJZhgKbo4qhfR1a2G5pUcTBO3NGgsNUjHmlCNaSjSl/VJqHivw347+EGpeNPB2taf4j8KeKvh5qPiDw5r+k3CXWm6xo2reHp73TtRsrhPllt7q1mjljPDANtdVcMo+CVOdLExpVIuFSnWjCcJK0oyjNKUWu6aP6KniaGMyypi8LVhXw2JwM69CtTlzU6tKpQc4ThJbxlFpr8dT/Ltr92P89T6x/Zl/bj/ak/Y6g8ZW37OPxQ/4V1B8QZdBn8Xp/wAIV8O/F39ry+GE1ePQ23eO/CXid7D7CmvasNumNZLc/a83guDBbGHz8dlWAzJ0njaHtnRU1T/e1qfL7Tl5/wCFUp3vyR+K9raWu7/ScP8AF/EXC6xUcizD6isa6LxS+qYHE+1eHVVUX/tmGxDhyKtU/h8nNze9zWjb+jn/AIIl/wDBQz9sH9rr9pP4l+AP2hvi9/wsHwl4f+B2r+MNI0n/AIQD4X+E/sniO18e+ANFg1H7f4H8FeGtTuNmma3qlt9kur2axb7V5z2rXENvLF8XxRk+W5dgqFbB4b2NSeKjTlL21epeDo1pONqtWcV70Yu6Selr2bP3Xwm434o4mz7MMFneZ/XcNQyiriqVP6ll+G5a8cZgqSnz4TCYepK1OrUjyym4e9dx5lFr+nSvhj+gD+dv/guV+3V+1T+x34q/Z0039nL4pf8ACurLx34f+JF94rh/4Qj4c+Lv7VutA1HwfBpMvmeOvCHieWx+yRarfps02Szjn8/dcpM0UJj+y4VyrAZlTxssbQ9s6U6Cpv2tanyqcajl/CqU735V8V7W0tqfh/i9xhxFwviMjp5FmP1GGMo4+eJX1TA4n2kqNTCxpO+MwuIcOVVJq1NxTv7ydlb+Zv8AaQ/4KJ/tjftceB9K+G/7Qvxh/wCFg+C9E8V2PjfTNG/4V98LfCn2bxRpuka7oNlqf9o+CPBHhrVZvJ0rxLrVr9iuL6XT5Ptvny2klzbWk0H3GCybLcuqyr4PDexqypulKXtq9S9OUoTceWrVnFXlCLulfS17Np/gWe8ccU8TYSngM7zT67hKWJhi6dL6ll2G5cRTpVqMKnPhMJh6jtTxFWPJKbg+e7i5Ri18U16Z8mFABQAUAftT/wAEi/8AglxcftteMLv4q/F231TSf2avh9q9vaahHbm6069+LPieEC5m8FaJqcDw3Fhoemwm2m8aa7YypfQwXtnomiTQapfXOreHvmOIs+WV01h8O4yx1aLavZrD03oqsou6c5O/soPRtOUk4pRn+r+Gfh5Li3FSzHM41KeQYKqozUeaE8yxC954SjUTUoUaa5Xiq0GppTjSotVJyqUP2l/4LL/tjwfsI/s/fDn9lX9lpNI+FHjL4kaRe29uPA9lBoc3ww+Duk79Nu7rwzFpwtRoWv8AjHWnk0jR/EECzXtpa6T4wv7aS08QjStYtPmeGstebYytj8fzYilQkm/atzVfEy95Kd788KcfelB2Tcqad4c0X+reKnFK4PyTA8OcO+zy3FY+lOMfqcVReX5XSvTlLDqHL7GtiqrdKlWjecY08VOLjX9nVj/IR8I/jl8WvgV8RdJ+K3wo8e+JPBnjzSNRTUo9d0nVLuGbUX+0C4urLXovNMGv6Rqh8yHWdI1iO807V7We4ttQtriGeRG/RcRhcPi6MsPiKMKtKUeXklFNR0snDrCUd4yjaUWk000fzJlmb5lk+OpZlluMr4XGUqiqKtTqSTqPm5pQrK9q1KpqqtKqpQqxcozjJNo/uw8O+Dv2a/8Agsp+w98M/HPxU8Hac2p+JPD11A2uaGLW38cfB74naXONI8aWvhDXriC61DT7A+INJF3FpepJLpninw2dBvNa0u7hmszF+UzqY7hrNK9LD1JcsJp8k7uliaElzUnUgmk3yStzR96nPnUZJpn9g0MLkPinwjgMZmOFp+0xFCUfbUeVYzK8wpy9li44WtJSnCHt6fMqdROniMP7GVWnJONv4of2yv2SPiT+xV8dfE3wT+JESXT2GNY8HeK7WFodK8deB7+6uodC8V6bG0kxtvtYtJ7XVNMeaabRtas9R0qSe5+yLdT/AKfluY0MzwkMVQdr+7Vpt3lSqpJzpy2va6cZWSlFxlZXsv5P4p4Zx/CecYjKcelJw/e4XExVqeMwk5SVHE01d8vNyuNSm23SqxnTblyqUvlau8+cCgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgD+i7/g20/5Oo+Ov/Zv0v/qxvBFfGca/7hhP+wxf+map+5eA/wDyUecf9iV/+p2EP7MK/NT+pz+Tr/g5o/5Dn7Gv/YJ+PP8A6WfCGv0Hgf4My/xYT8sQfzd4/fxuFv8Ar1nP/pWWH8s1feH87hQB/Xf/AMECP2j9a8cfsu/tGfs4eJdSuL8/BayuvFXgL7XP5r2fgv4haX4iOq6BZIUDR6fonizR73WF3SSET+MpIkEcMMSV+d8XYKNLH4LGwil9Zap1rLerRlDlm/OVOSj6Ur7s/prwYz2tjOHs9yLEVJT/ALJhLEYLmd3HCY6nX9pRiraQpYmlOqtXrimlZJI/kQr9EP5lCgD+hn/g26/5PE+Mv/ZtOv8A/q0fhXXx3Gv/ACLcN/2HQ/8ATGIP27wI/wCSozX/ALEFb/1Y5cf2i1+Zn9Vn8kv/AAcx/wDI8fsjf9ip8YP/AE7/AA/r9C4H/hZj/wBfMN/6TWP5q8ff974Z/wCwbNP/AE7gj+Xuvuz+ewoAKACgD2D9n/4KeMP2jvjV8NPgd4Dg83xR8S/Fem+G7GZonnt9KtZ3afWfEOoRxESnSvDOiW+o+IdXaM+ZHpemXciBmUA82MxVPBYWviqr/d0KcptbOTWkYL+9OTjCP96SPUyXKcVnubYDKMGr4jH4mnQg7Nxpxk+arXmlr7PD0Y1K9W2qp05Nan+lL8C/gr4C/Z2+EvgX4L/DLSU0fwZ4A0G10TSoOHurySPdNqGsanPgG71jXNRlu9X1e8bBudQvLiUBFZUX8TxeKrYzEVcTXlzVa03KT6LtGK6RhG0Yrokj+88nynBZHluDyrL6apYXBUY0aa+1JrWdWo/tVa1Ryq1ZP4pyk9Nj+Cn/AIK+fGyX44/8FBPj/q0N895oPgDxBB8HvDMfnLPBZaf8NLZfD2sxWUiO8ZtL7xrD4q1uMo20vq0jAAsa/WuHML9VyfBxatOtB4melm3XfPG/mqTpx/7dP428Ts2eb8a51VU+ejgq6yvDq94whgI+wqqLTa5Z4tYmqrdajPzQr2z4E/qw/wCDaz44XDD9o39m7ULwNbRDw/8AGzwlY7jvikka28DfEC52sxDRyBfhsieWieU6SmVpDPEI/gONsKv9ixqWvv4Wo/vq0V/6f9fkf0b4C5u3/buQzl7q9hm2Gh1TfLg8bL0f+wJWtZ3ve6t+of8AwWL/AGJbL9rz9lbX9c8N6P8Aa/jX8DbLVvH/AMNLi0gR9T1nT7a3iuPGvgIERPcXMXifRLD7TpVjCySTeLdH8OASLA13HP4XDeaPLsfCM5WwuKcaNdN+7Ft2pVuydOTtJv8A5dyn1tb9C8UeEocTcO1q1ClzZtlEKuNwEoxTqVYRipYvB7OUliKUOanBNN4mlQ1tzJ/wGV+uH8YBQAUAFABQAUAFABQAUAFABQAUAFABQAUAFABQB/Rd/wAG2n/J1Hx1/wCzfpf/AFY3givjONf9wwn/AGGL/wBM1T9y8B/+Sjzj/sSv/wBTsIf2YV+an9Tn8nX/AAc0f8hz9jX/ALBPx5/9LPhDX6DwP8GZf4sJ+WIP5u8fv43C3/XrOf8A0rLD+WavvD+dwoA/bj/ggz4wm0D9rP4qeGzM4tPHf7Lfxa0hrbfiKS/0a68LeKLS4KbG3y29po2pxR/NHtju5zvOfLf5fiymp5fh521pY/Dyv2UlUptejco/cj9a8G8U6PEuY0L+7jOHsypOPRzpSw+IjLbVxjSqJbaSlr0f4j19QfkoUAf0M/8ABt1/yeJ8Zf8As2nX/wD1aPwrr47jX/kW4b/sOh/6YxB+3eBH/JUZr/2IK3/qxy4/tFr8zP6rP5Jf+DmP/keP2Rv+xU+MH/p3+H9foXA/8LMf+vmG/wDSax/NXj7/AL3wz/2DZp/6dwR/L3X3Z/PYUAFABQB/Tz/wbffs4wa344+NX7U+uWPmw+CdPs/hH4AuJCjwp4i8Swwa/wCOr6JDH5kWoaT4dh8NaZBOswVrDxfqsLROWV4/heNca40sLgIPWq3iKy68kLwpL0lNzk1benFn9BeBORKri824irQusJCOWYKTs0q+ISrYyaVrqdOgsPTTv8GKqKzvdf1meIdbsvDOga54k1JtmneH9H1PW799yJsstKsp7+6bfKyRptgt5DukdEXGXZVBI/PoRc5whH4pyjFesmkvxZ/SVetDD0a1eppChSqVpvRe5Tg5y1ei0i99D/LZ8V+JNU8ZeKPEni/W5jc614r1/WPEmr3DMzNPqmuajc6pfzMzlnYy3d1K5ZmLEtliTk1+8U4RpU4U4K0acIwiu0YRUUvuR/njia9TFYiviqz5quJrVa9WXepWnKpN666yk3qYFWYn6/f8ELviK/gL/go18KdMa4NtYfE3wx8Rvh1qTb0WORLnwlf+LtKt5d/LC48R+D9EhiRCHNy8BGVDK3znFVH22S4iVruhUo1o/Koqcn8oVJfK5+neEGOeD46y2nzcsMww+PwNR3STUsNPE04v/FXwtJJb8zR/fBX5Kf2Wf51P/BUv9nCL9l79uD41fD7SbA2HgzXtai+JXw/jBU248I/ECM67HY2QH7xbPw5rkuueE4BOBMRoBctMjpcTfsuQ436/leFrSd6sI+wrd/aUfcu/OcOSo7ae/wBNl/DniJkS4e4uzbBU4OGFrVVj8EtLfVsavbKEOvJQrOthlza/uL3kmpP8969g+JCgAoAKACgAoAKACgAoAKACgAoAKACgAoAKAP6Lv+DbT/k6j46/9m/S/wDqxvBFfGca/wC4YT/sMX/pmqfuXgP/AMlHnH/Ylf8A6nYQ/swr81P6nP5Ov+Dmj/kOfsa/9gn48/8ApZ8Ia/QeB/gzL/FhPyxB/N3j9/G4W/69Zz/6Vlh/LNX3h/O4UAfbH/BP39pnwl+yV+0fpfxg8c6N4k17wzB4F+JXhK+07wlbaVd6483jPwXq2gaZPbw6zq2i2BgtdUu7K4vmfUIpVso5zBHPNshfy84wNTMcFLDUpQhN1aFRSqOShalVjOSbjGTu4ppab2vZH1nBWf4bhrPaeaYulXrYeODx+GnTw0acqzeKwlWjTcVVqUoWjUlCU7zT5FKybsn8T16h8mFAH9DP/Bt1/wAnifGX/s2nX/8A1aPwrr47jX/kW4b/ALDof+mMQft3gR/yVGa/9iCt/wCrHLj+0WvzM/qs/kl/4OY/+R4/ZG/7FT4wf+nf4f1+hcD/AMLMf+vmG/8ASax/NXj7/vfDP/YNmn/p3BH8vdfdn89hQAUAFAH+hZ/wR/8AgvH8Ev8Agnx+z/pc1p9l1v4geH7j4w+IXaMRy3V38TLp/EWiSzoFVhLbeDJvC+mESbpAunqGK4CJ+PcR4r61nGMkneNGaw0PJUFySt61VUl8z+2/DHKllPBOS03Hlq42hLNK7tZylj5OvRcl3jhXh6eutoL0Xvn7e3is+CP2Jf2svEqMEuLH9nr4tW9g7FQqapq3grWNH0p23EBwmpX9qxjBDSgeWhDuprjymn7XNMvh0eMw7f8AhjVjKX/kqfoezxlifqfCXEmITtKGSZlGDfSpVwlWlTfn+8nHTrt1P81ev20/gsKAPrX9gnxgfAf7bP7J/ilpzbW1h+0F8KLbUp1Kgx6NrHjPSNF1tvmBUj+yNRvQynbuUld8ZPmL5+bU/bZXmFO128HiHFf3o0pSj/5NFH0vBuK+p8W8N4i/LGGd5bGb7UquKpUav/lKpP12utz/AEqa/Ej+9D+WH/g5T+CsEmk/s4ftE2FlGt1aX/iP4M+KL9YiZri1vYJfG3ga1klVSBBYz2XxAkjSRx+91NjGpLSEfe8E4p82NwTejUMTTXRNNUqr9WnR/wDAT+dvHrKU6eRZ5CCUozr5ViJ296UZp4vBxb/lg4Y1pPrUdup/J/X6AfzeFABQAUAFABQAUAFABQAUAFABQAUAFABQAUAf0Xf8G2n/ACdR8df+zfpf/VjeCK+M41/3DCf9hi/9M1T9y8B/+Sjzj/sSv/1Owh/ZhX5qf1Ofydf8HNH/ACHP2Nf+wT8ef/Sz4Q1+g8D/AAZl/iwn5Yg/m7x+/jcLf9es5/8ASssP5Zq+8P53CgAoAKACgD+hn/g26/5PE+Mv/ZtOv/8Aq0fhXXx3Gv8AyLcN/wBh0P8A0xiD9u8CP+SozX/sQVv/AFY5cf2i1+Zn9Vn8kv8Awcx/8jx+yN/2Knxg/wDTv8P6/QuB/wCFmP8A18w3/pNY/mrx9/3vhn/sGzT/ANO4I/l7r7s/nsKACgDp/BPhTU/HnjPwj4H0VDJrHjPxPoHhTSY1TzGk1PxFqtppFgioXjDlrq8iUIZE3E43rnIzq1I0qVSrL4aVOdSX+GEXJ/gjowmGqYzFYbB0lerisRRw1Jb3qV6kaUFa6veUl1Xqj/UZ8LeG9K8HeGPDnhDQYPsuh+FdC0jw3o1r8n+jaVoen2+madB+7SOP9zZ2sMfyRony/KijCj8JqTlUnOpN3nUnKcn3lNuUn822f6F4ehTwuHoYajHlo4ajSoUo6e7TowjThHRJaRilokuyR+dn/BYrXW8Of8E1/wBqXUFcxm48MeDtC3KpYlfFPxR8DeGWTAVsCVdXMTNjCK5YsoBYezw3DnzvALtUqz/8F0Ks/wD20+H8UK3sOAuIp3tzYfC0e/8AvGYYTD2+ftbeV7n+elX7CfxIFAHWeAtfbwp468F+KVYo3hrxZ4c19XVzGyNo+sWeohlkGShU22Q4GVI3DpWdaHtKVWn/AD05w/8AAouP6nTgqzw2MwmITs8PiaFZO9rOlVhO9+nw7n+plX4Mf6IH5Qf8FsfhinxL/wCCc/xvkjgE+qfDqfwb8TtHJV2ED+GvFWmW2vT/ACBmBTwdq3iZVYqUDOPMKR75E+g4Yr+wzrC62jWVWhLz56cnBf8AgyMD848Wcv8Ar/A2btK9TAvC5hS30+r4mnGs9L7YWpiLdO9ldr+ACv10/i0KACgAoAKACgAoAKACgAoAKACgAoAKACgAoA/ou/4NtP8Ak6j46/8AZv0v/qxvBFfGca/7hhP+wxf+map+5eA//JR5x/2JX/6nYQ/swr81P6nP5Ov+Dmj/AJDn7Gv/AGCfjz/6WfCGv0Hgf4My/wAWE/LEH83eP38bhb/r1nP/AKVlh/LNX3h/O4UAFABQAUAf0M/8G3X/ACeJ8Zf+zadf/wDVo/CuvjuNf+Rbhv8AsOh/6YxB+3eBH/JUZr/2IK3/AKscuP7Ra/Mz+qz+SX/g5j/5Hj9kb/sVPjB/6d/h/X6FwP8Awsx/6+Yb/wBJrH81ePv+98M/9g2af+ncEfy9192fz2FABQB93/8ABMLwYPHn/BQT9krQmj81bT4zeGPF7JhWBX4evP4/YsHdFKKvhks4ySUB2pI2I28nPavscnzCe18NOn/4OtR/9vPsfD7C/XONeGqNr8ua4fFW30wPNjXu1/0D/wDAex/o31+MH90H47f8F39U/s//AIJu/Fa03hP7b8ZfCXSwpMYMnlfEPQta2KHBZiP7I8zEOJNsbMT5IlB+k4TjfOsO/wCWniJf+UZx/wDbup+X+MVTk4DzKN7e1xWW0+mtsdRq2V/+vV9NdO1z+Cqv1k/jYKACgD/Uv+H2pnWvAXgjWTjOreEPDWpnaVK5v9Gsrr5SpKkfveCpK46HFfg1aPLWqx/lqTj90mj/AEQwVT2uDwlX/n5hqFTT+/ShL9Tzn9qHwQnxL/Zr/aB+HrwG5/4Tb4K/FDwvFCocyNc634K1rT7RovLSWQTx3M8MkDRxySJMiMiOwCnfAVfYY7B1r29liqFT5Rqxb+Vk7+RwcQ4RY/Ic6wLjzfW8pzDDpLdyrYSrCNrJu6k01ZNppaH+YtX7kf5/BQAUAFABQAUAFABQAUAFABQAUAFABQAUAFAH9F3/AAbaf8nUfHX/ALN+l/8AVjeCK+M41/3DCf8AYYv/AEzVP3LwH/5KPOP+xK//AFOwh/ZhX5qf1Ofydf8ABzR/yHP2Nf8AsE/Hn/0s+ENfoPA/wZl/iwn5Yg/m7x+/jcLf9es5/wDSssP5Zq+8P53CgAoAKACgD+hn/g26/wCTxPjL/wBm06//AOrR+FdfHca/8i3Df9h0P/TGIP27wI/5KjNf+xBW/wDVjlx/aLX5mf1WfyS/8HMf/I8fsjf9ip8YP/Tv8P6/QuB/4WY/9fMN/wCk1j+avH3/AHvhn/sGzT/07gj+Xuvuz+ewoAKAP2E/4IS+Hk1r/gpJ8I9QdA//AAinhP4s+IV3bMI83w58Q+GlfD8sVPiL5fL+dWIfhUY185xXPlyTEL/n5Uw8P/K0J/8Ath+oeD1D2vHmWTtf6thsyr9NL4Gvh76/9f8Apr16H97Vfkp/ZJ+Hv/BwXfiz/wCCfdxblwv9qfGr4a2AUozGQxweJdT2KwBEZA04yb2KqVjaPO51U/U8Hq+cJ/y4Wu/xhH/24/I/GufLwVKN/wCJmuAhtvZV6lvL+He77W6n8Mdfqh/IQUAFAH+nt+zheHUP2ePgNfmSOU33wY+F14ZYSpikNz4H0OYyRFCVMb79yFSVKkYJFfheNVsZi1tbE1191WaP9BMinz5Jk07p8+VZdO62fNhKLuvJ30PZZI45Y3ilRJIpEaOSORQ8ckbgq6OjAqyMpKsrAhgSCCDXMeq0mmmk01Zp6pp7prqmf5ZvjrQB4U8beMfC4BA8N+KvEOgANu3AaPq13pwDb2Zs/wCjc7mZs9WJya/eaU/aUqdT+enCf/gUVL9T/O/GUfq2LxWH/wCgfE16P/gqrKHn/KctWhzBQAUAFABQAUAFABQAUAFABQAUAFABQAUAf0Xf8G2n/J1Hx1/7N+l/9WN4Ir4zjX/cMJ/2GL/0zVP3LwH/AOSjzj/sSv8A9TsIf2YV+an9Tn8nX/BzR/yHP2Nf+wT8ef8A0s+ENfoPA/wZl/iwn5Yg/m7x+/jcLf8AXrOf/SssP5Zq+8P53Pc/2X9M03Wv2l/2d9H1jT7LVtI1b45/CTTNV0rU7SC/03U9Nv8Ax94ftb7T9QsbqOW2vLK8tpZba7tLmKSC4gkkhmjeN2U8uPlKOBxkotxlHCYiUZRbUoyVGbTTWqaeqa1T1R7HD1OnVz/I6VWEKlKpnGWU6lOpFTp1Kc8bQjOE4STjOE4txlGSakm000z0v/goD4d8P+Ev23P2qfDPhXQ9H8M+G9C+OfxE0zRPD/h/TLLRtE0fTrXxDex22n6VpOmwW1hp9lbRgRwWlpbwwQoAscaqAKwyic6mV4CdScpznhaMpTnJylKTgruUpNtt9W22zv41oUcNxbxHh8NRpYehRzfG06VChThSo0oRrSUYU6dNRhCEVooxiklsj5Br0T5gKAP6Gf8Ag26/5PE+Mv8A2bTr/wD6tH4V18dxr/yLcN/2HQ/9MYg/bvAj/kqM1/7EFb/1Y5cf2i1+Zn9Vn8kv/BzH/wAjx+yN/wBip8YP/Tv8P6/QuB/4WY/9fMN/6TWP5q8ff974Z/7Bs0/9O4I/l7r7s/nsKACgD93f+Dd2wW7/AG9fEFw2zOl/s8/EK/TcCSGk8WfDnTD5ZHAfZqLgk8eWXHUivlOMnbKYL+bGUV/5TrS/Q/YvA+ClxlXl/wA+8jx016vE4Gnp8pv5H9wNflp/W5+DX/BxPctB+wd4WiChhe/tG/D+2ckkFFTwX8TrzcuOpLWipg8bXY9QK+s4NV82qeWCrP8A8q0F+p+OeOMuXg3Dq3x57go+lsLmE7/+S2+Z/ENX6ifySFABQB/pp/sf3K3v7Jf7Lt4ilFu/2dfglcqjEFkWf4aeGZQrEcEqHwSOMjivw/MVbMMeu2NxS+6vM/v3hiXNw1w9LbmyPKZW7XwGHZ9F1xHuH+ZH+1rpw0j9qr9pnSQQRpf7QXxm04FWZ1IsviN4ktgVdlRmB8rhmRWYclVJwP3HLnzZfgZfzYPDP76MGfwDxLD2XEef0/8An3neaw7/AAY6vHfTt2R8+12HiBQAUAFABQAUAFABQAUAFABQAUAFABQAUAf0Xf8ABtp/ydR8df8As36X/wBWN4Ir4zjX/cMJ/wBhi/8ATNU/cvAf/ko84/7Er/8AU7CH9mFfmp/U5/PX/wAFzv2W9L/aO1X9mifUv2mf2Y/2ev8AhEdP+LUUMP7Q/wAR7jwFP4s/ty5+HLySeE44ND1j+04tF/sqNdadzb/ZH1XS1US/aCU+w4Vx8sFHHKOBx2M9pLD3eDoqqqfKq38S848rlze7vfll2PxLxf4dp57UyB1M/wCH8k+rQzJJZ3jpYN4n20sC28Mo0avtFS9mlVb5eV1Ke/Np+Bn/AA7C8L/9JKf+Caf/AIkRqP8A8xNfXf27U/6Emd/+Ecf/AJafjP8AxD7D/wDRe8Bf+Hup/wDMh7D+zz/wTf8ADnhf4/fA3xNB/wAFDP8Agnd4nn8O/GH4Z67D4a8NfH2+v/EfiGXSPGmiahHofh+xfwdCl7rerPbiw0q0aaJbm/uIIWljDlxzYzOp1MHioPJ85pqeGrwc54RKEOalJc837R2jG95O2iTZ6mR8CUMPnWUYhcb8D4h0M0y+ssPh85nOvXdLF0pqjRg8KlOrVceSnFtc05RV1e58Pf8ABSH/AJP4/a+/7OB+Jf8A6kt7XqZL/wAijLv+wOh/6Qj5Hjz/AJLPif8A7HWP/wDT8j4or1D5MKAP6Gf+Dbr/AJPE+Mv/AGbTr/8A6tH4V18dxr/yLcN/2HQ/9MYg/bvAj/kqM1/7EFb/ANWOXH9otfmZ/VZ/JL/wcx/8jx+yN/2Knxg/9O/w/r9C4H/hZj/18w3/AKTWP5q8ff8Ae+Gf+wbNP/TuCP5e6+7P57CgAoA/oD/4NwP+T4Pip/2an44/9W78Da+Q40/5FeH/AOxhS/8AUfFH7T4E/wDJXZj/ANk5i/8A1Z5Qf2t1+Yn9YH4I/wDBxd/yYn4J/wCzlvAP/qvvizX1vBn/ACNqv/YDW/8AT2HPxrxy/wCSPwn/AGP8F/6hZkfxH1+oH8lhQAUAf6Y/7F//ACZ3+yd/2bT8Cf8A1V3havxDM/8AkZZh/wBh2L/9P1D+++Ff+SX4b/7EGT/+q7Dn0vXCe8f5pX7dUccX7bv7Y8USJHFH+1T+0LHHHGoSOONPi34vVERFAVUVQFVVACgAAACv27Kv+RXlv/YBg/8A1Hpn8E8YJLi3ilJJJcR52kloklmeKskuiR8rV3nzgUAFABQAUAFABQAUAFABQAUAFABQAUAFAH9F3/Btp/ydR8df+zfpf/VjeCK+M41/3DCf9hi/9M1T9y8B/wDko84/7Er/APU7CH9mFfmp/U5/J1/wc0f8hz9jX/sE/Hn/ANLPhDX6DwP8GZf4sJ+WIP5u8fv43C3/AF6zn/0rLD+WavvD+dz6B/ZM/wCTqP2Z/wDs4H4Nf+rG8N1x5h/uGO/7A8T/AOmZnt8Nf8lHkH/Y6yr/ANTqB6t/wUh/5P4/a+/7OB+Jf/qS3tc+S/8AIoy7/sDof+kI9Hjz/ks+J/8AsdY//wBPyPiivUPkwoA/oZ/4Nuv+TxPjL/2bTr//AKtH4V18dxr/AMi3Df8AYdD/ANMYg/bvAj/kqM1/7EFb/wBWOXH9otfmZ/VZ/JL/AMHMf/I8fsjf9ip8YP8A07/D+v0Lgf8AhZj/ANfMN/6TWP5q8ff974Z/7Bs0/wDTuCP5e6+7P57CgAoA/fj/AINyLr7P+3N8RYtm/wC3fsveO7Xdu2+Vs+J/wZvd+Nrb8/ZPL25THmb9x2bG+R40V8qo+WPpP/yhiV+p+z+BcuXi/HK1+fh7GR9LZhlU7+fw26b36WP7Zq/MD+sj8Ef+Di7/AJMT8E/9nLeAf/VffFmvreDP+RtV/wCwGt/6ew5+NeOX/JH4T/sf4L/1CzI/iPr9QP5LCgAoA/0yf2MVZP2Pf2UEdSrL+zV8ClZWBVlZfhd4WBVgcEEEYIPIPBr8PzP/AJGWYf8AYbi//T9Q/vvhXThfhv8A7EOT/wDqvw59K1xHvH+Z9+21erqX7Zv7XOoqYyt/+078e71TC4kiK3XxV8VzgxSAkPGRJ8jgkMuGB5r9vytcuWZdHtgcIvuw9NH8DcWT9pxVxNU09/iDOZ6O697McS9H1WujPmKu4+fCgAoAKACgAoAKACgAoAKACgAoAKACgAoA/ou/4NtP+TqPjr/2b9L/AOrG8EV8Zxr/ALhhP+wxf+map+5eA/8AyUecf9iV/wDqdhD+zCvzU/qc/k6/4OaP+Q5+xr/2Cfjz/wClnwhr9B4H+DMv8WE/LEH83eP38bhb/r1nP/pWWH8s1feH87nWeAvGer/Dnx14L+IXh9bN9e8B+LPDnjPRE1GF7nT31fwvrFnremrfW8U1vJPZte2MIuYY7iB5YC6JNEzB1zrUo1qVWjO/JVpzpTs7PlqRcZWdnZ2bs7PXodOCxVXA4zCY6hyutg8TQxVFTTlB1cPVhWp88U4uUeeC5kpJtXSa3N74x/FXxP8AHL4q/EH4xeNI9Li8W/EvxZrXjPxFHolpNY6Qmr69ey316um2dxdXs9tZieVhBDLd3MkceFaaQjcYw2Hp4XD0cNS5vZ0KcaUOZ3lywVlzNJJu27svQ2zTMcRm+Y43NMWqaxOPxNXFV1Ri4UlVrSc5qnCUpuMbvROUml1Z5rW5wBQB/Qz/AMG3X/J4nxl/7Np1/wD9Wj8K6+O41/5FuG/7Dof+mMQft3gR/wAlRmv/AGIK3/qxy4/tFr8zP6rP5Jf+DmP/AJHj9kb/ALFT4wf+nf4f1+hcD/wsx/6+Yb/0msfzV4+/73wz/wBg2af+ncEfy9192fz2FABQB+3n/Bvxq66b/wAFB7CzJAOv/Br4l6QmcZLQ/wBga9hffbojHjnaG7Zr5fi+PNk7f8mJoS+/nh/7cfrfgrV9nxtCP/P7KsfSXy9hW/Kkz+6Kvyo/r4/Cn/g4btDcfsDaXMIUkFh8fvh1ds7BM24fw949sfOj3ncHZrxYCYsv5c7gjyjIR9Xwc7ZvJX3wlZevv0nb8L/I/H/G6PNwZTdk+TOsDK+nu3o4yF1fr71tNbN9Ln8O9fqR/IwUAFAH+nF+ypBLa/svfs3W067J7f4CfB6CZNytsli+Hnh2ORdyFkba6kblZlOMqSMGvw3MHfH41rZ4vEtfOtM/0A4cTjw9kMWrOOTZWmuzWBoJrTTfse+VyHsn+YB+0JrK+I/j78cPEKOJF174v/EvWVkXG2RdU8aa1fB1xHCMMJwwxDEMHiNPuj90wceTCYWH8mGoR/8AAaUV59u5/n1ndX2+dZvXTuq2aZhVT7+0xdWd9l37L0R5BXSeWFABQAUAFABQAUAFABQAUAFABQAUAFABQB/Rd/wbaf8AJ1Hx1/7N+l/9WN4Ir4zjX/cMJ/2GL/0zVP3LwH/5KPOP+xK//U7CH9mFfmp/U5/J1/wc0f8AIc/Y1/7BPx5/9LPhDX6DwP8ABmX+LCfliD+bvH7+Nwt/16zn/wBKyw/lmr7w/ncKACgAoAKAP6Gf+Dbr/k8T4y/9m06//wCrR+FdfHca/wDItw3/AGHQ/wDTGIP27wI/5KjNf+xBW/8AVjlx/aLX5mf1WfyS/wDBzH/yPH7I3/YqfGD/ANO/w/r9C4H/AIWY/wDXzDf+k1j+avH3/e+Gf+wbNP8A07gj+Xuvuz+ewoAKAP1G/wCCL/imPwn/AMFKv2arq4lMdprGo/EDwtOofYJZPEvwr8b6RpkTHow/tq502TYQdzRqBhyrL4PE1P2mSY5LeMaNReXJiKUpf+SqR+h+FWIWG49yGUnaNWeNw8tbXdfLsXSpr/wbKm7dbd9T/QYr8gP7WPxU/wCC/Oni9/4J3+J7khCdJ+Kfwv1BSzSKVMmr3WlZjCfK77dTYFZcRiMu4/epGK+n4Rds5pr+ahXX/kql/wC2n5R4zw5+B8RLT91mOXT3fWrKnpbd/vNnpa73SP4TK/Vj+PQoAKAP9Q34IaedI+C3wh0ookZ0z4X+ANPMce8JGbLwppNsUTzFR9imPau9VfAG5QcgfhOKlzYnEy/mr1pffUkz/QnKIeyyrLKdkvZ5fgoWWy5MNTjZXs7aaXR2Hi3xDaeEvCvibxXfsiWPhjw/rPiG9eQssa2mi6dc6lcs7KrMEWG2csVVmABIUnis6cHUqQprepOMF6ykor8WdWJrxw2GxGJnZQw9CrXm3ty0qcqkr21taL2P8sq7u7m/u7q+vJnuLu9uJru6nkwZJ7m4kaaeZyAAXkldnbAAyx4r95SSSSVkkkl2S0SP87pSlOUpzblKcnKUnu5Sd235tu5XpkhQAUAFABQAUAFABQAUAFABQAUAFABQAUAf0Xf8G2n/ACdR8df+zfpf/VjeCK+M41/3DCf9hi/9M1T9y8B/+Sjzj/sSv/1Owh/ZhX5qf1Ofydf8HNH/ACHP2Nf+wT8ef/Sz4Q1+g8D/AAZl/iwn5Yg/m7x+/jcLf9es5/8ASssP5Zq+8P53CgAoAKACgD+hn/g26/5PE+Mv/ZtOv/8Aq0fhXXx3Gv8AyLcN/wBh0P8A0xiD9u8CP+SozX/sQVv/AFY5cf2i1+Zn9Vn8kv8Awcx/8jx+yN/2Knxg/wDTv8P6/QuB/wCFmP8A18w3/pNY/mrx9/3vhn/sGzT/ANO4I/l7r7s/nsKACgD6R/Y58fRfC39rL9mr4h3M/wBmsPCPxz+FutatNvZAuiW3jPR/7cVmV4yEl0hr2J8tsKuRIrxllbizKj9Yy/HUUrupha8Yr+86UuT/AMmse9wtjVl3EuQY6UuWGGzjLqtV3t+5jiqXttbrR0udPpZ63Wh/pm1+Hn99n5N/8Fv9IbVf+CZ37QkqKHk0e8+EmroCxQhYvjN4As7hl+dEYpaX1w+19wZVYRoZvKx9BwtLlzzB/wB5YiP/AJbVmvxS/wCGPzbxcpOpwDnbWrpSyyrvbRZrgoy6paRm3Z/JXsfwC1+un8XhQBPbW095c29nbRma5up4ra3iUgNLPPIsUUaliFBeRlUFiBk8kDmk2km3okm2/JbjjFzlGMVeUmoxXdt2S+bZ/qjaTp0WkaVpmkwHMOl6fZadCcMMxWVtHbRnDvK4ykQOGkkYfxO5yx/BJS5pSk95Nyfzdz/RWlBUqdOmtqcIQXpCKit23su79WfHP/BR/wCIP/CsP2EP2r/FyzfZrhfgp408NafcgZa31bx3pzeBNHnjGQPNh1TxJZyQ7gyCVUMkciBo29PJaPt82y+na6+tUptd40pe1kv/AAGDufLcdY3+z+DuJMSnyyWU4uhCX8tTGU3g6Ul5qpXi1fS6V01of5vFftJ/CQUAFABQAUAFABQAUAFABQAUAFABQAUAFABQB/Rd/wAG2n/J1Hx1/wCzfpf/AFY3givjONf9wwn/AGGL/wBM1T9y8B/+Sjzj/sSv/wBTsIf2YV+an9Tn8nX/AAc0f8hz9jX/ALBPx5/9LPhDX6DwP8GZf4sJ+WIP5u8fv43C3/XrOf8A0rLD+WavvD+dwoAKACgAoA/oZ/4Nuv8Ak8T4y/8AZtOv/wDq0fhXXx3Gv/Itw3/YdD/0xiD9u8CP+SozX/sQVv8A1Y5cf2i1+Zn9Vn8kv/BzH/yPH7I3/YqfGD/07/D+v0Lgf+FmP/XzDf8ApNY/mrx9/wB74Z/7Bs0/9O4I/l7r7s/nsKAO18P/AA38feK/Cvjjxz4a8H+INc8HfDO30K7+IPifTdMubrRPBtt4n1J9H8OzeItRiRrbS01vVI5NP0v7VJGb27R4LcPIpAynXo06lKlOpCFSu5qjTlJKdVwjzTUI7y5Y6ytstWddDAY3E4bGYzD4WvWwuXxoyxuIp05SpYWOIqOlQdeaXLTVWonCnzNc0k0rtHFqzIysrFWUhlZSQysDkMpGCCCMgjkHkVqcm2q0aP8ATh/ZY+LEXx1/Zs+BPxhS4S5uPiJ8KfA/ijVWR45DDr+o+H7F/EdjK0X7v7Rp2vjUtPulTAS4tpUwNuB+G4/D/VMbi8Nayo4irTj5wU3yP0lDla8mf6AcO5ks4yHJ80UlJ47LcHiKmqdq1ShB14NrTmp1vaQl/eiz5+/4Km+HW8Uf8E8/2tNMSJ5TbfCTV/ERVMEhfB95p/i15TkEbIU0RppO4jjYgg4I7Mhn7POMvl3xEYf+DE6f48x4viJQeI4I4lppX5csq19O2FlDEt/JUrvyR/nPV+zH8MhQB7H+zr4YPjb9oL4FeDAnmHxd8Y/hj4YEe1m3nX/G2iaUE2p87bvte3anzHOF5xXNjanssHi6v/PvDV6n/gFKUv0PVyPD/W87yfCWv9azTL8PbXX22Lo07aa683TU/wBPuvws/wBBD8Gf+Dhr4tp4I/Yj0T4aW9wg1L41fFjwvo1xZmUI8vhfwRFd+OtUu1j3B5ktPEek+DIHXY0aG/jd3RxEsn1nB2H9rmkq7Xu4XD1JJ/8ATyralFfOEqr+XqfjnjdmawnCVHARa9pm2ZYelKN7N4fCKWMqStu+WvTwsXpZc6badk/4h6/UT+SQoAKACgAoAKACgAoAKACgAoAKACgAoAKACgD+i7/g20/5Oo+Ov/Zv0v8A6sbwRXxnGv8AuGE/7DF/6Zqn7l4D/wDJR5x/2JX/AOp2EP7MK/NT+pz+Tr/g5o/5Dn7Gv/YJ+PP/AKWfCGv0Hgf4My/xYT8sQfzd4/fxuFv+vWc/+lZYfyzV94fzuFABQAUAFAH9DP8Awbdf8nifGX/s2nX/AP1aPwrr47jX/kW4b/sOh/6YxB+3eBH/ACVGa/8AYgrf+rHLj+0WvzM/qs/kl/4OY/8AkeP2Rv8AsVPjB/6d/h/X6FwP/CzH/r5hv/Sax/NXj7/vfDP/AGDZp/6dwR/L3X3Z/PYUAfrr+xrosyf8Ew/+CtXiKRMW9xY/se6LaSB/vTWnxj1e+1FGTGPkS+0tkfP8cgwOp+dzKS/t3h6HVPMpP0eGio/lI/TeFqTXh94lV2tJQ4YpRd+sc0qzmrek6dn6n5FV9EfmR/bZ/wAG9Hx9X4j/ALH3iL4L6jemfXv2fPHl/Y2Vs4G+LwH8R5r/AMXeHpDKTvmP/CUjx7aKrZ+y2lnZQKVhEMa/l/GOE9hmUMVFWhjKSbf/AE+o2pz/APKfsX5tt73P608Es6+v8L18qnO9bJMZOEIvdYPHOeKoO/X/AGj67H+7GEI7WR+xX7R/gwfEf9nn47/D0wm4/wCE6+DXxO8HrCoZnlfxJ4K1vR0RAkcz+YXvF8spFI4faUjdgFPzeCq+xxmErbeyxNCpf/BVjLy7dz9Qz3CfX8kzjA25vrmVZhhba3ft8JVpK1k3e8tLJu+yuf5hNfuh/n2FAH6Ef8EpfA0nxC/4KI/soaFHCJv7N+J9t45cN91I/hno2r/EV5iSCAYh4W3x5xmURqp3MtePxBV9jk2YTvbmoOl/4PlGjb5+0+4+28OMG8dxxw3RSv7PMI4x+SwFKrjr/L6vp52W5/orV+NH9xn8Uf8AwcQ/HmP4hftbeDPgppd+bnSPgF8PbdNWtg+YrTx78TGs/E+tKqgbCT4PtPh8HbczLMJ4WCNEwP6dwbhPY5dVxUlaWLrPlfejQvTj/wCVHW+Vmfyf44ZysbxLhMppz5qWS4JKpG+kcZmHJiKq/wDCWGCv1vdaWP5/a+vPxYKACgAoAKACgAoAKACgAoAKACgAoAKACgAoA/ou/wCDbT/k6j46/wDZv0v/AKsbwRXxnGv+4YT/ALDF/wCmap+5eA//ACUecf8AYlf/AKnYQ/swr81P6nP5Ov8Ag5o/5Dn7Gv8A2Cfjz/6WfCGv0Hgf4My/xYT8sQfzd4/fxuFv+vWc/wDpWWH8s1feH87hQAUAFABQB/Qz/wAG3X/J4nxl/wCzadf/APVo/CuvjuNf+Rbhv+w6H/pjEH7d4Ef8lRmv/Ygrf+rHLj+0WvzM/qs/kl/4OY/+R4/ZG/7FT4wf+nf4f1+hcD/wsx/6+Yb/ANJrH81ePv8AvfDP/YNmn/p3BH8vdfdn89hQB/R18BfhRe+Bv+De79rzx/qdnJb3Pxl+JXh/xHpE8kIiN14T8LfFf4P+B9PZCcyTRp4k0LxgySsVjZZQsUQCtNcfF4vEKrxhl1GLusNQnCSvtUqYfE1X6e5On/Wi/dcmy2eD8E+JsbUi4yzXH0a9JtW5sNh8yyvBw82lXo4pp7a6Lq/5xa+0Pwo/Wv8A4IuftV237MX7avhCz8TaoNN+HHxwth8I/GM07RrZWGoa3eW83gTXrl5NsdtHp3i+LTtPvdQklii0/Q9b1q6mYxowr57ibL3jssqOEeathX9YpJbtRTVWC781NyaW7nGKR+l+FPEceH+K8NDEVPZ4DN4/2Zim7ckKlWUXg60m7KKp4pQhKbaUKNarJ6I/vzr8jP7OP8yL9q/4WS/BH9pr4+fCV7V7S38AfFvx54c0qJ1kUSaBZeI9Q/4Ry8iEoWQ2+oaA+m39q7gGS3uYn/izX7jl+I+tYHCYi93Ww9Kcv8bgudeqnzJ+aP4A4ky55TxBnWW8vJHBZnjaFNa60IV5+wkr68s6Ps5xvvGSPn6uw8U/f7/g3V+Fsni39srxx8S7m083TPhJ8HNbe3vCjMLXxT461jSfDmlRhgyrG914bj8a4ZhJuSB0CfMZI/keMsR7PLaVBP3sRiY3XenSjKcvun7L7z9p8DsueJ4pxmPlG9PLMrquMrfDiMZVpUKav0csOsX30TXmf2JfGn4s+E/gR8JviJ8Y/HV4ll4U+G3hHWvFusyGRY5biHSbOS4h0yz3BvN1PWLsW+k6VaojzXmpXtpawRyTTIjfm+Fw9TF4ijhqSvUr1I04+Tk7OT/uxV5SfSKbeiP6gzXMsNk+W47NMZJQw2Aw1XE1XezkqUXJU4d6lWXLTpxSblUnGKTbSP8AM3+MXxR8S/G74rfEb4v+MZUl8UfEvxn4i8a635WBbwXviHU7nUns7RVSNY7KwWdbKxiVESG0t4YkRVQKP2/DUIYXD0cNT/h0KUKUe7UIqN35u133bZ/AuaZjiM3zLHZpimniMfiq+Lq22U69SVRwjorQhdQgkklGKSWh5vW5wBQAUAFABQAUAFABQAUAFABQAUAFABQAUAFAH9F3/Btp/wAnUfHX/s36X/1Y3givjONf9wwn/YYv/TNU/cvAf/ko84/7Er/9TsIf2YV+an9Tn8nX/BzR/wAhz9jX/sE/Hn/0s+ENfoPA/wAGZf4sJ+WIP5u8fv43C3/XrOf/AErLD+WavvD+dwoAKACgAoA/oZ/4Nuv+TxPjL/2bTr//AKtH4V18dxr/AMi3Df8AYdD/ANMYg/bvAj/kqM1/7EFb/wBWOXH9otfmZ/VZ/JL/AMHMf/I8fsjf9ip8YP8A07/D+v0Lgf8AhZj/ANfMN/6TWP5q8ff974Z/7Bs0/wDTuCP5e6+7P57PsD9iv9i34vftu/GLRPhn8NtGv4dAjv7Cb4i/ESXT5pvDPw68LSXA+3axq12TBazapJax3I8O+HBdw6h4i1GNbW2MNrHfX9j52Z5nhsrw069eSc7NUaN0p1qltIxWrUb2552ahHV3dk/p+FOFMz4tzSll+ApTVFTg8djnBvD4HDt+/VqS0i6jipewocynXmuWNoqc4f2Lf8FQfhX4O+B//BH34yfCH4fad/Zfgz4c+Afg/wCE/D1mz+bP9g0j4u/DW2F1fXBAa71PUJVl1DVL6XM19qN1dXk5aad2P5vkWIqYriPDYms+arWrYmpN9Lyw9d2S6RW0VsopJbH9ReIOXYXKPDDNMswUPZ4TA4LLMNQje8uSlmeAjzTl9qpN3nUm9Z1JSk9Wz+Cmv1k/jYVWZGVlYqykMrKSGVgchlIwQQRkEcg8igNtVo0f3jf8EcP+Chul/tgfAvT/AIZ+P9fgb9ov4NaLYaN4rtr+6VdT+IHhGxSLT9C+JNis8r3Gp3MkK22l+OJYjI9p4lCandx2dp4m0iFvyfiTJpZdinXowf1LEycqbS92jUes6DsrRV7ypd4e6ruEj+xvC3jenxPk9PL8bWX9uZVShSxMZy/eY3DQShRx8LvmqSa5aeLau44j95JRjiKSPw8/4OFv2aL74b/tT+Hv2htH0ox+Dfj/AOFdPg1jUYEb7PB8T/AVlbeH9WtLhIwYbQ6n4Oh8IanZu5ik1a9i8RzrHJLZXk7/AFPB2OVfATwcpfvcHUbjF7uhWbnFrq+Wo6kX/KnBdUj8j8bcgngOIqGd0qdsLnWGgqtRJ8qzDBQjQqxkl7sPaYVYWpDVOrNV5WbhOT/n7r68/FT+43/ggP8Asy3vwV/Y9vfi14jsJbDxZ+0p4jg8ZW8NxG8FxF8NvDMF3ovw9FxDLCj/APE0lu/FXi3T7lJZbe70LxTo88QjYy7/AMs4uxyxWZLDwd6eBg6Ttqvb1GpVrO/2UqdOS3U6ckz+uvBjIJ5TwvPMq8HDE59XWKipJqSwGHUqWBuml/EcsRiYSTanRxFJq2t/y7/4L0f8FD9P+LHiiD9jb4P64l94C+HWu/2n8adf0+aT7N4m+JOkTXFrp/ge3kVI0u9E8BP517rEiz3Vlqfi+5toRBbz+CoLu/8Ae4TyZ4em8yxMLVq0OXCwa1hQkk3VfaVbaOicaabu1VaX574yccQzLELhbK6yngsDW9pmtaDfLiMfScowwkXZKVHBu86rTlCpipRVovCKU/5tq+1PwcKACgAoAKACgAoAKACgAoAKACgAoAKACgAoA+vP2aPjJ+yj8L9K8VWn7Rn7Gf8Aw1Jqerahptz4Y1f/AIaI+JHwR/4RGwtra5i1DTvsHgXS9Qt9e/tO4lt7n7ZqDRzWX2byYFZJnI87HYbMK8qbwWZ/UIxUlUj9ToYr2jbVpXqyThyq6stHe72Pp8gzThvL6eJjnvCv+sVSrOnLD1f7cx+U/VoRjJTp8mDpzjW9pJxlzTs4ctlo2fpP+zZ/wVp/ZD/ZD8Va742/Z3/4Jk/8K98T+JvD58La3qf/AA2f8TvFn23QW1Gx1Y2P2Lxx8N/Eun22dQ02yuPtVpaQXn7nyhceRJLHJ4mN4ezHMacKWMzz21OE/aRj/ZlCnafK43vSrwb0k1ZtrXa595kPiVwxwzia2LyPw/8AqOIxFD6vWqf61Zhieej7SFXk5MXgMRCPv04S5oxjPS3NZtP7M/4ibv8AqyT/AM2S/wDxB15v+o3/AFNP/LL/AO+z6r/iP/8A1SX/AJnv/wADHyd+01/wWL/Zb/bFn8G3P7R3/BNX/hYs/wAPoteg8IP/AMNj/ETwj/ZEXid9Ik1xdvgT4YeGEv8A7c+g6Sd2pretbfZMWZtxPcib0MDw3j8tVVYLO/Yqs4Op/wAJtGpzez5uT+LXqWtzy+G1763srfNcQeKPDvFDwss94C+vPBKssK/9acdhvZLEOk6y/wBjy/DqfO6NP+Jz8vL7vLeV/wA3f2jPjr+xp8SvAlloH7P37CH/AAzP43g8TWGqXnxA/wCGoPip8Zft/hy30/Vra+8Lf8Ip410iw0i1/tG/vNK1L+24pjfWn9j/AGOGNodQuWX2sFhMzoVXPGZt9epODiqP1DD4a024tVPaUpOT5UpR5bWfNd6pHwme5xwrj8HCjkvB39gYtYiFSWN/1hzHNeehGFWM8P8AVsXShSjzzlTqe2T54+y5UrTkfEdeofJBQAUAfWP7Mvxe/Zb+FsHjKP8AaO/Y/wD+Gp59bl0F/CFx/wANA/ET4H/8IRFp6auuuQ+V4E0zUE8S/wDCQveaS/mamYm0n+xttmHGo3O3z8dhsfXdL6lmX1BRU/aL6nRxXtb8vI/3slyclpfD8XNr8KPpOH8z4dy5YpZ7wx/rE6rovCy/trHZR9UUFV9srYOnNV/budN3qW9n7L3b88rfpZ+zd/wVi/Y+/ZF8Y6z4/wD2ef8AgmN/wr7xb4g8M3Hg/V9W/wCG0fih4s+1+HLrVNK1qfTvsHjj4c+JdMt9+p6Jpdz9rtbKG+X7L5KXS281xFL4mN4fzLMacaOMzz21OE1UjH+zKFO01GUVK9KtCT92UlZtrW9rpH32Q+JPC/DOKq43JPD/AOpYmvh5YWrU/wBa8wxPNQlUp1XDkxeBxFON6lKnLmjBT92ylyuSf2l/xE3f9WSf+bJf/iDrzP8AUb/qaf8All/99n1f/Ef/APqkv/M9/wDgY+SP2mf+Cwv7K37Yl94R1L9o3/gml/wsW98CWmsWPhSb/hsn4jeEf7Ktdfm0+fVovL8C/DLwxFffa5dKsH36lHeSQeRttnhWWYSehgeHMflqqRwWd+xVVxdRf2bRqczgmo/xa9S1uZ/Da99b6HzOf+KHDvFE8NUz3gH69PBxqwwz/wBacdhvZxrOEqqtg8vw6nzOnB3qKTVvdau7/POg/trf8E0PDl9HqOn/APBIPRLi4idHWPXv21PjB4qsSU3YEml+J/A2saZMh3HfHNaPHJhd6tsTb2TyzPJrlfEckn/JlmGpv/wKnVjJfJniUeLOAaE1OHhjSlJNO1bivNMRDTvTxGDq02tdU4tPrsj9DPAn/BxZ4C+F3huy8HfDX/gnh4U+H/hPTsmx8NeDPjlpXhnQrVmREeSHStG/Z5s7JJZFijEswh82XYpldyAa8erwZWrzdSvnNStUlvOrhZTm/WUsY3bsr6H2+D8csFl1CGFwHA+GwWGp/Bh8Lm9PD0Y6JNqnSySME3ZXdru2rZ4f+2f/AMF3f+GvP2Zvih+zr/wyx/wr3/hZNp4atf8AhMf+F4f8JZ/Yv/CPeNPDni/f/wAI/wD8Kg8Nf2j9s/4R/wDs/b/blj9n+1/a90/2f7NN1ZZwp/Z2OoY36/7b2Dm/Z/VfZ83PSnT+P6zPltz3+B3tbS915HFXjF/rNkGYZH/q79S+vxoR+tf2v9Z9l7DFUMTf2H9mYfn5vY8n8aHLzc2vLyv+fGvsD8TCgD0P4UfFf4hfA/4heFvip8K/FOp+DfHng3U4tV0DX9KlCT206Bo5re4hkWS21DTNQtpJrDVtJv4bnTtV065udP1C2uLO4mhfHEYejiqNTD4inGrSqx5Zwls10ae6knZxkmpRkk000md2W5ljsox2HzHLsRUwuMwtRVKNam7OLWjjJO8Z05xbhUpzUoVISlCcZRk0/wCkKD/gr7+yB+3X+z7dfs5/8FG/AHiT4faneixu1+K3wv0mXXtC0zxNo6J/Znjjw9ZRR6z4t8G+Id019DPp1rovi7SLvTbvUdKvJ5dK1W600fFPhzMcqxixuS1oVoq6+r15ck5U5fFSm3y06sNE1JypyUlGSSlFSP3ZeJ3DHGGSSyLjrBV8FUnyS/tLL6TrUaeIpJezxdCCVXE4WvrNOEaWJpSpynTm3TqSpnxB4A/Zo/4JB/D7xtD44+Kv/BRHWfjR8ONL1Ianpfwn8F/s7fFnwh4p8W2ttcLcW2ieJvEtxaajHpdtMsT2OqrbWfh241K1Zrmw13w7PPAkfq1sdxHWpOlh8mjhq0o8ssRVxmHqU6bas5QgnHma3jdzUXo4TSZ8lgsg8McFi1jMx44q5rgKc/aU8twmR5lhcTiYxfNGjiK8o1FTi7OFTlhQdSL5oVqDaS+if23f+C8niH4heCrj4HfsVeD9X+Bvw3GkReGJfiLqhsNO+Ikvhq1tI9Ni0PwRoeh3F7pPw505LGI2cOq2+rax4i+wPbnSm8I3tszScWV8Jwo1ViszqRxVfmdT2Mbujzt8zlVnNKVaV3flcYwvfm9ome3xb4x18dhJZRwphauUYD2Sw7x1Tkhjnh4xVNUcJRoynSwNPkXKqkatWvycvs3hpx1/nRZmdmd2LMxLMzEszMxyWYnJJJOSTyTya+zPw3cSgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAKACgAoAA/9k=",FQ=[{name:"Roy Rolston",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"roy-rolston@partiesunited.co",phone:"+91 8364-764417",address:null,gstType:"Registered Regular",gstin:"27YQPCH7868M1Z4"},{name:"Aloysius Albuquerque",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"aloysius.albuquerque-418@gmail.com",phone:"+91 9624-847744",address:null,gstType:"Consumer",gstin:null},{name:"James",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:null,phone:null,address:null,gstType:"Consumer",gstin:null},{name:"Mary",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"mary-654@partiesunited.co",phone:"+91 6578-469775",address:null,gstType:"Consumer",gstin:null},{name:"Robert",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"robert-153@gmail.com",phone:"+91 8187-238152",address:null,gstType:"Consumer",gstin:null},{name:"Patricia",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"patricia_477@partiesunited.co",phone:null,address:null,gstType:"Consumer",gstin:null},{name:"John",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"john_629@redis.rs",phone:"+91 9912-497940",address:null,gstType:"Consumer",gstin:null},{name:"Jennifer",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"jennifer_241@yahoo.co.in",phone:"+91 7525-888566",address:null,gstType:"Consumer",gstin:null},{name:"Michael",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"michael_330@redis.rs",phone:"+91 6392-754783",address:null,gstType:"Consumer",gstin:null},{name:"Linda",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"linda.739@redis.rs",phone:"+91 7645-479546",address:null,gstType:"Consumer",gstin:null},{name:"William",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"william_187@gmail.com",phone:"+91 6040-716971",address:null,gstType:"Consumer",gstin:null},{name:"Elizabeth",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"elizabeth-739@redis.rs",phone:"+91 9086-927694",address:null,gstType:"Consumer",gstin:null},{name:"David",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"david.231@redis.rs",phone:"+91 8933-614178",address:null,gstType:"Consumer",gstin:null},{name:"Barbara",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"barbara-287@yahoo.co.in",phone:"+91 8884-319024",address:null,gstType:"Consumer",gstin:null},{name:"Richard",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"richard-971@redis.rs",phone:"+91 8618-127941",address:null,gstType:"Consumer",gstin:null},{name:"Susan",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"susan-915@redis.rs",phone:"+91 7251-099321",address:null,gstType:"Consumer",gstin:null},{name:"Joseph",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"joseph-107@partiesunited.co",phone:"+91 8663-691738",address:null,gstType:"Consumer",gstin:null},{name:"Jessica",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"jessica.990@gmail.com",phone:"+91 6998-742236",address:null,gstType:"Consumer",gstin:null},{name:"Thomas",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"thomas.926@generic_indian.in",phone:"+91 7084-655002",address:null,gstType:"Consumer",gstin:null},{name:"Sarah",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"sarah@generic_indian.in",phone:"+91 7550-184329",address:null,gstType:"Consumer",gstin:null},{name:"Charles",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"charles.73@generic_indian.in",phone:"+91 9789-506872",address:null,gstType:"Consumer",gstin:null},{name:"Karen",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"karen.117@redis.rs",phone:"+91 9267-675391",address:null,gstType:"Consumer",gstin:null},{name:"Christopher",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:null,phone:"+91 7327-130379",address:null,gstType:"Consumer",gstin:null},{name:"Nancy",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"nancy-257@generic_indian.in",phone:"+91 8224-410113",address:null,gstType:"Consumer",gstin:null},{name:"Daniel",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"daniel_417@partiesunited.co",phone:"+91 7927-461249",address:null,gstType:"Consumer",gstin:null},{name:"Lisa",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"lisa-919@gmail.com",phone:"+91 8757-609167",address:null,gstType:"Consumer",gstin:null},{name:"Matthew",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"matthew_656@gmail.com",phone:"+91 7885-004818",address:null,gstType:"Consumer",gstin:null},{name:"Betty",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"betty-750@partiesunited.co",phone:"+91 6023-939214",address:null,gstType:"Consumer",gstin:null},{name:"Anthony",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"anthony.855@generic_indian.in",phone:"+91 7786-783597",address:null,gstType:"Consumer",gstin:null},{name:"Margaret",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"margaret.476@redis.rs",phone:null,address:null,gstType:"Consumer",gstin:null},{name:"Mark",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"mark_883@yahoo.co.in",phone:"+91 6085-686899",address:null,gstType:"Consumer",gstin:null},{name:"Sandra",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:null,phone:"+91 8370-381962",address:null,gstType:"Consumer",gstin:null},{name:"Donald",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"donald.588@redis.rs",phone:"+91 9391-684888",address:null,gstType:"Consumer",gstin:null},{name:"Ashley",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"ashley_875@partiesunited.co",phone:"+91 8484-066804",address:null,gstType:"Consumer",gstin:null},{name:"Steven",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"steven.621@gmail.com",phone:"+91 9508-736407",address:null,gstType:"Registered Regular",gstin:"22YVIPP4362P1Z0"},{name:"Kimberly",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:null,phone:"+91 6336-613829",address:null,gstType:"Consumer",gstin:null},{name:"Paul",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"paul_94@gmail.com",phone:"+91 9636-016561",address:null,gstType:"Consumer",gstin:null},{name:"Emily",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"emily.9@partiesunited.co",phone:"+91 9446-701003",address:null,gstType:"Consumer",gstin:null},{name:"Andrew",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:null,phone:"+91 6932-393648",address:null,gstType:"Registered Regular",gstin:"30VGGPM2265X1Z7"},{name:"Donna",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"donna_761@generic_indian.in",phone:"+91 8500-322971",address:null,gstType:"Consumer",gstin:null},{name:"Joshua",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"joshua_519@partiesunited.co",phone:"+91 9554-755939",address:null,gstType:"Consumer",gstin:null},{name:"Michelle",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"michelle_12@gmail.com",phone:null,address:null,gstType:"Consumer",gstin:null},{name:"Kenneth",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"kenneth-395@partiesunited.co",phone:"+91 9464-655370",address:null,gstType:"Consumer",gstin:null},{name:"Dorothy",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"dorothy-735@partiesunited.co",phone:"+91 7618-732184",address:null,gstType:"Consumer",gstin:null},{name:"Kevin",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"kevin.407@gmail.com",phone:"+91 6609-978693",address:null,gstType:"Consumer",gstin:null},{name:"Carol",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"carol_598@yahoo.co.in",phone:"+91 6810-371783",address:null,gstType:"Consumer",gstin:null},{name:"Brian",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"brian-175@yahoo.co.in",phone:"+91 9108-370654",address:null,gstType:"Registered Regular",gstin:"32WVYPD4263C1Z6"},{name:"Amanda",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:null,phone:"+91 7132-399853",address:null,gstType:"Consumer",gstin:null},{name:"George",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"george.582@yahoo.co.in",phone:"+91 9174-381459",address:null,gstType:"Consumer",gstin:null},{name:"Melissa",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"melissa.138@partiesunited.co",phone:null,address:null,gstType:"Consumer",gstin:null},{name:"Edward",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"edward@yahoo.co.in",phone:"+91 7864-241916",address:null,gstType:"Consumer",gstin:null},{name:"Deborah",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:null,phone:"+91 8420-572864",address:null,gstType:"Consumer",gstin:null},{name:"Ronald",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:null,phone:null,address:null,gstType:"Consumer",gstin:null},{name:"Stephanie",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"stephanie-760@yahoo.co.in",phone:"+91 7958-877954",address:null,gstType:"Registered Regular",gstin:"27GVTPF2529Z1Z0"},{name:"Timothy",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"timothy.870@gmail.com",phone:"+91 7042-295454",address:null,gstType:"Registered Regular",gstin:"22NYRPJ7193Q1Z3"},{name:"Rebecca",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"rebecca-154@generic_indian.in",phone:"+91 9179-230036",address:null,gstType:"Registered Regular",gstin:"32ZCJPN2356I1Z3"},{name:"Jason",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"jason-903@partiesunited.co",phone:"+91 8332-016355",address:null,gstType:"Consumer",gstin:null},{name:"Sharon",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"sharon.389@yahoo.co.in",phone:"+91 8857-354880",address:null,gstType:"Consumer",gstin:null},{name:"Jeffrey",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"jeffrey_618@gmail.com",phone:"+91 7636-744410",address:null,gstType:"Consumer",gstin:null},{name:"Laura",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"laura.821@generic_indian.in",phone:"+91 6640-756477",address:null,gstType:"Consumer",gstin:null},{name:"Ryan",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"ryan-786@yahoo.co.in",phone:"+91 7598-295525",address:null,gstType:"Consumer",gstin:null},{name:"Cynthia",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"cynthia.400@generic_indian.in",phone:"+91 7518-806673",address:null,gstType:"Consumer",gstin:null},{name:"Jacob",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"jacob_155@redis.rs",phone:"+91 7607-980767",address:null,gstType:"Consumer",gstin:null},{name:"Kathleen",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"kathleen.110@yahoo.co.in",phone:"+91 9288-658480",address:null,gstType:"Consumer",gstin:null},{name:"Gary",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:null,phone:"+91 9893-841572",address:null,gstType:"Consumer",gstin:null},{name:"Amy",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"amy.309@yahoo.co.in",phone:"+91 8738-127052",address:null,gstType:"Consumer",gstin:null},{name:"Nicholas",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"nicholas_204@redis.rs",phone:"+91 7216-717493",address:null,gstType:"Consumer",gstin:null},{name:"Shirley",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"shirley.761@redis.rs",phone:"+91 6820-763351",address:null,gstType:"Registered Regular",gstin:"07SSCCK4795S1Z10"},{name:"Eric",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"eric@generic_indian.in",phone:"+91 8658-962487",address:null,gstType:"Consumer",gstin:null},{name:"Angela",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:null,phone:"+91 9544-644681",address:null,gstType:"Consumer",gstin:null},{name:"Jonathan",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"jonathan.581@partiesunited.co",phone:"+91 8196-534803",address:null,gstType:"Registered Regular",gstin:"07JNQPI1074A1Z2"},{name:"Helen",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"helen_972@generic_indian.in",phone:"+91 7132-446467",address:null,gstType:"Consumer",gstin:null},{name:"Stephen",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"stephen_100@yahoo.co.in",phone:"+91 8066-679022",address:null,gstType:"Consumer",gstin:null},{name:"Anna",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"anna_414@yahoo.co.in",phone:null,address:null,gstType:"Consumer",gstin:null},{name:"Larry",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"larry.516@yahoo.co.in",phone:null,address:null,gstType:"Registered Regular",gstin:"22BRXPB6438V1Z3"},{name:"Brenda",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"brenda.815@partiesunited.co",phone:"+91 7423-101842",address:null,gstType:"Consumer",gstin:null},{name:"Justin",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"justin.401@redis.rs",phone:"+91 8866-453732",address:null,gstType:"Consumer",gstin:null},{name:"Pamela",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"pamela@partiesunited.co",phone:"+91 7563-921607",address:null,gstType:"Consumer",gstin:null},{name:"Scott",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"scott.883@partiesunited.co",phone:"+91 9988-884200",address:null,gstType:"Consumer",gstin:null},{name:"Nicole",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"nicole@yahoo.co.in",phone:"+91 7772-518773",address:null,gstType:"Consumer",gstin:null},{name:"Brandon",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"brandon@generic_indian.in",phone:"+91 8947-357902",address:null,gstType:"Consumer",gstin:null},{name:"Emma",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"emma@generic_indian.in",phone:"+91 8065-422177",address:null,gstType:"Consumer",gstin:null},{name:"Benjamin",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"benjamin_861@partiesunited.co",phone:"+91 8785-964341",address:null,gstType:"Consumer",gstin:null},{name:"Samantha",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"samantha-387@gmail.com",phone:"+91 6411-733274",address:null,gstType:"Consumer",gstin:null},{name:"Samuel",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"samuel-67@partiesunited.co",phone:"+91 8279-383554",address:null,gstType:"Registered Regular",gstin:"30GNLPE7564C1Z0"},{name:"Katherine",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"katherine.329@generic_indian.in",phone:"+91 7806-866367",address:null,gstType:"Consumer",gstin:null},{name:"Gregory",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"gregory_137@redis.rs",phone:"+91 7086-527568",address:null,gstType:"Consumer",gstin:null},{name:"Christine",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"christine@redis.rs",phone:"+91 9322-241005",address:null,gstType:"Consumer",gstin:null},{name:"Frank",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:null,phone:"+91 9610-590035",address:null,gstType:"Consumer",gstin:null},{name:"Debra",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"debra-43@partiesunited.co",phone:"+91 9320-275225",address:null,gstType:"Consumer",gstin:null},{name:"Alexander",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"alexander-745@gmail.com",phone:"+91 6806-881315",address:null,gstType:"Consumer",gstin:null},{name:"Rachel",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"rachel.9@partiesunited.co",phone:"+91 8891-016921",address:null,gstType:"Consumer",gstin:null},{name:"Raymond",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"raymond.674@gmail.com",phone:"+91 6722-485384",address:null,gstType:"Consumer",gstin:null},{name:"Catherine",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"catherine@generic_indian.in",phone:"+91 6087-083904",address:null,gstType:"Consumer",gstin:null},{name:"Patrick",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"patrick-954@generic_indian.in",phone:null,address:null,gstType:"Consumer",gstin:null},{name:"Carolyn",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"carolyn_427@generic_indian.in",phone:"+91 6559-056027",address:null,gstType:"Consumer",gstin:null},{name:"Jack",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"jack.52@generic_indian.in",phone:"+91 9271-276848",address:null,gstType:"Registered Regular",gstin:"27QTMPP9445O1Z2"},{name:"Janet",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"janet-238@generic_indian.in",phone:"+91 9480-057399",address:null,gstType:"Registered Regular",gstin:"30YVEPM2956X1Z4"},{name:"Dennis",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"dennis-538@yahoo.co.in",phone:"+91 9056-153204",address:null,gstType:"Consumer",gstin:null},{name:"Ruth",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"ruth_952@yahoo.co.in",phone:"+91 9629-547895",address:null,gstType:"Consumer",gstin:null},{name:"Jerry",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"jerry_234@generic_indian.in",phone:null,address:null,gstType:"Registered Regular",gstin:"27CZCPT5025J1Z0"},{name:"Maria",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"maria-332@gmail.com",phone:"+91 8189-540178",address:null,gstType:"Consumer",gstin:null},{name:"Tyler",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"tyler.435@partiesunited.co",phone:"+91 7429-650519",address:null,gstType:"Consumer",gstin:null},{name:"Heather",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"heather@yahoo.co.in",phone:"+91 8581-500728",address:null,gstType:"Consumer",gstin:null},{name:"Aaron",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"aaron-332@gmail.com",phone:null,address:null,gstType:"Consumer",gstin:null},{name:"Diane",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"diane@gmail.com",phone:"+91 7137-826433",address:null,gstType:"Consumer",gstin:null},{name:"Jose",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"jose_905@yahoo.co.in",phone:"+91 6231-344468",address:null,gstType:"Consumer",gstin:null},{name:"Virginia",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"virginia_959@yahoo.co.in",phone:"+91 6642-811609",address:null,gstType:"Consumer",gstin:null},{name:"Adam",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"adam-747@yahoo.co.in",phone:"+91 9680-421390",address:null,gstType:"Consumer",gstin:null},{name:"Julie",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"julie_316@redis.rs",phone:"+91 7135-908088",address:null,gstType:"Registered Regular",gstin:"27JTJPD8067A1Z4"},{name:"Henry",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"henry-115@gmail.com",phone:"+91 9387-229109",address:null,gstType:"Consumer",gstin:null},{name:"Joyce",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"joyce_116@partiesunited.co",phone:"+91 6797-685407",address:null,gstType:"Consumer",gstin:null},{name:"Nathan",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"nathan.237@partiesunited.co",phone:null,address:null,gstType:"Consumer",gstin:null},{name:"Victoria",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"victoria-362@generic_indian.in",phone:"+91 8697-929638",address:null,gstType:"Consumer",gstin:null},{name:"Douglas",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"douglas_940@yahoo.co.in",phone:null,address:null,gstType:"Consumer",gstin:null},{name:"Olivia",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"olivia.438@gmail.com",phone:"+91 9925-579281",address:null,gstType:"Registered Regular",gstin:"07HJRPQ5913I1Z6"},{name:"Zachary",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:null,phone:"+91 7752-067279",address:null,gstType:"Consumer",gstin:null},{name:"Kelly",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"kelly-569@generic_indian.in",phone:"+91 7858-074356",address:null,gstType:"Consumer",gstin:null},{name:"Peter",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"peter_295@partiesunited.co",phone:"+91 8471-579894",address:null,gstType:"Consumer",gstin:null},{name:"Kyle",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"kyle_753@gmail.com",phone:"+91 8638-076686",address:null,gstType:"Consumer",gstin:null},{name:"Lauren",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"lauren_876@generic_indian.in",phone:"+91 6701-905380",address:null,gstType:"Consumer",gstin:null},{name:"Walter",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"walter-392@gmail.com",phone:"+91 8196-877407",address:null,gstType:"Consumer",gstin:null},{name:"Joan",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:null,phone:"+91 8678-760803",address:null,gstType:"Consumer",gstin:null},{name:"Ethan",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"ethan-879@redis.rs",phone:"+91 7878-450479",address:null,gstType:"Consumer",gstin:null},{name:"Evelyn",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"evelyn@generic_indian.in",phone:"+91 9856-258902",address:null,gstType:"Consumer",gstin:null},{name:"Jeremy",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"jeremy_290@redis.rs",phone:"+91 6383-093707",address:null,gstType:"Consumer",gstin:null},{name:"Judith",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"judith@partiesunited.co",phone:"+91 6687-472462",address:null,gstType:"Consumer",gstin:null},{name:"Harold",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:null,phone:"+91 8811-307098",address:null,gstType:"Registered Regular",gstin:"32AZTPA5997N1Z3"},{name:"Megan",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"megan_864@redis.rs",phone:"+91 9622-798026",address:null,gstType:"Consumer",gstin:null},{name:"Keith",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:null,phone:"+91 9827-357442",address:null,gstType:"Consumer",gstin:null},{name:"Cheryl",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"cheryl.704@gmail.com",phone:"+91 9470-151094",address:null,gstType:"Registered Regular",gstin:"32EHNPM9327R1Z10"},{name:"Christian",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"christian.307@redis.rs",phone:"+91 7820-659075",address:null,gstType:"Consumer",gstin:null},{name:"Andrea",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"andrea-66@yahoo.co.in",phone:"+91 8865-015945",address:null,gstType:"Consumer",gstin:null},{name:"Roger",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"roger_398@yahoo.co.in",phone:"+91 9010-018524",address:null,gstType:"Consumer",gstin:null},{name:"Hannah",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"hannah-742@partiesunited.co",phone:"+91 8839-110499",address:null,gstType:"Consumer",gstin:null},{name:"Noah",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"noah-65@generic_indian.in",phone:"+91 8386-843599",address:null,gstType:"Consumer",gstin:null},{name:"Martha",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"martha.441@generic_indian.in",phone:"+91 7881-002204",address:null,gstType:"Consumer",gstin:null},{name:"Gerald",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:null,phone:"+91 8448-134403",address:null,gstType:"Consumer",gstin:null},{name:"Jacqueline",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"jacqueline-981@generic_indian.in",phone:"+91 6343-646106",address:null,gstType:"Consumer",gstin:null},{name:"Carl",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"carl-878@generic_indian.in",phone:"+91 7642-940183",address:null,gstType:"Consumer",gstin:null},{name:"Frances",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"frances_178@generic_indian.in",phone:null,address:null,gstType:"Consumer",gstin:null},{name:"Terry",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"terry-434@yahoo.co.in",phone:"+91 7919-057462",address:null,gstType:"Consumer",gstin:null},{name:"Gloria",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"gloria-239@yahoo.co.in",phone:"+91 6633-860264",address:null,gstType:"Consumer",gstin:null},{name:"Sean",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"sean@yahoo.co.in",phone:"+91 8597-778037",address:null,gstType:"Consumer",gstin:null},{name:"Ann",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"ann_30@gmail.com",phone:"+91 7553-381240",address:null,gstType:"Consumer",gstin:null},{name:"Austin",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"austin-910@partiesunited.co",phone:"+91 8179-903611",address:null,gstType:"Consumer",gstin:null},{name:"Teresa",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"teresa.461@yahoo.co.in",phone:"+91 8654-794198",address:null,gstType:"Consumer",gstin:null},{name:"Arthur",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"arthur.261@gmail.com",phone:"+91 8591-727345",address:null,gstType:"Consumer",gstin:null},{name:"Kathryn",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:null,phone:"+91 7553-353763",address:null,gstType:"Consumer",gstin:null},{name:"Lawrence",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"lawrence_504@redis.rs",phone:"+91 7800-930823",address:null,gstType:"Consumer",gstin:null},{name:"Sara",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"sara-874@redis.rs",phone:"+91 6550-401548",address:null,gstType:"Consumer",gstin:null},{name:"Jesse",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:null,phone:"+91 8391-197233",address:null,gstType:"Consumer",gstin:null},{name:"Janice",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"janice-3@generic_indian.in",phone:"+91 7838-829539",address:null,gstType:"Consumer",gstin:null},{name:"Dylan",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"dylan_17@partiesunited.co",phone:"+91 8490-297413",address:null,gstType:"Consumer",gstin:null},{name:"Jean",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"jean_67@partiesunited.co",phone:"+91 6536-623838",address:null,gstType:"Registered Regular",gstin:"30KKJPQ1372G1Z6"},{name:"Bryan",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"bryan-34@gmail.com",phone:"+91 9573-313194",address:null,gstType:"Consumer",gstin:null},{name:"Alice",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"alice.708@redis.rs",phone:null,address:null,gstType:"Consumer",gstin:null},{name:"Joe",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"joe.232@generic_indian.in",phone:"+91 6815-438967",address:null,gstType:"Registered Regular",gstin:"22LGOPA3222S1Z0"},{name:"Madison",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"madison_16@partiesunited.co",phone:"+91 6323-819289",address:null,gstType:"Consumer",gstin:null},{name:"Jordan",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"jordan_329@gmail.com",phone:"+91 9958-214474",address:null,gstType:"Consumer",gstin:null},{name:"Doris",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:null,phone:"+91 8265-604921",address:null,gstType:"Consumer",gstin:null},{name:"Billy",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"billy.876@partiesunited.co",phone:"+91 8252-440697",address:null,gstType:"Registered Regular",gstin:"32WTVPO1637Q1Z2"},{name:"Abigail",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"abigail-445@generic_indian.in",phone:"+91 9110-758387",address:null,gstType:"Consumer",gstin:null},{name:"Bruce",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"bruce.639@generic_indian.in",phone:"+91 7279-246307",address:null,gstType:"Consumer",gstin:null},{name:"Julia",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"julia.950@partiesunited.co",phone:"+91 8121-831374",address:null,gstType:"Consumer",gstin:null},{name:"Albert",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"albert@yahoo.co.in",phone:"+91 9380-129478",address:null,gstType:"Registered Regular",gstin:"27LJNPL5438V1Z3"},{name:"Judy",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"judy-622@redis.rs",phone:"+91 8288-615356",address:null,gstType:"Consumer",gstin:null},{name:"Willie",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"willie.482@gmail.com",phone:"+91 9463-671396",address:null,gstType:"Consumer",gstin:null},{name:"Grace",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"grace-113@redis.rs",phone:"+91 7939-158183",address:null,gstType:"Consumer",gstin:null},{name:"Gabriel",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"gabriel_997@yahoo.co.in",phone:"+91 8622-240964",address:null,gstType:"Consumer",gstin:null},{name:"Denise",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"denise.960@redis.rs",phone:"+91 9377-118903",address:null,gstType:"Consumer",gstin:null},{name:"Logan",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:null,phone:null,address:null,gstType:"Consumer",gstin:null},{name:"Amber",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"amber-307@partiesunited.co",phone:"+91 9029-427995",address:null,gstType:"Consumer",gstin:null},{name:"Alan",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"alan.844@yahoo.co.in",phone:"+91 7506-672233",address:null,gstType:"Consumer",gstin:null},{name:"Marilyn",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"marilyn@partiesunited.co",phone:"+91 8471-047686",address:null,gstType:"Consumer",gstin:null},{name:"Juan",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:null,phone:"+91 7977-135896",address:null,gstType:"Consumer",gstin:null},{name:"Beverly",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"beverly-993@gmail.com",phone:null,address:null,gstType:"Consumer",gstin:null},{name:"Wayne",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"wayne.497@redis.rs",phone:"+91 9886-432030",address:null,gstType:"Consumer",gstin:null},{name:"Danielle",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"danielle_813@yahoo.co.in",phone:"+91 8980-756924",address:null,gstType:"Consumer",gstin:null},{name:"Roy",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"roy.350@gmail.com",phone:"+91 9930-062360",address:null,gstType:"Consumer",gstin:null},{name:"Theresa",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"theresa.538@partiesunited.co",phone:"+91 7079-462390",address:null,gstType:"Consumer",gstin:null},{name:"Ralph",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"ralph-611@gmail.com",phone:"+91 6564-488033",address:null,gstType:"Consumer",gstin:null},{name:"Sophia",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:null,phone:"+91 8603-039297",address:null,gstType:"Consumer",gstin:null},{name:"Randy",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"randy.493@yahoo.co.in",phone:"+91 6692-244741",address:null,gstType:"Consumer",gstin:null},{name:"Marie",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"marie.328@partiesunited.co",phone:"+91 9089-500095",address:null,gstType:"Consumer",gstin:null},{name:"Eugene",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"eugene-126@redis.rs",phone:null,address:null,gstType:"Registered Regular",gstin:"27ISQPL0662M1Z9"},{name:"Diana",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:null,phone:"+91 8582-063412",address:null,gstType:"Consumer",gstin:null},{name:"Vincent",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"vincent-551@redis.rs",phone:"+91 7307-403536",address:null,gstType:"Registered Regular",gstin:"32POPPV9927R1Z9"},{name:"Brittany",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"brittany_431@partiesunited.co",phone:"+91 7124-128260",address:null,gstType:"Consumer",gstin:null},{name:"Russell",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:null,phone:"+91 6315-053860",address:null,gstType:"Consumer",gstin:null},{name:"Natalie",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"natalie-655@generic_indian.in",phone:null,address:null,gstType:"Consumer",gstin:null},{name:"Elijah",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"elijah-660@gmail.com",phone:"+91 7596-290047",address:null,gstType:"Consumer",gstin:null},{name:"Isabella",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"isabella@yahoo.co.in",phone:"+91 7294-796072",address:null,gstType:"Consumer",gstin:null},{name:"Louis",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"louis-336@gmail.com",phone:"+91 9433-004577",address:null,gstType:"Consumer",gstin:null},{name:"Charlotte",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"charlotte-886@gmail.com",phone:"+91 6655-639480",address:null,gstType:"Consumer",gstin:null},{name:"Bobby",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"bobby_737@yahoo.co.in",phone:"+91 8534-723705",address:null,gstType:"Consumer",gstin:null},{name:"Rose",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"rose-274@partiesunited.co",phone:"+91 9337-991300",address:null,gstType:"Consumer",gstin:null},{name:"Philip",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"philip.930@gmail.com",phone:"+91 9925-686539",address:null,gstType:"Consumer",gstin:null},{name:"Alexis",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"alexis_850@yahoo.co.in",phone:null,address:null,gstType:"Consumer",gstin:null},{name:"Johnny",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"johnny_204@generic_indian.in",phone:"+91 7187-876740",address:null,gstType:"Consumer",gstin:null},{name:"Kayla",role:"Customer",defaultAccount:"Debtors",currency:"INR",email:"kayla-287@generic_indian.in",phone:"+91 9985-769077",address:null,gstType:"Consumer",gstin:null},{name:"Le Socials",role:"Supplier",defaultAccount:"Creditors",currency:"INR",email:"le-socials_172@yahoo.co.in",phone:"+91 9879-452232",address:null,gstType:"Registered Regular",gstin:"07RAQCB3836J1Z8"},{name:"Janky Office Spaces",role:"Supplier",defaultAccount:"Creditors",currency:"INR",email:"janky.office.spaces-417@yahoo.co.in",phone:"+91 7308-863851",address:null,gstType:"Registered Regular",gstin:"32UGFPV2343M1Z4"},{name:"Josfa's 611s",role:"Supplier",defaultAccount:"Creditors",currency:"INR",email:"josfa's_611s@redis.rs",phone:"+91 6085-833491",address:null,gstType:"Registered Regular",gstin:"30GHJPM5774L1Z9"},{name:"Lankness Feet Fomenters",role:"Supplier",defaultAccount:"Creditors",currency:"INR",email:"lankness_feet_fomenters_222@redis.rs",phone:"+91 7985-215055",address:null,gstType:"Registered Regular",gstin:"30SHWCG9396V1Z6"},{name:"The Overclothes Company",role:"Supplier",defaultAccount:"Creditors",currency:"INR",email:"the-overclothes-company.105@yahoo.co.in",phone:"+91 7245-972879",address:null,gstType:"Registered Regular",gstin:"07ULPPU8278Q1Z6"},{name:"Adani Electricity Mumbai Limited",role:"Supplier",defaultAccount:"Creditors",currency:"INR",email:"adani-electricity-mumbai-limited-903@yahoo.co.in",phone:"+91 9955-187016",address:null,gstType:"Registered Regular",gstin:"22KTNCA0958Q1Z4"},{name:"Only Fulls",role:"Supplier",defaultAccount:"Creditors",currency:"INR",email:"only.fulls_465@gmail.com",phone:"+91 9291-250658",address:null,gstType:"Registered Regular",gstin:"07HWIPM5574P1Z10"},{name:"Just Epaulettes",role:"Supplier",defaultAccount:"Creditors",currency:"INR",email:"just_epaulettes-901@partiesunited.co",phone:"+91 8233-194054",address:null,gstType:"Registered Regular",gstin:"32OZWPO6297K1Z10"},{name:"Maxwell",role:"Both",defaultAccount:null,currency:"INR",email:"maxwell.688@gmail.com",phone:"+91 9065-184842",address:null,gstType:"Unregistered",gstin:null}];async function s9e(t,e,n=1,i=1e3,s){var a;await e.purgeCache(),s==null||s(e.t`Setting Up Instance`,-1);const r={logo:null,companyName:"Flo's Clothes",country:"India",fullname:"Lin Florentine",email:"lin@flosclothes.com",bankName:"Supreme Bank",currency:"INR",fiscalYearStart:Wy("04-01",!0).toISOString(),fiscalYearEnd:Wy("04-01",!1).toISOString(),chartOfAccounts:"India - Chart of Accounts"};await EQ(t,r,e),e.store.skipTelemetryLogging=!0,n=Math.floor(n),s==null||s(e.t`Creating Items and Parties`,-1),await p9e(e),await o9e(e,n,i,s),await r9e(e);const o=await e.getValue(A.SystemSettings,"instanceId");return await((a=e.singles.SystemSettings)==null?void 0:a.setAndSync("hideGetStarted",!0)),e.store.skipTelemetryLogging=!1,{companyName:r.companyName,instanceId:o}}async function r9e(t){const e=await t.doc.getDoc(A.PrintSettings),n=t.doc.getNewDoc(A.Address);await n.setAndSync({addressLine1:"1st Column, Fitzgerald Bridge",city:"Pune",state:"Maharashtra",pos:"Maharashtra",postalCode:"411001",country:"India"}),await e.setAndSync({color:"#F687B3",template:"Business",displayLogo:!0,phone:"+91 8983-000418",logo:i9e,address:n.name}),await(await t.doc.getDoc(A.AccountingSettings)).setAndSync({gstin:"27LIN180000A1Z5"})}async function o9e(t,e,n,i){const s=await u9e(t,e,n,i);i==null||i(t.t`Creating Purchase Invoices`,-1);const r=await d9e(t,e,s);i==null||i(t.t`Creating Journal Entries`,-1);const o=await a9e(t,s);await q2(o,i);const a=[s,r].flat().sort((c,u)=>+c.date-+u.date);await q2(a,i);const l=await l9e(t,a);await q2(l,i)}async function a9e(t,e){const n=[],i=e.map(a=>a.items).flat().reduce((a,l)=>a.add(l.amount),t.pesa(0)).percent(75).clip(0),s=e.sort((a,l)=>+a.date-+l.date).at(-1).date,r=Te.fromJSDate(s).minus({months:6}).toJSDate();let o=t.doc.getNewDoc(A.JournalEntry,{date:r,entryType:"Bank Entry"},!1);return await o.append("accounts",{account:"Supreme Bank",debit:i,credit:t.pesa(0)}),await o.append("accounts",{account:"Secured Loans",credit:i,debit:t.pesa(0)}),n.push(o),o=t.doc.getNewDoc(A.JournalEntry,{date:r,entryType:"Cash Entry"},!1),await o.append("accounts",{account:"Cash",debit:i.percent(30),credit:t.pesa(0)}),await o.append("accounts",{account:"Supreme Bank",credit:i.percent(30),debit:t.pesa(0)}),n.push(o),n}async function l9e(t,e){var i;const n=[];for(const s of e){if(s.isSales&&Math.random()<.007)continue;const r=t.doc.getNewDoc(A.Payment,{},!1);r.party=s.party,r.paymentType=s.isSales?"Receive":"Pay",r.paymentMethod="Cash",r.date=Te.fromJSDate(s.date).plus({hours:1}).toJSDate(),r.paymentType==="Receive"?(r.account="Debtors",r.paymentAccount="Cash"):(r.account="Cash",r.paymentAccount="Creditors"),r.amount=s.outstandingAmount,s.isSales&&Math.random()<.05&&await r.set("writeOff",(i=s.outstandingAmount)==null?void 0:i.percent(15)),r.push("for",{referenceType:s.schemaName,referenceName:s.name,amount:s.outstandingAmount}),!r.amount.isZero()&&n.push(r)}return n}function c9e(t,e){const n=[];for(const i of Vi.range(0,t*12)){const s=t9e(i),r=Math.ceil(s*e*(Math.random()*.25+.75));n.push(...n9e(r,i))}return n}async function u9e(t,e,n,i){const s=[],r=ax.filter(l=>l.for!=="Purchases"),o=FQ.filter(l=>l.role!=="Supplier"),a=c9e(e,n);for(let l=0;l<a.length;l++){const c=a[l];i==null||i(`Creating Sales Invoices, ${l} out of ${a.length}`,Jc(l)/a.length);const u=Vi.sample(o),h=t.doc.getNewDoc(A.SalesInvoice,{date:c},!1);await h.set("party",u.name),h.account||(h.account="Debtors");const p=Math.ceil(Math.random()*5);for(let m=0;m<p;m++){const y=Vi.sample(r);if((h.items??[]).find(T=>T.item===y))continue;let O=1;y.rate<100&&Math.random()<.4?O=Math.ceil(Math.random()*10):y.rate<1e3&&Math.random()<.2?O=Math.ceil(Math.random()*4):Math.random()<.01&&(O=Math.ceil(Math.random()*3));let S=LQ[c.getMonth()];n<500&&(S+=1);const x=t.pesa(y.rate*(S+1)).clip(0);await h.append("items",{}),await h.items.at(-1).set({item:y.name,rate:x,quantity:O,account:y.incomeAccount,amount:x.mul(O),tax:y.tax,description:y.description,hsnCode:y.hsnCode})}s.push(h)}return s}async function d9e(t,e,n){return[await h9e(t,n),await f9e(t,e)].flat()}async function h9e(t,e){const n=[],i=e.map(o=>{const a=Te.fromJSDate(o.date);return{key:`${a.year}-${String(a.month).padStart(2,"0")}`,si:o}}).reduce((o,a)=>{var l;return o[l=a.key]??(o[l]=[]),o[a.key].push(a.si),o},{}),s=Object.keys(i).map(o=>({key:o,date:new Date(o)})).sort((o,a)=>+o.date-+a.date),r={};for(const{key:o,date:a}of s){const l=i[o].reduce((u,h)=>{var p;for(const m of h.items)m.item!=="Dry-Cleaning"&&(u[p=m.item]??(u[p]=0),u[m.item]+=m.quantity);return u},{});Object.keys(l).forEach(u=>{const h=l[u];r[u]??(r[u]=0);let p=r[u];p<=h&&(p=h-p),r[u]=Math.ceil(p/10)*10});const c=Object.keys(l).reduce((u,h)=>{const p=NQ[h];return u[p]??(u[p]=[]),u[p].push(h),u},{});for(const u in c){const h=t.doc.getNewDoc(A.PurchaseInvoice,{date:a},!1);await h.set("party",u),h.account||(h.account="Creditors");for(const p of c[u]){await h.append("items",{});const m=r[p];await h.items.at(-1).set({item:p,quantity:m})}n.push(h)}}return n}async function f9e(t,e){const n=ax.filter(o=>o.for!=="Sales"),i=er(n,"name"),s={"Marketing - Video":2,"Social Ads":1,Electricity:1,"Office Cleaning":1,"Office Rent":1},r=[];for(const o of Vi.range(0,e*12)){const a=Te.now().minus({months:o}),l=Te.local(a.year,a.month,1).toJSDate();for(const c in s){if(o%s[c]!==0)continue;const u=t.doc.getNewDoc(A.PurchaseInvoice,{date:l},!1),h=NQ[c];await u.set("party",h),u.account||(u.account="Creditors"),await u.append("items",{});const p=u.items.at(-1),m=i[c];let y=1,O=m.rate;c==="Social Ads"?y=Math.ceil(Math.random()*200):c!=="Office Rent"&&(O=O*(Math.random()*.4+.8)),await p.set({item:m.name,quantity:y,rate:t.pesa(O).clip(0)}),r.push(u)}}return r}async function p9e(t){await m9e(t),await g9e(t)}async function m9e(t){for(const e of ax)await t.doc.getNewDoc("Item",e,!1).sync()}async function g9e(t){for(const e of FQ)await t.doc.getNewDoc("Party",e,!1).sync()}async function q2(t,e){const n={[A.PurchaseInvoice]:b`Invoices`,[A.SalesInvoice]:b`Invoices`,[A.Payment]:b`Payments`,[A.JournalEntry]:b`Journal Entries`},i=t.length;for(let s=0;s<t.length;s++){const r=t[s];e==null||e(`Syncing ${n[r.schemaName]}, ${s} out of ${i}`,Jc(s)/i),await r.sync(),await r.submit()}}const bS={Arabic:"ar",Catalan:"ca-ES",Danish:"da",Dutch:"nl",English:"en",French:"fr",German:"de",Gujarati:"gu",Hindi:"hi",Indonesian:"id",Korean:"ko",Nepali:"np",Persian:"fa",Portuguese:"pt","Simplified Chinese":"zh-CN","Traditional Chinese":"zh-Hant",Spanish:"es",Swedish:"sv",Albanian:"sq",Turkish:"tr"};async function lx(t,e=!1){const n=N.config.get("language");t??(t=n);const{code:i,language:s,usingDefault:r}=y9e(t,n);let o=!0;return i==="en"?l7(void 0):o=await O9e(i),o&&!r&&(N.config.set("language",s),vv.value=s),!e&&o&&t!==n&&ipc.reloadWindow(),o}function y9e(t,e){let n=t??e,i=!1;return n||(n=bv,i=!0),{code:bS[n]??"en",language:n,usingDefault:i}}async function O9e(t){const{success:e,message:n,languageMap:i}=await ipc.getLanguageMap(t);if(e)l7(i),await N.db.translateSchemaMap(i);else{const{showToast:s}=await rn(async()=>{const{showToast:r}=await Promise.resolve().then(()=>Kp);return{showToast:r}},void 0);s({type:"error",message:n})}return e}const b9e=ve({components:{AutoComplete:zl},props:{dontReload:{type:Boolean,default:!1}},computed:{value(){return N.config.get("language")??bv},languageDf(){const t=N.config.get("language");let e=bv;return typeof t=="string"&&(e=t),{fieldname:"language",label:this.t`Language`,fieldtype:"AutoComplete",options:Object.keys(bS).map(n=>({label:n,value:n})),default:e,description:this.t`Set the display language.`}}},methods:{onChange(t){typeof t=="string"&&bS[t]!==void 0&&lx(t,this.dontReload)}}});function v9e(t,e,n,i,s,r){const o=Q("AutoComplete");return w(),H(o,{df:t.languageDf,value:t.value,border:!0,"input-class":"rounded py-1.5",onChange:t.onChange},null,8,["df","value","onChange"])}const w9e=ne(b9e,[["render",v9e]]),S9e=ve({name:"DatabaseSelector",components:{LanguageSelector:w9e,Loading:ZM,FeatherIcon:Kd,Modal:di,Button:At},emits:["file-selected","new-database"],data(){return{openModal:!1,baseCount:100,creationMessage:"",creationPercent:0,creatingDemo:!1,loadingDatabase:!1,files:[]}},async mounted(){await this.setFiles(),N.store.isDevelopment&&(window.ds=this)},methods:{truncate(t){return t.length<72?t:"..."+t.slice(t.length-72)},formatDate(t){return Te.fromISO(t).toRelative()},async deleteDb(t){const e=this.files[t],n=this.setFiles.bind(this);await Qn({title:b`Delete ${e.companyName}?`,detail:b`Database file: ${e.dbPath}`,type:"warning",buttons:[{label:this.t`Yes`,async action(){await xQ(e.dbPath),await n()},isPrimary:!0},{label:this.t`No`,action(){return null},isEscape:!0}]})},async createDemo(){N.store.isDevelopment?this.openModal=!0:await this.startDummyInstanceSetup()},async startDummyInstanceSetup(){const{filePath:t,canceled:e}=await Wl("demo","db");e||!t||(this.creatingDemo=!0,await s9e(t,N,1,this.baseCount,(n,i)=>{this.creationMessage=n,this.creationPercent=i}),fM(N),await N.purgeCache(),await this.setFiles(),this.fyo.telemetry.log(si.Created,"dummy-instance"),this.creatingDemo=!1,this.$emit("file-selected",t))},async setFiles(){const t=await ipc.getDbList();this.files=t==null?void 0:t.sort((e,n)=>Date.parse(n.modified)-Date.parse(e.modified))},newDatabase(){this.creatingDemo||this.$emit("new-database")},async existingDatabase(){var e,n;if(this.creatingDemo)return;const t=(n=(e=await kQ())==null?void 0:e.filePaths)==null?void 0:n[0];this.emitFileSelected(t)},selectFile(t){this.creatingDemo||this.emitFileSelected(t.dbPath)},emitFileSelected(t){t&&this.$emit("file-selected",t)}}}),C9e={class:"w-full w-form shadow-lg rounded-lg border dark:border-gray-800 relative bg-white dark:bg-gray-875",style:{height:"700px"}},A9e={class:"px-4 py-4"},x9e={class:"text-2xl font-semibold select-none dark:text-gray-25"},k9e={class:"text-gray-600 dark:text-gray-400 text-base select-none"},P9e={class:"w-8 h-8 rounded-full bg-blue-500 relative flex-center"},T9e={class:"font-medium dark:text-gray-200"},$9e={class:"text-sm text-gray-600 dark:text-gray-400"},D9e={class:"w-8 h-8 rounded-full bg-green-500 dark:bg-green-600 relative flex-center"},M9e={class:"font-medium dark:text-gray-200"},I9e={class:"text-sm text-gray-600 dark:text-gray-400"},R9e={class:"w-8 h-8 rounded-full bg-pink-500 dark:bg-pink-600 relative flex-center"},_9e={class:"font-medium dark:text-gray-200"},E9e={class:"text-sm text-gray-600 dark:text-gray-400"},Q9e={class:"overflow-y-auto",style:{"max-height":"340px"}},N9e=["title","onClick"],L9e={class:"w-8 h-8 rounded-full flex justify-center items-center bg-gray-200 dark:bg-gray-800 text-gray-500 font-semibold flex-shrink-0 text-base"},F9e={class:"w-full"},B9e={class:"flex justify-between overflow-x-auto items-baseline"},V9e={class:"font-medium dark:text-gray-200"},j9e={class:"whitespace-nowrap text-sm text-gray-600 dark:text-gray-400"},z9e={class:"text-sm text-gray-600 dark:text-gray-400 overflow-x-auto no-scrollbar whitespace-nowrap"},Z9e=["onClick"],q9e={key:1,class:"dark:border-gray-800"},X9e={class:"w-full flex justify-between items-center absolute p-4 text-gray-900 dark:text-gray-100",style:{top:"100%",transform:"translateY(-100%)"}},W9e=["disabled"],G9e={class:"p-4 text-gray-900 dark:text-gray-100 w-form"},U9e={class:"flex my-12 justify-center items-baseline gap-4 text-base"},H9e={class:"flex justify-between"};function Y9e(t,e,n,i,s,r){var h,p,m;const o=Q("feather-icon"),a=Q("LanguageSelector"),l=Q("Loading"),c=Q("Button"),u=Q("Modal");return w(),P("div",{class:ee(["flex-1 flex justify-center items-center bg-gray-25 dark:bg-gray-900",{"pointer-events-none":t.loadingDatabase,"window-drag":t.platform!=="Windows"}])},[v("div",C9e,[v("div",A9e,[v("h1",x9e,R(t.t`Welcome to Frappe Books`),1),v("p",k9e,R(t.t`Create a new company or select an existing one from your computer`),1)]),e[8]||(e[8]=v("hr",{class:"dark:border-gray-800"},null,-1)),v("div",{"data-testid":"create-new-file",class:ee(["px-4 h-row-largest flex flex-row items-center gap-4 p-2",t.creatingDemo?"":"hover:bg-gray-50 dark:hover:bg-gray-890 cursor-pointer"]),onClick:e[0]||(e[0]=(...y)=>t.newDatabase&&t.newDatabase(...y))},[v("div",P9e,[_(o,{name:"plus",class:"text-white dark:text-gray-900 w-5 h-5"})]),v("div",null,[v("p",T9e,R(t.t`New Company`),1),v("p",$9e,R(t.t`Create a new company and store it on your computer`),1)])],2),v("div",{class:ee(["px-4 h-row-largest flex flex-row items-center gap-4 p-2",t.creatingDemo?"":"hover:bg-gray-50 dark:hover:bg-gray-890 cursor-pointer"]),onClick:e[1]||(e[1]=(...y)=>t.existingDatabase&&t.existingDatabase(...y))},[v("div",D9e,[_(o,{name:"upload",class:"w-4 h-4 text-white dark:text-gray-900"})]),v("div",null,[v("p",M9e,R(t.t`Existing Company`),1),v("p",I9e,R(t.t`Load an existing company from your computer`),1)])],2),(h=t.files)!=null&&h.length?B("",!0):(w(),P("div",{key:0,class:ee(["px-4 h-row-largest flex flex-row items-center gap-4 p-2",t.creatingDemo?"":"hover:bg-gray-50 dark:hover:bg-gray-890 cursor-pointer"]),onClick:e[2]||(e[2]=(...y)=>t.createDemo&&t.createDemo(...y))},[v("div",R9e,[_(o,{name:"monitor",class:"w-4 h-4 text-white"})]),v("div",null,[v("p",_9e,R(t.t`Create Demo`),1),v("p",E9e,R(t.t`Create a demo company to try out Frappe Books`),1)])],2)),e[9]||(e[9]=v("hr",{class:"dark:border-gray-800"},null,-1)),v("div",Q9e,[(w(!0),P(le,null,Pe(t.files,(y,O)=>(w(),P("div",{key:y.dbPath,class:ee(["h-row-largest px-4 flex gap-4 items-center",t.creatingDemo?"":"hover:bg-gray-50 dark:hover:bg-gray-890 cursor-pointer"]),title:t.t`${y.companyName} stored at ${y.dbPath}`,onClick:S=>t.selectFile(y)},[v("div",L9e,R(O+1),1),v("div",F9e,[v("div",B9e,[v("h2",V9e,R(y.companyName),1),v("p",j9e,R(t.formatDate(y.modified)),1)]),v("p",z9e,R(t.truncate(y.dbPath)),1)]),v("button",{class:"ms-auto p-2 hover:bg-red-200 dark:hover:bg-red-900 dark:hover:bg-opacity-40 rounded-full w-8 h-8 text-gray-600 dark:text-gray-400 hover:text-red-400 dark:hover:text-red-200",onClick:_i(()=>t.deleteDb(O),["stop"])},[_(o,{name:"x",class:"w-4 h-4"})],8,Z9e)],10,N9e))),128))]),(p=t.files)!=null&&p.length?(w(),P("hr",q9e)):B("",!0),v("div",X9e,[mn(_(a,{class:"text-sm w-28"},null,512),[[ii,!t.creatingDemo]]),(m=t.files)!=null&&m.length?(w(),P("button",{key:0,class:"text-sm bg-gray-100 dark:bg-gray-890 hover:bg-gray-200 dark:hover:bg-gray-900 rounded px-4 py-1.5 w-auto h-8 no-scrollbar overflow-x-auto whitespace-nowrap",disabled:t.creatingDemo,onClick:e[3]||(e[3]=(...y)=>t.createDemo&&t.createDemo(...y))},R(t.creatingDemo?t.t`Please Wait`:t.t`Create Demo`),9,W9e)):B("",!0)])]),t.creatingDemo?(w(),H(l,{key:0,open:t.creatingDemo,"show-x":!1,"full-width":!0,percent:t.creationPercent,message:t.creationMessage},null,8,["open","percent","message"])):B("",!0),_(u,{"open-modal":t.openModal,onClosemodal:e[7]||(e[7]=y=>t.openModal=!1)},{default:U(()=>[v("div",G9e,[e[13]||(e[13]=v("h2",{class:"text-xl font-semibold select-none"},"Set Base Count",-1)),e[14]||(e[14]=v("p",{class:"text-base mt-2"}," Base Count is a lower bound on the number of entries made when creating the dummy instance. ",-1)),v("div",U9e,[e[10]||(e[10]=v("label",{for:"basecount",class:"text-gray-600 dark:text-gray-400"},"Base Count",-1)),mn(v("input",{"onUpdate:modelValue":e[4]||(e[4]=y=>t.baseCount=y),type:"number",name:"basecount",class:"bg-gray-100 dark:bg-gray-875 focus:bg-gray-200 dark:focus:bg-gray-890 rounded-md px-2 py-1 outline-none"},null,512),[[qo,t.baseCount]])]),v("div",H9e,[_(c,{onClick:e[5]||(e[5]=y=>t.openModal=!1)},{default:U(()=>[...e[11]||(e[11]=[He("Cancel",-1)])]),_:1}),_(c,{type:"primary",onClick:e[6]||(e[6]=()=>{t.openModal=!1,t.startDummyInstanceSetup()})},{default:U(()=>[...e[12]||(e[12]=[He("Create",-1)])]),_:1})])])]),_:1},8,["open-modal"])],2)}const K9e=ne(S9e,[["render",Y9e]]);function J9e(){const t=rMe();return eMe(t)}function eMe(t){return t.filter(e=>{var n;return e.items=(n=e.items)==null?void 0:n.filter(i=>i.hidden!==void 0?!i.hidden():!0),e.hidden!==void 0?!e.hidden():!0})}function tMe(){var e,n;return!((n=(e=N.singles)==null?void 0:e.AccountingSettings)!=null&&n.gstin)?[]:[{label:b`GST`,name:"gst",icon:"gst",route:"/report/GSTR1",items:[{label:b`GSTR1`,name:"gstr1",route:"/report/GSTR1"},{label:b`GSTR2`,name:"gstr2",route:"/report/GSTR2"}]}]}function nMe(){var e;return!((e=N.singles.AccountingSettings)!=null&&e.enableInventory)?[]:[{label:b`Inventory`,name:"inventory",icon:"inventory",iconSize:"18",route:"/list/StockMovement",items:[{label:b`Stock Movement`,name:"stock-movement",route:"/list/StockMovement",schemaName:"StockMovement"},{label:b`Shipment`,name:"shipment",route:"/list/Shipment",schemaName:"Shipment"},{label:b`Purchase Receipt`,name:"purchase-receipt",route:"/list/PurchaseReceipt",schemaName:"PurchaseReceipt"},{label:b`Stock Ledger`,name:"stock-ledger",route:"/report/StockLedger"},{label:b`Stock Balance`,name:"stock-balance",route:"/report/StockBalance"}]}]}function iMe(){return{label:b`POS`,name:"pos",route:"/pos",icon:"pos",hidden:()=>{var t;return!((t=N.singles.InventorySettings)!=null&&t.enablePointOfSale)}}}function sMe(){return{label:b`Reports`,name:"reports",icon:"reports",route:"/report/GeneralLedger",items:[{label:b`General Ledger`,name:"general-ledger",route:"/report/GeneralLedger"},{label:b`Profit And Loss`,name:"profit-and-loss",route:"/report/ProfitAndLoss"},{label:b`Balance Sheet`,name:"balance-sheet",route:"/report/BalanceSheet"},{label:b`Trial Balance`,name:"trial-balance",route:"/report/TrialBalance"}]}}function rMe(){return[{label:b`Get Started`,name:"get-started",route:"/get-started",icon:"general",iconSize:"24",iconHeight:5,hidden:()=>{var t;return!!((t=N.singles.SystemSettings)!=null&&t.hideGetStarted)}},{label:b`Dashboard`,name:"dashboard",route:"/",icon:"dashboard"},{label:b`Sales`,name:"sales",icon:"sales",route:"/list/SalesInvoice",items:[{label:b`Sales Quotes`,name:"sales-quotes",route:"/list/SalesQuote",schemaName:"SalesQuote"},{label:b`Sales Invoices`,name:"sales-invoices",route:"/list/SalesInvoice",schemaName:"SalesInvoice"},{label:b`Sales Payments`,name:"payments",route:`/list/Payment/${b`Sales Payments`}`,schemaName:"Payment",filters:ms.SalesPayments},{label:b`Customers`,name:"customers",route:`/list/Party/${b`Customers`}`,schemaName:"Party",filters:ms.Customers},{label:b`Sales Items`,name:"sales-items",route:`/list/Item/${b`Sales Items`}`,schemaName:"Item",filters:ms.SalesItems},{label:b`Loyalty Program`,name:"loyalty-program",route:"/list/LoyaltyProgram",schemaName:"LoyaltyProgram",hidden:()=>{var t;return!((t=N.singles.AccountingSettings)!=null&&t.enableLoyaltyProgram)}},{label:b`Lead`,name:"lead",route:"/list/Lead",schemaName:"Lead",hidden:()=>{var t;return!((t=N.singles.AccountingSettings)!=null&&t.enableLead)}},{label:b`Pricing Rule`,name:"pricing-rule",route:"/list/PricingRule",schemaName:"PricingRule",hidden:()=>{var t;return!((t=N.singles.AccountingSettings)!=null&&t.enablePricingRule)}},{label:b`Coupon Code`,name:"coupon-code",route:"/list/CouponCode",schemaName:"CouponCode",hidden:()=>{var t;return!((t=N.singles.AccountingSettings)!=null&&t.enableCouponCode)}}]},{label:b`Purchases`,name:"purchases",icon:"purchase",route:"/list/PurchaseInvoice",items:[{label:b`Purchase Invoices`,name:"purchase-invoices",route:"/list/PurchaseInvoice",schemaName:"PurchaseInvoice"},{label:b`Purchase Payments`,name:"payments",route:`/list/Payment/${b`Purchase Payments`}`,schemaName:"Payment",filters:ms.PurchasePayments},{label:b`Suppliers`,name:"suppliers",route:`/list/Party/${b`Suppliers`}`,schemaName:"Party",filters:ms.Suppliers},{label:b`Purchase Items`,name:"purchase-items",route:`/list/Item/${b`Purchase Items`}`,schemaName:"Item",filters:ms.PurchaseItems}]},{label:b`Common`,name:"common-entries",icon:"common-entries",route:"/list/JournalEntry",items:[{label:b`Journal Entry`,name:"journal-entry",route:"/list/JournalEntry",schemaName:"JournalEntry"},{label:b`Party`,name:"party",route:"/list/Party",schemaName:"Party",filters:{role:["in",["Customer","Supplier","Both"]]}},{label:b`Items`,name:"common-items",route:`/list/Item/${b`Items`}`,schemaName:"Item",filters:{for:"Both"}},{label:b`Price List`,name:"price-list",route:"/list/PriceList",schemaName:"PriceList",hidden:()=>{var t;return!((t=N.singles.AccountingSettings)!=null&&t.enablePriceList)}}]},sMe(),nMe(),iMe(),tMe(),{label:b`Setup`,name:"setup",icon:"settings",route:"/chart-of-accounts",items:[{label:b`Chart of Accounts`,name:"chart-of-accounts",route:"/chart-of-accounts"},{label:b`Tax Templates`,name:"taxes",route:"/list/Tax",schemaName:"Tax"},{label:b`Import Wizard`,name:"import-wizard",route:"/import-wizard"},{label:b`Print Templates`,name:"print-template",route:`/list/PrintTemplate/${b`Print Templates`}`},{label:b`Customize Form`,name:"customize-form",route:`/list/CustomForm/${b`Customize Form`}`,hidden:()=>{var t;return!((t=N.singles.AccountingSettings)!=null&&t.enableFormCustomization)}},{label:b`Settings`,name:"settings",route:"/settings"}]}].flat()}const oMe=ve({components:{FormHeader:Za,ShortcutKeys:K_},data(){return{groups:[]}},mounted(){this.groups=[{label:b`Global`,description:b`Applicable anywhere in Frappe Books`,collapsed:!1,shortcuts:[{shortcut:[vt.pmod,"K"],description:b`Open Quick Search`},{shortcut:[vt.shift,vt.delete],description:b`Go back to the previous page`},{shortcut:[vt.shift,"H"],description:b`Toggle sidebar`},{shortcut:["F1"],description:b`Open Documentation`}]},{label:b`Entry`,description:b`Applicable when a entry is open in the Form view or Quick Edit view`,collapsed:!1,shortcuts:[{shortcut:[vt.pmod,"S"],description:[b`Save or Submit an entry.`,b`An entry is submitted only if it is submittable and is in the saved state.`].join(" ")},{shortcut:[vt.pmod,vt.delete],description:[b`Cancel or Delete an entry.`,b`An entry is cancelled only if it is in the submitted state.`,b`A submittable entry is deleted only if it is in the cancelled state.`].join(" ")},{shortcut:[vt.pmod,"P"],description:b`Open Print View if Print is available.`},{shortcut:[vt.pmod,"L"],description:b`Toggle Linked Entries widget, not available in Quick Edit view.`}]},{label:b`List View`,description:b`Applicable when the List View of an entry type is open`,collapsed:!1,shortcuts:[{shortcut:[vt.pmod,"N"],description:b`Create a new entry of the same type as the List View`},{shortcut:[vt.pmod,"E"],description:b`Open the Export Wizard modal`}]},{label:b`Quick Search`,description:b`Applicable when Quick Search is open`,collapsed:!1,shortcuts:[{shortcut:[vt.esc],description:b`Close Quick Search`},{shortcut:[vt.pmod,"1"],description:b`Toggle the Docs filter`},{shortcut:[vt.pmod,"2"],description:b`Toggle the List filter`},{shortcut:[vt.pmod,"3"],description:b`Toggle the Create filter`},{shortcut:[vt.pmod,"4"],description:b`Toggle the Report filter`},{shortcut:[vt.pmod,"5"],description:b`Toggle the Page filter`}]},{label:b`Template Builder`,description:b`Applicable when Template Builder is open`,collapsed:!1,shortcuts:[{shortcut:[vt.ctrl,vt.enter],description:b`Apply and view changes made to the print template`},{shortcut:[vt.ctrl,"E"],description:b`Toggle Edit Mode`},{shortcut:[vt.ctrl,"H"],description:b`Toggle Key Hints`},{shortcut:[vt.ctrl,"+"],description:b`Increase print template display scale`},{shortcut:[vt.ctrl,"-"],description:b`Decrease print template display scale`}]},{label:b`Point of Sale`,description:b`Applicable when POS is open`,collapsed:!1,shortcuts:[{shortcut:[vt.shift,"V"],description:b`Toggle between Grid and List view`},{shortcut:[vt.shift,"S"],description:b`Open Sales Invoice List`},{shortcut:[vt.shift,"L"],description:b`Set Loyalty Program`},{shortcut:[vt.shift,"C"],description:b`Set Coupon Code`},{shortcut:[vt.shift,"P"],description:b`Set Price List`},{shortcut:["Q","0-9"],description:b`Hold Q and type digits to set selected item quantity`},{shortcut:[vt.pmod,vt.shift,"H"],description:b`Open Saved or Submitted Invoice List.`},{shortcut:[vt.pmod,vt.shift,"S"],description:b`If any entry form is open, save the details. Otherwise, save the invoice.`},{shortcut:[vt.pmod,vt.shift,"P"],description:b`Create Payment.`},{shortcut:[vt.pmod,vt.shift,vt.delete],description:b`If any entry form is open, your entry will be canceled. Otherwise the selected items will be removed.`}]}]}}),aMe={class:"h-96 overflow-y-auto custom-scroll custom-scroll-thumb2 text-gray-900 dark:text-gray-100"},lMe={class:"p-4 w-full"},cMe=["onClick"],uMe={class:"font-semibold"},dMe={class:"text-base"},hMe={key:0,class:"flex flex-col gap-4"},fMe={class:"whitespace-normal text-base"},pMe={key:1,class:"text-base text-gray-600 dark:text-gray-400"},mMe={class:"p-4 text-base text-gray-600 dark:text-gray-400"};function gMe(t,e,n,i,s,r){const o=Q("FormHeader"),a=Q("ShortcutKeys");return w(),P("div",null,[_(o,{"form-title":t.t`Shortcuts`},null,8,["form-title"]),e[1]||(e[1]=v("hr",{class:"dark:border-gray-800"},null,-1)),v("div",aMe,[(w(!0),P(le,null,Pe(t.groups,l=>(w(),P(le,{key:l.label},[v("div",lMe,[v("div",{class:"cursor-pointer mb-4",onClick:c=>l.collapsed=!l.collapsed},[v("div",uMe,R(l.label),1),v("div",dMe,R(l.description),1)],8,cMe),l.collapsed?(w(),P("div",pMe,R(t.t`${l.shortcuts.length} shortcuts`),1)):(w(),P("div",hMe,[(w(!0),P(le,null,Pe(l.shortcuts,(c,u)=>(w(),P("div",{key:l.label+" "+u,class:"grid gap-4 items-start",style:{"grid-template-columns":"8rem auto"}},[_(a,{class:"text-base",keys:c.shortcut},null,8,["keys"]),v("div",fMe,R(c.description),1)]))),128))]))]),e[0]||(e[0]=v("hr",{class:"dark:border-gray-800"},null,-1))],64))),128)),v("div",mMe,R(t.t`More shortcuts will be added soon.`),1)])])}const yMe=ne(oMe,[["render",gMe]]),X2="Sidebar",OMe=ve({components:{Icon:s0,Modal:di,ShortcutsHelper:yMe},props:{darkMode:{type:Boolean,default:!1}},emits:["change-db-file","toggle-darkmode"],setup(){return{languageDirection:st(Ep),shortcuts:st(Is)}},data(){return{companyName:"",groups:[],viewShortcuts:!1,activeGroup:null,showDevMode:!1}},computed:{appVersion(){return N.store.appVersion}},async mounted(){var e,n;const{companyName:t}=await N.doc.getDoc("AccountingSettings");this.companyName=t,this.groups=await J9e(),this.setActiveGroup(),Qr.afterEach(()=>{this.setActiveGroup()}),(e=this.shortcuts)==null||e.shift.set(X2,["KeyH"],()=>{document.body===document.activeElement&&this.toggleSidebar()}),(n=this.shortcuts)==null||n.set(X2,["F1"],()=>this.openDocumentation()),this.showDevMode=this.fyo.store.isDevelopment},unmounted(){var t;(t=this.shortcuts)==null||t.delete(X2)},methods:{routeTo:St,reportIssue:ox,toggleSidebar:mp,openDocumentation(){ipc.openLink("https://docs.frappe.io/"+Ai.value)},setActiveGroup(){const{fullPath:t}=this.$router.currentRoute.value,e=this.activeGroup;this.activeGroup=this.groups.find(n=>{if(t.startsWith(n.route)&&n.route!=="/"||n.route===t||n.items&&n.items.filter(({route:s})=>s===t||t.startsWith(s)).length)return!0})??e??this.groups[0]},isItemActive(t){const{path:e,params:n}=this.$route,i=e===t.route,s=t.schemaName&&n.schemaName===t.schemaName,r=i||s;return n.name&&t.schemaName&&!r?e.includes(`${t.schemaName}/${n.name}`):r},isGroupActive(t){return this.activeGroup&&t.label===this.activeGroup.label},routeToSidebarItem(t){St(this.getPath(t))},getPath(t){const{route:e,filters:n}=t;return n?{path:e,query:{filters:JSON.stringify(n)}}:e}}}),bMe={"data-testid":"company-name",class:"font-semibold dark:text-gray-200 whitespace-nowrap overflow-auto no-scrollbar select-none"},vMe=["onClick"],wMe={key:0},SMe=["onClick"],CMe={class:"window-no-drag flex flex-col gap-2 py-2 px-4"};function AMe(t,e,n,i,s,r){const o=Q("Icon"),a=Q("feather-icon"),l=Q("ShortcutsHelper"),c=Q("Modal");return w(),P("div",{class:ee(["py-2 h-full flex justify-between flex-col bg-gray-25 dark:bg-gray-900 relative",{"window-drag":t.platform!=="Windows"}])},[v("div",null,[v("div",{class:ee(["px-4 flex flex-row items-center justify-between mb-4",t.platform==="Mac"&&t.languageDirection==="ltr"?"mt-10":"mt-2"])},[v("h6",bMe,R(t.companyName),1)],2),(w(!0),P(le,null,Pe(t.groups,u=>(w(),P("div",{key:u.label},[v("div",{class:ee(["px-4 flex items-center cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-875 h-10",t.isGroupActive(u)&&!u.items?"bg-gray-100 dark:bg-gray-875 border-s-4 border-gray-800 dark:border-gray-100":""]),onClick:h=>t.routeToSidebarItem(u)},[_(o,{class:ee(["flex-shrink-0",t.isGroupActive(u)&&!u.items?"-ms-1":""]),name:u.icon,size:u.iconSize||"18",height:u.iconHeight??0,active:!!t.isGroupActive(u),darkMode:t.darkMode},null,8,["name","size","height","active","darkMode","class"]),v("div",{class:ee(["ms-2 text-lg text-gray-700",t.isGroupActive(u)&&!u.items?"text-gray-900 dark:text-gray-25":"dark:text-gray-300"])},R(u.label),3)],10,vMe),u.items&&t.isGroupActive(u)?(w(),P("div",wMe,[(w(!0),P(le,null,Pe(u.items,h=>(w(),P("div",{key:h.label,class:ee(["text-base h-10 ps-10 cursor-pointer flex items-center hover:bg-gray-100 dark:hover:bg-gray-875",t.isItemActive(h)?"bg-gray-100 dark:bg-gray-875 text-gray-900 dark:text-gray-100 border-s-4 border-gray-800 dark:border-gray-100":"text-gray-700 dark:text-gray-400"]),onClick:p=>t.routeToSidebarItem(h)},[v("p",{style:qe(t.isItemActive(h)?"margin-left: -4px":"")},R(h.label),5)],10,SMe))),128))])):B("",!0)]))),128))]),v("div",CMe,[v("button",{class:"flex text-sm text-gray-600 dark:text-gray-500 hover:text-gray-800 dark:hover:text-gray-400 gap-1 items-center",onClick:e[0]||(e[0]=(...u)=>t.openDocumentation&&t.openDocumentation(...u))},[_(a,{name:"help-circle",class:"h-4 w-4 flex-shrink-0"}),v("p",null,R(t.t`Help`),1)]),v("button",{class:"flex text-sm text-gray-600 dark:text-gray-500 hover:text-gray-800 dark:hover:text-gray-400 gap-1 items-center",onClick:e[1]||(e[1]=u=>t.viewShortcuts=!0)},[_(a,{name:"command",class:"h-4 w-4 flex-shrink-0"}),v("p",null,R(t.t`Shortcuts`),1)]),v("button",{"data-testid":"change-db",class:"flex text-sm text-gray-600 dark:text-gray-500 hover:text-gray-800 dark:hover:text-gray-400 gap-1 items-center",onClick:e[2]||(e[2]=u=>t.$emit("change-db-file"))},[_(a,{name:"database",class:"h-4 w-4 flex-shrink-0"}),v("p",null,R(t.t`Change DB`),1)]),v("button",{class:"flex text-sm text-gray-600 dark:text-gray-500 hover:text-gray-800 dark:hover:text-gray-400 gap-1 items-center",onClick:e[3]||(e[3]=()=>t.reportIssue())},[_(a,{name:"flag",class:"h-4 w-4 flex-shrink-0"}),v("p",null,R(t.t`Report Issue`),1)]),t.showDevMode?(w(),P("p",{key:0,class:"text-xs text-gray-500 select-none cursor-pointer",onClick:e[4]||(e[4]=u=>t.showDevMode=!1),title:"Open dev tools with Ctrl+Shift+I"}," dev mode ")):B("",!0)]),v("button",{class:"absolute bottom-0 end-0 text-gray-600 dark:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-875 rounded p-1 m-4 rtl-rotate-180",onClick:e[5]||(e[5]=()=>t.toggleSidebar())},[_(a,{name:"chevrons-left",class:"w-4 h-4"})]),_(c,{"open-modal":t.viewShortcuts,onClosemodal:e[6]||(e[6]=u=>t.viewShortcuts=!1)},{default:U(()=>[_(l,{class:"w-form"})]),_:1},8,["open-modal"])],2)}const BQ=ne(OMe,[["render",AMe]]),xMe={class:"flex overflow-hidden"},kMe={class:"flex flex-1 overflow-y-hidden custom-scroll custom-scroll-thumb1 bg-white dark:bg-gray-875"},PMe={key:0},TMe=ve({name:"Desk",components:{Sidebar:BQ},props:{darkMode:{type:Boolean,default:!1}},emits:["change-db-file"]}),$Me=ve({...TMe,setup(t){return(e,n)=>{const i=Q("router-view"),s=Q("feather-icon");return w(),P("div",xMe,[_(Ir,{name:"sidebar"},{default:U(()=>[mn(_(BQ,{class:"flex-shrink-0 border-e dark:border-gray-800 whitespace-nowrap w-sidebar","dark-mode":e.darkMode,onChangeDbFile:n[0]||(n[0]=r=>e.$emit("change-db-file"))},null,8,["dark-mode"]),[[ii,Ys(Fo)]])]),_:1}),v("div",kMe,[_(i,null,{default:U(({Component:r})=>[(w(),H(FT,null,[(w(),H(ro(r),{key:e.$route.path,"dark-mode":e.darkMode,class:"flex-1"},null,8,["dark-mode"]))],1024))]),_:1}),_(i,{name:"edit"},{default:U(({Component:r,route:o})=>[_(Ir,{name:"quickedit"},{default:U(()=>{var a;return[(a=o==null?void 0:o.query)!=null&&a.edit?(w(),P("div",PMe,[(w(),H(ro(r),{key:o.query.schemaName+o.query.name,"dark-mode":e.darkMode},null,8,["dark-mode"]))])):B("",!0)]}),_:2},1024)]),_:1})]),mn(v("button",{class:"absolute bottom-0 start-0 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-900 rounded rtl-rotate-180 p-1 m-4 opacity-0 hover:opacity-100 hover:shadow-md",onClick:n[1]||(n[1]=()=>Ys(mp)())},[_(s,{name:"chevrons-right",class:"w-4 h-4"})],512),[[ii,!Ys(Fo)]])])}}}),DMe=ne($Me,[["__scopeId","data-v-71995493"]]),MMe=ve({name:"SetupWizard",components:{Button:At,FormContainer:Lp,FormHeader:Za,CommonFormSection:KC},provide(){return{doc:Dt(()=>this.docOrNull)}},emits:["setup-complete","setup-canceled"],data(){return{docOrNull:null,errors:{},loading:!1}},computed:{hasDoc(){return this.docOrNull instanceof ze},doc(){if(this.docOrNull instanceof ze)return this.docOrNull;throw new Error("Doc is null")},areAllValuesFilled(){return this.hasDoc?this.doc.schema.fields.filter(e=>e.required).map(e=>this.doc[e.fieldname]).every(Boolean):!1},activeGroup(){return this.hasDoc?[...ex(this.doc.schema,this.doc).values()][0]:new Map}},async mounted(){const t=k1.prototype.languageMap;this.docOrNull=dre(t),this.fyo.db.isConnected||await this.fyo.db.init(),this.fyo.store.isDevelopment&&(window.sw=this),this.fyo.telemetry.log(si.Started,A.SetupWizard)},methods:{async fill(){this.hasDoc&&(await this.doc.set("companyName","Lin's Things"),await this.doc.set("email","lin@lthings.com"),await this.doc.set("fullname","Lin Slovenly"),await this.doc.set("bankName","Max Finance"),await this.doc.set("country","India"))},async onValueChange(t,e){if(!this.hasDoc)return;const{fieldname:n}=t;delete this.errors[n];try{await this.doc.set(n,e)}catch(i){if(!(i instanceof Error))return;this.errors[n]=eh(i,this.doc)}},async submit(){if(this.hasDoc){if(!this.areAllValuesFilled)return await Qn({title:this.t`Mandatory Error`,detail:this.t`Please fill all values.`,type:"error"});this.loading=!0,this.fyo.telemetry.log(si.Completed,A.SetupWizard),this.$emit("setup-complete",this.doc.getValidDict())}},cancel(){this.fyo.telemetry.log(si.Cancelled,A.SetupWizard),this.$emit("setup-canceled")}}}),IMe={key:0,class:"overflow-auto custom-scroll custom-scroll-thumb1"},RMe={class:"mt-auto p-4 flex items-center justify-between border-t dark:border-gray-800 flex-shrink-0 sticky bottom-0 bg-white dark:bg-gray-890"},_Me={key:0,class:"text-base text-gray-600 dark:text-gray-400"};function EMe(t,e,n,i,s,r){const o=Q("FormHeader"),a=Q("CommonFormSection"),l=Q("Button"),c=Q("FormContainer");return w(),H(c,{"show-header":!1,class:ee(["justify-content items-center h-full",{"window-drag":t.platform!=="Windows"}])},{body:U(()=>[_(o,{"form-title":t.t`Set up your organization`,class:"sticky top-0 bg-white dark:bg-gray-890 border-b dark:border-gray-800"},null,8,["form-title"]),t.hasDoc?(w(),P("div",IMe,[(w(!0),P(le,null,Pe(t.activeGroup.entries(),([u,h],p)=>(w(),H(a,{key:u+p,ref_for:!0,ref:"section",class:ee(["p-4",p!==0&&t.activeGroup.size>1?"border-t dark:border-gray-800":""]),"show-title":t.activeGroup.size>1&&u!==t.t`Default`,title:u,fields:h,doc:t.doc,errors:t.errors,collapsible:!1,onValueChange:t.onValueChange},null,8,["class","show-title","title","fields","doc","errors","onValueChange"]))),128))])):B("",!0),v("div",RMe,[t.loading?(w(),P("p",_Me,R(t.t`Loading instance...`),1)):B("",!0),t.loading?B("",!0):(w(),H(l,{key:1,class:"w-24 border dark:border-gray-800",onClick:t.cancel},{default:U(()=>[He(R(t.t`Cancel`),1)]),_:1},8,["onClick"])),t.fyo.store.isDevelopment&&!t.loading?(w(),H(l,{key:2,class:"w-24 ml-auto mr-4 border dark:border-gray-800",disabled:t.loading,onClick:t.fill},{default:U(()=>[He(R(t.t`Fill`),1)]),_:1},8,["disabled","onClick"])):B("",!0),_(l,{type:"primary",class:"w-24","data-testid":"submit-button",disabled:!t.areAllValuesFilled||t.loading,onClick:t.submit},{default:U(()=>[He(R(t.t`Submit`),1)]),_:1},8,["disabled","onClick"])])]),_:1},8,["class"])}const QMe=ne(MMe,[["render",EMe]]),L0={SelectFile:Symbol("select-file"),CancelSelection:Symbol("cancel-selection")},q6={DirectoryDoesNotExist:"directory does not exist",UnableToAcquireConnection:"Unable to acquire a connection"};async function NMe(t,e,n){try{return{countryCode:await t.db.connectToDatabase(e,n)}}catch(i){if(!(i instanceof Error))throw i;return{countryCode:"",error:i,actionSymbol:await LMe(i,e)}}}async function LMe(t,e){const n=t.message;if(typeof n!="string")throw t;if(n.includes(q6.DirectoryDoesNotExist))return await BMe(e);if(n.includes(q6.UnableToAcquireConnection))return await FMe(e);throw t}async function FMe(t){return await VQ(b`Could not connect to database file ${t}, please select the file manually`)}async function BMe(t){return await VQ(b`Directory for database file ${t} does not exist, please select the file manually`)}async function VQ(t){const{showDialog:e}=await rn(async()=>{const{showDialog:n}=await Promise.resolve().then(()=>Kp);return{showDialog:n}},void 0);return e({type:"error",title:b`Cannot Open File`,detail:t,buttons:[{label:b`Select File`,action(){return L0.SelectFile},isPrimary:!0},{label:b`Cancel`,action(){return L0.CancelSelection},isEscape:!0}]})}const VMe=["alt","ctrl","meta","repeat","shift"];var e1,jQ;class jMe{constructor(e){yn(this,e1);this.modMap={},this.keySet=new Set,this.keys=e,this.shortcuts=new Map,this.isMac=mM(),xl(this.keys,n=>{const i=this.getKey(Array.from(n.pressed),n);if(!i)return!1;!i||!this.keySet.has(i)||Ke(this,e1,jQ).call(this,i)})}has(e,n){if(!n)return this.shortcuts.has(e);const i=this.shortcuts.get(e);if(!i)return!1;const s=this.getKey(n);return s?i.has(s):!1}set(e,n,i,s=!1,r=!0){const o=this.getKey(n);if(!o)return;let a=this.shortcuts.get(e);if(a?this.shortcuts.delete(a):a=new Map,a.has(o)&&!r)throw this.shortcuts.set(e,a),new Error(`Shortcut ${o} already exists.`);this.keySet.add(o),a.set(o,{callback:i,propagate:s}),this.shortcuts.set(e,a)}delete(e,n){if(!n)return this.shortcuts.delete(e);const i=this.shortcuts.get(e);if(!i)return!1;const s=this.getKey(n);return s?i.delete(s):!1}getKey(e,n){const i=n||this.modMap;this.modMap={};const s=e.sort().join("+"),r=VMe.filter(o=>i[o]).join("+");return s&&r?r+"+"+s:r?s?null:r:s}get alt(){return this.modMap.alt=!0,this}get ctrl(){return this.modMap.ctrl=!0,this}get meta(){return this.modMap.meta=!0,this}get shift(){return this.modMap.shift=!0,this}get pmodShift(){return this.modMap.meta=!0,this.modMap.shift=!0,this}get repeat(){return this.modMap.repeat=!0,this}get pmod(){return this.isMac?this.meta:this.ctrl}}e1=new WeakSet,jQ=function(e){const n=Array.from(this.shortcuts.keys()).map(i=>{var s;return(s=this.shortcuts.get(i))==null?void 0:s.get(e)}).filter(Boolean).reverse();for(const i of n)if(i.callback(),!i.propagate)break};function zMe(t){if(t){document.documentElement.classList.add("dark","custom-scroll","custom-scroll-thumb1");return}document.documentElement.classList.remove("dark")}const ZMe=ve({name:"App",components:{Desk:DMe,SetupWizard:QMe,DatabaseSelector:K9e,WindowsTitleBar:wH},setup(){const t=cle(),e=Cn(null),n=new jMe(t),i=Cn(X6(vv.value));return wa(Mse,t),wa(sM,e),wa(Is,n),wa(Ep,i),{keys:t,searcher:e,shortcuts:n,languageDirection:i,databaseSelector:Cn(null)}},data(){return{activeScreen:null,dbPath:"",companyName:"",darkMode:!1}},computed:{language(){return vv.value}},watch:{language(t){this.languageDirection=X6(t)}},async mounted(){var e;await this.setInitialScreen();const t=!!((e=N.singles.SystemSettings)!=null&&e.darkMode);zMe(t),this.darkMode=t},methods:{async setInitialScreen(){const t=N.config.get("lastSelectedFilePath",null);if(typeof t!="string"||!t.length){this.activeScreen="DatabaseSelector";return}await this.fileSelected(t)},async setSearcher(){this.searcher=new Ore(N),await this.searcher.initializeKeywords()},async setDesk(t){await lx(),this.activeScreen="Desk",await this.setDeskRoute(),await N.telemetry.start(!0),await ipc.checkForUpdates(),this.dbPath=t,this.companyName=await N.getValue(A.AccountingSettings,"companyName"),await this.setSearcher(),fM(N)},newDatabase(){this.activeScreen="SetupWizard"},async fileSelected(t){if(N.config.set("lastSelectedFilePath",t),t!==":memory:"&&!await ipc.checkDbAccess(t)){await Qn({title:this.t`Cannot open file`,type:"error",detail:this.t`Frappe Books does not have access to the selected file: ${t}`}),N.config.set("lastSelectedFilePath",null);return}try{await this.showSetupWizardOrDesk(t)}catch(e){await mo(e,void 0,!0,!0),await this.showDbSelector()}},async setupComplete(t){const e=t.companyName,n=await ipc.getDbDefaultPath(e);await EQ(n,t,N),N.config.set("lastSelectedFilePath",n),await this.setDesk(n)},async showSetupWizardOrDesk(t){var c,u;const{countryCode:e,error:n,actionSymbol:i}=await NMe(this.fyo,t);if(!e&&n&&i)return await this.handleConnectionFailed(n,i);if(!await N.getValue(A.AccountingSettings,"setupComplete")){this.activeScreen="SetupWizard";return}await IQ(t,!1,e,N),await HM(N);const r=await N.doc.getDoc(A.ERPNextSyncSettings),o=r.baseURL,a=r.authToken;if(((c=N.singles.AccountingSettings)==null?void 0:c.enableERPNextSync)&&o&&a)try{await pY(N),await mY(N),await ipc.initScheduler(`${(u=N.singles.ERPNextSyncSettings)==null?void 0:u.dataSyncInterval}m`)}catch{it({message:"Connection Failed",type:"error"})}await this.setDesk(t)},async handleConnectionFailed(t,e){var n;if(await this.showDbSelector(),e!==L0.CancelSelection){if(e===L0.SelectFile){await((n=this.databaseSelector)==null?void 0:n.existingDatabase());return}throw t}},async setDeskRoute(){const{onboardingComplete:t}=await N.doc.getDoc("GetStarted"),{hideGetStarted:e}=await N.doc.getDoc("SystemSettings");let n="/get-started";(e||t)&&(n=localStorage.getItem("lastRoute")||"/"),await St(n)},async showDbSelector(){localStorage.clear(),N.config.set("lastSelectedFilePath",null),N.telemetry.stop(),await N.purgeCache(),this.activeScreen="DatabaseSelector",this.dbPath="",this.searcher=null,this.companyName=""}}});function X6(t){return UU.includes(t)?"rtl":"ltr"}const qMe=["dir","language"];function XMe(t,e,n,i,s,r){const o=Q("WindowsTitleBar"),a=Q("Desk"),l=Q("DatabaseSelector"),c=Q("SetupWizard");return w(),P("div",{id:"app",class:"dark:bg-gray-900 h-screen flex flex-col font-sans overflow-hidden antialiased",dir:t.languageDirection,language:t.language},[t.platform==="Windows"?(w(),H(o,{key:0,"db-path":t.dbPath,"company-name":t.companyName},null,8,["db-path","company-name"])):B("",!0),t.activeScreen==="Desk"?(w(),H(a,{key:1,class:"flex-1","dark-mode":t.darkMode,onChangeDbFile:t.showDbSelector},null,8,["dark-mode","onChangeDbFile"])):B("",!0),t.activeScreen==="DatabaseSelector"?(w(),H(l,{key:2,ref:"databaseSelector",onNewDatabase:t.newDatabase,onFileSelected:t.fileSelected},null,8,["onNewDatabase","onFileSelected"])):B("",!0),t.activeScreen==="SetupWizard"?(w(),H(c,{key:3,onSetupComplete:t.setupComplete,onSetupCanceled:t.showDbSelector},null,8,["onSetupComplete","onSetupCanceled"])):B("",!0),e[0]||(e[0]=v("div",{id:"toast-container",class:"absolute bottom-0 flex flex-col items-end mb-3 pe-6",style:{width:"100%","pointer-events":"none"}},null,-1))],8,qMe)}const WMe=ne(ZMe,[["render",XMe]]),vS=new Map,GMe={beforeMount(t,e){const n=function(i){UMe(i,t,e.value)};W6(t),vS.set(t,n),document.addEventListener("click",n)},unmounted(t){W6(t)}};function UMe(t,e,n){const i=t.target;e!==i&&!e.contains(i)&&(n==null||n(t))}function W6(t){const e=vS.get(t);e&&(vS.delete(t),document.removeEventListener("click",e))}function HMe(){ipc.registerMainProcessErrorListener((t,e,n)=>{if(!(e instanceof Error))throw e;n||(n={}),typeof n!="object"&&(n={more:n}),n.isMainProcess=!0,n.notifyUser??(n.notifyUser=!0),Sf(!0,e,n,!!n.notifyUser)}),ipc.registerTriggerFrontendActionListener(async()=>{await f7(N)}),ipc.registerConsoleLogListener((t,...e)=>{N.store.isDevelopment&&N.store.isDevelopment&&console.log(...e)}),document.addEventListener("visibilitychange",()=>{const{visibilityState:t}=document;t==="visible"&&!N.telemetry.started&&N.telemetry.start(),t==="hidden"&&N.telemetry.stop()})}(async()=>{const t=N.config.get("language");t&&await lx(t),N.store.language=t||"English",HMe();const{isDevelopment:e,platform:n,version:i}=await ipc.getEnv();N.store.isDevelopment=e,N.store.appVersion=i,N.store.platform=n;const s=JMe(n);KMe(e);const r=bd({template:"<App/>"});r.config.unwrapInjectedRef=!0,YMe(r),r.use(Qr),r.component("App",WMe),r.component("FeatherIcon",Kd),r.component("Badge",YC),r.directive("on-outside-click",GMe),r.mixin({computed:{fyo(){return N},platform(){return s}},methods:{t:N.t,T:N.T}}),await N.telemetry.logOpened(),r.mount("body")})();function YMe(t){window.onerror=(e,n,i,s,r)=>{r=r??new Error("triggered in window.onerror"),Sf(!0,r,{message:e,source:n,lineno:i,colno:s})},window.onunhandledrejection=e=>{let n;e.reason instanceof Error?n=e.reason:n=new Error(String(e.reason)),Sf(!0,n).catch(i=>console.error(i))},window.addEventListener(H6.LOG_UNEXPECTED,e=>{const n=e==null?void 0:e.detail;TQ(n)}),t.config.errorHandler=(e,n,i)=>{const s={info:i};if(n){const{fullPath:r,params:o}=n.$route;s.fullPath=r,s.params=Wv(o??{}),s.props=Wv(n.$props??{},!0,!0)}Sf(!1,e,s),console.error(e,n,i)}}function KMe(t){t&&(window.router=Qr,window.fyo=N)}function JMe(t){switch(t){case"win32":return"Windows";case"darwin":return"Mac";case"linux":return"Linux";default:return"Linux"}}export{zDe as A,EM as P,vl as c};
